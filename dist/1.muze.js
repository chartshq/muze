(window.webpackJsonpmuze=window.webpackJsonpmuze||[]).push([[1],{114:function(t,e,r){"use strict";r.d(e,"f",(function(){return x})),r.d(e,"a",(function(){return N})),r.d(e,"b",(function(){return M})),r.d(e,"c",(function(){return j})),r.d(e,"d",(function(){return L})),r.d(e,"e",(function(){return U}));var n=r(115),o=new Array(32).fill(void 0);function i(t){return o[t]}o.push(void 0,null,!0,!1);var a=0,u=null;function c(){return null!==u&&u.buffer===n.ib.buffer||(u=new Uint8Array(n.ib.buffer)),u}var s=new("undefined"==typeof TextEncoder?r(116).TextEncoder:TextEncoder)("utf-8"),f="function"==typeof s.encodeInto?function(t,e){return s.encodeInto(t,e)}:function(t,e){var r=s.encode(t);return e.set(r),{read:t.length,written:r.length}};var p=null;function l(){return null!==p&&p.buffer===n.ib.buffer||(p=new Int32Array(n.ib.buffer)),p}var d=o.length;function h(t){var e=i(t);return function(t){t<36||(o[t]=d,d=t)}(t),e}var v=new("undefined"==typeof TextDecoder?r(116).TextDecoder:TextDecoder)("utf-8",{ignoreBOM:!0,fatal:!0});function y(t,e){return v.decode(c().subarray(t,t+e))}function g(t,e){if(!(t instanceof e))throw new Error("expected instance of "+e.name);return t.ptr}function _(t){d===o.length&&o.push(o.length+1);var e=d;return d=o[e],o[e]=t,e}v.decode();var m=32;function b(t){if(1==m)throw new Error("out of js stack");return o[--m]=t,m}var w=null;function O(t,e){return(null!==w&&w.buffer===n.ib.buffer||(w=new Uint32Array(n.ib.buffer)),w).subarray(t/4,t/4+e)}var A=null;function S(t,e){return(null!==A&&A.buffer===n.ib.buffer||(A=new Float64Array(n.ib.buffer)),A).subarray(t/8,t/8+e)}function x(t,e,r,o,i){g(t,N);var a=n.mb(t.ptr,e,r,o,i);return P.__wrap(a)}var E=function(){function t(){}return t.__wrap=function(e){var r=Object.create(t.prototype);return r.ptr=e,r},t.prototype.free=function(){var t=this.ptr;this.ptr=0,n.a(t)},Object.defineProperty(t.prototype,"data_ptr",{get:function(){return n.g(this.ptr)},set:function(t){n.m(this.ptr,t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"data_len",{get:function(){return n.f(this.ptr)>>>0},set:function(t){n.l(this.ptr,t)},enumerable:!1,configurable:!0}),t}(),T=function(){function t(){}return t.__wrap=function(e){var r=Object.create(t.prototype);return r.ptr=e,r},t.prototype.free=function(){var t=this.ptr;this.ptr=0,n.b(t)},t.prototype.get_name=function(){try{n.z(8,this.ptr);var t=l()[2],e=l()[3];return y(t,e)}finally{n.s(t,e)}},t.prototype.get_data_indices=function(){return n.w(this.ptr)},t.prototype.get_data_info=function(){return n.x(this.ptr)},t.prototype.get_rows_count=function(){return n.A(this.ptr)>>>0},t.prototype.get_value_at_index=function(t){return n.B(this.ptr,t)},t.prototype.get_domain=function(){var t=n.y(this.ptr);return E.__wrap(t)},t}(),D=function(){function t(){}return t.__wrap=function(e){var r=Object.create(t.prototype);return r.ptr=e,r},t.prototype.free=function(){var t=this.ptr;this.ptr=0,n.c(t)},t.prototype.get_name=function(){try{n.z(8,this.ptr);var t=l()[2],e=l()[3];return y(t,e)}finally{n.s(t,e)}},t.prototype.get_data_ptr=function(){return n.E(this.ptr)},t.prototype.get_data_indices=function(){return n.C(this.ptr)},t.prototype.get_data_info=function(){return n.D(this.ptr)},t.prototype.get_rows_count=function(){return n.G(this.ptr)>>>0},t.prototype.get_value_at_index=function(t){return n.H(this.ptr,t)},t.prototype.get_domain=function(){n.F(8,this.ptr);var t=l()[2],e=l()[3],r=S(t,e).slice();return n.s(t,8*e),r},t}(),N=function(){function t(e){g(e,M);var r=e.ptr;e.ptr=0;var o=n.V(r);return t.__wrap(o)}return t.__wrap=function(e){var r=Object.create(t.prototype);return r.ptr=e,r},t.prototype.free=function(){var t=this.ptr;this.ptr=0,n.d(t)},t.prototype.clone=function(){var e=n.J(this.ptr);return t.__wrap(e)},t.prototype.add_field=function(t,e){return n.I(this.ptr,_(t),_(e))>>>0},t.prototype.get_categorical_field=function(t){var e=n.M(this.ptr,t);return T.__wrap(e)},t.prototype.get_continuous_field=function(t){var e=n.N(this.ptr,t);return D.__wrap(e)},t.prototype.get_temporal_field=function(t){var e=n.T(this.ptr,t);return I.__wrap(e)},t.prototype.get_id_field=function(t){var e=n.P(this.ptr,t);return R.__wrap(e)},t.prototype.select=function(t,e){var r=n.Y(this.ptr,_(t),e);return C.__wrap(r)},t.prototype.sort=function(e){try{var r=n.Z(this.ptr,b(e));return t.__wrap(r)}finally{o[m++]=void 0}},t.prototype.project=function(t){try{var e=n.W(this.ptr,b(t));return C.__wrap(e)}finally{o[m++]=void 0}},t.prototype.group_by=function(e,r){var o=n.U(this.ptr,_(e),_(r));return t.__wrap(o)},t.prototype.split_by_row=function(t){var e=n.ab(this.ptr,_(t));return F.__wrap(e)},t.prototype.dispose=function(t){n.L(this.ptr,_(t))},t.prototype.row_count=function(){return n.X(this.ptr)>>>0},t.prototype.column_count=function(){return n.K(this.ptr)>>>0},t.prototype.get_eligible_rows=function(){n.O(8,this.ptr);var t=l()[2],e=l()[3],r=function(t,e){return l().subarray(t/4,t/4+e)}(t,e).slice();return n.s(t,4*e),r},t.prototype.get_partial_column_count=function(){return n.R(this.ptr)>>>0},t.prototype.get_partial_row_count=function(){return n.S(this.ptr)>>>0},t.prototype.get_matching_ids=function(e){g(e,t),n.Q(8,this.ptr,e.ptr);var r=l()[2],o=l()[3],i=O(r,o).slice();return n.s(r,4*o),i},t}(),M=function(){function t(e,r){var o=n.bb(e,r);return t.__wrap(o)}return t.__wrap=function(e){var r=Object.create(t.prototype);return r.ptr=e,r},t.prototype.free=function(){var t=this.ptr;this.ptr=0,n.e(t)},Object.defineProperty(t.prototype,"rows",{get:function(){return n.i(this.ptr)>>>0},set:function(t){n.o(this.ptr,t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"columns",{get:function(){return n.h(this.ptr)>>>0},set:function(t){n.n(this.ptr,t)},enumerable:!1,configurable:!0}),t}(),R=function(){function t(){}return t.__wrap=function(e){var r=Object.create(t.prototype);return r.ptr=e,r},t.prototype.free=function(){var t=this.ptr;this.ptr=0,n.j(t)},t.prototype.get_name=function(){try{n.z(8,this.ptr);var t=l()[2],e=l()[3];return y(t,e)}finally{n.s(t,e)}},t.prototype.get_data_ptr=function(){return n.eb(this.ptr)},t.prototype.get_data_indices=function(){return n.cb(this.ptr)},t.prototype.get_data_info=function(){return n.db(this.ptr)},t.prototype.get_rows_count=function(){return n.fb(this.ptr)>>>0},t.prototype.get_value_at_index=function(t){return n.gb(this.ptr,t)},t}(),C=function(){function t(){}return t.__wrap=function(e){var r=Object.create(t.prototype);return r.ptr=e,r},t.prototype.free=function(){var t=this.ptr;this.ptr=0,n.k(t)},t.prototype.get_filtered_dm=function(){var t=n.jb(this.ptr);return 0===t?void 0:N.__wrap(t)},t.prototype.get_unfiltered_dm=function(){var t=n.kb(this.ptr);return 0===t?void 0:N.__wrap(t)},t}(),F=function(){function t(){}return t.__wrap=function(e){var r=Object.create(t.prototype);return r.ptr=e,r},t.prototype.free=function(){var t=this.ptr;this.ptr=0,n.p(t)},t.prototype.get_dm=function(){var t=n.lb(this.ptr);return N.__wrap(t)},t.prototype.get_count=function(){return n.K(this.ptr)>>>0},t}(),P=function(){function t(){}return t.__wrap=function(e){var r=Object.create(t.prototype);return r.ptr=e,r},t.prototype.free=function(){var t=this.ptr;this.ptr=0,n.q(t)},t.prototype.get_y_0=function(){return n.pb(this.ptr)},t.prototype.get_y_1=function(){return n.qb(this.ptr)},t.prototype.get_id=function(){return n.ob(this.ptr)},t.prototype.free_data=function(){n.nb(this.ptr)},t}(),I=function(){function t(){}return t.__wrap=function(e){var r=Object.create(t.prototype);return r.ptr=e,r},t.prototype.free=function(){var t=this.ptr;this.ptr=0,n.r(t)},t.prototype.get_name=function(){try{n.z(8,this.ptr);var t=l()[2],e=l()[3];return y(t,e)}finally{n.s(t,e)}},t.prototype.get_data_ptr=function(){return n.sb(this.ptr)},t.prototype.get_data_indices=function(){return n.rb(this.ptr)},t.prototype.get_data_info=function(){return n.x(this.ptr)},t.prototype.get_rows_count=function(){return n.A(this.ptr)>>>0},t.prototype.get_value_at_index=function(t){return n.ub(this.ptr,t)},t.prototype.min_consecutive_diff=function(){return n.vb(this.ptr)},t.prototype.get_domain=function(){n.tb(8,this.ptr);var t=l()[2],e=l()[3],r=S(t,e).slice();return n.s(t,8*e),r},t}(),j=function(t,e){var r=i(e),o=function(t,e,r){if(void 0===r){var n=s.encode(t),o=e(n.length);return c().subarray(o,o+n.length).set(n),a=n.length,o}for(var i=t.length,u=e(i),p=c(),l=0;l<i;l++){var d=t.charCodeAt(l);if(d>127)break;p[u+l]=d}if(l!==i){0!==l&&(t=t.slice(l)),u=r(u,i,i=l+3*t.length);var h=c().subarray(u+l,u+i);l+=f(t,h).written}return a=l,u}(JSON.stringify(void 0===r?null:r),n.t,n.u),u=a;l()[t/4+1]=u,l()[t/4+0]=o},L=function(t){h(t)},U=function(t,e){throw new Error(y(t,e))};n.v()},115:function(t,e,r){"use strict";var n=r.w[t.i];t.exports=n;r(114);n.wb()},116:function(t,e,r){(function(t){var n=Object.getOwnPropertyDescriptors||function(t){for(var e=Object.keys(t),r={},n=0;n<e.length;n++)r[e[n]]=Object.getOwnPropertyDescriptor(t,e[n]);return r},o=/%[sdj%]/g;e.format=function(t){if(!g(t)){for(var e=[],r=0;r<arguments.length;r++)e.push(u(arguments[r]));return e.join(" ")}r=1;for(var n=arguments,i=n.length,a=String(t).replace(o,(function(t){if("%%"===t)return"%";if(r>=i)return t;switch(t){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch(t){return"[Circular]"}default:return t}})),c=n[r];r<i;c=n[++r])v(c)||!b(c)?a+=" "+c:a+=" "+u(c);return a},e.deprecate=function(r,n){if(void 0!==t&&!0===t.noDeprecation)return r;if(void 0===t)return function(){return e.deprecate(r,n).apply(this,arguments)};var o=!1;return function(){if(!o){if(t.throwDeprecation)throw new Error(n);t.traceDeprecation?console.trace(n):console.error(n),o=!0}return r.apply(this,arguments)}};var i,a={};function u(t,r){var n={seen:[],stylize:s};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),h(r)?n.showHidden=r:r&&e._extend(n,r),_(n.showHidden)&&(n.showHidden=!1),_(n.depth)&&(n.depth=2),_(n.colors)&&(n.colors=!1),_(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=c),f(n,t,n.depth)}function c(t,e){var r=u.styles[e];return r?"["+u.colors[r][0]+"m"+t+"["+u.colors[r][1]+"m":t}function s(t,e){return t}function f(t,r,n){if(t.customInspect&&r&&A(r.inspect)&&r.inspect!==e.inspect&&(!r.constructor||r.constructor.prototype!==r)){var o=r.inspect(n,t);return g(o)||(o=f(t,o,n)),o}var i=function(t,e){if(_(e))return t.stylize("undefined","undefined");if(g(e)){var r="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(r,"string")}if(y(e))return t.stylize(""+e,"number");if(h(e))return t.stylize(""+e,"boolean");if(v(e))return t.stylize("null","null")}(t,r);if(i)return i;var a=Object.keys(r),u=function(t){var e={};return t.forEach((function(t,r){e[t]=!0})),e}(a);if(t.showHidden&&(a=Object.getOwnPropertyNames(r)),O(r)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return p(r);if(0===a.length){if(A(r)){var c=r.name?": "+r.name:"";return t.stylize("[Function"+c+"]","special")}if(m(r))return t.stylize(RegExp.prototype.toString.call(r),"regexp");if(w(r))return t.stylize(Date.prototype.toString.call(r),"date");if(O(r))return p(r)}var s,b="",S=!1,x=["{","}"];(d(r)&&(S=!0,x=["[","]"]),A(r))&&(b=" [Function"+(r.name?": "+r.name:"")+"]");return m(r)&&(b=" "+RegExp.prototype.toString.call(r)),w(r)&&(b=" "+Date.prototype.toUTCString.call(r)),O(r)&&(b=" "+p(r)),0!==a.length||S&&0!=r.length?n<0?m(r)?t.stylize(RegExp.prototype.toString.call(r),"regexp"):t.stylize("[Object]","special"):(t.seen.push(r),s=S?function(t,e,r,n,o){for(var i=[],a=0,u=e.length;a<u;++a)D(e,String(a))?i.push(l(t,e,r,n,String(a),!0)):i.push("");return o.forEach((function(o){o.match(/^\d+$/)||i.push(l(t,e,r,n,o,!0))})),i}(t,r,n,u,a):a.map((function(e){return l(t,r,n,u,e,S)})),t.seen.pop(),function(t,e,r){if(t.reduce((function(t,e){return e.indexOf("\n")>=0&&0,t+e.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60)return r[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+r[1];return r[0]+e+" "+t.join(", ")+" "+r[1]}(s,b,x)):x[0]+b+x[1]}function p(t){return"["+Error.prototype.toString.call(t)+"]"}function l(t,e,r,n,o,i){var a,u,c;if((c=Object.getOwnPropertyDescriptor(e,o)||{value:e[o]}).get?u=c.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):c.set&&(u=t.stylize("[Setter]","special")),D(n,o)||(a="["+o+"]"),u||(t.seen.indexOf(c.value)<0?(u=v(r)?f(t,c.value,null):f(t,c.value,r-1)).indexOf("\n")>-1&&(u=i?u.split("\n").map((function(t){return"  "+t})).join("\n").substr(2):"\n"+u.split("\n").map((function(t){return"   "+t})).join("\n")):u=t.stylize("[Circular]","special")),_(a)){if(i&&o.match(/^\d+$/))return u;(a=JSON.stringify(""+o)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=t.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=t.stylize(a,"string"))}return a+": "+u}function d(t){return Array.isArray(t)}function h(t){return"boolean"==typeof t}function v(t){return null===t}function y(t){return"number"==typeof t}function g(t){return"string"==typeof t}function _(t){return void 0===t}function m(t){return b(t)&&"[object RegExp]"===S(t)}function b(t){return"object"==typeof t&&null!==t}function w(t){return b(t)&&"[object Date]"===S(t)}function O(t){return b(t)&&("[object Error]"===S(t)||t instanceof Error)}function A(t){return"function"==typeof t}function S(t){return Object.prototype.toString.call(t)}function x(t){return t<10?"0"+t.toString(10):t.toString(10)}e.debuglog=function(r){if(_(i)&&(i=t.env.NODE_DEBUG||""),r=r.toUpperCase(),!a[r])if(new RegExp("\\b"+r+"\\b","i").test(i)){var n=t.pid;a[r]=function(){var t=e.format.apply(e,arguments);console.error("%s %d: %s",r,n,t)}}else a[r]=function(){};return a[r]},e.inspect=u,u.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},u.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},e.isArray=d,e.isBoolean=h,e.isNull=v,e.isNullOrUndefined=function(t){return null==t},e.isNumber=y,e.isString=g,e.isSymbol=function(t){return"symbol"==typeof t},e.isUndefined=_,e.isRegExp=m,e.isObject=b,e.isDate=w,e.isError=O,e.isFunction=A,e.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},e.isBuffer=r(121);var E=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function T(){var t=new Date,e=[x(t.getHours()),x(t.getMinutes()),x(t.getSeconds())].join(":");return[t.getDate(),E[t.getMonth()],e].join(" ")}function D(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.log=function(){console.log("%s - %s",T(),e.format.apply(e,arguments))},e.inherits=r(122),e._extend=function(t,e){if(!e||!b(e))return t;for(var r=Object.keys(e),n=r.length;n--;)t[r[n]]=e[r[n]];return t};var N="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function M(t,e){if(!t){var r=new Error("Promise was rejected with a falsy value");r.reason=t,t=r}return e(t)}e.promisify=function(t){if("function"!=typeof t)throw new TypeError('The "original" argument must be of type Function');if(N&&t[N]){var e;if("function"!=typeof(e=t[N]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(e,N,{value:e,enumerable:!1,writable:!1,configurable:!0}),e}function e(){for(var e,r,n=new Promise((function(t,n){e=t,r=n})),o=[],i=0;i<arguments.length;i++)o.push(arguments[i]);o.push((function(t,n){t?r(t):e(n)}));try{t.apply(this,o)}catch(t){r(t)}return n}return Object.setPrototypeOf(e,Object.getPrototypeOf(t)),N&&Object.defineProperty(e,N,{value:e,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(e,n(t))},e.promisify.custom=N,e.callbackify=function(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');function r(){for(var r=[],n=0;n<arguments.length;n++)r.push(arguments[n]);var o=r.pop();if("function"!=typeof o)throw new TypeError("The last argument must be of type Function");var i=this,a=function(){return o.apply(i,arguments)};e.apply(this,r).then((function(e){t.nextTick(a,null,e)}),(function(e){t.nextTick(M,e,a)}))}return Object.setPrototypeOf(r,Object.getPrototypeOf(e)),Object.defineProperties(r,n(e)),r}}).call(this,r(120))},118:function(t,e,r){t.exports=function(){return r(119)('!function(t){var r={};function e(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,e),o.l=!0,o.exports}e.m=t,e.c=r,e.d=function(t,r,n){e.o(t,r)||Object.defineProperty(t,r,{enumerable:!0,get:n})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,r){if(1&r&&(t=e(t)),8&r)return t;if(4&r&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(e.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&r&&"string"!=typeof t)for(var o in t)e.d(n,o,function(r){return t[r]}.bind(null,o));return n},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,"a",r),r},e.o=function(t,r){return Object.prototype.hasOwnProperty.call(t,r)},e.p="",e(e.s=1)}([,function(t,r,e){"use strict";e.r(r);"undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),new Uint8Array(16);for(var n=[],o=0;o<256;++o)n.push((o+256).toString(16).substr(1));var a,u;new Map;(u=a||(a={})).FLAT_JSON="FlatJSON",u.DSV_STR="DSVStr",u.DSV_ARR="DSVArr",u.AUTO="Auto";var i={},f={};function c(t){return new Function("d","return {"+t.map((function(t,r){return JSON.stringify(t)+": d["+r+\'] || ""\'})).join(",")+"}")}function s(t){var r=Object.create(null),e=[];return t.forEach((function(t){for(var n in t)n in r||e.push(r[n]=n)})),e}function l(t,r){var e=t+"",n=e.length;return n<r?new Array(r-n+1).join(0)+e:e}function p(t){var r,e=t.getUTCHours(),n=t.getUTCMinutes(),o=t.getUTCSeconds(),a=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":((r=t.getUTCFullYear())<0?"-"+l(-r,6):r>9999?"+"+l(r,6):l(r,4))+"-"+l(t.getUTCMonth()+1,2)+"-"+l(t.getUTCDate(),2)+(a?"T"+l(e,2)+":"+l(n,2)+":"+l(o,2)+"."+l(a,3)+"Z":o?"T"+l(e,2)+":"+l(n,2)+":"+l(o,2)+"Z":n||e?"T"+l(e,2)+":"+l(n,2)+"Z":"")}var d=function(t){var r=new RegExp(\'["\'+t+"\\n\\r]"),e=t.charCodeAt(0);function n(t,r){var n,o=[],a=t.length,u=0,c=0,s=a<=0,l=!1;function p(){if(s)return f;if(l)return l=!1,i;var r,n,o=u;if(34===t.charCodeAt(o)){for(;u++<a&&34!==t.charCodeAt(u)||34===t.charCodeAt(++u););return(r=u)>=a?s=!0:10===(n=t.charCodeAt(u++))?l=!0:13===n&&(l=!0,10===t.charCodeAt(u)&&++u),t.slice(o+1,r-1).replace(/""/g,\'"\')}for(;u<a;){if(10===(n=t.charCodeAt(r=u++)))l=!0;else if(13===n)l=!0,10===t.charCodeAt(u)&&++u;else if(n!==e)continue;return t.slice(o,r)}return s=!0,t.slice(o,a)}for(10===t.charCodeAt(a-1)&&--a,13===t.charCodeAt(a-1)&&--a;(n=p())!==f;){for(var d=[];n!==i&&n!==f;)d.push(n),n=p();r&&null==(d=r(d,c++))||o.push(d)}return o}function o(r,e){return r.map((function(r){return e.map((function(t){return u(r[t])})).join(t)}))}function a(r){return r.map(u).join(t)}function u(t){return null==t?"":t instanceof Date?p(t):r.test(t+="")?\'"\'+t.replace(/"/g,\'""\')+\'"\':t}return{parse:function(t,r){var e,o,a=n(t,(function(t,n){if(e)return e(t,n-1);o=t,e=r?function(t,r){var e=c(t);return function(n,o){return r(e(n),o,t)}}(t,r):c(t)}));return a.columns=o||[],a},parseRows:n,format:function(r,e){return null==e&&(e=s(r)),[e.map(u).join(t)].concat(o(r,e)).join("\\n")},formatBody:function(t,r){return null==r&&(r=s(t)),o(t,r).join("\\n")},formatRows:function(t){return t.map(a).join("\\n")},formatRow:a,formatValue:u}},g=function(t,r){var e="function"==typeof Symbol&&t[Symbol.iterator];if(!e)return t;var n,o,a=e.call(t),u=[];try{for(;(void 0===r||r-- >0)&&!(n=a.next()).done;)u.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(e=a.return)&&e.call(a)}finally{if(o)throw o.error}}return u},h=function(){for(var t=[],r=0;r<arguments.length;r++)t=t.concat(g(arguments[r]));return t};function y(t){return t instanceof Date?t:new Date(t)}function m(t){return t<10?"0"+t:t}function v(t){this.format=t,this.dtParams=void 0,this.nativeDate=void 0}RegExp.escape=function(t){return t.replace(/[-[\\]{}()*+?.,\\\\^$|#\\s]/g,"\\\\$&")},v.TOKEN_PREFIX="%",v.DATETIME_PARAM_SEQUENCE={YEAR:0,MONTH:1,DAY:2,HOUR:3,MINUTE:4,SECOND:5,MILLISECOND:6},v.defaultNumberParser=function(t){return function(r){var e;return isFinite(e=parseInt(r,10))?e:t}},v.defaultRangeParser=function(t,r){return function(e){var n,o;if(!e)return r;var a=e.toLowerCase();for(n=0,o=t.length;n<o;n++)if(t[n].toLowerCase()===a)return n;return void 0===n?r:null}},v.getTokenDefinitions=function(){var t={short:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],long:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},r={short:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],long:["January","February","March","April","May","June","July","August","September","October","November","December"]};return{H:{name:"H",index:3,extract:function(){return"(\\\\d+)"},parser:v.defaultNumberParser(),formatter:function(t){return y(t).getHours().toString()}},l:{name:"l",index:3,extract:function(){return"(\\\\d+)"},parser:v.defaultNumberParser(),formatter:function(t){var r=y(t).getHours()%12;return(0===r?12:r).toString()}},p:{name:"p",index:3,extract:function(){return"(AM|PM)"},parser:function(t){return t?t.toLowerCase():null},formatter:function(t){return y(t).getHours()<12?"AM":"PM"}},P:{name:"P",index:3,extract:function(){return"(am|pm)"},parser:function(t){return t?t.toLowerCase():null},formatter:function(t){return y(t).getHours()<12?"am":"pm"}},M:{name:"M",index:4,extract:function(){return"(\\\\d+)"},parser:v.defaultNumberParser(),formatter:function(t){return m(y(t).getMinutes())}},S:{name:"S",index:5,extract:function(){return"(\\\\d+)"},parser:v.defaultNumberParser(),formatter:function(t){return m(y(t).getSeconds())}},K:{name:"K",index:6,extract:function(){return"(\\\\d+)"},parser:v.defaultNumberParser(),formatter:function(t){return y(t).getMilliseconds().toString()}},a:{name:"a",index:2,extract:function(){return"("+t.short.join("|")+")"},parser:v.defaultRangeParser(t.short),formatter:function(r){var e=y(r).getDay();return t.short[e].toString()}},A:{name:"A",index:2,extract:function(){return"("+t.long.join("|")+")"},parser:v.defaultRangeParser(t.long),formatter:function(r){var e=y(r).getDay();return t.long[e].toString()}},e:{name:"e",index:2,extract:function(){return"(\\\\d+) of ("+r.long.join("|")+")"},parser:v.defaultNumberParser(),formatter:function(t){return y(t).getDate().toString()}},d:{name:"d",index:2,extract:function(){return"(\\\\d+)"},parser:v.defaultNumberParser(),formatter:function(t){return m(y(t).getDate())}},b:{name:"b",index:1,extract:function(){return"("+r.short.join("|")+")"},parser:v.defaultRangeParser(r.short),formatter:function(t){var e=y(t).getMonth();return r.short[e].toString()}},B:{name:"B",index:1,extract:function(){return"("+r.long.join("|")+")"},parser:v.defaultRangeParser(r.long),formatter:function(t){var e=y(t).getMonth();return r.long[e].toString()}},m:{name:"m",index:1,extract:function(){return"(\\\\d+)"},parser:function(t){return v.defaultNumberParser()(t)-1},formatter:function(t){return m(y(t).getMonth()+1)}},y:{name:"y",index:0,extract:function(){return"(\\\\d{2})"},parser:function(t){var r;if(t){var e=t.length;t=t.substring(e-2,e)}var n=v.defaultNumberParser()(t),o=new Date,a=Math.trunc(o.getFullYear()/100);return y(r=""+a+n).getFullYear()>o.getFullYear()&&(r=""+(a-1)+n),y(r).getFullYear()},formatter:function(t){var r,e=y(t).getFullYear().toString();return e&&(r=e.length,e=e.substring(r-2,r)),e}},Y:{name:"Y",index:0,extract:function(){return"(\\\\d{4})"},parser:v.defaultNumberParser(),formatter:function(t){return y(t).getFullYear().toString()}}}},v.getTokenFormalNames=function(){var t=v.getTokenDefinitions();return{HOUR:t.H,HOUR_12:t.l,AMPM_UPPERCASE:t.p,AMPM_LOWERCASE:t.P,MINUTE:t.M,SECOND:t.S,SHORT_DAY:t.a,LONG_DAY:t.A,DAY_OF_MONTH:t.e,DAY_OF_MONTH_CONSTANT_WIDTH:t.d,SHORT_MONTH:t.b,LONG_MONTH:t.B,MONTH_OF_YEAR:t.m,SHORT_YEAR:t.y,LONG_YEAR:t.Y}},v.tokenResolver=function(){var t=v.getTokenDefinitions(),r=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];for(var e,n,o=0,a=t.length;o<a;o++)e=t[o],t[o]&&(n=e);return n?n[0].parser(n[1]):null};return{YEAR:[t.y,t.Y,r],MONTH:[t.b,t.B,t.m,r],DAY:[t.a,t.A,t.d,r],HOUR:[t.H,t.l,t.p,t.P,function(t,r,e,n){var o,a,u,i;return r&&(a=e||n)?("pm"===a[0].parser(a[1])&&(u=!0),o=r):o=r||t,o?(i=o[0].parser(o[1]),u&&(i+=12),i):null}],MINUTE:[t.M,r],SECOND:[t.S,r],MILLISECOND:[t.K,r]}},v.findTokens=function(t){for(var r,e,n=v.TOKEN_PREFIX,o=v.getTokenDefinitions(),a=Object.keys(o),u=[];(r=t.indexOf(n,r+1))>=0;)e=t[r+1],-1!==a.indexOf(e)&&u.push({index:r,token:e});return u},v.formatAs=function(t,r){var e,n,o,a,u=y(t),i=v.findTokens(r),f=v.getTokenDefinitions(),c=String(r),s=v.TOKEN_PREFIX;for(o=0,a=i.length;o<a;o++)n=f[e=i[o].token].formatter(u),c=c.replace(new RegExp(s+e,"g"),n);return c},v.prototype.parse=function(t,r){var e,n,o,a,u,i,f,c,s=v.tokenResolver(),l=this.extractTokenValue(t),p=v.DATETIME_PARAM_SEQUENCE,d=r&&r.noBreak,g=[],y=[],m=[];for(e in s)if({}.hasOwnProperty.call(s,e)){for(y.length=0,o=(n=s[e]).splice(n.length-1,1)[0],u=0,c=n.length;u<c;u++)void 0===(a=l[(i=n[u]).name])?y.push(null):y.push([i,a]);if(null==(f=o.apply(this,y))&&!d)break;g[p[e]]=f}return g.length&&this.checkIfOnlyYear(g.length)?m.unshift(g[0],0,1):m.unshift.apply(m,h(g)),m},v.prototype.extractTokenValue=function(t){var r,e,n,o,a,u,i,f=this.format,c=v.getTokenDefinitions(),s=v.TOKEN_PREFIX,l=v.findTokens(f),p={};a=String(f);var d=l.map((function(t){return t.token})),g=l.length;for(i=g-1;i>=0;i--)(n=l[i].index)+1!==a.length-1?(void 0===r&&(r=a.length),o=a.substring(n+2,r),a=a.substring(0,n+2)+RegExp.escape(o)+a.substring(r,a.length),r=n):r=n;for(i=0;i<g;i++)e=l[i],a=a.replace(s+e.token,c[e.token].extract());var h=(null==t?void 0:t.match(new RegExp(a)))||[];for(h.shift(),i=0,u=d.length;i<u;i++)p[d[i]]=h[i];return p},v.prototype.getNativeDate=function(t){var r=null,e=!this.format||"string"!=typeof this.format;if(Number.isFinite(t)&&e)r=new Date(t);else if(e)r=new Date(t);else{var n=this.dtParams=this.parse(t);n.length&&(this.nativeDate=new(Date.bind.apply(Date,h([void 0],n))),r=this.nativeDate)}return r},v.prototype.checkIfOnlyYear=function(t){return 1===t&&this.format.match(/y|Y/g).length};var S=function(t){var r=0;return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];e.forEach((function(e,n){t[n]instanceof Array||(t[n]=Array.from({length:r})),t[n].push(e)})),r++}};function b(t){return Array.isArray(t)}var O,A,T,_=function(t){return function(t){return"string"==typeof t}(t)?a.DSV_STR:b(t)&&b(t[0])?a.DSV_ARR:b(t)&&(0===t.length||function(t){return t===Object(t)}(t[0]))?a.FLAT_JSON:null};(A=O||(O={})).MEASURE="measure",A.DIMENSION="dimension",function(t){t.CATEGORICAL="categorical",t.TEMPORAL="temporal",t.BINNED="binned",t.CONTINUOUS="continuous",t.ROWID="__id"}(T||(T={}));var E,N,R=function(){function t(){this._type=T.CATEGORICAL}return Object.defineProperty(t.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),t.prototype.parse=function(t){return"number"==typeof t?String(t):t},t}(),D=function(){function t(){this._type=T.CONTINUOUS}return Object.defineProperty(t.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),t.prototype.parse=function(t){return t||0===t?Number(t):NaN},t}();(N=E||(E={})).SELECT="select",N.GROUPBY="groupBy",N.PROJECT="project",N.SPLIT="split",N.SORT="sort",N.CALCULATE="calculate_variable";var M=function(){function t(){this._type=T.TEMPORAL}return Object.defineProperty(t.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),t.prototype.parse=function(t,r){var e="default";if(this._dtf={},t){var n=t;r&&"string"==typeof r?(n=String(t),e=r,this._dtf&&this._dtf[e]||(this._dtf[e]=new v(e))):(n=Number(t),this._dtf&&this._dtf.default||(this._dtf.default=new v));var o=this._dtf[e].getNativeDate(n);return o?o.getTime():NaN}return NaN},t}(),C=function(){function t(){this.store=new Map,this.parsers(this._getDefaultParsers())}return t.prototype._getDefaultParsers=function(){return[new R,new D,new M]},t.prototype.parsers=function(t){var r=this;return t.forEach((function(t){return r.register(t)})),this.store},t.prototype.register=function(t){return this.store.set(t._type,t),this},t.prototype.unregister=function(t){return this.store.delete(t._type),this},t.prototype.get=function(t){return t&&this.store.has(t)?this.store.get(t):null},t}(),P=null||new C,x=function(t,r){var e="function"==typeof Symbol&&t[Symbol.iterator];if(!e)return t;var n,o,a=e.call(t),u=[];try{for(;(void 0===r||r-- >0)&&!(n=a.next()).done;)u.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(e=a.return)&&e.call(a)}finally{if(o)throw o.error}}return u},w=function(){for(var t=[],r=0;r<arguments.length;r++)t=t.concat(x(arguments[r]));return t};var j=function(t,r,e){if(!Array.isArray(r))throw new Error("Schema missing or is in an unsupported format");var n=r.map((function(t){return t.name}));e=Object.assign({},{firstRowHeader:!0},e);var o=[[]],a=S(o),u=n;e.firstRowHeader&&(u=t.splice(0,1)[0]);var i=u.reduce((function(t,r,e){var n;return Object.assign(t,((n={})[r]=e,n)),t}),{});return t.forEach((function(t){var e=[];return r.forEach((function(r){var n=r.name,o=r.type,a=r.format,u=void 0===a?function(t){return t}:a,f=r.subtype,c=void 0===f?T.CATEGORICAL:f;o===O.MEASURE&&(c=T.CONTINUOUS);var s=P.get(c),l=i[n],p=s?s.parse(t[l],u):t[l];e.push(p)})),a.apply(void 0,w(e))})),{data:o,schema:r}};var I=function(t,r,e){if((e=Object.assign({},{firstRowHeader:!0,fieldSeparator:","},e)).fieldSeparator){var n=d(e.fieldSeparator);return j(n.parseRows(t),r,e)}return{schema:[],data:[]}},U=function(){function t(){this._type=a.DSV_STR}return Object.defineProperty(t.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),t.prototype.convert=function(t,r,e){return I(t,r,e)},t}(),F=function(t,r){var e="function"==typeof Symbol&&t[Symbol.iterator];if(!e)return t;var n,o,a=e.call(t),u=[];try{for(;(void 0===r||r-- >0)&&!(n=a.next()).done;)u.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(e=a.return)&&e.call(a)}finally{if(o)throw o.error}}return u},H=function(){for(var t=[],r=0;r<arguments.length;r++)t=t.concat(F(arguments[r]));return t};var L=function(t,r){if(!Array.isArray(r))throw new Error("Schema missing or is in an unsupported format");var e,n={},o=0,a=[[]],u=S(a);return t.forEach((function(t){var a=[];r.forEach((function(r){var u=r.name,i=r.type,f=r.format,c=void 0===f?function(t){return t}:f,s=r.subtype,l=void 0===s?T.CATEGORICAL:s;i===O.MEASURE&&(l=T.CONTINUOUS);var p=P.get(l);u in n?e=n[u]:(n[u]=o++,e=o-1);var d=p?p.parse(t[u],c):t[u];a[e]=d})),u.apply(void 0,H(a))})),{data:a,schema:r}},Y=function(){function t(){this._type=a.FLAT_JSON}return Object.defineProperty(t.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),t.prototype.convert=function(t,r){return L(t,r)},t}(),k=function(){function t(){this._type=a.DSV_ARR}return Object.defineProperty(t.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),t.prototype.convert=function(t,r,e){return j(t,r,e)},t}();var V=function(t,r,e){var n={FlatJSON:L,DSVStr:I,DSVArr:j},o=_(t);if(!o)throw new Error("Could not detect the data format");return n[o](t,r,e)},J=function(){function t(){this._type=a.AUTO}return Object.defineProperty(t.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),t.prototype.convert=function(t,r,e){return V(t,r,e)},t}(),B=function(){function t(){this.store=new Map,this.converters(this._getDefaultConverters())}return t.prototype._getDefaultConverters=function(){return[new U,new k,new Y,new J]},t.prototype.converters=function(t){var r=this;return t.forEach((function(t){return r.store.set(t._type,t)})),this.store},t.prototype.register=function(t){return this.store.set(t._type,t),this},t.prototype.unregister=function(t){return this.store.delete(t._type),this},t.prototype.get=function(t){return t&&this.store.has(t)?this.store.get(t):null},t}(),G=function(){var t=null;return t||new B}(),K=function(t){var r=t.data,e=t.schema,n=t.options,o=G.get(n.dataFormat);return o?o.convert(r,e,n):{data:[],schema:e}},W=self,X=function(t,r){var e;e=r instanceof Error?{error:r.message||String(r),data:null}:{error:null,data:r},W.postMessage({reqId:t,data:e})};W.addEventListener("message",(function(t){var r=t.data,e=r.reqId,n=r.type,o=r.data;switch(n){case"transform-data":!function(t,r){try{X(t,K(r))}catch(r){X(t,r)}}(e,o)}}))}]);',r.p+"d24f51176d46edba7e76.worker.js")}},119:function(t,e,r){"use strict";var n=window.URL||window.webkitURL;t.exports=function(t,e){try{try{var r;try{(r=new(window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder)).append(t),r=r.getBlob()}catch(e){r=new Blob([t])}return new Worker(n.createObjectURL(r))}catch(e){return new Worker("data:application/javascript,"+encodeURIComponent(t))}}catch(t){if(!e)throw Error("Inline worker is not supported");return new Worker(e)}}},120:function(t,e){var r,n,o=t.exports={};function i(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function u(t){if(r===setTimeout)return setTimeout(t,0);if((r===i||!r)&&setTimeout)return r=setTimeout,setTimeout(t,0);try{return r(t,0)}catch(e){try{return r.call(null,t,0)}catch(e){return r.call(this,t,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:i}catch(t){r=i}try{n="function"==typeof clearTimeout?clearTimeout:a}catch(t){n=a}}();var c,s=[],f=!1,p=-1;function l(){f&&c&&(f=!1,c.length?s=c.concat(s):p=-1,s.length&&d())}function d(){if(!f){var t=u(l);f=!0;for(var e=s.length;e;){for(c=s,s=[];++p<e;)c&&c[p].run();p=-1,e=s.length}c=null,f=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===a||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(t)}}function h(t,e){this.fun=t,this.array=e}function v(){}o.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];s.push(new h(t,e)),1!==s.length||f||u(d)},h.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=v,o.addListener=v,o.once=v,o.off=v,o.removeListener=v,o.removeAllListeners=v,o.emit=v,o.prependListener=v,o.prependOnceListener=v,o.listeners=function(t){return[]},o.binding=function(t){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},121:function(t,e){t.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},122:function(t,e){"function"==typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}},124:function(t,e,r){"use strict";var n,o;r.r(e),(o=n||(n={})).SUM="sum",o.AVG="avg",o.MIN="min",o.MAX="max",o.FIRST="first",o.LAST="last",o.COUNT="count",o.STD="std";var i,a,u,c=function(t){return{sum:0,avg:1,count:3,min:4,max:5,std:6}[t]};(a=i||(i={})).EQUAL="eq",a.NOT_EQUAL="neq",a.GREATER_THAN="gt",a.LESS_THAN="lt",a.GREATER_THAN_EQUAL="gte",a.LESS_THAN_EQUAL="lte",a.IN="in",a.NIN="nin",a.EQUAL_TO="eq",a.NOT_EQUAL_TO="neq",function(t){t.AND="and",t.OR="or"}(u||(u={}));var s,f=function(t){var e={eq:1,neq:2,gt:3,lt:4,gte:5,lte:6,in:9,nin:10,and:7,or:8}[t];return void 0!==e?e:-1};!function(t){t.NORMAL="normal",t.INVERSE="inverse",t.ALL="all"}(s||(s={}));var p,l,d=function(t){return{normal:1,inverse:2,all:3}[t]};(l=p||(p={})).ASC="asc",l.DESC="desc",l.NO_ORDER="";var h=function(t){return t===p.DESC?1:t===p.NO_ORDER?3:0},v=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},y=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(v(arguments[e]));return t};function g(t){return t instanceof Date?t:new Date(t)}function _(t){return t<10?"0"+t:t}function m(t){this.format=t,this.dtParams=void 0,this.nativeDate=void 0}RegExp.escape=function(t){return t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},m.TOKEN_PREFIX="%",m.DATETIME_PARAM_SEQUENCE={YEAR:0,MONTH:1,DAY:2,HOUR:3,MINUTE:4,SECOND:5,MILLISECOND:6},m.defaultNumberParser=function(t){return function(e){var r;return isFinite(r=parseInt(e,10))?r:t}},m.defaultRangeParser=function(t,e){return function(r){var n,o;if(!r)return e;var i=r.toLowerCase();for(n=0,o=t.length;n<o;n++)if(t[n].toLowerCase()===i)return n;return void 0===n?e:null}},m.getTokenDefinitions=function(){var t={short:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],long:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},e={short:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],long:["January","February","March","April","May","June","July","August","September","October","November","December"]};return{H:{name:"H",index:3,extract:function(){return"(\\d+)"},parser:m.defaultNumberParser(),formatter:function(t){return g(t).getHours().toString()}},l:{name:"l",index:3,extract:function(){return"(\\d+)"},parser:m.defaultNumberParser(),formatter:function(t){var e=g(t).getHours()%12;return(0===e?12:e).toString()}},p:{name:"p",index:3,extract:function(){return"(AM|PM)"},parser:function(t){return t?t.toLowerCase():null},formatter:function(t){return g(t).getHours()<12?"AM":"PM"}},P:{name:"P",index:3,extract:function(){return"(am|pm)"},parser:function(t){return t?t.toLowerCase():null},formatter:function(t){return g(t).getHours()<12?"am":"pm"}},M:{name:"M",index:4,extract:function(){return"(\\d+)"},parser:m.defaultNumberParser(),formatter:function(t){return _(g(t).getMinutes())}},S:{name:"S",index:5,extract:function(){return"(\\d+)"},parser:m.defaultNumberParser(),formatter:function(t){return _(g(t).getSeconds())}},K:{name:"K",index:6,extract:function(){return"(\\d+)"},parser:m.defaultNumberParser(),formatter:function(t){return g(t).getMilliseconds().toString()}},a:{name:"a",index:2,extract:function(){return"("+t.short.join("|")+")"},parser:m.defaultRangeParser(t.short),formatter:function(e){var r=g(e).getDay();return t.short[r].toString()}},A:{name:"A",index:2,extract:function(){return"("+t.long.join("|")+")"},parser:m.defaultRangeParser(t.long),formatter:function(e){var r=g(e).getDay();return t.long[r].toString()}},e:{name:"e",index:2,extract:function(){return"(\\d+) of ("+e.long.join("|")+")"},parser:m.defaultNumberParser(),formatter:function(t){return g(t).getDate().toString()}},d:{name:"d",index:2,extract:function(){return"(\\d+)"},parser:m.defaultNumberParser(),formatter:function(t){return _(g(t).getDate())}},b:{name:"b",index:1,extract:function(){return"("+e.short.join("|")+")"},parser:m.defaultRangeParser(e.short),formatter:function(t){var r=g(t).getMonth();return e.short[r].toString()}},B:{name:"B",index:1,extract:function(){return"("+e.long.join("|")+")"},parser:m.defaultRangeParser(e.long),formatter:function(t){var r=g(t).getMonth();return e.long[r].toString()}},m:{name:"m",index:1,extract:function(){return"(\\d+)"},parser:function(t){return m.defaultNumberParser()(t)-1},formatter:function(t){return _(g(t).getMonth()+1)}},y:{name:"y",index:0,extract:function(){return"(\\d{2})"},parser:function(t){var e;if(t){var r=t.length;t=t.substring(r-2,r)}var n=m.defaultNumberParser()(t),o=new Date,i=Math.trunc(o.getFullYear()/100);return g(e=""+i+n).getFullYear()>o.getFullYear()&&(e=""+(i-1)+n),g(e).getFullYear()},formatter:function(t){var e,r=g(t).getFullYear().toString();return r&&(e=r.length,r=r.substring(e-2,e)),r}},Y:{name:"Y",index:0,extract:function(){return"(\\d{4})"},parser:m.defaultNumberParser(),formatter:function(t){return g(t).getFullYear().toString()}}}},m.getTokenFormalNames=function(){var t=m.getTokenDefinitions();return{HOUR:t.H,HOUR_12:t.l,AMPM_UPPERCASE:t.p,AMPM_LOWERCASE:t.P,MINUTE:t.M,SECOND:t.S,SHORT_DAY:t.a,LONG_DAY:t.A,DAY_OF_MONTH:t.e,DAY_OF_MONTH_CONSTANT_WIDTH:t.d,SHORT_MONTH:t.b,LONG_MONTH:t.B,MONTH_OF_YEAR:t.m,SHORT_YEAR:t.y,LONG_YEAR:t.Y}},m.tokenResolver=function(){var t=m.getTokenDefinitions(),e=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var r,n,o=0,i=t.length;o<i;o++)r=t[o],t[o]&&(n=r);return n?n[0].parser(n[1]):null};return{YEAR:[t.y,t.Y,e],MONTH:[t.b,t.B,t.m,e],DAY:[t.a,t.A,t.d,e],HOUR:[t.H,t.l,t.p,t.P,function(t,e,r,n){var o,i,a,u;return e&&(i=r||n)?("pm"===i[0].parser(i[1])&&(a=!0),o=e):o=e||t,o?(u=o[0].parser(o[1]),a&&(u+=12),u):null}],MINUTE:[t.M,e],SECOND:[t.S,e],MILLISECOND:[t.K,e]}},m.findTokens=function(t){for(var e,r,n=m.TOKEN_PREFIX,o=m.getTokenDefinitions(),i=Object.keys(o),a=[];(e=t.indexOf(n,e+1))>=0;)r=t[e+1],-1!==i.indexOf(r)&&a.push({index:e,token:r});return a},m.formatAs=function(t,e){var r,n,o,i,a=g(t),u=m.findTokens(e),c=m.getTokenDefinitions(),s=String(e),f=m.TOKEN_PREFIX;for(o=0,i=u.length;o<i;o++)n=c[r=u[o].token].formatter(a),s=s.replace(new RegExp(f+r,"g"),n);return s},m.prototype.parse=function(t,e){var r,n,o,i,a,u,c,s,f=m.tokenResolver(),p=this.extractTokenValue(t),l=m.DATETIME_PARAM_SEQUENCE,d=e&&e.noBreak,h=[],v=[],g=[];for(r in f)if({}.hasOwnProperty.call(f,r)){for(v.length=0,o=(n=f[r]).splice(n.length-1,1)[0],a=0,s=n.length;a<s;a++)void 0===(i=p[(u=n[a]).name])?v.push(null):v.push([u,i]);if(null==(c=o.apply(this,v))&&!d)break;h[l[r]]=c}return h.length&&this.checkIfOnlyYear(h.length)?g.unshift(h[0],0,1):g.unshift.apply(g,y(h)),g},m.prototype.extractTokenValue=function(t){var e,r,n,o,i,a,u,c=this.format,s=m.getTokenDefinitions(),f=m.TOKEN_PREFIX,p=m.findTokens(c),l={};i=String(c);var d=p.map((function(t){return t.token})),h=p.length;for(u=h-1;u>=0;u--)(n=p[u].index)+1!==i.length-1?(void 0===e&&(e=i.length),o=i.substring(n+2,e),i=i.substring(0,n+2)+RegExp.escape(o)+i.substring(e,i.length),e=n):e=n;for(u=0;u<h;u++)r=p[u],i=i.replace(f+r.token,s[r.token].extract());var v=(null==t?void 0:t.match(new RegExp(i)))||[];for(v.shift(),u=0,a=d.length;u<a;u++)l[d[u]]=v[u];return l},m.prototype.getNativeDate=function(t){var e=null,r=!this.format||"string"!=typeof this.format;if(Number.isFinite(t)&&r)e=new Date(t);else if(r)e=new Date(t);else{var n=this.dtParams=this.parse(t);n.length&&(this.nativeDate=new(Date.bind.apply(Date,y([void 0],n))),e=this.nativeDate)}return e},m.prototype.checkIfOnlyYear=function(t){return 1===t&&this.format.match(/y|Y/g).length};var b,w,O=function(t){var e=0;return function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];r.forEach((function(r,n){t[n]instanceof Array||(t[n]=Array.from({length:e})),t[n].push(r)})),e++}};function A(t){return Array.isArray(t)}(w=b||(b={})).FLAT_JSON="FlatJSON",w.DSV_STR="DSVStr",w.DSV_ARR="DSVArr",w.AUTO="Auto";var S=function(t){return function(t){return"string"==typeof t}(t)?b.DSV_STR:A(t)&&A(t[0])?b.DSV_ARR:A(t)&&(0===t.length||function(t){return t===Object(t)}(t[0]))?b.FLAT_JSON:null};
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var x="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),E=new Uint8Array(16);function T(){if(!x)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return x(E)}var D=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var N=function(t){return"string"==typeof t&&D.test(t)},M=[],R=0;R<256;++R)M.push((R+256).toString(16).substr(1));var C=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=(M[t[e+0]]+M[t[e+1]]+M[t[e+2]]+M[t[e+3]]+"-"+M[t[e+4]]+M[t[e+5]]+"-"+M[t[e+6]]+M[t[e+7]]+"-"+M[t[e+8]]+M[t[e+9]]+"-"+M[t[e+10]]+M[t[e+11]]+M[t[e+12]]+M[t[e+13]]+M[t[e+14]]+M[t[e+15]]).toLowerCase();if(!N(r))throw TypeError("Stringified UUID is invalid");return r};var F=function(t,e,r){var n=(t=t||{}).random||(t.rng||T)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,e){r=r||0;for(var o=0;o<16;++o)e[r+o]=n[o];return e}return C(n)},P=new Map,I=function(t){return t.isFree},j=function(t){var e=function(){return t.find(I)};return function(t){var r,n=F(),o=function(t){if(null==t||""===t)throw new Error("Please give a promise id");if(P.has(t))throw new Error("A promise with "+t+" id already exists, please destroy or resolve or reject it first");return new Promise((function(e,r){P.set(t,{doResolve:e,doReject:r})}))}(n);return(r=e(),new Promise((function(t){if(null==r)var n=setInterval((function(){var r=e();null!=r&&(r.isFree=!1,clearInterval(n),t(r))}),64);else r.isFree=!1,t(r)}))).then((function(e){var r=e.worker;r.addEventListener("message",(function(t){var r=t.data,n=r.reqId,o=r.data;e.isFree=!0,o.error?function(t,e){if(P.has(t)){var r=P.get(t).doReject;P.delete(t),r(e)}}(n,new Error(o.error)):function(t,e){if(P.has(t)){var r=P.get(t),n=r.doResolve,o=r.doReject;P.delete(t),Promise.resolve(e).then((function(t){n(t)})).catch((function(t){o(t)}))}}(n,o.data)})),r.postMessage({data:t,reqId:n,type:"transform-data"})})),o}},L={},U={};function k(t){return new Function("d","return {"+t.map((function(t,e){return JSON.stringify(t)+": d["+e+'] || ""'})).join(",")+"}")}function H(t){var e=Object.create(null),r=[];return t.forEach((function(t){for(var n in t)n in e||r.push(e[n]=n)})),r}function V(t,e){var r=t+"",n=r.length;return n<e?new Array(e-n+1).join(0)+r:r}function Y(t){var e,r=t.getUTCHours(),n=t.getUTCMinutes(),o=t.getUTCSeconds(),i=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":((e=t.getUTCFullYear())<0?"-"+V(-e,6):e>9999?"+"+V(e,6):V(e,4))+"-"+V(t.getUTCMonth()+1,2)+"-"+V(t.getUTCDate(),2)+(i?"T"+V(r,2)+":"+V(n,2)+":"+V(o,2)+"."+V(i,3)+"Z":o?"T"+V(r,2)+":"+V(n,2)+":"+V(o,2)+"Z":n||r?"T"+V(r,2)+":"+V(n,2)+"Z":"")}var B,J,G=function(t){var e=new RegExp('["'+t+"\n\r]"),r=t.charCodeAt(0);function n(t,e){var n,o=[],i=t.length,a=0,u=0,c=i<=0,s=!1;function f(){if(c)return U;if(s)return s=!1,L;var e,n,o=a;if(34===t.charCodeAt(o)){for(;a++<i&&34!==t.charCodeAt(a)||34===t.charCodeAt(++a););return(e=a)>=i?c=!0:10===(n=t.charCodeAt(a++))?s=!0:13===n&&(s=!0,10===t.charCodeAt(a)&&++a),t.slice(o+1,e-1).replace(/""/g,'"')}for(;a<i;){if(10===(n=t.charCodeAt(e=a++)))s=!0;else if(13===n)s=!0,10===t.charCodeAt(a)&&++a;else if(n!==r)continue;return t.slice(o,e)}return c=!0,t.slice(o,i)}for(10===t.charCodeAt(i-1)&&--i,13===t.charCodeAt(i-1)&&--i;(n=f())!==U;){for(var p=[];n!==L&&n!==U;)p.push(n),n=f();e&&null==(p=e(p,u++))||o.push(p)}return o}function o(e,r){return e.map((function(e){return r.map((function(t){return a(e[t])})).join(t)}))}function i(e){return e.map(a).join(t)}function a(t){return null==t?"":t instanceof Date?Y(t):e.test(t+="")?'"'+t.replace(/"/g,'""')+'"':t}return{parse:function(t,e){var r,o,i=n(t,(function(t,n){if(r)return r(t,n-1);o=t,r=e?function(t,e){var r=k(t);return function(n,o){return e(r(n),o,t)}}(t,e):k(t)}));return i.columns=o||[],i},parseRows:n,format:function(e,r){return null==r&&(r=H(e)),[r.map(a).join(t)].concat(o(e,r)).join("\n")},formatBody:function(t,e){return null==e&&(e=H(t)),o(t,e).join("\n")},formatRows:function(t){return t.map(i).join("\n")},formatRow:i,formatValue:a}};!function(t){t.MEASURE="measure",t.DIMENSION="dimension"}(B||(B={})),function(t){t.CATEGORICAL="categorical",t.TEMPORAL="temporal",t.BINNED="binned",t.CONTINUOUS="continuous",t.ROWID="__id"}(J||(J={}));var W,z=function(t){return t===B.MEASURE?1:0},q={categorical:0,continuous:1,temporal:2,__id:3},K=function(t){return q[t]},X=function(t){return t===B.MEASURE?J.CONTINUOUS:J.CATEGORICAL},Q=function(){function t(){this._type=J.CATEGORICAL}return Object.defineProperty(t.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),t.prototype.parse=function(t){return"number"==typeof t?String(t):t},t}(),$=function(){function t(){this._type=J.CONTINUOUS}return Object.defineProperty(t.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),t.prototype.parse=function(t){return t||0===t?Number(t):NaN},t}();!function(t){t.SELECT="select",t.GROUPBY="groupBy",t.PROJECT="project",t.SPLIT="split",t.SORT="sort",t.CALCULATE="calculate_variable"}(W||(W={}));var Z=function(){function t(){this._type=J.TEMPORAL}return Object.defineProperty(t.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),t.prototype.parse=function(t,e){var r="default";if(this._dtf={},t){var n=t;e&&"string"==typeof e?(n=String(t),r=e,this._dtf&&this._dtf[r]||(this._dtf[r]=new m(r))):(n=Number(t),this._dtf&&this._dtf.default||(this._dtf.default=new m));var o=this._dtf[r].getNativeDate(n);return o?o.getTime():NaN}return NaN},t}(),tt=function(){function t(){this.store=new Map,this.parsers(this._getDefaultParsers())}return t.prototype._getDefaultParsers=function(){return[new Q,new $,new Z]},t.prototype.parsers=function(t){var e=this;return t.forEach((function(t){return e.register(t)})),this.store},t.prototype.register=function(t){return this.store.set(t._type,t),this},t.prototype.unregister=function(t){return this.store.delete(t._type),this},t.prototype.get=function(t){return t&&this.store.has(t)?this.store.get(t):null},t}(),et=function(){var t=null;return t||new tt}(),rt=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},nt=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(rt(arguments[e]));return t};var ot=function(t,e,r){if(!Array.isArray(e))throw new Error("Schema missing or is in an unsupported format");var n=e.map((function(t){return t.name}));r=Object.assign({},{firstRowHeader:!0},r);var o=[[]],i=O(o),a=n;r.firstRowHeader&&(a=t.splice(0,1)[0]);var u=a.reduce((function(t,e,r){var n;return Object.assign(t,((n={})[e]=r,n)),t}),{});return t.forEach((function(t){var r=[];return e.forEach((function(e){var n=e.name,o=e.type,i=e.format,a=void 0===i?function(t){return t}:i,c=e.subtype,s=void 0===c?J.CATEGORICAL:c;o===B.MEASURE&&(s=J.CONTINUOUS);var f=et.get(s),p=u[n],l=f?f.parse(t[p],a):t[p];r.push(l)})),i.apply(void 0,nt(r))})),{data:o,schema:e}};var it=function(t,e,r){if((r=Object.assign({},{firstRowHeader:!0,fieldSeparator:","},r)).fieldSeparator){var n=G(r.fieldSeparator);return ot(n.parseRows(t),e,r)}return{schema:[],data:[]}},at=function(){function t(){this._type=b.DSV_STR}return Object.defineProperty(t.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),t.prototype.convert=function(t,e,r){return it(t,e,r)},t}(),ut=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},ct=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(ut(arguments[e]));return t};var st=function(t,e){if(!Array.isArray(e))throw new Error("Schema missing or is in an unsupported format");var r,n={},o=0,i=[[]],a=O(i);return t.forEach((function(t){var i=[];e.forEach((function(e){var a=e.name,u=e.type,c=e.format,s=void 0===c?function(t){return t}:c,f=e.subtype,p=void 0===f?J.CATEGORICAL:f;u===B.MEASURE&&(p=J.CONTINUOUS);var l=et.get(p);a in n?r=n[a]:(n[a]=o++,r=o-1);var d=l?l.parse(t[a],s):t[a];i[r]=d})),a.apply(void 0,ct(i))})),{data:i,schema:e}},ft=function(){function t(){this._type=b.FLAT_JSON}return Object.defineProperty(t.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),t.prototype.convert=function(t,e){return st(t,e)},t}(),pt=function(){function t(){this._type=b.DSV_ARR}return Object.defineProperty(t.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),t.prototype.convert=function(t,e,r){return ot(t,e,r)},t}();var lt=function(t,e,r){var n={FlatJSON:st,DSVStr:it,DSVArr:ot},o=S(t);if(!o)throw new Error("Could not detect the data format");return n[o](t,e,r)},dt=function(){function t(){this._type=b.AUTO}return Object.defineProperty(t.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),t.prototype.convert=function(t,e,r){return lt(t,e,r)},t}(),ht=function(){function t(){this.store=new Map,this.converters(this._getDefaultConverters())}return t.prototype._getDefaultConverters=function(){return[new at,new pt,new ft,new dt]},t.prototype.converters=function(t){var e=this;return t.forEach((function(t){return e.store.set(t._type,t)})),this.store},t.prototype.register=function(t){return this.store.set(t._type,t),this},t.prototype.unregister=function(t){return this.store.delete(t._type),this},t.prototype.get=function(t){return t&&this.store.has(t)?this.store.get(t):null},t}(),vt=function(){var t=null;return t||new ht}(),yt=function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{c(n.next(t))}catch(t){i(t)}}function u(t){try{c(n.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,u)}c((n=n.apply(t,e||[])).next())}))},gt=function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}},_t=function(t,e){var r=t.options;return e&&!1!==r.useWorker?function(t,e){return j(e)(t)}(t,e):new Promise((function(e,r){setTimeout((function(){try{e(function(t){var e=t.data,r=t.schema,n=t.options,o=vt.get(n.dataFormat);return o?o.convert(e,r,n):{data:[],schema:r}}(t))}catch(t){r(t)}}),0)}))},mt=function(t,e,r,n){return yt(void 0,void 0,void 0,(function(){var o;return gt(this,(function(i){switch(i.label){case 0:return o={dataFormat:b.AUTO},r=Object.assign(Object.assign({},o),r),[4,_t({data:t,schema:e,options:r},n)];case 1:return[2,i.sent()]}}))}))},bt=function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{c(n.next(t))}catch(t){i(t)}}function u(t){try{c(n.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,u)}c((n=n.apply(t,e||[])).next())}))},wt=function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}};var Ot,At=r(118),St=r.n(At),xt=function(){function t(t){this._value=t}return t.prototype.value=function(){return this._value},t.prototype.toString=function(){return String(this._value)},t}(),Et=r(114);!function(t){t.WASM="wasm"}(Ot||(Ot={}));var Tt,Dt,Nt=r(115);!function(t){t.UNDEFINED=""}(Tt||(Tt={})),function(t){t.NULL="null",t.UNDEFINED="undefined",t.NAN="NaN",t.NIL="nil",t.NA="na",t.EMPTY_STRING=""}(Dt||(Dt={}));var Mt,Rt,Ct=((Mt={})[J.TEMPORAL]=function(t,e){var r=t;if("number"!=typeof t){var n=et.get(J.TEMPORAL);r=n?n.parse(t,e):t}return r},Mt[J.CATEGORICAL]=function(t,e){var r=et.get(J.CATEGORICAL),n=r?r.parse(t,e):t;return Ht(n)?n:"_#-"},Mt[J.CONTINUOUS]=function(t,e){var r=et.get(J.CONTINUOUS);return null==r?void 0:r.parse(t,e)},Mt),Ft=function(t,e,r){var n=Ct[t];return n?n(e,r):e},Pt=function(t,e,r){void 0===r&&(r={});var n=t.conditions,o=t.operator;if(n&&o&&n.length>0){r.conditions=[];for(var i=0;i<n.length;i++){var a=r.conditions[i]={},u=Pt(n[i],e,a);u.operator?a=u:r.conditions.pop()}if(r.operator=f(o),-1===r.operator)r={};else if(1===r.conditions.length)r=r.conditions[0]?r.conditions[0]:{};else{var c=[];for(var i in r.conditions)r.conditions[i]&&c.push(r.conditions[i]);r.conditions=c,1===r.conditions.length&&(r=r.conditions[0])}}else if(t.field){var s=t.field,p=t.value,l=e.get(s||{});if(l&&null!=l.index){var d=l.index,h=l.field;r.field=d;var v=h.schema(),y=v.subtype,g=void 0===y?J.CATEGORICAL:y,_=v.format,m=Ft(g,p,void 0===_?function(t){return t}:_);r.value=m,r.operator=f(o),-1==r.operator&&(r={})}}return r},It=function(t,e){new Int32Array(Nt.ib.buffer,t,e.length).set(e)},jt=function(t,e){new Float64Array(Nt.ib.buffer,t,e.length).set(e)},Lt=function(t){void 0===t&&(t=[]);var e=[],r=[];return t.forEach((function(t){"number"==typeof t&&Number.isFinite(t)?(e.push(t),r.push(1)):(e.push(NaN),r.push(-1))})),{indices:r,values:e}},Ut=function(t,e){for(var r=new Int32Array(Nt.ib.buffer,t,e),n=new Array(e),o=0;o<r.length;o++)n[o]=r[o];return n},kt=function(t,e){for(var r=new Float64Array(Nt.ib.buffer,t,e),n=new Array(e),o=0;o<r.length;o++)n[o]=r[o];return n},Ht=function(t){var e="",r=we.defaults.getInvalidStore();if(null==t)return!1;if("number"==typeof t){if(isNaN(t))return!1;e=String(t)}else e=t;return!r.isInvalid(e)},Vt=function(t){return{name:t.name,type:z(t.type),subtype:K(t.subtype),aggregation_function:c(t.defAggFn)}},Yt={stackBy:function(t,e,r,n,o){var i={y0:[],y1:[],id:[]},a=t.context();switch(we._contextType){case Ot.WASM:var u=a.context(),c=a.getSchema().findIndex((function(t){return e===t.name})),s=a.getSchema().findIndex((function(t){return r===t.name})),f=a.getSchema().findIndex((function(t){return n===t.name})),p=Object(Et.f)(u,c,s,f,h(o));i.y0=kt(p.get_y_0(),a.getDataMeta().rows),i.y1=kt(p.get_y_1(),a.getDataMeta().rows),i.id=Ut(p.get_id(),a.getDataMeta().rows),p.free_data(),p.free()}return i}},Bt=function(){return(Bt=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},Jt=function(){function t(){}return t.loadData=function(t,e,r){var n=[];return function(t,e){return bt(void 0,void 0,void 0,(function(){var r,n,o;return wt(this,(function(i){switch(i.label){case 0:return r=t.data,n=t.schema,o=t.options,[4,mt(r,n,o,e)];case 1:return[2,i.sent()]}}))}))}({data:t,schema:e.map((function(t){n.push(Bt({},t));var e=Bt({},t),r=e.format;return r&&"function"==typeof r&&delete e.format,e})),options:r},this._taskerPool).then((function(t){return t.schema=n,t}))},t.AggregationFunctions=n,t.ComparisonOperators=i,t.FilteringModes=s,t.LogicalOperators=u,t.DateTimeFormatter=m,t.FieldType=B,t.FieldSubtype=J,t.DerivationOperations=W,t.SortOrder=p,t.Invalid=xt,t.DataWranglers=Yt,t._taskerPool=function(t){var e,r;if("undefined"!=typeof window){var n=Math.min(null!==(r=null===(e=window.navigator)||void 0===e?void 0:e.hardwareConcurrency)&&void 0!==r?r:1,4);if(null!=window.Worker)return Array.from({length:n}).map((function(){return{isFree:!0,worker:new t}}))}}(St.a),t}(),Gt=function(){function t(t){this._schema=t}return t.prototype.name=function(){return this._schema.name},t.prototype.type=function(){return this._schema.type},t.prototype.schema=function(){return this._schema},t.prototype.displayName=function(){return this._schema.displayName||this._schema.name},t.prototype.subtype=function(){return this._schema.subtype},t}(),Wt=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),zt=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},qt=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(zt(arguments[e]));return t},Kt=function(t){function e(e,r){var n=t.call(this,e)||this;return n._cachedData=[],n._cachedFormattedData=[],n._cachedDomain=[],n._wasmField=r,n._uniqueStrings=[],n}return Wt(e,t),e.prototype._setMeta=function(t){this._uniqueStrings=t},e.prototype._getMeta=function(){return this._uniqueStrings},e.prototype.domain=function(){var t=this;if(!this._cachedDomain.length&&this._wasmField){var e=[],r=this._wasmField.get_domain(),n=Ut(r.data_ptr,r.data_len);r.free(),n.forEach((function(r){-1===r?e.push(we.defaultInvalidValue()):e.push(t._uniqueStrings[r])})),this._cachedDomain=qt(e)}return this._cachedDomain},e.prototype.data=function(){var t=this;if(0===this._cachedData.length&&this._wasmField){var e=Ut(this._wasmField.get_data_info(),this._wasmField.get_rows_count()).map((function(e){var r=t._uniqueStrings[t._wasmField.get_value_at_index(e)];return void 0===r?new xt(we.defaultInvalidValue()):r}));this._cachedData=e}return this._cachedData},e.prototype.formattedData=function(t){if(0===this._cachedFormattedData.length||t){var e=this.data(),r=t||this._schema.format,n=[];this._cachedFormattedData=e,r instanceof Function&&(e.forEach((function(t){var e;e=t instanceof xt?t:r(t),n.push(e)})),this._cachedFormattedData=n)}return this._cachedFormattedData},e.prototype.getRowsCount=function(){return this._wasmField?this._wasmField.get_rows_count():0},e.prototype.dispose=function(){this._cachedDomain=[],this._cachedData=[],this._cachedFormattedData=[],this._wasmField&&this._wasmField.free()},e}(Gt),Xt=Kt,Qt=function(t,e,r){var n=function(t){void 0===t&&(t=[]);for(var e=new Map,r=[],n=[],o=0,i=0;i<t.length;i++){var a=Ht(t[i]);a&&!e.has(t[i])?(e.set(t[i],o),r.push(o),o++,n.push(String(t[i]))):r.push(a?e.get(t[i]):-1)}return{uniqueStrings:n,indices:r}}(t),o=n.uniqueStrings,i=n.indices,a=void 0,u=Number.MAX_VALUE;if(r){var c=r.add_field(Vt(e),o),s=(a=r.get_categorical_field(c)).get_data_indices();It(s,i)}var f=new Kt(e,a);return f._setMeta(o),{field:f,index:u}},$t=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Zt=function(t){function e(e,r){var n=t.call(this,e)||this;return n._cachedData=[],n._cachedDomain=[],n._wasmField=r,n._cachedFormattedData=[],n}return $t(e,t),e.prototype.domain=function(){if(this._wasmField){var t=this._wasmField.get_domain();t.length&&(this._cachedDomain=[t[0],t[1]])}return this._cachedDomain},e.prototype.data=function(){var t=this;if(0===this._cachedData.length&&this._wasmField){var e=Ut(this._wasmField.get_data_info(),this._wasmField.get_rows_count()).map((function(e){var r=t._wasmField.get_value_at_index(e);return Number.isFinite(r)?r:new xt(NaN)}));this._cachedData=e}return this._cachedData},e.prototype.formattedData=function(t){if(0===this._cachedFormattedData.length||t){var e=this.data(),r=t||this._schema.format,n=[];this._cachedFormattedData=e,r instanceof Function&&(e.forEach((function(t){var e;e=t instanceof xt?t:r(t),n.push(e)})),this._cachedFormattedData=n)}return this._cachedFormattedData},e.prototype.getRowsCount=function(){return this._wasmField?this._wasmField.get_rows_count():0},e.prototype.dispose=function(){this._cachedDomain=[],this._cachedData=[],this._cachedFormattedData=[],this._wasmField&&this._wasmField.free()},e}(Gt),te=Zt,ee=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),re=function(t){function e(e,r){var n=t.call(this,e)||this;return n._cachedDomain=[],n._cachedData=[],n._wasmField=r,n._cachedFormattedData=[],n}return ee(e,t),e.prototype.domain=function(){if(this._wasmField){var t=this._wasmField.get_domain();t.length&&(this._cachedDomain=[t[0],t[1]])}return this._cachedDomain},e.prototype.data=function(){var t=this;if(0===this._cachedData.length&&this._wasmField){var e=Ut(this._wasmField.get_data_info(),this._wasmField.get_rows_count()).map((function(e){var r=t._wasmField.get_value_at_index(e);return Number.isFinite(r)?r:new xt(NaN)}));this._cachedData=e}return this._cachedData},e.prototype.formattedData=function(t){if(0===this._cachedFormattedData.length||t){var e=this.data(),r=t||this._schema.format;if(this._cachedFormattedData=e,r instanceof Function){var n=[];e.forEach((function(t){var e;e=t instanceof xt?t:r(t),n.push(e)})),this._cachedFormattedData=n}else if("string"==typeof r||r instanceof String){var o=[];e.forEach((function(t){var e;e=t instanceof xt?t:m.formatAs(new Date(t),r),o.push(e)})),this._cachedFormattedData=o}}return this._cachedFormattedData},e.prototype.getRowsCount=function(){return this._wasmField?this._wasmField.get_rows_count():0},e.prototype.dispose=function(){this._cachedDomain=[],this._cachedData=[],this._cachedFormattedData=[],this._wasmField&&this._wasmField.free()},e.prototype.minimumConsecutiveDifference=function(){var t=this._wasmField?this._wasmField.min_consecutive_diff():1/0;return isFinite(t)?t:NaN},e}(Gt),ne=re,oe=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),ie=function(t){function e(e,r){var n=t.call(this,e)||this;return n._cachedDomain=[],n._cachedData=[],n._wasmField=r,n}return oe(e,t),e.prototype.displayName=function(){return this._schema.name},e.prototype.domain=function(){return[]},e.prototype.formattedData=function(){return[]},e.prototype.data=function(){var t=this;if(0===this._cachedData.length&&this._wasmField){var e=Ut(this._wasmField.get_data_info(),this._wasmField.get_rows_count()).map((function(e){return t._wasmField.get_value_at_index(e)}));this._cachedData=e}return this._cachedData},e.prototype.getRowsCount=function(){return this._wasmField?this._wasmField.get_rows_count():0},e.prototype.getValueAtIndex=function(t){return this.data()[t]},e.prototype.dispose=function(){this._cachedDomain=[],this._cachedData=[],this._wasmField&&this._wasmField.free()},e}(Gt),ae=ie,ue=function(){return{name:"__id__",format:function(t){return t},displayName:"__id__",type:B.MEASURE,subtype:J.ROWID,defAggFn:"sum"}},ce=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},se=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(ce(arguments[e]));return t},fe=function(){function t(e,r){if(this._contextName=Ot.WASM,this._fieldOrder=[],this._fieldMap=new Map,this._dataMeta={rows:0,columns:0},e instanceof t)this._context=e._context,this._fieldOrder=e._fieldOrder,this._fieldMap=e._fieldMap;else{var n=e.data,o=e.schema,i=r,a=i.rows,u=i.columns;this._dataMeta=r,a&&(this._context=new Et.a(new Et.b(a,u))),this.createFields(n,o)}}return t.prototype.updateFieldMap=function(t){var e=t.field,r=t.index,n=e.name(),o=r===Number.MAX_VALUE?this._fieldMap.size:r;this._fieldMap.set(n,{field:e,index:o})},t.prototype.createFields=function(t,e){var r=this;e.forEach((function(e,n){r.createField(t[n],e)})),this.createField(new Array(t[0].length).fill(0).map((function(t,e){return e})),ue())},t.prototype.createField=function(t,e){switch(e.subtype){case J.CATEGORICAL:this.updateFieldMap(Qt(t,e,this._context));break;case J.CONTINUOUS:this.updateFieldMap(function(t,e,r){var n=Lt(t),o=n.indices,i=n.values,a=void 0,u=Number.MAX_VALUE;return r&&(u=r.add_field(Vt(e),[]),a=r.get_continuous_field(u),It(a.get_data_indices(),o),jt(a.get_data_ptr(),i)),{field:new Zt(e,a),index:u}}(t,e,this._context));break;case J.TEMPORAL:this.updateFieldMap(function(t,e,r){var n=Lt(t),o=n.indices,i=n.values,a=Number.MAX_VALUE,u=void 0;return r&&(a=r.add_field(Vt(e),[]),u=r.get_temporal_field(a),It(u.get_data_indices(),o),jt(u.get_data_ptr(),i)),{field:new re(e,u),index:a}}(t,e,this._context));break;case J.ROWID:this.updateFieldMap(function(t,e,r){var n=void 0,o=Number.MAX_VALUE;return r&&(o=r.add_field(Vt(e),[]),n=r.get_id_field(o),It(n.get_data_ptr(),t)),{field:new ie(e,n),index:o}}(t,e,this._context))}this._fieldOrder.push(e.name)},t.prototype.updateFields=function(t){var e=this;this._fieldOrder.forEach((function(r){var n=t.get(r),o=n.field,i=n.index,a=o.schema();switch(a.subtype){case J.CATEGORICAL:var u=new Xt(a,e._context.get_categorical_field(i));u._setMeta(o._getMeta()),e.updateFieldMap({field:u,index:i});break;case J.CONTINUOUS:e.updateFieldMap({index:i,field:new te(a,e._context.get_continuous_field(i))});break;case J.TEMPORAL:e.updateFieldMap({field:new ne(a,e._context.get_temporal_field(i)),index:i});break;case J.ROWID:e.updateFieldMap({field:new ae(a,e._context.get_id_field(i)),index:i})}}))},t.prototype.setContextInfo=function(t,e,r){void 0===t&&(t=this._context),void 0===e&&(e=se(this._fieldOrder)),void 0===r&&(r=this._fieldMap),this._context?(this._context=t,this._dataMeta={rows:t.row_count(),columns:t.column_count()},this._fieldOrder=e,this._fieldMap=new Map,this.updateFields(r)):(this._fieldOrder=e,this._fieldMap=r)},t.prototype.getClonedFieldMap=function(t,e){var r=new Map;return e.forEach((function(e,n){var o=t._fieldMap.get(e).field;r.set(e,{field:o,index:n})})),r},t.prototype.getField=function(t){var e=(this._fieldMap.get(t)||{}).field;return void 0===e?void 0:e},t.prototype.getData=function(t,e){var r=this;void 0===t&&(t=0);var n=[],o=[],i=this._fieldMap.get(this._fieldOrder[0]);if(i){for(var a=i.field.getRowsCount(),u=e||a,c=function(t){o.push([]),s._fieldOrder.forEach((function(e,n){var i=r._fieldMap.get(e).field,a=o.length-1,u=i.data()||[];o[a][n]=u[t]}))},s=this,f=t;f<u;f++)c(f);return{schema:n=this.getSchema(),data:o}}return{schema:n,data:[]}},t.prototype.getSchema=function(){var t=this;return this._fieldOrder.map((function(e){return t._fieldMap.get(e).field.schema()}))},t.prototype.getDataMeta=function(){return this._dataMeta},t.prototype.sort=function(t){var e=this,r=this.clone();if(this._context){var n=[];t.forEach((function(t){var r=e._fieldMap.get(t[0]);r&&n.push([r.index,h(t[1])])}));var o=this._context.sort(n);r.setContextInfo(o)}return r},t.prototype.groupBy=function(t,e,r){var n=this;void 0===e&&(e=[]),void 0===r&&(r={createId:!0});var o=this.clone(),i=ce(t.reduce((function(t,e){var r=n._fieldMap.get(e);return r&&(r.field instanceof Xt||r.field instanceof ne)&&(t[0].push(e),t[1].push(r.index)),t}),[[],[]]),2),a=i[0],u=i[1],s=[];e.map((function(t){var e=n._fieldMap.get(t.field);e&&s.push([e.index,c(t.aggn)])}));var f=this._context?this._context.group_by(u,s):void 0,p=this._fieldOrder.filter((function(t){var e;return(null===(e=n._fieldMap.get(t))||void 0===e?void 0:e.field)instanceof te}));p=se(a,p);var l=this.getClonedFieldMap(o,p);if(o.setContextInfo(f,p,l),!1!==r.createId){var d=o._fieldMap.get(o._fieldOrder[0]).field.getRowsCount();o.createField(new Array(d).fill(0).map((function(t,e){return e})),ue())}return o},t.prototype.select=function(t,e){var r=this.clone(),n=r;if(this._context){var o=Pt(t,this._fieldMap);if(o.operator){var i=(e||{}).mode,a=void 0===i?s.NORMAL:i,u=d(a),c=this._context.select(o,u);switch(a){case s.ALL:r.setContextInfo(c.get_filtered_dm());var f=this.clone();f.setContextInfo(c.get_unfiltered_dm()),n=[r,f];break;case s.INVERSE:r.setContextInfo(c.get_unfiltered_dm()),n=r;break;default:r.setContextInfo(c.get_filtered_dm()),n=r}c.free()}else n.setContextInfo(n._context&&n._context.clone())}return n},t.prototype.project=function(t,e){var r=this,n=this.clone(),o=n,i=(e||{}).mode,a=void 0===i?s.NORMAL:i,u=[],c=[];t.map((function(t){var e=r._fieldMap.get(t);e&&(u.push(t),c.push(e.index))})),u.push("__id__");var f,p=this._fieldOrder.filter((function(t,e){return!c.includes(e)})),l=d(a),h=this._context?this._context.project({columns:c,mode:l}):void 0;switch(a){case s.ALL:f=this.getClonedFieldMap(n,u),n.setContextInfo(h?h.get_filtered_dm():void 0,u,f);var v=this.clone();f=this.getClonedFieldMap(v,p),v.setContextInfo(h?h.get_unfiltered_dm():void 0,p,f),o=[n,v];break;case s.INVERSE:f=this.getClonedFieldMap(n,p),n.setContextInfo(h?h.get_unfiltered_dm():void 0,p,f),o=n;break;default:f=this.getClonedFieldMap(n,u),n.setContextInfo(h?h.get_filtered_dm():void 0,u,f),o=n}return h&&h.free(),o},t.prototype.splitByRow=function(t){var e=this,r=[];if(this._context){var n=[];t.forEach((function(t){var r=e._fieldMap.get(t);r&&n.push(r.index)}));var o=this._context.split_by_row(n),i=o.get_count();r=[];for(var a=0;a<i;a++){var u=this.clone();u.setContextInfo(o.get_dm()),r.push(u)}o.free()}return r},t.prototype.clone=function(){return new t(this)},t.prototype.dispose=function(t){var e=this,r=t.disposePartialFields,n=t.disposeFields,o=r.dispose,i=r.values,a=void 0===i?[]:i;if(o&&this._context){var u=a.map((function(t){return e._fieldMap.get(t).index}));this._context.dispose(u)}n&&this._fieldOrder.forEach((function(t){e._fieldMap.get(t).field.dispose()})),this._context&&this._context.free()},t.prototype.addIdField=function(t){return this.createField(Array.from(t),ue()),this},t.prototype.calculateVariable=function(t,e,r){var n=this,o=this.clone();if(this._context){var i=e.map((function(t){return n._fieldMap.get(t).field.data()})),a=t.subtype,u=void 0===a?J.CATEGORICAL:a,c=t.format,s=new Array(this._context.get_partial_row_count());s.fill(-1);for(var f=this._context.get_eligible_rows(),p=function(t){var e=r.apply(void 0,se(i.map((function(e){return e[t]}))));u===J.TEMPORAL?s[f[t]]=Ft(u,e,c||function(t){return t}):s[f[t]]=e},l=0;l<this._dataMeta.rows;l++)p(l);var d=this._context.clone();o.setContextInfo(d),o.createField(s,t)}return o},t.prototype.getMatchingIds=function(t){return Array.from(this._context&&t._context?this._context.get_matching_ids(t._context):[])},t.prototype.context=function(){return this._context},t}(),pe=((Rt={})[W.SELECT]=function(t){return{disposeFields:!0,disposePartialFields:{dispose:!1,values:[]}}},Rt[W.PROJECT]=function(t){return{disposeFields:!0,disposePartialFields:{dispose:!1,values:[]}}},Rt[W.GROUPBY]=function(t){return{disposeFields:!0,disposePartialFields:{dispose:!0,values:[]}}},Rt[W.SORT]=function(t){return{disposeFields:!0,disposePartialFields:{dispose:!1,values:[]}}},Rt[W.SPLIT]=function(t){return{disposeFields:!0,disposePartialFields:{dispose:!1,values:[]}}},Rt[W.CALCULATE]=function(t){return{disposeFields:!0,disposePartialFields:{dispose:!0,values:[t.fieldInfo.name]}}},Rt),le=function(t,e){for(;t;)t._refCount=Math.max(t._refCount+(e?1:-1),0),t=null==t?void 0:t.getParent()},de=function(t,e,r,n){var o=e.info,i=e.query,a=e.targetMap,u=e.nonPropagationDms,c=o.targetDms,s=void 0===c?new Set:c,f=o.payload,p=o.exclude,l=void 0===p||p;if(!1!==a.get(t.id())){var d=n;if(i){var h=t.id();!r.get(h)&&d||(d=t.select(i),t.removeChild(d),d.detachParent())}var v=s.has(t.id());(function(t,e,r,n){var o=n._propagationInfo.listeners;return r&&o.forEach((function(r){r(t,e)})),!r||!o.length})(d,f,l?!v:v,t)&&u.push(d),t.getChildren().filter((function(t){return!1!==a.get(t.id())})).forEach((function(t){var n;d&&(n=function(t,e){var r,n=e.getDerivations()[0],o=n.operation,i=n.params,a=void 0===i?[]:i;switch(o){case W.SELECT:r=t.select(a.query);break;case W.GROUPBY:var u=(r=t.groupBy(a.fields,a.reducers,{createId:!1}))._context.getMatchingIds(e._context);r._context.addIdField(u);break;case W.PROJECT:r=t.project(a.fields);break;case W.SORT:r=t.sort(a);break;case W.CALCULATE:r=t.calculateVariable(a.fieldInfo,a.fields,a.fn)}return r}(d,t)),de(t,e,r,n)}))}},he=function(t,e,r,n){void 0===e&&(e=new Set),void 0===r&&(r=!0),void 0===n&&(n=new Map);var o=t.getChildren(),i=!1;o.forEach((function(t){var o=he(t,e,r,n);i=i||o}));var a=e.has(t.id());return i=i||(r?!a:a),n.set(t.id(),i),i},ve=function(t,e){return{operator:i.EQUAL,value:t===we.defaultInvalidValue()?void 0:t,field:e}},ye=function(){function t(){this._defaultInvalids=new Set;var t=Object.values(Dt);for(var e in t){var r=t[e];this._defaultInvalids.add(r)}}return t.prototype.setInvalids=function(t){var e=this;t.forEach((function(t){return e._defaultInvalids.add(t)}))},t.prototype.getInvalids=function(){return this._defaultInvalids},t.prototype.unsetInvalids=function(t){for(var e in t)this._defaultInvalids.delete(t[e])},t.prototype.isInvalid=function(t){return this._defaultInvalids.has(t)},t}(),ge=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),_e=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},me=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(_e(arguments[e]));return t},be=function(){var t=0;return function(){return t++}}(),we=function(t){function e(r){var n=t.call(this)||this;if(n._children=[],n._derivations=[],r instanceof e)n._context=r._context,n._derivations=me(r._derivations),n._commonDerivation=null;else{var o=r.data,i=r.schema,a=n.sanitizeSchema(i);switch(e._contextType){case Ot.WASM:n._context=n.setWasmContext({data:o,schema:a},{rows:o[0].length,columns:a.length});break;default:n._context=n.setWasmContext({data:o,schema:a},{rows:o[0].length,columns:a.length})}n._commonDerivation=null}return n._id=be(),n._propagationInfo={listeners:[],propagationCriterias:new Map},n._refCount=1,n}return ge(e,t),e.setContext=function(t){void 0===t&&(t=Ot.WASM),e._contextType=t},e.prototype.setWasmContext=function(t,e){return new fe(t,e)},e.prototype.setContextInfo=function(t){this._context=t},e.prototype.sanitizeSchema=function(t){var r=e.defaultAggregation();return t.map((function(t){var e=t.format,n=void 0===e?function(t){return t}:e;return{name:t.name,type:t.type,subtype:t.subtype||X(t.type),defAggFn:t.defAggFn||r,format:n,displayName:t.displayName||t.name}}))},e.prototype.cloneFromContext=function(t){var e=this;if(Array.isArray(t)){var r=[];return t.forEach((function(t){var n=e.clone();n.setContextInfo(t),n._derivations=[],r.push(n)})),r}var n=this.clone();return n._derivations=[],n.setContextInfo(t),n},e.setInvalids=function(t){t&&e.defaults.setInvalids(t)},e.unsetInvalids=function(t){t&&e.defaults.unsetInvalids(t)},e.defaultInvalidValue=function(t){return t&&e.defaults.setDefaultInvalidValue(t),e.defaults.getDefaultInvalidValue()},e.defaultAggregation=function(t){return t&&e.defaults.setDefaultAggregation(t),e.defaults.getDefaultAggregation()},Object.defineProperty(e,"defaults",{get:function(){return e._defaults||(e._defaults=function(){var t=n.SUM,e=new ye,r="_invalid";return{setDefaultAggregation:function(e){t=e},getDefaultAggregation:function(){return t},setInvalids:function(t){e.setInvalids(t)},unsetInvalids:function(t){e.unsetInvalids(t)},getInvalidStore:function(){return e},setDefaultInvalidValue:function(t){r=t},getDefaultInvalidValue:function(){return r}}}()),e._defaults},enumerable:!1,configurable:!0}),e.prototype.id=function(){return this._id},e.prototype.getField=function(t){return this._context.getField(t)},e.prototype.getParent=function(){return this._parent},e.prototype.getChildren=function(){return me(this._children)},e.prototype.getDerivations=function(){return me(this._derivations)},e.prototype.removeChild=function(t){var e=this._children.findIndex((function(e){return e===t}));e>-1&&this._children.splice(e,1)},e.prototype.detachParent=function(){return this._parent=void 0,this},e.prototype.getData=function(){return this._context.getData()},e.prototype.getDataMeta=function(){return this._context.getDataMeta()},e.prototype.getSchema=function(){return this._context.getSchema()},e.prototype.clone=function(t){void 0===t&&(t=!0);var r=new e(this);return t&&(le(this,!0),this._children.push(r),r._parent=this),r},e.prototype.sort=function(t){var e=this._context.sort(t),r=this.cloneFromContext(e);return r._derivations.push({operation:W.SORT,params:t}),r},e.prototype.select=function(t,e){var r=(e||{}).mode,n=void 0===r?s.NORMAL:r,o=this._context.select(t,{mode:n}),i=this.cloneFromContext(o);return i instanceof Array?(i[0]._derivations.push({operation:W.SELECT,params:{query:t,options:{mode:s.NORMAL}}}),i[1]._derivations.push({operation:W.SELECT,params:{query:t,options:{mode:s.INVERSE}}})):i._derivations.push({operation:W.SELECT,params:{query:t,options:{mode:n}}}),i},e.prototype.splitByRow=function(t){var e=this._context.splitByRow(t),r=this.cloneFromContext(e);return r.map((function(e){var r=function(t,e){var r={},n=e.length;if(1===n){var o=t.getField(e[0]);r=o?ve(o.domain()[0],e[0]):{}}else n>1&&(r.conditions=[],e.forEach((function(e,n){var o=t.getField(e);o&&(r.operator=u.AND,r.conditions[n]=ve(o.domain()[0],e))})));return r}(e,t);return e._commonDerivation={operation:W.SPLIT,params:{fields:t}},e._derivations.push({operation:W.SELECT,params:{query:r,options:{mode:s.NORMAL}}})})),r},e.prototype.project=function(t,e){var r=(e||{}).mode,n=void 0===r?s.NORMAL:r,o=this._context.project(t,{mode:n}),i=this.cloneFromContext(o);return i instanceof Array?(i[0]._derivations.push({operation:W.PROJECT,params:{fields:t,options:{mode:s.NORMAL}}}),i[1]._derivations.push({operation:W.PROJECT,params:{fields:t,options:{mode:s.INVERSE}}})):i._derivations.push({operation:W.PROJECT,params:{fields:t,options:e}}),i},e.prototype.groupBy=function(t,e,r){void 0===e&&(e=[]),void 0===r&&(r={});var n=this._context.groupBy(t,e,r),o=this.cloneFromContext(n);return o._derivations.push({operation:W.GROUPBY,params:{fields:t,reducers:e}}),o},e.prototype.disposeRecursive=function(t){void 0===t&&(t=!0),this._refCount=Math.max(this._refCount-1,0),(0===this._refCount||t)&&(this.disposeResources(),this.getChildren().forEach((function(e){e.disposeRecursive(t)})))},e.prototype.getPropagationCriterias=function(){return this._propagationInfo.propagationCriterias},e.prototype.dispose=function(t){if(void 0===t&&(t=!0),!this._disposed){var e=this.getParent();this.disposeRecursive(t),le(e,!1),function(t){for(;t;){var e=null==t?void 0:t.getParent();!t._refCount&&t.disposeResources(),t=e}}(e)}return this},e.prototype.disposeResources=function(){var t;if(this._disposed)return this;var e=this._derivations[this._derivations.length-1];if(e){var r=e.operation;this._context.dispose(pe[r](e.params))}else this._context.dispose({disposeFields:!0,disposePartialFields:{dispose:!1,values:[]}});return null===(t=this._parent)||void 0===t||t.removeChild(this),this.detachParent(),this._disposed=!0,this},e.prototype.propagate=function(t,e){var r=function(t){for(;t;){var e=null==t?void 0:t.getParent();if(!e)break;t=e}return t}(this),n=t.map((function(t){return t.criteria})).filter((function(t){return null!==t})),o=n.length?{operator:e.queryOperator||"and",conditions:n}:null,i=function(t,e){var r=new Map;return t.forEach((function(t){for(var n=t.dm,o=void 0===n?e:n,i=t.criteria,a=t.fields,u=o,c=a.slice(),s=a.some((function(t){var e;return(null===(e=o.getField(t))||void 0===e?void 0:e.type())===B.MEASURE})),f=function(){var t=null==u?void 0:u.getParent(),e=u.getDerivations();if(e.length){var n=e[0].operation===W.GROUPBY&&s,o=c.filter((function(e){return t.getField(e)}));if(n)return r.set(null==u?void 0:u.id(),i),"break";o.length<c.length&&(c=o,r.set(null==u?void 0:u.id(),i))}u=t};u&&"break"!==f(););})),r}(t,this),a=new Map;he(r,e.targetDms,e.exclude,a);var u=[];return de(r,{query:o,info:e,targetMap:a,nonPropagationDms:u},i),u.forEach((function(t){t&&t.dispose(!1)})),this},e.prototype.onPropagation=function(t){return this._propagationInfo.listeners.push(t),this},e.prototype.unsubscribePropagationListeners=function(){return this._propagationInfo.listeners=[],this},e.prototype.calculateVariable=function(t,e,r){var n=this._context.calculateVariable(this.sanitizeSchema([t])[0],e,r),o=this.cloneFromContext(n);return o._derivations.push({operation:W.CALCULATE,params:{fieldInfo:t,fields:e,fn:r}}),o},e.prototype.context=function(){return this._context},e._contextType=Ot.WASM,e}(Jt);e.default=we}}]);