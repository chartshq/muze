{"version":3,"sources":["webpack://muze/webpack/universalModuleDefinition","webpack://muze/webpack/bootstrap","webpack://muze/../datamodel/node_modules/d3-dsv/index.js","webpack://muze/../datamodel/node_modules/d3-dsv/src/csv.js","webpack://muze/../datamodel/node_modules/d3-dsv/src/dsv.js","webpack://muze/../datamodel/node_modules/d3-dsv/src/tsv.js","webpack://muze/../datamodel/src/constants/index.js","webpack://muze/../datamodel/src/converter/auto-resolver.js","webpack://muze/../datamodel/src/converter/dsv-arr.js","webpack://muze/../datamodel/src/converter/dsv-str.js","webpack://muze/../datamodel/src/converter/flat-json.js","webpack://muze/../datamodel/src/converter/index.js","webpack://muze/../datamodel/src/datamodel.js","webpack://muze/../datamodel/src/default-config.js","webpack://muze/../datamodel/src/enums/data-format.js","webpack://muze/../datamodel/src/enums/dimension-subtype.js","webpack://muze/../datamodel/src/enums/field-type.js","webpack://muze/../datamodel/src/enums/filtering-mode.js","webpack://muze/../datamodel/src/enums/index.js","webpack://muze/../datamodel/src/enums/measure-subtype.js","webpack://muze/../datamodel/src/field-creator.js","webpack://muze/../datamodel/src/field-store.js","webpack://muze/../datamodel/src/fields/categorical.js","webpack://muze/../datamodel/src/fields/datetime.js","webpack://muze/../datamodel/src/fields/dimension.js","webpack://muze/../datamodel/src/fields/discreteMeasure.js","webpack://muze/../datamodel/src/fields/field.js","webpack://muze/../datamodel/src/fields/index.js","webpack://muze/../datamodel/src/fields/measure.js","webpack://muze/../datamodel/src/fields/partial-field.js","webpack://muze/../datamodel/src/helper.js","webpack://muze/../datamodel/src/index.js","webpack://muze/../datamodel/src/operator/bucket-creator.js","webpack://muze/../datamodel/src/operator/child-iterator.js","webpack://muze/../datamodel/src/operator/compose.js","webpack://muze/../datamodel/src/operator/cross-product.js","webpack://muze/../datamodel/src/operator/data-builder.js","webpack://muze/../datamodel/src/operator/difference.js","webpack://muze/../datamodel/src/operator/get-common-schema.js","webpack://muze/../datamodel/src/operator/group-by-function.js","webpack://muze/../datamodel/src/operator/group-by.js","webpack://muze/../datamodel/src/operator/index.js","webpack://muze/../datamodel/src/operator/merge-sort.js","webpack://muze/../datamodel/src/operator/natural-join-filter-function.js","webpack://muze/../datamodel/src/operator/natural-join.js","webpack://muze/../datamodel/src/operator/outer-join.js","webpack://muze/../datamodel/src/operator/pure-operators.js","webpack://muze/../datamodel/src/operator/row-diffset-iterator.js","webpack://muze/../datamodel/src/operator/union.js","webpack://muze/../datamodel/src/relation.js","webpack://muze/../datamodel/src/stats/index.js","webpack://muze/../datamodel/src/utils/column-major.js","webpack://muze/../datamodel/src/utils/date-time-formatter.js","webpack://muze/../datamodel/src/utils/domain-generator.js","webpack://muze/../datamodel/src/utils/extend2.js","webpack://muze/../datamodel/src/utils/helper.js","webpack://muze/../datamodel/src/utils/index.js","webpack://muze/../datamodel/src/utils/reducer-store.js","webpack://muze/../datamodel/src/value.js","webpack://muze/./packages/layout/src/enums/constants.js","webpack://muze/./packages/layout/src/generic-layout/index.js","webpack://muze/./packages/layout/src/grid-layout/computations.js","webpack://muze/./packages/layout/src/grid-layout/defaults.js","webpack://muze/./packages/layout/src/grid-layout/layout-helper.js","webpack://muze/./packages/layout/src/grid-layout/layout.js","webpack://muze/./packages/layout/src/grid-layout/renderer.js","webpack://muze/./packages/layout/src/grid-layout/span-maker.js","webpack://muze/./packages/layout/src/index.js","webpack://muze/./packages/layout/src/utils/index.js","webpack://muze/./packages/layout/src/visual-matrix/default-config.js","webpack://muze/./packages/layout/src/visual-matrix/props.js","webpack://muze/./packages/layout/src/visual-matrix/visual-matrix.js","webpack://muze/./packages/muze-axis/src/axis-renderer.js","webpack://muze/./packages/muze-axis/src/cartesian-axis/band-axis.js","webpack://muze/./packages/muze-axis/src/cartesian-axis/continous-axis.js","webpack://muze/./packages/muze-axis/src/cartesian-axis/default-config.js","webpack://muze/./packages/muze-axis/src/cartesian-axis/helper.js","webpack://muze/./packages/muze-axis/src/cartesian-axis/index.js","webpack://muze/./packages/muze-axis/src/cartesian-axis/interpolators/index.js","webpack://muze/./packages/muze-axis/src/cartesian-axis/interpolators/linear.js","webpack://muze/./packages/muze-axis/src/cartesian-axis/interpolators/log.js","webpack://muze/./packages/muze-axis/src/cartesian-axis/interpolators/pow.js","webpack://muze/./packages/muze-axis/src/cartesian-axis/props.js","webpack://muze/./packages/muze-axis/src/cartesian-axis/simple-axis.js","webpack://muze/./packages/muze-axis/src/cartesian-axis/time-axis.js","webpack://muze/./packages/muze-axis/src/color-axis/color-axis.js","webpack://muze/./packages/muze-axis/src/color-axis/color-maps.js","webpack://muze/./packages/muze-axis/src/color-axis/color-strategy.js","webpack://muze/./packages/muze-axis/src/color-axis/defaults.js","webpack://muze/./packages/muze-axis/src/color-axis/props.js","webpack://muze/./packages/muze-axis/src/data-type-scale-map.js","webpack://muze/./packages/muze-axis/src/enums/axis-orientation.js","webpack://muze/./packages/muze-axis/src/enums/constants.js","webpack://muze/./packages/muze-axis/src/enums/scale-type.js","webpack://muze/./packages/muze-axis/src/index.js","webpack://muze/./packages/muze-axis/src/scale-creator.js","webpack://muze/./packages/muze-axis/src/shape-axis/defaults.js","webpack://muze/./packages/muze-axis/src/shape-axis/helper.js","webpack://muze/./packages/muze-axis/src/shape-axis/props.js","webpack://muze/./packages/muze-axis/src/shape-axis/shape-axis.js","webpack://muze/./packages/muze-axis/src/size-axis/defaults.js","webpack://muze/./packages/muze-axis/src/size-axis/props.js","webpack://muze/./packages/muze-axis/src/size-axis/size-axis.js","webpack://muze/./packages/muze-axis/src/size-axis/size-strategy.js","webpack://muze/./packages/muze-axis/src/styles.scss?b476","webpack://muze/./packages/muze-firebolt/src/actions/behavioural/brush.js","webpack://muze/./packages/muze-firebolt/src/actions/behavioural/filter.js","webpack://muze/./packages/muze-firebolt/src/actions/behavioural/generic.js","webpack://muze/./packages/muze-firebolt/src/actions/behavioural/highlight.js","webpack://muze/./packages/muze-firebolt/src/actions/behavioural/index.js","webpack://muze/./packages/muze-firebolt/src/actions/behavioural/persistent.js","webpack://muze/./packages/muze-firebolt/src/actions/behavioural/select.js","webpack://muze/./packages/muze-firebolt/src/actions/behavioural/volatile.js","webpack://muze/./packages/muze-firebolt/src/actions/physical/click.js","webpack://muze/./packages/muze-firebolt/src/actions/physical/drag.js","webpack://muze/./packages/muze-firebolt/src/actions/physical/helpers/drag-action-config.js","webpack://muze/./packages/muze-firebolt/src/actions/physical/helpers/drag-event.js","webpack://muze/./packages/muze-firebolt/src/actions/physical/helpers/index.js","webpack://muze/./packages/muze-firebolt/src/actions/physical/hover.js","webpack://muze/./packages/muze-firebolt/src/actions/physical/index.js","webpack://muze/./packages/muze-firebolt/src/actions/physical/longtouch.js","webpack://muze/./packages/muze-firebolt/src/actions/physical/selection-box-drag.js","webpack://muze/./packages/muze-firebolt/src/actions/physical/touch-drag.js","webpack://muze/./packages/muze-firebolt/src/behaviour-effect-map.js","webpack://muze/./packages/muze-firebolt/src/enums/actions.js","webpack://muze/./packages/muze-firebolt/src/enums/behaviours.js","webpack://muze/./packages/muze-firebolt/src/enums/constants.js","webpack://muze/./packages/muze-firebolt/src/enums/selection.js","webpack://muze/./packages/muze-firebolt/src/firebolt.js","webpack://muze/./packages/muze-firebolt/src/helper/index.js","webpack://muze/./packages/muze-firebolt/src/index.js","webpack://muze/./packages/muze-firebolt/src/selection-set/index.js","webpack://muze/./packages/muze-firebolt/src/side-effects/anchors/index.js","webpack://muze/./packages/muze-firebolt/src/side-effects/brush-anchors.js","webpack://muze/./packages/muze-firebolt/src/side-effects/crossline/index.js","webpack://muze/./packages/muze-firebolt/src/side-effects/crossline/styles.scss?5624","webpack://muze/./packages/muze-firebolt/src/side-effects/filter/index.js","webpack://muze/./packages/muze-firebolt/src/side-effects/generic.js","webpack://muze/./packages/muze-firebolt/src/side-effects/helper/index.js","webpack://muze/./packages/muze-firebolt/src/side-effects/index.js","webpack://muze/./packages/muze-firebolt/src/side-effects/persistent-anchors.js","webpack://muze/./packages/muze-firebolt/src/side-effects/plot-highlighter/index.js","webpack://muze/./packages/muze-firebolt/src/side-effects/plot-highlighter/strategy.js","webpack://muze/./packages/muze-firebolt/src/side-effects/selection-box/helper.js","webpack://muze/./packages/muze-firebolt/src/side-effects/selection-box/index.js","webpack://muze/./packages/muze-firebolt/src/side-effects/selection-box/styles.scss?a1f5","webpack://muze/./packages/muze-firebolt/src/side-effects/spawnable.js","webpack://muze/./packages/muze-firebolt/src/side-effects/surrogate.js","webpack://muze/./packages/muze-firebolt/src/side-effects/tooltip/index.js","webpack://muze/./packages/muze-firebolt/src/side-effects/tooltip/strategies.js","webpack://muze/./packages/muze-firebolt/src/side-effects/tooltip/styles.scss?fb1a","webpack://muze/./packages/muze-legend/src/enums/actions.js","webpack://muze/./packages/muze-legend/src/enums/behaviours.js","webpack://muze/./packages/muze-legend/src/enums/constants.js","webpack://muze/./packages/muze-legend/src/enums/side-effects.js","webpack://muze/./packages/muze-legend/src/firebolt/action-behaviour-map.js","webpack://muze/./packages/muze-legend/src/firebolt/behaviour-effect-map.js","webpack://muze/./packages/muze-legend/src/firebolt/behavioural/select.js","webpack://muze/./packages/muze-legend/src/firebolt/helper.js","webpack://muze/./packages/muze-legend/src/firebolt/legend-firebolt.js","webpack://muze/./packages/muze-legend/src/firebolt/physical/click.js","webpack://muze/./packages/muze-legend/src/firebolt/physical/drag.js","webpack://muze/./packages/muze-legend/src/firebolt/physical/hover.js","webpack://muze/./packages/muze-legend/src/firebolt/physical/index.js","webpack://muze/./packages/muze-legend/src/firebolt/physical/selection-box-drag.js","webpack://muze/./packages/muze-legend/src/firebolt/side-effects/index.js","webpack://muze/./packages/muze-legend/src/firebolt/side-effects/legend-highlighter/index.js","webpack://muze/./packages/muze-legend/src/firebolt/side-effects/legend-highlighter/strategies.js","webpack://muze/./packages/muze-legend/src/firebolt/side-effects/selection-box/index.js","webpack://muze/./packages/muze-legend/src/firebolt/side-effects/selection-box/styles.scss?8db9","webpack://muze/./packages/muze-legend/src/index.js","webpack://muze/./packages/muze-legend/src/legend/defaults.js","webpack://muze/./packages/muze-legend/src/legend/discrete-legend.js","webpack://muze/./packages/muze-legend/src/legend/gradient-helper.js","webpack://muze/./packages/muze-legend/src/legend/gradient-legend.js","webpack://muze/./packages/muze-legend/src/legend/index.js","webpack://muze/./packages/muze-legend/src/legend/legend-helper.js","webpack://muze/./packages/muze-legend/src/legend/props.js","webpack://muze/./packages/muze-legend/src/legend/renderer.js","webpack://muze/./packages/muze-legend/src/legend/simple-legend.js","webpack://muze/./packages/muze-legend/src/legend/step-legend.js","webpack://muze/./packages/muze-legend/src/styles.scss?0ff0","webpack://muze/./packages/muze-tooltip/src/constants.js","webpack://muze/./packages/muze-tooltip/src/content.js","webpack://muze/./packages/muze-tooltip/src/default-config.js","webpack://muze/./packages/muze-tooltip/src/helper.js","webpack://muze/./packages/muze-tooltip/src/strategy.js","webpack://muze/./packages/muze-tooltip/src/styles.scss?739e","webpack://muze/./packages/muze-tooltip/src/tooltip.js","webpack://muze/./packages/muze-utils/node_modules/d3-array/index.js","webpack://muze/./packages/muze-utils/node_modules/d3-array/src/array.js","webpack://muze/./packages/muze-utils/node_modules/d3-array/src/ascending.js","webpack://muze/./packages/muze-utils/node_modules/d3-array/src/bisect.js","webpack://muze/./packages/muze-utils/node_modules/d3-array/src/bisector.js","webpack://muze/./packages/muze-utils/node_modules/d3-array/src/constant.js","webpack://muze/./packages/muze-utils/node_modules/d3-array/src/cross.js","webpack://muze/./packages/muze-utils/node_modules/d3-array/src/descending.js","webpack://muze/./packages/muze-utils/node_modules/d3-array/src/deviation.js","webpack://muze/./packages/muze-utils/node_modules/d3-array/src/extent.js","webpack://muze/./packages/muze-utils/node_modules/d3-array/src/histogram.js","webpack://muze/./packages/muze-utils/node_modules/d3-array/src/identity.js","webpack://muze/./packages/muze-utils/node_modules/d3-array/src/max.js","webpack://muze/./packages/muze-utils/node_modules/d3-array/src/mean.js","webpack://muze/./packages/muze-utils/node_modules/d3-array/src/median.js","webpack://muze/./packages/muze-utils/node_modules/d3-array/src/merge.js","webpack://muze/./packages/muze-utils/node_modules/d3-array/src/min.js","webpack://muze/./packages/muze-utils/node_modules/d3-array/src/number.js","webpack://muze/./packages/muze-utils/node_modules/d3-array/src/pairs.js","webpack://muze/./packages/muze-utils/node_modules/d3-array/src/permute.js","webpack://muze/./packages/muze-utils/node_modules/d3-array/src/quantile.js","webpack://muze/./packages/muze-utils/node_modules/d3-array/src/range.js","webpack://muze/./packages/muze-utils/node_modules/d3-array/src/scan.js","webpack://muze/./packages/muze-utils/node_modules/d3-array/src/shuffle.js","webpack://muze/./packages/muze-utils/node_modules/d3-array/src/sum.js","webpack://muze/./packages/muze-utils/node_modules/d3-array/src/threshold/freedmanDiaconis.js","webpack://muze/./packages/muze-utils/node_modules/d3-array/src/threshold/scott.js","webpack://muze/./packages/muze-utils/node_modules/d3-array/src/threshold/sturges.js","webpack://muze/./packages/muze-utils/node_modules/d3-array/src/ticks.js","webpack://muze/./packages/muze-utils/node_modules/d3-array/src/transpose.js","webpack://muze/./packages/muze-utils/node_modules/d3-array/src/variance.js","webpack://muze/./packages/muze-utils/node_modules/d3-array/src/zip.js","webpack://muze/./packages/muze-utils/node_modules/d3-axis/src/array.js","webpack://muze/./packages/muze-utils/node_modules/d3-axis/src/axis.js","webpack://muze/./packages/muze-utils/node_modules/d3-axis/src/identity.js","webpack://muze/./packages/muze-utils/node_modules/d3-collection/index.js","webpack://muze/./packages/muze-utils/node_modules/d3-collection/src/entries.js","webpack://muze/./packages/muze-utils/node_modules/d3-collection/src/keys.js","webpack://muze/./packages/muze-utils/node_modules/d3-collection/src/map.js","webpack://muze/./packages/muze-utils/node_modules/d3-collection/src/nest.js","webpack://muze/./packages/muze-utils/node_modules/d3-collection/src/set.js","webpack://muze/./packages/muze-utils/node_modules/d3-collection/src/values.js","webpack://muze/./packages/muze-utils/node_modules/d3-color/index.js","webpack://muze/./packages/muze-utils/node_modules/d3-color/src/color.js","webpack://muze/./packages/muze-utils/node_modules/d3-color/src/cubehelix.js","webpack://muze/./packages/muze-utils/node_modules/d3-color/src/define.js","webpack://muze/./packages/muze-utils/node_modules/d3-color/src/lab.js","webpack://muze/./packages/muze-utils/node_modules/d3-color/src/math.js","webpack://muze/./packages/muze-utils/node_modules/d3-dispatch/src/dispatch.js","webpack://muze/./packages/muze-utils/node_modules/d3-drag/index.js","webpack://muze/./packages/muze-utils/node_modules/d3-drag/src/constant.js","webpack://muze/./packages/muze-utils/node_modules/d3-drag/src/drag.js","webpack://muze/./packages/muze-utils/node_modules/d3-drag/src/event.js","webpack://muze/./packages/muze-utils/node_modules/d3-drag/src/nodrag.js","webpack://muze/./packages/muze-utils/node_modules/d3-drag/src/noevent.js","webpack://muze/./packages/muze-utils/node_modules/d3-ease/index.js","webpack://muze/./packages/muze-utils/node_modules/d3-ease/src/back.js","webpack://muze/./packages/muze-utils/node_modules/d3-ease/src/bounce.js","webpack://muze/./packages/muze-utils/node_modules/d3-ease/src/circle.js","webpack://muze/./packages/muze-utils/node_modules/d3-ease/src/cubic.js","webpack://muze/./packages/muze-utils/node_modules/d3-ease/src/elastic.js","webpack://muze/./packages/muze-utils/node_modules/d3-ease/src/exp.js","webpack://muze/./packages/muze-utils/node_modules/d3-ease/src/linear.js","webpack://muze/./packages/muze-utils/node_modules/d3-ease/src/poly.js","webpack://muze/./packages/muze-utils/node_modules/d3-ease/src/quad.js","webpack://muze/./packages/muze-utils/node_modules/d3-ease/src/sin.js","webpack://muze/./packages/muze-utils/node_modules/d3-format/index.js","webpack://muze/./packages/muze-utils/node_modules/d3-format/src/defaultLocale.js","webpack://muze/./packages/muze-utils/node_modules/d3-format/src/exponent.js","webpack://muze/./packages/muze-utils/node_modules/d3-format/src/formatDecimal.js","webpack://muze/./packages/muze-utils/node_modules/d3-format/src/formatGroup.js","webpack://muze/./packages/muze-utils/node_modules/d3-format/src/formatNumerals.js","webpack://muze/./packages/muze-utils/node_modules/d3-format/src/formatPrefixAuto.js","webpack://muze/./packages/muze-utils/node_modules/d3-format/src/formatRounded.js","webpack://muze/./packages/muze-utils/node_modules/d3-format/src/formatSpecifier.js","webpack://muze/./packages/muze-utils/node_modules/d3-format/src/formatTrim.js","webpack://muze/./packages/muze-utils/node_modules/d3-format/src/formatTypes.js","webpack://muze/./packages/muze-utils/node_modules/d3-format/src/identity.js","webpack://muze/./packages/muze-utils/node_modules/d3-format/src/locale.js","webpack://muze/./packages/muze-utils/node_modules/d3-format/src/precisionFixed.js","webpack://muze/./packages/muze-utils/node_modules/d3-format/src/precisionPrefix.js","webpack://muze/./packages/muze-utils/node_modules/d3-format/src/precisionRound.js","webpack://muze/./packages/muze-utils/node_modules/d3-interpolate/index.js","webpack://muze/./packages/muze-utils/node_modules/d3-interpolate/src/array.js","webpack://muze/./packages/muze-utils/node_modules/d3-interpolate/src/basis.js","webpack://muze/./packages/muze-utils/node_modules/d3-interpolate/src/basisClosed.js","webpack://muze/./packages/muze-utils/node_modules/d3-interpolate/src/color.js","webpack://muze/./packages/muze-utils/node_modules/d3-interpolate/src/constant.js","webpack://muze/./packages/muze-utils/node_modules/d3-interpolate/src/cubehelix.js","webpack://muze/./packages/muze-utils/node_modules/d3-interpolate/src/date.js","webpack://muze/./packages/muze-utils/node_modules/d3-interpolate/src/hcl.js","webpack://muze/./packages/muze-utils/node_modules/d3-interpolate/src/hsl.js","webpack://muze/./packages/muze-utils/node_modules/d3-interpolate/src/lab.js","webpack://muze/./packages/muze-utils/node_modules/d3-interpolate/src/number.js","webpack://muze/./packages/muze-utils/node_modules/d3-interpolate/src/object.js","webpack://muze/./packages/muze-utils/node_modules/d3-interpolate/src/piecewise.js","webpack://muze/./packages/muze-utils/node_modules/d3-interpolate/src/quantize.js","webpack://muze/./packages/muze-utils/node_modules/d3-interpolate/src/rgb.js","webpack://muze/./packages/muze-utils/node_modules/d3-interpolate/src/round.js","webpack://muze/./packages/muze-utils/node_modules/d3-interpolate/src/string.js","webpack://muze/./packages/muze-utils/node_modules/d3-interpolate/src/transform/decompose.js","webpack://muze/./packages/muze-utils/node_modules/d3-interpolate/src/transform/index.js","webpack://muze/./packages/muze-utils/node_modules/d3-interpolate/src/transform/parse.js","webpack://muze/./packages/muze-utils/node_modules/d3-interpolate/src/value.js","webpack://muze/./packages/muze-utils/node_modules/d3-interpolate/src/zoom.js","webpack://muze/./packages/muze-utils/node_modules/d3-path/src/path.js","webpack://muze/./packages/muze-utils/node_modules/d3-scale-chromatic/index.js","webpack://muze/./packages/muze-utils/node_modules/d3-scale-chromatic/src/categorical/Accent.js","webpack://muze/./packages/muze-utils/node_modules/d3-scale-chromatic/src/categorical/Dark2.js","webpack://muze/./packages/muze-utils/node_modules/d3-scale-chromatic/src/categorical/Paired.js","webpack://muze/./packages/muze-utils/node_modules/d3-scale-chromatic/src/categorical/Pastel1.js","webpack://muze/./packages/muze-utils/node_modules/d3-scale-chromatic/src/categorical/Pastel2.js","webpack://muze/./packages/muze-utils/node_modules/d3-scale-chromatic/src/categorical/Set1.js","webpack://muze/./packages/muze-utils/node_modules/d3-scale-chromatic/src/categorical/Set2.js","webpack://muze/./packages/muze-utils/node_modules/d3-scale-chromatic/src/categorical/Set3.js","webpack://muze/./packages/muze-utils/node_modules/d3-scale-chromatic/src/categorical/category10.js","webpack://muze/./packages/muze-utils/node_modules/d3-scale-chromatic/src/colors.js","webpack://muze/./packages/muze-utils/node_modules/d3-scale-chromatic/src/diverging/BrBG.js","webpack://muze/./packages/muze-utils/node_modules/d3-scale-chromatic/src/diverging/PRGn.js","webpack://muze/./packages/muze-utils/node_modules/d3-scale-chromatic/src/diverging/PiYG.js","webpack://muze/./packages/muze-utils/node_modules/d3-scale-chromatic/src/diverging/PuOr.js","webpack://muze/./packages/muze-utils/node_modules/d3-scale-chromatic/src/diverging/RdBu.js","webpack://muze/./packages/muze-utils/node_modules/d3-scale-chromatic/src/diverging/RdGy.js","webpack://muze/./packages/muze-utils/node_modules/d3-scale-chromatic/src/diverging/RdYlBu.js","webpack://muze/./packages/muze-utils/node_modules/d3-scale-chromatic/src/diverging/RdYlGn.js","webpack://muze/./packages/muze-utils/node_modules/d3-scale-chromatic/src/diverging/Spectral.js","webpack://muze/./packages/muze-utils/node_modules/d3-scale-chromatic/src/ramp.js","webpack://muze/./packages/muze-utils/node_modules/d3-scale-chromatic/src/sequential-multi/BuGn.js","webpack://muze/./packages/muze-utils/node_modules/d3-scale-chromatic/src/sequential-multi/BuPu.js","webpack://muze/./packages/muze-utils/node_modules/d3-scale-chromatic/src/sequential-multi/GnBu.js","webpack://muze/./packages/muze-utils/node_modules/d3-scale-chromatic/src/sequential-multi/OrRd.js","webpack://muze/./packages/muze-utils/node_modules/d3-scale-chromatic/src/sequential-multi/PuBu.js","webpack://muze/./packages/muze-utils/node_modules/d3-scale-chromatic/src/sequential-multi/PuBuGn.js","webpack://muze/./packages/muze-utils/node_modules/d3-scale-chromatic/src/sequential-multi/PuRd.js","webpack://muze/./packages/muze-utils/node_modules/d3-scale-chromatic/src/sequential-multi/RdPu.js","webpack://muze/./packages/muze-utils/node_modules/d3-scale-chromatic/src/sequential-multi/YlGn.js","webpack://muze/./packages/muze-utils/node_modules/d3-scale-chromatic/src/sequential-multi/YlGnBu.js","webpack://muze/./packages/muze-utils/node_modules/d3-scale-chromatic/src/sequential-multi/YlOrBr.js","webpack://muze/./packages/muze-utils/node_modules/d3-scale-chromatic/src/sequential-multi/YlOrRd.js","webpack://muze/./packages/muze-utils/node_modules/d3-scale-chromatic/src/sequential-multi/cubehelix.js","webpack://muze/./packages/muze-utils/node_modules/d3-scale-chromatic/src/sequential-multi/rainbow.js","webpack://muze/./packages/muze-utils/node_modules/d3-scale-chromatic/src/sequential-multi/sinebow.js","webpack://muze/./packages/muze-utils/node_modules/d3-scale-chromatic/src/sequential-multi/viridis.js","webpack://muze/./packages/muze-utils/node_modules/d3-scale-chromatic/src/sequential-single/Blues.js","webpack://muze/./packages/muze-utils/node_modules/d3-scale-chromatic/src/sequential-single/Greens.js","webpack://muze/./packages/muze-utils/node_modules/d3-scale-chromatic/src/sequential-single/Greys.js","webpack://muze/./packages/muze-utils/node_modules/d3-scale-chromatic/src/sequential-single/Oranges.js","webpack://muze/./packages/muze-utils/node_modules/d3-scale-chromatic/src/sequential-single/Purples.js","webpack://muze/./packages/muze-utils/node_modules/d3-scale-chromatic/src/sequential-single/Reds.js","webpack://muze/./packages/muze-utils/node_modules/d3-scale/index.js","webpack://muze/./packages/muze-utils/node_modules/d3-scale/src/array.js","webpack://muze/./packages/muze-utils/node_modules/d3-scale/src/band.js","webpack://muze/./packages/muze-utils/node_modules/d3-scale/src/category10.js","webpack://muze/./packages/muze-utils/node_modules/d3-scale/src/category20.js","webpack://muze/./packages/muze-utils/node_modules/d3-scale/src/category20b.js","webpack://muze/./packages/muze-utils/node_modules/d3-scale/src/category20c.js","webpack://muze/./packages/muze-utils/node_modules/d3-scale/src/colors.js","webpack://muze/./packages/muze-utils/node_modules/d3-scale/src/constant.js","webpack://muze/./packages/muze-utils/node_modules/d3-scale/src/continuous.js","webpack://muze/./packages/muze-utils/node_modules/d3-scale/src/cubehelix.js","webpack://muze/./packages/muze-utils/node_modules/d3-scale/src/identity.js","webpack://muze/./packages/muze-utils/node_modules/d3-scale/src/linear.js","webpack://muze/./packages/muze-utils/node_modules/d3-scale/src/log.js","webpack://muze/./packages/muze-utils/node_modules/d3-scale/src/nice.js","webpack://muze/./packages/muze-utils/node_modules/d3-scale/src/number.js","webpack://muze/./packages/muze-utils/node_modules/d3-scale/src/ordinal.js","webpack://muze/./packages/muze-utils/node_modules/d3-scale/src/pow.js","webpack://muze/./packages/muze-utils/node_modules/d3-scale/src/quantile.js","webpack://muze/./packages/muze-utils/node_modules/d3-scale/src/quantize.js","webpack://muze/./packages/muze-utils/node_modules/d3-scale/src/rainbow.js","webpack://muze/./packages/muze-utils/node_modules/d3-scale/src/sequential.js","webpack://muze/./packages/muze-utils/node_modules/d3-scale/src/threshold.js","webpack://muze/./packages/muze-utils/node_modules/d3-scale/src/tickFormat.js","webpack://muze/./packages/muze-utils/node_modules/d3-scale/src/time.js","webpack://muze/./packages/muze-utils/node_modules/d3-scale/src/utcTime.js","webpack://muze/./packages/muze-utils/node_modules/d3-scale/src/viridis.js","webpack://muze/./packages/muze-utils/node_modules/d3-selection/index.js","webpack://muze/./packages/muze-utils/node_modules/d3-selection/src/constant.js","webpack://muze/./packages/muze-utils/node_modules/d3-selection/src/create.js","webpack://muze/./packages/muze-utils/node_modules/d3-selection/src/creator.js","webpack://muze/./packages/muze-utils/node_modules/d3-selection/src/local.js","webpack://muze/./packages/muze-utils/node_modules/d3-selection/src/matcher.js","webpack://muze/./packages/muze-utils/node_modules/d3-selection/src/mouse.js","webpack://muze/./packages/muze-utils/node_modules/d3-selection/src/namespace.js","webpack://muze/./packages/muze-utils/node_modules/d3-selection/src/namespaces.js","webpack://muze/./packages/muze-utils/node_modules/d3-selection/src/point.js","webpack://muze/./packages/muze-utils/node_modules/d3-selection/src/select.js","webpack://muze/./packages/muze-utils/node_modules/d3-selection/src/selectAll.js","webpack://muze/./packages/muze-utils/node_modules/d3-selection/src/selection/append.js","webpack://muze/./packages/muze-utils/node_modules/d3-selection/src/selection/attr.js","webpack://muze/./packages/muze-utils/node_modules/d3-selection/src/selection/call.js","webpack://muze/./packages/muze-utils/node_modules/d3-selection/src/selection/classed.js","webpack://muze/./packages/muze-utils/node_modules/d3-selection/src/selection/clone.js","webpack://muze/./packages/muze-utils/node_modules/d3-selection/src/selection/data.js","webpack://muze/./packages/muze-utils/node_modules/d3-selection/src/selection/datum.js","webpack://muze/./packages/muze-utils/node_modules/d3-selection/src/selection/dispatch.js","webpack://muze/./packages/muze-utils/node_modules/d3-selection/src/selection/each.js","webpack://muze/./packages/muze-utils/node_modules/d3-selection/src/selection/empty.js","webpack://muze/./packages/muze-utils/node_modules/d3-selection/src/selection/enter.js","webpack://muze/./packages/muze-utils/node_modules/d3-selection/src/selection/exit.js","webpack://muze/./packages/muze-utils/node_modules/d3-selection/src/selection/filter.js","webpack://muze/./packages/muze-utils/node_modules/d3-selection/src/selection/html.js","webpack://muze/./packages/muze-utils/node_modules/d3-selection/src/selection/index.js","webpack://muze/./packages/muze-utils/node_modules/d3-selection/src/selection/insert.js","webpack://muze/./packages/muze-utils/node_modules/d3-selection/src/selection/lower.js","webpack://muze/./packages/muze-utils/node_modules/d3-selection/src/selection/merge.js","webpack://muze/./packages/muze-utils/node_modules/d3-selection/src/selection/node.js","webpack://muze/./packages/muze-utils/node_modules/d3-selection/src/selection/nodes.js","webpack://muze/./packages/muze-utils/node_modules/d3-selection/src/selection/on.js","webpack://muze/./packages/muze-utils/node_modules/d3-selection/src/selection/order.js","webpack://muze/./packages/muze-utils/node_modules/d3-selection/src/selection/property.js","webpack://muze/./packages/muze-utils/node_modules/d3-selection/src/selection/raise.js","webpack://muze/./packages/muze-utils/node_modules/d3-selection/src/selection/remove.js","webpack://muze/./packages/muze-utils/node_modules/d3-selection/src/selection/select.js","webpack://muze/./packages/muze-utils/node_modules/d3-selection/src/selection/selectAll.js","webpack://muze/./packages/muze-utils/node_modules/d3-selection/src/selection/size.js","webpack://muze/./packages/muze-utils/node_modules/d3-selection/src/selection/sort.js","webpack://muze/./packages/muze-utils/node_modules/d3-selection/src/selection/sparse.js","webpack://muze/./packages/muze-utils/node_modules/d3-selection/src/selection/style.js","webpack://muze/./packages/muze-utils/node_modules/d3-selection/src/selection/text.js","webpack://muze/./packages/muze-utils/node_modules/d3-selection/src/selector.js","webpack://muze/./packages/muze-utils/node_modules/d3-selection/src/selectorAll.js","webpack://muze/./packages/muze-utils/node_modules/d3-selection/src/sourceEvent.js","webpack://muze/./packages/muze-utils/node_modules/d3-selection/src/touch.js","webpack://muze/./packages/muze-utils/node_modules/d3-selection/src/touches.js","webpack://muze/./packages/muze-utils/node_modules/d3-selection/src/window.js","webpack://muze/./packages/muze-utils/node_modules/d3-shape/index.js","webpack://muze/./packages/muze-utils/node_modules/d3-shape/src/arc.js","webpack://muze/./packages/muze-utils/node_modules/d3-shape/src/area.js","webpack://muze/./packages/muze-utils/node_modules/d3-shape/src/areaRadial.js","webpack://muze/./packages/muze-utils/node_modules/d3-shape/src/array.js","webpack://muze/./packages/muze-utils/node_modules/d3-shape/src/constant.js","webpack://muze/./packages/muze-utils/node_modules/d3-shape/src/curve/basis.js","webpack://muze/./packages/muze-utils/node_modules/d3-shape/src/curve/basisClosed.js","webpack://muze/./packages/muze-utils/node_modules/d3-shape/src/curve/basisOpen.js","webpack://muze/./packages/muze-utils/node_modules/d3-shape/src/curve/bundle.js","webpack://muze/./packages/muze-utils/node_modules/d3-shape/src/curve/cardinal.js","webpack://muze/./packages/muze-utils/node_modules/d3-shape/src/curve/cardinalClosed.js","webpack://muze/./packages/muze-utils/node_modules/d3-shape/src/curve/cardinalOpen.js","webpack://muze/./packages/muze-utils/node_modules/d3-shape/src/curve/catmullRom.js","webpack://muze/./packages/muze-utils/node_modules/d3-shape/src/curve/catmullRomClosed.js","webpack://muze/./packages/muze-utils/node_modules/d3-shape/src/curve/catmullRomOpen.js","webpack://muze/./packages/muze-utils/node_modules/d3-shape/src/curve/linear.js","webpack://muze/./packages/muze-utils/node_modules/d3-shape/src/curve/linearClosed.js","webpack://muze/./packages/muze-utils/node_modules/d3-shape/src/curve/monotone.js","webpack://muze/./packages/muze-utils/node_modules/d3-shape/src/curve/natural.js","webpack://muze/./packages/muze-utils/node_modules/d3-shape/src/curve/radial.js","webpack://muze/./packages/muze-utils/node_modules/d3-shape/src/curve/step.js","webpack://muze/./packages/muze-utils/node_modules/d3-shape/src/descending.js","webpack://muze/./packages/muze-utils/node_modules/d3-shape/src/identity.js","webpack://muze/./packages/muze-utils/node_modules/d3-shape/src/line.js","webpack://muze/./packages/muze-utils/node_modules/d3-shape/src/lineRadial.js","webpack://muze/./packages/muze-utils/node_modules/d3-shape/src/link/index.js","webpack://muze/./packages/muze-utils/node_modules/d3-shape/src/math.js","webpack://muze/./packages/muze-utils/node_modules/d3-shape/src/noop.js","webpack://muze/./packages/muze-utils/node_modules/d3-shape/src/offset/diverging.js","webpack://muze/./packages/muze-utils/node_modules/d3-shape/src/offset/expand.js","webpack://muze/./packages/muze-utils/node_modules/d3-shape/src/offset/none.js","webpack://muze/./packages/muze-utils/node_modules/d3-shape/src/offset/silhouette.js","webpack://muze/./packages/muze-utils/node_modules/d3-shape/src/offset/wiggle.js","webpack://muze/./packages/muze-utils/node_modules/d3-shape/src/order/ascending.js","webpack://muze/./packages/muze-utils/node_modules/d3-shape/src/order/descending.js","webpack://muze/./packages/muze-utils/node_modules/d3-shape/src/order/insideOut.js","webpack://muze/./packages/muze-utils/node_modules/d3-shape/src/order/none.js","webpack://muze/./packages/muze-utils/node_modules/d3-shape/src/order/reverse.js","webpack://muze/./packages/muze-utils/node_modules/d3-shape/src/pie.js","webpack://muze/./packages/muze-utils/node_modules/d3-shape/src/point.js","webpack://muze/./packages/muze-utils/node_modules/d3-shape/src/pointRadial.js","webpack://muze/./packages/muze-utils/node_modules/d3-shape/src/stack.js","webpack://muze/./packages/muze-utils/node_modules/d3-shape/src/symbol.js","webpack://muze/./packages/muze-utils/node_modules/d3-shape/src/symbol/circle.js","webpack://muze/./packages/muze-utils/node_modules/d3-shape/src/symbol/cross.js","webpack://muze/./packages/muze-utils/node_modules/d3-shape/src/symbol/diamond.js","webpack://muze/./packages/muze-utils/node_modules/d3-shape/src/symbol/square.js","webpack://muze/./packages/muze-utils/node_modules/d3-shape/src/symbol/star.js","webpack://muze/./packages/muze-utils/node_modules/d3-shape/src/symbol/triangle.js","webpack://muze/./packages/muze-utils/node_modules/d3-shape/src/symbol/wye.js","webpack://muze/./packages/muze-utils/node_modules/d3-time-format/index.js","webpack://muze/./packages/muze-utils/node_modules/d3-time-format/src/defaultLocale.js","webpack://muze/./packages/muze-utils/node_modules/d3-time-format/src/isoFormat.js","webpack://muze/./packages/muze-utils/node_modules/d3-time-format/src/isoParse.js","webpack://muze/./packages/muze-utils/node_modules/d3-time-format/src/locale.js","webpack://muze/./packages/muze-utils/node_modules/d3-time/index.js","webpack://muze/./packages/muze-utils/node_modules/d3-time/src/day.js","webpack://muze/./packages/muze-utils/node_modules/d3-time/src/duration.js","webpack://muze/./packages/muze-utils/node_modules/d3-time/src/hour.js","webpack://muze/./packages/muze-utils/node_modules/d3-time/src/interval.js","webpack://muze/./packages/muze-utils/node_modules/d3-time/src/millisecond.js","webpack://muze/./packages/muze-utils/node_modules/d3-time/src/minute.js","webpack://muze/./packages/muze-utils/node_modules/d3-time/src/month.js","webpack://muze/./packages/muze-utils/node_modules/d3-time/src/second.js","webpack://muze/./packages/muze-utils/node_modules/d3-time/src/utcDay.js","webpack://muze/./packages/muze-utils/node_modules/d3-time/src/utcHour.js","webpack://muze/./packages/muze-utils/node_modules/d3-time/src/utcMinute.js","webpack://muze/./packages/muze-utils/node_modules/d3-time/src/utcMonth.js","webpack://muze/./packages/muze-utils/node_modules/d3-time/src/utcWeek.js","webpack://muze/./packages/muze-utils/node_modules/d3-time/src/utcYear.js","webpack://muze/./packages/muze-utils/node_modules/d3-time/src/week.js","webpack://muze/./packages/muze-utils/node_modules/d3-time/src/year.js","webpack://muze/./packages/muze-utils/node_modules/d3-timer/index.js","webpack://muze/./packages/muze-utils/node_modules/d3-timer/src/interval.js","webpack://muze/./packages/muze-utils/node_modules/d3-timer/src/timeout.js","webpack://muze/./packages/muze-utils/node_modules/d3-timer/src/timer.js","webpack://muze/./packages/muze-utils/node_modules/d3-transition/index.js","webpack://muze/./packages/muze-utils/node_modules/d3-transition/src/active.js","webpack://muze/./packages/muze-utils/node_modules/d3-transition/src/interrupt.js","webpack://muze/./packages/muze-utils/node_modules/d3-transition/src/selection/index.js","webpack://muze/./packages/muze-utils/node_modules/d3-transition/src/selection/interrupt.js","webpack://muze/./packages/muze-utils/node_modules/d3-transition/src/selection/transition.js","webpack://muze/./packages/muze-utils/node_modules/d3-transition/src/transition/attr.js","webpack://muze/./packages/muze-utils/node_modules/d3-transition/src/transition/attrTween.js","webpack://muze/./packages/muze-utils/node_modules/d3-transition/src/transition/delay.js","webpack://muze/./packages/muze-utils/node_modules/d3-transition/src/transition/duration.js","webpack://muze/./packages/muze-utils/node_modules/d3-transition/src/transition/ease.js","webpack://muze/./packages/muze-utils/node_modules/d3-transition/src/transition/filter.js","webpack://muze/./packages/muze-utils/node_modules/d3-transition/src/transition/index.js","webpack://muze/./packages/muze-utils/node_modules/d3-transition/src/transition/interpolate.js","webpack://muze/./packages/muze-utils/node_modules/d3-transition/src/transition/merge.js","webpack://muze/./packages/muze-utils/node_modules/d3-transition/src/transition/on.js","webpack://muze/./packages/muze-utils/node_modules/d3-transition/src/transition/remove.js","webpack://muze/./packages/muze-utils/node_modules/d3-transition/src/transition/schedule.js","webpack://muze/./packages/muze-utils/node_modules/d3-transition/src/transition/select.js","webpack://muze/./packages/muze-utils/node_modules/d3-transition/src/transition/selectAll.js","webpack://muze/./packages/muze-utils/node_modules/d3-transition/src/transition/selection.js","webpack://muze/./packages/muze-utils/node_modules/d3-transition/src/transition/style.js","webpack://muze/./packages/muze-utils/node_modules/d3-transition/src/transition/styleTween.js","webpack://muze/./packages/muze-utils/node_modules/d3-transition/src/transition/text.js","webpack://muze/./packages/muze-utils/node_modules/d3-transition/src/transition/transition.js","webpack://muze/./packages/muze-utils/node_modules/d3-transition/src/transition/tween.js","webpack://muze/./packages/muze-utils/node_modules/d3-voronoi/src/Beach.js","webpack://muze/./packages/muze-utils/node_modules/d3-voronoi/src/Cell.js","webpack://muze/./packages/muze-utils/node_modules/d3-voronoi/src/Circle.js","webpack://muze/./packages/muze-utils/node_modules/d3-voronoi/src/Diagram.js","webpack://muze/./packages/muze-utils/node_modules/d3-voronoi/src/Edge.js","webpack://muze/./packages/muze-utils/node_modules/d3-voronoi/src/RedBlackTree.js","webpack://muze/./packages/muze-utils/node_modules/d3-voronoi/src/constant.js","webpack://muze/./packages/muze-utils/node_modules/d3-voronoi/src/point.js","webpack://muze/./packages/muze-utils/node_modules/d3-voronoi/src/voronoi.js","webpack://muze/./packages/muze-utils/node_modules/hyperdis/src/electric-node.js","webpack://muze/./packages/muze-utils/node_modules/hyperdis/src/graph-node.js","webpack://muze/./packages/muze-utils/node_modules/hyperdis/src/graph.js","webpack://muze/./packages/muze-utils/node_modules/hyperdis/src/index.js","webpack://muze/./packages/muze-utils/node_modules/hyperdis/src/model.js","webpack://muze/./packages/muze-utils/node_modules/hyperdis/src/utils/index.js","webpack://muze/./packages/muze-utils/node_modules/hyperdis/src/utils/set.js","webpack://muze/./packages/muze-utils/src/DataSystem/data-object.js","webpack://muze/./packages/muze-utils/src/DataSystem/dataSelect.js","webpack://muze/./packages/muze-utils/src/DataSystem/index.js","webpack://muze/./packages/muze-utils/src/DataSystem/selection.js","webpack://muze/./packages/muze-utils/src/common-utils.js","webpack://muze/./packages/muze-utils/src/enums/common-props.js","webpack://muze/./packages/muze-utils/src/enums/index.js","webpack://muze/./packages/muze-utils/src/enums/reserved-fields.js","webpack://muze/./packages/muze-utils/src/enums/stack-config.js","webpack://muze/./packages/muze-utils/src/index.js","webpack://muze/./packages/muze-utils/src/lifecycle-manager/event-list.js","webpack://muze/./packages/muze-utils/src/lifecycle-manager/index.js","webpack://muze/./packages/muze-utils/src/lifecycle-manager/lifecycle-manager.js","webpack://muze/./packages/muze-utils/src/renderer-utils.js","webpack://muze/./packages/muze-utils/src/scales.js","webpack://muze/./packages/muze/node_modules/fusioncharts-smartlabel/lib/SmartlabelManager.js","webpack://muze/./packages/muze/node_modules/fusioncharts-smartlabel/lib/container-manager.js","webpack://muze/./packages/muze/node_modules/fusioncharts-smartlabel/lib/lib.js","webpack://muze/./packages/muze/src/action-model.js","webpack://muze/./packages/muze/src/canvas/canvas.js","webpack://muze/./packages/muze/src/canvas/component-resolver.js","webpack://muze/./packages/muze/src/canvas/defaults.js","webpack://muze/./packages/muze/src/canvas/firebolt.js","webpack://muze/./packages/muze/src/canvas/helper.js","webpack://muze/./packages/muze/src/canvas/layout-maker.js","webpack://muze/./packages/muze/src/canvas/legend-maker.js","webpack://muze/./packages/muze/src/canvas/local-options.js","webpack://muze/./packages/muze/src/canvas/renderer.js","webpack://muze/./packages/muze/src/canvas/title-maker.js","webpack://muze/./packages/muze/src/constants.js","webpack://muze/./packages/muze/src/default-registry.js","webpack://muze/./packages/muze/src/index.js","webpack://muze/./packages/muze/src/muze.js","webpack://muze/./packages/muze/src/muze.scss?e1a1","webpack://muze/./packages/muze/src/operators.js","webpack://muze/./packages/muze/src/options.js","webpack://muze/./packages/muze/src/transaction-support.js","webpack://muze/./packages/transform/src/enums/transform-type.js","webpack://muze/./packages/transform/src/group-transform/index.js","webpack://muze/./packages/transform/src/identity-transform/index.js","webpack://muze/./packages/transform/src/index.js","webpack://muze/./packages/transform/src/stack-transform/index.js","webpack://muze/./packages/transform/src/transform-factory/index.js","webpack://muze/./packages/visual-cell/src/axis-cell.js","webpack://muze/./packages/visual-cell/src/blank-cell.js","webpack://muze/./packages/visual-cell/src/cell-registry.js","webpack://muze/./packages/visual-cell/src/constants.js","webpack://muze/./packages/visual-cell/src/defaults.js","webpack://muze/./packages/visual-cell/src/enums/cell-type.js","webpack://muze/./packages/visual-cell/src/enums/constants.js","webpack://muze/./packages/visual-cell/src/enums/defaults.js","webpack://muze/./packages/visual-cell/src/geom-cell.js","webpack://muze/./packages/visual-cell/src/index.js","webpack://muze/./packages/visual-cell/src/props.js","webpack://muze/./packages/visual-cell/src/simple-cell.js","webpack://muze/./packages/visual-cell/src/text-cell.js","webpack://muze/./packages/visual-cell/src/text-cell.scss?1818","webpack://muze/./packages/visual-group/src/data-type-scale-map.js","webpack://muze/./packages/visual-group/src/encoder/cartesian-encoder.js","webpack://muze/./packages/visual-group/src/encoder/encoder-helper.js","webpack://muze/./packages/visual-group/src/encoder/field-sanitizer.js","webpack://muze/./packages/visual-group/src/encoder/index.js","webpack://muze/./packages/visual-group/src/encoder/polar-encoder.js","webpack://muze/./packages/visual-group/src/encoder/retinal-encoder.js","webpack://muze/./packages/visual-group/src/encoder/visual-encoder.js","webpack://muze/./packages/visual-group/src/enums/constants.js","webpack://muze/./packages/visual-group/src/enums/defaults.js","webpack://muze/./packages/visual-group/src/enums/scale-maps.js","webpack://muze/./packages/visual-group/src/group-helper/cell-creator.js","webpack://muze/./packages/visual-group/src/group-helper/group-utils.js","webpack://muze/./packages/visual-group/src/group-helper/index.js","webpack://muze/./packages/visual-group/src/group-helper/matrix-model.js","webpack://muze/./packages/visual-group/src/group-helper/matrix-resolver.js","webpack://muze/./packages/visual-group/src/index.js","webpack://muze/./packages/visual-group/src/simple-group/simple-group.js","webpack://muze/./packages/visual-group/src/variable/composed-vars.js","webpack://muze/./packages/visual-group/src/variable/index.js","webpack://muze/./packages/visual-group/src/variable/simple-var.js","webpack://muze/./packages/visual-group/src/variable/variable.js","webpack://muze/./packages/visual-group/src/visual-group/change-listener.js","webpack://muze/./packages/visual-group/src/visual-group/local-options.js","webpack://muze/./packages/visual-group/src/visual-group/props.js","webpack://muze/./packages/visual-group/src/visual-group/value-matrix.js","webpack://muze/./packages/visual-group/src/visual-group/visual-group.js","webpack://muze/./packages/visual-layer/src/base-layer/base-layer.js","webpack://muze/./packages/visual-layer/src/base-layer/default-options.js","webpack://muze/./packages/visual-layer/src/base-layer/listener-map.js","webpack://muze/./packages/visual-layer/src/defaults.js","webpack://muze/./packages/visual-layer/src/enums/constants.js","webpack://muze/./packages/visual-layer/src/enums/props.js","webpack://muze/./packages/visual-layer/src/helpers/index.js","webpack://muze/./packages/visual-layer/src/index.js","webpack://muze/./packages/visual-layer/src/layer-factory/index.js","webpack://muze/./packages/visual-layer/src/layer-registry.js","webpack://muze/./packages/visual-layer/src/layers/arc/arc-helper.js","webpack://muze/./packages/visual-layer/src/layers/arc/arc.js","webpack://muze/./packages/visual-layer/src/layers/arc/default-config.js","webpack://muze/./packages/visual-layer/src/layers/arc/styles.scss?365c","webpack://muze/./packages/visual-layer/src/layers/area/area.js","webpack://muze/./packages/visual-layer/src/layers/area/default-config.js","webpack://muze/./packages/visual-layer/src/layers/area/renderer.js","webpack://muze/./packages/visual-layer/src/layers/area/styles.scss?d057","webpack://muze/./packages/visual-layer/src/layers/bar/bar-helper.js","webpack://muze/./packages/visual-layer/src/layers/bar/bar.js","webpack://muze/./packages/visual-layer/src/layers/bar/default-config.js","webpack://muze/./packages/visual-layer/src/layers/bar/renderer.js","webpack://muze/./packages/visual-layer/src/layers/bar/styles.scss?199c","webpack://muze/./packages/visual-layer/src/layers/line/default-config.js","webpack://muze/./packages/visual-layer/src/layers/line/line.js","webpack://muze/./packages/visual-layer/src/layers/line/renderer.js","webpack://muze/./packages/visual-layer/src/layers/line/styles.scss?88fa","webpack://muze/./packages/visual-layer/src/layers/point/default-config.js","webpack://muze/./packages/visual-layer/src/layers/point/point.js","webpack://muze/./packages/visual-layer/src/layers/point/renderer.js","webpack://muze/./packages/visual-layer/src/layers/point/styles.scss?f31c","webpack://muze/./packages/visual-layer/src/layers/text/default-config.js","webpack://muze/./packages/visual-layer/src/layers/text/renderer.js","webpack://muze/./packages/visual-layer/src/layers/text/styles.scss?edfc","webpack://muze/./packages/visual-layer/src/layers/text/text.js","webpack://muze/./packages/visual-layer/src/layers/tick/default-config.js","webpack://muze/./packages/visual-layer/src/layers/tick/renderer.js","webpack://muze/./packages/visual-layer/src/layers/tick/styles.scss?d4a8","webpack://muze/./packages/visual-layer/src/layers/tick/tick.js","webpack://muze/./packages/visual-layer/src/simple-layer/simple-layer.js","webpack://muze/./packages/visual-unit/src/default-config.js","webpack://muze/./packages/visual-unit/src/enums/constants.js","webpack://muze/./packages/visual-unit/src/enums/reactive-props.js","webpack://muze/./packages/visual-unit/src/firebolt/action-behaviour-map.js","webpack://muze/./packages/visual-unit/src/firebolt/data-propagator.js","webpack://muze/./packages/visual-unit/src/firebolt/helper.js","webpack://muze/./packages/visual-unit/src/firebolt/index.js","webpack://muze/./packages/visual-unit/src/firebolt/payload-generator.js","webpack://muze/./packages/visual-unit/src/helper/grid-lines.js","webpack://muze/./packages/visual-unit/src/helper/index.js","webpack://muze/./packages/visual-unit/src/listener-map.js","webpack://muze/./packages/visual-unit/src/local-options.js","webpack://muze/./packages/visual-unit/src/props.js","webpack://muze/./packages/visual-unit/src/styles.scss?7299","webpack://muze/./packages/visual-unit/src/visual-unit.js"],"names":["csv","dsv","csvParse","parse","csvParseRows","parseRows","csvFormat","format","csvFormatRows","formatRows","EOL","EOF","QUOTE","NEWLINE","RETURN","objectConverter","columns","Function","map","name","i","JSON","stringify","join","customConverter","f","object","row","inferColumns","rows","columnSet","Object","create","forEach","column","push","delimiter","reFormat","RegExp","DELIMITER","charCodeAt","text","convert","N","length","I","n","t","eof","eol","token","j","c","slice","replace","formatValue","concat","formatRow","test","tsv","tsvParse","tsvParseRows","tsvFormat","tsvFormatRows","PROPAGATION","ROW_ID","DM_DERIVATIVES","SELECT","PROJECT","GROUPBY","COMPOSE","CAL_VAR","BIN","JOINS","CROSS","LEFTOUTER","RIGHTOUTER","NATURAL","FULLOUTER","LOGICAL_OPERATORS","AND","OR","Auto","data","options","converter","isString","isArray","isObject","Error","DSVArr","arr","defaultOption","firstRowHeader","assign","header","columnMajor","splice","field","DSVStr","str","fieldSeparator","d3Dsv","FlatJSON","insertionIndex","item","fields","key","keys","DataModel","args","_onPropagation","_sortingDetails","defOptions","order","formatter","withUid","getAllFields","sort","getPartialFieldspace","dataGenerated","dataBuilder","call","_rowDiffset","d","_colIdentifier","columnWise","addUid","schema","uids","fieldNames","e","fmtFieldNames","fmtFieldIdx","reduce","acc","next","idx","indexOf","elem","fIdx","fmtFn","datum","datumIdx","undefined","fieldsArr","reducers","config","saveChild","groupByString","params","newDataModel","groupBy","_children","persistDerivation","defaultReducer","reducerStore","_parent","sortingDetails","rawData","getData","dataInCSVArr","sortedDm","constructor","dataFormat","fieldName","partialFieldspace","_partialFieldspace","fieldsObj","fieldIndex","findIndex","fieldinst","__calculateFieldspace","calculateFieldsConfig","dependency","replaceVar","fieldsConfig","getFieldsConfig","depVars","retrieveFn","depFieldIndices","fieldSpec","index","clone","fs","getFieldspace","suppliedFields","computedValues","rowDiffsetIterator","fieldsData","createFields","addField","identifiers","payload","isMutableAction","propagationSourceId","sourceId","rootModel","getRootDataModel","propagationNameSpace","_propagationNameSpace","rootGroupByModel","getRootGroupByModel","rootModels","groupByModel","model","propagateToAllDataModels","propagateImmutableActions","sourceNamespace","actionName","criteria","mutableActions","immutableActions","eventName","callback","propListeners","fn","measureName","binFieldName","find","currfield","dataSet","createBinnedFieldData","binField","type","FieldType","MEASURE","subtype","bins","range","mid","DataFormat","AUTO","FLAT_JSON","DSV_STR","DSV_ARR","DimensionSubtype","CATEGORICAL","TEMPORAL","GEO","DIMENSION","FilteringMode","NORMAL","INVERSE","ALL","MeasureSubtype","DISCRETE","createUnitField","dataColumn","headers","headersObj","fieldStore","createNamespace","fieldArr","dataId","getUniqueId","retObj","getMeasure","getDimension","Categorical","DateTime","minDiff","getMinDiff","val","_dtf","getNativeDate","getTime","Date","Dimension","uniqueValues","toString","trim","_unique","unique","DiscreteMeasure","bin","Field","partialFeild","rowDiff","_ref","_rowDiff","sanitize","parsed","domain","fieldType","subType","Set","minD","Math","min","apply","maxD","max","datas","description","unit","scale","defAggFn","Measure","fieldUnit","fieldScale","fieldDefAggFn","fieldNumberformat","numberFormat","generateMeasureDomain","parseFloat","Number","isNaN","PartialField","fieldDescription","extend2","prepareSelectionData","resp","updateFields","fieldStoreName","rowDiffset","colIdentifier","collID","split","partialFieldMap","newFields","coll","operation","criteriaFn","derivative","op","meta","_derivation","selectHelper","selectFn","newRowDiffSet","lastInsertedValue","mode","li","checker","filterPropagationModel","propModels","filterByMeasure","fns","dataModel","dataObj","include","some","every","propField","valueOf","propModel","filteredModel","clonedModel","select","cloneWithSelect","sourceDm","selectConfig","cloneConfig","cloned","cloneWithProject","projField","allFields","projectionSet","filter","actualProjField","updateData","relation","converterFn","formattedData","nameSpace","_","fieldInSchema","propagateIdentifiers","nonTraversingModel","grouped","forwardPropagation","targetDM","propagationData","hasGrouped","handlePropagation","sourceIdentifiers","groupedPropModel","selectIterator","selectionModel","rejectionModel","projectIterator","projModel","project","rejectionProjModel","groupByIterator","conf","reducer","selectionGroupedModel","rejectionGroupedModel","calculatedVariableIterator","entryModel","calculateVariable","exitModel","filteredCriteria","entries","values","action","propConfig","actions","criteriaModel","Operators","Stats","version","pkg","buckets","numOfBins","binSize","start","dataStore","binnedData","oriMax","end","binEnd","prevEndpoint","extraBinELm","endPoint","tempStore","unshift","add","a","b","childIterator","datamodel","children","child","compose","operations","dm","currentDM","frstChild","derivations","addParent","dispose","defaultFilterFn","crossProduct","dm1","dm2","filterFn","replaceCommonSchema","jointype","applicableFilterFn","dm1FieldStore","dm2FieldStore","dm1FieldStoreName","dm2FieldStoreName","commonSchemaList","getCommonSchema","tmpSchema","rowAdded","rowPosition","ii","tuple","userArg","tupleObj","cellVal","iii","len","getSortFn","dataType","sortType","retFunc","a1","b1","groupData","hashMap","Map","groupedData","fieldVal","has","get","set","createSortingFnArg","groupedDatum","targetFields","targetFieldDetails","arg","label","sortData","sortMeta","fDetails","isCallable","mergeSort","sortingFn","m","String","toLowerCase","value","pop","reqSorting","tmpDataArr","colIArr","colName","insertInd","tmpData","Array","difference","hashTable","schemaNameArr","dm1FieldStoreFieldObj","dm2FieldStoreFieldObj","isArrEqual","prepareDataHelper","addData","hashData","schemaName","fs1","fs2","retArr","fs1Arr","sum","isNestedArray","carry","x","avg","arrSum","Infinity","first","last","count","variance","mean","num","std","sqrt","fnList","getFieldArr","dimensions","measures","getReducerObj","pReducers","resolve","existingDataModel","sFieldArr","reducerObj","fieldStoreObj","dbName","dimensionArr","measureArr","rowCount","hash","defSortFn","merge","lo","hi","sortFn","mainArr","auxArr","floor","naturalJoinFilter","commonSchemaArr","obj","retainTuple","naturalJoin","dataModel1","dataModel2","leftOuterJoin","rightOuterJoin","fullOuterJoin","union","rowDiffArr","diffStr","diffStsArr","Relation","source","_fieldStoreName","_fieldspace","joinWith","unionWith","differenceWith","defConfig","oDm","selectDm","rejectDm","linkParent","retDataModel","jsonData","rowObj","fieldConfig","normalizedProjField","search","from","projectionClone","rejectionClone","_fieldConfig","fieldDef","def","removeChild","sibling","parent","criteriaQueue","sd","store","convertToNativeDate","date","pad","escape","DateTimeFormatter","dtParams","nativeDate","TOKEN_PREFIX","DATETIME_PARAM_SEQUENCE","YEAR","MONTH","DAY","HOUR","MINUTE","SECOND","MILLISECOND","defaultNumberParser","defVal","parsedVal","isFinite","parseInt","defaultRangeParser","l","nVal","getTokenDefinitions","daysDef","short","long","monthsDef","definitions","H","extract","parser","getHours","hours","p","P","M","mins","getMinutes","S","seconds","getSeconds","K","ms","getMilliseconds","day","getDay","A","getDate","month","getMonth","B","y","substring","year","getFullYear","Y","getTokenFormalNames","HOUR_12","AMPM_UPPERCASE","AMPM_LOWERCASE","SHORT_DAY","LONG_DAY","DAY_OF_MONTH","DAY_OF_MONTH_CONSTANT_WIDTH","SHORT_MONTH","LONG_MONTH","MONTH_OF_YEAR","SHORT_YEAR","LONG_YEAR","tokenResolver","defaultResolver","targetParam","hourFormat24","hourFormat12","ampmLower","ampmUpper","amOrpm","isPM","findTokens","tokenPrefix","tokenLiterals","occurrence","forwardChar","formatAs","nDate","formattedStr","formattedVal","prototype","dateTimeStamp","extractTokenValue","dtParamSeq","noBreak","dtParamArr","resolverKey","resolverParams","resolverFn","param","resolvedVal","hasOwnProperty","tokenObj","lastOccurrenceIndex","occObj","occIndex","targetText","regexFormat","tokenArr","occurrenceLength","extractValues","match","shift","bind","POSITIVE_INFINITY","NEGATIVE_INFINITY","OBJECTSTRING","objectToStrFn","objectToStr","arrayToStr","checkCyclicRef","parentArr","bIndex","obj1","obj2","skipUndef","tgtArr","srcArr","srcVal","tgtVal","cRef","round","random","diff","uniqueVals","abs","arr1","arr2","formatNumber","ReducerStore","__unregister","delete","getStore","Value","defineProperty","enumerable","configurable","writable","_value","VIEW_INDEX","top","center","bottom","GRID_WIDTH","GRID_HEIGHT","BORDER","ROW_POINTER","COLUMN_POINTER","ROW_SIZE_IS_EQUAL","COLUMN_SIZE_IS_EQUAL","COLUMN_WIDTHS","ROW_HEIGHTS","LEFT_MATRIX_WIDTH","RIGHT_MATRIX_WIDTH","TOP_MATRIX_HEIGHT","BOTTOM_MATRIX_HEIGHT","MOUNT_POINT","LEFT_TABLE_ID","RIGHT_TABLE_ID","TOP_TABLE_ID","BOTTOM_TABLE_ID","CENTER_TABLE_ID","TOP_DIV_ID","BOTTOM_DIV_ID","CENTER_DIV_ID","HAVE_ROWS_CHANGED","HAVE_COLUMNS_CHANGED","HAVE_VALUES_CHANGED","ROW_MATRIX_WIDTH","COLUMN_MATRIX_HEIGHT","UNIT_WIDTH","UNIT_HEIGHT","STYLE","COLOR","WIDTH","COLLAPSE","SPACING","DISTRIBUTION","GUTTERSPACE","BREAK_PAGE","SHOW_ROW_BORDERS","SHOW_COL_BORDERS","SHOW_VALUE_BORDERS","HEIGHT","COLUMN","ROW","TOP","LEFT","RIGHT","BOTTOM","CENTER","CLICK","ROW_LEFT","ROW_RIGHT","COLUMN_BOTTOM","COLUMN_TOP","ROW_SPAN","COL_SPAN","ROW_ROOT","COLUMN_ROOT","PRIMARY","SECONDARY","GenericLayout","mountPoint","measurement","dependencies","_config","_measurement","_matrices","_dependencies","matrices","mergeRecursive","sanitizeIP","typeObj","matrix","_rowMatrix","_columnMatrix","_centerMatrix","_mountPoint","getMatrixMeasurement","getLogicalSpace","setMatrixMeasurement","spaces","setAvailableSpace","width","height","widths","heights","rIdx","placeholder","cIdx","setViewSpaces","layout","pointerType","viewSpaces","pointer","computeLayoutMeasurements","rowMatrix","columnMatrix","centerMatrix","border","rowMatrixWidth","columnMatrixWidth","columnViewPages","getViewableSpaces","columnViewSpace","columnPointer","columnMatrixHeight","primary","secondary","rowMatrixHeight","rowViewableSpaces","rowHeights","rowWidthsPrimary","columnWidths","rowWidthsSecondary","columnViewableSpaces","columnHeightsPrimary","columnHeightsSecondary","borderWidth","getViewMatrices","rowPointer","rowMatrices","getViewableData","columnMatrices","centralMatrixPointer","primaryMatrix","secondaryMatrix","rowMatrixLen","columnMatrixLen","rowPages","columnPages","getViewMeasurements","leftWidth","rightWidth","topHeight","bottomHeight","centerHeight","centerWidth","viewWidth","viewHeight","DEFAULT_CONFIGURATION","DEFAULT_MEASUREMENTS","BLANK_BORDERS","generateVisualMatrices","context","leftMatrix","rightMatrix","topMatrix","bottomMatrix","begColCells","endColCells","isRowSizeEqual","isColumnSizeEqual","gutterSpace","distribution","breakPage","minUnitHeight","minUnitWidth","topLeft","topColumns","topRight","leftRows","valueMatrix","rightRows","bottomLeft","bottomColumns","bottomRight","isDistributionEqual","gutter","unitMeasures","extraCellLengths","isTransposed","GridLayout","defaultConfig","_layoutId","setViewInformation","pageNumber","getViewInformation","viewMatricesInfo","totalPages","renderGrid","currentPage","layoutDimensions","viewInfo","renderMatrices","defaultMeasurement","renderTable","mount","className","rowData","table","makeElement","body","cells","rowIndex","id","applyRowBorders","borderStyle","showBorders","color","borderType","style","applyColBorders","applyBorders","showRowBorders","showColBorders","showValueBorders","renderMatrix","classPrefix","containerForMatrix","classed","cellSpanMaker","viewMatrix","spans","attr","cell","colIndex","span","availableHeight","availHeight","each","render","exit","remove","splitMatrices","newCenter","newBottom","newTop","breakLength","prev","topBreak","bottomBreak","selectElement","columnFilter","colData","colIdx","previousRow","currentRow","prevCell","nextRow","prevRow","calcRowSpan","isNull","calcColSpan","mask","filteredRow","col","temp","ridx","currSpan","nest","Symbols","getMeasureInfo","firstMeasure","secondMeasure","findInPage","page","combineMatrices","joinedMatrix","createTree","matrixTree","lastLevelKey","facet","nestFn","layoutMatrix","_layoutMatrix","keyLength","counter","primaryMatrixLength","newMatrix","tree","getMinMeasures","minMeasures","maxMeasure","firstMeasureValue","secondMeasureValue","valueArray","fMeasure","sMeasure","logicalSpace","space","ceil","computeLogicalSpace","maxMeasures","valueItem","spaceTakenByRow","spaceTakenByColumn","createMatrixEachLevel","eachLevel","breakMatrix","breakPointer","columnIndex","getDistributedWidth","layoutConfig","availableWidth","distSum","rowLen","getDistributedHeight","gutterSum","heightWithoutGutter","colLen","extraCellsRemover","beg","createMatrixInstances","depth","matrixInfo","_breakPointer","brokenMatrix","nextLevel","PROPS","sanitization","availableSpace","VisualMatrix","_lastLevelKey","_primaryMatrix","_secondaryMatrix","_maxMeasures","_availableSpace","generateGetterSetters","defCon","_tree","_logicalSpace","setLogicalSpace","heightMeasures","populateMaxMeasures","widthMeasures","calculateDepth","viewableMatrix","createViewPortMatrix","viewableMeasures","redistribute","childDepth","maxHeights","maxWidths","matrixInst","mWidth","mHeight","redistributeColumnWise","redistributeRowWise","measurements","columnMeasures","cellDimOptions","matrixIndex","getCellDimensions","begCellLen","endCellLen","removeExtraCells","cWidths","rHeights","maxWidth","oldLogicalSpace","indices","mainMeasures","computedMeasures","colHeight","colWidth","rotateAxis","instance","tickText","labelManager","axis","orientation","labels","fixedBaseline","rotation","tickSize","getTickSize","yShift","xShift","tickFormatter","tickFormat","tickLabelDim","getOriSize","quadrant","rotationNormalizer","sin","angleToRadian","changeTickOrientation","selectContainer","axisInstance","_smartTicks","isSmartTicks","smartTicks","selectAll","tspan","lines","transition","duration","oriTextHeight","setFixedBaseline","setAxisNamePos","textNode","axisNameHeight","yOffset","xOffset","labelOffset","axisNameWidth","renderAxis","_axisNameStyle","_tickLabelStyle","axisNamePadding","showAxisName","show","interpolator","setStyle","setTickValues","labelProps","axisDimensions","axisNameSpace","BandAxis","padding","isOffset","left","right","getAxisDimensions","axisLabelDim","axisDimHeight","axisHeight","axisWidth","bandwidth","smartlabel","maxHeight","useEllipsesOnOverflow","getSmartText","textToLines","calculateBandSpace","setOffset","axisTickLabels","labelWidth","availSpace","smartWidth","_minTickDistance","showInnerTicks","showOuterTicks","tickSizeInner","tickSizeOuter","currentDomain","interpolatorMap","ContinousAxis","base","exponent","InterpolatorCls","_interpolator","createScale","nice","sanitizeDomain","domainVal","getScaleValue","_domain","commit","labelSpace","tickValues","getTickValues","labelDim","getTickLabelInfo","largestLabelDim","ticks","getNumberOfTicks","getSmallestDiff","_domainLock","updateDomainBounds","tickTransform","shiftWidth","shiftHeight","axisName","defClassName","numberOfTicks","rotate","tickLength","numberOfValues","largestLabel","smartTick","allLabelLengths","labelFunc","quantile","originalLabel","formattedLabel","computeAxisDimensions","angle","PI","labelHeight","_rotationLock","setRotationConfig","cos","getAxisOffset","timeDiff","pvr","avWidth","bars","barWidth","adjustRange","registerChangeListeners","_eventList","getHorizontalAxisSpace","tickDimHeight","tickDimWidth","minTickDiff","getMinTickDifference","getVerticalAxisSpace","largestDimHeight","largestDimWidth","calculateContinousSpace","axisDimWidth","effHeight","LinearInterpolator","scaleFactory","scaleMap","linear","_scale","LogInterpolator","log","PowInterpolator","pow","createAxis","SimpleAxis","_id","_mount","_range","_axisDimensions","simpleConfig","bodyElem","getSmartComputedStyle","_axis","setTickConfig","axisClass","axisOrientationMap","invert","v1","v2","p1","p2","extent","reverse","invertExtent","event","registerEvent","unsubscribeAll","TimeAxis","_minDiff","ColorAxis","_domainType","_rangeType","step","_schemeType","getSchemeType","_colorStrategy","setColorStrategy","colorStrategy","getScheme","domainType","rangeType","schemeType","stops","strategyGetter","hslColorArray","getHslString","getRawColor","rgbArr","rgbToHsv","domainRangeFn","domainRange","scaleInfo","scaleDomain","transformationArr","h","s","newH","newS","newL","newA","hsla","x11Colors","Pink","hex","rgb","LightPink","HotPink","DeepPink","PaleVioletRed","MediumVioletRed","LightSalmon","Salmon","DarkSalmon","LightCoral","IndianRed","Crimson","FireBrick","DarkRed","Red","OrangeRed","Tomato","Coral","DarkOrange","Orange","Gold","Yellow","LightYellow","LemonChiffon","LightGoldenrodYellow","PapayaWhip","Moccasin","PeachPuff","PaleGoldenrod","Khaki","DarkKhaki","Cornsilk","BlanchedAlmond","Bisque","NavajoWhite","Wheat","BurlyWood","Tan","RosyBrown","SandyBrown","Goldenrod","DarkGoldenrod","Peru","Chocolate","SaddleBrown","Sienna","Brown","Maroon","DarkOliveGreen","Olive","OliveDrab","YellowGreen","LimeGreen","Lime","LawnGreen","Chartreuse","GreenYellow","SpringGreen","MediumSpringGreen","LightGreen","PaleGreen","DarkSeaGreen","MediumSeaGreen","SeaGreen","ForestGreen","Green","DarkGreen","MediumAquamarine","Aqua","Cyan","LightCyan","PaleTurquoise","Aquamarine","Turquoise","MediumTurquoise","DarkTurquoise","LightSeaGreen","CadetBlue","DarkCyan","Teal","LightSteelBlue","PowderBlue","LightBlue","SkyBlue","LightSkyBlue","DeepSkyBlue","DodgerBlue","CornflowerBlue","SteelBlue","RoyalBlue","Blue","MediumBlue","DarkBlue","Navy","MidnightBlue","Lavender","Thistle","Plum","Violet","Orchid","Fuchsia","Magenta","MediumOrchid","MediumPurple","BlueViolet","DarkViolet","DarkOrchid","DarkMagenta","Purple","Indigo","DarkSlateBlue","SlateBlue","MediumSlateBlue","White","Snow","Honeydew","MintCream","Azure","AliceBlue","GhostWhite","WhiteSmoke","Seashell","Beige","OldLace","FloralWhite","Ivory","AntiqueWhite","Linen","LavenderBlush","MistyRose","Gainsboro","LightGray","Silver","DarkGrey","Grey","DimGrey","LightSlateGrey","SlateGrey","DarkSlateGrey","Black","getStops","newStops","numberInterpolator","rangeStops","newStopsLength","newRange","maxRangeLength","rangeCycles","piecewiseDomain","retDomain","hslValues","piecewiseInterpolator","hslInterpolator","indexedDomain","indexedDomainMeasure","normalDomain","steppedDomain","continousSteppedDomain","uniqueRange","domainValue","numVal","indexedRange","normalRange","strategies","palette","DEFAULT_CONFIG","LINEAR","hslArr","convertToXllString","baseString","charAt","toUpperCase","getActualHslColor","paletteColor","detectColor","hexToHsv","lastIndexOf","interpolate","newConfig","DATA_TYPES","DATETIME","dataTypeScaleMap","axisLeft","axisBottom","axisRight","axisTop","CLASSPREFIX","CONTINOUS","SEQUENTIAL","ORDINAL","THRESHOLD","QUANTIZE","QUANTILE","SHAPE","SIZE","DOMAIN","BAND","HIDDEN","NUMBER","TIME","LOG","POW","IDENTITY","scaleLinear","scaleThreshold","scaleLog","scalePow","scaleIdentity","scaleOrdinal","scaleSequential","scaleQuantize","scaleQuantile","schemeCategory10","schemeCategory20","schemeCategory20b","scaleBand","scaleTime","SCHEMES","SCHEME1","SCHEME2","SCHEME3","scheme","colorSchemes","updateScaleRange","getScaleType","steps","generator","shapeGenerator","generatorFn","generatedShapes","ShapeAxis","_generatedShapes","shapeType","getSymbol","SizeAxis","_sizeStrategy","setStrategy","updateDomain","strategy","sizeVal","domainFn","domainInfo","intervals","newIntervals","discreteRange","pieceWiseRange","BrushBehaviour","FilterBehaviour","GenericBehaviour","firebolt","formalName","selectionSets","getSelectionSets","getAddSetFromCriteria","getPropagationInf","filteredDataModel","entryExitSets","selectionSet","setSelectionSet","getEntryExitSet","getSets","entrySet","exitSet","completeSet","propagationInf","getFullData","setConfig","isSourceFieldPresent","getSetInfo","mergedEnter","getMergedSet","mergedExit","getSourceFields","sourceSelectionSet","_volatile","HighlightBehaviour","PersistentBehaviour","addSet","reset","existingAddSet","_set","propagate","updateExit","update","updateEntry","mergedExitSet","completeSetCount","getCompleteSet","SelectBehaviour","VolatileBehaviour","click","targetEl","behaviours","dispatchBehaviour","getEvent","generatePayloadFromEvent","beh","stopPropagation","on","drag","attachDragEvent","getDragActionConfig","sourceInfo","axes","xAxis","yAxis","axisFields","xField","getMembers","yField","xFieldType","yFieldType","stPos","startPos","endPos","dragDim","isXDimension","isYDimension","xRange","yRange","selectedDomains","rangeObj","xdom","ydom","snap","getNearestRange","touch","d3Drag","getD3Drag","boundingBox","node","getBoundingClientRect","touchStart","getSourceInfo","dragEnd","pos","getClientPoint","getDrawingContext","svgContainer","touches","nearestPoint","getNearestPoint","showInPosition","target","position","hover","tooltipConf","interaction","tooltip","getAllPoints","physicalActions","longtouch","touchEnd","setTimeout","selectionBoxDrag","subject","drawingInf","onDrag","dx","dy","y2","x2","touchdrag","behaviourEffectMap","DRAG","HOVER","SELECTIONDRAG","LONGTOUCH","TOUCHDRAG","BRUSH","HIGHLIGHT","TOOLTIP","FILTER","CONSOLIDATED","FRAGMENTED","SELECTION_NEW_ENTRY","SELECTION_NEW_EXIT","SELECTION_NULL","SELECTION_OLD_ENTRY","SELECTION_OLD_EXIT","Firebolt","sideEffects","_sideEffectDefinitions","_sideEffects","_propagationInf","_actions","behavioural","physical","_propagationFields","_sourceSideEffects","selectionBox","_actionBehaviourMap","_behaviourEffectMap","mapSideEffects","registerBehaviouralActions","registerSideEffects","registerPhysicalBehaviouralMap","physicalBehaviouralMap","registerPhysicalActions","sideEffectConf","behEffectMap","initializeBehaviouralActions","sideEffectStore","sideEffect","sideEffectInstance","enabled","behaviourName","applySideEffects","changeSideEffectAvailability","unsubscribe","onDataModelPropagation","propValue","uniqueIds","volatileSelectionSet","_volatileSelectionSet","_selectionSet","sideEffectDefinitions","initializeSideEffects","initedActions","initializePhysicalActions","initedPhysicalActions","mapObj","getDefaultTargetContainer","hasTouch","bindActionWithBehaviour","targets","behaviourList","nodes","getElementsByClassName","getDataModelFromIdentifiers","xFields","yFields","xMeasures","yMeasures","propagationSource","applicableSelectionSets","_resetted","sideEffectsMap","SideEffect","dispatchableBehaviours","Action","toEnable","change","enable","disable","sourceFields","getSchema","conditionsMap","newEntry","oldEntry","newExit","oldExit","complete","getModelFromSet","condition","resetted","SelectionSet","_completeSetCount","_lockedSelection","ids","lockedSel","updateSet","removeSet","AnchorEffect","_layers","addAnchorLayers","layers","layer","shouldDrawAnchors","encodingFieldsInf","addLayer","alias","mark","encoding","colorField","size","sizeField","defaultSizeValue","transform","getTransitionConfig","calculateDomain","dt","interactive","disabled","drawingContext","sideEffectGroup","anchorGroups","createElement","BrushAnchors","Crossline","bandWidth","px","bandClass","lineClass","isEmpty","hide","sourceInf","elemData","dataArr","axisIndex","fieldInst","getUnitWidth","plotWidth","getPlotSpan","getPlotPadding","startPx","endPx","dataPoint","parentGroup","FilterEffect","clearCaching","resetData","enableCaching","GenericSideEffect","_strategy","spaceOutBoxes","boxes","showVertically","spaceOutIfOverlap","firstBox","secondBox","opposite","PersistentAnchors","PlotHighlighter","fade","unfadeSelection","fadeOutSelection","focus","focusSelection","focusOutSelection","highlight","dehighlightPoint","highlightPoint","getBoxDimensionsFromPayload","x1","y1","direction","xDim","yDim","xLinear","yLinear","xCriteria","yCriteria","bandScale","x1Val","x2Val","x1DomainIndex","x2DomainIndex","y1Val","y2Val","y1DomainIndex","y2DomainIndex","dimension","changeVisibility","visible","SelectionBox","boxConf","box","unitWidth","unitHeight","selectionGroupClassName","points","selectionGroup","selection","enter","append","attrs","element","isValidValue","boxClassName","getQualifiedClassName","SpawnableSideEffect","container","elemType","_drawingContext","SurrogateSideEffect","resetPoint","Tooltip","_tooltips","_strategies","totalHeight","totalWidth","tooltips","boundBox","dataModels","fragmented","xFieldDim","tooltipPos","plotDimensions","getPlotPointsFromIdentifiers","plotDim","ReservedFields","tooltipInst","htmlContainer","content","positionRelativeTo","_position","tooltipBoundBox","_tooltipContainer","getContents","repositionArrow","showSelectedItems","aggregatedModel","fieldsConf","toFixed","IDFIELD","CONFIG","DATAMODEL","AXES","LAYERDEFS","MOUNTPOINT","GRIDLINEPARENTGROUPCLASS","TRANSFORM","DEFAULTCOLOR","DEFAULTSIZE","DEFAULTSHAPE","STEP","GRADIENT","SCALE_FUNCTIONS","shape","HORIZONTAL","VERTICAL","VALUE","PATH","ICON","RECT","START","UPPER","LOWER","END","SELECTIONBOX","Highlighter","actionBehaviourMap","ACTIONS","BEHAVIOURS","propagationBehaviourMap","propagationSideEffects","existingRemoveSet","SELECTION","metaData","propPayload","mutates","check","getDataModelFromRange","assembleModelFromIdentifiers","addToPropNamespace","LegendFireBolt","dispatch","propagationSelectionSet","getCriteriaFromData","behaviour","gradientDimensions","axisType","align","axisScale","rangeShifter","getSelectionCriteria","selectionBoxMeasure","drawingInfMeasure","offset","subjectStartPoint","getMousePos","sourceEvent","fadeOut","LegendHighlighter","brighten","gradientDimension","legendGradContainer","legendSelGroup","enterFn","el","selBox","ALIGN","DEFAULT_MEASUREMENT","margin","LEGEND_TITLE","bounds","lower","upper","icon","ICON_MAP","DiscreteLegend","getScaleInfo","scaleType","scaleFn","domainForLegend","ele","nextVal","legendContainer","createLegendSkeleton","legendItem","createItemSkeleton","itemSkeleton","renderDiscreteItem","mapActionsAndBehaviour","createSelectionSet","getGradientDomain","accumulator","currentValue","MAX_VALUE","MIN_VALUE","makeLinearGradient","defs","linearGradient","AxisCell","_cells","newAxis","_computedStyle","_labelManager","legendGradSvg","legendGradCont","legendRect","renderGradient","gradHeight","gradWidth","titleSpaces","applyStyle","fill","_legendGradientSvg","GradientLegend","getInterpolatedData","getScaleFactor","effPadding","axisSpace","axisDomainLength","labelSpaces","interpolatedFn","titleCreator","title","getMaxMeasures","prop","getItemMeasures","computeItemSpaces","maxItemSpaces","titleWidth","titleHeight","textOrientation","itemSpaces","iconSpaces","maxIconWidth","itemSpace","iconSpace","getDomainBounds","domainBounds","domainLeg","resetLogicalSpace","_title","applyItemStyle","measureType","stepColorCheck","getLegendIcon","defaultIcon","renderIcon","iconHeight","svg","getItemContainers","legendInstance","datasets","maxGradHeight","maxGradWidth","legendBody","stack","alignClass","iconWidth","renderStepItem","stepColor","horizontal","vertical","SimpleLegend","_data","_metaData","_fieldName","_firebolt","effBorder","effMargin","dataFromScale","titleSpace","getTitleSpace","getLabelSpaces","renderTitle","StepLegend","lowerBounds","upperBounds","ARROW_RIGHT","ARROW_TOP","ARROW_BOTTOM","ARROW_LEFT","TOOLTIP_LEFT","TOOLTIP_RIGHT","TOOLTIP_BOTTOM","TOOLTIP_TOP","INITIAL_STYLE","Content","_model","_formatter","ctx","_context","iconContainerSize","rowMargin","html","setStyles","display","spacing","path","setAttrs","connectorClassName","iconSize","iconShape","iconColor","separator","parentClassName","arrow","getArrowPos","orient","dim","arrowPos","boxHeight","boxWidth","arrowDisabled","arrowWidth","plotBottom","boxBottom","plotRight","boxRight","placeArrow","tooltipArrow","_tooltipArrow","tooltipBackground","_tooltipBackground","arrowConf","_arrowOrientation","reorderContainers","parentContainer","timeFormats","millisecond","second","minute","hour","timeDurations","getNearestInterval","interval","getClosestIndexOf","defaultTooltipFormatters","formatters","nearestInterval","buildTooltipData","fieldValues","fieldspace","dimensionMeasureMap","dataLen","getRowContent","formattedValue","measureIndex","formatterFn","colorAxis","shapeAxis","sizeAxis","isRetinalField","associatedMeasures","getColor","getShape","getSize","measure","allMeasures","filteredMeasures","keyValue","DEFAULT_STRATEGY","connectorContainer","_container","contentClass","_contentContainer","_contents","_tooltipConnectorContainer","qualifiedClassName","addClass","defConf","contentConfig","contentConf","clear","_target","arrowOrient","outsidePlot","offsetHeight","offsetWidth","connector","_offset","_relativeDim","_extent","arrowSize","draw","topSpace","positionHorizontal","rightSpace","leftSpace","positionVertical","_arrowPos","array","NaN","ascendingBisect","bisector","bisectRight","bisectLeft","compare","ascendingComparator","ascending","values0","values1","n0","n1","i0","i1","value0","v","valueof","threshold","histogram","xz","x0","tz","tickStep","bisect","arguments","constant","thresholds","number","numbers","arrays","merged","pair","pairs","indexes","permutes","value1","stop","xi","xj","deviation","LN2","e10","e5","e2","tickIncrement","power","LN10","error","step0","step1","transpose","delta","epsilon","translateX","translateY","entering","__axis","tickArguments","tickPadding","k","range0","range1","copy","tick","tickExit","tickEnter","line","insert","getAttribute","parentNode","prefix","property","empty","o","sortKeys","sortValues","rollup","createResult","setResult","valuesByKey","result","sortKey","createObject","setObject","createMap","setMap","proto","Color","darker","brighter","reI","reN","reP","reHex3","reHex6","reRgbInteger","reRgbPercent","reRgbaInteger","reRgbaPercent","reHslPercent","reHslaPercent","named","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","green","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen","define","displayable","exec","Rgb","rgbn","rgba","r","g","rgbConvert","opacity","extend","Hsl","hslConvert","hsl","m2","m1","hsl2rgb","C","D","E","ED","EB","BC_DA","cubehelixConvert","Cubehelix","bl","atan2","cubehelix","cosh","sinh","factory","definition","Xn","Yn","Zn","t0","t1","t2","t3","labConvert","Lab","Hcl","rgb2lrgb","xyz2lab","z","lab","lab2xyz","lrgb2rgb","hclConvert","lch","hcl","deg2rad","rad2deg","noop","Dispatch","parseTypenames","typenames","types","typename","T","that","defaultFilter","button","defaultContainer","defaultSubject","defaultTouchable","touchable","gestures","listeners","active","mousedownx","mousedowny","mousemoving","touchending","clickDistance2","mousedowned","touchstarted","touchmoved","touchended","gesture","beforestart","view","mousemoved","mouseupped","nodrag","nopropagation","clientX","clientY","noevent","mouse","yesdrag","changedTouches","identifier","clearTimeout","point","sublisteners","customEvent","p0","clickDistance","DragEvent","root","document","documentElement","__noselect","MozUserSelect","noclick","stopImmediatePropagation","preventDefault","overshoot","backIn","custom","backOut","backInOut","b2","b3","b4","b5","b6","b7","b8","b9","b0","bounceIn","bounceOut","bounceInOut","circleIn","circleOut","circleInOut","cubicIn","cubicOut","cubicInOut","tau","amplitude","period","elasticIn","asin","elasticOut","elasticInOut","expIn","expOut","expInOut","polyIn","polyOut","polyInOut","quadIn","quadOut","quadInOut","pi","halfPi","sinIn","sinOut","sinInOut","locale","formatPrefix","defaultLocale","decimal","thousands","grouping","currency","formatLocale","formatDecimal","toExponential","coefficient","numerals","prefixExponent","re","formatSpecifier","specifier","FormatSpecifier","sign","symbol","zero","comma","precision","out","toPrecision","formatRounded","prefixes","group","formatGroup","formatNumerals","percent","newFormat","formatTypes","suffix","formatType","maybeSuffix","valuePrefix","valueSuffix","valueNegative","formatTrim","nb","na","basis","v0","v3","exponential","hue","gamma","nogamma","cubehelixGamma","colorCubehelix","cubehelixLong","setTime","colorHcl","hclLong","colorHsl","hslLong","colorLab","piecewise","samples","rgbGamma","colorRgb","rgbSpline","spline","colors","rgbBasis","rgbBasisClosed","reA","reB","one","bi","lastIndex","am","bm","bs","q","degrees","identity","skewX","scaleX","scaleY","atan","interpolateTransform","pxComma","pxParen","degParen","translate","xa","ya","xb","yb","interpolateTransformCss","interpolateTransformSvg","cssNode","cssRoot","cssView","svgNode","parseCss","defaultView","getComputedStyle","appendChild","getPropertyValue","decompose","parseSvg","createElementNS","setAttribute","baseVal","consolidate","rho","SQRT2","rho2","rho4","epsilon2","exp","tanh","ux0","uy0","w0","ux1","uy1","w1","d2","d1","r0","r1","coshr0","u","tauEpsilon","Path","_x0","_y0","_x1","_y1","moveTo","closePath","lineTo","quadraticCurveTo","bezierCurveTo","arcTo","y0","x21","y21","x01","y01","l01_2","x20","y20","l21_2","l20_2","l21","l01","acos","t01","t21","arc","a0","ccw","cw","da","rect","w","ramp","interpolateRgbBasis","interpolateCubehelixLong","warm","cool","ts","pi_1_3","pi_2_3","magma","inferno","plasma","band","ordinal","unknown","ordinalRange","paddingInner","paddingOuter","rescale","sequence","rangeRound","hiIndex","pointish","side","low","arrLen","high","highVal","deinterpolateLinear","deinterpolateClamp","deinterpolate","reinterpolateClamp","reinterpolate","bimap","d0","polymap","clamp","continuous","output","input","linearish","pow10","powp","logp","log10","log2","reflect","logs","pows","implicit","raise","quantiles","quantize","rainbow","sequential","precisionPrefix","precisionRound","precisionFixed","durationSecond","durationMinute","durationHour","durationDay","durationWeek","durationMonth","durationYear","calendar","week","formatMillisecond","formatSecond","formatMinute","formatHour","formatDay","formatWeek","formatMonth","formatYear","tickIntervals","tickInterval","UTC","creator","creatorInherit","ownerDocument","uri","namespaceURI","creatorFixed","fullname","local","namespace","nextId","Local","matcher","selector","matches","vendorMatches","webkitMatchesSelector","msMatchesSelector","mozMatchesSelector","oMatchesSelector","namespaces","xhtml","xlink","xml","xmlns","ownerSVGElement","createSVGPoint","matrixTransform","getScreenCTM","inverse","clientLeft","clientTop","querySelector","querySelectorAll","attrRemove","removeAttribute","attrRemoveNS","removeAttributeNS","attrConstant","attrConstantNS","setAttributeNS","attrFunction","attrFunctionNS","getAttributeNS","classArray","string","classList","ClassList","_node","_names","contains","classedAdd","names","list","classedRemove","classedTrue","classedFalse","classedFunction","selection_cloneShallow","insertBefore","cloneNode","nextSibling","selection_cloneDeep","deep","keyPrefix","bindIndex","groupLength","dataLength","__data__","bindKey","nodeByKeyValue","keyValues","parents","_parents","groups","_groups","enterGroup","updateGroup","exitGroup","previous","_next","_enter","_exit","dispatchEvent","window","CustomEvent","createEvent","initEvent","bubbles","cancelable","detail","dispatchConstant","dispatchFunction","EnterNode","subgroups","subgroup","htmlRemove","innerHTML","htmlConstant","htmlFunction","Selection","selection_dispatch","constantNull","before","previousSibling","firstChild","groups0","groups1","m0","merges","group0","group1","filterEvents","mouseenter","mouseleave","filterContextListener","listener","contextListener","related","relatedTarget","compareDocumentPosition","event1","event0","onRemove","__on","removeEventListener","capture","onAdd","wrap","addEventListener","propertyRemove","propertyConstant","propertyFunction","subnode","selectorAll","compareNode","sortgroups","sortgroup","styleRemove","removeProperty","styleConstant","priority","setProperty","styleFunction","styleValue","textRemove","textContent","textConstant","textFunction","none","current","arcInnerRadius","innerRadius","arcOuterRadius","outerRadius","arcStartAngle","startAngle","arcEndAngle","endAngle","arcPadAngle","padAngle","intersect","x3","y3","x10","y10","x32","y32","cornerTangents","rc","ox","oy","x11","y11","x00","y00","cx0","cy0","cx1","cy1","dx0","dy0","dx1","dy1","cx","cy","cornerRadius","padRadius","buffer","a01","a11","a00","a10","da0","da1","ap","rp","rc0","rc1","oc","ax","ay","bx","by","kc","lc","centroid","defined","curve","area","defined0","x0z","y0z","areaStart","lineStart","lineEnd","areaEnd","arealine","lineX0","lineY0","lineY1","lineX1","radius","lineStartAngle","lineRadial","lineEndAngle","lineInnerRadius","lineOuterRadius","curveRadial","_curve","Basis","_line","_point","BasisClosed","_x2","_x3","_x4","_y2","_y3","_y4","BasisOpen","Bundle","beta","_basis","_beta","_x","_y","bundle","_k","Cardinal","tension","cardinal","CardinalClosed","_x5","_y5","CardinalOpen","_l01_a","_l01_2a","_l12_a","_l12_2a","_l23_a","_l23_2a","CatmullRom","alpha","_alpha","x23","y23","catmullRom","CatmullRomClosed","CatmullRomOpen","Linear","LinearClosed","slope3","h0","h1","s0","s1","slope2","MonotoneX","_t0","MonotoneY","ReflectContext","monotoneX","monotoneY","Natural","controlPoints","py","curveRadialLinear","Radial","radial","Step","_t","stepBefore","stepAfter","linkSource","linkTarget","link","argv","curveHorizontal","curveVertical","pointRadial","p3","linkHorizontal","linkVertical","linkRadial","series","yp","yn","s2","si","sij0","sij1","s3","sk","skj0","skj1","sums","tops","bottoms","pie","arcs","pa","stackValue","kz","sz","oz","ki","sij","symbols","tan30","tan30_2","ka","kr","kx","ky","sqrt3","timeFormat","timeParse","utcFormat","utcParse","dateTime","time","periods","days","shortDays","months","shortMonths","isoSpecifier","formatIsoNative","toISOString","formatIso","parseIsoNative","parseIso","localDate","L","setFullYear","utcDate","setUTCFullYear","newYear","locale_dateTime","locale_date","locale_time","locale_periods","locale_weekdays","locale_shortWeekdays","locale_months","locale_shortMonths","periodRe","formatRe","periodLookup","formatLookup","weekdayRe","weekdayLookup","shortWeekdayRe","shortWeekdayLookup","monthRe","monthLookup","shortMonthRe","shortMonthLookup","formats","formatShortWeekday","formatWeekday","formatShortMonth","formatDayOfMonth","formatMicroseconds","formatHour24","formatHour12","formatDayOfYear","formatMilliseconds","formatMonthNumber","formatMinutes","formatPeriod","formatUnixTimestamp","formatUnixTimestampSeconds","formatSeconds","formatWeekdayNumberMonday","formatWeekNumberSunday","formatWeekNumberISO","formatWeekdayNumberSunday","formatWeekNumberMonday","formatFullYear","formatZone","formatLiteralPercent","utcFormats","formatUTCShortWeekday","formatUTCWeekday","formatUTCShortMonth","formatUTCMonth","formatUTCDayOfMonth","formatUTCMicroseconds","formatUTCHour24","formatUTCHour12","formatUTCDayOfYear","formatUTCMilliseconds","formatUTCMonthNumber","formatUTCMinutes","formatUTCPeriod","formatUTCSeconds","formatUTCWeekdayNumberMonday","formatUTCWeekNumberSunday","formatUTCWeekNumberISO","formatUTCWeekdayNumberSunday","formatUTCWeekNumberMonday","formatUTCYear","formatUTCFullYear","formatUTCZone","parses","parseShortWeekday","parseWeekday","parseShortMonth","parseMonth","parseLocaleDateTime","parseDayOfMonth","parseMicroseconds","parseHour24","parseDayOfYear","parseMilliseconds","parseMonthNumber","parseMinutes","parsePeriod","parseUnixTimestamp","parseUnixTimestampSeconds","parseSeconds","parseWeekdayNumberMonday","parseWeekNumberSunday","parseWeekNumberISO","parseWeekdayNumberSunday","parseWeekNumberMonday","parseLocaleDate","parseLocaleTime","parseYear","parseFullYear","parseZone","parseLiteralPercent","X","pads","newParse","newDate","parseSpecifier","Q","V","getUTCDay","utcMonday","utcDay","getUTCFullYear","getUTCMonth","getUTCDate","timeMonday","timeDay","W","U","Z","getUTCHours","numberRe","percentRe","requoteRe","requote","timeYear","timeSunday","timeThursday","getTimezoneOffset","utcYear","getUTCMilliseconds","getUTCMinutes","getUTCSeconds","dow","utcSunday","utcThursday","setHours","setDate","newInterval","floori","offseti","milliseconds","minutes","setMonth","setUTCHours","setUTCDate","utcDays","utcHour","setUTCMinutes","utcHours","utcMinute","setUTCSeconds","utcMinutes","utcMonth","setUTCMonth","utcMonths","utcWeekday","utcTuesday","utcWednesday","utcFriday","utcSaturday","utcSundays","utcMondays","utcTuesdays","utcWednesdays","utcThursdays","utcFridays","utcSaturdays","utcYears","weekday","sunday","monday","tuesday","wednesday","thursday","friday","saturday","sundays","mondays","tuesdays","wednesdays","thursdays","fridays","saturdays","years","delay","total","restart","now","elapsed","frame","timeout","pokeDelay","taskHead","taskTail","clockLast","clockNow","clockSkew","clock","performance","setFrame","requestAnimationFrame","clearNow","Timer","_call","_time","timer","TypeError","sleep","timerFlush","wake","nap","poke","clearInterval","setInterval","schedules","__transition","schedule","state","interrupt","defaultTiming","ease","easeCubicInOut","inherit","timing","_name","newId","value00","interpolate0","value10","attrTween","tweenValue","attrTweenNS","tween","delayFunction","init","delayConstant","durationFunction","durationConstant","easeConstant","Transition","selection_prototype","styleTween","transition_ease","onFunction","on0","on1","sit","removeFunction","emptyOn","emptyTween","CREATED","SCHEDULED","STARTING","STARTED","RUNNING","ENDING","ENDED","self","styleRemoveEnd","id0","id1","tweenRemove","tween0","tween1","tweenFunction","beachPool","Beach","RedBlackNode","edge","site","circle","createBeach","beach","detachBeach","detachCircle","beaches","removeBeach","vertex","disappearing","lArc","rArc","nArcs","iArc","setEdgeEnd","createEdge","attachCircle","addBeach","directrix","dxl","dxr","leftBreakPoint","rightBreakPoint","R","createCell","newArc","lSite","rSite","hb","hc","rfocx","rfocy","pby2","lfocx","lfocy","plby2","hl","aby2","halfedges","cellHalfedgeAngle","va","vb","cellHalfedgeStart","cellHalfedgeEnd","sortCellHalfedges","edges","clipCells","nCells","iCell","iHalfedge","nHalfedges","startX","startY","endX","endY","cover","createBorderEdge","dc","v00","v01","v11","v10","circlePool","firstCircle","Circle","cSite","ha","circles","triangleArea","lexicographic","Diagram","sites","clipEdges","polygons","polygon","triangles","e1","links","_found","vx","vy","clipEdge","connectEdge","lx","ly","rx","ry","fx","fy","fm","fb","RedBlackTree","after","grandpa","uncle","RedBlackFirst","RedBlackRotateLeft","RedBlackRotateRight","voronoi","ElectricNode","nextFrame","currentFrame","lstnrs","pullableRecent","pullableEnd","GraphNode","qualifiedName","outgoingEdges","_seed","requireResolve","retriever","history","resolver","electricEdges","dep","entry","seed","retrieveDetails","head","hist","Graph","qualifiedNodeMap","fetch","accumulate","_wholeSet","_propagate","propagationOverride","currentFrameListeners","nextFrameListeners","_schedule","scheduler","qname","flush","resolveReqList","rec","objn","perv","addDependencies","isSimpleObject","getDependencies","getResolvedList","getUpstreamNodes","props","fnSpec","eNode","addEdges","addElectricNode","changedSet","upstreamNodes","flat","__execUniqueElectricEdges","upstreamNode","cfLstnrs","nfLstnrs","differenceSet","ForeignSet","toArray","repeatHead","resetPropagationOverride","qnames","resolved","resolveDependencyOrder","Model","_graph","_lockFlag","_reqQ","_addPropInModel","calculationConfig","customResolver","varName","fetchFn","createNodesFrom","instantCall","propsArr","unsub","createElectricNodeOf","setPropagationOverride","resetNodeValue","setProp","getNodeValue","getNodeFromQualifiedName","minMsThreshold","win","reqAnimFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","oRequestAnimationFrame","msRequestAnimationFrame","getTimeBasedId","__lastTime","__id","nFn","res","identityMap","splitPathProp","pathArr","onFinishCallback","queue","animationFrame","namedNode","fetchAggregator","placedIndex","preArr","postArr","nodeDetails","resolveMap","neighbour","isRoot","CustomResolver","makeEntry","sCon","set1","set2","filteredKeys","DataObject","dataSelect","_idMap","_mode","_enterdata","_exitdata","newData","idGetter","_idGetter","tempMap","purgedIds","purged","startIdx","HTMLElement","checkExistence","nonExistentKeys","htmlElem","getMax","getMin","getDomainFromData","domArr","firstMin","secondMin","firstMax","secondMax","unionDomain","domains","dom","symbolFns","cross","diamond","square","star","wye","triangle","symbolTriangle","easeFns","cubic","bounce","elastic","back","poly","easeCircle","getExtremePoint","compareValue","minOrMax","extremePoint","minOrMaxVal","getMinPoint","getMaxPoint","getWindow","cancelAnimFrame","cancelAnimationFrame","capitalizeFirst","txt","substr","cls","defaultValue","getDependencyOrder","graph","dependencyOrder","visited","visit","objectIterator","Voronoi","_voronoi","_voronoiFn","Store","_listeners","serialize","propName","propNames","callBack","calculatedProp","intSanitizer","transactor","holder","compareTo","paramsLen","prevVal","spreadParams","typeCheck","typeExpected","preset","oldValues","propInfo","typeChecker","getArraySum","arraysEqual","isEqual","oldVal","newVal","is","enableChainedTransaction","transactionModel","transactionEndpoint","transactionItems","isHTMLElem","ERROR_MSG","INTERFACE_IMPL","sink","interpolateArray","fitCount","linearInterpolate","atPoint","springFactor","tmp","replaceCSSPrefix","colorInterpolator","transformColors","hue2rgb","hslToRgb","hsvToRgb","matchRgb","matchHsl","matchRgba","matchHsla","matchHex","fieldMap","fieldObj","vals","selFields","selFn","filteredSchema","registerListeners","listenerMap","propListenerMap","propType","listenerFn","getObjProp","escapeHTML","htmlEscapes","htmlEscaper","transposeArray","extendsClass","extendsFrom","found","concatModels","dataObj1","dataObj2","data1","data2","schema1","schema2","tuples1","tuples2","commonTuples","row1","row2","dim1Values","dim2Values","allDimSame","dm1Key","dm2Key","commonSchema","stackOrders","stackOffsets","d3Stack","nestCollection","pathInterpolators","curveLinear","curveStepAfter","curveStepBefore","curveStep","curveCatmullRom","Scales","require","lookupWhat","lookupDetails","resolvable","lookupTarget","depArr","deps","CommonProps","ACTION_INF","ON_LAYER_DRAW","ORDER_ASCENDING","ORDER_DESCENDING","ORDER_NONE","OFFSET_DIVERGING","OFFSET_NONE","OFFSET_EXPAND","OFFSET_WIGGLE","events","compositions","EVENT_LIST","composition","resolveFn","notification","hasOwn","LifeCycleManager","_promises","_notifiers","_lifeCycles","_unreleasedLifeCycles","_boot","_preparePromises","Promise","_makeNotifierPromise","client","_releasePromisesFromCache","_notify","stage","_resolvePromise","promise","retrieve","_callLifeCycleCallback","_cachePromise","_resetTargetPromise","stages","lifeCycles","callbacks","keyFn","SVGElement","selectorVal","selectorType","actualSelector","enterSel","mergeSel","exitSel","styleObj","appendElement","element1","element2","setElementAttrs","removeClass","styles","createElements","sel","selectionMerge","clipElement","clipPathElement","clipPathRect","boundingClientRect","clientPoint","tag","css","textEl","testText","mandatoryStyle","computedStyle","styleForSmartLabel","fontSize","fontFamily","fontWeight","fontStyle","exports","_interopRequireDefault","__esModule","_lib","_lib2","_containerManager","_containerManager2","slLib","doc","BLANK","htmlSplCharSpace","documentSupport","getDocumentSupport","SVG_BBOX_CORRECTION","isWebKit","SmartLabelManager","useEllipses","wrapper","prevInstance","isBrowserLess","maxCacheLimit","maxDefaultCacheLimit","getElementById","createContainer","testStrAvg","isHeadLess","isIE","parentContainerStyle","_showNoEllipses","_init","_calCharDimWithCache","calculateDifference","csArr","tw","twi","cachedStyle","asymmetricDifference","maxAdvancedCacheLimit","cache","_advancedCache","advancedCacheKey","_advancedCacheKey","cacheName","cacheInitName","repeat","_getWidthFn","contObj","_containerObj","svgText","bbox","getBBox","sCont","_styleNotSet","setLineHeight","_cache","charCache","_lineHeight","lineHeight","noWrap","trimStr","tempArr","tmpText","maxWidthWithEll","toolText","oriWidth","oriHeight","newCharIndex","nearestChar","tempChar","getWidth","initialLeft","initialTop","getOriSizeImproveObj","spanArr","minWidth","chr","elemRightMostPoint","elemLowestPoint","lastBR","removeFromIndex","removeFromIndexForEllipses","hasHTMLTag","maxStrWidth","lastDash","lastSpace","lastIndexBroken","strWidth","strHeight","oriTextArr","ellipsesStr","ellipsesWidth","dotWidth","characterArr","dashIndex","spaceIndex","lastLineBreak","fastTrim","ws","smartLabel","oriTextWidth","oriText","isTruncated","xmlTagRegEx","ltgtRegex","getNearestBreakIndex","detailObj","tooltext","spanAdditionRegx","spanAdditionReplacer","classNameWithTag","classNameWithTagBR","childRetriverFn","childRetriverString","noClassTesting","classNameReg","spaceIdx","dashIdx","offsetLeft","offsetTop","classNameBrReg","spanRemovalRegx","detailedCalculationFlag","textArr","letter","lSize","cumulativeSize","indiSizeStore","module","ContainerManager","maxContainers","containers","rootNode","svgRoot","containerObj","keyStr","supportedStyle","removeContainer","addContainer","avgCharWidth","hasSVG","cObj","lib","nav","navigator","userAgent","DIV","containerInstanceCount","clsNameSpace","containerClass","brReplaceRegex","whiteSpace","overflow","font","opera","Boolean","SVGAngle","implementation","hasFeature","containerParent","getElementsByTagName","sl","charLen","increment","avgWidth","fSize","ActionModel","_registrableComponents","canvases","canvas","once","then","visualGroup","matrixInstance","components","registrableComponents","actionModel","Canvas","globalDependencies","_allOptions","_registry","_composition","_cachedProps","_alias","_renderedResolve","_renderedPromise","_layout","_store","subtitle","legend","setupChangeListener","componentSubRegistry","initedComponents","initCanvas","lifeCycleManager","register","_legend","visGroup","getRenderDetails","notify","prepareLayout","renderComponents","promises","done","all","getAxes","initialSettings","regEntry","registry","arrangeComponents","legendConfig","titleConfig","subtitleConfig","titleLayouts","legendLayouts","titlePosition","subtitlePosition","legends","LEGEND_CONFIG","TITLE_CONFIG","SUB_TITLE_CONFIG","GroupFireBolt","reg","VisualGroup","dispatchProps","lockModel","allOptions","unlockModel","registerImmediateListener","registerChangeListener","updateProps","option","equalityChecker","BlankCell","cellRegistry","createBlankCell","getMaxRows","maxRows","fillArray","blankMatrixCreator","blankCellCreator","rowMatrixIndex","numberOfRows","topL","topR","bottomL","bottomR","cornerMatrices","showHeaders","colLengths","triggerReflow","placeholderInfo","minHeight","legendPosition","layoutArrangement","availableHeightForCanvas","availableWidthForCanvas","createHeaders","headerHeight","createLegend","legendSpace","getLegendSpace","legendWidth","legendHeight","mountSpace","canvasWidth","canvasHeight","legendDataCreator","LegendCls","dataset","getRetinalAxes","axisInfo","scaleProps","LEGEND_TYPE_MAP","legendInitializer","prevLegends","dataInfo","legendMeasures","TextCell","getGroupByData","setLegendMeasures","legendInfo","localOptions","canvasOptions","_sanitized","sub","setLabelRotationForAxes","xAxes","getSkeletons","layoutType","renderLegend","legendComponents","sectionComponents","legendMount","legWidth","legHeight","sections","currHeight","currWidth","leg","renderHeader","headerCell","cont","shiftHeaders","shifter","prepareGridContainer","resolveTitleSubTitleContent","rawContent","_sanitize","headerCreator","cellType","createHeading","headerOptions","ROWS","COLUMNS","DETAIL","LAYERS","INITIALIZED","SOURCE","PADDING","MOUNT","CANVAS_UPDATED","POLICIES","LEGEND","TITLE","SUB_TITLE","RESOLVE","STEP_COLOR","TITLE_TEMPLATE_NOT_ALLOWED_TAGS","collapse","GROUP","LAYOUT","RETINAL","COMPONENTS","VisualUnit","SUBREGISTRIES","layerRegistry","INTERFACES","SimpleGroup","SimpleCell","Muze","default","globalCache","defaultRegistry","overrideRegistryDefinitions","overrideRegistry","muze","env","globalStore","componentSubRegistryDef","settings","withSettings","SideEffects","concrete","abstract","layerFactory","operators","utils","share","vars","variable","treeShakeNode","nodeType","Node","ELEMENT_NODE","tagName","childNodes","childNode","strings","htmlCode","expLn","frag","createDocumentFragment","isInteger","oldConfig","TransactionSupport","INTERFACE_IMPl","STACK","FRACTURE","groupByIndices","identityTransform","normalizeData","valueField","uniqueField","uniqueFieldIndex","valueFieldIndex","seriesKeyIndex","seriesKeys","tuples","_tuple","seriesKey","newArr","normalizedData","stackData","seriesData","transformMap","transformFactory","computeAxisSpace","logicalWidth","logicalHeight","spaceFixer","_availHeight","_availWidth","availWidth","wrapperDiv","SIMPLE_CELL","TEXT_CELL","AXIS_CELL","BLANK_CELL","GEOM_CELL","DEFAULT_PLACEHOLDERS","SIMPLE","TEXT","AXIS","GEOM","MARGIN","SPACE_FIXER","VERTICAL_ALIGN","TEXT_ALIGN","IS_OFFSET","MIDDLE","BASELINE","SHOW","HEADER","DATA","FACET_BY_FIELDS","FIELDS","LAYER_DEF","computeGeomSpace","getCaptionSpace","GeomCell","_unit","_axes","_datamodel","_facetByFields","_fields","_transform","_caption","caption","captionSpace","captionDom","DEFAULT_PROPS","geomProps","facetByFields","layerDef","computeTextSpace","_minTickDiff","_className","verticalAlign","textAlign","ScaleType","categorical","temporal","CartesianEncoder","axesCreators","fieldInfo","geomCellAxes","projections","rowFields","columnFields","yAxes","axisFrom","generateAxisFromMap","facets","primaryFacets","secondaryFacets","primaryFields","secondaryFields","primaryLen","secondaryLen","projArr","primaryField","secondaryField","axisFromIndex","existIndex","getIndex","groupedModel","enc","retriveDomainFromData","layerArray","serializedLayers","getSerializedConf","userLayerConfig","layerConfig","colField","colFieldName","rowField","configs","rowFieldName","rowFieldType","colFieldType","getDefaultMark","layerConfigs","getLayerConfFromFields","layerConf","groupByFns","getAxisConfig","axisOrientation","userAxisConfig","allOrientations","axisConfig","createSimpleAxis","Cls","scaleMaps","simpleAxis","groupAxes","axisKey","currentAxes","cacheMaps","getAxisKey","mutateAxesFromMap","xAxesMap","yAxesMap","xAxisSet","yAxisSet","axisId","createRetinalAxis","fieldProps","getAxisType","arrIndex","colFields","userConf","encodingArr","colFieldExist","rowFieldExist","orderFields","fieldArray","temporalArr","categoricalArr","fieldList","numOfMeasures","allDimensions","normalizeFields","convertToVar","transformFields","normalizedFields","norFields","rowsInfo","columnsInfo","rowDimensions","rowMeasures","rowTemporalFields","rowCategoricalFields","columnDimensions","columnTemporalFields","columnCategoricalFields","PolarEncoder","pieAxes","sanitizedRows","sanitizedColumns","sanitizedFields","typeIndex","fieldSet","facetFields","parentModel","layerEncoding","encType","measureField","RetinalEncoder","newAxes","encodingConfigs","VisualEncoder","_fieldInfo","_axisFrom","_headerFrom","__headerFrom","getHeaderAxisFrom","rowHeader","rowAxis","colHeader","colAxis","headerFrom","MEASUREMENT","MIN_UNIT_WIDTH","MIN_UNIT_HEIGHT","DIMENSIONS","MEASURES","PIVOT","FORMAT","HAS_DATA_UPDATED","COL","CELL","X_AXES","Y_AXES","ENTRY_CELLS","EXIT_CELLS","UNIT","UPDATED","BEFORE_UPDATE","VALUE_MATRIX","FACET_HEADERS","RADIUS","ANGLE","ARC","CARTESIAN","POLAR","BAR","LINE","POINT","BOTH","INTERACTION","GRID_LINES","GRID_BANDS","FACET","DATA_UPDATE_COUNTER","DEFAULT_LAYER_TYPE","updateCells","geomCell","facetKey","createValueCells","suppliedLayers","encoder","matrixLayers","horizontalAxis","verticalAxis","datamodelTransform","entryCellMap","exitCellMap","layerConfigArr","getLayerConfig","normalizedColumns","normalizedRows","geomCellKey","getCellKey","allFacets","rowFacets","colFacets","createAxisCells","createSelection","axisInst","AxisOrientation","axisPlaceholderGn","selObj","axesMatrix","selObjProp","axesForDraw","rowsPrimary","rowPrime","columnsPrimary","colPrime","createTextCells","headerPlaceholderGn","selectionObj","facetConfig","selectionKeys","keySet","generatePlaceholders","facetsAndProjections","encoders","valuesMatrix","rowProjections","colProjections","rowKeys","columnKeys","takeAxisFrom","simpleEncoder","takeHeaderFrom","rowsSecondary","columnsSecondary","getObjects","headerConfig","section","hContext","generateMatrices","placeholderContext","leftHeaders","topHeaders","bottomHeaders","rightHeaders","rowSec","colSec","leftFacets","rightFacets","innerHeaders","currentBottomLength","computeMatrices","componentRegistry","globalConfig","otherEncodings","optionalProjections","matrixGnContext","getCellDef","colCells","rowCells","resetSimpleAxes","newCacheMap","valueCellContext","serializeLayerConfig","getFieldsFromSuppliedLayers","extractFields","aggregationFns","getAggregationFns","cellCreator","valueCellsCreator","valueMatrixInfo","getMatrixModel","createUnits","initStore","rowType","initializeCacheMaps","cellMap","rowId","columnId","extractUnitConfig","unitConfig","attrNames","getHeaderText","rowLength","fieldHeaders","findInGroup","channel","facetType","projType","getEncoder","userAxisFromConfig","firstField","secondField","firstFieldType","secondFieldType","setFacetsAndProjections","getFacetsAndProjections","appendObj","idFn","mergedSelection","getRowBorders","borders","getColumnsBorders","getValueBorders","borderTypeRow","borderTypeCol","getBorders","allDimensionLength","allMeasuresLength","allTemporalFieldsLength","suppliedLayerConfig","layerFields","flattenArray","getFieldNames","fields1","fields2","createSelectedDataModel","uniqueKeyGenerator","keyArray","newDm","nextDepthUniqueValues","newContext","projectRows","allColumnProjections","projectFields","projFieldNames","colProjFieldNames","pushToMatrix","facetInfo","rowProj","projIdx","rowProjFieldNames","projectedDm","rowDataModels","colProj","firstLevelRowKeys","rowFacetFieldNames","selectedDataModel","colFacetNames","firstLevelColumnKeys","dme","rIndex","cIndex","transposedColKeys","MatrixResolver","_layerConfig","_matrixLayers","_valueMatrix","_facets","_projections","_datamodelTransform","_units","_cacheMaps","maps","_rowCells","_colCells","otherEncodingTypes","_horizontalAxis","_verticalAxis","matrixType","sideEffectRegistry","units","parentAlias","retContext","getRetinalFieldsDomain","retinalEncoder","setCommonDomain","retinalAxes","retinalFields","updateModel","placeholders","topCols","bottomCols","rowHeaders","footers","ComposedVars","texts","_vars","member","SimpleVariable","oneVar","_oneVar","uid","fieldSpace","Variable","setMatrixInstances","setupChangeListeners","matrixConfig","retinalConfig","groupType","fieldSanitizer","setAxisAndHeaders","getMatrices","_groupedModel","createRetinalAxes","setDomains","hasDataUpdated","ValueMatrix","matrixArr","instancesById","cellValue","_instancesById","_matrix","_filterFn","rowWidth","currentRowWidth","rowHeight","currentRowHeight","_matrixInstance","_selection","_placeholderInfo","_cornerMatrices","lock","unlock","getSimpleAxes","colMeasures","getCellsByFacetKey","fieldsMeasures","_dimensionMeasureMap","findPlaceHolderById","BaseLayer","_points","_cachedData","_encodingFieldsInf","_encodingTransform","_cacheEnabled","transformType","transformData","calculateDomainFromData","encodingType","transformedData","getNormalizedData","elements","getPlotElementsFromSet","highlightStyles","styleType","colorTransform","stateColor","originalColor","fillColorInfo","transformColor","intensity","focusUnfocusSelection","fadeUnfadeSelection","_linkedLayerStore","_transformType","pointMap","_pointMap","_dataProps","xMeasure","yMeasure","xMeasureIndex","yMeasureIndex","getAllAttrs","filteredPoints","defaultOptions","newConf","defaultPolicy","dataModelValue","configValue","encodingValue","getEncodingFieldInf","getValidTransform","getTransformedData","transformedDataValue","normalizedDataValue","throwback","DEFAULT_LAYERS","OUTER_RADIUS_VALUE","TEXT_ANCHOR_MIDDLE","ENCODING","X0","Y0","ASCENDING","AREA_LAYER","ARC_LAYER","LINE_LAYER","TEXT_LAYER","POINT_LAYER","BAR_LAYER","TICK_LAYER","SIMPLE_LAYER","BASE_LAYER","NORMALIZED_DATA","TRANSFORMED_DATA","FIELDMAP","getLayerColor","colorEncoding","colorFieldIndex","rawColor","transfromColor","applyInteractionStyle","interactionType","interactionStyles","hasFaded","interactionConfig","isFocussed","getAxesScales","xScale","yScale","x0Field","y0Field","shapeField","xFieldSubType","yFieldSubType","xFieldIndex","yFieldIndex","x0FieldIndex","y0FieldIndex","encodingFieldInf","groupByField","groupByFieldMeasure","transformedDataArr","fieldsLen","pointObj","yEnc","xEnc","attachDataToVoronoi","updateStyle","animateGroup","groupTransition","groupAnimateStyle","effect","positionPoints","positioner","encodingTransform","parseLayerDefinition","layerType","strs","sanitizeEncoding","compositeLayers","factoryObj","setLayerRegistry","_layerRegistry","serializedDefs","unitLayerDef","sDef","getLayerInstance","instances","layerObj","layerConstructor","composeLayers","layerDefs","regObj","getRangeValue","defaultRadius","domainMultiplier","outerRadiusValue","sizeAxisDomain","sizeMultiplier","rangeVal","getRadiusRange","minOuterRadius","innerRadiusFixer","getIndexedPoint","prevData","currIndex","prevArc","nextArc","tweenPie","prevDatum","prevObject","getFieldIndices","angleField","radiusField","angleIndex","sizeIndex","radiusIndex","colorIndex","ArcLayer","_prevPieData","pieData","dataVal","colorVal","angleVal","domainKey","getIdentifiersFromData","layerId","chartHeight","chartWidth","qualClassName","radiusDomain","states","fadeout","selected","AreaLayer","isXDim","isYDim","xPx","yPx","y0Px","cachePoint","nearestPointThreshold","strokeOpacity","connectNullData","drawArea","easeEffect","curveInterpolatorFn","enterAreaPath","updateAreaPath","selectionEnter","resolveDimByField","axesInfo","spaceType","sizeEncoding","sizeConfig","sizeValue","enterSpace","minVal","maxVal","scales","diffPx","zeroPos","axisType0","resolveDimensions","enterWidth","enterX","xPos","enterHeight","enterY","yPos","getGroupWidth","getBarMeasurement","offsetValues","actualGroupWidth","innerPadding","groupWidth","isAxisBandScale","axisPadding","groupPadding","getTranslatedPoints","BarLayer","_bandScale","normalizedDataArr","containerSelection","generateDataPoints","seriesClassName","drawRects","classnameFn","individualClassName","isTemporal","dataProps","timeDiffs","barWidthMetrics","barHeightMetrics","barWidthOffsets","barHeightOffsets","_plotSpan","_plotPadding","translatePoints","barWidthOffset","barHeight","barHeightOffset","uniqueFieldType","filterData","pointFound","transitionBars","selTransition","barEnterFn","updateFns","LineLayer","stroke","colorFieldMeasure","getPathStyle","getDrawFn","searchRadius","drawLine","linepath","defColorStyle","fillOpacity","shapes","sizes","PointLayer","shapeEncoding","shapeFieldIndex","sizeFieldIndex","maxSize","drawFn","_maxSize","distanceLimit","checkPath","createShape","groupElement","Element","newShape","nodeName","src","href","shapeElement","pathStr","drawSymbols","mergedGroups","symbolGroups","symbolEnter","exitGroups","background","drawText","backgroundPadding","textanchor","backgroundEnabled","backgroundEl","TextLayer","textEncoding","textField","textFormatter","backgroundField","backgroundFieldIndex","textFieldIndex","textValue","ticksEnter","TickLayer","xbandwidth","ybandwidth","x0Px","SimpleLayer","trackerClassName","gridLines","zeroLineColor","gridBands","arcLayerClassName","sideEffectClassName","GRIDBANDPARENTGROUPCLASS","RETINAL_FIELDS","PARENT_ALIAS","CACHED_DATA","STORE","primaryXAxisUpdated","primaryYAxisUpdated","secondaryXAxisUpdated","secondaryYAxisUpdated","DATADOMAIN","LAYERSCREATED","TIMEDIFFS","LAYERAXISINDEX","propagateValues","propagationFields","cachedData","mutableEffect","mergedModel","sourceUnit","sourceCanvas","criteriaFields","originalData","attachPropagationListener","_layerDeps","onlayerdraw","getApplicableSideEffects","applicableSideEffects","unitId","aliasName","propagationSourceCanvas","sourceUnitId","sourceSideEffects","actionOnSource","applyOnSource","UnitFireBolt","_entryExitSet","propagationInfo","behaviouralActions","payloadFn","payloadGenerator","__default","sourceIdentifierFields","propFields","persistent","getRangeFromData","selectionDataModel","propCriteria","isActionSourceSame","isDimension","brush","getLayerDefinition","gridLineColor","gridBandColor","isLinearScale","isNegativeDomain","getDefaultVisibilty","getGridLayerDefinitions","getGridLayerData","gridData","createGridLineLayer","vuConf","_gridbands","_gridlines","atomicDef","axesObj","sConf","renderGridLineLayers","gridBandData","parentGroupClass","getDimensionMeasureMap","retinalEncodingsAndMeasures","transformDataModels","transformVal","getLayerFromDef","existingLayer","instanceArr","createLayers","layerDefinitions","layersMap","_layersMap","markSet","layersArr","markId","layerdeps","attachDataToLayers","transformedDataModels","dataSource","attachAxisToLayers","layerAxisIndex","axisInf","getLayerAxisIndex","unionDomainFromLayers","getDataDomain","domainValues","layerDomain","fieldDomain","fieldStr","renderLayers","_lifeCycleManager","orderedLayers","layerParentGroup","getNearestDimensionalValue","entryVal","getLayersBy","searchBy","removeLayersBy","inst","createSideEffectGroup","getAdjustedDomain","y1ratio","y2ratio","allSameSign","axisMap","axisProps","axesArr","isReverse","layerDefsValue","fieldsVal","_layerAxisIndex","layersCreated","dataModelVal","layerAxisIndexVal","axesVal","_transformedDataModels","dataDomain","updateAxisDomain","prevAxes","FORMAL_NAME","_rootSvg","class","_sideEffectGroup","rootSvg","boundWidth","boundHeight","layerName","getLayerByName","serializedDef","lyr","axisConf","alignZeroLine","adjustedDomain","updateDomainCache","dimValue","pointInf","getMarkInfFromLayers","markInf","parsedIdentifiers","getPointsFromIdentifiers"],"mappings":"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","file":"muze.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"muze\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"muze\"] = factory();\n\telse\n\t\troot[\"muze\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./packages/muze/src/index.js\");\n","export {default as dsvFormat} from \"./src/dsv\";\nexport {csvParse, csvParseRows, csvFormat, csvFormatRows} from \"./src/csv\";\nexport {tsvParse, tsvParseRows, tsvFormat, tsvFormatRows} from \"./src/tsv\";\n","import dsv from \"./dsv\";\n\nvar csv = dsv(\",\");\n\nexport var csvParse = csv.parse;\nexport var csvParseRows = csv.parseRows;\nexport var csvFormat = csv.format;\nexport var csvFormatRows = csv.formatRows;\n","var EOL = {},\n    EOF = {},\n    QUOTE = 34,\n    NEWLINE = 10,\n    RETURN = 13;\n\nfunction objectConverter(columns) {\n  return new Function(\"d\", \"return {\" + columns.map(function(name, i) {\n    return JSON.stringify(name) + \": d[\" + i + \"]\";\n  }).join(\",\") + \"}\");\n}\n\nfunction customConverter(columns, f) {\n  var object = objectConverter(columns);\n  return function(row, i) {\n    return f(object(row), i, columns);\n  };\n}\n\n// Compute unique columns in order of discovery.\nfunction inferColumns(rows) {\n  var columnSet = Object.create(null),\n      columns = [];\n\n  rows.forEach(function(row) {\n    for (var column in row) {\n      if (!(column in columnSet)) {\n        columns.push(columnSet[column] = column);\n      }\n    }\n  });\n\n  return columns;\n}\n\nexport default function(delimiter) {\n  var reFormat = new RegExp(\"[\\\"\" + delimiter + \"\\n\\r]\"),\n      DELIMITER = delimiter.charCodeAt(0);\n\n  function parse(text, f) {\n    var convert, columns, rows = parseRows(text, function(row, i) {\n      if (convert) return convert(row, i - 1);\n      columns = row, convert = f ? customConverter(row, f) : objectConverter(row);\n    });\n    rows.columns = columns || [];\n    return rows;\n  }\n\n  function parseRows(text, f) {\n    var rows = [], // output rows\n        N = text.length,\n        I = 0, // current character index\n        n = 0, // current line number\n        t, // current token\n        eof = N <= 0, // current token followed by EOF?\n        eol = false; // current token followed by EOL?\n\n    // Strip the trailing newline.\n    if (text.charCodeAt(N - 1) === NEWLINE) --N;\n    if (text.charCodeAt(N - 1) === RETURN) --N;\n\n    function token() {\n      if (eof) return EOF;\n      if (eol) return eol = false, EOL;\n\n      // Unescape quotes.\n      var i, j = I, c;\n      if (text.charCodeAt(j) === QUOTE) {\n        while (I++ < N && text.charCodeAt(I) !== QUOTE || text.charCodeAt(++I) === QUOTE);\n        if ((i = I) >= N) eof = true;\n        else if ((c = text.charCodeAt(I++)) === NEWLINE) eol = true;\n        else if (c === RETURN) { eol = true; if (text.charCodeAt(I) === NEWLINE) ++I; }\n        return text.slice(j + 1, i - 1).replace(/\"\"/g, \"\\\"\");\n      }\n\n      // Find next delimiter or newline.\n      while (I < N) {\n        if ((c = text.charCodeAt(i = I++)) === NEWLINE) eol = true;\n        else if (c === RETURN) { eol = true; if (text.charCodeAt(I) === NEWLINE) ++I; }\n        else if (c !== DELIMITER) continue;\n        return text.slice(j, i);\n      }\n\n      // Return last token before EOF.\n      return eof = true, text.slice(j, N);\n    }\n\n    while ((t = token()) !== EOF) {\n      var row = [];\n      while (t !== EOL && t !== EOF) row.push(t), t = token();\n      if (f && (row = f(row, n++)) == null) continue;\n      rows.push(row);\n    }\n\n    return rows;\n  }\n\n  function format(rows, columns) {\n    if (columns == null) columns = inferColumns(rows);\n    return [columns.map(formatValue).join(delimiter)].concat(rows.map(function(row) {\n      return columns.map(function(column) {\n        return formatValue(row[column]);\n      }).join(delimiter);\n    })).join(\"\\n\");\n  }\n\n  function formatRows(rows) {\n    return rows.map(formatRow).join(\"\\n\");\n  }\n\n  function formatRow(row) {\n    return row.map(formatValue).join(delimiter);\n  }\n\n  function formatValue(text) {\n    return text == null ? \"\"\n        : reFormat.test(text += \"\") ? \"\\\"\" + text.replace(/\"/g, \"\\\"\\\"\") + \"\\\"\"\n        : text;\n  }\n\n  return {\n    parse: parse,\n    parseRows: parseRows,\n    format: format,\n    formatRows: formatRows\n  };\n}\n","import dsv from \"./dsv\";\n\nvar tsv = dsv(\"\\t\");\n\nexport var tsvParse = tsv.parse;\nexport var tsvParseRows = tsv.parseRows;\nexport var tsvFormat = tsv.format;\nexport var tsvFormatRows = tsv.formatRows;\n","/**\n * The event name for data propagation.\n */\nexport const PROPAGATION = 'propagation';\n\n/**\n * The name of the unique row id column in DataModel.\n */\nexport const ROW_ID = '__id__';\n\n/**\n * The enums for operation names performed on DataModel.\n */\nexport const DM_DERIVATIVES = {\n    SELECT: 'select',\n    PROJECT: 'project',\n    GROUPBY: 'group',\n    COMPOSE: 'compose',\n    CAL_VAR: 'calculatedVariable',\n    BIN: 'bin'\n};\n\nexport const JOINS = {\n    CROSS: 'cross',\n    LEFTOUTER: 'leftOuter',\n    RIGHTOUTER: 'rightOuter',\n    NATURAL: 'natural',\n    FULLOUTER: 'fullOuter'\n};\n\nexport const LOGICAL_OPERATORS = {\n    AND: 'and',\n    OR: 'or'\n};\n","import FlatJSON from './flat-json';\nimport DSVArr from './dsv-arr';\nimport DSVStr from './dsv-str';\nimport { isArray, isObject, isString } from '../utils';\n\n/**\n * Parses the input data and detect the format automatically.\n *\n * @param {string|Array} data - The input data.\n * @param {Object} options - An optional config specific to data format.\n * @return {Array.<Object>} Returns an array of headers and column major data.\n */\nfunction Auto (data, options) {\n    let converter;\n\n    if (isString(data)) {\n        converter = DSVStr;\n    } else if (isArray(data) && isArray(data[0])) {\n        converter = DSVArr;\n    } else if (isArray(data) && (data.length === 0 || isObject(data[0]))) {\n        converter = FlatJSON;\n    } else {\n        throw new Error('Couldn\\'t detect the data format');\n    }\n\n    return converter(data, options);\n}\n\nexport default Auto;\n","import { columnMajor } from '../utils';\n\n/**\n * Parses and converts data formatted in DSV array to a manageable internal format.\n *\n * @param {Array.<Array>} arr - A 2D array containing of the DSV data.\n * @param {Object} options - Option to control the behaviour of the parsing.\n * @param {boolean} [options.firstRowHeader=true] - Whether the first row of the dsv data is header or not.\n * @return {Array} Returns an array of headers and column major data.\n * @example\n *\n * // Sample input data:\n * const data = [\n *    [\"a\", \"b\", \"c\"],\n *    [1, 2, 3],\n *    [4, 5, 6],\n *    [7, 8, 9]\n * ];\n */\nfunction DSVArr (arr, options) {\n    const defaultOption = {\n        firstRowHeader: true,\n    };\n    options = Object.assign({}, defaultOption, options);\n\n    let header;\n    const columns = [];\n    const push = columnMajor(columns);\n\n    if (options.firstRowHeader) {\n        // If header present then mutate the array.\n        // Do in-place mutation to save space.\n        header = arr.splice(0, 1)[0];\n    } else {\n        header = [];\n    }\n\n    arr.forEach(field => push(...field));\n\n    return [header, columns];\n}\n\nexport default DSVArr;\n","import { dsvFormat as d3Dsv } from 'd3-dsv';\nimport DSVArr from './dsv-arr';\n\n/**\n * Parses and converts data formatted in DSV string to a manageable internal format.\n *\n * @todo Support to be given for https://tools.ietf.org/html/rfc4180.\n * @todo Sample implementation https://github.com/knrz/CSV.js/.\n *\n * @param {string} str - The input DSV string.\n * @param {Object} options - Option to control the behaviour of the parsing.\n * @param {boolean} [options.firstRowHeader=true] - Whether the first row of the dsv string data is header or not.\n * @param {string} [options.fieldSeparator=\",\"] - The separator of two consecutive field.\n * @return {Array} Returns an array of headers and column major data.\n * @example\n *\n * // Sample input data:\n * const data = `\n * a,b,c\n * 1,2,3\n * 4,5,6\n * 7,8,9\n * `\n */\nfunction DSVStr (str, options) {\n    const defaultOption = {\n        firstRowHeader: true,\n        fieldSeparator: ','\n    };\n    options = Object.assign({}, defaultOption, options);\n\n    const dsv = d3Dsv(options.fieldSeparator);\n    return DSVArr(dsv.parseRows(str), options);\n}\n\nexport default DSVStr;\n","import { columnMajor } from '../utils';\n\n/**\n * Parses and converts data formatted in JSON to a manageable internal format.\n *\n * @param {Array.<Object>} arr - The input data formatted in JSON.\n * @return {Array.<Object>} Returns an array of headers and column major data.\n * @example\n *\n * // Sample input data:\n * const data = [\n *    {\n *      \"a\": 1,\n *      \"b\": 2,\n *      \"c\": 3\n *    },\n *    {\n *      \"a\": 4,\n *      \"b\": 5,\n *      \"c\": 6\n *    },\n *    {\n *      \"a\": 7,\n *      \"b\": 8,\n *      \"c\": 9\n *    }\n * ];\n */\nfunction FlatJSON (arr) {\n    const header = {};\n    let i = 0;\n    let insertionIndex;\n    const columns = [];\n    const push = columnMajor(columns);\n\n    arr.forEach((item) => {\n        const fields = [];\n        for (let key in item) {\n            if (key in header) {\n                insertionIndex = header[key];\n            } else {\n                header[key] = i++;\n                insertionIndex = i - 1;\n            }\n            fields[insertionIndex] = item[key];\n        }\n        push(...fields);\n    });\n\n    return [Object.keys(header), columns];\n}\n\nexport default FlatJSON;\n","export { default as DSVArr } from './dsv-arr';\nexport { default as DSVStr } from './dsv-str';\nexport { default as FlatJSON } from './flat-json';\nexport { default as Auto } from './auto-resolver';\n","/* eslint-disable default-case */\n\nimport { FieldType } from './enums';\nimport {\n    persistDerivation,\n    getRootGroupByModel,\n    propagateToAllDataModels,\n    getRootDataModel,\n    propagateImmutableActions\n} from './helper';\nimport { DM_DERIVATIVES, PROPAGATION } from './constants';\nimport {\n    dataBuilder,\n    rowDiffsetIterator,\n    groupBy\n} from './operator';\nimport { createBinnedFieldData } from './operator/bucket-creator';\nimport Relation from './relation';\nimport reducerStore from './utils/reducer-store';\nimport createFields from './field-creator';\n\n/**\n * A model which has been built on the concept of relational algebra.\n *\n * @extends Relation\n */\nclass DataModel extends Relation {\n\n    /**\n     * Creates a new DataModel instance.\n     *\n     * @param {Array} args - The arguments which is passed directly to the parent class.\n     */\n    constructor (...args) {\n        super(...args);\n\n        this._onPropagation = [];\n        this._sortingDetails = [];\n    }\n\n    static get Reducers () {\n        return reducerStore;\n    }\n\n    /**\n     * Returns the data after operation in the format of\n     * multidimensional array according to the given option value.\n     *\n     * @public\n     * @param {Object} [options] - Define how the data need to be returned.\n     * @param {Object} [options.order='row'] - Define the order of the data: row or column.\n     * @param {Object} [options.formatter=null] - An object map containing field specific formatter function.\n     * @param {Object} [options.withUid=false] - Whether the data uids will be included or not.\n     * @param {Object} [options.sort=[]] - The sorting details to sort the data.\n     * @return {Array} Returns a multidimensional array of the data.\n     * @example\n     *\n     * // Return data with formatted date value.\n     * const options = {\n     *  order: 'row',\n     *  formatter: {\n     *      birthday: (val, rowId, schema) => {\n     *          return yourCustomFormatter(val, \"%Y-%m-%d\");\n     *      }\n     *  }\n     * }\n     *\n     *  const dm = new DataModel(data, schema);\n     *  const dataFormatted = dm.getData(options);\n     */\n    getData (options) {\n        const defOptions = {\n            order: 'row',\n            formatter: null,\n            withUid: false,\n            getAllFields: false,\n            sort: []\n        };\n        options = Object.assign({}, defOptions, options);\n        const fields = this.getPartialFieldspace().fields;\n\n        const dataGenerated = dataBuilder.call(\n            this,\n            this.getPartialFieldspace().fields,\n            this._rowDiffset,\n            options.getAllFields ? fields.map(d => d.name).join() : this._colIdentifier,\n            options.sort,\n            {\n                columnWise: options.order === 'column',\n                addUid: !!options.withUid\n            }\n        );\n\n        if (!options.formatter) {\n            return dataGenerated;\n        }\n\n        const { formatter } = options;\n        const { data, schema, uids } = dataGenerated;\n        const fieldNames = schema.map((e => e.name));\n        const fmtFieldNames = Object.keys(formatter);\n        const fmtFieldIdx = fmtFieldNames.reduce((acc, next) => {\n            const idx = fieldNames.indexOf(next);\n            if (idx !== -1) {\n                acc.push([idx, formatter[next]]);\n            }\n            return acc;\n        }, []);\n\n        if (options.order === 'column') {\n            fmtFieldIdx.forEach((elem) => {\n                const fIdx = elem[0];\n                const fmtFn = elem[1];\n\n                data[fIdx].forEach((datum, datumIdx) => {\n                    data[fIdx][datumIdx] = fmtFn.call(\n                        undefined,\n                        datum,\n                        uids[datumIdx],\n                        schema[fIdx]\n                    );\n                });\n            });\n        } else {\n            data.forEach((datum, datumIdx) => {\n                fmtFieldIdx.forEach((elem) => {\n                    const fIdx = elem[0];\n                    const fmtFn = elem[1];\n\n                    datum[fIdx] = fmtFn.call(\n                        undefined,\n                        datum[fIdx],\n                        uids[datumIdx],\n                        schema[fIdx]\n                    );\n                });\n            });\n        }\n\n        return dataGenerated;\n    }\n\n    /**\n     * Performs group-by operation on the current DataModel instance according to\n     * the fields and reducers provided.\n     * The fields can be skipped in that case all field will be taken into consideration.\n     * The reducer can also be given, If nothing is provided sum will be the default reducer.\n     *\n     * @public\n     * @param {Array} fieldsArr - An array containing the name of the columns.\n     * @param {Object | Function | string} [reducers={}] - The reducer function.\n     * @param {string} [saveChild=true] - Whether the child to save  or not.\n     * @param {DataModel} [existingDataModel] - An optional existing DataModel instance.\n     * @return {DataModel} Returns the new DataModel instance after operation.\n     */\n    groupBy (fieldsArr, reducers = {}, config = { saveChild: true }) {\n        const groupByString = `${fieldsArr.join()}`;\n        let params = [this, fieldsArr, reducers];\n        const newDataModel = groupBy(...params);\n\n        if (config.saveChild) {\n            this._children.push(newDataModel);\n            persistDerivation(\n                newDataModel,\n                DM_DERIVATIVES.GROUPBY,\n                { fieldsArr, groupByString, defaultReducer: reducerStore.defaultReducer() },\n                reducers\n            );\n        }\n\n        newDataModel._parent = this;\n        return newDataModel;\n    }\n\n    /**\n     * It helps to define the sorting order of the returned data.\n     * This is similar to the orderBy functionality of the database\n     * you have to pass the array of array [['columnName', 'sortType(asc|desc)']] and the\n     * function getData will give the data accordingly.\n     *\n     * @public\n     * @param {Array} sortingDetails - An array containing the sorting details with column names;\n     * @return {DataModel} Returns a new sorted instance of DataModel.\n     */\n    sort (sortingDetails) {\n        const rawData = this.getData({\n            order: 'row',\n            sort: sortingDetails\n        });\n        const header = rawData.schema.map(field => field.name);\n        const dataInCSVArr = [header].concat(rawData.data);\n\n        const sortedDm = new this.constructor(dataInCSVArr, rawData.schema, null, { dataFormat: 'DSVArr' });\n        sortedDm._sortingDetails = sortingDetails;\n        return sortedDm;\n    }\n\n    addField (field) {\n        const fieldName = field.fieldName();\n        this._colIdentifier += `,${fieldName}`;\n        const partialFieldspace = this._partialFieldspace;\n\n        if (!partialFieldspace.fieldsObj()[field.fieldName()]) {\n            partialFieldspace.fields.push(field);\n        } else {\n            const fieldIndex = partialFieldspace.fields.findIndex(fieldinst => fieldinst.name === fieldName);\n            fieldIndex >= 0 && (partialFieldspace.fields[fieldIndex] = field);\n        }\n\n        this.__calculateFieldspace().calculateFieldsConfig();\n        return this;\n    }\n\n    /**\n     *\n     * @param {Object} varConfig :{\n     *  name: 'new-var',\n     *  type: 'measure | dimension',\n     *  subype: 'temporal | ...',\n     *  all the variable what schema gets\n     *  }}\n     *  @param {Array} paramConfig : ['dep-var-1', 'dep-var-2', 'dep-var-3', ([var1, var2, var3], rowIndex, dm) => {}]\n     * @param {Object} config : { saveChild : true | false , removeDependentDimensions : true|false}\n     */\n    calculateVariable (schema, dependency, config = { saveChild: true, replaceVar: false }) {\n        const fieldsConfig = this.getFieldsConfig();\n        const depVars = dependency.slice(0, dependency.length - 1);\n        const retrieveFn = dependency[dependency.length - 1];\n\n        if (fieldsConfig[schema.name] && !config.replaceVar) {\n            throw new Error(`${schema.name} field already exists in model.`);\n        }\n        const depFieldIndices = depVars.map((field) => {\n            const fieldSpec = fieldsConfig[field];\n            if (!fieldSpec) {\n                // @todo dont throw error here, use warning in production mode\n                throw new Error(`${field} is not a valid column name.`);\n            }\n            return fieldSpec.index;\n        });\n\n        let clone = this.clone();\n\n        const fs = clone.getFieldspace().fields;\n        const suppliedFields = depFieldIndices.map(idx => fs[idx]);\n\n        const computedValues = [];\n        rowDiffsetIterator(clone._rowDiffset, (i) => {\n            const fieldsData = suppliedFields.map(field => field.data[i]);\n            computedValues[i] = retrieveFn(...fieldsData, i, fs);\n        });\n        const [field] = createFields([computedValues], [schema], [schema.name]);\n        clone.addField(field);\n\n        if (config.saveChild) {\n            persistDerivation(clone, DM_DERIVATIVES.CAL_VAR, { config: schema, fields: depVars }, retrieveFn);\n        }\n\n        return clone;\n    }\n\n    /**\n     * Propagates changes across all the connected DataModel instances.\n     *\n     * @public\n     * @param {Array} identifiers - A list of identifiers that were interacted with.\n     * @param {Object} payload - The interaction specific details.\n     *\n     * @return {DataModel} DataModel instance.\n     */\n    propagate (identifiers, payload, config = {}) {\n        const isMutableAction = config.isMutableAction;\n        const propagationSourceId = config.sourceId;\n        const rootModel = getRootDataModel(this);\n        const propagationNameSpace = rootModel._propagationNameSpace;\n        const rootGroupByModel = getRootGroupByModel(this);\n        const rootModels = {\n            groupByModel: rootGroupByModel,\n            model: rootModel\n        };\n\n        propagateToAllDataModels(identifiers, rootModels, {\n            propagationNameSpace,\n            payload,\n            propagationSourceId\n        });\n\n        if (isMutableAction) {\n            propagateImmutableActions(propagationNameSpace, rootModels, propagationSourceId);\n        }\n        return this;\n    }\n\n    addToPropNamespace (sourceId, config = {}) {\n        let sourceNamespace;\n        const actionName = config.actionName;\n        const payload = config.payload;\n        const isMutableAction = config.isMutableAction;\n        const rootModel = getRootDataModel(this);\n        const propagationNameSpace = rootModel._propagationNameSpace;\n        const criteria = config.criteria;\n\n        if (isMutableAction) {\n            !propagationNameSpace.mutableActions[sourceId] && (propagationNameSpace.mutableActions[sourceId] = {});\n            sourceNamespace = propagationNameSpace.mutableActions[sourceId];\n        } else {\n            !propagationNameSpace.immutableActions[sourceId] && (propagationNameSpace.immutableActions[sourceId] = {});\n            sourceNamespace = propagationNameSpace.immutableActions[sourceId];\n        }\n\n        if (criteria === null) {\n            delete sourceNamespace[actionName];\n        } else {\n            sourceNamespace[actionName] = {\n                criteria,\n                payload\n            };\n        }\n\n        return this;\n    }\n\n    /**\n     * Associates a callback with an event name.\n     *\n     * @public\n     * @param {string} eventName - The name of the event.\n     * @param {Function} callback - The callback to invoke.\n     * @return {DataModel} Returns this current DataModel instance itself.\n     */\n    on (eventName, callback) {\n        switch (eventName) {\n        case PROPAGATION:\n            this._onPropagation.push(callback);\n            break;\n        }\n        return this;\n    }\n\n    /**\n     * Unsubscribes the callbacks for the provided event name.\n     *\n     * @public\n     * @param {string} eventName - The name of the event to unsubscribe.\n     * @return {DataModel} Returns the current DataModel instance itself.\n     */\n    unsubscribe (eventName) {\n        switch (eventName) {\n        case PROPAGATION:\n            this._onPropagation = [];\n            break;\n\n        }\n        return this;\n    }\n\n    /**\n     * This method is used to invoke the method associated with\n     * propagation.\n     *\n     * @todo Fix whether this method would be public or not.\n     *\n     * @private\n     * @param {Object} payload The interaction payload.\n     * @param {DataModel} identifiers The propagated DataModel.\n     * @memberof DataModel\n     */\n    handlePropagation (payload) {\n        let propListeners = this._onPropagation;\n        propListeners.forEach(fn => fn.call(this, payload));\n    }\n\n    /**\n     @param {String} measureName : name of measure which will be used to create bin\n     @param {Object} config : bucketObj : {} || binSize : number || noOfBins : number || binFieldName : string\n     @param {Function | FunctionName} reducer : binning reducer\n     */\n    bin (measureName, config = { }) {\n        const clone = this.clone();\n        const binFieldName = config.name || `${measureName}_binned`;\n        if (this.getFieldsConfig()[binFieldName] || !this.getFieldsConfig()[measureName]) {\n            throw new Error(`Field ${measureName} already exists.`);\n        }\n        const field = this._partialFieldspace.fields.find(currfield => currfield.name === measureName);\n        const dataSet = createBinnedFieldData(field, this._rowDiffset, config);\n        const binField = createFields([dataSet.data], [\n            {\n                name: binFieldName,\n                type: FieldType.MEASURE,\n                subtype: 'discrete', // @todo : DimensionSubtype\n                bins: {\n                    range: dataSet.range,\n                    mid: dataSet.mid\n                }\n            }], [binFieldName])[0];\n        clone.addField(binField);\n        persistDerivation(clone, DM_DERIVATIVES.BIN, { measureName, config, binFieldName }, null);\n        return clone;\n    }\n}\n\nexport default DataModel;\n","import { DataFormat } from './enums';\n\nexport default {\n    dataFormat: DataFormat.AUTO\n};\n","/**\n * DataFormat Enum defines the format of the input data.\n * Based on the format of the data the respective adapter is loaded.\n *\n * @readonly\n * @enum {string}\n */\nconst DataFormat = {\n    FLAT_JSON: 'FlatJSON',\n    DSV_STR: 'DSVStr',\n    DSV_ARR: 'DSVArr',\n    AUTO: 'Auto'\n};\n\nexport default DataFormat;\n","/**\n * DimensionSubtype enum defines the sub types of the Dimensional Field.\n *\n * @readonly\n * @enum {string}\n */\nconst DimensionSubtype = {\n    CATEGORICAL: 'categorical',\n    TEMPORAL: 'temporal',\n    GEO: 'geo'\n};\n\nexport default DimensionSubtype;\n","/**\n * FieldType enum defines the high level field based on which visuals are controlled.\n * Measure in a high level is numeric field and Dimension in a high level is string field.\n *\n * @readonly\n * @enum {string}\n */\nconst FieldType = {\n    MEASURE: 'measure',\n    DIMENSION: 'dimension'\n};\n\nexport default FieldType;\n","/**\n * Filtering mode enum defines the filering modes of DataModel.\n *\n * @readonly\n * @enum {string}\n */\nconst FilteringMode = {\n    NORMAL: 'normal',\n    INVERSE: 'inverse',\n    ALL: 'all'\n};\n\nexport default FilteringMode;\n","export { default as DataFormat } from './data-format';\nexport { default as DimensionSubtype } from './dimension-subtype';\nexport { default as MeasureSubtype } from './measure-subtype';\nexport { default as FieldType } from './field-type';\nexport { default as FilteringMode } from './filtering-mode';\n","/**\n * MeasureSubtype enum defines the sub types of the Dimensional Field.\n *\n * @readonly\n * @enum {string}\n */\nconst MeasureSubtype = {\n    DISCRETE: 'discrete'\n};\n\nexport default MeasureSubtype;\n","import { FieldType, DimensionSubtype } from './enums';\nimport { Measure, Categorical, DateTime, DiscreteMeasure } from './fields';\n\n/**\n * Creates a field instance according to the provided data and schema.\n *\n * @todo Add logic for GEO dimension subtype.\n *\n * @param {Array} data - The field data array.\n * @param {Object} schema - The field schema object.\n * @return {Field} Returns the newly created field instance.\n */\nfunction createUnitField (data, schema) {\n    switch (schema.type) {\n    case FieldType.MEASURE:\n        switch (schema.subtype) {\n        case 'discrete':\n            return new DiscreteMeasure(schema.name, data, schema, schema.bins);\n        default:\n            return new Measure(schema.name, data, schema);\n        }\n    case FieldType.DIMENSION:\n    default:\n        switch (schema.subtype) {\n        case DimensionSubtype.CATEGORICAL:\n            return new Categorical(schema.name, data, schema);\n        case DimensionSubtype.TEMPORAL:\n            return new DateTime(schema.name, data, schema);\n        case DimensionSubtype.GEO:\n            return new Categorical(schema.name, data, schema);\n        default:\n            return new Categorical(schema.name, data, schema);\n        }\n    }\n}\n\n/**\n * Creates the field instances with input data and schema.\n *\n * @param {Array} dataColumn - The data array for fields.\n * @param {Array} schema - The schema array for fields.\n * @param {Array} headers - The array of header names.\n * @return {Array.<Field>} Returns an array of newly created field instances.\n */\nfunction createFields (dataColumn, schema, headers) {\n    const headersObj = {};\n\n    if (!(headers && headers.length)) {\n        headers = schema.map(item => item.name);\n    }\n\n    headers.forEach((header, i) => {\n        headersObj[header] = i;\n    });\n\n    return schema.map(item => createUnitField(dataColumn[headersObj[item.name]], item));\n}\n\nexport default createFields;\n","import { FieldType } from './enums';\nimport { getUniqueId } from './utils';\n\nconst fieldStore = {\n    data: {},\n\n    createNamespace (fieldArr, name) {\n        const dataId = name || getUniqueId();\n        this.data[dataId] = {\n            name: dataId,\n            fields: fieldArr,\n            fieldsObj () {\n                const retObj = {};\n                this.fields.forEach((field) => {\n                    retObj[field.name] = field;\n                });\n                return retObj;\n            },\n            getMeasure () {\n                const retObj = {};\n                this.fields.forEach((field) => {\n                    if (field.schema.type === FieldType.MEASURE) {\n                        retObj[field.name] = field;\n                    }\n                });\n                return retObj;\n            },\n            getDimension () {\n                const retObj = {};\n                this.fields.forEach((field) => {\n                    if (field.schema.type === FieldType.DIMENSION) {\n                        retObj[field.name] = field;\n                    }\n                });\n                return retObj;\n            },\n        };\n        return this.data[dataId];\n    },\n};\n\nexport default fieldStore;\n","import { DimensionSubtype } from '../enums';\nimport Dimension from './dimension';\n\n/**\n * Represents categorical field subtype.\n *\n * @extends Dimension\n */\nclass Categorical extends Dimension {\n\n    /**\n     * Creates new Categorical field instance.\n     *\n     * @param {string} name - The name of the field.\n     * @param {Array} data - An array containing the field data.\n     * @param {Object} schema - The schema for the field.\n     */\n    constructor(name, data, schema) {\n        super(name, data, schema);\n        this.subtype = DimensionSubtype.CATEGORICAL;\n    }\n\n    /**\n     * Getter for subType value of the field.\n     *\n    * @return {string} Returns subType of the field.\n    */\n    subType() {\n        return this.subtype;\n    }\n}\n\nexport default Categorical;\n","import { DimensionSubtype } from '../enums';\nimport Dimension from './dimension';\nimport { DateTimeFormatter, getMinDiff } from '../utils';\n\n\n/**\n * Represents datetime field subtype.\n *\n * @extends Dimension\n */\nclass DateTime extends Dimension {\n\n    /**\n     * Creates new DateTime field instance.\n     *\n     * @param {string} name - The name of the field.\n     * @param {Array} data - An array containing the field data.\n     * @param {Object} schema - The schema for the field.\n     */\n    constructor(name, data, schema) {\n        super(name, data, schema);\n        this.subtype = DimensionSubtype.TEMPORAL;\n        this.minDiff = getMinDiff(this.data);\n    }\n\n    /**\n     * Getter for subType value of the field.\n     *\n    * @return {string} Returns subType of the field.\n    */\n    subType() {\n        return this.subtype;\n    }\n\n    getMinDiff () {\n        return this.minDiff;\n    }\n    /**\n    * A hook which is called for every entry(cell) of the column.\n    *\n    * @param {*} val - The current entry present in the column while iteration.\n    * @return {number} Returns the total timestamps in millisecond.\n    */\n    parse(val) {\n        if (this.schema.format) {\n            this._dtf = this._dtf || new DateTimeFormatter(this.schema.format);\n            return this._dtf.getNativeDate(val).getTime();\n        }\n\n        // If format is not present then it means the value is such that the it could be directly passed to date\n        // constructor\n        return +new Date(val);\n    }\n}\n\nexport default DateTime;\n","import PartialField from './partial-field';\nimport { uniqueValues } from '../utils';\n\n/**\n * Represents dimension field type.\n *\n * @extends PartialField\n */\nclass Dimension extends PartialField {\n\n    /**\n     * Returns the domain for the dimension field.\n     *\n     * @override\n     * @return {Array} Returns the unique values from dimension values.\n     */\n    domain() {\n        return uniqueValues(this.data);\n    }\n\n    /**\n     * A hook which is called for every entry(cell) of the column.\n     *\n     * @todo Fix the null data e.g. undefined or null etc.\n     *\n     * @param {*} val - The current entry present in the column while iteration.\n     * @return {string} Returns the string representation of the value.\n     */\n    parse (val) {\n        val = (val === undefined || val === null) ? '' : val.toString();\n        return val.trim();\n    }\n\n    /**\n     * Saves the cardinality of the dimensional values after parsing the data.\n     *\n     * @param {string} val - The parsed value.\n     * @return {string} Returns the input val.\n     */\n    parsed (val) {\n        this._unique = this._unique || {};\n        const unique = this._unique;\n        if (val in unique) {\n            unique[val]++;\n        } else {\n            unique[val] = 1;\n        }\n        return val;\n    }\n}\n\nexport default Dimension;\n","import Measure from './measure';\n\n/**\n * Represents categorical field subtype.\n *\n * @extends Measure\n */\nclass DiscreteMeasure extends Measure {\n    constructor(name, data, schema, bin) {\n        super(name, data, schema);\n        this.bin = bin;\n        this.subtype = 'discrete';\n    }\n\n    /**\n     * A hook which is called for every entry(cell) of the column.\n     *\n     * @todo Fix the null data e.g. undefined or null etc.\n     *\n     * @param {*} val - The current entry present in the column while iteration.\n     * @return {string} Returns the string representation of the value.\n     */\n    parse (val) {\n        val = (val === undefined || val === null) ? '' : val.toString();\n        return val.trim();\n    }\n\n    bins() {\n        return this.bin;\n    }\n    subType() {\n        return this.subtype;\n    }\n}\n\nexport default DiscreteMeasure;\n","import { DimensionSubtype } from '../enums';\nimport { rowDiffsetIterator } from '../operator/row-diffset-iterator'\n;\n\nexport default class Field {\n    constructor(partialFeild, rowDiff) {\n        this._ref = partialFeild;\n        this._rowDiff = rowDiff;\n    }\n\n    sanitize () {\n        return this._ref.sanitize();\n    }\n\n    parsed (val) {\n        return this._ref.parsed(val);\n    }\n\n    domain() {\n        let data = [];\n        let domain = null;\n        data = this.getData();\n        if (this._ref.fieldType === 'dimension' && this._ref.subType() !== DimensionSubtype.TEMPORAL) {\n            domain = [...new Set(data)];\n        } else {\n            let minD = Math.min.apply(null, data);\n            let maxD = Math.max.apply(null, data);\n            domain = [minD, maxD];\n        }\n\n        return domain;\n    }\n\n    parse (val) {\n        return this._ref.parse(val);\n    }\n\n\n    clone(datas) {\n        return this._ref.clone(datas);\n    }\n\n    fieldName() {\n        return this._ref.fieldName();\n    }\n\n    type() {\n        return this._ref.type();\n    }\n\n    description() {\n        return this._ref.description();\n    }\n\n    get name() {\n        return this._ref.name;\n    }\n\n    // set name(name) {\n    //     this._ref.name = name;\n    // }\n\n    get schema() {\n        return this._ref.schema;\n    }\n\n    // set schema(schema) {\n    //     this._ref.schema = schema;\n    // }\n\n    get data() {\n        return this._ref.data;\n    }\n\n    // set data(schema) {\n    //     throw new Error('Not yet implemented!');\n    // }\n\n    subType() {\n        return this._ref.subType();\n    }\n\n    getMinDiff () {\n        return this._ref.getMinDiff();\n    }\n\n    /**\n     * Getter for unit value of the field.\n     *\n     * @return {string} Returns unit of the field.\n     */\n    unit() {\n        return this._ref.unit();\n    }\n\n    /**\n     * Getter for scale value of the field.\n     *\n     * @return {string} Returns scale of the field.\n     */\n    scale() {\n        return this._ref.scale();\n    }\n\n    /**\n     * Getter for aggregation function of the field.\n     *\n     * @return {Function} Returns aggregation function of the field.\n     */\n    defAggFn() {\n        return this._ref.defAggFn();\n    }\n\n    getData() {\n        let data = [];\n        rowDiffsetIterator(this._rowDiff, (i) => {\n            data.push(this._ref.data[i]);\n        });\n        return data;\n    }\n\n    bins() {\n        return this._ref.bins();\n    }\n}\n","export { default as Measure } from './measure';\nexport { default as Dimension } from './dimension';\nexport { default as Categorical } from './categorical';\nexport { default as DateTime } from './datetime';\nexport { default as DiscreteMeasure } from './discreteMeasure';\n","import PartialField from './partial-field';\nimport { generateMeasureDomain, formatNumber } from '../utils';\nimport reducerStore from '../utils/reducer-store';\n\n/**\n * Represents measure field type.\n *\n * @extends PartialField\n */\nclass Measure extends PartialField {\n\n    /**\n     * Creates new Measure field instance.\n     *\n     * @param {string} name - The name of the field.\n     * @param {Array} data - An array containing the field data.\n     * @param {Object} schema - The schema for the field.\n     */\n    constructor(name, data, schema) {\n        super(name, data, schema);\n        this.fieldUnit = schema.unit;\n        this.fieldScale = schema.scale;\n        this.fieldDefAggFn = schema.defAggFn || reducerStore.defaultReducer().name;\n        this.fieldNumberformat = schema.numberFormat instanceof Function ? schema.numberFormat : formatNumber;\n    }\n\n    /**\n     * Returns the domain for the measure field.\n     *\n     * @override\n     * @return {Array} Returns min and max values from measure values.\n     */\n    domain() {\n        return generateMeasureDomain(this.data);\n    }\n\n    /**\n     * A hook which is called for every entry(cell) of the column.\n     *\n     * @todo Fix the null data e.g. NaN value.\n     *\n     * @param {*} val - The current entry present in the column while iteration.\n     * @return {number | null} Returns the parsed number value of content of cell or null.\n     */\n    parse (val) {\n        val = parseFloat(val, 10);\n        return Number.isNaN(val) ? null : val;\n    }\n\n    /**\n     * Getter for unit value of the field.\n     *\n     * @return {string} Returns unit of the field.\n     */\n    unit() {\n        return this.fieldUnit;\n    }\n\n    /**\n     * Getter for scale value of the field.\n     *\n     * @return {string} Returns scale of the field.\n     */\n    scale() {\n        return this.fieldScale;\n    }\n\n    /**\n     * Getter for number format value of the field.\n     *\n     * @return {string} Returns number format of the field.\n     */\n    numberFormat() {\n        const formatter = this.fieldNumberformat;\n        return val => formatter(val);\n    }\n\n    /**\n     * Getter for aggregation function of the field.\n     *\n     * @return {Function} Returns aggregation function of the field.\n     */\n    defAggFn() {\n        return this.fieldDefAggFn;\n    }\n}\n\nexport default Measure;\n","import { extend2 } from '../utils';\n\n /**\n  * The base class for every field type.\n  * It provides some common functionalities.\n  */\nclass PartialField {\n\n    /**\n     * Sets basic setups to each Field instance.\n     *\n     * @param {string} name - The name or identifier of the field.\n     * @param {Array} data - The data array.\n     * @param {Object} schema - The schema of the data type.\n     */\n    constructor(name, data, schema) {\n        this.name = name;\n        this.data = data || [];\n        this.schema = schema;\n        this.fieldDescription = schema.description;\n        this.fieldType = schema.type;\n        this.sanitize();\n    }\n\n    /**\n     * Sanitizes the field data.\n     *\n     * @return {PartialField} - Returns the instance of the current context for chaining.\n     */\n    sanitize () {\n        this.data = this.data.map(d => this.parsed(this.parse(d)));\n        return this;\n    }\n\n    /**\n     * The post parsing hook for field instance.\n     *\n     * @param {*} val - The value to be parsed.\n     * @return {*} Returns the parsed value.\n     */\n    parsed (val) {\n        return val;\n    }\n\n    /**\n     * Generates and returns the domain for the field.\n     *\n     * @abstract\n     */\n    domain() {\n        throw new Error('Not yet implemented!');\n    }\n\n    subType() {\n        return null;\n    }\n\n\n    /**\n     * Parse the input value before using.\n     *\n     * @abstract\n     */\n    parse () {\n        throw new Error('Not yet implemented!');\n    }\n\n    /**\n     * Creates brand new copy of current field instance. To avoid optimization issue\n     * pass the required data otherwise current data would be copied which might\n     * be expensive.\n     *\n     * @param {Array} data - The input data, if provided current data will not be cloned.\n     * @return {PartialField} Returns the cloned field instance.\n     */\n    clone(data) {\n        data = data || extend2([], this.data);\n        const schema = extend2({}, this.schema);\n        // Here call the constructor to create an instance of\n        // the current field class type e.g. Measure, Dimension etc.\n        return new this.constructor(this.name, data, schema);\n    }\n\n    /**\n     * @return {string} Name of the field\n     */\n    fieldName() {\n        return this.name;\n    }\n\n     /**\n     * @return {string} Type of the field\n     */\n    type() {\n        return this.fieldType;\n    }\n\n    /**\n     * @return {description} Name of the field\n     */\n    description() {\n        return this.fieldDescription;\n    }\n}\n\nexport default PartialField;\n","import { FieldType, FilteringMode } from './enums';\nimport Field from './fields/field';\nimport fieldStore from './field-store';\nimport Value from './value';\nimport {\n    rowDiffsetIterator,\n    groupByIterator,\n    projectIterator,\n    selectIterator,\n    calculatedVariableIterator\n} from './operator';\nimport { DM_DERIVATIVES, LOGICAL_OPERATORS } from './constants';\nimport createFields from './field-creator';\nimport defaultConfig from './default-config';\nimport * as converter from './converter';\n\n/**\n * Prepares the selection data.\n */\nfunction prepareSelectionData (fields, i) {\n    const resp = {};\n    for (let field of fields) {\n        resp[field.name] = new Value(field.data[i], field);\n    }\n    return resp;\n}\n\nexport const updateFields = ([rowDiffset, colIdentifier], partialFieldspace, fieldStoreName) => {\n    let collID = colIdentifier.length ? colIdentifier.split(',') : [];\n    let partialFieldMap = partialFieldspace.fieldsObj();\n    let newFields = collID.map(coll => new Field(partialFieldMap[coll], rowDiffset));\n    return fieldStore.createNamespace(newFields, fieldStoreName);\n};\n\nexport const persistDerivation = (model, operation, config = {}, criteriaFn) => {\n    let derivative;\n    if (operation !== DM_DERIVATIVES.COMPOSE) {\n        derivative = {\n            op: operation,\n            meta: config,\n            criteria: criteriaFn\n        };\n        model._derivation.push(derivative);\n    }\n    else {\n        derivative = [...criteriaFn];\n        model._derivation.length = 0;\n        model._derivation.push(...derivative);\n    }\n};\n\nexport const selectHelper = (rowDiffset, fields, selectFn, config) => {\n    const newRowDiffSet = [];\n    let lastInsertedValue = -1;\n    let { mode } = config;\n    let li;\n    let checker = index => selectFn(prepareSelectionData(fields, index), index);\n    if (mode === FilteringMode.INVERSE) {\n        checker = index => !selectFn(prepareSelectionData(fields, index));\n    }\n    rowDiffsetIterator(rowDiffset, (i) => {\n        if (checker(i)) {\n            if (lastInsertedValue !== -1 && i === (lastInsertedValue + 1)) {\n                li = newRowDiffSet.length - 1;\n                newRowDiffSet[li] = `${newRowDiffSet[li].split('-')[0]}-${i}`;\n            } else {\n                newRowDiffSet.push(`${i}`);\n            }\n            lastInsertedValue = i;\n        }\n    });\n    return newRowDiffSet.join(',');\n};\n\nexport const filterPropagationModel = (model, propModels, config = {}) => {\n    const operation = config.operation || LOGICAL_OPERATORS.AND;\n    const filterByMeasure = config.filterByMeasure || false;\n    let fns = [];\n    if (propModels === null) {\n        fns = [() => false];\n    } else {\n        fns = propModels.map(propModel => ((dataModel) => {\n            const dataObj = dataModel.getData();\n            const schema = dataObj.schema;\n            const fieldsConfig = dataModel.getFieldsConfig();\n            const data = dataObj.data;\n            return (fields) => {\n                const include = !data.length ? false : data.some(row => schema.every((propField) => {\n                    if (!(propField.name in fields)) {\n                        return true;\n                    }\n                    if (!filterByMeasure && propField.type !== FieldType.DIMENSION) {\n                        return true;\n                    }\n                    const idx = fieldsConfig[propField.name].index;\n                    return row[idx] === fields[propField.name].valueOf();\n                }));\n                return include;\n            };\n        })(propModel));\n    }\n\n    let filteredModel;\n    if (operation === LOGICAL_OPERATORS.AND) {\n        const clonedModel = model.clone(false, false);\n        filteredModel = clonedModel.select(fields => fns.every(fn => fn(fields)), {\n            saveChild: false,\n            mode: FilteringMode.ALL\n        });\n    } else {\n        filteredModel = model.clone(false, false).select(fields => fns.some(fn => fn(fields)), {\n            mode: FilteringMode.ALL,\n            saveChild: false\n        });\n    }\n\n    return filteredModel;\n};\n\nexport const cloneWithSelect = (sourceDm, selectFn, selectConfig, cloneConfig) => {\n    const cloned = sourceDm.clone(cloneConfig.saveChild);\n    const rowDiffset = selectHelper(\n        cloned._rowDiffset,\n        cloned.getPartialFieldspace().fields,\n        selectFn,\n        selectConfig\n    );\n    cloned._rowDiffset = rowDiffset;\n    cloned.__calculateFieldspace().calculateFieldsConfig();\n    // Store reference to child model and selector function\n    if (cloneConfig.saveChild) {\n        persistDerivation(cloned, DM_DERIVATIVES.SELECT, { config: selectConfig }, selectFn);\n    }\n\n    return cloned;\n};\n\nexport const cloneWithProject = (sourceDm, projField, config, allFields) => {\n    const cloned = sourceDm.clone(config.saveChild);\n    let projectionSet = projField;\n    if (config.mode === FilteringMode.INVERSE) {\n        projectionSet = allFields.filter(fieldName => projField.indexOf(fieldName) === -1);\n    }\n    // cloned._colIdentifier = sourceDm._colIdentifier.split(',')\n    //                         .filter(coll => projectionSet.indexOf(coll) !== -1).join();\n    cloned._colIdentifier = projectionSet.join(',');\n    cloned.__calculateFieldspace().calculateFieldsConfig();\n    // Store reference to child model and projection fields\n    if (config.saveChild) {\n        persistDerivation(\n            cloned,\n            DM_DERIVATIVES.PROJECT,\n            { projField, config, actualProjField: projectionSet },\n            null\n        );\n    }\n\n    return cloned;\n};\n\nexport const updateData = (relation, data, schema, options) => {\n    options = Object.assign(Object.assign({}, defaultConfig), options);\n    const converterFn = converter[options.dataFormat];\n\n    if (!(converterFn && typeof converterFn === 'function')) {\n        throw new Error(`No converter function found for ${options.dataFormat} format`);\n    }\n\n    const [header, formattedData] = converterFn(data, options);\n    const fieldArr = createFields(formattedData, schema, header);\n\n    // This will create a new fieldStore with the fields\n    const nameSpace = fieldStore.createNamespace(fieldArr, options.name);\n    relation._partialFieldspace = nameSpace;\n    // If data is provided create the default colIdentifier and rowDiffset\n    relation._rowDiffset = formattedData.length && formattedData[0].length ? `0-${formattedData[0].length - 1}` : '';\n    relation._colIdentifier = (schema.map(_ => _.name)).join();\n    return relation;\n};\n\nexport const fieldInSchema = (schema, field) => {\n    let i = 0;\n\n    for (; i < schema.length; ++i) {\n        if (field === schema[i].name) {\n            return {\n                type: schema[i].subtype || schema[i].type,\n                index: i\n            };\n        }\n    }\n    return null;\n};\n\nexport const propagateIdentifiers = (dataModel, propModel, config = {}, nonTraversingModel, grouped) => {\n    // function to propagate to target the DataModel instance.\n    const forwardPropagation = (targetDM, propagationData, hasGrouped) => {\n        propagateIdentifiers(targetDM, propagationData, config, nonTraversingModel, hasGrouped);\n    };\n\n    dataModel !== nonTraversingModel && dataModel.handlePropagation({\n        payload: config.payload,\n        data: propModel,\n        sourceIdentifiers: config.sourceIdentifiers,\n        sourceId: config.propagationSourceId,\n        groupedPropModel: !!grouped\n    });\n\n    // propagate to children created by SELECT operation\n    selectIterator(dataModel, (targetDM, criteria) => {\n        if (targetDM !== nonTraversingModel) {\n            const selectionModel = propModel[0].select(criteria, {\n                saveChild: false\n            });\n            const rejectionModel = propModel[1].select(criteria, {\n                saveChild: false\n            });\n\n            forwardPropagation(targetDM, [selectionModel, rejectionModel], grouped);\n        }\n    });\n    // propagate to children created by PROJECT operation\n    projectIterator(dataModel, (targetDM, projField) => {\n        if (targetDM !== nonTraversingModel) {\n            const projModel = propModel[0].project(projField, {\n                saveChild: false\n            });\n            const rejectionProjModel = propModel[1].project(projField, {\n                saveChild: false\n            });\n\n            forwardPropagation(targetDM, [projModel, rejectionProjModel], grouped);\n        }\n    });\n\n    // propagate to children created by groupBy operation\n    groupByIterator(dataModel, (targetDM, conf) => {\n        if (targetDM !== nonTraversingModel) {\n            const {\n                    reducer,\n                    groupByString\n                } = conf;\n                // group the filtered model based on groupBy string of target\n            const selectionGroupedModel = propModel[0].groupBy(groupByString.split(','), reducer, {\n                saveChild: false\n            });\n            const rejectionGroupedModel = propModel[1].groupBy(groupByString.split(','), reducer, {\n                saveChild: false\n            });\n            forwardPropagation(targetDM, [selectionGroupedModel, rejectionGroupedModel], true);\n        }\n    });\n\n    calculatedVariableIterator(dataModel, (targetDM, ...params) => {\n        if (targetDM !== nonTraversingModel) {\n            const entryModel = propModel[0].clone(false, false).calculateVariable(...params, {\n                saveChild: false,\n                replaceVar: true\n            });\n            const exitModel = propModel[1].clone(false, false).calculateVariable(...params, {\n                saveChild: false,\n                replaceVar: true\n            });\n            forwardPropagation(targetDM, [entryModel, exitModel], grouped);\n        }\n    });\n};\n\nexport const getRootGroupByModel = (model) => {\n    if (model._parent && model._derivation.find(d => d.op !== 'group')) {\n        return getRootGroupByModel(model._parent);\n    }\n    return model;\n};\n\nexport const getRootDataModel = (model) => {\n    if (model._parent) {\n        return getRootDataModel(model._parent);\n    }\n    return model;\n};\n\nexport const propagateToAllDataModels = (identifiers, rootModels, config) => {\n    let criteria;\n    let propModel;\n    const propagationNameSpace = config.propagationNameSpace;\n    const payload = config.payload;\n    const propagationSourceId = config.propagationSourceId;\n\n    if (identifiers === null) {\n        criteria = null;\n    } else {\n        const filteredCriteria = Object.entries(propagationNameSpace.mutableActions)\n            .filter(d => d[0] !== propagationSourceId)\n            .map(d => Object.values(d[1]).map(action => action.criteria));\n        criteria = [].concat(...[...filteredCriteria, identifiers]);\n    }\n\n    const rootGroupByModel = rootModels.groupByModel;\n    const rootModel = rootModels.model;\n    const propConfig = {\n        payload,\n        propagationSourceId,\n        sourceIdentifiers: identifiers\n    };\n\n    if (rootGroupByModel) {\n        propModel = filterPropagationModel(rootGroupByModel, criteria, {\n            filterByMeasure: true\n        });\n        propagateIdentifiers(rootGroupByModel, propModel, propConfig);\n    }\n\n    propModel = filterPropagationModel(rootModel, criteria, {\n        filterByMeasure: !rootGroupByModel\n    });\n    propagateIdentifiers(rootModel, propModel, propConfig, rootGroupByModel);\n};\n\nexport const propagateImmutableActions = (propagationNameSpace, rootModels, propagationSourceId) => {\n    const rootGroupByModel = rootModels.groupByModel;\n    const rootModel = rootModels.model;\n    const immutableActions = propagationNameSpace.immutableActions;\n    for (const sourceId in immutableActions) {\n        const actions = immutableActions[sourceId];\n        for (const action in actions) {\n            const criteriaModel = actions[action].criteria;\n            propagateToAllDataModels(criteriaModel, {\n                groupByModel: rootGroupByModel,\n                model: rootModel\n            }, {\n                propagationNameSpace,\n                payload: actions[action].payload,\n                propagationSourceId\n            });\n        }\n    }\n};\n","import DataModel from './datamodel';\nimport * as Operators from './operator';\nimport * as Stats from './stats';\nimport pkg from '../package.json';\n\nDataModel.Operators = Operators;\nDataModel.Stats = Stats;\nDataModel.version = pkg.version;\n\nexport * from './enums';\nexport { DateTimeFormatter } from './utils';\nexport default DataModel;\n","import { rowDiffsetIterator } from './row-diffset-iterator';\n\n/**\n * Creates bin f from the data and the supplied config.\n *\n * @param {Array} data - The input data.\n * @param {Object} config - The config object.\n * @param {number} config.binSize - The size of the bin.\n * @param {number} config.numOfBins - The number of bins to be created.\n * @return {Array} Returns an array of created bins.\n */\nexport function createBinnedFieldData (field, rowDiffset, config) {\n    let { buckets, numOfBins, binSize, start } = config;\n    let dataStore = [];\n    let binnedData = [];\n    let [min, max] = field.domain();\n    let oriMax = max;\n    let end = [];\n    let binEnd;\n    let prevEndpoint;\n    let mid;\n    let range;\n\n    // create dataStore with index according to rowDiffSet\n    rowDiffsetIterator(rowDiffset, (i) => {\n        dataStore.push({\n            data: field.data[i],\n            index: i\n        });\n    });\n\n    // create buckets if buckets not given\n    if (!buckets) {\n        max += 1;\n        binSize = binSize || (max - min) / numOfBins;\n\n        const extraBinELm = (max - min) % binSize;\n        if (!numOfBins && extraBinELm !== 0) {\n            max = max + binSize - extraBinELm;\n        }\n        binEnd = min + binSize;\n        while (binEnd <= max) {\n            end.push(binEnd);\n            binEnd += binSize;\n        }\n        start = start || min;\n        buckets = { start, end };\n    }\n\n    // initialize intial bucket start\n    prevEndpoint = buckets.start === 0 ? 0 : buckets.start || min;\n\n    // mark each data in dataStore to respective buckets\n    buckets.end.forEach((endPoint) => {\n        let tempStore = dataStore.filter(datum => datum.data >= prevEndpoint && datum.data < endPoint);\n        tempStore.forEach((datum) => { binnedData[datum.index] = `${prevEndpoint}-${endPoint}`; });\n        prevEndpoint = endPoint;\n    });\n\n    // create a bin for values less than start\n    dataStore.filter(datum => datum.data < buckets.start)\n                    .forEach((datum) => { binnedData[datum.index] = `${min}-${buckets.start}`; });\n\n    // create a bin for values more than end\n    dataStore.filter(datum => datum.data >= buckets.end[buckets.end.length - 1])\n                    .forEach((datum) =>\n                    { binnedData[datum.index] = `${buckets.end[buckets.end.length - 1]}-${oriMax}`; });\n\n    // create range and mid\n    // append start to bucket marks\n    buckets.end.unshift(buckets.start);\n    range = new Set(buckets.end);\n\n    // Add endpoints to buckets marks if not added\n    if (min < buckets.start) { range.add(min); }\n    if (oriMax > buckets.end[buckets.end.length - 1]) { range.add(oriMax); }\n\n    range = [...range].sort((a, b) => a - b);\n    mid = [];\n\n    for (let i = 1; i < range.length; i++) {\n        mid.push((range[i - 1] + range[i]) / 2);\n    }\n    return { data: binnedData, mid, range };\n}\n","/* eslint-disable default-case */\nimport { DM_DERIVATIVES } from '../constants';\n\n/**\n * iterate the children and call the callback for each\n *\n * @param {DataModel} datamodel\n * @param {function} callback\n * @param {DM_DERIVATIVES} operation\n */\nfunction childIterator (datamodel, callback, operation) {\n    const children = datamodel._children;\n    children.forEach((child) => {\n        if (child._derivation\n            && child._derivation.length === 1) {\n            switch (operation) {\n            case DM_DERIVATIVES.SELECT:\n                if (child._derivation[0].op === DM_DERIVATIVES.SELECT) {\n                    callback(child, child._derivation[0].criteria);\n                }\n                break;\n            case DM_DERIVATIVES.PROJECT:\n                if (child._derivation[0].op === DM_DERIVATIVES.PROJECT) {\n                    callback(child, child._derivation[0].meta.actualProjField);\n                }\n                break;\n            case DM_DERIVATIVES.GROUPBY:\n                if (child._derivation[0].op === DM_DERIVATIVES.GROUPBY) {\n                    callback(child,\n                        { groupByString: child._derivation[0].meta.groupByString,\n                            reducer: child._derivation[0].criteria });\n                }\n                break;\n            case DM_DERIVATIVES.CAL_VAR:\n                if (child._derivation[0].op === DM_DERIVATIVES.CAL_VAR) {\n                    let params = [child._derivation[0].meta.config, [child._derivation[0].meta.fields,\n                        child._derivation[0].criteria]];\n                    callback(child, ...params);\n                }\n                break;\n            }\n        }\n    });\n}\n\n/**\n * Invokes a callback for every child created by a selection operation on a DataModel.\n *\n * @param {DataModel} datamodel - The input DataModel instance.\n * @param {Function} callback - The callback to be invoked on each child. The parameters\n * provided to the callback are the child DataModel instance and the selection\n * function used to create it.\n */\nexport function selectIterator (datamodel, callback) {\n    childIterator(datamodel, callback, DM_DERIVATIVES.SELECT);\n}\n\n/**\n * Invokes a callback for every measure child of a DataModel.\n *\n * @param {DataModel} datamodel - The input DataModel instance.\n * @param {Function} callback - The callback to be invoked on each measure child. The parameters\n * provided to the callback are the child DataModel instance and the child params.\n */\nexport function calculatedVariableIterator (datamodel, callback) {\n    childIterator(datamodel, callback, DM_DERIVATIVES.CAL_VAR);\n}\n\n/**\n * Invokes a callback for every projected child of a DataModel.\n *\n * @param {DataModel} datamodel - The input DataModel instance.\n * @param {Function} callback - The callback to be invoked on each projected child. The parameters\n * provided to the callback are the child DataModel instance and the\n * projection string.\n */\nexport function projectIterator (datamodel, callback) {\n    childIterator(datamodel, callback, DM_DERIVATIVES.PROJECT);\n}\n\n/**\n * Invokes a callback over the children created by a groupBy\n * operation on a DataModel.\n *\n * @param {DataModel} datamodel - The input DataModel instance.\n * @param {Function} callback - The callback to be invoked. The parameters\n * provided to the callback are the child DataModel instance and the groupBy string used to create it.\n */\nexport function groupByIterator (datamodel, callback) {\n    childIterator(datamodel, callback, DM_DERIVATIVES.GROUPBY);\n}\n\n","export const compose = (...operations) =>\n    (dm, config = { saveChild: true }) => {\n        let currentDM = dm;\n        let frstChild;\n        const derivations = [];\n        const saveChild = config.saveChild;\n\n        operations.forEach((operation) => {\n            currentDM = operation(currentDM);\n            derivations.push(...currentDM._derivation);\n            if (!frstChild) {\n                frstChild = currentDM;\n            }\n        });\n\n        saveChild && currentDM.addParent(dm, derivations);\n        if (derivations.length > 1) {\n            frstChild.dispose();\n        }\n\n        return currentDM;\n    };\n\n/**\n *\n * Operator Wrappers for :\n * select,project,bin,groupby\n */\nexport const bin = (...args) => dm => dm.bin(...args);\n\nexport const select = (...args) => dm => dm.select(...args);\n\nexport const project = (...args) => dm => dm.project(...args);\n\nexport const groupBy = (...args) => dm => dm.groupBy(...args);\n","import DataModel from '../datamodel';\nimport { extend2 } from '../utils';\nimport { getCommonSchema } from './get-common-schema';\nimport { rowDiffsetIterator } from './row-diffset-iterator';\nimport { JOINS } from '../constants';\n/**\n * Default filter function for crossProduct.\n *\n * @return {boolean} Always returns true.\n */\nfunction defaultFilterFn() { return true; }\n\n/**\n * Implementation of cross product operation between two DataModel instances.\n * It internally creates the data and schema for the new DataModel.\n *\n * @param {DataModel} dataModel1 - The left DataModel instance.\n * @param {DataModel} dataModel2 - The right DataModel instance.\n * @param {Function} filterFn - The filter function which is used to filter the tuples.\n * @param {boolean} [replaceCommonSchema=false] - The flag if the common name schema should be there.\n * @return {DataModel} Returns The newly created DataModel instance from the crossProduct operation.\n */\nexport function crossProduct (dm1, dm2, filterFn, replaceCommonSchema = false, jointype = JOINS.CROSS) {\n    const schema = [];\n    const data = [];\n    const applicableFilterFn = filterFn || defaultFilterFn;\n    const dm1FieldStore = dm1.getFieldspace();\n    const dm2FieldStore = dm2.getFieldspace();\n    const dm1FieldStoreName = dm1FieldStore.name;\n    const dm2FieldStoreName = dm2FieldStore.name;\n    const name = `${dm1FieldStore.name}.${dm2FieldStore.name}`;\n    const commonSchemaList = getCommonSchema(dm1FieldStore, dm2FieldStore);\n\n    if (dm1FieldStoreName === dm2FieldStoreName) {\n        throw new Error('DataModels must have different alias names');\n    }\n    // Here prepare the schema\n    dm1FieldStore.fields.forEach((field) => {\n        const tmpSchema = extend2({}, field.schema);\n        if (commonSchemaList.indexOf(tmpSchema.name) !== -1 && !replaceCommonSchema) {\n            tmpSchema.name = `${dm1FieldStore.name}.${tmpSchema.name}`;\n        }\n        schema.push(tmpSchema);\n    });\n    dm2FieldStore.fields.forEach((field) => {\n        const tmpSchema = extend2({}, field.schema);\n        if (commonSchemaList.indexOf(tmpSchema.name) !== -1) {\n            if (!replaceCommonSchema) {\n                tmpSchema.name = `${dm2FieldStore.name}.${tmpSchema.name}`;\n                schema.push(tmpSchema);\n            }\n        } else {\n            schema.push(tmpSchema);\n        }\n    });\n\n    // Here prepare Data\n    rowDiffsetIterator(dm1._rowDiffset, (i) => {\n        let rowAdded = false;\n        let rowPosition;\n        rowDiffsetIterator(dm2._rowDiffset, (ii) => {\n            const tuple = [];\n            const userArg = {};\n            userArg[dm1FieldStoreName] = {};\n            userArg[dm2FieldStoreName] = {};\n            dm1FieldStore.fields.forEach((field) => {\n                tuple.push(field.data[i]);\n                userArg[dm1FieldStoreName][field.name] = field.data[i];\n            });\n            dm2FieldStore.fields.forEach((field) => {\n                if (!(commonSchemaList.indexOf(field.schema.name) !== -1 && replaceCommonSchema)) {\n                    tuple.push(field.data[ii]);\n                }\n                userArg[dm2FieldStoreName][field.name] = field.data[ii];\n            });\n            if (applicableFilterFn(userArg)) {\n                const tupleObj = {};\n                tuple.forEach((cellVal, iii) => {\n                    tupleObj[schema[iii].name] = cellVal;\n                });\n                if (rowAdded && JOINS.CROSS !== jointype) {\n                    data[rowPosition] = tupleObj;\n                }\n                else {\n                    data.push(tupleObj);\n                    rowAdded = true;\n                    rowPosition = i;\n                }\n            }\n            else if ((jointype === JOINS.LEFTOUTER || jointype === JOINS.RIGHTOUTER) && !rowAdded) {\n                const tupleObj = {};\n                let len = dm1FieldStore.fields.length - 1;\n                tuple.forEach((cellVal, iii) => {\n                    if (iii <= len) {\n                        tupleObj[schema[iii].name] = cellVal;\n                    }\n                    else {\n                        tupleObj[schema[iii].name] = null;\n                    }\n                });\n                rowAdded = true;\n                rowPosition = i;\n                data.push(tupleObj);\n            }\n        });\n    });\n\n    return new DataModel(data, schema, name);\n}\n","import { FieldType, DimensionSubtype } from '../enums';\nimport { rowDiffsetIterator } from './row-diffset-iterator';\nimport { mergeSort } from './merge-sort';\nimport { fieldInSchema } from '../helper';\nimport { isCallable, isArray, } from '../utils';\n/**\n * Generates the sorting functions to sort the data of a DataModel instance\n * according to the input data type.\n *\n * @param {string} dataType - The data type e.g. 'measure', 'datetime' etc.\n * @param {string} sortType - The sorting order i.e. 'asc' or 'desc'.\n * @param {integer} index - The index of the data which will be sorted.\n * @return {Function} Returns the the sorting function.\n */\nfunction getSortFn (dataType, sortType, index) {\n    let retFunc;\n    switch (dataType) {\n    case FieldType.MEASURE:\n    case DimensionSubtype.TEMPORAL:\n        if (sortType === 'desc') {\n            retFunc = (a, b) => b[index] - a[index];\n        } else {\n            retFunc = (a, b) => a[index] - b[index];\n        }\n        break;\n    default:\n        retFunc = (a, b) => {\n            const a1 = `${a[index]}`;\n            const b1 = `${b[index]}`;\n            if (a1 < b1) {\n                return sortType === 'desc' ? 1 : -1;\n            }\n            if (a1 > b1) {\n                return sortType === 'desc' ? -1 : 1;\n            }\n            return 0;\n        };\n    }\n    return retFunc;\n}\n\n/**\n * Groups the data according to the specified target field.\n *\n * @param {Array} data - The input data array.\n * @param {number} fieldIndex - The target field index within schema array.\n * @return {Array} Returns an array containing the grouped data.\n */\nfunction groupData(data, fieldIndex) {\n    const hashMap = new Map();\n    const groupedData = [];\n\n    data.forEach((datum) => {\n        const fieldVal = datum[fieldIndex];\n        if (hashMap.has(fieldVal)) {\n            groupedData[hashMap.get(fieldVal)][1].push(datum);\n        } else {\n            groupedData.push([fieldVal, [datum]]);\n            hashMap.set(fieldVal, groupedData.length - 1);\n        }\n    });\n\n    return groupedData;\n}\n\n/**\n * Creates the argument value used for sorting function when sort is done\n * with another fields.\n *\n * @param {Array} groupedDatum - The grouped datum for a single dimension field value.\n * @param {Array} targetFields - An array of the sorting fields.\n * @param {Array} targetFieldDetails - An array of the sorting field details in schema.\n * @return {Object} Returns an object containing the value of sorting fields and the target field name.\n */\nfunction createSortingFnArg(groupedDatum, targetFields, targetFieldDetails) {\n    const arg = {\n        label: groupedDatum[0]\n    };\n\n    targetFields.reduce((acc, next, idx) => {\n        acc[next] = groupedDatum[1].map(datum => datum[targetFieldDetails[idx].index]);\n        return acc;\n    }, arg);\n\n    return arg;\n}\n\n/**\n * Sorts the data before return in dataBuilder.\n *\n * @param {Object} dataObj - An object containing the data and schema.\n * @param {Array} sortingDetails - An array containing the sorting configs.\n */\nfunction sortData(dataObj, sortingDetails) {\n    const { data, schema } = dataObj;\n    let fieldName;\n    let sortMeta;\n    let fDetails;\n    let i = sortingDetails.length - 1;\n\n    for (; i >= 0; i--) {\n        fieldName = sortingDetails[i][0];\n        sortMeta = sortingDetails[i][1];\n        fDetails = fieldInSchema(schema, fieldName);\n\n        if (!fDetails) {\n            // eslint-disable-next-line no-continue\n            continue;\n        }\n\n        if (isCallable(sortMeta)) {\n            // eslint-disable-next-line no-loop-func\n            mergeSort(data, (a, b) => sortMeta(a[fDetails.index], b[fDetails.index]));\n        } else if (isArray(sortMeta)) {\n            const groupedData = groupData(data, fDetails.index);\n            const sortingFn = sortMeta[sortMeta.length - 1];\n            const targetFields = sortMeta.slice(0, sortMeta.length - 1);\n            const targetFieldDetails = targetFields.map(f => fieldInSchema(schema, f));\n\n            groupedData.forEach((groupedDatum) => {\n                groupedDatum.push(createSortingFnArg(groupedDatum, targetFields, targetFieldDetails));\n            });\n\n            mergeSort(groupedData, (a, b) => {\n                const m = a[2];\n                const n = b[2];\n                return sortingFn(m, n);\n            });\n\n            // Empty the array\n            data.length = 0;\n            groupedData.forEach((datum) => {\n                data.push(...datum[1]);\n            });\n        } else {\n            sortMeta = String(sortMeta).toLowerCase() === 'desc' ? 'desc' : 'asc';\n            mergeSort(data, getSortFn(fDetails.type, sortMeta, fDetails.index));\n        }\n    }\n\n    dataObj.uids = [];\n    data.forEach((value) => {\n        dataObj.uids.push(value.pop());\n    });\n}\n\n\n/**\n * Builds the actual data array.\n *\n * @param {Array} fieldStore - An array of field.\n * @param {string} rowDiffset - A string consisting of which rows to be included eg. '0-2,4,6';\n * @param {string} colIdentifier - A string consisting of the details of which column\n * to be included eg 'date,sales,profit';\n * @param {Object} sortingDetails - An object containing the sorting details of the DataModel instance.\n * @param {Object} options - The options required to create the type of the data.\n * @return {Object} Returns an object containing the multidimensional array and the relative schema.\n */\nexport function dataBuilder (fieldStore, rowDiffset, colIdentifier, sortingDetails, options) {\n    const defOptions = {\n        addUid: false,\n        columnWise: false\n    };\n    options = Object.assign({}, defOptions, options);\n\n    const retObj = {\n        schema: [],\n        data: [],\n        uids: []\n    };\n    const addUid = options.addUid;\n    const reqSorting = sortingDetails && sortingDetails.length > 0;\n    // It stores the fields according to the colIdentifier argument\n    const tmpDataArr = [];\n    // Stores the fields according to the colIdentifier argument\n    const colIArr = colIdentifier.split(',');\n\n    colIArr.forEach((colName) => {\n        for (let i = 0; i < fieldStore.length; i += 1) {\n            if (fieldStore[i].name === colName) {\n                tmpDataArr.push(fieldStore[i]);\n                break;\n            }\n        }\n    });\n\n    // Inserts the schema to the schema object\n    tmpDataArr.forEach((field) => {\n        /** @todo Need to use extend2 here otherwise user can overwrite the schema. */\n        retObj.schema.push(field.schema);\n    });\n\n    if (addUid) {\n        retObj.schema.push({\n            name: 'uid',\n            type: 'identifier'\n        });\n    }\n\n    rowDiffsetIterator(rowDiffset, (i) => {\n        retObj.data.push([]);\n        const insertInd = retObj.data.length - 1;\n        let start = 0;\n        tmpDataArr.forEach((field, ii) => {\n            retObj.data[insertInd][ii + start] = field.data[i];\n        });\n        if (addUid) {\n            retObj.data[insertInd][tmpDataArr.length] = i;\n        }\n        // Creates an array of unique identifiers for each row\n        retObj.uids.push(i);\n\n        // If sorting needed then there is the need to expose the index\n        // mapping from the old index to its new index\n        if (reqSorting) { retObj.data[insertInd].push(i); }\n    });\n\n    // Handles the sort functionality\n    if (reqSorting) {\n        sortData(retObj, sortingDetails);\n    }\n\n    if (options.columnWise) {\n        const tmpData = Array(...Array(retObj.schema.length)).map(() => []);\n        retObj.data.forEach((tuple) => {\n            tuple.forEach((data, i) => {\n                tmpData[i].push(data);\n            });\n        });\n        retObj.data = tmpData;\n    }\n\n    return retObj;\n}\n","import DataModel from '../index';\nimport { extend2 } from '../utils';\nimport { rowDiffsetIterator } from './row-diffset-iterator';\nimport { isArrEqual } from '../utils/helper';\n\n/**\n * Performs the union operation between two dm instances.\n *\n * @todo Fix the conflicts between union and difference terminology here.\n *\n * @param {dm} dm1 - The first dm instance.\n * @param {dm} dm2 - The second dm instance.\n * @return {dm} Returns the newly created dm after union operation.\n */\nexport function difference (dm1, dm2) {\n    const hashTable = {};\n    const schema = [];\n    const schemaNameArr = [];\n    const data = [];\n    const dm1FieldStore = dm1.getFieldspace();\n    const dm2FieldStore = dm2.getFieldspace();\n    const dm1FieldStoreFieldObj = dm1FieldStore.fieldsObj();\n    const dm2FieldStoreFieldObj = dm2FieldStore.fieldsObj();\n    const name = `${dm1FieldStore.name} union ${dm2FieldStore.name}`;\n\n   // For union the columns should match otherwise return a clone of the dm1\n    if (!isArrEqual(dm1._colIdentifier.split(',').sort(), dm2._colIdentifier.split(',').sort())) {\n        return null;\n    }\n\n    // Prepare the schema\n    (dm1._colIdentifier.split(',')).forEach((fieldName) => {\n        const field = dm1FieldStoreFieldObj[fieldName];\n        schema.push(extend2({}, field.schema));\n        schemaNameArr.push(field.schema.name);\n    });\n\n    /**\n     * The helper function to create the data.\n     *\n     * @param {dm} dm - The dm instance for which the data is inserted.\n     * @param {Object} fieldsObj - The fieldStore object format.\n     * @param {boolean} addData - If true only tuple will be added to the data.\n     */\n    function prepareDataHelper(dm, fieldsObj, addData) {\n        rowDiffsetIterator(dm._rowDiffset, (i) => {\n            const tuple = {};\n            let hashData = '';\n            schemaNameArr.forEach((schemaName) => {\n                const value = fieldsObj[schemaName].data[i];\n                hashData += `-${value}`;\n                tuple[schemaName] = value;\n            });\n            if (!hashTable[hashData]) {\n                if (addData) { data.push(tuple); }\n                hashTable[hashData] = true;\n            }\n        });\n    }\n\n    // Prepare the data\n    prepareDataHelper(dm2, dm2FieldStoreFieldObj, false);\n    prepareDataHelper(dm1, dm1FieldStoreFieldObj, true);\n\n    return new DataModel(data, schema, name);\n}\n\n","/**\n * The helper function that returns an array of common schema\n * from two fieldStore instances.\n *\n * @param {FieldStore} fs1 - The first FieldStore instance.\n * @param {FieldStore} fs2 - The second FieldStore instance.\n * @return {Array} An array containing the common schema.\n */\nexport function getCommonSchema (fs1, fs2) {\n    const retArr = [];\n    const fs1Arr = [];\n    fs1.fields.forEach((field) => {\n        fs1Arr.push(field.schema.name);\n    });\n    fs2.fields.forEach((field) => {\n        if (fs1Arr.indexOf(field.schema.name) !== -1) {\n            retArr.push(field.schema.name);\n        }\n    });\n    return retArr;\n}\n","/**\n * reducer function that takes care about the sum aggregation\n * @param  {Array} arr array of values\n * @return {number}     sum of the array\n */\nfunction sum (arr) {\n    const isNestedArray = arr[0] instanceof Array;\n    return arr.reduce((carry, a) => {\n        if (isNestedArray) {\n            return carry.map((x, i) => x + a[i]);\n        }\n        return carry + a;\n    }, isNestedArray ? Array(...Array(arr[0].length)).map(() => 0) : 0);\n}\n\n/**\n * reducer function that takes care about the mean aggregation\n * @param  {Array} arr array of values\n * @return {number}     mean of the array\n */\nfunction avg (arr) {\n    const isNestedArray = arr[0] instanceof Array;\n    const len = arr.length || 1;\n    const arrSum = sum(arr);\n    if (isNestedArray) {\n        return arrSum.map(x => x / len);\n    }\n    return arrSum / len;\n}\n\n/**\n * reducer function that gives the min value\n * @param  {Array} arr array of values\n * @return {number}     min of the array\n */\nfunction min (arr) {\n    const isNestedArray = arr[0] instanceof Array;\n    if (isNestedArray) {\n        return arr.reduce((carry, a) => carry.map((x, i) => Math.min(x, a[i])),\n        Array(...Array(arr[0].length)).map(() => Infinity));\n    }\n    return Math.min(...arr);\n}\n\n/**\n * reducer function that gives the max value\n * @param  {Array} arr array of values\n * @return {number}     max of the array\n */\nfunction max (arr) {\n    const isNestedArray = arr[0] instanceof Array;\n    if (isNestedArray) {\n        return arr.reduce((carry, a) => carry.map((x, i) => Math.max(x, a[i])),\n        Array(...Array(arr[0].length)).map(() => -Infinity));\n    }\n    return Math.max(...arr);\n}\n\n/**\n * reducer function that gives the first value\n * @param  {Array} arr array of values\n * @return {number}     first value of the array\n */\nfunction first (arr) {\n    return arr[0];\n}\n\n/**\n * reducer function that gives the last value\n * @param  {Array} arr array of values\n * @return {number}     last value of the array\n */\nfunction last (arr) {\n    return arr[arr.length - 1];\n}\n\n/**\n * reducer function that gives the count value\n * @param  {Array} arr array of values\n * @return {number}     count of the array\n */\nfunction count (arr) {\n    const isNestedArray = arr[0] instanceof Array;\n    const len = arr.length;\n    if (isNestedArray) {\n        return Array(...Array(arr[0].length)).map(() => len);\n    }\n    return len;\n}\n\n/**\n * Calculates the variance of the input array.\n *\n * @param {Array.<number>} arr - The input array.\n * @return {number} Returns the variance of the input array.\n */\nfunction variance (arr) {\n    let mean = avg(arr);\n    return avg(arr.map(num => (num - mean) ** 2));\n}\n\n/**\n * Calculates the square root of the variance of the input array.\n *\n * @param {Array.<number>} arr - The input array.\n * @return {number} Returns the square root of the variance.\n */\nfunction std (arr) {\n    return Math.sqrt(variance(arr));\n}\n\n\nconst fnList = {\n    sum,\n    avg,\n    min,\n    max,\n    first,\n    last,\n    count,\n    std\n};\n\nexport {\n    sum as defReducer,\n    fnList,\n};\n","import { extend2 } from '../utils';\nimport { rowDiffsetIterator } from './row-diffset-iterator';\nimport DataModel from '../index';\nimport reducerStore from '../utils/reducer-store';\n\n/**\n * This function sanitize the user given field and return a common Array structure field\n * list\n * @param  {DataModel} dataModel the dataModel operating on\n * @param  {Array} fieldArr  user input of field Array\n * @return {Array}           arrays of field name\n */\nfunction getFieldArr (dataModel, fieldArr) {\n    const retArr = [];\n    const fieldStore = dataModel.getPartialFieldspace();\n    const dimensions = fieldStore.getDimension();\n    const measures = fieldStore.getMeasure();\n\n    Object.entries(dimensions).forEach(([key]) => {\n        if (fieldArr && fieldArr.length) {\n            if (fieldArr.indexOf(key) !== -1) {\n                retArr.push(key);\n            }\n        } else {\n            retArr.push(key);\n        }\n    });\n\n    Object.entries(measures).forEach(([key]) => {\n        if (measures[key].subType() === 'discrete') {\n            if (fieldArr && fieldArr.length) {\n                if (fieldArr.indexOf(key) !== -1) {\n                    retArr.push(key);\n                }\n            } else {\n                retArr.push(key);\n            }\n        }\n    });\n    return retArr;\n}\n\n/**\n * This sanitize the reducer provide by the user and create a common type of object.\n * user can give function Also\n * @param  {DataModel} dataModel     dataModel to worked on\n * @param  {Object|function} [reducers={}] reducer provided by the users\n * @return {Object}               object containing reducer function for every measure\n */\nfunction getReducerObj (dataModel, reducers = {}) {\n    const retObj = {};\n    const pReducers = reducers;\n    const fieldStore = dataModel.getPartialFieldspace();\n    const measures = fieldStore.getMeasure();\n    let reducer = reducerStore.defaultReducer();\n    if (typeof reducers === 'function') {\n        reducer = reducers;\n    }\n    Object.entries(measures).forEach(([key]) => {\n        if (typeof reducers[key] === 'string') {\n            pReducers[key] = reducerStore.resolve(pReducers[key]) ? reducerStore.resolve(pReducers[key]) : reducer;\n        }\n        if (typeof reducers[key] !== 'function') {\n            pReducers[key] = undefined;\n        }\n        retObj[key] = pReducers[key] || reducerStore.resolve(measures[key].defAggFn()) || reducer;\n    });\n    return retObj;\n}\n\n/**\n * main function which perform the group-by operations which reduce the measures value is the\n * fields are common according to the reducer function provided\n * @param  {DataModel} dataModel the dataModel to worked\n * @param  {Array} fieldArr  fields according to which the groupby should be worked\n * @param  {Object|Function} reducers  reducers function\n * @param {DataModel} existingDataModel Existing datamodel instance\n * @return {DataModel} new dataModel with the group by\n */\nfunction groupBy (dataModel, fieldArr, reducers, existingDataModel) {\n    const sFieldArr = getFieldArr(dataModel, fieldArr);\n    const reducerObj = getReducerObj(dataModel, reducers);\n    const fieldStore = dataModel.getPartialFieldspace();\n    const fieldStoreObj = fieldStore.fieldsObj();\n    const dbName = fieldStore.name;\n    const dimensionArr = [];\n    const measureArr = [];\n    const schema = [];\n    const hashMap = {};\n    const data = [];\n    let newDataModel;\n    // Prepare the schema\n    Object.entries(fieldStoreObj).forEach(([key, value]) => {\n        if (sFieldArr.indexOf(key) !== -1 || reducerObj[key]) {\n            schema.push(extend2({}, value.schema));\n            if (value.schema.type === 'measure' && value.schema.subtype !== 'discrete') {\n                measureArr.push(key);\n            } else if (value.schema.type === 'dimension' || value.schema.subtype === 'discrete') {\n                dimensionArr.push(key);\n            }\n        }\n    });\n    // Prepare the data\n    let rowCount = 0;\n    rowDiffsetIterator(dataModel._rowDiffset, (i) => {\n        let hash = '';\n        dimensionArr.forEach((_) => {\n            hash = `${hash}-${fieldStoreObj[_].data[i]}`;\n        });\n        if (hashMap[hash] === undefined) {\n            hashMap[hash] = rowCount;\n            data.push({});\n            dimensionArr.forEach((_) => {\n                data[rowCount][_] = fieldStoreObj[_].data[i];\n            });\n            measureArr.forEach((_) => {\n                data[rowCount][_] = [fieldStoreObj[_].data[i]];\n            });\n            rowCount += 1;\n        } else {\n            measureArr.forEach((_) => {\n                data[hashMap[hash]][_].push(fieldStoreObj[_].data[i]);\n            });\n        }\n    });\n    // reduction\n    data.forEach((row) => {\n        const tuple = row;\n        measureArr.forEach((_) => {\n            tuple[_] = reducerObj[_](row[_]);\n        });\n    });\n    if (existingDataModel) {\n        existingDataModel.__calculateFieldspace();\n        newDataModel = existingDataModel;\n    }\n    else {\n        newDataModel = new DataModel(data, schema, dbName);\n    }\n    return newDataModel;\n}\n\nexport { groupBy, getFieldArr, getReducerObj };\n","export { createBinnedFieldData } from './bucket-creator';\nexport { selectIterator, calculatedVariableIterator, projectIterator, groupByIterator } from './child-iterator';\nexport { compose, bin, select, project, groupby } from './compose';\nexport { calculateVariable, sort } from './pure-operators';\nexport { crossProduct } from './cross-product';\nexport { dataBuilder } from './data-builder';\nexport { difference } from './difference';\nexport { getCommonSchema } from './get-common-schema';\nexport { defReducer, fnList } from './group-by-function';\nexport { groupBy, getFieldArr, getReducerObj } from './group-by';\nexport { mergeSort } from './merge-sort';\nexport { naturalJoinFilter } from './natural-join-filter-function';\nexport { naturalJoin } from './natural-join';\nexport { leftOuterJoin, rightOuterJoin, fullOuterJoin } from './outer-join';\nexport { rowDiffsetIterator } from './row-diffset-iterator';\nexport { union } from './union';\n","/**\n * The default sort function.\n *\n * @param {*} a - The first value.\n * @param {*} b - The second value.\n * @return {number} Returns the comparison result e.g. 1 or 0 or -1.\n */\nfunction defSortFn (a, b) {\n    const a1 = `${a}`;\n    const b1 = `${b}`;\n    if (a1 < b1) {\n        return -1;\n    }\n    if (a1 > b1) {\n        return 1;\n    }\n    return 0;\n}\n\n/**\n * The helper function for merge sort which creates the sorted array\n * from the two halves of the input array.\n *\n * @param {Array} arr - The target array which needs to be merged.\n * @param {number} lo - The starting index of the first array half.\n * @param {number} mid - The ending index of the first array half.\n * @param {number} hi - The ending index of the second array half.\n * @param {Function} sortFn - The sort function.\n */\nfunction merge (arr, lo, mid, hi, sortFn) {\n    const mainArr = arr;\n    const auxArr = [];\n    for (let i = lo; i <= hi; i += 1) {\n        auxArr[i] = mainArr[i];\n    }\n    let a = lo;\n    let b = mid + 1;\n\n    for (let i = lo; i <= hi; i += 1) {\n        if (a > mid) {\n            mainArr[i] = auxArr[b];\n            b += 1;\n        } else if (b > hi) {\n            mainArr[i] = auxArr[a];\n            a += 1;\n        } else if (sortFn(auxArr[a], auxArr[b]) <= 0) {\n            mainArr[i] = auxArr[a];\n            a += 1;\n        } else {\n            mainArr[i] = auxArr[b];\n            b += 1;\n        }\n    }\n}\n\n/**\n * The helper function for merge sort which would be called\n * recursively for sorting the array halves.\n *\n * @param {Array} arr - The target array which needs to be sorted.\n * @param {number} lo - The starting index of the array half.\n * @param {number} hi - The ending index of the array half.\n * @param {Function} sortFn - The sort function.\n * @return {Array} Returns the target array itself.\n */\nfunction sort (arr, lo, hi, sortFn) {\n    if (hi === lo) { return arr; }\n\n    const mid = lo + Math.floor((hi - lo) / 2);\n    sort(arr, lo, mid, sortFn);\n    sort(arr, mid + 1, hi, sortFn);\n    merge(arr, lo, mid, hi, sortFn);\n\n    return arr;\n}\n\n/**\n * The implementation of merge sort.\n * It is used in DataModel for stable sorting as it is not sure\n * what the sorting algorithm used by browsers is stable or not.\n *\n * @param {Array} arr - The target array which needs to be sorted.\n * @param {Function} [sortFn=defSortFn] - The sort function.\n * @return {Array} Returns the input array itself in sorted order.\n */\nexport function mergeSort (arr, sortFn = defSortFn) {\n    if (arr.length > 1) {\n        sort(arr, 0, arr.length - 1, sortFn);\n    }\n    return arr;\n}\n","import { getCommonSchema } from './get-common-schema';\n\n/**\n * The filter function used in natural join.\n * It generates a function that will have the logic to join two\n * DataModel instances by the process of natural join.\n *\n * @param {DataModel} dm1 - The left DataModel instance.\n * @param {DataModel} dm2 - The right DataModel instance.\n * @return {Function} Returns a function that is used in cross-product operation.\n */\nexport function naturalJoinFilter (dm1, dm2) {\n    const dm1FieldStore = dm1.getFieldspace();\n    const dm2FieldStore = dm2.getFieldspace();\n    const dm1FieldStoreName = dm1FieldStore.name;\n    const dm2FieldStoreName = dm2FieldStore.name;\n    const commonSchemaArr = getCommonSchema(dm1FieldStore, dm2FieldStore);\n\n    return (obj) => {\n        let retainTuple = true;\n        commonSchemaArr.forEach((fieldName) => {\n            if (obj[dm1FieldStoreName][fieldName] ===\n                obj[dm2FieldStoreName][fieldName] && retainTuple) {\n                retainTuple = true;\n            } else {\n                retainTuple = false;\n            }\n        });\n        return retainTuple;\n    };\n}\n","import { crossProduct } from './cross-product';\nimport { naturalJoinFilter } from './natural-join-filter-function';\n\nexport function naturalJoin (dataModel1, dataModel2) {\n    return crossProduct(dataModel1, dataModel2, naturalJoinFilter(dataModel1, dataModel2), true);\n}\n","import { crossProduct } from './cross-product';\nimport { JOINS } from '../constants';\nimport { union } from './union';\n\n\nexport function leftOuterJoin (dataModel1, dataModel2, filterFn) {\n    return crossProduct(dataModel1, dataModel2, filterFn, false, JOINS.LEFTOUTER);\n}\n\nexport function rightOuterJoin (dataModel1, dataModel2, filterFn) {\n    return crossProduct(dataModel2, dataModel1, filterFn, false, JOINS.RIGHTOUTER);\n}\n\nexport function fullOuterJoin (dataModel1, dataModel2, filterFn) {\n    return union(leftOuterJoin(dataModel1, dataModel2, filterFn), rightOuterJoin(dataModel1, dataModel2, filterFn));\n}\n","/**\n * Wrapper on calculateVariable() method of DataModel to behave\n * the pure-function functionality.\n *\n * @param {Array} args - The argument list.\n * @return {any} Returns the returned value of calling function.\n */\nexport const calculateVariable = (...args) => dm => dm.calculateVariable(...args);\n\n/**\n * Wrapper on sort() method of DataModel to behave\n * the pure-function functionality.\n *\n * @param {Array} args - The argument list.\n * @return {any} Returns the returned value of calling function.\n */\nexport const sort = (...args) => dm => dm.sort(...args);\n","/**\n * Iterates through the diffSet array and call the callback with the current\n * index.\n *\n * @param {string} rowDiffset - The row diffset string e.g. '0-4,6,10-13'.\n * @param {Function} callback - The callback function to be called with every index.\n */\nexport function rowDiffsetIterator (rowDiffset, callback) {\n    if (rowDiffset.length > 0) {\n        const rowDiffArr = rowDiffset.split(',');\n        rowDiffArr.forEach((diffStr) => {\n            const diffStsArr = diffStr.split('-');\n            const start = +(diffStsArr[0]);\n            const end = +(diffStsArr[1] || diffStsArr[0]);\n            if (end >= start) {\n                for (let i = start; i <= end; i += 1) {\n                    callback(i);\n                }\n            }\n        });\n    }\n}\n","import DataModel from '../index';\nimport { extend2 } from '../utils';\nimport { rowDiffsetIterator } from './row-diffset-iterator';\nimport { isArrEqual } from '../utils/helper';\n/**\n * Performs the union operation between two dm instances.\n *\n * @param {dm} dm1 - The first dm instance.\n * @param {dm} dm2 - The second dm instance.\n * @return {dm} Returns the newly created dm after union operation.\n */\nexport function union (dm1, dm2) {\n    const hashTable = {};\n    const schema = [];\n    const schemaNameArr = [];\n    const data = [];\n    const dm1FieldStore = dm1.getFieldspace();\n    const dm2FieldStore = dm2.getFieldspace();\n    const dm1FieldStoreFieldObj = dm1FieldStore.fieldsObj();\n    const dm2FieldStoreFieldObj = dm2FieldStore.fieldsObj();\n    const name = `${dm1FieldStore.name} union ${dm2FieldStore.name}`;\n\n    // For union the columns should match otherwise return a clone of the dm1\n    if (!isArrEqual(dm1._colIdentifier.split(',').sort(), dm2._colIdentifier.split(',').sort())) {\n        return null;\n    }\n\n    // Prepare the schema\n    (dm1._colIdentifier.split(',')).forEach((fieldName) => {\n        const field = dm1FieldStoreFieldObj[fieldName];\n        schema.push(extend2({}, field.schema));\n        schemaNameArr.push(field.schema.name);\n    });\n\n    /**\n     * The helper function to create the data.\n     *\n     * @param {dm} dm - The dm instance for which the data is inserted.\n     * @param {Object} fieldsObj - The fieldStore object format.\n     */\n    function prepareDataHelper (dm, fieldsObj) {\n        rowDiffsetIterator(dm._rowDiffset, (i) => {\n            const tuple = {};\n            let hashData = '';\n            schemaNameArr.forEach((schemaName) => {\n                const value = fieldsObj[schemaName].data[i];\n                hashData += `-${value}`;\n                tuple[schemaName] = value;\n            });\n            if (!hashTable[hashData]) {\n                data.push(tuple);\n                hashTable[hashData] = true;\n            }\n        });\n    }\n\n    // Prepare the data\n    prepareDataHelper(dm1, dm1FieldStoreFieldObj);\n    prepareDataHelper(dm2, dm2FieldStoreFieldObj);\n\n    return new DataModel(data, schema, name);\n}\n","import { FilteringMode } from './enums';\nimport { getUniqueId } from './utils';\nimport { persistDerivation, updateFields, cloneWithSelect, cloneWithProject, updateData } from './helper';\nimport { crossProduct, difference, naturalJoinFilter, union } from './operator';\nimport { DM_DERIVATIVES } from './constants';\n\n/**\n * Provides the relation algebra logics.\n */\nclass Relation {\n\n    /**\n     * If passed any data this will create a field array and will create\n     * a field store with these fields in global space which can be used\n     * by other functions for calculations and other operations on data\n     *\n     * @param {Object | string | Relation} data - The input tabular data in dsv or json format or\n     * an existing Relation instance object.\n     * @param {Array} schema - An array of data schema.\n     * @param {Object} [options] - The optional options.\n     */\n    constructor (...params) {\n        let source;\n\n        this._parent = null;\n        this._derivation = [];\n        this._children = [];\n\n\n        if (params.length === 1 && ((source = params[0]) instanceof Relation)) {\n            // parent datamodel was passed as part of source\n            this._colIdentifier = source._colIdentifier;\n            this._rowDiffset = source._rowDiffset;\n            this._parent = source;\n            this._partialFieldspace = this._parent._partialFieldspace;\n            this._fieldStoreName = getUniqueId();\n            this.__calculateFieldspace().calculateFieldsConfig();\n        } else {\n            updateData(this, ...params);\n            this._fieldStoreName = this._partialFieldspace.name;\n            this.__calculateFieldspace().calculateFieldsConfig();\n            this._propagationNameSpace = {\n                mutableActions: {},\n                immutableActions: {}\n            };\n        }\n    }\n\n    /**\n     * Returns the schema details for all fields.\n     *\n     * @public\n     * @return {Array} Returns an array of field schema.\n     */\n    getSchema () {\n        return this.getFieldspace().fields.map(d => d.schema);\n    }\n\n    getName () {\n        return this._fieldStoreName;\n    }\n\n    getFieldspace () {\n        return this._fieldspace;\n    }\n\n    __calculateFieldspace () {\n        this._fieldspace = updateFields([this._rowDiffset, this._colIdentifier],\n             this.getPartialFieldspace(), this._fieldStoreName);\n        return this;\n    }\n\n    getPartialFieldspace () {\n        return this._partialFieldspace;\n    }\n\n    /**\n     * this reflect the cross-product of the relational algebra or can be called as theta join.\n     * It take another DataModel instance and create new DataModel with the cross-product data and\n     * filter the data according to the filter function provided.\n     * Say there are two dataModel modelA with 4 column 5 rows and modelB with 3 column 6 row\n     * so the new DataModel modelA X modelB will have 7(4 + 3) rows and 30(5 * 6) columns (if no\n     * filter function is provided).\n     *\n     * @todo Make this API user-friendly.\n     *\n     * @public\n     * @param  {DataModel} joinWith The DataModel to be joined with this DataModel\n     * @param  {Function} filterFn Function that will filter the result of the crossProduct\n     * DataModel\n     * @return {DataModel}          the new DataModel created by joining\n     */\n    join (joinWith, filterFn) {\n        return crossProduct(this, joinWith, filterFn);\n    }\n\n    /**\n     * This can join two DataModel to form a new DataModel which meet the requirement of\n     * natural join.\n     * it's not possible to pass a filter function as the filter function is decided according to\n     * the definition of natural join\n     *\n     * @todo Make this API user-friendly.\n     *\n     * @public\n     * @param  {DataModel} joinWith the DataModel with whom this DataModel will be joined\n     * @return {DataModel}          The new joined DataModel\n     */\n    naturalJoin (joinWith) {\n        return crossProduct(this, joinWith, naturalJoinFilter(this, joinWith), true);\n    }\n\n    /**\n     * Performs union operation of the relational algebra.\n     * It can be termed as vertical joining of all the unique tuples\n     * from both the DataModel instances. The requirement is both\n     * the DataModel instances should have same column name and order.\n     *\n     * @public\n     * @param {DataModel} unionWith - Another DataModel instance to which union\n     * operation is performed.\n     * @return {DataModel} Returns the new DataModel instance after operation.\n     */\n    union (unionWith) {\n        return union(this, unionWith);\n    }\n\n    /**\n     * Performs difference operation of the relational algebra.\n     * It can be termed as vertical joining of all the tuples\n     * those are not in the second DataModel. The requirement\n     * is both the DataModel instances should have same column name and order.\n     *\n     * @public\n     * @param {DataModel} differenceWith - Another DataModel instance to which difference\n     * operation is performed.\n     * @return {DataModel} Returns the new DataModel instance after operation.\n     */\n    difference (differenceWith) {\n        return difference(this, differenceWith);\n    }\n\n    /**\n     * Performs selection operation of the relational algebra.\n     *\n     * @public\n     * @param {Function} selectFn - The function which will be looped through all the data\n     * if it return true the row will be there in the DataModel.\n     * @param {Object} [config] - The mode configuration.\n     * @param {string} [config.mode=FilteringMode.NORMAL] - The mode of the selection.\n     * @param {string} [saveChild=true] - It is used while cloning.\n     * @return {DataModel} Returns the new DataModel instance(s) after operation.\n     */\n    select (selectFn, config) {\n        const defConfig = {\n            mode: FilteringMode.NORMAL,\n            saveChild: true\n        };\n        config = Object.assign({}, defConfig, config);\n\n        const cloneConfig = { saveChild: config.saveChild };\n        let oDm;\n\n        if (config.mode === FilteringMode.ALL) {\n            const selectDm = cloneWithSelect(\n                this,\n                selectFn,\n                { mode: FilteringMode.NORMAL },\n                cloneConfig\n            );\n            const rejectDm = cloneWithSelect(\n                this,\n                selectFn,\n                { mode: FilteringMode.INVERSE },\n                cloneConfig\n            );\n            oDm = [selectDm, rejectDm];\n        } else {\n            oDm = cloneWithSelect(\n                this,\n                selectFn,\n                config,\n                cloneConfig\n            );\n        }\n\n        return oDm;\n    }\n\n    /**\n     * Returns whether datamodel has no data.\n     *\n     * @return {Boolean} Whether datamodel is empty or not.\n     */\n\n\n    isEmpty () {\n        return !this._rowDiffset.length || !this._colIdentifier.length;\n    }\n\n    /**\n     * Creates a clone  from the current DataModel instance with child parent relationship.\n     *\n     * @public\n     * @param {boolean} [saveChild=true] - Whether the cloned instance would be recorded\n     * in the parent instance.\n     * @return {DataModel} - Returns the newly cloned DataModel instance.\n     */\n    clone (saveChild = true, linkParent = true) {\n        let retDataModel;\n        if (linkParent === false) {\n            const dataObj = this.getData({\n                getAllFields: true\n            });\n            const data = dataObj.data;\n            const schema = dataObj.schema;\n            const jsonData = data.map((row) => {\n                const rowObj = {};\n                schema.forEach((field, i) => {\n                    rowObj[field.name] = row[i];\n                });\n                return rowObj;\n            });\n            retDataModel = new this.constructor(jsonData, schema);\n        }\n        else {\n            retDataModel = new this.constructor(this);\n        }\n\n        if (saveChild) {\n            this._children.push(retDataModel);\n        }\n        return retDataModel;\n    }\n\n    /**\n     * Performs projection operation on the current DataModel instance.\n     *\n     * @public\n     * @param {Array.<string | Regexp>} projField - An array of column names in string or regular expression.\n     * @param {Object} [config={}] - An optional config.\n     * @return {DataModel} Returns the new DataModel instance after operation.\n     */\n    project (projField, config) {\n        const defConfig = {\n            mode: FilteringMode.NORMAL,\n            saveChild: true\n        };\n        config = Object.assign({}, defConfig, config);\n        const fieldConfig = this.getFieldsConfig();\n        const allFields = Object.keys(fieldConfig);\n        const { mode } = config;\n\n        let normalizedProjField = projField.reduce((acc, field) => {\n            if (field.constructor.name === 'RegExp') {\n                acc.push(...allFields.filter(fieldName => fieldName.search(field) !== -1));\n            } else if (field in fieldConfig) {\n                acc.push(field);\n            }\n            return acc;\n        }, []);\n\n        normalizedProjField = Array.from(new Set(normalizedProjField)).map(field => field.trim());\n        let dataModel;\n\n        if (mode === FilteringMode.ALL) {\n            let projectionClone = cloneWithProject(this, normalizedProjField, {\n                mode: FilteringMode.NORMAL,\n                saveChild: config.saveChild\n            }, allFields);\n            let rejectionClone = cloneWithProject(this, normalizedProjField, {\n                mode: FilteringMode.INVERSE,\n                saveChild: config.saveChild\n            }, allFields);\n            dataModel = [projectionClone, rejectionClone];\n        } else {\n            let projectionClone = cloneWithProject(this, normalizedProjField, config, allFields);\n            dataModel = projectionClone;\n        }\n\n        return dataModel;\n    }\n\n    /**\n     * Returns index and field details in an object where key is the field name.\n     *\n     * @public\n     * @return {Object} - Returns the field definitions.\n     */\n    getFieldsConfig () {\n        return this._fieldConfig;\n    }\n\n    calculateFieldsConfig () {\n        this._fieldConfig = this._fieldspace.fields.reduce((acc, fieldDef, i) => {\n            acc[fieldDef.name] = {\n                index: i,\n                def: { name: fieldDef._ref.name, type: fieldDef._ref.fieldType, subtype: fieldDef._ref.subType() }\n            };\n            return acc;\n        }, {});\n        return this;\n    }\n\n\n    /**\n     * break the link between its parent and itself\n     */\n    dispose () {\n        this._parent.removeChild(this);\n        this._parent = null;\n    }\n\n    /**\n     *\n     * @param {DataModel} child : Delegates the parent to remove this child\n     */\n    removeChild (child) {\n        // remove from child list\n        let idx = this._children.findIndex(sibling => sibling === child);\n        idx !== -1 ? this._children.splice(idx, 1) : true;\n    }\n    /**\n     *\n     * @param { DataModel } parent datamodel instance which will act as its parent of this.\n     * @param { Queue } criteriaQueue Queue contains in-between operation meta-data\n     */\n    addParent (parent, criteriaQueue = []) {\n        persistDerivation(this, DM_DERIVATIVES.COMPOSE, null, criteriaQueue);\n        this._parent = parent;\n        parent._children.push(this);\n    }\n}\n\nexport default Relation;\n","import { fnList } from '../operator/group-by-function';\n\nexport const { sum, avg, min, max, first, last, count, std: sd } = fnList;\n","/**\n * The utility function to calculate major column.\n *\n * @param {Object} store - The store object.\n * @return {Function} Returns the push function.\n */\nexport default (store) => {\n    let i = 0;\n    return (...fields) => {\n        fields.forEach((val, fieldIndex) => {\n            if (!(store[fieldIndex] instanceof Array)) {\n                store[fieldIndex] = Array.from({ length: i });\n            }\n            store[fieldIndex].push(val);\n        });\n        i++;\n    };\n};\n","/**\n * Creates a JS native date object from input\n *\n * @param {string | number | Date} date Input using which date object to be created\n * @return {Date} : JS native date object\n */\nfunction convertToNativeDate (date) {\n    if (date instanceof Date) {\n        return date;\n    }\n\n    return new Date(date);\n}\n/**\n * Apply padding before a number if its less than 1o. This is used when constant digit's number to be returned\n * between 0 - 99\n *\n * @param {number} n Input to be padded\n * @return {string} Padded number\n */\nfunction pad (n) {\n    return (n < 10) ? (`0${n}`) : n;\n}\n/*\n * DateFormatter utility to convert any date format to any other date format\n * DateFormatter parse a date time stamp specified by a user abiding by rules which are defined\n * by user in terms of token. It creates JS native date object from the user specified format.\n * That native date can also be displayed\n * in any specified format.\n * This utility class only takes care of format conversion only\n */\n\n/*\n * Escapes all the special character that are used in regular expression.\n * Like\n * RegExp.escape('sgfd-$') // Output: sgfd\\-\\$\n *\n * @param text {String} : text which is to be escaped\n */\nRegExp.escape = function (text) {\n    return text.replace(/[-[\\]{}()*+?.,\\\\^$|#\\s]/g, '\\\\$&');\n};\n\n/**\n * DateTimeFormatter class to convert any user format of date time stamp to any other format\n * of date time stamp.\n *\n * @param {string} format Format of the date given. For the above date,\n * 'year: %Y, month: %b, day: %d'.\n * @class\n */\n/* istanbul ignore next */ function DateTimeFormatter (format) {\n    this.format = format;\n    this.dtParams = undefined;\n    this.nativeDate = undefined;\n}\n\n// The identifier of the tokens\nDateTimeFormatter.TOKEN_PREFIX = '%';\n\n// JS native Date constructor takes the date params (year, month, etc) in a certail sequence.\n// This defines the sequence of the date parameters in the constructor.\nDateTimeFormatter.DATETIME_PARAM_SEQUENCE = {\n    YEAR: 0,\n    MONTH: 1,\n    DAY: 2,\n    HOUR: 3,\n    MINUTE: 4,\n    SECOND: 5,\n    MILLISECOND: 6\n};\n\n/*\n * This is a default number parsing utility. It tries to parse a number in integer, if parsing is unsuccessful, it\n * gives back a default value.\n *\n * @param: defVal {Number} : Default no if the parsing to integer is not successful\n * @return {Function} : An closure function which is to be called by passing an the value which needs to be parsed.\n */\nDateTimeFormatter.defaultNumberParser = function (defVal) {\n    return function (val) {\n        let parsedVal;\n        if (isFinite(parsedVal = parseInt(val, 10))) {\n            return parsedVal;\n        }\n\n        return defVal;\n    };\n};\n\n/*\n * This is a default number range utility. It tries to find an element in the range. If not found it returns a\n * default no as an index.\n *\n * @param: range {Array} : The list which is to be serached\n * @param: defVal {Number} : Default no if the serach and find does not return anything\n * @return {Function} : An closure function which is to be called by passing an the value which needs to be found\n */\nDateTimeFormatter.defaultRangeParser = function (range, defVal) {\n    return (val) => {\n        let i;\n        let l;\n\n        if (!val) { return defVal; }\n\n        const nVal = val.toLowerCase();\n\n        for (i = 0, l = range.length; i < l; i++) {\n            if (range[i].toLowerCase() === nVal) {\n                return i;\n            }\n        }\n\n        if (i === undefined) {\n            return defVal;\n        }\n        return null;\n    };\n};\n\n/*\n * Defines the tokens which are supporter by the dateformatter. Using this definitation a value gets extracted from\n * the user specifed date string. This also formats the value for display purpose from native JS date.\n * The definition of each token contains the following named properties\n * {\n *     %token_name% : {\n *         name: name of the token, this is used in reverse lookup,\n *         extract: a function that returns the regular expression to extract that piece of information. All the\n *                  regex should be gouped by using ()\n *         parser: a function which receives value extracted by the above regex and parse it to get the date params\n *         formatter: a formatter function that takes milliseconds or JS Date object and format the param\n *                  represented by the token only.\n *     }\n * }\n *\n * @return {Object} : Definition of the all the supported tokens.\n */\nDateTimeFormatter.getTokenDefinitions = function () {\n    const daysDef = {\n        short: [\n            'Sun',\n            'Mon',\n            'Tue',\n            'Wed',\n            'Thu',\n            'Fri',\n            'Sat'\n        ],\n        long: [\n            'Sunday',\n            'Monday',\n            'Tuesday',\n            'Wednesday',\n            'Thursday',\n            'Friday',\n            'Saturday'\n        ]\n    };\n    const monthsDef = {\n        short: [\n            'Jan',\n            'Feb',\n            'Mar',\n            'Apr',\n            'May',\n            'Jun',\n            'Jul',\n            'Aug',\n            'Sep',\n            'Oct',\n            'Nov',\n            'Dec'\n        ],\n        long: [\n            'January',\n            'February',\n            'March',\n            'April',\n            'May',\n            'June',\n            'July',\n            'August',\n            'September',\n            'October',\n            'November',\n            'December'\n        ]\n    };\n\n    const definitions = {\n        H: {\n            // 24 hours format\n            name: 'H',\n            index: 3,\n            extract () { return '(\\\\d+)'; },\n            parser: DateTimeFormatter.defaultNumberParser(),\n            formatter (val) {\n                const d = convertToNativeDate(val);\n\n                return d.getHours().toString();\n            }\n        },\n        l: {\n            // 12 hours format\n            name: 'l',\n            index: 3,\n            extract () { return '(\\\\d+)'; },\n            parser: DateTimeFormatter.defaultNumberParser(),\n            formatter (val) {\n                const d = convertToNativeDate(val);\n                const hours = d.getHours() % 12;\n\n                return (hours === 0 ? 12 : hours).toString();\n            }\n        },\n        p: {\n            // AM or PM\n            name: 'p',\n            index: 3,\n            extract () { return '(AM|PM)'; },\n            parser: (val) => {\n                if (val) {\n                    return val.toLowerCase();\n                }\n                return null;\n            },\n            formatter: (val) => {\n                const d = convertToNativeDate(val);\n                const hours = d.getHours();\n\n                return (hours < 12 ? 'AM' : 'PM');\n            }\n        },\n        P: {\n            // am or pm\n            name: 'P',\n            index: 3,\n            extract () { return '(am|pm)'; },\n            parser: (val) => {\n                if (val) {\n                    return val.toLowerCase();\n                }\n                return null;\n            },\n            formatter: (val) => {\n                const d = convertToNativeDate(val);\n                const hours = d.getHours();\n\n                return (hours < 12 ? 'am' : 'pm');\n            }\n        },\n        M: {\n            // Two digit minutes 00 - 59\n            name: 'M',\n            index: 4,\n            extract () { return '(\\\\d+)'; },\n            parser: DateTimeFormatter.defaultNumberParser(),\n            formatter (val) {\n                const d = convertToNativeDate(val);\n                const mins = d.getMinutes();\n\n                return pad(mins);\n            }\n        },\n        S: {\n            // Two digit seconds 00 - 59\n            name: 'S',\n            index: 5,\n            extract () { return '(\\\\d+)'; },\n            parser: DateTimeFormatter.defaultNumberParser(),\n            formatter (val) {\n                const d = convertToNativeDate(val);\n                const seconds = d.getSeconds();\n\n                return pad(seconds);\n            }\n        },\n        K: {\n            // Milliseconds\n            name: 'K',\n            index: 6,\n            extract () { return '(\\\\d+)'; },\n            parser: DateTimeFormatter.defaultNumberParser(),\n            formatter (val) {\n                const d = convertToNativeDate(val);\n                const ms = d.getMilliseconds();\n\n                return ms.toString();\n            }\n        },\n        a: {\n            // Short name of day, like Mon\n            name: 'a',\n            index: 2,\n            extract () { return `(${daysDef.short.join('|')})`; },\n            parser: DateTimeFormatter.defaultRangeParser(daysDef.short),\n            formatter (val) {\n                const d = convertToNativeDate(val);\n                const day = d.getDay();\n\n                return (daysDef.short[day]).toString();\n            }\n        },\n        A: {\n            // Long name of day, like Monday\n            name: 'A',\n            index: 2,\n            extract () { return `(${daysDef.long.join('|')})`; },\n            parser: DateTimeFormatter.defaultRangeParser(daysDef.long),\n            formatter (val) {\n                const d = convertToNativeDate(val);\n                const day = d.getDay();\n\n                return (daysDef.long[day]).toString();\n            }\n        },\n        e: {\n            // 8 of March, 11 of November\n            name: 'e',\n            index: 2,\n            extract () { return '(\\\\d+)'; },\n            parser: DateTimeFormatter.defaultNumberParser(),\n            formatter (val) {\n                const d = convertToNativeDate(val);\n                const day = d.getDate();\n\n                return day.toString();\n            }\n        },\n        d: {\n            // 08 of March, 11 of November\n            name: 'd',\n            index: 2,\n            extract () { return '(\\\\d+)'; },\n            parser: DateTimeFormatter.defaultNumberParser(),\n            formatter (val) {\n                const d = convertToNativeDate(val);\n                const day = d.getDate();\n\n                return pad(day);\n            }\n        },\n        b: {\n            // Short month, like Jan\n            name: 'b',\n            index: 1,\n            extract () { return `(${monthsDef.short.join('|')})`; },\n            parser: DateTimeFormatter.defaultRangeParser(monthsDef.short),\n            formatter (val) {\n                const d = convertToNativeDate(val);\n                const month = d.getMonth();\n\n                return (monthsDef.short[month]).toString();\n            }\n        },\n        B: {\n            // Long month, like January\n            name: 'B',\n            index: 1,\n            extract () { return `(${monthsDef.long.join('|')})`; },\n            parser: DateTimeFormatter.defaultNumberParser(monthsDef.long),\n            formatter (val) {\n                const d = convertToNativeDate(val);\n                const month = d.getMonth();\n\n                return (monthsDef.long[month]).toString();\n            }\n        },\n        m: {\n            // Two digit month of year like 01 for January\n            name: 'm',\n            index: 1,\n            extract () { return '(\\\\d+)'; },\n            parser (val) { return DateTimeFormatter.defaultNumberParser()(val) - 1; },\n            formatter (val) {\n                const d = convertToNativeDate(val);\n                const month = d.getMonth();\n\n                return pad(month + 1);\n            }\n        },\n        y: {\n            // Short year like 90 for 1990\n            name: 'y',\n            index: 0,\n            extract () { return '(\\\\d{4})'; },\n            parser (val) {\n                if (val) {\n                    const l = val.length;\n                    val = val.substring(l - 2, l);\n                }\n\n                return DateTimeFormatter.defaultNumberParser()(val);\n            },\n            formatter (val) {\n                const d = convertToNativeDate(val);\n                let year = d.getFullYear().toString();\n                let l;\n\n                if (year) {\n                    l = year.length;\n                    year = year.substring(l - 2, l);\n                }\n\n                return year;\n            }\n        },\n        Y: {\n            // Long year like 1990\n            name: 'Y',\n            index: 0,\n            extract () { return '(\\\\d{4})'; },\n            parser: DateTimeFormatter.defaultNumberParser(),\n            formatter (val) {\n                const d = convertToNativeDate(val);\n                const year = d.getFullYear().toString();\n\n                return year;\n            }\n        }\n    };\n\n    return definitions;\n};\n\n/*\n * The tokens which works internally is not user friendly in terms of memorizing the names. This gives a formal\n * definition to the informal notations.\n *\n * @return {Object} : Formal definition of the tokens\n */\nDateTimeFormatter.getTokenFormalNames = function () {\n    const definitions = DateTimeFormatter.getTokenDefinitions();\n\n    return {\n        HOUR: definitions.H,\n        HOUR_12: definitions.l,\n        AMPM_UPPERCASE: definitions.p,\n        AMPM_LOWERCASE: definitions.P,\n        MINUTE: definitions.M,\n        SECOND: definitions.S,\n        SHORT_DAY: definitions.a,\n        LONG_DAY: definitions.A,\n        DAY_OF_MONTH: definitions.e,\n        DAY_OF_MONTH_CONSTANT_WIDTH: definitions.d,\n        SHORT_MONTH: definitions.b,\n        LONG_MONTH: definitions.B,\n        MONTH_OF_YEAR: definitions.m,\n        SHORT_YEAR: definitions.y,\n        LONG_YEAR: definitions.Y\n    };\n};\n\n/*\n * This defines the rules and declares dependencies that resolves a date parameter (year, month etc) from\n * the date time parameter array.\n *\n * @return {Object} : An object that contains dependencies and a resolver function. The dependencies values are fed\n *                  to the resolver function in that particular sequence only.\n */\nDateTimeFormatter.tokenResolver = function () {\n    const definitions = DateTimeFormatter.getTokenDefinitions();\n    const defaultResolver = (...args) => { // eslint-disable-line require-jsdoc\n        let i = 0;\n        let arg;\n        let targetParam;\n        const l = args.length;\n\n        for (; i < l; i++) {\n            arg = args[i];\n            if (args[i]) {\n                targetParam = arg;\n            }\n        }\n\n        if (!targetParam) { return null; }\n\n        return targetParam[0].parser(targetParam[1]);\n    };\n\n    return {\n        YEAR: [definitions.y, definitions.Y,\n            defaultResolver\n        ],\n        MONTH: [definitions.b, definitions.B, definitions.m,\n            defaultResolver\n        ],\n        DAY: [definitions.a, definitions.A, definitions.e, definitions.d,\n            defaultResolver\n        ],\n        HOUR: [definitions.H, definitions.l, definitions.p, definitions.P,\n            function (hourFormat24, hourFormat12, ampmLower, ampmUpper) {\n                let targetParam;\n                let amOrpm;\n                let isPM;\n                let val;\n\n                if (hourFormat12 && (amOrpm = (ampmLower || ampmUpper))) {\n                    if (amOrpm[0].parser(amOrpm[1]) === 'pm') {\n                        isPM = true;\n                    }\n\n                    targetParam = hourFormat12;\n                } else if (hourFormat12) {\n                    targetParam = hourFormat12;\n                } else {\n                    targetParam = hourFormat24;\n                }\n\n                if (!targetParam) { return null; }\n\n                val = targetParam[0].parser(targetParam[1]);\n                if (isPM) {\n                    val += 12;\n                }\n                return val;\n            }\n        ],\n        MINUTE: [definitions.M,\n            defaultResolver\n        ],\n        SECOND: [definitions.S,\n            defaultResolver\n        ]\n    };\n};\n\n/*\n * Finds token from the format rule specified by a user.\n * @param format {String} : The format of the input date specified by the user\n * @return {Array} : An array of objects which contains the available token and their occurence index in the format\n */\nDateTimeFormatter.findTokens = function (format) {\n    const tokenPrefix = DateTimeFormatter.TOKEN_PREFIX;\n    const definitions = DateTimeFormatter.getTokenDefinitions();\n    const tokenLiterals = Object.keys(definitions);\n    const occurrence = [];\n    let i;\n    let forwardChar;\n\n    while ((i = format.indexOf(tokenPrefix, i + 1)) >= 0) {\n        forwardChar = format[i + 1];\n        if (tokenLiterals.indexOf(forwardChar) === -1) { continue; }\n\n        occurrence.push({\n            index: i,\n            token: forwardChar\n        });\n    }\n\n    return occurrence;\n};\n\n/*\n * Format any JS date to a specified date given by user.\n *\n * @param date {Number | Date} : The date object which is to be formatted\n * @param format {String} : The format using which the date will be formatted for display\n */\nDateTimeFormatter.formatAs = function (date, format) {\n    const nDate = convertToNativeDate(date);\n    const occurrence = DateTimeFormatter.findTokens(format);\n    const definitions = DateTimeFormatter.getTokenDefinitions();\n    let formattedStr = String(format);\n    const tokenPrefix = DateTimeFormatter.TOKEN_PREFIX;\n    let token;\n    let formattedVal;\n    let i;\n    let l;\n\n    for (i = 0, l = occurrence.length; i < l; i++) {\n        token = occurrence[i].token;\n        formattedVal = definitions[token].formatter(nDate);\n        formattedStr = formattedStr.replace(new RegExp(tokenPrefix + token, 'g'), formattedVal);\n    }\n\n    return formattedStr;\n};\n\n/*\n * Parses the user specified date string to extract the date time params.\n *\n * @return {Array} : Value of date time params in an array [year, month, day, hour, minutes, seconds, milli]\n */\nDateTimeFormatter.prototype.parse = function (dateTimeStamp, options) {\n    const tokenResolver = DateTimeFormatter.tokenResolver();\n    const dtParams = this.extractTokenValue(dateTimeStamp);\n    const dtParamSeq = DateTimeFormatter.DATETIME_PARAM_SEQUENCE;\n    const noBreak = options && options.noBreak;\n    const dtParamArr = [];\n    const args = [];\n    let resolverKey;\n    let resolverParams;\n    let resolverFn;\n    let val;\n    let i;\n    let param;\n    let resolvedVal;\n    let l;\n\n    for (resolverKey in tokenResolver) {\n        if (!{}.hasOwnProperty.call(tokenResolver, resolverKey)) { continue; }\n\n        args.length = 0;\n        resolverParams = tokenResolver[resolverKey];\n        resolverFn = resolverParams.splice(resolverParams.length - 1, 1)[0];\n\n        for (i = 0, l = resolverParams.length; i < l; i++) {\n            param = resolverParams[i];\n            val = dtParams[param.name];\n\n            if (val === undefined) {\n                args.push(null);\n            } else {\n                args.push([param, val]);\n            }\n        }\n\n        resolvedVal = resolverFn.apply(this, args);\n\n        if ((resolvedVal === undefined || resolvedVal === null) && !noBreak) {\n            break;\n        }\n\n        dtParamArr[dtParamSeq[resolverKey]] = resolvedVal;\n    }\n\n    return dtParamArr;\n};\n\n/*\n * Extract the value of the token from user specified date time string.\n *\n * @return {Object} : An key value pair which contains the tokens as key and value as pair\n */\nDateTimeFormatter.prototype.extractTokenValue = function (dateTimeStamp) {\n    const format = this.format;\n    const definitions = DateTimeFormatter.getTokenDefinitions();\n    const tokenPrefix = DateTimeFormatter.TOKEN_PREFIX;\n    const occurrence = DateTimeFormatter.findTokens(format);\n    const tokenObj = {};\n\n    let lastOccurrenceIndex;\n    let occObj;\n    let occIndex;\n    let targetText;\n    let regexFormat;\n\n    let l;\n    let i;\n\n    regexFormat = String(format);\n\n    const tokenArr = occurrence.map(obj => obj.token);\n    const occurrenceLength = occurrence.length;\n    for (i = occurrenceLength - 1; i >= 0; i--) {\n        occIndex = occurrence[i].index;\n\n        if (occIndex + 1 === regexFormat.length - 1) {\n            lastOccurrenceIndex = occIndex;\n            continue;\n        }\n\n        if (lastOccurrenceIndex === undefined) {\n            lastOccurrenceIndex = regexFormat.length;\n        }\n\n        targetText = regexFormat.substring(occIndex + 2, lastOccurrenceIndex);\n        regexFormat = regexFormat.substring(0, occIndex + 2) +\n            RegExp.escape(targetText) +\n            regexFormat.substring(lastOccurrenceIndex, regexFormat.length);\n\n        lastOccurrenceIndex = occIndex;\n    }\n\n    for (i = 0; i < occurrenceLength; i++) {\n        occObj = occurrence[i];\n        regexFormat = regexFormat.replace(tokenPrefix + occObj.token, definitions[occObj.token].extract());\n    }\n\n    const extractValues = dateTimeStamp.match(new RegExp(regexFormat)) || [];\n    extractValues.shift();\n\n    for (i = 0, l = tokenArr.length; i < l; i++) {\n        tokenObj[tokenArr[i]] = extractValues[i];\n    }\n    return tokenObj;\n};\n\n/*\n * Give back the JS native date formed from  user specified date string\n *\n * @return {Date} : Native JS Date\n */\nDateTimeFormatter.prototype.getNativeDate = function (dateTimeStamp) {\n    if (dateTimeStamp instanceof Date) {\n        return dateTimeStamp;\n    } else if (isFinite(dateTimeStamp) && !!this.format) {\n        return new Date(dateTimeStamp);\n    }\n\n    const dtParams = this.dtParams = this.parse(dateTimeStamp);\n\n    dtParams.unshift(null);\n    this.nativeDate = new (Function.prototype.bind.apply(Date, dtParams))();\n    return this.nativeDate;\n};\n\n/*\n * Represents JS native date to a user specified format.\n *\n * @param format {String} : The format according to which the date is to be represented\n * @return {String} : The formatted date string\n */\nDateTimeFormatter.prototype.formatAs = function (format, dateTimeStamp) {\n    let nativeDate;\n\n    if (dateTimeStamp) {\n        nativeDate = this.nativeDate = this.getNativeDate(dateTimeStamp);\n    } else if (!(nativeDate = this.nativeDate)) {\n        nativeDate = this.getNativeDate(dateTimeStamp);\n    }\n\n    return DateTimeFormatter.formatAs(nativeDate, format);\n};\n\nexport { DateTimeFormatter as default };\n","/**\n * Generates domain for measure field.\n *\n * @param {Array} data - The array of data.\n * @return {Array} Returns the measure domain.\n */\nexport default (data) => {\n    let min = Number.POSITIVE_INFINITY;\n    let max = Number.NEGATIVE_INFINITY;\n\n    data.forEach((d) => {\n        if (d < min) {\n            min = d;\n        }\n        if (d > max) {\n            max = d;\n        }\n    });\n\n    return [min, max];\n};\n","/* eslint-disable */\nconst OBJECTSTRING = 'object';\nconst objectToStrFn = Object.prototype.toString;\nconst objectToStr = '[object Object]';\nconst arrayToStr = '[object Array]';\n\nfunction checkCyclicRef(obj, parentArr) {\n    let i = parentArr.length;\n    let bIndex = -1;\n\n    while (i) {\n        if (obj === parentArr[i]) {\n            bIndex = i;\n            return bIndex;\n        }\n        i -= 1;\n    }\n\n    return bIndex;\n}\n\nfunction merge(obj1, obj2, skipUndef, tgtArr, srcArr) {\n    var item,\n        srcVal,\n        tgtVal,\n        str,\n        cRef;\n    // check whether obj2 is an array\n    // if array then iterate through it's index\n    // **** MOOTOOLS precution\n\n    if (!srcArr) {\n        tgtArr = [obj1];\n        srcArr = [obj2];\n    }\n    else {\n        tgtArr.push(obj1);\n        srcArr.push(obj2);\n    }\n\n    if (obj2 instanceof Array) {\n        for (item = 0; item < obj2.length; item += 1) {\n            try {\n                srcVal = obj1[item];\n                tgtVal = obj2[item];\n            }\n            catch (e) {\n                continue;\n            }\n\n            if (typeof tgtVal !== OBJECTSTRING) {\n                if (!(skipUndef && tgtVal === undefined)) {\n                    obj1[item] = tgtVal;\n                }\n            }\n            else {\n                if (srcVal === null || typeof srcVal !== OBJECTSTRING) {\n                    srcVal = obj1[item] = tgtVal instanceof Array ? [] : {};\n                }\n                cRef = checkCyclicRef(tgtVal, srcArr);\n                if (cRef !== -1) {\n                    srcVal = obj1[item] = tgtArr[cRef];\n                }\n                else {\n                    merge(srcVal, tgtVal, skipUndef, tgtArr, srcArr);\n                }\n            }\n        }\n    }\n    else {\n        for (item in obj2) {\n            try {\n                srcVal = obj1[item];\n                tgtVal = obj2[item];\n            }\n            catch (e) {\n                continue;\n            }\n\n            if (tgtVal !== null && typeof tgtVal === OBJECTSTRING) {\n                // Fix for issue BUG: FWXT-602\n                // IE < 9 Object.prototype.toString.call(null) gives\n                // '[object Object]' instead of '[object Null]'\n                // that's why null value becomes Object in IE < 9\n                str = objectToStrFn.call(tgtVal);\n                if (str === objectToStr) {\n                    if (srcVal === null || typeof srcVal !== OBJECTSTRING) {\n                        srcVal = obj1[item] = {};\n                    }\n                    cRef = checkCyclicRef(tgtVal, srcArr);\n                    if (cRef !== -1) {\n                        srcVal = obj1[item] = tgtArr[cRef];\n                    }\n                    else {\n                        merge(srcVal, tgtVal, skipUndef, tgtArr, srcArr);\n                    }\n                }\n                else if (str === arrayToStr) {\n                    if (srcVal === null || !(srcVal instanceof Array)) {\n                        srcVal = obj1[item] = [];\n                    }\n                    cRef = checkCyclicRef(tgtVal, srcArr);\n                    if (cRef !== -1) {\n                        srcVal = obj1[item] = tgtArr[cRef];\n                    }\n                    else {\n                        merge(srcVal, tgtVal, skipUndef, tgtArr, srcArr);\n                    }\n                }\n                else {\n                    obj1[item] = tgtVal;\n                }\n            }\n            else {\n                if (skipUndef && tgtVal === undefined) {\n                    continue;\n                }\n                obj1[item] = tgtVal;\n            }\n        }\n    }\n    return obj1;\n}\n\n\nfunction extend2 (obj1, obj2, skipUndef) {\n    //if none of the arguments are object then return back\n    if (typeof obj1 !== OBJECTSTRING && typeof obj2 !== OBJECTSTRING) {\n        return null;\n    }\n\n    if (typeof obj2 !== OBJECTSTRING || obj2 === null) {\n        return obj1;\n    }\n\n    if (typeof obj1 !== OBJECTSTRING) {\n        obj1 = obj2 instanceof Array ? [] : {};\n    }\n    merge(obj1, obj2, skipUndef);\n    return obj1;\n}\n\nexport { extend2 as default };\n","/**\n * Checks whether the value is an array.\n *\n * @param  {*} val - The value to be checked.\n * @return {boolean} Returns true if the value is an array otherwise returns false.\n */\nexport function isArray (val) {\n    return Array.isArray(val);\n}\n\n/**\n * Checks whether the value is an object.\n *\n * @param  {*} val - The value to be checked.\n * @return {boolean} Returns true if the value is an object otherwise returns false.\n */\nexport function isObject (val) {\n    return val === Object(val);\n}\n\n/**\n * Checks whether the value is a string value.\n *\n * @param  {*} val - The value to be checked.\n * @return {boolean} Returns true if the value is a string value otherwise returns false.\n */\nexport function isString (val) {\n    return typeof val === 'string';\n}\n\n/**\n * Checks whether the value is callable.\n *\n * @param {*} val - The value to be checked.\n * @return {boolean} Returns true if the value is callable otherwise returns false.\n */\nexport function isCallable (val) {\n    return typeof val === 'function';\n}\n\n/**\n * Returns the unique values from the input array.\n *\n * @param {Array} data - The input array.\n * @return {Array} Returns a new array of unique values.\n */\nexport function uniqueValues (data) {\n    return [...new Set(data)];\n}\n\nexport const getUniqueId = () => `id-${new Date().getTime()}${Math.round(Math.random() * 10000)}`;\n\nconst unique = arr => ([...new Set(arr)]);\n\n/**\n * Gets the minimum difference between two consecutive numbers  in an array.\n * @param {Array} arr Array of numbers\n * @param {number} index index of the value\n * @return {number} minimum difference between values\n */\nexport const getMinDiff = (arr, index) => {\n    let diff;\n    let uniqueVals;\n    if (index !== undefined) {\n        uniqueVals = unique(arr.map(d => d[index]));\n    } else {\n        uniqueVals = unique(arr);\n    }\n    if (uniqueVals.length > 1) {\n        diff = Math.abs(uniqueVals[1] - uniqueVals[0]);\n        for (let i = 2, len = uniqueVals.length; i < len; i++) {\n            diff = Math.min(diff, Math.abs(uniqueVals[i] - uniqueVals[i - 1]));\n        }\n    } else {\n        diff = uniqueVals[0];\n    }\n\n    return diff;\n};\n\n/**\n * Checks Whether two arrays have same content.\n *\n * @param {Array} arr1 - The first array.\n * @param {Array} arr2 - The 2nd array.\n * @return {boolean} Returns whether two array have same content.\n */\nexport function isArrEqual(arr1, arr2) {\n    if (!isArray(arr1) || !isArray(arr2)) {\n        return arr1 === arr2;\n    }\n\n    if (arr1.length !== arr2.length) {\n        return false;\n    }\n\n    for (let i = 0; i < arr1.length; i++) {\n        if (arr1[i] !== arr2[i]) {\n            return false;\n        }\n    }\n\n    return true;\n}\n\n/**\n * Checks Whether two arrays have same content.\n *\n * @param {Array} arr1 - The first array.\n * @param {Array} arr2 - The 2nd array.\n * @return {boolean} Returns whether two array have same content.\n */\nexport function formatNumber(val) {\n    return val;\n}\n","export { default as DateTimeFormatter } from './date-time-formatter';\nexport { default as columnMajor } from './column-major';\nexport { default as generateMeasureDomain } from './domain-generator';\nexport { default as extend2 } from './extend2';\nexport * from './helper';\n","import { defReducer, fnList } from '../operator';\n\nclass ReducerStore {\n    constructor () {\n        this.store = new Map();\n        this.store.set('defReducer', defReducer);\n\n        Object.entries(fnList).forEach((key) => {\n            this.store.set(key[0], key[1]);\n        });\n    }\n\n    defaultReducer (...params) {\n        if (params.length) {\n            let reducer = params[0];\n            if (typeof reducer === 'function') {\n                this.store.set('defReducer', reducer);\n            } else if (typeof reducer === 'string') {\n                if (Object.keys(fnList).indexOf(reducer) !== -1) {\n                    this.store.set('defReducer', fnList[reducer]);\n                }\n            }\n            return this;\n        }\n\n        return this.store.get('defReducer');\n    }\n\n    register (name, reducer) {\n        if (typeof name === 'string' && typeof reducer === 'function') {\n            this.store.set(name, reducer);\n        }\n\n        return () => { this.__unregister(name); };\n    }\n\n    __unregister (name) {\n        if (this.store.has(name)) {\n            this.store.delete(name);\n        }\n    }\n\n    resolve (name) {\n        if (name instanceof Function) {\n            return name;\n        }\n        return this.store.get(name);\n    }\n}\n\nconst reducerStore = (function() {\n    let store = null;\n\n    function getStore () {\n        if (store === null) {\n            store = new ReducerStore();\n        }\n        return store;\n    }\n    return getStore();\n}());\n\nexport default reducerStore;\n","/**\n * The wrapper class on top of the primitive value of a field.\n *\n * @todo Need to have support for StringValue, NumberValue, DateTimeValue\n * and GeoValue. These types should expose predicate API mostly.\n */\nclass Value {\n\n  /**\n   * Creates new Value instance.\n   *\n   * @param {*} val - the primitive value from the field cell.\n   * @param {string | Field} field - The field from which the value belongs.\n   */\n    constructor (val, field) {\n        Object.defineProperty(this, '_value', {\n            enumerable: false,\n            configurable: false,\n            writable: false,\n            value: val\n        });\n\n        this.field = field;\n    }\n\n  /**\n   * Returns the field value.\n   *\n   * @return {*} Returns the current value.\n   */\n    get value () {\n        return this._value;\n    }\n\n  /**\n   * Converts to human readable string.\n   *\n   * @override\n   * @return {string} Returns a human readable string of the field value.\n   *\n   */\n    toString () {\n        return String(this.value);\n    }\n\n  /**\n   * Returns the value of the field.\n   *\n   * @override\n   * @return {*} Returns the field value.\n   */\n    valueOf () {\n        return this.value;\n    }\n}\n\nexport default Value;\n","/**\n * This file exports constants that will be used to\n * create the state store of the table layout.\n */\n/**\n * The index of top, bottom and center in the matrix\n */\nexport const VIEW_INDEX = {\n    top: 0,\n    center: 1,\n    bottom: 2\n};\n\n/**\n * The width of the grid suppied by the user.\n */\nexport const GRID_WIDTH = 'width';\n\n/**\n * The height of the grid supplied by the user.\n */\nexport const GRID_HEIGHT = 'height';\n\n/**\n  * The border for the grid\n  */\nexport const BORDER = 'border';\n\n /**\n  *  The index of the first visible row in view matrix.\n  */\nexport const ROW_POINTER = 'rowPointer';\n\n/**\n * The index of the first visible column in the view matrix.\n */\nexport const COLUMN_POINTER = 'columnPointer';\n\n/**\n * Flag to specify whether row sizes should be equal.\n */\nexport const ROW_SIZE_IS_EQUAL = 'isRowSizeEqual';\n\n/**\n * Flag to specify whether column sizes are equal.\n */\nexport const COLUMN_SIZE_IS_EQUAL = 'isColumnSizeEqual';\n\n/**\n * Field to store an array an of the widths of visible columns.\n * @computed\n */\nexport const COLUMN_WIDTHS = 'visibleColumnWidths';\n\n/**\n * Field to store an array of heights of visible rows.\n * @computed\n */\nexport const ROW_HEIGHTS = 'visibleRowHeights';\n\n/**\n * Field to store the width of the left matrix.\n * @computed\n */\nexport const LEFT_MATRIX_WIDTH = 'leftMatrixWidth';\n\n/**\n * Field to store the width of the right matrix.\n * @computed\n */\nexport const RIGHT_MATRIX_WIDTH = 'rightMatrixWidth';\n\n/**\n * Field to store the height of the top matrix.\n * @computed\n */\nexport const TOP_MATRIX_HEIGHT = 'topMatrixHeight';\n\n/**\n * Field to store the height of the bottom matrix.\n * @computed\n */\nexport const BOTTOM_MATRIX_HEIGHT = 'bottomMatrixHeight';\n\n/**\n * The dom element to render the layout inside.\n */\nexport const MOUNT_POINT = 'mount';\n\n/**\n * The id attribute of the left table element.\n */\nexport const LEFT_TABLE_ID = 'grid-left';\n\n/**\n * The id attribute of the right table element.\n */\nexport const RIGHT_TABLE_ID = 'grid-right';\n\n/**\n * The id attribute of the top table.\n */\nexport const TOP_TABLE_ID = 'grid-top';\n\n/**\n * The id attribute of the bottom table.\n */\nexport const BOTTOM_TABLE_ID = 'grid-bottom';\n\n/**\n * The id attribute of the center table.\n */\nexport const CENTER_TABLE_ID = 'grid-center';\n\n/**\n * The id attribute of the top div.\n */\nexport const TOP_DIV_ID = 'muze-div-top';\n\n/**\n * The id attribute of the bottom div.\n */\nexport const BOTTOM_DIV_ID = 'muze-div-bottom';\n\n/**\n * The id attribute of the center div.\n */\nexport const CENTER_DIV_ID = 'muze-div-center';\n\n/**\n * Field that indicates if the row configuration has changed\n */\nexport const HAVE_ROWS_CHANGED = 'haveRowsChanged';\n\n/**\n * Field that indicates if the column configuration has changed\n */\nexport const HAVE_COLUMNS_CHANGED = 'haveColumnsChanged';\n\n/**\n * Field that indicates if the values configuration for the center matrix has changed\n */\nexport const HAVE_VALUES_CHANGED = 'haveValuesChanged';\n\n/**\n * Field that indicates the width of row matrix\n */\nexport const ROW_MATRIX_WIDTH = 'rowMatrixWidth';\n\n/**\n * Field that indicates the height of row matrix\n */\nexport const COLUMN_MATRIX_HEIGHT = 'columnMatrixHeight';\n\n/**\n * Field that indicates the unit width of layout\n */\nexport const UNIT_WIDTH = 'unitWidth';\n\n/**\n * Field that indicates the unit height of layout\n */\nexport const UNIT_HEIGHT = 'unitHeight';\n\n/**\n * Field that indicates the style object\n */\nexport const STYLE = 'style';\n\n/**\n * Field that indicates the color configuration\n */\nexport const COLOR = 'color';\n\n/**\n * Field that indicates width\n */\nexport const WIDTH = 'width';\n\n/**\n * Field that indicates collpase property for border\n */\nexport const COLLAPSE = 'collapse';\n\n/**\n * Field that indicates spacing property for border\n */\nexport const SPACING = 'spacing';\n\n/**\n * Field that indicates spacing property for border\n */\nexport const DISTRIBUTION = 'distribution';\n\n/**\n * Field that indicates spacing property for border\n */\nexport const GUTTERSPACE = 'gutterSpace';\n\n/**\n * Field that indicates spacing property for border\n */\nexport const BREAK_PAGE = 'breakPage';\n\n/**\n * Field that indicates spacing property for border\n */\nexport const SHOW_ROW_BORDERS = 'showRowBorders';\n\n/**\n * Field that indicates spacing property for border\n */\nexport const SHOW_COL_BORDERS = 'showColBorders';\n\n/**\n * Field that indicates spacing property for border\n */\nexport const SHOW_VALUE_BORDERS = 'showValueBorders';\n\nexport const HEIGHT = 'height';\nexport const COLUMN = 'column';\nexport const ROW = 'row';\nexport const TOP = 'top';\nexport const LEFT = 'left';\nexport const RIGHT = 'right';\nexport const BOTTOM = 'bottom';\nexport const CENTER = 'center';\nexport const CLICK = 'click';\nexport const ROW_LEFT = 'rowLeft';\nexport const ROW_RIGHT = 'rowRight';\nexport const COLUMN_BOTTOM = 'colBottom';\nexport const COLUMN_TOP = 'colTop';\nexport const AUTO = 'auto';\nexport const ROW_SPAN = 'rowSpan';\nexport const COL_SPAN = 'colSpan';\nexport const ROW_ROOT = 'rowRoot';\nexport const COLUMN_ROOT = 'columnRoot';\nexport const PRIMARY = 'primary';\nexport const SECONDARY = 'secondary';\n","import { sanitizeIP, mergeRecursive } from 'muze-utils';\nimport { TOP, CENTER, BOTTOM } from '../enums/constants';\n\n/*\n * This is the abstract implementation of the root layout. This takes care of common work which all the layouts\n * has to handle. The common work includes sanitizaion of inputs, update, rerender, dispose etc. This class can't be\n * used directly (as ofcourse this is an abstract implementaiton), the class which is implementing it has to implement\n * the necessary methods and gives its on visual.\n */\n\n/**\n * This class is used to create a generic layout. It can be extended to create layouts\n * of different types\n * @class GenericLayout\n */\nexport default class GenericLayout {\n\n    /**\n     * Creates an instance of TableLayout.\n     * @param {HTMLElement} mountPoint DOM element/d3 selection where the layout is to be mounted\n     * @param {Object} measurement The dimensions of the layout\n     * @param {Object} config configuration to be given for the layout\n     * @param {Object} dependencies external dependencies.\n     * @memberof GenericLayout\n     *\n     * measurement : {\n     *      width : number => width of the container\n     *      height : number => height of the container\n     *      unitHeight : number => height of unit of the cells\n     *      unitWidth : number => width of unit of the cells\n     * }\n     *\n     */\n    constructor (mountPoint, measurement, config, dependencies) {\n        this._config = {};\n        this._measurement = {};\n        this._matrices = [];\n        // External dependencies to be included for the layout. This includes the ext global dependencies like\n        // smartlabel which has one single implementation of throughout the page or per isntance\n        this._dependencies = dependencies;\n\n        this.measurement(measurement);\n        this.mountPoint(mountPoint);\n        this.config(config);\n    }\n\n    /**\n     * Returns an object which is used to recreate the layout.\n     * @return {Object} the serialized components\n     */\n    serialize () {\n        return {\n            measurement: this.measurement(),\n            config: this.config(),\n            matrices: this.matrices()\n        };\n    }\n\n     /**\n     * Sets/Gets the config for the layout\n     * @param {Object} config configuration for the layout\n     * @return {Layout|Object} Gets the Config/ Returns this instance when set\n     */\n    config (config) {\n        if (config) {\n            this._config = mergeRecursive(this._config || {}, config);\n            return this;\n        }\n        return this._config;\n    }\n\n    /**\n     * Sets/Gets the measurement for the layout\n     * @param {Object} measurement measurement for the layout\n     * @return {Layout|Object} Gets the measurement/ Returns this instance when set\n     */\n    measurement (measurement) {\n        if (measurement) {\n            this._measurement = mergeRecursive(this._measurement || {}, measurement);\n\n            return this;\n        }\n        return this._measurement;\n    }\n\n    /**\n     * Sets/Gets the matrices for the layout\n     * @param {Object} matrices matrices for the layout\n     * @return {Layout|Object} Gets the matrices/ Returns this instance when set\n     */\n    matrices (matrices) {\n        if (matrices) {\n            this._matrices = sanitizeIP.typeObj([TOP, CENTER, BOTTOM], matrices);\n\n            return this;\n        }\n        return this._matrices;\n    }\n\n    /**\n     * Sets/Gets the matrix for row\n     * @param {Object} matrix matrices for the layout\n     * @return {Layout|Object} Gets the matrix/ Returns this instance when set\n     */\n    rowMatrix (matrix) {\n        if (matrix) {\n            this._rowMatrix = matrix;\n            return this;\n        }\n        return this._rowMatrix;\n    }\n\n    /**\n     * Sets/Gets the matrix for columns\n     * @param {Object} matrix matrices for the layout\n     * @return {Layout|Object} Gets the matrix/ Returns this instance when set\n     */\n    columnMatrix (matrix) {\n        if (matrix) {\n            this._columnMatrix = matrix;\n            return this;\n        }\n        return this._columnMatrix;\n    }\n\n   /**\n     * Sets/Gets the matrix for value\n     * @param {Object} matrix matrices for the layout\n     * @return {Layout|Object} Gets the matrix/ Returns this instance when set\n     */\n    centerMatrix (matrix) {\n        if (matrix) {\n            this._centerMatrix = matrix;\n            return this;\n        }\n        return this._centerMatrix;\n    }\n\n    /**\n     * Sets/Gets the mountPoint for the layout\n     * @param {Object} mountPoint mountPoint for the layout\n     * @return {Layout|Object} Gets the mountPoint/ Returns this instance when set\n     */\n    mountPoint (mountPoint) {\n        if (mountPoint) {\n            this._mountPoint = mountPoint;\n\n            return this;\n        }\n        return this._mountPoint;\n    }\n}\n","import { HEIGHT, WIDTH, COLUMN, ROW } from '../enums/constants';\n\n/**\n * Gets measurement for an instance of visual matrix\n *\n * @param {Array} matrix instance of visual matrix\n * @param {string} type height/width\n * @return {Object} Logical height/width of the matrix\n */\nexport function getMatrixMeasurement (matrix, type) {\n    if (matrix) {\n        return matrix.getLogicalSpace()[type];\n    }\n    return 0;\n}\n\n/**\n * Sets available space for an instance of visual matrix\n *\n * @param {Array} matrix instance of visual matrix\n * @param {string} type height/width\n * @param {number} value Value of measurement\n */\nexport function setMatrixMeasurement (matrix, type, value) {\n    if (matrix) {\n        const spaces = matrix.getLogicalSpace();\n        if (value && spaces[type] !== value) {\n            type === HEIGHT ? matrix.setAvailableSpace(spaces.width, value) :\n                matrix.setAvailableSpace(value, spaces.height);\n        }\n    }\n}\n\n/**\n *\n *\n * @param {*} matrix\n * @param {*} widths\n * @param {*} heights\n */\nconst setAvailableSpace = (matrix, widths, heights) => {\n    matrix.forEach((row, rIdx) => {\n        row.forEach((placeholder, cIdx) => {\n            placeholder.setAvailableSpace(widths[cIdx], heights[rIdx]);\n        });\n    });\n};\n\n/**\n *\n *\n * @param {*} layout\n * @param {*} matrix\n * @param {*} pointer\n * @returns\n */\nconst setViewSpaces = (layout, pointerType, viewSpaces) => {\n    let pointer = layout.config()[`${pointerType}Pointer`];\n    if (viewSpaces.length - 1 < pointer) {\n        pointer = 0;\n        layout.config({ [`${pointerType}Pointer`]: pointer });\n    }\n    return pointer;\n};\n\n/**\n * Computes the measurements of space for all matrices in the\n * layout\n *\n * @param {Object} layout Instance of grid layout\n * @return {Object} set of measurements for the layout\n */\nexport const computeLayoutMeasurements = (layout) => {\n    const rowMatrix = layout.rowMatrix();\n    const columnMatrix = layout.columnMatrix();\n    const centerMatrix = layout.centerMatrix();\n    const {\n        width,\n        height\n    } = layout.measurement();\n    const {\n        border\n    } = layout.config();\n    const matrices = layout.matrices();\n    const {\n        top,\n        bottom\n    } = matrices;\n\n    // Get width of row matrix\n    const rowMatrixWidth = getMatrixMeasurement(rowMatrix, WIDTH);\n\n    // Set width for column matrix\n\n    const columnMatrixWidth = width - rowMatrixWidth;\n    setMatrixMeasurement(columnMatrix, WIDTH, columnMatrixWidth);\n    const columnViewPages = columnMatrix.getViewableSpaces();\n    setViewSpaces(layout, COLUMN, columnViewPages);\n\n    // Figuring out total space needed by current view space\n    const columnViewSpace = columnViewPages[layout.config().columnPointer];\n\n    // Getting height of column matrix\n    const columnMatrixHeight = columnViewSpace.height.primary + columnViewSpace.height.secondary;\n\n    // Set height for row matrix\n    const rowMatrixHeight = height - columnMatrixHeight;\n\n    setMatrixMeasurement(rowMatrix, HEIGHT, rowMatrixHeight);\n\n    // Get heights of each cell of row matrix\n    const rowViewableSpaces = rowMatrix.getViewableSpaces();\n    setViewSpaces(layout, ROW, rowViewableSpaces);\n    const rowHeights = [].concat(...rowViewableSpaces.map(e => e.rowHeights.primary));\n    const rowWidthsPrimary = [].concat(...rowViewableSpaces.map(e => e.columnWidths.primary));\n    const rowWidthsSecondary = [].concat(...rowViewableSpaces.map(e => e.columnWidths.secondary));\n    const columnViewableSpaces = columnMatrix.getViewableSpaces();\n    // Get widths of each cell of column matrix\n    const columnWidths = [].concat(...columnViewableSpaces.map(e => e.columnWidths.primary));\n    const columnHeightsPrimary = columnViewableSpaces[0].rowHeights.primary;\n\n    const columnHeightsSecondary = [].concat(...columnViewableSpaces.map(e => e.rowHeights.secondary));\n\n    // Border adjustment for each cell in the central matrix\n    const borderWidth = border.width;\n    // Setting the available space for each cell in the centre matrix\n    centerMatrix.forEach((matrix, rIdx) => {\n        matrix.forEach((placeholder, cIdx) => {\n            placeholder.setAvailableSpace(columnWidths[cIdx] - borderWidth, rowHeights[rIdx] - borderWidth);\n        });\n    });\n    setAvailableSpace(top[0], rowWidthsPrimary, columnHeightsPrimary);\n    setAvailableSpace(top[2], rowWidthsSecondary, columnHeightsPrimary);\n    setAvailableSpace(bottom[0], rowWidthsPrimary, columnHeightsSecondary);\n    setAvailableSpace(bottom[2], rowWidthsSecondary, columnHeightsSecondary);\n\n    return {\n        rowMatrixHeight,\n        rowMatrixWidth,\n        columnMatrixHeight,\n        columnMatrixWidth\n    };\n};\n\n/**\n * Gets view matrices based on current pointers for row and column\n *\n * @param {Object} layout instance of layout\n * @param {number} rowPointer current row pointer\n * @param {number} columnPointer current column pointer\n * @return {Object} returns the view matrix and its relevant information\n */\nexport const getViewMatrices = (layout, rowPointer, columnPointer) => {\n    const rowMatrix = layout.rowMatrix();\n    const columnMatrix = layout.columnMatrix();\n    const centerMatrix = layout.centerMatrix();\n    const matrices = layout.matrices();\n    const rowMatrices = rowMatrix.getViewableData();\n    const columnMatrices = columnMatrix.getViewableData();\n    const centralMatrixPointer = {\n        row: 0,\n        column: 0\n    };\n\n    for (let i = rowPointer - 1; i >= 0; i--) {\n        const length = Math.max(rowMatrices[i].primaryMatrix.length,\n            rowMatrices[i].secondaryMatrix.length);\n        centralMatrixPointer.row += length;\n    }\n     /* istanbul ignore next */\n    for (let i = columnPointer - 1; i >= 0; i--) {\n        const matrix = columnMatrices[i];\n        const { primaryMatrix, secondaryMatrix } = matrix;\n        const length = Math.max(primaryMatrix[0] ? primaryMatrix[0].length : 0,\n            secondaryMatrix[0] ? secondaryMatrix[0].length : 0);\n        centralMatrixPointer.column += length;\n    }\n\n    matrices.top[1] = columnMatrices[columnPointer].primaryMatrix;\n    matrices.bottom[1] = columnMatrices[columnPointer].secondaryMatrix;\n\n    matrices.center[0] = rowMatrices[rowPointer].primaryMatrix;\n    matrices.center[2] = rowMatrices[rowPointer].secondaryMatrix;\n\n    const rowMatrixLen = Math.max(matrices.center[0].length, matrices.center[2].length);\n     /* istanbul ignore next */\n    const columnMatrixLen = Math.max(matrices.top[1][0] ? matrices.top[1][0].length : 0, matrices.bottom[1][0] ?\n            matrices.bottom[1][0].length : 0);\n    matrices.center[1] = centerMatrix.slice(centralMatrixPointer.row, centralMatrixPointer.row + rowMatrixLen)\n        .map(matrix => matrix.slice(centralMatrixPointer.column, centralMatrixPointer.column + columnMatrixLen));\n\n    return {\n        matrices,\n        rowPages: rowMatrices.length,\n        columnPages: columnMatrices.length\n    };\n};\n/**\n * Returns measurements of the cells of the current matrix\n *\n * @param {Object} layout instance of layout\n * @return {Object} returns the measurements for current view matrix\n */\nexport const getViewMeasurements = (layout) => {\n    const rowMatrix = layout.rowMatrix();\n    const columnMatrix = layout.columnMatrix();\n    const {\n        width,\n        height\n    } = layout.measurement();\n    const {\n        columnPointer,\n        rowPointer\n    } = layout.config();\n\n    const rowMatrixWidth = rowMatrix.getViewableSpaces()[rowPointer].width;\n    const { primary: leftWidth, secondary: rightWidth } = rowMatrixWidth;\n\n    const columnMatrixHeight = columnMatrix.getViewableSpaces()[columnPointer].height;\n    const { primary: topHeight, secondary: bottomHeight } = columnMatrixHeight;\n\n    const centerHeight = height - (topHeight + bottomHeight);\n    const centerWidth = width - (leftWidth + rightWidth);\n\n    return {\n        viewWidth: [leftWidth, centerWidth, rightWidth],\n        viewHeight: [topHeight, centerHeight, bottomHeight]\n    };\n};\n","import * as FieldNames from '../enums/constants';\n\n/**\n * Default configuration of the layout\n * @return {Object} returns the default configuration\n */\nexport const DEFAULT_CONFIGURATION = {\n    [FieldNames.BORDER]: {\n        [FieldNames.STYLE]: 'solid',\n        [FieldNames.COLOR]: '#d6d6d6',\n        [FieldNames.WIDTH]: 2,\n        [FieldNames.COLLAPSE]: true,\n        [FieldNames.SPACING]: 0\n    },\n    [FieldNames.GUTTERSPACE]: { rows: [], columns: [] },\n    [FieldNames.DISTRIBUTION]: { rows: [], columns: [] },\n    [FieldNames.BREAK_PAGE]: { rows: [], columns: [] },\n    [FieldNames.ROW_SIZE_IS_EQUAL]: false,\n    [FieldNames.COLUMN_SIZE_IS_EQUAL]: false,\n    [FieldNames.COLUMN_POINTER]: 0,\n    [FieldNames.ROW_POINTER]: 0\n};\n\n/**\n * Default measurements for the layout\n * @return {Object} returns the default measurements\n */\nexport const DEFAULT_MEASUREMENTS = {\n    [FieldNames.GRID_WIDTH]: 100,\n    [FieldNames.GRID_HEIGHT]: 100,\n    [FieldNames.UNIT_WIDTH]: 100,\n    [FieldNames.UNIT_HEIGHT]: 100\n};\n\nexport const BLANK_BORDERS = 'rgba(0,0,0,0)';\n","import VisualMatrix from '../visual-matrix/visual-matrix';\n\n/**\n * Generates the set of visual matrices for pagination and layouting algorithms\n *\n * @param {*} context\n * @param {*} matrices\n * @returns\n */\nexport const generateVisualMatrices = (context, matrices) => {\n    // Set of matrices for layout is generated starting with the left matrix\n    let leftMatrix = [];\n    let rightMatrix = [];\n    let topMatrix = [];\n    let bottomMatrix = [];\n    let begColCells;\n    let endColCells;\n    const {\n        isRowSizeEqual,\n        isColumnSizeEqual,\n        gutterSpace,\n        distribution,\n        border,\n        breakPage\n    } = context.config();\n    const {\n        minUnitHeight,\n        minUnitWidth\n    } = context.measurement();\n    const { top, center, bottom } = matrices;\n    const [topLeft, topColumns, topRight] = top;\n    const [leftRows, valueMatrix, rightRows] = center;\n    const [bottomLeft, bottomColumns, bottomRight] = bottom;\n\n    if (leftRows.length > 0) {\n        // If no left matrix is present, context will be empty\n        leftMatrix = [...topLeft, ...leftRows, ...bottomLeft];\n    }\n    if (rightRows.length > 0) {\n        // If no right matrix is present, context will be empty\n        rightMatrix = [...topRight, ...rightRows, ...bottomRight];\n    }\n    if (topColumns.length > 0 && topColumns[0].length > 0) {\n        // If no top matrix is present, context will be empty\n        topMatrix = topColumns.map((d, i) => [...topLeft[i], ...d, ...topRight[i]]);\n    }\n    if (bottomColumns.length > 0 && bottomColumns[0].length > 0) {\n        // If no bottom matrix is present, context will be empty\n        bottomMatrix = bottomColumns.map((d, i) => [...bottomLeft[i], ...d, ...bottomRight[i]]);\n    }\n    context.rowMatrix(new VisualMatrix([leftMatrix, rightMatrix], {\n        isDistributionEqual: isRowSizeEqual,\n        distribution: distribution.rows,\n        gutter: gutterSpace.rows,\n        unitMeasures: {\n            width: minUnitWidth,\n            height: minUnitHeight,\n            border: border.width\n        },\n        breakPage: breakPage.rows.map(e => e + Math.max(topLeft.length, topRight.length)),\n        extraCellLengths: [topLeft.length, bottomLeft.length]\n    }));\n\n    if (topLeft.length > 0) {\n        begColCells = topLeft[0].length;\n    } else {\n        begColCells = bottomLeft.length > 0 ? bottomLeft[0].length : 0;\n    }\n\n    if (topRight.length > 0) {\n        endColCells = topRight[0].length;\n    } else {\n        endColCells = bottomRight.length > 0 ? bottomRight[0].length : 0;\n    }\n\n    context.columnMatrix(new VisualMatrix([topMatrix, bottomMatrix], {\n        isDistributionEqual: isColumnSizeEqual,\n        distribution: distribution.columns,\n        gutter: gutterSpace.columns,\n        isTransposed: true,\n        unitMeasures: {\n            width: minUnitWidth,\n            height: minUnitHeight,\n            border: border.width\n        },\n        breakPage: breakPage.columns,\n        extraCellLengths: [begColCells, endColCells]\n    }));\n    context.centerMatrix(valueMatrix);\n\n    return matrices;\n};\n","/**\n * This file declares a table that can be extended to create a Datagrid, crosstab\n * and man other visualzations that require a tabular structure.\n */\n\nimport { getUniqueId } from 'muze-utils';\nimport GenericLayout from '../generic-layout';\nimport { DEFAULT_CONFIGURATION, DEFAULT_MEASUREMENTS } from './defaults';\nimport {\n    renderMatrices\n} from './renderer';\nimport { generateVisualMatrices } from './layout-helper';\nimport { computeLayoutMeasurements, getViewMeasurements, getViewMatrices } from './computations';\n/**\n * This class is used to create a tabular structure that\n * can house charts and values.\n *\n * @class GridLayout\n */\nexport default class GridLayout extends GenericLayout {\n\n    /**\n     * Creates an instance of TableLayout.\n     * @param {HTMLElement} matrices Set of upto 9 matrices containing the cells to be rendered\n     * @param {HTMLElement} mountPoint DOM element/d3 selection where the layout is to be mounted\n     * @param {Object} measurement The dimensions of the layout\n     * @param {Object} config external configurations.\n     * @memberof GenericLayout\n     *\n     * measurement : {\n     *      width : number => width of the container\n     *      height : number => height of the container\n     *      unitHeight : number => height of unit of the cells\n     *      unitWidth : number => width of unit of the cells\n     * }\n     *\n     */\n    constructor (matrices, mountPoint, measurement, config) {\n        super(mountPoint, measurement, config);\n        this.matrices(matrices);\n        this.config(this.constructor.defaultConfig());\n        this._layoutId = getUniqueId();\n    }\n\n    /**\n     * Returns initial set of measurements for the grid layout\n     *\n     * @static\n     * @return {Object} Returns initial set of measurements\n     * @memberof GridLayout\n     */\n    static defaultMeasurement () {\n        return DEFAULT_MEASUREMENTS;\n    }\n\n    /**\n     * Returns initialconfiguration for grid layout\n     *\n     * @static\n     * @return {Object} Returns initial configuration for grid layout\n     * @memberof GridLayout\n     */\n    static defaultConfig () {\n        return DEFAULT_CONFIGURATION;\n    }\n\n    /**\n     * This function is used to return an instance of GridLayout\n     *\n     * @return {GridLayout} Instance of grid layout.\n     * @static\n     * @memberof GridLayout\n     */\n    static create () {\n        return new GridLayout(null, null, this.defaultMeasurement(), this.defaultConfig());\n    }\n\n    /**\n     * Sets/Gets the matrices for the layout\n     *\n     * @param {Array} matrices Set of matrices\n     * @return {Object} Getter/Setter\n     * @memberof GridLayout\n     */\n    matrices (matrices) {\n        if (matrices) {\n            this._matrices = generateVisualMatrices(this, matrices);\n            return this;\n        }\n        return super.matrices(matrices);\n    }\n\n    /**\n     * Triggers the computations for the layout based on the matrices available\n     * This causes a reflow in the entire layout system.\n     *\n     * @return {Object} Layout instance\n     * @memberof GridLayout\n     */\n    triggerReflow () {\n        computeLayoutMeasurements(this);\n        this.setViewInformation();\n        return this;\n    }\n\n    /**\n     *\n     *\n     * @param {*} type\n     * @param {*} pageNumber\n     * @returns\n     * @memberof GridLayout\n     */\n    gotoPage (type, pageNumber) {\n        const { viewMatricesInfo } = this.getViewInformation();\n        const totalPages = viewMatricesInfo[`${type}Pages`];\n        const pointer = Math.min(Math.max(1, pageNumber), totalPages);\n        this.config({\n            [`${type}Pointer`]: pointer - 1\n        });\n        this.setViewInformation();\n        this.renderGrid();\n        return this;\n    }\n\n    /**\n     *\n     *\n     * @param {*} type\n     * @returns\n     * @memberof GridLayout\n     */\n    pages (type) {\n        const { viewMatricesInfo } = this.getViewInformation();\n        return {\n            totalPages: viewMatricesInfo[`${type}Pages`],\n            currentPage: this.config()[`${type}Pointer`] + 1\n        };\n    }\n\n    /**\n     *\n     *\n     * @returns\n     * @memberof GridLayout\n     */\n    setViewInformation () {\n        const {\n            rowPointer,\n            columnPointer,\n            border\n        } = this.config();\n        const viewMatricesInfo = getViewMatrices(this, rowPointer, columnPointer);\n        const layoutDimensions = getViewMeasurements(this);\n        layoutDimensions.border = border;\n        this.viewInfo = {\n            viewMatricesInfo,\n            layoutDimensions\n        };\n        return this;\n    }\n\n    /**\n     *\n     *\n     * @returns\n     * @memberof GridLayout\n     */\n    getViewInformation () {\n        return this.viewInfo;\n    }\n\n    /**\n     * Renders the layout\n     *\n     * @return {Object} current instance\n     * @memberof GridLayout\n     */\n    renderGrid (mountPoint) {\n        this.mountPoint(mountPoint);\n        if (!this.mountPoint()) {\n            return this;\n        }\n        const {\n            viewMatricesInfo,\n            layoutDimensions\n        } = this.getViewInformation();\n        // Render matrices\n        renderMatrices(this, viewMatricesInfo.matrices, layoutDimensions);\n        return this;\n    }\n}\n","import { makeElement, selectElement } from 'muze-utils';\nimport { cellSpanMaker } from './span-maker';\nimport {\n    VIEW_INDEX, TOP, LEFT, RIGHT, BOTTOM, CENTER, HEIGHT, WIDTH, ROW_SPAN, COL_SPAN\n} from '../enums/constants';\nimport { BLANK_BORDERS } from './defaults';\n\n/**\n * Creates a table element of the layout\n *\n * @param {Object} mount Mount point for table elements\n * @param {string} className defines class name\n * @param {Array} rowData set of rows for the table\n * @return {Selection} set of selections for the table\n */\nfunction renderTable (mount, className, rowData) {\n    const table = makeElement(mount, 'table', ['layout'], `${className}-table`);\n    const body = makeElement(table, 'tbody', ['layout'], `${className}-body`);\n    const rows = makeElement(body, 'tr', rowData, `${className}-tr`);\n    const cells = makeElement(rows, 'td', (d, i) => d.filter(e => e !== null).map(e =>\n                                ({ placeholder: e, rowIndex: i })), `${className}-td`, {}, key => key.placeholder.id);\n\n    return { table, body, rows, cells };\n}\n\nfunction applyRowBorders (cells, borderStyle, showBorders, color) {\n    [TOP, BOTTOM].forEach((borderType) => {\n        const style = `${borderStyle} ${showBorders[borderType] ? color : BLANK_BORDERS}`;\n        cells.style(`border-${borderType}`, style);\n    });\n}\n\nfunction applyColBorders (cells, borderStyle, showBorders, color) {\n    [LEFT, RIGHT].forEach((borderType) => {\n        const style = `${borderStyle} ${showBorders[borderType] ? color : BLANK_BORDERS}`;\n        cells.style(`border-${borderType}`, style);\n    });\n}\n\n/**\n * Applies borders to the cells in a matrix\n *\n * @param {Selection} cells Set of cells made from the matrix\n * @param {Object} border Border info for layout\n * @param {string} type Type of matrix(top/center/bottom)\n * @param {number} index Column index of matrix in the row\n */\nfunction applyBorders (cells, border, type, index) {\n    const {\n        width,\n        style,\n        color,\n        showRowBorders,\n        showColBorders,\n        showValueBorders\n    } = border;\n    const borderStyle = `${width}px ${style}`;\n\n    if (type === CENTER && index === 1) {\n        [TOP, BOTTOM, LEFT, RIGHT].forEach((borderType) => {\n            cells.style(`border-${borderType}`, `${borderStyle} ${showValueBorders[borderType] ?\n                color : BLANK_BORDERS}`);\n        });\n    } else if (type === CENTER) {\n        applyRowBorders(cells, borderStyle, showRowBorders, color);\n    } else if (index === 1) {\n        applyColBorders(cells, borderStyle, showColBorders, color);\n    }\n}\n\n/**\n * Renders a set of matrices in a row\n *\n * @param {Array} matrices Set of matrices in a row\n * @param {Selection} mountPoint Mount point for the row\n * @param {string} type top/center/bottom\n * @param {Object} dimensions dimensions of the matrix\n */\nfunction renderMatrix (matrices, mountPoint, type, dimensions, classPrefix) {\n    matrices.forEach((matrix, index) => {\n        // Creating containers for each matrix individually\n        const containerForMatrix = makeElement(mountPoint, 'div', [1], `${classPrefix}-grid-${type}-${index + 1}`)\n        .classed(`${classPrefix}-grid-${type}`, true)\n        .classed(`${classPrefix}-grid`, true)\n        .style(WIDTH, `${dimensions.viewWidth[index]}px`);\n\n        const {\n            viewMatrix,\n            spans\n        } = cellSpanMaker(matrix, type, index);\n        if (type !== CENTER) {\n            containerForMatrix.style(HEIGHT, `${dimensions.viewHeight[VIEW_INDEX[type]]}px`);\n        }\n\n        // Rendering the table components\n        const { cells } = renderTable(containerForMatrix, `${classPrefix}-grid`, viewMatrix);\n\n        if (type === CENTER && spans) {\n            cells.attr(ROW_SPAN, (cell, colIndex) => spans[cell.rowIndex][colIndex]);\n        } else if ((type === TOP || type === BOTTOM) && index === 1) {\n            cells.attr(COL_SPAN, (cell, colIndex) => {\n                const span = spans[cell.rowIndex][colIndex];\n                const placeholder = cell.placeholder;\n                if (span > 1) {\n                    placeholder.setAvailableSpace(0, placeholder.availableHeight());\n                }\n                cells.style('height', `${placeholder.availHeight()}px`);\n                return span;\n            });\n        }\n        // Rendering content within placeholders\n        cells.each(function (cell) {\n            cell.placeholder && cell.placeholder.render(this);\n        }).exit().each((cell) => {\n            cell.placeholder && cell.placeholder.remove();\n        });\n\n        applyBorders(cells, dimensions.border, type, index);\n    });\n}\n\n/**\n *\n *\n * @param {*} matrix\n * @param {*} start\n * @param {*} end\n */\nconst splitMatrices = (matrix, start, end) => matrix.map(arr => arr.slice(start, end));\n\n/**\n * Renders all the matrices of the layout\n *\n * @export\n * @param {Array} matrices Set of matrices in the layout\n * @param {Array} mountPoints Mount points for each row of matrix\n * @param {Array} layoutDimensions Dimensions(height/width) of all the matrices\n */\nexport function renderMatrices (context, matrices, layoutDimensions) {\n    const {\n        top,\n        center,\n        bottom\n    } = matrices;\n    const {\n        breakPage,\n        gutterSpace,\n        classPrefix\n    } = context.config();\n    const {\n        width\n    } = context.measurement();\n    const mount = context.mountPoint();\n\n    let newCenter = [];\n    let newBottom = [];\n    let newTop = [];\n\n    const gutter = layoutDimensions.viewHeight[1] * gutterSpace.rows[breakPage.rows[0] - 1];\n    const breakLength = breakPage.rows.length;\n\n    if (breakPage.rows.length > 0 && Math.max(center[0].length, center[2].length) <= breakPage.rows[breakLength - 1]) {\n        let prev = 0;\n        const topBreak = top[1].length / breakLength;\n        const bottomBreak = bottom[1].length / breakLength;\n        breakPage.rows.forEach((e, i) => {\n            newTop[i] = splitMatrices(top, i * topBreak, (i + 1) * topBreak);\n            newCenter[i] = splitMatrices(center, prev, e);\n            newBottom[i] = splitMatrices(bottom, i * bottomBreak, (i + 1) * bottomBreak);\n            prev = e;\n        });\n    } else {\n        newTop = [top];\n        newCenter = [center];\n        newBottom = [bottom];\n    }\n    // makeElement(mount, 'div', newCenter, `${classPrefix}-grid-layout`)\n    mount.each(function (d, i) {\n        renderMatrix(newTop[i], selectElement(this), TOP, layoutDimensions, classPrefix);\n        renderMatrix(newCenter[i], selectElement(this), CENTER, layoutDimensions, classPrefix);\n        renderMatrix(newBottom[i], selectElement(this), BOTTOM, layoutDimensions, classPrefix);\n    })\n                    .style(WIDTH, `${width}px`)\n                    .style('margin-bottom', (d, i) => {\n                        if (i !== newBottom.length - 1) { return `${Math.floor(gutter)}px`; }\n                        return 0;\n                    });\n}\n","import { ROW_LEFT, ROW_RIGHT, COLUMN_BOTTOM, COLUMN_TOP, TOP, BOTTOM } from '../enums/constants';\n/**\n * This callback is used to filter the array of\n * placeholder cells and filter out cells which have\n * appeared in a previous row.\n *\n * @param {Placeholder} colData Instance of placeholder.\n * @param {number} colIdx The index of the placeholder in array.\n * @param {Array} matrix The 2d array for which filtering is to be done\n * @param {number} rIdx The index of the row of the placeholder in array.\n * @param {string} type The type of matrix it is (rowLeft, rowRight, colTop, colBottom)\n * @return {boolean} flag to keep/remove element.\n */\nconst columnFilter = (colData, colIdx, matrix, rIdx, type) => {\n    const previousRow = matrix[rIdx - 1];\n    const currentRow = matrix[rIdx];\n\n    // Row Span for left\n    if (type === ROW_LEFT) {\n        if (!previousRow) {\n            return colData;\n        }\n        let i = 0;\n        for (;i <= colIdx; i += 1) {\n            if (currentRow[i].valueOf() !== previousRow[i].valueOf()) {\n                break;\n            }\n        }\n        return (i - 1 === colIdx) ? null : colData;\n    } else if (type === ROW_RIGHT) {\n        if (!previousRow || colIdx === 0) {\n            return colData;\n        }\n        let j = colIdx;\n        for (; j < currentRow.length; j += 1) {\n            if (previousRow[j].valueOf() !== currentRow[j].valueOf()) {\n                break;\n            }\n        }\n        return (j === currentRow.length) ? null : colData;\n    } else if (type === COLUMN_BOTTOM) {\n        if (rIdx === 0) {\n            return colData;\n        }\n        const prevCell = currentRow[colIdx - 1];\n        if (prevCell) {\n            if (prevCell.valueOf() === colData.valueOf()) {\n                const nextRow = matrix[rIdx + 1];\n                if (!nextRow) {\n                    return null;\n                }\n                if (nextRow[colIdx].valueOf() === nextRow[colIdx - 1].valueOf()) {\n                    return null;\n                }\n                return colData;\n            }\n            return colData;\n        }\n        return colData;\n    } else if (type === COLUMN_TOP) {\n        if (rIdx === matrix.length - 1 && matrix.length > 1) {\n            return colData;\n        }\n        const prevCell = currentRow[colIdx - 1];\n        if (prevCell && (prevCell.valueOf() === colData.valueOf())) {\n            const prevRow = matrix[rIdx - 1];\n            if (prevRow) {\n                if (prevRow[colIdx].valueOf() === prevRow[colIdx - 1].valueOf()) {\n                    return null;\n                }\n                return colData;\n            }\n            return null;\n        }\n        return colData;\n    }\n    return colData;\n};\n\n/**\n * This callback is used to calculate the rowspan\n * by checking for repeating entries in subsequent rows\n * at the specified column.\n *\n * @param {Placeholder} colData Instance of placeholder.\n * @param {number} colIdx The index of the placeholder in the array.\n * @param {Array} matrix The 2d array for which filtering is to be done\n * @param {number} rIdx The index of the row of the placeholder in array.\n * @return {number} The row span.\n */\nconst calcRowSpan = (colData, colIdx, matrix, rIdx) => {\n    let count = 1;\n    // if data is not header cell then rowspan\n    // has to be 1\n    if (!colData || typeof colData.valueOf() !== 'string') {\n        return 1;\n    }\n    let isNull = false;\n    while (!isNull) {\n        if (matrix[rIdx + count] && matrix[rIdx + count][colIdx] === null) {\n            count += 1;\n        } else {\n            isNull = true;\n        }\n    }\n    return count;\n};\n/**\n * This callback is used to calculate the rowspan\n * by checking for repeating entries in subsequent rows\n * at the specified column.\n *\n * @param {Placeholder} colData Instance of placeholder.\n * @param {number} colIdx The index of the placeholder in the array.\n * @param {Array} matrix The 2d array for which filtering is to be done\n * @param {number} rIdx The index of the row of the placeholder in array.\n * @return {number} The row span.\n */\nconst calcColSpan = (colData, colIdx, matrix, rIdx) => {\n    let count = 1;\n    // if data is not header cell then rowspan\n    // has to be 1\n    if (!colData || typeof colData.valueOf() !== 'string') {\n        return 1;\n    }\n    let isNull = false;\n    while (!isNull) {\n        if (matrix[rIdx][colIdx + count] === null) {\n            count += 1;\n        } else {\n            isNull = true;\n        }\n    }\n    return count;\n};\n\n// create a masking matrix to strip out repeating columns\n// and calculate rowspan.\nconst mask = function (matrix, type) {\n    return matrix.map((row, rIdx) => {\n        if (type === ROW_LEFT || type === ROW_RIGHT) {\n            const filteredRow = row.map((col, colIndex) => columnFilter(col, colIndex, matrix, rIdx, type));\n            const temp = [];\n            const diff = row.length - filteredRow.length;\n            for (let i = 0; i < diff; i += 1) {\n                temp.push(null);\n            }\n            if (type === ROW_RIGHT) {\n                temp.unshift(...filteredRow);\n                return temp;\n            }\n            temp.push(...filteredRow);\n            return temp;\n        }\n\n        const filteredRow = row.map((col, colIndex) => columnFilter(col, colIndex, matrix, rIdx, type));\n        const temp = [];\n        temp.push(...filteredRow);\n        return temp;\n    });\n};\n\n/**\n * This function is used to set the col and row spans\n * for the matrices based on repeated/hierarchichal data\n *\n * @export\n * @param {Array} matrix The 2d array for which filtering is to be done\n * @param {string} type Type of array (center, top, bottom)\n * @param {number} index Index of array in the row\n * @return {Object} containing the view matrix and their spans\n */\nexport function cellSpanMaker (matrix, type, index) {\n    let span = '';\n    if (type === TOP || type === BOTTOM) {\n        span = type === TOP ? COLUMN_TOP : COLUMN_BOTTOM;\n        const viewMatrix = mask(matrix, span);\n        const spans = viewMatrix.map((row, ridx) => row.map((col, i) => calcColSpan(col, i, viewMatrix, ridx))\n                        .filter(col => col !== 1));\n        return { viewMatrix, spans };\n    } else if (index === 0 || index === 2) {\n        span = index === 0 ? ROW_LEFT : ROW_RIGHT;\n        const viewMatrix = mask(matrix, span);\n        const spans = [];\n        viewMatrix.forEach((row, ridx) => {\n            spans[ridx] = spans[ridx] || [];\n            row.forEach((col, i) => {\n                if (viewMatrix[ridx][i]) {\n                    const currSpan = calcRowSpan(col, i, viewMatrix, ridx);\n                    currSpan && spans[ridx].push(currSpan);\n                }\n            });\n        });\n        return { viewMatrix, spans };\n    }\n    return { viewMatrix: matrix };\n}\n","/**\n * @module Layout\n * This file is used to export all the public classes in this module.\n */\n\nexport { GridLayout } from './grid-layout';\n","/**\n * This file exports utility functions that are used across the layout module\n */\nimport { Symbols } from 'muze-utils';\nimport { PRIMARY, SECONDARY, HEIGHT, WIDTH } from '../enums/constants';\n\nconst nest = Symbols.nest;\n/**\n *\n *\n * @param {*} isTransposed\n * @returns\n */\nconst getMeasureInfo = (isTransposed) => {\n    if (isTransposed) {\n        return {\n            firstMeasure: HEIGHT,\n            secondMeasure: WIDTH\n        };\n    }\n    return {\n        firstMeasure: WIDTH,\n        secondMeasure: HEIGHT\n    };\n};\n\n/**\n *\n *\n * @param {*} i\n * @param {*} page\n * @returns\n */\nconst findInPage = (i, page) => {\n    let count = 0;\n    for (const x in page) {\n        if (i < page[x]) {\n            count = x;\n            break;\n        }\n    }\n    return count;\n};\n\n/**\n * Creates a single matrix from two matrices\n *\n * @param {Array<Array>} matrix Input matrix\n * @return {Array<Array>} Joined matrix\n * @memberof VisualMatrix\n */\nexport const combineMatrices = (matrix, config) => {\n    const { isTransposed } = config;\n    let joinedMatrix = matrix[0].length > 0 ? matrix[0] : matrix[1];\n    if (isTransposed) {\n        joinedMatrix = matrix[0].length > 0 ? [...matrix[0]] : [];\n        joinedMatrix = matrix[1].length > 0 ? [...joinedMatrix, ...matrix[1]] : joinedMatrix;\n    } else {\n        joinedMatrix = joinedMatrix.map((row, rowIndex) => {\n            let rowData = [];\n            if (matrix[0].length > 0) {\n                rowData = [...matrix[0][rowIndex]];\n            }\n            if (matrix[1].length > 0) {\n                rowData = [...rowData, ...matrix[1][rowIndex]];\n            }\n            return rowData;\n        });\n    }\n    return joinedMatrix;\n};\n\n/**\n * Creates a hirachical tree from the context\n *\n * @param {Object} context context for creating tree\n * @return {Object} nested tree\n */\nexport const createTree = (context) => {\n    let matrixTree = {};\n    let lastLevelKey = 0;\n    let facet = PRIMARY;\n    const nestFn = nest();\n    const keys = [];\n    const layoutMatrix = context._layoutMatrix;\n    const primaryMatrix = context.primaryMatrix();\n    const secondaryMatrix = context.secondaryMatrix();\n    const { isTransposed, breakPage } = context.config();\n\n    if (!isTransposed) {\n        if (primaryMatrix.length === 0) {\n            facet = PRIMARY;\n        } else if (secondaryMatrix.length === 0) {\n            facet = SECONDARY;\n        } else {\n            facet = primaryMatrix.length >= secondaryMatrix.length ? PRIMARY : SECONDARY;\n        }\n        if (primaryMatrix.length > 0) {\n            for (let i = 0; i < primaryMatrix[0].length - 1; i++) {\n                keys.push(i);\n            }\n            keys.push(primaryMatrix[0].length - 1);\n            if (facet === SECONDARY || secondaryMatrix.length === 0) {\n                lastLevelKey = primaryMatrix[0].length - 1;\n            }\n        }\n        if (secondaryMatrix.length > 0) {\n            const keyLength = primaryMatrix.length > 0 ? primaryMatrix[0].length : 0;\n            for (let i = secondaryMatrix[0].length - 1; i > 0; i--) {\n                keys.push(i + keyLength);\n            }\n            keys.push(keyLength);\n\n            if (facet === PRIMARY) {\n                lastLevelKey = keyLength;\n            }\n        } else {\n            lastLevelKey = primaryMatrix.length > 0 ? primaryMatrix[0].length - 1 : 0;\n        }\n        keys.forEach((key) => {\n            let counter = -1;\n            return nestFn.key((d) => {\n                counter++;\n                return `${d[key].valueOf()}-${findInPage(counter, breakPage)}`;\n            });\n        });\n        matrixTree = nestFn.entries(layoutMatrix);\n    } else {\n        if (primaryMatrix.length === 0) {\n            facet = PRIMARY;\n        } else if (secondaryMatrix.length === 0) {\n            facet = SECONDARY;\n        } else {\n            facet = primaryMatrix.length >= secondaryMatrix.length ? PRIMARY : SECONDARY;\n        }\n        if (primaryMatrix.length > 0) {\n            for (let i = 0; i < primaryMatrix.length - 1; i++) {\n                keys.push(i);\n            }\n            // if (facet === PRIMARY) {\n            keys.push(primaryMatrix.length - 1);\n            // } else {\n            if (facet === SECONDARY) {\n                lastLevelKey = primaryMatrix.length - 1;\n            }\n        }\n        if (secondaryMatrix.length > 0) {\n            const primaryMatrixLength = primaryMatrix.length;\n            for (let i = secondaryMatrix.length - 1; i > 0; i--) {\n                keys.push(i + primaryMatrixLength);\n            }\n            // if (facet === SECONDARY) {\n            keys.push(primaryMatrixLength);\n            // }\n            if (facet === PRIMARY) {\n                lastLevelKey = primaryMatrixLength;\n            }\n        }\n        keys.forEach((key) => {\n            let counter = -1;\n            return nestFn.key((d) => {\n                counter++;\n                return `${d[key].valueOf()}-${findInPage(counter, breakPage)}`;\n            });\n        });\n        let newMatrix = [];\n        newMatrix = layoutMatrix[0].map((col, colIndex) => layoutMatrix.map(row => row[colIndex]));\n        matrixTree = nestFn.entries(newMatrix);\n    }\n    return { tree: matrixTree, lastLevelKey };\n};\n\n/**\n * Gives the min measues\n *\n * @param {boolean} isTransposed is column matrix\n * @param {Object} unitMeasures min measures to be given to cells\n * @return {Object} dimension min cell\n */\nexport const getMinMeasures = (isTransposed, unitMeasures) => {\n    if (!isTransposed) {\n        return {\n            height: unitMeasures.height,\n            width: 0\n        };\n    }\n    return {\n        height: 0,\n        width: unitMeasures.width\n    };\n};\n\n/**\n * Get the logical space from the tree\n *\n * @param {Node} item tree to be calculated\n * @param {number} measures width and height\n * @param {Array} minMeasures min measures for a cell\n * @param {Array} maxMeasure max measures for a col/row\n * @return {Object} dimension\n */\nexport const getLogicalSpace = (item, measures, minMeasures, maxMeasure = []) => {\n    const { firstMeasure, secondMeasure } = measures;\n    let firstMeasureValue = 0;\n    let secondMeasureValue = 0;\n    item.values.forEach((valueArray) => {\n        let fMeasure = 0;\n        let sMeasure = 0;\n        valueArray.forEach((placeholder, colIndex) => {\n            placeholder.logicalSpace(null);\n            const space = placeholder.getLogicalSpace();\n            sMeasure = Math.max(sMeasure, +space[secondMeasure], minMeasures[secondMeasure]);\n            maxMeasure[colIndex] = Math.max(maxMeasure[colIndex] || 0, space[firstMeasure]);\n            fMeasure += +maxMeasure[colIndex];\n        });\n        secondMeasureValue += sMeasure;\n        firstMeasureValue = Math.max(firstMeasureValue, fMeasure);\n        item.space = {\n            [secondMeasure]: Math.ceil(secondMeasureValue),\n            [firstMeasure]: Math.ceil(firstMeasureValue)\n        };\n    });\n    return {\n        [secondMeasure]: secondMeasureValue,\n        [firstMeasure]: firstMeasureValue\n    };\n};\n\n/**\n * Computes the logical spcae taken by the matrix tree\n *\n * @param {*} [item={}] tree to be viewed\n * @param {boolean} [isTransposed=false] is column matrix\n * @param {*} unitMeasures min measues for a cell\n * @param {Array} maxMeasure max measures for a col/row\n * @return {Object} logical space taken\n */\nexport const computeLogicalSpace = (item = {}, config, maxMeasures) => {\n    const { isTransposed = false, unitMeasures } = config;\n    const { firstMeasure, secondMeasure } = getMeasureInfo(isTransposed);\n    const { values } = item;\n    const minMeasures = getMinMeasures(isTransposed, unitMeasures);\n    if (values[0].key) {\n        const logicalSpace = { [firstMeasure]: 0, [secondMeasure]: 0 };\n\n        values.forEach((valueItem) => {\n            // Compute logical space for lowest level\n            const space = computeLogicalSpace(valueItem, config, maxMeasures);\n            // Set logical space for first measure\n            logicalSpace[firstMeasure] = Math.max(logicalSpace[firstMeasure], space[firstMeasure],\n                minMeasures[firstMeasure]);\n            // Set logical space for second measure\n            logicalSpace[secondMeasure] += +space[secondMeasure];\n        });\n        item.space = logicalSpace;\n        return logicalSpace;\n    }\n    return getLogicalSpace(item, { firstMeasure, secondMeasure }, minMeasures, maxMeasures);\n};\n\n/**\n * Gives the space taken by a row\n *\n * @param {Array} row matrix array of rows\n * @return {Object} dimension of the row\n */\nexport const spaceTakenByRow = (row) => {\n    let height = 0;\n    let width = 0;\n    row.forEach((col) => {\n        const spaces = col.getLogicalSpace();\n        height = Math.max(height, spaces.height);\n        width += spaces.width;\n    });\n    return {\n        width,\n        height\n    };\n};\n\n/**\n * Gives the space taken by a column\n *\n * @param {Array<Array>} matrix column matrix\n * @param {number} colIndex column index\n * @return {Object} dimension of the column\n */\nexport const spaceTakenByColumn = (matrix, colIndex) => {\n    let height = 0;\n    let width = 0;\n    matrix.forEach((row) => {\n        const col = row[colIndex];\n        const spaces = col.getLogicalSpace();\n        width = Math.max(width, spaces.width);\n        height += spaces.height;\n    });\n    return {\n        width,\n        height\n    };\n};\n\n/**\n * Creates different level matrices\n *\n * @param {Object} item matrix tree\n * @param {boolean} isTransposed is column matrix\n * @return {Object} matrix of each level\n */\nexport const createMatrixEachLevel = (item, isTransposed) => {\n    if (item.values[0].key) {\n        const arr = [];\n        item.values.forEach((child) => {\n            if (!isTransposed) {\n                arr.push(...createMatrixEachLevel(child, isTransposed));\n            } else {\n                const eachLevel = createMatrixEachLevel(child, isTransposed);\n                eachLevel.forEach((e, i) => {\n                    arr[i] = arr[i] || [];\n                    arr[i].push(...e);\n                });\n            }\n        });\n        item.matrix = arr;\n        return arr;\n    }\n    if (!isTransposed) {\n        item.matrix = item.values;\n    } else {\n        item.matrix = item.values[0].map((col, colIndex) => item.values.map(row => row[colIndex]));\n    }\n    return item.matrix;\n};\n\n/**\n * Breaks the matrix into two part\n *\n * @param {Array<Array>} matrix input matrix\n * @param {boolean} isTransposed is column matrix\n * @param {number} breakPointer point in matrix where it is to be broken\n * @return {Array} two broken matrix\n */\nexport const breakMatrix = (matrix, isTransposed, breakPointer) => {\n    const primaryMatrix = [];\n    const secondaryMatrix = [];\n    if (isTransposed) {\n        matrix.forEach((row, rowIndex) => {\n            if (rowIndex >= breakPointer) {\n                secondaryMatrix.push(row);\n            } else {\n                primaryMatrix.push(row);\n            }\n        });\n    } else {\n        matrix.forEach((row, rowIndex) => {\n            row.forEach((column, columnIndex) => {\n                if (columnIndex >= breakPointer) {\n                    secondaryMatrix[rowIndex] = secondaryMatrix[rowIndex] || [];\n                    secondaryMatrix[rowIndex].push(column);\n                } else {\n                    primaryMatrix[rowIndex] = primaryMatrix[rowIndex] || [];\n                    primaryMatrix[rowIndex].push(column);\n                }\n            });\n        });\n    }\n    return [primaryMatrix, secondaryMatrix];\n};\n\n/**\n * Distributed width returned\n *\n * @param {Object} context context for the width distibution\n * @return {number} distributed widths\n */\nexport const getDistributedWidth = (context, layoutConfig) => {\n    const {\n        availableWidth,\n        width,\n        row\n    } = context;\n    const {\n        isDistributionEqual,\n        isTransposed,\n        distribution\n    } = layoutConfig;\n    let distSum = 0;\n    if (distribution && distribution[0]) {\n        distSum = distribution.reduce((t, n) => {\n            t += n;\n            return t;\n        });\n    }\n    return row.map((col, colIndex) => {\n        const space = col.getLogicalSpace().width;\n        if (isTransposed) {\n            if (distribution.length > 0) {\n                return (availableWidth * distribution[colIndex] / distSum) - 2;\n            } else if (isDistributionEqual || width === 0) {\n                const rowLen = row.length;\n                return (availableWidth / rowLen) - 2;\n            }\n        }\n        return (space + (availableWidth - width) * (space / width)) - 2;\n    });\n};\n\n/**\n * Distributeed heights returned\n *\n * @param {Object} context input for the height distribution\n * @return {Object} distribured heights\n */\nexport const getDistributedHeight = (context) => {\n    let distSum = 0;\n    let gutterSum = 0;\n    let heightWithoutGutter = 0;\n    const {\n        isTransposed,\n        distribution,\n        availableHeight,\n        height,\n        isDistributionEqual,\n        gutter,\n        matrix,\n        cIdx\n    } = context;\n\n    if (distribution && distribution[0] !== undefined) {\n        distSum = distribution.reduce((t, n) => {\n            t += n;\n            return t;\n        });\n    }\n    if (gutter && gutter[0] !== undefined) {\n        gutterSum = gutter.reduce((t, n) => {\n            t += n;\n            return t;\n        });\n    }\n    heightWithoutGutter = availableHeight - Math.floor(availableHeight * gutterSum);\n\n    const colLen = matrix.length;\n    return matrix.map((row, rIdx) => {\n        const col = row[cIdx];\n        const space = col.getLogicalSpace().height;\n\n        if (!isTransposed) {\n            if (distribution.length > 0 && colLen === distribution.length) {\n                return (heightWithoutGutter * distribution[rIdx] / distSum) - 2;\n            } else if (isDistributionEqual || context.height === 0) {\n                return (heightWithoutGutter / colLen) - 2;\n            }\n        }\n        return (space + (heightWithoutGutter - height) * (space / height)) - 2;\n    });\n};\n\n/**\n *\n *\n * @param {*} arr\n * @param {*} beg\n * @param {*} end\n */\nexport const extraCellsRemover = (arr, beg, end) => arr.slice(beg, -end);\n\n/**\n * Creates matrix instancess\n *\n * @param {Array} [arr=[]] mutated arry\n * @param {number} depth depth of the tree\n * @param {Array} matrixInfo Details about the matrix(tree, etc) to be inserted\n * @param {boolean} layout Instance of layout\n */\nexport const createMatrixInstances = (arr = [], depth, matrixInfo, layout) => {\n    const breakPointer = layout._breakPointer;\n    const config = layout.config();\n    const {\n        isTransposed\n    } = config;\n    const {\n        tree,\n        layoutMatrix\n    } = matrixInfo;\n\n    if (depth === 0) {\n        const brokenMatrix = breakMatrix(tree.matrix, isTransposed, breakPointer);\n        arr.push({\n            matrix: tree.matrix,\n            primaryMatrix: brokenMatrix[0],\n            secondaryMatrix: brokenMatrix[1],\n            space: tree.space\n        });\n        return arr;\n    }\n    const nextLevel = depth - 1;\n    tree.values.forEach((e) => {\n        createMatrixInstances(arr, nextLevel, {\n            tree: e,\n            layoutMatrix\n        }, layout);\n    });\n    return arr;\n};\n","import { PRIMARY } from '../enums/constants';\n/**\n *\n *\n */\nexport const defaultConfig = {\n    distribution: [],\n    classPrefix: 'muze',\n    isDistributionEqual: true,\n    unitMeasures: {\n        height: 100,\n        width: 100,\n        border: 1\n    },\n    isTransposed: false,\n    facet: PRIMARY,\n    extraCellLengths: []\n};\n","import { mergeRecursive } from 'muze-utils';\n\nexport const PROPS = {\n    config: {\n        sanitization: (context, value) => mergeRecursive(context._config || {}, value)\n    },\n    maxMeasures: {},\n    availableSpace: {},\n    logicalSpace: {}\n};\n","import { mergeRecursive, generateGetterSetters } from 'muze-utils';\nimport {\n    createTree,\n    extraCellsRemover,\n    combineMatrices,\n    spaceTakenByColumn,\n    getDistributedHeight,\n    getDistributedWidth,\n    spaceTakenByRow,\n    computeLogicalSpace,\n    createMatrixEachLevel,\n    createMatrixInstances\n  } from '../utils';\nimport { PROPS } from './props';\nimport { COLUMN_ROOT, ROW_ROOT, HEIGHT, WIDTH } from '../enums/constants';\nimport { defaultConfig } from './default-config';\n\n/**\n * This class used to create column / row matrix for GridLayout\n *\n * @class VisualMatrix\n */\nexport default class VisualMatrix {\n\n    /**\n     *Creates an instance of VisualMatrix.\n     * @param {any} matrix Two set of matrices\n     * @param {any} [config={}] Configuration for VisualMatrix\n     * @memberof VisualMatrix\n     */\n    constructor (matrix, config = {}) {\n        // Prepare matrices\n        this._lastLevelKey = 0;\n        this._primaryMatrix = matrix[0] || [];\n        this._secondaryMatrix = matrix[1] || [];\n        this._maxMeasures = [];\n        this._availableSpace = {};\n\n        // Store the config\n        generateGetterSetters(this, PROPS);\n        const defCon = Object.assign({}, this.constructor.defaultConfig());\n        this.config(mergeRecursive(defCon, config));\n\n        this._breakPointer = this.config().isTransposed ? matrix[0].length :\n            (matrix[0].length > 0 ? matrix[0][0].length : 0);\n        this._layoutMatrix = combineMatrices([matrix[0] || [], matrix[1] || []], this.config());\n\n        // Create Tree\n        this._tree = {\n            key: this.config().isTransposed ? COLUMN_ROOT : ROW_ROOT,\n            values: this.createTree()\n        };\n        this._logicalSpace = this.setLogicalSpace();\n    }\n\n    /**\n     *\n     *\n     * @param {*} params\n     * @returns\n     * @memberof VisualMatrix\n     */\n    primaryMatrix (...params) {\n        if (params.length) {\n            return this;\n        }\n        return this._primaryMatrix;\n    }\n\n    /**\n     *\n     *\n     * @param {*} params\n     * @returns\n     * @memberof VisualMatrix\n     */\n    secondaryMatrix (...params) {\n        if (params.length) {\n            return this;\n        }\n        return this._secondaryMatrix;\n    }\n\n    /**\n     *\n     *\n     * @param {*} params\n     * @returns\n     * @memberof VisualMatrix\n     */\n    tree (...params) {\n        if (params.length) {\n            return this;\n        }\n        return this._tree;\n    }\n\n    /**\n     *\n     *\n     * @static\n     * @return\n     * @memberof VisualMatrix\n     */\n    static defaultConfig () {\n        return defaultConfig;\n    }\n\n    /**\n     *\n     *\n     * @return\n     * @memberof VisualMatrix\n     */\n    createTree () {\n        const { tree, lastLevelKey } = createTree(this);\n        this._lastLevelKey = lastLevelKey;\n        return tree;\n    }\n\n    /**\n     * Computes the logical space taken by the entire matrixTree\n     *\n     * @return {Object} Logical space taken\n     * @memberof VisualMatrix\n     */\n    setLogicalSpace () {\n        const {\n            isTransposed\n        } = this.config();\n        const matrixTree = this.tree();\n        createMatrixEachLevel(matrixTree, isTransposed);\n        return computeLogicalSpace(matrixTree, this.config(), this.maxMeasures());\n    }\n\n    /**\n     * Returns the space taken by visual matrix\n     *\n     * @return {Object} space taken by the matrix\n     * @memberof VisualMatrix\n     */\n    getLogicalSpace () {\n        return this.logicalSpace();\n    }\n\n    /**\n     * Sets the provied space to the visual matrix\n     *\n     * @param {number} width width provided\n     * @param {number} height height provided\n     * @memberof VisualMatrix\n     */\n    setAvailableSpace (width, height) {\n        this.availableSpace({ width, height });\n        const tree = this.tree();\n        const heightMeasures = this.populateMaxMeasures(HEIGHT, tree);\n        const widthMeasures = this.populateMaxMeasures(WIDTH, tree);\n        const depth = this.calculateDepth(widthMeasures, heightMeasures);\n\n        this.viewableMatrix = this.createViewPortMatrix(depth);\n        this.viewableMeasures = this.redistribute(this.viewableMatrix, width, height);\n        return this;\n    }\n\n    /**\n     * Populate the max measures in the array\n     *\n     * @param {Array} measures array to be filled with max measures\n     * @param {Object} matrixTree matrix tree of visual matrix\n     * @param {number} measure width or height\n     * @param {number} [depth=0] depth of the tree that to be calculated\n     * @memberof VisualMatrix\n     */\n    populateMaxMeasures (type, matrixTree, depth = 0, measures = []) {\n        measures[depth] = Math.max(measures[depth] || 0, matrixTree.space[type]);\n        if (matrixTree.values) {\n            const childDepth = depth + 1;\n            matrixTree.values.forEach((child) => {\n                if (child.space) {\n                    measures = this.populateMaxMeasures(type, child, childDepth, measures);\n                }\n            });\n        }\n        return measures;\n    }\n\n    /**\n     * Calculates the depth of the tree that can be viewed\n     *\n     * @param {Array} widthMeasures array of widths\n     * @param {Array} heightMeasures array of heights\n     * @return {number} depth of the tree\n     * @memberof VisualMatrix\n     */\n    calculateDepth (widthMeasures, heightMeasures) {\n        let i;\n        let j;\n        const { height, width } = this.availableSpace();\n\n        for (i = 0; i < heightMeasures.length; i++) {\n            if (heightMeasures[i] <= height) break;\n        }\n        for (j = 0; j < widthMeasures.length; j++) {\n            if (widthMeasures[j] <= width) break;\n        }\n        return Math.min(widthMeasures.length - 1, Math.max(i, j));\n    }\n\n    /**\n     * Redistributes the provied space to all cells\n     *\n     * @param {*} viewableMatrix current viewport matrix\n     * @param {*} width provied width\n     * @param {*} height provied height\n     * @return {Object} current viewports matrixes with measures\n     * @memberof VisualMatrix\n     */\n    redistribute (viewableMatrix, width, height) {\n        let maxHeights = [];\n        let maxWidths = [];\n        const {\n            isTransposed\n        } = this.config();\n\n        viewableMatrix.forEach((matrixInst) => {\n            const matrix = matrixInst.matrix;\n            const mWidth = 0;\n            const mHeight = 0;\n            const options = { mWidth, mHeight, matrix, width, height, maxHeights, maxWidths };\n            const maxMeasures = isTransposed ? this.redistributeColumnWise(options) : this.redistributeRowWise(options);\n            maxWidths = maxMeasures.maxWidths;\n            maxHeights = maxMeasures.maxHeights;\n        });\n\n        const measurements = viewableMatrix.map((matrixInst, i) => {\n            let heightMeasures;\n            let columnMeasures;\n            const cellDimOptions = { matrixInst, maxWidths, maxHeights, matrixIndex: i };\n            const { heights, widths, rowHeights, columnWidths } = this.getCellDimensions(cellDimOptions);\n\n            if (!isTransposed) {\n                heightMeasures = [height, height];\n                columnMeasures = widths;\n            } else {\n                heightMeasures = heights;\n                columnMeasures = [width, width];\n            }\n            return {\n                rowHeights: {\n                    primary: rowHeights[0],\n                    secondary: rowHeights[1]\n                },\n                columnWidths: {\n                    primary: columnWidths[0],\n                    secondary: columnWidths[1]\n                },\n                height: {\n                    primary: heightMeasures[0],\n                    secondary: heightMeasures[1]\n                },\n                width: {\n                    primary: columnMeasures[0],\n                    secondary: columnMeasures[1]\n                }\n            };\n        });\n\n        return measurements;\n    }\n\n    /**\n     * Gets the viewable measures for the current viewable matrix\n     *\n     * @return {Object} Set of viewable measures\n     * @memberof VisualMatrix\n     */\n    getViewableSpaces () {\n        return this.viewableMeasures;\n    }\n\n    /**\n     * Returns the matrix that can be viewed in the current viewport\n     *\n     * @return {Array} Set of matrices that can be viewed\n     * @memberof VisualMatrix\n     */\n    getViewableData () {\n        return this.viewableMatrix;\n    }\n\n    /**\n     *\n     *\n     * @return\n     * @memberof VisualMatrix\n     */\n    removeExtraCells () {\n        const {\n            isTransposed,\n            extraCellLengths\n        } = this.config();\n        const matrix = this._layoutMatrix;\n        const tree = mergeRecursive({}, this.tree());\n        const begCellLen = extraCellLengths[0];\n        const endCellLen = extraCellLengths[1] || Number.NEGATIVE_INFINITY;\n        const layoutMatrix = !isTransposed ? extraCellsRemover(matrix, begCellLen, endCellLen) :\n        matrix.slice(0).map(e => extraCellsRemover(e, begCellLen, endCellLen));\n\n        tree.values = extraCellsRemover(tree.values, begCellLen, endCellLen);\n        if (!isTransposed) {\n            tree.matrix = extraCellsRemover(tree.matrix, begCellLen, endCellLen);\n        } else {\n            tree.matrix = tree.matrix.map(e => extraCellsRemover(e, begCellLen, endCellLen));\n        }\n        return {\n            tree,\n            layoutMatrix\n        };\n    }\n\n    /**\n     * Creates the viewport that can be viewed together\n     *\n     * @param {number} depth maxDepth that can be viewed in the viewport\n     * @return {Array<Object>} Set of matrices that can be viewed\n     * @memberof VisualMatrix\n     */\n    createViewPortMatrix (depth) {\n        const arr = [];\n        createMatrixInstances(arr, depth, this.removeExtraCells(), this);\n        return arr;\n    }\n\n    /**\n     * Distibutes the given space row wisely\n     *\n     * @param {Object} options Redistribution information\n     * @memberof VisualMatrix\n     */\n    redistributeRowWise (options) {\n        let cWidths = [];\n        let rHeights = [];\n        let mHeight = 0;\n        const maxMeasures = this.maxMeasures();\n        const {\n            isDistributionEqual,\n            distribution,\n            isTransposed,\n            gutter\n        } = this.config();\n        const { matrix, width, height, maxHeights, maxWidths } = options;\n\n        mHeight = spaceTakenByColumn(matrix, this._lastLevelKey).height;\n\n        const maxWidth = maxMeasures.reduce((t, n) => {\n            t += n;\n            return t;\n        });\n        if (maxWidth > 0) {\n            cWidths = maxMeasures.map(space => space + (width - maxWidth) * (space / maxWidth));\n        } else {\n            cWidths = maxMeasures.map(() => 0);\n        }\n        rHeights = getDistributedHeight({\n            matrix,\n            cIdx: this._lastLevelKey,\n            height: mHeight,\n            availableHeight: height,\n            isDistributionEqual,\n            distribution,\n            isTransposed,\n            gutter\n        });\n        maxWidths.push(cWidths);\n        maxHeights.push(rHeights);\n        return { maxWidths, maxHeights };\n    }\n\n    /**\n     * Distibutes the given space column wisely\n     *\n     * @param {Object} options Redistribution information\n     * @memberof VisualMatrix\n     */\n    redistributeColumnWise (options) {\n        let rHeights = [];\n        const { matrix, width, maxHeights, maxWidths } = options;\n        const borderWidth = this.config().unitMeasures.border;\n        const mWidth = spaceTakenByRow(matrix[this._lastLevelKey]).width;\n        const cWidths = getDistributedWidth({\n            row: matrix[this._lastLevelKey],\n            width: mWidth,\n            availableWidth: width\n        }, this.config());\n\n        matrix.forEach((row, rIdx) => row.forEach((col, cIdx) => {\n            const oldLogicalSpace = col.getLogicalSpace().height;\n            col.setAvailableSpace(cWidths[cIdx] - borderWidth, oldLogicalSpace);\n            rHeights[rIdx] = Math.max(rHeights[rIdx] || 0, col.getLogicalSpace().height);\n        }));\n\n        if (maxHeights.length > 0) {\n            rHeights = rHeights.map((e, i) => Math.max(e, maxHeights[0][i]));\n        }\n\n        maxHeights.push(rHeights);\n\n        for (let x = 0; x < maxHeights.length; x++) {\n            maxHeights[x] = rHeights;\n        }\n        maxWidths.push(cWidths);\n        return { maxHeights, maxWidths };\n    }\n\n    /**\n     * Dispatch the calculated cell dimensions to all the cells\n     *\n     * @param {Object} options cell dimension information\n     * @return {Object} row and column heights / widths\n     * @memberof VisualMatrix\n     */\n    getCellDimensions (options) {\n        let indices = [];\n        let unitMeasures = [];\n        let mainMeasures = [];\n        let computedMeasures = [];\n        const {\n            isTransposed,\n            unitMeasures: measures\n        } = this.config();\n        const borderWidth = measures.border;\n        const { matrixInst, maxWidths, maxHeights, matrixIndex } = options;\n        const matrix = matrixInst.matrix;\n        const rowHeights = [[0], [0]];\n        const columnWidths = [[0], [0]];\n        const heights = [0, 0];\n        const widths = [0, 0];\n        const breakPointer = this._breakPointer;\n\n        matrix.forEach((row, rIdx) => {\n            row.forEach((cell, cIdx) => {\n                const colHeight = maxHeights[matrixIndex][rIdx] || 0;\n                const colWidth = maxWidths[matrixIndex][cIdx];\n\n                if (!isTransposed) {\n                    cell.setAvailableSpace(colWidth, colHeight - borderWidth);\n                    indices = [rIdx, cIdx];\n                    unitMeasures = [columnWidths, rowHeights];\n                    mainMeasures = [widths, heights];\n                    computedMeasures = [colWidth, colHeight];\n                } else {\n                    cell.setAvailableSpace(colWidth - borderWidth, colHeight);\n                    indices = [cIdx, rIdx];\n                    unitMeasures = [rowHeights, columnWidths];\n                    mainMeasures = [heights, widths];\n                    computedMeasures = [colHeight, colWidth];\n                }\n\n                if (indices[0] === 0 && indices[1] < breakPointer) {\n                    unitMeasures[0][0][indices[1]] = computedMeasures[0];\n                    mainMeasures[0][0] = (mainMeasures[0][0] || 0) + computedMeasures[0];\n                } else if (indices[0] === 0 && indices[1] >= breakPointer) {\n                    unitMeasures[0][1][indices[1] - breakPointer] = computedMeasures[0];\n                    mainMeasures[0][1] = (mainMeasures[0][1] || 0) + computedMeasures[0];\n                }\n                if (indices[1] === this._lastLevelKey) {\n                    unitMeasures[1][0][indices[0]] = computedMeasures[1];\n                    unitMeasures[1][1][indices[0]] = computedMeasures[1];\n                }\n            });\n        });\n        return {\n            heights,\n            widths,\n            rowHeights,\n            columnWidths\n        };\n    }\n}\n\n","/**\n * This file exports functionality that is used to render axis.\n */\nimport { selectElement, makeElement, angleToRadian } from 'muze-utils';\nimport * as AxisOrientation from './enums/axis-orientation';\nimport { LINEAR, HIDDEN, BOTTOM, TOP } from './enums/constants';\n\n/**\n *\n *\n * @param {*} instance\n * @param {*} container\n * @param {*} labelManager\n * @param {*} config\n */\nconst rotateAxis = (instance, tickText, labelManager, config) => {\n    const axis = instance.axis();\n    const scale = instance.scale();\n    const {\n        orientation,\n        labels,\n        fixedBaseline,\n        type\n     } = config;\n    let { rotation } = labels;\n\n    const tickSize = instance.getTickSize();\n\n    tickText.each(function (datum, index) {\n        let yShift;\n        let xShift;\n        const tickFormatter = axis.tickFormat() ? axis.tickFormat : scale.tickFormat;\n        const temp = tickFormatter ? tickFormatter()(datum) : datum;\n\n        datum = temp.toString();\n\n        const tickLabelDim = labelManager.getOriSize(datum);\n        const width = tickLabelDim.width * 0.5;\n        const height = tickLabelDim.height * 0.5;\n\n        if (rotation < 0) {\n            rotation = 360 + rotation;\n        }\n\n        const quadrant = 4 - Math.floor(rotation / 90);\n        const rotationNormalizer = ((quadrant % 2 === 0) ? rotation : 180 * Math.ceil(rotation / 180) - rotation) % 180;\n\n        yShift = Math.sqrt(height ** 2 + width ** 2) * Math.sin(angleToRadian(rotationNormalizer));\n\n        if ((quadrant === 3 || quadrant === 2) && !(rotationNormalizer > 67.5 && rotationNormalizer <= 90)) {\n            yShift += height * 2;\n        }\n        xShift = width;\n\n        if (rotation === 90) {\n            xShift = height;\n        } else if (rotation === 270) {\n            xShift = -height;\n        } else {\n            xShift = 0;\n        }\n\n        if (orientation === AxisOrientation.TOP) {\n            xShift = (index === 0 && fixedBaseline && type === LINEAR) ? xShift + xShift / 4 : xShift;\n            selectElement(this)\n                            .attr('transform', `translate(${-xShift * 2} ${-yShift - tickSize}) rotate(${rotation})`);\n        } else {\n            xShift = (index === 0 && fixedBaseline && type === LINEAR) ? xShift - xShift / 4 : xShift;\n            selectElement(this)\n                            .attr('transform', `translate(${xShift * 2} ${yShift + tickSize}) rotate(${rotation})`);\n        }\n    });\n    return tickText;\n};\n\n/**\n *\n *\n * @param {*} tickText\n * @param {*} axisInstance\n */\nconst changeTickOrientation = (selectContainer, axisInstance, tickSize) => {\n    const {\n        _smartTicks\n    } = axisInstance;\n    const config = axisInstance.config();\n    const labelManager = axisInstance.dependencies().labelManager;\n    const {\n        labels,\n        orientation\n    } = config;\n    const {\n        rotation,\n        smartTicks: isSmartTicks\n    } = labels;\n\n    const tickText = selectContainer.selectAll('.tick text');\n    tickText.selectAll('tspan').remove();\n\n   // rotate labels if not enough space is available\n    if (rotation !== 0 && isSmartTicks === false && (orientation === TOP || orientation === BOTTOM)) {\n        rotateAxis(axisInstance, tickText, labelManager, config);\n    } else if (rotation === 0 && isSmartTicks === false) {\n        tickText.attr('transform', '');\n    } else {\n        tickText.attr('y', 0)\n                        .attr('x', 0)\n                        .text('');\n        const tspan = makeElement(tickText, 'tspan', (d, i) => _smartTicks[i].lines, 'smart-text');\n        tspan.attr('dy', '0')\n                        .style('opacity', '0')\n                        .transition()\n                        .duration(1000)\n                        .attr('dy', (d, i) => {\n                            if (orientation === BOTTOM || i !== 0) {\n                                return _smartTicks[i].oriTextHeight;\n                            }\n                            return -_smartTicks[i].oriTextHeight * (_smartTicks[i].lines.length - 1) - tickSize;\n                        })\n                        .style('opacity', 1)\n                        .attr('x', 0)\n                        .text(e => e);\n    }\n\n    return tickText;\n};\n\nconst setFixedBaseline = (axisInstance) => {\n    const {\n        fixedBaseline\n    } = axisInstance.config();\n    if (fixedBaseline) {\n        axisInstance.setFixedBaseline();\n    }\n};\n\n/**\n *\n *\n * @param {*} textNode\n * @param {*} orientation\n * @param {*} measures\n */\nconst setAxisNamePos = (textNode, orientation, measures) => {\n    const {\n        axisNameHeight,\n        yOffset,\n        xOffset,\n        labelOffset,\n        availableSpace,\n        axisNameWidth\n    } = measures;\n    switch (orientation) {\n    case AxisOrientation.LEFT:\n        textNode.attr('transform',\n            `translate(${-(availableSpace.width - axisNameHeight)},${yOffset + labelOffset})rotate(-90)`);\n        break;\n    case AxisOrientation.RIGHT:\n        textNode.attr('transform',\n             `translate(${(availableSpace.width - axisNameHeight)},${yOffset + labelOffset})rotate(90)`);\n        break;\n    case AxisOrientation.TOP:\n        textNode.attr('transform',\n             `translate(${labelOffset + xOffset + axisNameWidth / 2},${-availableSpace.height + axisNameHeight})`);\n        break;\n    case AxisOrientation.BOTTOM:\n        textNode.attr('transform',\n             `translate(${availableSpace.width / 2},${availableSpace.height - axisNameHeight / 2})`);\n        break;\n    default:\n    }\n    return textNode;\n};\n\n/**\n * This method is used to render the axis inside an\n * svg container.\n *\n * @export\n * @param {Object} axisInstance the nput object required to render axis\n * @param {string} axisInstance.orientation the orientation of axis\n * @param {Object} axisInstance.scale instance of d3 scale\n * @param {SVGElement} axisInstance.container the container in which to render\n */\nexport function renderAxis (axisInstance) {\n    const config = axisInstance.config();\n    const labelManager = axisInstance.dependencies().labelManager;\n    const mount = axisInstance.mount();\n    const range = axisInstance.range();\n    const axis = axisInstance.axis();\n    const {\n        _axisNameStyle,\n        _tickLabelStyle\n     } = axisInstance;\n    const {\n        orientation,\n        name,\n        labels,\n        xOffset,\n        yOffset,\n        axisNamePadding,\n        className,\n        showAxisName,\n        show,\n        id,\n        interpolator,\n        classPrefix\n     } = config;\n\n    if (!show) {\n        return;\n    }\n    const tickSize = axisInstance.getTickSize();\n\n    const selectContainer = makeElement(selectElement(mount), 'g', [1], `${className}`);\n\n    // Set style for tick labels\n    labelManager.setStyle(_tickLabelStyle);\n\n    // @to-do: Need to write a configuration override using decorator pattern\n    if (interpolator === 'linear') {\n    // Set ticks for the axis\n        axisInstance.setTickValues();\n    }\n\n    // Get range(length of range)\n    const availableSpace = Math.abs(range[0] - range[1]);\n\n    // Get width and height taken by axis labels\n    const labelProps = axisInstance.axisDimensions().tickLabelDim;\n\n    // Draw axis ticks\n    selectContainer.attr('transform', `translate(${xOffset},${yOffset})`);\n\n    setFixedBaseline(axisInstance);\n    if (labels.smartTicks === false) {\n        selectContainer.transition()\n                        .duration(1000).call(axis);\n    } else {\n        selectContainer.call(axis);\n    }\n    selectContainer.selectAll('.tick').classed(`${classPrefix}-ticks`, true);\n    selectContainer.selectAll('.tick line').classed(`${classPrefix}-tick-lines`, true);\n\n    // Set classes for ticks\n    const tickText = selectContainer.selectAll('.tick text');\n    tickText.classed(`${classPrefix}-ticks`, true)\n                    .classed(`${classPrefix}-ticks-${id}`, true);\n    changeTickOrientation(selectContainer, axisInstance, tickSize);\n\n    // Create axis name\n    const textNode = makeElement(selectContainer, 'text', [name], `${classPrefix}-axis-name`)\n                    .attr('text-anchor', 'middle')\n                    .classed(`${classPrefix}-axis-name-${id}`, true)\n                    .text(d => d);\n\n    // Hide axis name if show is off\n    textNode.classed(HIDDEN, !showAxisName);\n\n     // render labels based on orientation of axis\n    const labelOffset = availableSpace / 2;\n\n    // Set style for axis name\n    labelManager.setStyle(_axisNameStyle);\n    const axisNameSpace = labelManager.getOriSize(name);\n    const measures = {\n        labelProps,\n        tickSize,\n        axisNamePadding,\n        axisNameHeight: axisNameSpace.height,\n        axisNameWidth: axisNameSpace.width,\n        yOffset,\n        xOffset,\n        labelOffset,\n        availableSpace: axisInstance.availableSpace()\n    };\n    // Set position for axis name\n    setAxisNamePos(textNode, orientation, measures);\n}\n","import SimpleAxis from './simple-axis';\nimport { BAND } from '../enums/scale-type';\nimport { TOP, BOTTOM } from '../enums/axis-orientation';\nimport { calculateBandSpace, setOffset } from './helper';\n\nexport default class BandAxis extends SimpleAxis {\n\n    /**\n     *\n     *\n     * @param {*} range\n     * @returns\n     * @memberof BandAxis\n     */\n    createScale (range) {\n        const scale = super.createScale(range);\n        const { padding } = this.config();\n        if (typeof padding === 'number') {\n            scale.padding(padding);\n        }\n        return scale;\n    }\n\n    /**\n     *\n     *\n     * @static\n     * @returns\n     * @memberof BandAxis\n     */\n    static type () {\n        return BAND;\n    }\n\n    /**\n     *\n     *\n     * @param {*} width\n     * @param {*} height\n     * @param {*} padding\n     * @param {*} isOffset\n     * @memberof BandAxis\n     */\n    setAvailableSpace (width, height, padding, isOffset) {\n        const {\n            left,\n            right,\n            top,\n            bottom\n        } = padding;\n        const {\n            orientation,\n            showAxisName,\n            axisNamePadding\n        } = this.config();\n        const { axisLabelDim } = this.getAxisDimensions();\n        const { height: axisDimHeight } = axisLabelDim;\n\n        this.availableSpace({ width, height });\n        if (orientation === TOP || orientation === BOTTOM) {\n            // Set x axis range\n            this.range([0, width - left - right]);\n            const axisHeight = this.getLogicalSpace().height - (showAxisName === false ?\n                (axisDimHeight + axisNamePadding) : 0);\n            isOffset && this.config({ yOffset: Math.max(axisHeight, height) });\n        } else {\n            // Set y axis range\n            this.range([height - bottom, top]);\n            const axisWidth = this.getLogicalSpace().width - (showAxisName === false ? axisDimHeight : 0);\n            isOffset && this.config({ xOffset: Math.max(axisWidth, width) });\n        }\n        return this;\n    }\n\n    /**\n     *\n     *\n     * @returns\n     * @memberof BandAxis\n     */\n    getUnitWidth () {\n        return this.scale().bandwidth();\n    }\n\n    /**\n     *\n     *\n     * @returns\n     * @memberof BandAxis\n     */\n    setTickConfig () {\n        let smartTicks = '';\n        let smartlabel;\n        const { maxWidth, maxHeight } = this.config();\n        const { labelManager } = this._dependencies;\n        const domain = this.axis().scale().domain();\n        const axis = this.axis();\n\n        smartTicks = domain;\n        const tickFormatter = axis.tickFormat();\n\n        if (domain && domain.length) {\n            smartTicks = domain.map((d) => {\n                labelManager.useEllipsesOnOverflow(true);\n                smartlabel = labelManager.getSmartText(tickFormatter(d), maxWidth, maxHeight);\n                return labelManager.constructor.textToLines(smartlabel);\n            });\n        }\n        return smartTicks;\n    }\n\n/**\n     * Gets the space occupied by the axis\n     *\n     * @return {Object} object with details about size of the axis.\n     * @memberof SimpleAxis\n     */\n    getLogicalSpace () {\n        if (!this.logicalSpace()) {\n            this.logicalSpace(calculateBandSpace(this));\n            setOffset(this);\n            this.logicalSpace();\n        }\n        return this.logicalSpace();\n    }\n    /**\n     *\n     *\n     * @param {*} axisTickLabels\n     * @param {*} labelWidth\n     * @returns\n     * @memberof BandAxis\n     */\n    setRotationConfig (axisTickLabels, labelWidth) {\n        const { orientation } = this.config();\n        const range = this.range();\n        const availSpace = Math.abs(range[0] - range[1]);\n\n        this.config({ labels: { rotation: 0, smartTicks: false } });\n        if (orientation === TOP || orientation === BOTTOM) {\n            const smartWidth = this.smartTicks().reduce((acc, n) => acc + n.width + this._minTickDistance.width, 0);\n            // set multiline config\n            if (availSpace > 0 && axisTickLabels.length * (labelWidth + this._minTickDistance.width) > availSpace) {\n                if (availSpace && smartWidth < availSpace) {\n                    this.config({ labels: { smartTicks: true } });\n                } else {\n                    this.config({ labels: { rotation: -90 } });\n                }\n            }\n        }\n        return this;\n    }\n\n    /**\n     *\n     *\n     * @returns\n     * @memberof BandAxis\n     */\n    getTickValues () {\n        return this.axis().scale().domain();\n    }\n\n    /**\n     *\n     *\n     * @returns\n     * @memberof SimpleAxis\n     */\n    getTickSize () {\n        const {\n            showInnerTicks,\n            showOuterTicks\n        } = this.config();\n        const axis = this.axis();\n\n        axis.tickSizeInner(showInnerTicks ? 6 : 0);\n        axis.tickSizeOuter(showOuterTicks ? 6 : 0);\n        return axis.tickSize();\n    }\n\n    /**\n     * This method is used to assign a domain to the axis.\n     *\n     * @param {Array} domain the domain of the scale\n     * @memberof SimpleAxis\n     */\n    updateDomainBounds (domain) {\n        let currentDomain = this.domain();\n\n        if (currentDomain.length === 0) {\n            currentDomain = domain;\n        }\n        currentDomain = currentDomain.concat(domain);\n        currentDomain = currentDomain.sort();\n        this.domain(currentDomain);\n        return this;\n    }\n}\n","import { getSmallestDiff } from 'muze-utils';\nimport SimpleAxis from './simple-axis';\nimport { BOTTOM, TOP, LEFT, RIGHT } from '../enums/axis-orientation';\nimport { LINEAR, LOG, POW } from '../enums/scale-type';\nimport { LogInterpolator, PowInterpolator, LinearInterpolator } from './interpolators';\nimport { DOMAIN } from '../enums/constants';\nimport {\n    getTickLabelInfo,\n    getNumberOfTicks\n} from './helper';\n\nexport const interpolatorMap = {\n    [LOG]: LogInterpolator,\n    [POW]: PowInterpolator,\n    [LINEAR]: LinearInterpolator\n};\n\nexport default class ContinousAxis extends SimpleAxis {\n\n    /**\n     *\n     *\n     * @returns\n     * @memberof SimpleAxis\n     */\n    createScale (config) {\n        const {\n            base,\n            padding,\n            interpolator,\n            exponent\n        } = config;\n        const range = this.range();\n        const InterpolatorCls = interpolatorMap[interpolator];\n\n        this._interpolator = new InterpolatorCls();\n        let scale = this._interpolator.createScale({\n            padding,\n            exponent,\n            base,\n            range\n        });\n\n        scale = scale.nice();\n        return scale;\n    }\n\n     /**\n     * This method is used to assign a domain to the axis.\n     *\n     * @param {Array} domain the domain of the scale\n     * @memberof ContinousAxis\n     */\n    updateDomainBounds (domain) {\n        let currentDomain = this.domain();\n\n        if (currentDomain.length === 0) {\n            currentDomain = domain;\n        }\n        if (domain.length) {\n            currentDomain = [Math.min(currentDomain[0], domain[0]), Math.max(currentDomain[1], domain[1])];\n        }\n        currentDomain = this._interpolator.sanitizeDomain(currentDomain, this);\n\n        return this.domain(currentDomain);\n    }\n\n    /**\n     *\n     *\n     * @static\n     * @returns\n     * @memberof ContinousAxis\n     */\n    static type () {\n        return LINEAR;\n    }\n\n    getScaleValue (domainVal) {\n        if (domainVal === null || domainVal === undefined) {\n            return undefined;\n        }\n        return this._interpolator.getScaleValue(domainVal);\n    }\n /**\n     *\n     *\n     * @returns\n     * @memberof SimpleAxis\n     */\n    getTickSize () {\n        const {\n            showInnerTicks,\n            showOuterTicks\n        } = this.config();\n        const axis = this.axis();\n        axis.tickSizeInner(showInnerTicks === false ? 0 : 6);\n        axis.tickSizeOuter(showOuterTicks === false ? 0 : 6);\n        return axis.tickSize();\n    }\n\n    /**\n     *\n     *\n     * @param {*} d\n     * @returns\n     * @memberof SimpleAxis\n     */\n    domain (domain) {\n        if (domain && domain.length) {\n            const { nice } = this.config();\n            if (domain.length && domain[0] === domain[1]) {\n                domain = [0, +domain[0] * 2];\n            }\n            this.scale().domain(domain);\n            nice && this.scale().nice();\n            this._domain = this.scale().domain();\n            this.store().commit(DOMAIN, this._domain);\n            this.logicalSpace(null);\n            return this;\n        } return this._domain;\n    }\n\n    /**\n     * This method is used to set the space availiable to render\n     * the SimpleCell.\n     *\n     * @param {number} width The width of SimpleCell.\n     * @param {number} height The height of SimpleCell.\n     * @memberof AxisCell\n     */\n    setAvailableSpace (width = 0, height, padding, isOffset) {\n        const {\n            left,\n            right,\n            top,\n            bottom\n        } = padding;\n        const {\n            orientation,\n            fixedBaseline\n        } = this.config();\n        const { tickLabelDim } = this.getAxisDimensions();\n        this.availableSpace({ width, height });\n\n        if (orientation === TOP || orientation === BOTTOM) {\n            const labelSpace = tickLabelDim.width;\n            this.range([(fixedBaseline ? 0 : (labelSpace / 2)) + left, width - right - labelSpace / 2]);\n            const axisHeight = this.getLogicalSpace().height;\n            isOffset && this.config({ yOffset: Math.max(axisHeight, height) });\n        } else {\n            const labelSpace = tickLabelDim.height;\n            this.range([height - bottom - (fixedBaseline ? 0 : (labelSpace / 2)), labelSpace / 2 + top]);\n            const axisWidth = this.getLogicalSpace().width;\n            isOffset && this.config({ xOffset: Math.max(axisWidth, width) });\n        }\n        return this;\n    }\n\n    /**\n     *\n     *\n     * @param {*} tickValues\n     * @returns\n     * @memberof SimpleAxis\n     */\n    setTickValues () {\n        const {\n            tickValues\n        } = this.config();\n        const axis = this.axis();\n\n        if (tickValues) {\n            tickValues instanceof Array && this.axis().tickValues(tickValues);\n            return this;\n        }\n        axis.tickValues(this.getTickValues());\n        return this;\n    }\n\n    /**\n     *\n     *\n     * @returns\n     * @memberof SimpleAxis\n     */\n    getTickValues () {\n        let labelDim = 0;\n        const {\n            orientation,\n            tickValues\n        } = this.config();\n        const range = this.range();\n        const axis = this.axis();\n\n        const availableSpace = Math.abs(range[0] - range[1]);\n\n        const labelProps = getTickLabelInfo(this).largestLabelDim;\n\n        if (tickValues) {\n            return axis.scale().ticks(tickValues);\n        }\n        labelDim = labelProps[orientation === BOTTOM || orientation === TOP ? 'width' : 'height'];\n\n        return getNumberOfTicks(availableSpace, labelDim, axis, this);\n    }\n\n    getMinTickDifference () {\n        return getSmallestDiff(this.config().tickValues);\n    }\n\n    /**\n     *\n     *\n     * @param {*} domain\n     * @returns\n     * @memberof SimpleAxis\n     */\n    updateDomainCache (domain) {\n        if (this._domainLock === false) {\n            this._domain = [];\n            this._domainLock = true;\n        }\n        return this.updateDomainBounds(domain || []);\n    }\n\n    /**\n     * Sets a fixed baseline for the first ticks so that they can render effectively within\n     * the given area\n     *\n     * @param {*} tickText\n     * @param {*} config\n     * @param {*} labelManager\n     */\n    setFixedBaseline (tickText) {\n        const {\n            orientation,\n            labels\n        } = this.config();\n        const {\n            rotation\n        } = labels;\n        const axis = this.axis();\n        const labelManager = this.dependencies().labelManager;\n        labelManager.setStyle(this._tickLabelStyle);\n        axis.tickTransform((d, i) => {\n            const temp = axis.tickFormat ? axis.tickFormat()(d) : d;\n            const datum = temp.toString();\n\n            const { width: shiftWidth, height: shiftHeight } = labelManager.getOriSize(datum);\n\n            if (i === 0 && (orientation === LEFT || orientation === RIGHT)) {\n                return `translate(0, -${(shiftHeight) / 3}px)`;\n            }\n            if (i === 0 && (orientation === TOP || orientation === BOTTOM) && rotation === 0) {\n                return `translate(${shiftWidth / 2}px,  ${0}px) rotate(${rotation}deg)`;\n            } return '';\n        });\n        return tickText;\n    }\n\n}\n","import { getUniqueId } from 'muze-utils';\nimport { CLASSPREFIX } from '../enums/constants';\n\n/**\n *\n *\n */\nexport const defaultConfig = {\n    id: getUniqueId(),\n    axisName: {\n        defClassName: 'axis-name'\n    },\n    axisNamePadding: 12,\n    base: 10,\n    classPrefix: CLASSPREFIX,\n    className: `${CLASSPREFIX}-axis`,\n    exponent: 1,\n    interpolator: 'linear',\n    fixedBaseline: true,\n    labels: {\n        rotation: 0,\n        smartTicks: false\n    },\n    orientation: 'left',\n    maxHeight: 50, // @todo: height and width wont be hardcoded\n    maxWidth: 40,\n    numberFormat: val => val,\n    padding: 0.3,\n    nice: true,\n    numberOfTicks: 10,\n    rotate: false,\n    show: true,\n    showAxisName: false,\n    showInnerTicks: null,\n    showOuterTicks: null,\n    style: {},\n    type: 'linear',\n    tickFormat: null,\n    tickValues: null,\n    xOffset: undefined,\n    yOffset: undefined\n};\n\n","import { TOP, LEFT, BOTTOM } from '../enums/axis-orientation';\nimport { LOG } from '../enums/scale-type';\n\nexport const getNumberOfTicks = (availableSpace, labelDim, axis, axisInstance) => {\n    const ticks = axis.scale().ticks();\n    const { numberOfTicks } = axisInstance.config();\n    const tickLength = ticks.length;\n    let numberOfValues = tickLength;\n\n    if (tickLength * (labelDim * 1.5) > availableSpace) {\n        numberOfValues = Math.floor(availableSpace / (labelDim * 1.5));\n    }\n\n    numberOfValues = Math.min(numberOfTicks, Math.max(1, numberOfValues));\n    return axis.scale().ticks(numberOfValues);\n};\n\nexport const sanitizeDomain = (domain, context) => {\n    const interpolator = context.config().interpolator;\n    // @todo: Get from scale decorator\n    if (interpolator === LOG && domain[0] >= 0) {\n        return [Math.max(1, domain[0]), Math.max(1, domain[1])];\n    }\n    return domain;\n};\n\n/**\n *\n *\n * @returns\n * @memberof SimpleAxis\n */\nexport const getTickLabelInfo = (context) => {\n    let largestLabel = '';\n    let labelProps;\n    let smartTick = {};\n    let axisTickLabels;\n    const scale = context.scale();\n    const allLabelLengths = [];\n    const { tickFormat, tickValues, numberFormat } = context.config();\n    const labelFunc = scale.ticks || scale.quantile || scale.domain;\n    // set the style on the shared label manager instance\n    const { labelManager } = context.dependencies();\n\n    labelManager.setStyle(context._tickLabelStyle);\n    // get the values along the domain\n\n    axisTickLabels = tickValues || labelFunc();\n    // Get the tick labels\n    axisTickLabels = axisTickLabels.map((originalLabel, i) => {\n        const formattedLabel = numberFormat(originalLabel);\n\n        //  get formats of tick if any\n        const label = tickFormat ? tickFormat(formattedLabel) : (scale.tickFormat ?\n            numberFormat(scale.tickFormat()(originalLabel)) : formattedLabel);\n\n        // convert to string for quant values\n        const temp = label.toString();\n        // Get spaces for all labels\n        allLabelLengths.push(labelManager.getOriSize(temp));\n        // Getting largest label\n        if (temp.length > largestLabel.length) {\n            largestLabel = temp;\n            smartTick = context.smartTicks() ? context.smartTicks()[i] : {};\n            labelProps = allLabelLengths[i];\n        }\n        return label;\n    });\n\n    labelProps = labelManager.getOriSize(largestLabel);\n\n    return { largestLabel, largestLabelDim: labelProps, axisTickLabels, allLabelLengths, smartTick };\n};\n\n/**\n *\n *\n * @returns\n * @memberof SimpleAxis\n */\nexport const computeAxisDimensions = (context) => {\n    let tickLabelDim = {};\n    const {\n        name,\n        labels,\n        tickValues\n    } = context.config();\n    const angle = ((labels.smartTicks) ? 0 : labels.rotation) * Math.PI / 180;\n    const { labelManager } = context.dependencies();\n    const {\n        largestLabelDim,\n        axisTickLabels,\n        smartTick\n    } = getTickLabelInfo(context);\n    const { height: labelHeight, width: labelWidth } = largestLabelDim;\n    // get the domain of axis\n    const domain = context.domain();\n\n    if (domain.length === 0) {\n        return null;\n    }\n    if (context._rotationLock === false) {\n        context.setRotationConfig(tickValues || axisTickLabels, largestLabelDim.width);\n        context._rotationLock = false;\n    }\n    if (labels.smartTicks) {\n        tickLabelDim = smartTick;\n    } else {\n        tickLabelDim = {\n            width: Math.abs(labelHeight * Math.sin(angle)) + Math.abs(labelWidth * Math.cos(angle)),\n            height: Math.abs(labelWidth * Math.sin(angle)) + Math.abs(labelHeight * Math.cos(angle))\n        };\n    }\n\n    labelManager.setStyle(context._axisNameStyle);\n    return {\n        tickSize: context.getTickSize(),\n        tickLabelDim,\n        axisLabelDim: labelManager.getOriSize(name),\n        largestLabelDim,\n        axisTickLabels\n    };\n};\n\n/**\n*\n*\n* @memberof SimpleAxis\n*/\nexport const setOffset = (context) => {\n    let x = 0;\n    let y = 0;\n    const logicalSpace = context.logicalSpace();\n    const config = context.config();\n    const {\n        orientation,\n        xOffset,\n        yOffset\n    } = config;\n    if (orientation === LEFT) {\n        x = xOffset === undefined ? logicalSpace.width : xOffset;\n    }\n    if (orientation === TOP) {\n        y = yOffset === undefined ? logicalSpace.height : yOffset;\n    }\n    context.config({ xOffset: x, yOffset: y });\n};\n\n/**\n *\n *\n * @param {*} timeDiff\n * @param {*} range\n * @param {*} domain\n * @returns\n */\nconst getAxisOffset = (timeDiff, range, domain) => {\n    const pvr = Math.abs(range[1] - range[0]) / (domain[1] - domain[0]);\n    const width = (pvr * timeDiff);\n    const avWidth = (range[1] - range[0]);\n    const bars = avWidth / width;\n    const barWidth = avWidth / (bars + 1);\n    const diff = avWidth - barWidth * bars;\n\n    return diff / 2;\n};\n\nexport const adjustRange = (minDiff, range, domain, orientation) => {\n    const diff = getAxisOffset(minDiff, range, domain);\n\n    if (orientation === TOP || orientation === BOTTOM) {\n        range[0] += diff;\n        range[1] -= diff;\n    } else {\n        range[0] -= diff;\n        range[1] += diff;\n    }\n    return range;\n};\n\n /**\n * Listener attached to the axis on change of parameters.\n *\n * @param {Function} callback to be excuted on change of domain range etc\n * @memberof SimpleAxis\n */\nexport const registerChangeListeners = (context) => {\n    const store = context.store();\n\n    store.model.next(['domain', 'range', 'mount', 'config'], (...params) => {\n        context.render();\n        context._domainLock = false;\n        context._eventList.forEach((e) => {\n            e.action instanceof Function && e.action(...params);\n        });\n    }, true);\n    return context;\n};\n\n/**\n *\n *\n * @param {*} axisDimensions\n * @param {*} config\n * @param {*} range\n * @returns\n */\nexport const getHorizontalAxisSpace = (context, axisDimensions, config, range) => {\n    let width;\n    let height;\n    const {\n        tickSize,\n        tickLabelDim,\n        axisLabelDim\n    } = axisDimensions;\n    const {\n        axisNamePadding,\n        showAxisName,\n        tickValues\n   } = config;\n    const domain = context.domain();\n    const { height: axisDimHeight } = axisLabelDim;\n    const { height: tickDimHeight, width: tickDimWidth } = tickLabelDim;\n\n    width = range && range.length ? range[1] - range[0] : 0;\n\n    height = 0;\n    if (tickValues) {\n        const minTickDiff = context.getMinTickDifference();\n        const [min, max] = [Math.min(...tickValues, ...domain), Math.max(...tickValues, ...domain)];\n\n        width = ((max - min) / Math.abs(minTickDiff)) * (tickDimWidth + context._minTickDistance.width);\n    }\n    if (!width || width === 0) {\n        height = Math.max(tickDimWidth, tickDimHeight);\n    } else {\n        height = tickDimHeight;\n    }\n    height += (showAxisName ? (axisDimHeight + axisNamePadding) : 0) + tickSize;\n    return {\n        width,\n        height\n    };\n};\n\n/**\n *\n *\n * @param {*} axisDimensions\n * @param {*} config\n * @param {*} range\n * @returns\n */\nexport const getVerticalAxisSpace = (context, axisDimensions, config) => {\n    let height;\n    let width;\n    const {\n        tickSize,\n        tickLabelDim,\n        axisLabelDim\n    } = axisDimensions;\n    const {\n        axisNamePadding,\n        showAxisName,\n        tickValues\n   } = config;\n    const domain = context.domain();\n    const { height: axisDimHeight } = axisLabelDim;\n    const { height: tickDimHeight, width: tickDimWidth } = tickLabelDim;\n\n    height = 0;\n    width = tickDimWidth;\n    if (tickValues) {\n        const minTickDiff = context.getMinTickDifference();\n        const [min, max] = [Math.min(...tickValues, ...domain), Math.max(...tickValues, ...domain)];\n\n        height = ((max - min) / Math.abs(minTickDiff)) * (tickDimHeight);\n    }\n    width += (showAxisName ? axisDimHeight : 0) + tickSize + axisNamePadding;\n\n    return {\n        height,\n        width\n    };\n};\n\n /**\n     * Calculates the logical space of the axis\n     * @return {Object} Width and height occupied by the axis.\n     */\nexport const calculateBandSpace = (context) => {\n    const range = context.range();\n    const config = context.config();\n    const {\n        orientation,\n        show\n    } = config;\n    const axisDimensions = context.getAxisDimensions();\n    const {\n        largestLabelDim,\n        axisTickLabels\n    } = axisDimensions;\n    const { height: largestDimHeight, width: largestDimWidth } = largestLabelDim;\n\n    if (orientation === TOP || orientation === BOTTOM) {\n        let { width, height } = getHorizontalAxisSpace(context, axisDimensions, config, range);\n        if (!width || width === 0) {\n            width = axisTickLabels.length * (Math.min(largestDimWidth + context._minTickDistance.width,\n                         largestDimHeight + context._minTickDistance.width));\n        }\n        if (show === false) {\n            height = 0;\n        }\n        return {\n            width,\n            height\n        };\n    }\n\n    let { width, height } = getVerticalAxisSpace(context, axisDimensions, config, range);\n\n    if (!height || height === 0) {\n        height = axisTickLabels.length * (largestDimHeight + largestDimHeight / 2) + largestDimHeight;\n    }\n    if (show === false) {\n        width = 0;\n    }\n    return {\n        width,\n        height\n    };\n};\n\n/**\n     * Calculates the logical space of the axis\n     * @return {Object} Width and height occupied by the axis.\n     */\nexport const calculateContinousSpace = (context) => {\n    const range = context.range();\n    const config = context.config();\n    const axisDimensions = context.getAxisDimensions();\n\n    const {\n        orientation,\n        show,\n        showAxisName\n    } = config;\n    const {\n        axisLabelDim\n    } = axisDimensions;\n\n    if (show === false) {\n        return {\n            width: 0,\n            height: 0\n        };\n    }\n\n    const { width: axisDimWidth } = axisLabelDim;\n\n    if (orientation === TOP || orientation === BOTTOM) {\n        const { width, height } = getHorizontalAxisSpace(context, axisDimensions, config, range);\n        const axisWidth = Math.max(width, axisDimWidth);\n\n        return {\n            width: axisWidth,\n            height\n        };\n    }\n\n    const { width, height } = getVerticalAxisSpace(context, axisDimensions, config, range);\n\n    const effHeight = Math.max(height, showAxisName ? axisDimWidth : 0);\n\n    return {\n        width,\n        height: effHeight\n    };\n};\n\n","export { default as ContinousAxis } from './continous-axis';\nexport { default as BandAxis } from './band-axis';\nexport { default as TimeAxis } from './time-axis';\nexport { default as SimpleAxis } from './simple-axis';\n","export { default as LinearInterpolator } from './linear';\nexport { default as LogInterpolator } from './log';\nexport { default as PowInterpolator } from './pow';\n","import { scaleMap } from '../../scale-creator';\n\nexport default class LinearInterpolator {\n\n    createScale (config) {\n        const {\n            range\n        } = config;\n        const scaleFactory = scaleMap.linear;\n        this._scale = scaleFactory().range(range);\n        return this._scale;\n    }\n\n    getScaleValue (domainVal) {\n        return this._scale(domainVal) + 0.5;\n    }\n\n    sanitizeDomain (domain) {\n        return domain;\n    }\n}\n","import { scaleMap } from '../../scale-creator';\n\nexport default class LogInterpolator {\n\n    createScale (config) {\n        const {\n            range,\n            base\n        } = config;\n        const scaleFactory = scaleMap.log;\n        this._scale = scaleFactory().range(range).base(base);\n        return this._scale;\n    }\n\n    getScaleValue (domainVal) {\n        if (domainVal <= 0) {\n            return 1;\n        }\n\n        return this._scale(domainVal) + 0.5;\n    }\n\n    sanitizeDomain (domain) {\n        if (domain[0] <= 0) {\n            return [Math.max(1, domain[0]), Math.max(1, domain[1])];\n        } return domain;\n    }\n}\n","import { scaleMap } from '../../scale-creator';\n\nexport default class PowInterpolator {\n\n    createScale (config) {\n        const {\n            range,\n            exponent\n        } = config;\n        const scaleFactory = scaleMap.pow;\n        this._scale = scaleFactory().range(range).exponent(exponent);\n        return this._scale;\n    }\n\n    getScaleValue (domainVal) {\n        return this._scale(domainVal) + 0.5;\n    }\n\n    sanitizeDomain (domain) {\n        return domain;\n    }\n}\n","import { mergeRecursive } from 'muze-utils';\n\nexport const PROPS = {\n    availableSpace: {},\n    axisDimensions: {},\n    config: {\n        sanitization: (context, value) => {\n            if (value.labels && value.labels.rotation) {\n                context._rotationLock = true;\n            }\n            value = mergeRecursive(context._config || {}, value);\n            value.axisNamePadding = Math.max(value.axisNamePadding, 0);\n            context.axis(context.createAxis(value));\n            context.store().commit('config', value);\n            return value;\n        }\n    },\n    logicalSpace: {},\n    mount: {\n        sanitization: (context, value) => {\n            context.store().commit('mount', value);\n            return value;\n        }\n    },\n    range: {\n        sanitization: (context, value) => {\n            context.scale().range(value);\n            context.logicalSpace(null);\n            context.store().commit('range', value);\n            return value;\n        }\n    },\n\n    smartTicks: {},\n    store: {},\n    tickSize: {}\n};\n","import {\n    Store,\n    mergeRecursive,\n    getSmartComputedStyle,\n    selectElement,\n    generateGetterSetters,\n    getUniqueId\n} from 'muze-utils';\nimport { createScale } from '../scale-creator';\nimport { axisOrientationMap, BOTTOM, TOP } from '../enums/axis-orientation';\nimport { defaultConfig } from './default-config';\nimport { renderAxis } from '../axis-renderer';\nimport { DOMAIN, BAND } from '../enums/constants';\nimport {\n    computeAxisDimensions,\n    setOffset,\n    registerChangeListeners,\n    calculateContinousSpace\n} from './helper';\nimport { PROPS } from './props';\n\nexport default class SimpleAxis {\n\n    /**\n     * Creates an instance of SimpleAxis.\n     * @memberof SimpleAxis\n     */\n    constructor (config, dependencies) {\n        this._id = getUniqueId();\n\n        this._dependencies = dependencies;\n        this._mount = null;\n        this._range = [];\n        this._domain = [];\n        this._domainLock = false;\n        this._rotationLock = false;\n        this._axisDimensions = {};\n        this._eventList = [];\n\n        const defCon = mergeRecursive({}, this.constructor.defaultConfig());\n        const simpleConfig = mergeRecursive(defCon, config);\n\n        const bodyElem = selectElement('body');\n        const classPrefix = simpleConfig.classPrefix;\n        this._tickLabelStyle = getSmartComputedStyle(bodyElem, `${classPrefix}-ticks`);\n        this._axisNameStyle = getSmartComputedStyle(bodyElem, `${classPrefix}-axis-name`);\n        dependencies.labelManager.setStyle(this._tickLabelStyle);\n        this._minTickDistance = dependencies.labelManager.getOriSize('ww');\n\n        generateGetterSetters(this, PROPS);\n        this.store(new Store({\n            domain: this.domain(),\n            range: this.range(),\n            config: simpleConfig,\n            mount: this.mount()\n        }));\n        this.config(simpleConfig);\n\n        this._scale = this.createScale(this._config);\n        this._axis = this.createAxis(this._config);\n\n        registerChangeListeners(this);\n    }\n\n    /**\n     * Returns the default configuration of simple axis\n     *  @return {Object} default configurations\n     */\n    static defaultConfig () {\n        return defaultConfig;\n    }\n\n    /**\n     * Sets a fixed baseline for the first ticks so that they can render effectively within\n     * the given area\n     *\n     * @param {*} tickText\n     * @param {*} config\n     * @param {*} labelManager\n     */\n    setFixedBaseline () {\n        return this;\n    }\n\n    /**\n     *\n     *\n     * @readonly\n     * @memberof SimpleAxis\n     */\n    scale (...params) {\n        if (params.length) {\n            this._scale = params[0];\n            return this;\n        }\n        return this._scale;\n    }\n\n    /**\n     *\n     *\n     * @readonly\n     * @memberof SimpleAxis\n     */\n    axis (...params) {\n        if (params.length) {\n            this._axis = params[0];\n            return this;\n        }\n        return this._axis;\n    }\n\n    /**\n     *\n     *\n     * @param {*} d\n     * @returns\n     * @memberof SimpleAxis\n     */\n    domain (...domain) {\n        if (domain.length) {\n            this.scale().domain(domain[0]);\n            this._domain = this.scale().domain();\n            this.smartTicks(this.setTickConfig());\n            this.store().commit(DOMAIN, this._domain);\n            this.logicalSpace(null);\n            return this;\n        }\n        return this._domain;\n    }\n\n    /**\n     *\n     *\n     * @returns\n     * @memberof SimpleAxis\n     */\n    dependencies () {\n        return this._dependencies;\n    }\n\n    /**\n     *\n     *\n     * @returns\n     * @memberof SimpleAxis\n     */\n    createScale (config) {\n        const {\n            base,\n            padding,\n            interpolator,\n            exponent\n        } = config;\n        const range = this.range();\n        const scale = createScale({\n            padding,\n            interpolator,\n            exponent,\n            base,\n            range,\n            type: this.constructor.type()\n        });\n\n        return scale;\n    }\n\n    /**\n     *\n     *\n     * @returns\n     * @memberof SimpleAxis\n     */\n    createAxis (config) {\n        const {\n            tickFormat,\n            numberFormat,\n            orientation\n        } = config;\n        const axisClass = axisOrientationMap[orientation];\n\n        if (axisClass) {\n            let axis = axisClass(this.scale());\n            let formatter = {};\n\n            if (tickFormat) {\n                formatter = (val, ...params) => tickFormat(numberFormat(val), ...params);\n            } else {\n                formatter = val => numberFormat(val);\n            }\n            axis = axis.tickFormat(formatter);\n            return axis;\n        }\n        return null;\n    }\n\n    /**\n     *\n     *\n     * @memberof SimpleAxis\n     */\n    setTickConfig () {\n        return this;\n    }\n\n    /**\n     *\n     *\n     * @param {*} axisTickLabels\n     * @param {*} labelWidth\n     * @returns\n     * @memberof SimpleAxis\n     */\n    setRotationConfig (axisTickLabels, labelWidth) {\n        const { orientation } = this.config();\n\n        if (orientation === TOP || orientation === BOTTOM) {\n            const range = this.range();\n            const length = Math.abs(range[0] - range[1]);\n            this.config({ labels: { rotation: 0 } });\n            if (length > 0 && axisTickLabels.length * (labelWidth + this._minTickDistance.width) > length) {\n                this.config({ labels: { rotation: -90 } });\n            }\n        }\n        return this;\n    }\n\n    /**\n     *\n     *\n     * @returns\n     * @memberof SimpleAxis\n     */\n    adjustRange () {\n        return this;\n    }\n\n    getScaleValue (domainVal) {\n        if (domainVal === null || domainVal === undefined) {\n            return undefined;\n        }\n        return this.scale()(domainVal);\n    }\n\n    /**\n     *\n     *\n     * @returns\n     * @memberof SimpleAxis\n     */\n    getTickSize () {\n        return this.axis().tickSize();\n    }\n\n    /**\n     * Gets the space occupied by the parts of an axis\n     *\n     * @return {Object} object with details about sizes of the axis.\n     * @memberof SimpleAxis\n     */\n    getAxisDimensions () {\n        this.axisDimensions(computeAxisDimensions(this));\n        return this.axisDimensions();\n    }\n\n    /**\n     * Gets the space occupied by the axis\n     *\n     * @return {Object} object with details about size of the axis.\n     * @memberof SimpleAxis\n     */\n    getLogicalSpace () {\n        if (!this.logicalSpace()) {\n            this.logicalSpace(calculateContinousSpace(this));\n            setOffset(this);\n            this.logicalSpace();\n        }\n        return this.logicalSpace();\n    }\n\n    /**\n     * Returns the value from the domain when given a value from the range.\n     * @param {number} value Value from the range.\n     * @return {number} Value\n     */\n    invert (...value) {\n        const values = value.map(d => this.scale().invert(d)) || [];\n        return value.length === 1 ? values[0] : values;\n    }\n\n    /**\n     * Gets the nearest range value from the given range values.\n     * @param {number} v1 Start range value\n     * @param {number} v2 End range value\n     * @return {Array} range values\n     */\n    getNearestRange (v1, v2) {\n        let p1;\n        let p2;\n        let extent;\n        const {\n            type\n        } = this.config();\n        const scale = this.scale();\n        const range = scale.range();\n        const reverse = range[0] > range[1];\n\n        if (type === BAND) {\n            extent = scale.invertExtent(v1, v2);\n            p1 = scale(reverse ? extent[extent.length - 1] : extent[0]);\n            p2 = scale(reverse ? extent[0] : extent[extent.length - 1]) + scale.bandwidth();\n            return [p1, p2];\n        }\n        return [v1, v2];\n    }\n\n    /**\n     * This method is used to assign a domain to the axis.\n     *\n     * @param {Array} domain the domain of the scale\n     * @memberof SimpleAxis\n     */\n    updateDomainBounds (domain) {\n        let currentDomain = this.domain();\n\n        if (currentDomain.length === 0) {\n            currentDomain = domain;\n        }\n        if (domain.length) {\n            currentDomain = [Math.min(currentDomain[0], domain[0]), Math.max(currentDomain[1], domain[1])];\n        }\n        return this.domain(currentDomain);\n    }\n\n    /**\n     *\n     *\n     * @param {*} domain\n     * @returns\n     * @memberof SimpleAxis\n     */\n    updateDomainCache (domain) {\n        if (this._domainLock === false) {\n            this.domain([]);\n            this._domainLock = true;\n        }\n        return this.updateDomainBounds(domain || []);\n    }\n\n    getMinTickDifference () {\n        return this.domain();\n    }\n\n    /**\n     *\n     *\n     * @param {*} tickValues\n     * @returns\n     * @memberof SimpleAxis\n     */\n    setTickValues () {\n        const {\n            tickValues\n        } = this.config();\n\n        if (tickValues) {\n            tickValues instanceof Array && this.axis().tickValues(tickValues);\n            return this;\n        }\n        return this;\n    }\n\n    /**\n     * This method returns the width in pixels for one\n     * unit along the axis. It is only applicable to band scale\n     * and returns undefined for other scale type.\n     *\n     * @return {number} the width of one band along band scale axis\n     * @memberof SimpleAxis\n     */\n    getUnitWidth () {\n        return 0;\n    }\n\n    /**\n     * This method returns an object that can be used to\n     * reconstruct this instance.\n     *\n     * @return {Object} the serializable props of axis\n     * @memberof SimpleAxis\n     */\n    serialize () {\n        return {\n            name: this.name,\n            type: this.type,\n            range: this.range(),\n            config: this.config()\n        };\n    }\n\n    /**\n     * Returns the id of the axis.\n     * @return {string} Unique identifier of the axis.\n     */\n    get id () {\n        return this._id;\n    }\n\n    registerEvent (event, fn) {\n        this._eventList.push({ name: event, action: fn });\n    }\n\n    /**\n     *\n     *\n     * @param {*} fn\n     * @memberof SimpleAxis\n     */\n    on (event, fn) {\n        event = event || 'update';\n        this.registerEvent(event, fn);\n    }\n\n    /**\n     * This method is used to render the axis inside\n     * the supplied svg container.\n     *\n     * @param {SVGElement} svg the svg element in which to render the path\n     * @memberof SimpleAxis\n     */\n    /* istanbul ignore next */render () {\n        if (this.mount()) {\n            renderAxis(this);\n        }\n        return this;\n    }\n\n    /**\n     *\n     *\n     * @returns\n     * @memberof SimpleAxis\n     */\n    remove () {\n        this.store().unsubscribeAll();\n        selectElement(this.mount()).remove();\n        return this;\n    }\n\n    /**\n     *\n     *\n     * @memberof SimpleAxis\n     */\n    unsubscribe () {\n        this.store().unsubscribeAll();\n        return this;\n    }\n\n    /**\n     *\n     *\n     * @returns\n     * @memberof SimpleAxis\n     */\n    isReverse () {\n        const range = this.range();\n        return range[0] > range[1];\n    }\n\n    /**\n     *\n     *\n     * @returns\n     * @memberof SimpleAxis\n     */\n    getPixelToValueRatio () {\n        const scale = this.scale();\n        const range = scale.range();\n        const domain = scale.domain();\n\n        return Math.abs(range[1] - range[0]) / (domain[1] - domain[0]);\n    }\n}\n\n","import SimpleAxis from './simple-axis';\nimport { adjustRange } from './helper';\nimport { TIME } from '../enums/scale-type';\nimport { axisOrientationMap, BOTTOM, TOP } from '../enums/axis-orientation';\nimport { DOMAIN } from '../enums/constants';\n\n/**\n *\n *\n * @export\n * @class TimeAxis\n * @extends {SimpleAxis}\n */\nexport default class TimeAxis extends SimpleAxis {\n\n    constructor (...params) {\n        super(...params);\n        this._minDiff = Infinity;\n    }\n\n    /**\n     *\n     *\n     * @param {*} range\n     * @returns\n     * @memberof TimeAxis\n     */\n    createScale (range) {\n        let scale = super.createScale(range);\n\n        scale = scale.nice();\n        return scale;\n    }\n\n    /**\n     *\n     *\n     * @static\n     * @returns\n     * @memberof TimeAxis\n     */\n    static type () {\n        return TIME;\n    }\n\n    /**\n     *\n     *\n     * @returns\n     * @memberof BandAxis\n     */\n    setTickConfig () {\n        let smartTicks;\n        let smartlabel;\n        const { maxWidth, maxHeight, tickFormat } = this.config();\n        const { labelManager } = this._dependencies;\n        const domain = this.getTickValues();\n        const scale = this.scale();\n\n        smartTicks = domain;\n        const tickFormatter = tickFormat || scale.tickFormat();\n\n        if (domain && domain.length) {\n            smartTicks = domain.map((d) => {\n                smartlabel = labelManager.getSmartText(tickFormatter(d), maxWidth, maxHeight);\n                return labelManager.constructor.textToLines(smartlabel);\n            });\n        }\n        return smartTicks;\n    }\n\n    /**\n     *\n     *\n     * @returns\n     * @memberof SimpleAxis\n     */\n    createAxis (config) {\n        const {\n            tickFormat,\n            orientation\n        } = config;\n        const axisClass = axisOrientationMap[orientation];\n\n        if (axisClass) {\n            let axis = axisClass(this.scale());\n\n            if (tickFormat) {\n                axis = axis.tickFormat(tickFormat);\n            }\n\n            return axis;\n        }\n        return null;\n    }\n\n     /**\n     *\n     *\n     * @returns\n     * @memberof SimpleAxis\n     */\n    getTickSize () {\n        const {\n            showInnerTicks,\n            showOuterTicks\n        } = this.config();\n        const axis = this.axis();\n        axis.tickSizeInner(showInnerTicks === false ? 0 : 6);\n        axis.tickSizeOuter(showOuterTicks === false ? 0 : 6);\n        return super.getTickSize();\n    }\n\n    /**\n     *\n     *\n     * @returns\n     * @memberof TimeAxis\n     */\n    getTickValues () {\n        return this.scale().ticks();\n    }\n\n    /**\n     *\n     *\n     * @param {*} diff\n     * @returns\n     * @memberof TimeAxis\n     */\n    minDiff (diff) {\n        this._minDiff = Math.min(this._minDiff, diff);\n        return this;\n    }\n\n    /**\n     *\n     *\n     * @param {*} axisTickLabels\n     * @param {*} labelWidth\n     * @returns\n     * @memberof BandAxis\n     */\n    setRotationConfig (axisTickLabels, labelWidth) {\n        const { orientation } = this.config();\n        const range = this.range();\n        const availSpace = Math.abs(range[0] - range[1]);\n\n        this.config({ labels: { rotation: 0, smartTicks: false } });\n        if (orientation === TOP || orientation === BOTTOM) {\n            const smartWidth = this.smartTicks().reduce((acc, n) => acc + n.width, 0);\n            // set multiline config\n            if (availSpace > 0 && axisTickLabels.length * labelWidth > availSpace) {\n                if (availSpace && smartWidth * 1.25 < availSpace) {\n                    this.config({ labels: { smartTicks: true } });\n                }\n                this.config({ labels: { rotation: -90 } });\n            }\n        }\n        return this;\n    }\n\n    /**\n     *\n     *\n     * @param {*} d\n     * @returns\n     * @memberof SimpleAxis\n     */\n    domain (domain) {\n        if (domain) {\n            const { nice } = this.config();\n\n            if (domain.length && domain[0] === domain[1]) {\n                domain = [0, +domain[0] * 2];\n            }\n            this.scale().domain(domain);\n            nice && this.scale().nice();\n            this._domain = this.scale().domain();\n            this.smartTicks(this.setTickConfig());\n            this.store().commit(DOMAIN, this._domain);\n            this.logicalSpace(null);\n            return this;\n        } return this._domain;\n    }\n\n    /**\n     *\n     *\n     * @param {*} width\n     * @param {*} height\n     * @param {*} padding\n     * @param {*} isOffset\n     * @memberof TimeAxis\n     */\n    setAvailableSpace (width, height, padding, isOffset) {\n        const {\n            left,\n            right,\n            top,\n            bottom\n        } = padding;\n        const {\n            orientation,\n            showAxisName,\n            axisNamePadding\n        } = this.config();\n        const domain = this.domain();\n        const { axisLabelDim, tickLabelDim } = this.getAxisDimensions();\n        const { height: axisDimHeight } = axisLabelDim;\n        const { height: tickDimHeight, width: tickDimWidth } = tickLabelDim;\n\n        this.availableSpace({ width, height });\n        if (orientation === TOP || orientation === BOTTOM) {\n            const labelSpace = tickDimWidth;\n            this.range(adjustRange(this._minDiff, [labelSpace / 2, width - left - right - labelSpace / 2],\n                domain, orientation));\n            const axisHeight = this.getLogicalSpace().height - (showAxisName === false ?\n                                            (axisDimHeight + axisNamePadding) : 0);\n            isOffset && this.config({ yOffset: Math.max(axisHeight, height) });\n        } else {\n            const labelSpace = tickDimHeight;\n            this.range(adjustRange(this._minDiff, [height - top - bottom - labelSpace / 2, labelSpace / 2],\n                domain, orientation));\n            const axisWidth = this.getLogicalSpace().width - (showAxisName === false ? axisDimHeight : 0);\n            this.isOffset && this.config({ xOffset: Math.max(axisWidth, width) });\n        }\n        return this;\n    }\n\n}\n","/**\n * @module Axis\n * This file declares a class that is used to render an axis to add  meaning to\n * plots.\n */\nimport { getUniqueId, generateGetterSetters, rgbToHsv } from 'muze-utils';\nimport { createScale, getScheme, getSchemeType } from '../scale-creator';\nimport { CONTINOUS, DISCRETE, COLOR } from '../enums/constants';\nimport { strategyGetter } from './color-strategy';\nimport { DEFAULT_CONFIG } from './defaults';\nimport { PROPS, getHslString } from './props';\n\n/**\n* This class is used to instantiate a SimpleAxis.\n* @class SimpleAxis\n*/\nexport default class ColorAxis {\n\n    /**\n    * Creates an instance of SimpleAxis.\n    * @param {Object} config input parameters.\n    * @param {Object | undefined} params.range Type of color range.\n    * @param {string} params.name the label to show on axis.\n    * @param {string} params.type The type of scale to handle.\n    * @memberof ColorAxis\n    */\n    constructor (config) {\n        generateGetterSetters(this, PROPS);\n        this.config(config);\n\n        this._domainType = this._config.type === 'linear' ? CONTINOUS : DISCRETE;\n        this._rangeType = (this._config.type === 'linear' && !this._config.step) ? CONTINOUS : DISCRETE;\n\n        this._schemeType = getSchemeType(this._config.range);\n\n        this._colorStrategy = this.setColorStrategy(this._domainType, this._rangeType, this._schemeType);\n        this._scale = this.createScale(this._colorStrategy);\n\n        this._id = getUniqueId();\n    }\n\n    /**\n     *\n     *\n     * @static\n     * @returns\n     * @memberof ColorAxis\n     */\n    static defaultConfig () {\n        return DEFAULT_CONFIG;\n    }\n\n    /**\n     *\n     *\n     * @static\n     * @returns\n     * @memberof ColorAxis\n     */\n    static type () {\n        return COLOR;\n    }\n\n    /**\n     *\n     *\n     * @param {*} colorStrategy\n     * @returns\n     * @memberof ColorAxis\n     */\n    createScale (colorStrategy) {\n        const { range } = this.config();\n        if (range && typeof (range) === 'string') {\n            return getScheme(range);\n        }\n        return createScale({\n            type: colorStrategy.scale,\n            range\n        });\n    }\n\n    /**\n     *\n     *\n     * @param {*} domainType\n     * @param {*} rangeType\n     * @param {*} schemeType\n     * @returns\n     * @memberof ColorAxis\n     */\n    setColorStrategy (domainType, rangeType, schemeType) {\n        const { stops } = this.config();\n\n        return strategyGetter(domainType, rangeType, schemeType, stops);\n    }\n\n    /**\n     *\n     *\n     * @param {*} domainVal\n     * @returns\n     * @memberof ColorAxis\n     */\n    getHslString (hslColorArray) {\n        return getHslString(hslColorArray);\n    }\n    /**\n     *\n     *\n     * @param {*} domainVal\n     * @returns\n     * @memberof ColorAxis\n     */\n    getColor (domainVal) {\n        return this.getHslString(this.getRawColor(domainVal));\n    }\n    /**\n     *\n     *\n     * @param {*} domainVal\n     * @returns\n     * @memberof ColorAxis\n     */\n    getRawColor (domainVal) {\n        if (this.domain()) {\n            const scale = this.scale();\n            const range = scale.range ? scale.range() : null;\n            const color = this._colorStrategy.value(range)(domainVal, scale, this.domain(), this.uniqueValues());\n\n            if (typeof color === 'string') {\n                const rgbArr = color.substring(4, color.length - 1)\n                            .replace(/ /g, '')\n                            .split(',');\n                return rgbToHsv(...rgbArr);\n            }\n            return [...color];\n        }\n        return [...this.config().value];\n    }\n\n    /**\n     *\n     *\n     * @param {*} [domain=[]]\n     * @returns\n     * @memberof ColorAxis\n     */\n    updateDomain (domain = []) {\n        const scale = this.scale();\n        const range = scale.range ? scale.range() : null;\n        const domainRangeFn = this._colorStrategy.domainRange();\n        const scaleInfo = domainRangeFn(domain, this.config().stops, range);\n\n        this.domain(scaleInfo.domain);\n        scaleInfo.range && this.scale().range(scaleInfo.range);\n        this.uniqueValues(scaleInfo.uniqueVals);\n        this.scale().domain(scaleInfo.scaleDomain || this.domain());\n\n        return this;\n    }\n\n    /**\n     * This method returns an object that can be used to\n     * reconstruct this instance.\n     *\n     * @return {Object} the serializable props of axis\n     * @memberof ShapeAxis\n     */\n    serialize () {\n        return {\n            type: this.constructor.type(),\n            scale: this.scale(),\n            domain: this.domain(),\n            config: this.config()\n        };\n    }\n\n    transformColor (color, transformationArr) {\n        let h = color[0] * 360;\n        let s = color[1] * 100;\n        let l = color[2] * 100;\n        let a = color[3] || 1;\n        const newH = h + transformationArr[0];\n        const newS = s + transformationArr[1];\n        const newL = l + transformationArr[2];\n        const newA = a + transformationArr[3] || 0;\n        h = newH > 360 ? newH - 360 : (newH < 0 ? newH + 360 : newH);\n        s = newS > 100 ? newS - 100 : (newS < 0 ? newS + 100 : newS);\n        l = newL > 100 ? newL - 100 : (newL < 0 ? newL + 100 : newL);\n        a = newA > 1 ? newA - 1 : (newA < 0 ? newA + 1 : newA);\n\n        return { color: `hsl(${h},${s}%,${l}%,${a})`, hsla: [h / 360, s / 100, l / 100, a] };\n    }\n\n    /**\n     * Returns the id of the axis.\n     * @return {string} Unique identifier of the axis.\n     */\n    id () {\n        return this._id;\n    }\n\n}\n","export const x11Colors = {\n    Pink: { hex: 'ffc0cb', rgb: '255,192,203' },\n    LightPink: { hex: 'ffb6c1', rgb: '255,182,193' },\n    HotPink: { hex: 'ff69b4', rgb: '255,105,180' },\n    DeepPink: { hex: 'ff1493', rgb: '255,20,147' },\n    PaleVioletRed: { hex: 'db7093', rgb: '219,112,147' },\n    MediumVioletRed: { hex: 'c71585', rgb: '199,21,133' },\n    LightSalmon: { hex: 'ffa07a', rgb: '255,160,122' },\n    Salmon: { hex: 'fa8072', rgb: '250,128,114' },\n    DarkSalmon: { hex: 'e9967a', rgb: '233,150,122' },\n    LightCoral: { hex: 'f08080', rgb: '240,128,128' },\n    IndianRed: { hex: 'cd5c5c', rgb: '205,92,92' },\n    Crimson: { hex: 'dc143c', rgb: '220,20,60' },\n    FireBrick: { hex: 'b22222', rgb: '178,34,34' },\n    DarkRed: { hex: '8b0000', rgb: '139,0,0' },\n    Red: { hex: 'ff0000', rgb: '255,0,0' },\n    OrangeRed: { hex: 'ff4500', rgb: '255,69,0' },\n    Tomato: { hex: 'ff6347', rgb: '255,99,71' },\n    Coral: { hex: 'ff7f50', rgb: '255,127,80' },\n    DarkOrange: { hex: 'ff8c00', rgb: '255,140,0' },\n    Orange: { hex: 'ffa500', rgb: '255,165,0' },\n    Gold: { hex: 'ffd700', rgb: '255,215,0' },\n    Yellow: { hex: 'ffff00', rgb: '255,255,0' },\n    LightYellow: { hex: 'ffffe0', rgb: '255,255,224' },\n    LemonChiffon: { hex: 'fffacd', rgb: '255,250,205' },\n    LightGoldenrodYellow: { hex: 'fafad2', rgb: '250,250,210' },\n    PapayaWhip: { hex: 'ffefd5', rgb: '255,239,213' },\n    Moccasin: { hex: 'ffe4b5', rgb: '255,228,181' },\n    PeachPuff: { hex: 'ffdab9', rgb: '255,218,185' },\n    PaleGoldenrod: { hex: 'eee8aa', rgb: '238,232,170' },\n    Khaki: { hex: 'f0e68c', rgb: '240,230,140' },\n    DarkKhaki: { hex: 'bdb76b', rgb: '189,183,107' },\n    Cornsilk: { hex: 'fff8dc', rgb: '255,248,220' },\n    BlanchedAlmond: { hex: 'ffebcd', rgb: '255,235,205' },\n    Bisque: { hex: 'ffe4c4', rgb: '255,228,196' },\n    NavajoWhite: { hex: 'ffdead', rgb: '255,222,173' },\n    Wheat: { hex: 'f5deb3', rgb: '245,222,179' },\n    BurlyWood: { hex: 'deb887', rgb: '222,184,135' },\n    Tan: { hex: 'd2b48c', rgb: '210,180,140' },\n    RosyBrown: { hex: 'bc8f8f', rgb: '188,143,143' },\n    SandyBrown: { hex: 'f4a460', rgb: '244,164,96' },\n    Goldenrod: { hex: 'daa520', rgb: '218,165,32' },\n    DarkGoldenrod: { hex: 'b8860b', rgb: '184,134,11' },\n    Peru: { hex: 'cd853f', rgb: '205,133,63' },\n    Chocolate: { hex: 'd2691e', rgb: '210,105,30' },\n    SaddleBrown: { hex: '8b4513', rgb: '139,69,19' },\n    Sienna: { hex: 'a0522d', rgb: '160,82,45' },\n    Brown: { hex: 'a52a2a', rgb: '165,42,42' },\n    Maroon: { hex: '800000', rgb: '128,0,0' },\n    DarkOliveGreen: { hex: '556b2f', rgb: '85,107,47' },\n    Olive: { hex: '808000', rgb: '128,128,0' },\n    OliveDrab: { hex: '6b8e23', rgb: '107,142,35' },\n    YellowGreen: { hex: '9acd32', rgb: '154,205,50' },\n    LimeGreen: { hex: '32cd32', rgb: '50,205,50' },\n    Lime: { hex: '00ff00', rgb: '0,255,0' },\n    LawnGreen: { hex: '7cfc00', rgb: '124,252,0' },\n    Chartreuse: { hex: '7fff00', rgb: '127,255,0' },\n    GreenYellow: { hex: 'adff2f', rgb: '173,255,47' },\n    SpringGreen: { hex: '00ff7f', rgb: '0,255,127' },\n    MediumSpringGreen: { hex: '00fa9a', rgb: '0,250,154' },\n    LightGreen: { hex: '90ee90', rgb: '144,238,144' },\n    PaleGreen: { hex: '98fb98', rgb: '152,251,152' },\n    DarkSeaGreen: { hex: '8fbc8f', rgb: '143,188,143' },\n    MediumSeaGreen: { hex: '3cb371', rgb: '60,179,113' },\n    SeaGreen: { hex: '2e8b57', rgb: '46,139,87' },\n    ForestGreen: { hex: '228b22', rgb: '34,139,34' },\n    Green: { hex: '008000', rgb: '0,128,0' },\n    DarkGreen: { hex: '006400', rgb: '0,100,0' },\n    MediumAquamarine: { hex: '66cdaa', rgb: '102,205,170' },\n    Aqua: { hex: '00ffff', rgb: '0,255,255' },\n    Cyan: { hex: '00ffff', rgb: '0,255,255' },\n    LightCyan: { hex: 'e0ffff', rgb: '224,255,255' },\n    PaleTurquoise: { hex: 'afeeee', rgb: '175,238,238' },\n    Aquamarine: { hex: '7fffd4', rgb: '127,255,212' },\n    Turquoise: { hex: '40e0d0', rgb: '64,224,208' },\n    MediumTurquoise: { hex: '48d1cc', rgb: '72,209,204' },\n    DarkTurquoise: { hex: '00ced1', rgb: '0,206,209' },\n    LightSeaGreen: { hex: '20b2aa', rgb: '32,178,170' },\n    CadetBlue: { hex: '5f9ea0', rgb: '95,158,160' },\n    DarkCyan: { hex: '008b8b', rgb: '0,139,139' },\n    Teal: { hex: '008080', rgb: '0,128,128' },\n    LightSteelBlue: { hex: 'b0c4de', rgb: '176,196,222' },\n    PowderBlue: { hex: 'b0e0e6', rgb: '176,224,230' },\n    LightBlue: { hex: 'add8e6', rgb: '173,216,230' },\n    SkyBlue: { hex: '87ceeb', rgb: '135,206,235' },\n    LightSkyBlue: { hex: '87cefa', rgb: '135,206,250' },\n    DeepSkyBlue: { hex: '00bfff', rgb: '0,191,255' },\n    DodgerBlue: { hex: '1e90ff', rgb: '30,144,255' },\n    CornflowerBlue: { hex: '6495ed', rgb: '100,149,237' },\n    SteelBlue: { hex: '4682b4', rgb: '70,130,180' },\n    RoyalBlue: { hex: '4169e1', rgb: '65,105,225' },\n    Blue: { hex: '0000ff', rgb: '0,0,255' },\n    MediumBlue: { hex: '0000cd', rgb: '0,0,205' },\n    DarkBlue: { hex: '00008b', rgb: '0,0,139' },\n    Navy: { hex: '000080', rgb: '0,0,128' },\n    MidnightBlue: { hex: '191970', rgb: '25,25,112' },\n    Lavender: { hex: 'e6e6fa', rgb: '230,230,250' },\n    Thistle: { hex: 'd8bfd8', rgb: '216,191,216' },\n    Plum: { hex: 'dda0dd', rgb: '221,160,221' },\n    Violet: { hex: 'ee82ee', rgb: '238,130,238' },\n    Orchid: { hex: 'da70d6', rgb: '218,112,214' },\n    Fuchsia: { hex: 'ff00ff', rgb: '255,0,255' },\n    Magenta: { hex: 'ff00ff', rgb: '255,0,255' },\n    MediumOrchid: { hex: 'ba55d3', rgb: '186,85,211' },\n    MediumPurple: { hex: '9370db', rgb: '147,112,219' },\n    BlueViolet: { hex: '8a2be2', rgb: '138,43,226' },\n    DarkViolet: { hex: '9400d3', rgb: '148,0,211' },\n    DarkOrchid: { hex: '9932cc', rgb: '153,50,204' },\n    DarkMagenta: { hex: '8b008b', rgb: '139,0,139' },\n    Purple: { hex: '800080', rgb: '128,0,128' },\n    Indigo: { hex: '4b0082', rgb: '75,0,130' },\n    DarkSlateBlue: { hex: '483d8b', rgb: '72,61,139' },\n    SlateBlue: { hex: '6a5acd', rgb: '106,90,205' },\n    MediumSlateBlue: { hex: '7b68ee', rgb: '123,104,238' },\n    White: { hex: 'ffffff', rgb: '255,255,255' },\n    Snow: { hex: 'fffafa', rgb: '255,250,250' },\n    Honeydew: { hex: 'f0fff0', rgb: '240,255,240' },\n    MintCream: { hex: 'f5fffa', rgb: '245,255,250' },\n    Azure: { hex: 'f0ffff', rgb: '240,255,255' },\n    AliceBlue: { hex: 'f0f8ff', rgb: '240,248,255' },\n    GhostWhite: { hex: 'f8f8ff', rgb: '248,248,255' },\n    WhiteSmoke: { hex: 'f5f5f5', rgb: '245,245,245' },\n    Seashell: { hex: 'fff5ee', rgb: '255,245,238' },\n    Beige: { hex: 'f5f5dc', rgb: '245,245,220' },\n    OldLace: { hex: 'fdf5e6', rgb: '253,245,230' },\n    FloralWhite: { hex: 'fffaf0', rgb: '255,250,240' },\n    Ivory: { hex: 'fffff0', rgb: '255,255,240' },\n    AntiqueWhite: { hex: 'faebd7', rgb: '250,235,215' },\n    Linen: { hex: 'faf0e6', rgb: '250,240,230' },\n    LavenderBlush: { hex: 'fff0f5', rgb: '255,240,245' },\n    MistyRose: { hex: 'ffe4e1', rgb: '255,228,225' },\n    Gainsboro: { hex: 'dcdcdc', rgb: '220,220,220' },\n    LightGray: { hex: 'd3d3d3', rgb: '211,211,211' },\n    Silver: { hex: 'c0c0c0', rgb: '192,192,192' },\n    DarkGrey: { hex: 'a9a9a9', rgb: '169,169,169' },\n    Grey: { hex: '808080', rgb: '128,128,128' },\n    DimGrey: { hex: '696969', rgb: '105,105,105' },\n    LightSlateGrey: { hex: '778899', rgb: '119,136,153' },\n    SlateGrey: { hex: '708090', rgb: '112,128,144' },\n    DarkSlateGrey: { hex: '2f4f4f', rgb: '47,79,79' },\n    Black: { hex: '000000', rgb: '0,0,0' }\n};\n","import { hslInterpolator, piecewiseInterpolator, numberInterpolator } from 'muze-utils';\nimport { CONTINOUS, DISCRETE } from '../enums/constants';\nimport { LINEAR, SEQUENTIAL, ORDINAL, QUANTILE } from '../enums/scale-type';\nimport { getHslString } from './props';\n\nconst getStops = (domain, stops) => {\n    let newStops = [];\n\n    if (stops instanceof Array) {\n        newStops = stops.slice().sort();\n        newStops = [...new Set([domain[0], ...stops, domain[1]])].sort();\n    } else {\n        const interpolator = numberInterpolator()(...domain);\n        for (let i = 0; i <= stops; i++) {\n            newStops[i] = interpolator(i / stops);\n        }\n    }\n\n    if (newStops[0] < domain[0]) {\n        newStops.shift();\n    }\n    return { domain, newStops };\n};\n\nconst rangeStops = (newStopsLength, range) => {\n    let newRange = [];\n    const maxRangeLength = Math.min(range.length, 18);\n\n    if (newStopsLength > maxRangeLength) {\n        const rangeCycles = Math.floor((newStopsLength) / maxRangeLength);\n        for (let i = 0; i < rangeCycles; i++) {\n            newRange = [...newRange, ...range];\n        }\n        newRange = [...newRange, ...range.slice(0, (newStopsLength) % maxRangeLength)];\n    } else {\n        newRange = range.slice(0, newStopsLength);\n    }\n    return { newRange };\n};\n\n/**\n *\n *\n * @param {*} domain\n * @returns\n */\nconst piecewiseDomain = (domain, stops, range) => {\n    let newRange = [];\n    const uniqueVals = domain;\n    const retDomain = domain.map((d, i) => (i) / (domain.length - 1));\n    const hslValues = range.map(e => getHslString(e));\n    const fn = piecewiseInterpolator()(hslInterpolator(), [...hslValues]);\n    newRange = retDomain.map(e => fn(e));\n    return { domain: retDomain, uniqueVals, scaleDomain: [0, 1], range: newRange };\n};\n\n/**\n*\n*\n* @param {*} domain\n* @returns\n*/\nconst indexedDomain = (domain) => {\n    const uniqueVals = domain;\n    const retDomain = domain.map((d, i) => (i) / (domain.length - 1));\n    return { domain: retDomain, uniqueVals, scaleDomain: [0, 1] };\n};\n\n/**\n *\n *\n * @param {*} domain\n * @returns\n */\nconst indexedDomainMeasure = (domain, stops, range) => {\n    const uniqueVals = domain;\n    return { domain, uniqueVals, scaleDomain: [0, 1], range };\n};\n\n/**\n *\n *\n * @param {*} domain\n * @returns\n */\nconst normalDomain = (domain, stops, range) => {\n    const uniqueVals = domain;\n    return { uniqueVals, domain, nice: true, range };\n};\n\n/**\n *\n *\n * @param {*} domain\n * @param {*} stops\n * @returns\n */\nconst steppedDomain = (domain, stops, range) => {\n    const { domain: uniqueVals, newStops } = getStops(domain, stops);\n    const { newRange } = rangeStops(newStops.length - 1, range);\n\n    return { uniqueVals, domain: newStops, nice: true, range: newRange };\n};\n\nconst continousSteppedDomain = (domain, stops, range) => {\n    const { domain: uniqueVals, newStops } = getStops(domain, stops);\n\n    const { newRange } = rangeStops(newStops.length, range);\n\n    return { uniqueVals, domain: newStops, nice: true, range: newRange };\n};\n\n/**\n *\n *\n * @param {*} domainValue\n * @param {*} scale\n * @param {*} domain\n * @param {*} uniqueVals\n * @returns\n */\nconst uniqueRange = (domainValue, scale, domain, uniqueVals) => {\n    const index = uniqueVals.indexOf(domainValue);\n    const numVal = domain[index];\n    return scale(numVal);\n};\n\n/**\n *\n *\n * @param {*} domainValue\n * @param {*} scale\n * @param {*} domain\n * @returns\n */\nconst indexedRange = (domainValue, scale, domain) => {\n    const numVal = (domainValue - domain[0]) / (domain[domain.length - 1] - domain[0]);\n\n    return scale(numVal);\n};\n\n/**\n *\n *\n * @param {*} domainValue\n * @param {*} scale\n */\nconst normalRange = (domainValue, scale) => scale(domainValue);\n\n/**\n *\n *\n * @param {*} stops\n */\nconst strategies = () => ({\n    [`${CONTINOUS}-${CONTINOUS}-${SEQUENTIAL}`]: {\n        scale: SEQUENTIAL,\n        domainRange: () => indexedDomainMeasure,\n        value: () => indexedRange\n    },\n    [`${DISCRETE}-${CONTINOUS}-${SEQUENTIAL}`]: {\n        scale: SEQUENTIAL,\n        domainRange: () => indexedDomain,\n        value: () => uniqueRange\n    },\n    [`${CONTINOUS}-${DISCRETE}-${SEQUENTIAL}`]: {\n        scale: SEQUENTIAL,\n        domainRange: () => indexedDomainMeasure,\n        value: () => indexedRange\n    },\n    [`${DISCRETE}-${DISCRETE}-${SEQUENTIAL}`]: {\n        scale: SEQUENTIAL,\n        domainRange: () => indexedDomain,\n        value: () => uniqueRange\n    },\n    [`${DISCRETE}-${CONTINOUS}-${ORDINAL}`]: {\n        scale: ORDINAL,\n        domainRange: () => piecewiseDomain,\n        value: () => normalRange\n\n    },\n    [`${DISCRETE}-${DISCRETE}-${ORDINAL}`]: {\n        scale: ORDINAL,\n        domainRange: () => normalDomain,\n        value: () => normalRange\n    },\n    [`${CONTINOUS}-${CONTINOUS}-${ORDINAL}`]: {\n        scale: LINEAR,\n        domainRange: () => continousSteppedDomain,\n        value: () => normalRange\n    },\n    [`${CONTINOUS}-${DISCRETE}-${ORDINAL}`]: {\n        scale: QUANTILE,\n        domainRange: () => steppedDomain,\n        value: () => normalRange\n\n    }\n});\n\n/**\n *\n *\n * @param {*} domainType\n * @param {*} rangeType\n * @param {*} schemeType\n * @param {*} stops\n */\nexport const strategyGetter = (domainType, rangeType, schemeType, stops) =>\n     strategies(stops)[`${domainType}-${rangeType}-${schemeType || ''}`];\n","import {\n    LINEAR\n} from '../enums/constants';\n/**\n * Set of default colors\n */\nexport const palette = [\n    '#086bb6',\n    '#f37d45',\n    '#f5ce02',\n    '#67bda0',\n    '#c54e4e',\n    '#ae70af'\n];\n\nexport const DEFAULT_CONFIG = {\n    range: palette,\n    value: palette[0],\n    step: false,\n    stops: 5,\n    type: LINEAR\n};\n","import { mergeRecursive, detectColor, hexToHsv, rgbToHsv } from 'muze-utils';\nimport { x11Colors } from './color-maps';\nimport { palette } from './defaults';\n\nexport const getHslString = hslArr => `hsla(${hslArr[0] * 360},${hslArr[1] * 100}%,${hslArr[2] * 100}%, \n    ${hslArr[3] || 1})`;\n\nexport const convertToXllString = baseString => (baseString.split(' ') || [])\n                .reduce((x, e) => `${x}${e.charAt(0).toUpperCase()}${e.slice(1)}`, '');\n\nexport const getActualHslColor = (e, paletteColor) => {\n    let color = '';\n    if (typeof e === 'string') {\n        e = e.replace(/ /g, '');\n    }\n    if (detectColor(e) === 'hsl' || detectColor(e) === 'hsla') {\n        color = e.match(/(\\d+(\\.\\d+)?)/g);\n        color = [color[0] / 360, color[1] / 100, color[2] / 100, color[3] || 1];\n    } else if (detectColor(e) === 'hex') {\n        color = hexToHsv(e);\n    } else if (detectColor(e) === 'rgb') {\n        const col = e.substring(e.indexOf('(') + 1, e.lastIndexOf(')')).split(/,\\s*/);\n        color = rgbToHsv(...col);\n    } else if (x11Colors[convertToXllString(e)]) {\n        color = rgbToHsv(...x11Colors[convertToXllString(e)].rgb.split(','));\n    } else if (typeof e !== 'string' && !(e instanceof Array)) {\n        color = rgbToHsv(paletteColor);\n    } else {\n        color = e;\n    }\n    return color;\n};\n\nexport const PROPS = {\n    config: {\n        sanitization: (context, config) => {\n            const defCon = mergeRecursive({}, context.constructor.defaultConfig());\n            if (config.type === 'linear' && typeof config.interpolate !== 'boolean') {\n                config.interpolate = true;\n            }\n            const newConfig = mergeRecursive(defCon, config);\n\n            if (newConfig.range instanceof Array) {\n                newConfig.range = newConfig.range.map((e, i) => getActualHslColor(e, palette[i]));\n            }\n            newConfig.value = getActualHslColor(newConfig.value, newConfig.value);\n            return newConfig;\n        }\n    },\n    domain: {},\n    scale: {},\n    uniqueValues: {}\n};\n","import * as ScaleType from './enums/scale-type';\n\nconst DATA_TYPES = {\n    DIMENSION: 'dimension',\n    CATEGORICAL: 'categorical',\n    MEASURE: 'measure',\n    DATETIME: 'temporal'\n};\n\n/**\n * Map of DataModel types to associated field types.\n */\nexport const dataTypeScaleMap = {\n    [DATA_TYPES.DIMENSION]: ScaleType.BAND,\n    [DATA_TYPES.MEASURE]: ScaleType.LINEAR,\n    [DATA_TYPES.DATETIME]: ScaleType.TIME\n};\n\n","/**\n * @module Axis\n * This file declares a class that is used to render an axis to add  meaning to\n * plots.\n */\nimport { Symbols } from 'muze-utils';\nimport * as AxisOrientation from '../enums/axis-orientation';\n\n/**\n * @module Axis\n * This file exports constants that are used to reference axis orientations\n * in a consistent manner.\n */\nexport const BOTTOM = 'bottom';\nexport const TOP = 'top';\nexport const LEFT = 'left';\nexport const RIGHT = 'right';\n\n/**\n  * This object is used to associate the axis orientation with the d3 class\n  * used to represent that axis.\n  */\nexport const axisOrientationMap = {\n    [AxisOrientation.LEFT]: Symbols.axisLeft,\n    [AxisOrientation.BOTTOM]: Symbols.axisBottom,\n    [AxisOrientation.RIGHT]: Symbols.axisRight,\n    [AxisOrientation.TOP]: Symbols.axisTop\n};\n","export const CLASSPREFIX = 'muze';\n\nexport const CONTINOUS = 'continous';\nexport const DISCRETE = 'discrete';\nexport const SEQUENTIAL = 'sequential';\nexport const ORDINAL = 'ordinal';\nexport const LINEAR = 'linear';\nexport const THRESHOLD = 'threshold';\nexport const QUANTIZE = 'quantize';\nexport const QUANTILE = 'quantile';\n\nexport const COLOR = 'color';\nexport const SHAPE = 'shape';\nexport const SIZE = 'size';\n\nexport const DOMAIN = 'domain';\nexport const BAND = 'band';\nexport const HIDDEN = 'hidden';\nexport const NUMBER = 'number';\nexport const BOTTOM = 'bottom';\nexport const TOP = 'top';\n\n","/**\n * @module axis\n * This file exports constants used to reference scale type\n * consistently throughout the project.\n */\nexport const LINEAR = 'linear';\nexport const BAND = 'band';\nexport const TIME = 'temporal';\nexport const COLOR = 'color';\nexport const ORDINAL = 'ordinal';\nexport const QUANTIZE = 'quantize';\nexport const QUANTILE = 'quantile';\nexport const LOG = 'log';\nexport const POW = 'pow';\nexport const IDENTITY = 'identity';\nexport const SEQUENTIAL = 'sequential';\nexport const THRESHOLD = 'threshold';\n","/**\n * @module Axis\n * This file exports all the public methods and classes in the axis module.\n */\nimport * as AxisOrientation from './enums/axis-orientation';\nimport * as ScaleType from './enums/scale-type';\nimport './styles.scss';\n\nexport { SimpleAxis, ContinousAxis, BandAxis, TimeAxis } from './cartesian-axis';\nexport { ColorAxis } from './color-axis';\nexport { SizeAxis } from './size-axis';\nexport { ShapeAxis } from './shape-axis';\nexport { dataTypeScaleMap } from './data-type-scale-map';\nexport { AxisOrientation, ScaleType };\n","import { scales, colorSchemes } from 'muze-utils';\n\nimport {\n    SEQUENTIAL,\n    ORDINAL,\n    LINEAR,\n    CONTINOUS,\n    THRESHOLD,\n    QUANTIZE\n} from './enums/constants';\n\nimport * as ScaleType from './enums/scale-type';\n\nconst {\n    scaleLinear,\n    scaleThreshold,\n    scaleLog,\n    scalePow,\n    scaleIdentity,\n    scaleOrdinal,\n    scaleSequential,\n    scaleQuantize,\n    scaleQuantile,\n    schemeCategory10,\n    schemeCategory20,\n    schemeCategory20b,\n    scaleBand,\n    scaleTime\n} = scales;\nexport const scaleMap = {\n    [ScaleType.LINEAR]: scaleLinear,\n    [ScaleType.BAND]: scaleBand,\n    [ScaleType.QUANTIZE]: scaleQuantize,\n    [ScaleType.QUANTILE]: scaleQuantile,\n    [ScaleType.THRESHOLD]: scaleThreshold,\n    [ScaleType.SEQUENTIAL]: scaleSequential,\n    [ScaleType.LOG]: scaleLog,\n    [ScaleType.POW]: scalePow,\n    [ScaleType.IDENTITY]: scaleIdentity,\n    [ScaleType.TIME]: scaleTime,\n    [ScaleType.COLOR]: scaleLinear,\n    [ScaleType.ORDINAL]: scaleOrdinal\n};\nexport const SCHEMES = {\n    SCHEME1: schemeCategory10,\n    SCHEME2: schemeCategory20,\n    SCHEME3: schemeCategory20b\n};\n\n/**\n * Accepts a scheme in a string format and returns the scale from d3-scale-chromatic\n *\n * @export\n * @param {string} scheme a string representing the kind of scheme for the color axis\n * @return {Object} The corresponding scale from a scheme type from d3 chromatic scale\n */\nexport function getScheme (scheme) {\n    if (scheme[0] === 'i') {\n        return scaleSequential(colorSchemes[scheme]);\n    }\n    return scaleOrdinal(colorSchemes[scheme]);\n}\n\n/**\n *\n *\n * @export\n * @param {*} scheme\n * @returns\n */\nexport function getSchemeType (scheme) {\n    let schemeType = '';\n    if (scheme && typeof (scheme) === 'string') {\n        schemeType = scheme[0] === 'i' ? SEQUENTIAL : ORDINAL;\n    } else {\n        schemeType = ORDINAL;\n    }\n    return schemeType;\n}\n\n/**\n * This function is used to create a scale that is assigned to\n * an instance of axis.\n *\n * @export\n * @param {Object} params the input parameters to create a Scale object\n * @param {string} params.type the type of scale\n * @param {Array} params.range the range of scale\n * @return {Object} instance of scale\n */\nexport function createScale (params) {\n    if (!params.type || !scaleMap[params.type]) {\n        throw new Error(`${params.type} is not a valid scale type`);\n    }\n    if (!Array.isArray(params.range)) {\n        throw new Error('range parameter must be an array');\n    }\n    let scaleFactory = null;\n    const range = params.range;\n    // @todo: do it using scale decorator\n    if (params.type === LINEAR && params.interpolator) {\n        scaleFactory = scaleMap[params.interpolator];\n        if (params.interpolator === ScaleType.POW) {\n            return scaleFactory().range(range).exponent(params.exponent);\n        } else if (params.interpolator === ScaleType.LOG) {\n            return scaleFactory().range(range).base([params.base]);\n        }\n    } else {\n        scaleFactory = scaleMap[params.type];\n    }\n\n    if (params.type === QUANTIZE) {\n        scaleFactory().nice();\n    }\n    return scaleFactory().range(range);\n}\n\n/**\n * This method is used to update the range of a scale\n * so that the core module can remain agnostic of the d3\n * scale api.\n *\n * @export\n * @param {Scale} scale Instance of d3 Scale.\n * @param {Array} range new range of the scale.\n * @return {Scale} Updated scale.\n */\nexport function updateScaleRange (scale, range) {\n    return scale.range(range);\n}\n\n/**\n *\n *\n * @export\n * @param {*} domainType\n * @param {*} rangeType\n * @param {*} steps\n * @returns\n */\nexport function getScaleType (domainType, rangeType, steps) {\n    if (rangeType === CONTINOUS) {\n        return LINEAR;\n    }\n    if (domainType === CONTINOUS) {\n        if (steps instanceof Array) {\n            return THRESHOLD;\n        }\n        return QUANTIZE;\n    }\n    return ORDINAL;\n}\n","export const DEFAULT_CONFIG = {\n    generator: null,\n    value: 'circle',\n    range: ['circle', 'diamond', 'star', 'cross', 'square', 'wye', 'triangle']\n};\n","/**\n *\n *\n * @param {*} domain\n * @param {*} generatorFn\n * @returns\n */\nexport const shapeGenerator = (domain, generatorFn) => {\n    const generatedShapes = {};\n    domain.forEach((value) => {\n        generatedShapes[value] = generatorFn(value);\n    });\n    return generatedShapes;\n};\n","export const PROPS = {\n    config: {},\n    domain: {},\n    scale: {},\n    uniqueValues: {},\n    generator: {}\n};\n\n","/**\n * @module Axis\n * This file declares a class that is used to render an axis to add  meaning to\n * plots.\n */\nimport { getUniqueId, getSymbol, generateGetterSetters, mergeRecursive } from 'muze-utils';\nimport { createScale } from '../scale-creator';\nimport { DEFAULT_CONFIG } from './defaults';\nimport { SHAPE } from '../enums/constants';\nimport { shapeGenerator } from './helper';\nimport { PROPS } from './props';\n\n/**\n* This class is used to instantiate a SimpleAxis.\n* @class SimpleAxis\n*/\nexport default class ShapeAxis {\n    /**\n    * Creates an instance of SimpleAxis.\n    * @param {Object} params input parameters.\n    * @param {Object | undefined} params.range Type of color scheme.\n    * @memberof ShapeAxis\n    */\n    constructor (config) {\n        generateGetterSetters(this, PROPS);\n\n        this._id = getUniqueId();\n        this._config = Object.assign({}, this.constructor.defaultConfig());\n        this._config = mergeRecursive(this._config, config);\n\n        this._scale = createScale({\n            type: 'ordinal',\n            range: this._config.range\n        });\n    }\n\n     /**\n     *\n     *\n     * @static\n     * @returns\n     * @memberof ColorAxis\n     */\n    static defaultConfig () {\n        return DEFAULT_CONFIG;\n    }\n\n     /**\n     *\n     *\n     * @static\n     * @returns\n     * @memberof ColorAxis\n     */\n    static type () {\n        return SHAPE;\n    }\n\n    /**\n     *\n     *\n     * @param {*} value\n     * @returns\n     * @memberof ShapeAxis\n     */\n    getShape (value) {\n        if (!this.scale() || !this.domain() || !value) {\n            return this.config().value;\n        }\n\n        if (this._generatedShapes) {\n            return this._generatedShapes[value];\n        }\n\n        const shapeType = this.scale()(value);\n        if (shapeType === 'string') {\n            return getSymbol(shapeType);\n        }\n\n        return shapeType;\n    }\n\n    /**\n     * This method is used to assign a domain to the axis.\n     *\n     * @param {Array} domain the domain of the scale\n     * @memberof ShapeAxis\n     */\n    updateDomain (domain) {\n        this.uniqueValues(domain);\n        this.domain(domain);\n        this.scale().domain(domain);\n\n        if (this.config().generator) {\n            this._generatedShapes = shapeGenerator(domain, this.config().generator);\n        }\n        return this;\n    }\n\n    /**\n     * This method returns an object that can be used to\n     * reconstruct this instance.\n     *\n     * @return {Object} the serializable props of axis\n     * @memberof ShapeAxis\n     */\n    serialize () {\n        return {\n            type: this.constructor.type(),\n            scale: this.scale(),\n            domain: this.domain(),\n            range: this.config().range,\n            config: this.config()\n        };\n    }\n\n    /**\n     * Returns the id of the axis.\n     * @return {string} Unique identifier of the axis.\n     */\n    id () {\n        return this._id;\n    }\n}\n","export const DEFAULT_CONFIG = {\n    value: 36,\n    range: [36, 1000]\n};\n","export const PROPS = {\n    config: {},\n    domain: {\n        sanitization: (context, value) => {\n            context.scale().domain(value);\n            return value;\n        }\n    },\n    range: {},\n    scale: {},\n    uniqueValues: {}\n};\n","/**\n * @module Axis\n * This file declares a class that is used to render an axis to add  meaning to\n * plots.\n */\nimport { getUniqueId, generateGetterSetters } from 'muze-utils';\nimport { createScale } from '../scale-creator';\nimport { DEFAULT_CONFIG } from './defaults';\nimport { SIZE, CONTINOUS, DISCRETE } from '../enums/constants';\nimport { strategyGetter } from './size-strategy';\nimport { PROPS } from './props';\n\n/**\n* This class is used to instantiate a SimpleAxis.\n* @class SimpleAxis\n*/\nexport default class SizeAxis {\n\n    /**\n     * Creates an instance of SimpleAxis.\n     * @param {Object} config input parameters.\n     * @memberof SizeAxis\n     */\n    constructor (config) {\n        generateGetterSetters(this, PROPS);\n\n        this._id = getUniqueId();\n        this._config = Object.assign({}, this.constructor.defaultConfig(), config);\n        // @todo: Will use configuration override using scale decorator\n        this._domainType = this._config.type === 'linear' ? CONTINOUS : DISCRETE;\n        this._rangeType = CONTINOUS;\n\n        this._sizeStrategy = this.setStrategy(this._domainType, this._rangeType);\n        this._scale = this.createScale(this._sizeStrategy);\n        this._range = this._config.range;\n\n        this.updateDomain(config.domain);\n    }\n\n     /**\n     *\n     *\n     * @param {*} domainType\n     * @param {*} rangeType\n     * @param {*} schemeType\n     * @returns\n     * @memberof ColorAxis\n     */\n    setStrategy (domainType, rangeType) {\n        return strategyGetter(domainType, rangeType);\n    }\n\n    /**\n     *\n     *\n     * @returns\n     * @memberof SizeAxis\n     */\n    createScale (strategy) {\n        const {\n            range\n        } = this.config();\n        return createScale({\n            type: strategy.scale,\n            range\n        });\n    }\n\n    /**\n     *\n     *\n     * @static\n     * @returns\n     * @memberof ColorAxis\n     */\n    static defaultConfig () {\n        return DEFAULT_CONFIG;\n    }\n\n     /**\n     *\n     *\n     * @static\n     * @returns\n     * @memberof ColorAxis\n     */\n    static type () {\n        return SIZE;\n    }\n\n    /**\n     *\n     *\n     * @param {*} domainVal\n     * @returns\n     * @memberof SizeAxis\n     */\n    getSize (domainVal = 0) {\n        let sizeVal = 1;\n        const {\n            value\n        } = this.config();\n        const scale = this.scale();\n        const domain = this.domain() || [1, 1];\n\n        if (!scale || domain[0] === domain[1]) {\n            sizeVal = value;\n        } else {\n            return this._sizeStrategy.range(domainVal, scale, this.domain(), this.uniqueValues());\n        }\n        return sizeVal;\n    }\n\n    /**\n     * This method is used to assign a domain to the axis.\n     *\n     * @param {Array} domain the domain of the scale\n     * @memberof SizeAxis\n     */\n    updateDomain (domain) {\n        if (domain) {\n            const domainFn = this._sizeStrategy.domain;\n\n            const domainInfo = domainFn(domain, this.config().intervals);\n\n            this.domain(domainInfo.domain);\n            this.uniqueValues(domainInfo.uniqueVals);\n\n            this.scale().domain(domainInfo.scaleDomain || this.domain());\n        }\n        return this;\n    }\n\n    /**\n     * This method returns an object that can be used to\n     * reconstruct this instance.\n     *\n     * @return {Object} the serializable props of axis\n     * @memberof ShapeAxis\n     */\n    serialize () {\n        return {\n            type: this.constructor.type(),\n            scale: this.scale(),\n            domain: this.domain(),\n            range: this.range(),\n            config: this.config()\n        };\n    }\n\n    /**\n     * Returns the id of the axis.\n     * @return {string} Unique identifier of the axis.\n     */\n    id () {\n        return this._id;\n    }\n}\n","import { numberInterpolator, piecewiseInterpolator } from 'muze-utils';\nimport { CONTINOUS, DISCRETE } from '../enums/constants';\nimport { LINEAR, THRESHOLD } from '../enums/scale-type';\n\n/**\n *\n *\n * @param {*} domain\n * @returns\n */\nconst indexedDomain = (domain) => {\n    const uniqueVals = domain;\n    const retDomain = domain.map((d, i) => (i) / (domain.length - 1));\n    return { domain: retDomain, uniqueVals, scaleDomain: [0, 1] };\n};\n\n/**\n *\n *\n * @param {*} domain\n * @returns\n */\nconst normalDomain = (domain) => {\n    const uniqueVals = domain;\n    return { uniqueVals, domain };\n};\n\n/**\n *\n *\n * @param {*} domain\n * @param {*} intervals\n * @returns\n */\nconst steppedDomain = (domain, intervals) => {\n    let newIntervals = [];\n    if (intervals instanceof Array) {\n        newIntervals = intervals.slice().sort();\n    } else {\n        const interpolator = numberInterpolator()(...domain);\n        for (let i = 0; i < intervals; i++) {\n            newIntervals[i] = interpolator(i / (intervals - 1));\n        }\n    }\n    if (newIntervals[0] < domain[0]) {\n        newIntervals.shift();\n    }\n    const retDomain = newIntervals;\n    return { uniqueVals: newIntervals, domain: retDomain, nice: true };\n};\n\n/**\n *\n *\n * @param {*} domainValue\n * @param {*} scale\n * @param {*} domain\n * @param {*} uniqueVals\n * @returns\n */\nconst discreteRange = (domainValue, scale, domain) => {\n    const numVal = (domainValue - domain[0]) / (domain[domain.length - 1] - domain[0]);\n    const interpolator = numberInterpolator()(...scale.range());\n    return interpolator(numVal);\n};\n\n/**\n *\n *\n * @param {*} domainValue\n * @param {*} scale\n * @param {*} domain\n * @returns\n */\nconst pieceWiseRange = (domainValue, scale, domain, uniqueVals) => {\n    const index = uniqueVals.indexOf(domainValue);\n    const numVal = domain[index];\n    const fn = piecewiseInterpolator()(numberInterpolator(), [...scale.range()]);\n    return fn(numVal);\n};\n\n/**\n *\n *\n * @param {*} domainValue\n * @param {*} scale\n */\nconst normalRange = (domainValue, scale) => scale(domainValue);\n\n/**\n *\n *\n * @param {*} intervals\n */\nconst strategies = {\n    [`${DISCRETE}-${CONTINOUS}`]: {\n        scale: LINEAR,\n        domain: indexedDomain,\n        range: pieceWiseRange\n    },\n    [`${CONTINOUS}-${CONTINOUS}`]: {\n        scale: LINEAR,\n        domain: normalDomain,\n        range: normalRange\n    },\n    [`${CONTINOUS}-${DISCRETE}`]: {\n        scale: THRESHOLD,\n        domain: steppedDomain,\n        range: discreteRange\n    }\n};\n\n/**\n *\n *\n * @param {*} domainType\n * @param {*} rangeType\n * @param {*} schemeType\n * @param {*} intervals\n */\nexport const strategyGetter = (domainType, rangeType) =>\n     strategies[`${domainType}-${rangeType}`];\n","// extracted by mini-css-extract-plugin","import VolatileBehaviour from './volatile';\nimport * as BEHAVIOURNAMES from '../../enums/behaviours';\n\n/**\n * This is the behaviour for brushing a region on the chart. It accepts a payload\n * which contains the x and y range of the data and other configuration. It will then\n * create a selection box from the range and select the points which fall within the range.\n */\nexport default class BrushBehaviour extends VolatileBehaviour {\n    static formalName () {\n        return BEHAVIOURNAMES.BRUSH;\n    }\n}\n","import VolatileBehaviour from './volatile';\nimport { FILTER } from '../../enums/behaviours';\n\nexport default class FilterBehaviour extends VolatileBehaviour {\n    static formalName () {\n        return FILTER;\n    }\n\n    static mutates () {\n        return true;\n    }\n}\n","import { getSetInfo, getMergedSet, getSourceFields } from '../../helper';\n\nexport default class GenericBehaviour {\n    constructor (firebolt) {\n        this.firebolt = firebolt;\n    }\n\n    dispatch (payload) {\n        const criteria = payload.criteria;\n        const firebolt = this.firebolt;\n        const formalName = this.constructor.formalName();\n        const selectionSets = firebolt.getSelectionSets(formalName);\n        const {\n            model: filteredDataModel,\n            uids\n        } = this.firebolt.getAddSetFromCriteria(criteria, this.firebolt.getPropagationInf());\n        const entryExitSets = selectionSets.map((selectionSet) => {\n            this.setSelectionSet(uids, selectionSet);\n            return this.getEntryExitSet(selectionSet, filteredDataModel, payload);\n        });\n\n        return entryExitSets;\n    }\n\n    setSelectionSet () {\n        return this;\n    }\n\n    getEntryExitSet (selectionSet, filteredDataModel, payload) {\n        const {\n            entrySet,\n            exitSet,\n            completeSet\n        } = selectionSet.getSets();\n        const propagationInf = this.firebolt.getPropagationInf();\n        const dataModel = this.firebolt.getFullData();\n        const setConfig = {\n            isSourceFieldPresent: propagationInf.isSourceFieldPresent,\n            dataModel,\n            filteredDataModel,\n            propagationData: propagationInf.data,\n            selectionSet\n        };\n\n        return {\n            entrySet: [getSetInfo('oldEntry', entrySet[0], setConfig),\n                getSetInfo('newEntry', entrySet[1], setConfig)],\n            exitSet: [getSetInfo('oldEntry', exitSet[0], setConfig),\n                getSetInfo('newExit', exitSet[1], setConfig)],\n            mergedEnter: getSetInfo('mergedEnter', getMergedSet(entrySet), setConfig),\n            mergedExit: getSetInfo('mergedExit', getMergedSet(exitSet), setConfig),\n            completeSet: getSetInfo('complete', completeSet, setConfig),\n            isSourceFieldPresent: propagationInf.isSourceFieldPresent,\n            fields: getSourceFields(propagationInf, payload.criteria),\n            sourceSelectionSet: selectionSet._volatile === true\n        };\n    }\n\n    static mutates () {\n        return false;\n    }\n}\n\n","import VolatileBehaviour from './volatile';\nimport { HIGHLIGHT } from '../../enums/behaviours';\n\nexport default class HighlightBehaviour extends VolatileBehaviour {\n    static formalName () {\n        return HIGHLIGHT;\n    }\n}\n","export { default as HighlightBeahviour } from './highlight';\nexport { default as BrushBehaviour } from './brush';\nexport { default as FilterBehaviour } from './filter';\nexport { default as SelectBehaviour } from './select';\n\n","import GenericBehaviour from './generic';\nimport { getMergedSet } from '../../helper';\nimport * as SELECTION from '../../enums/selection';\n\nexport default class PersistentBehaviour extends GenericBehaviour {\n    setSelectionSet (addSet, selectionSet) {\n        if (addSet === null) {\n            selectionSet.reset();\n        } else if (addSet.length) {\n            const propagationInf = this.firebolt.getPropagationInf();\n            // new add set\n            const existingAddSet = addSet.filter(d => selectionSet._set[d] === SELECTION.SELECTION_NEW_ENTRY\n                || selectionSet._set[d] === SELECTION.SELECTION_OLD_ENTRY);\n            if (propagationInf.propagate === false) {\n                selectionSet.updateExit();\n                const { entrySet } = selectionSet.getSets();\n                selectionSet.reset(getMergedSet(entrySet));\n                selectionSet.add(addSet);\n                selectionSet.update(existingAddSet);\n            } else {\n                // existing add set\n                if (existingAddSet.length) {\n                    selectionSet.updateExit();\n                    selectionSet.remove(existingAddSet);\n                } else {\n                    selectionSet.updateEntry();\n                    selectionSet.add(addSet);\n                }\n                const { exitSet } = selectionSet.getSets();\n                const mergedExitSet = getMergedSet(exitSet);\n                const completeSetCount = selectionSet.getCompleteSet().length;\n                if (exitSet[1].length !== completeSetCount && mergedExitSet.length === completeSetCount) {\n                    selectionSet.reset();\n                }\n            }\n        } else {\n            selectionSet.remove(selectionSet.getCompleteSet());\n        }\n\n        return this;\n    }\n}\n","import PersistentBehaviour from './persistent';\nimport { SELECT } from '../../enums/behaviours';\n\nexport default class SelectBehaviour extends PersistentBehaviour {\n    static formalName () {\n        return SELECT;\n    }\n}\n\n","import GenericBehaviour from './generic';\nimport { getMergedSet } from '../../helper';\nimport * as SELECTION from '../../enums/selection';\n\nexport default class VolatileBehaviour extends GenericBehaviour {\n    setSelectionSet (addSet, selectionSet) {\n        if (addSet === null) {\n            selectionSet.reset();\n        } else if (addSet.length) {\n                // new add set\n            const existingAddSet = addSet.filter(d => selectionSet._set[d] === SELECTION.SELECTION_NEW_ENTRY\n                    || selectionSet._set[d] === SELECTION.SELECTION_OLD_ENTRY);\n            selectionSet.updateExit();\n            const { entrySet } = selectionSet.getSets();\n            selectionSet.reset(getMergedSet(entrySet));\n            selectionSet.add(addSet);\n            selectionSet.update(existingAddSet);\n        } else {\n            selectionSet.remove(selectionSet.getCompleteSet());\n        }\n    }\n}\n","import { getEvent } from 'muze-utils';\nimport { generatePayloadFromEvent } from './helpers';\n\n/**\n * Adds mouse interactions to target element.\n * @param {VisualUnit} instance instance of visual unit.\n * @param {SVGElement} targetEl Element on which the event listeners will be attached.\n * @param {Array} behaviours Array of behaviours\n */\n/* istanbul ignore next */ const click = firebolt => (targetEl, behaviours) => {\n    const dispatchBehaviour = function (args) {\n        const event = getEvent();\n        const payload = generatePayloadFromEvent(args, event, firebolt);\n        behaviours.forEach(beh => firebolt.dispatchBehaviour(beh, payload));\n        event.stopPropagation();\n    };\n\n    targetEl.on('click', dispatchBehaviour);\n};\nexport default click;\n","import { attachDragEvent } from './helpers/drag-event';\n\n/**\n * Adds dragging action to the target element.\n * @param {VisualUnit} instance Instance of visual unit.\n * @param {SVGElement} targetEl Element on which brushing action is needed.\n * @param {Array} behaviours Array of behaviours\n */\n/* istanbul ignore next */ const drag = firebolt => (targetEl, behaviours) => {\n    attachDragEvent(targetEl, behaviours, firebolt);\n};\n\nexport default drag;\n","import { DimensionSubtype, FieldType } from 'muze-utils';\n/**\n * Gets the drag action configuration\n * @param {VisualUnit} instance instance of visual unit\n * @param {Object} config x y positions\n * @return {Object} Payload of behaviour\n*/\n/* istanbul ignore next */ const getDragActionConfig = (sourceInfo, config, fieldsConfig) => {\n    if (!(sourceInfo.axes.x || sourceInfo.axes.y)) {\n        return {\n            criteria: null\n        };\n    }\n\n    const axes = sourceInfo.axes;\n    const xAxis = axes.x[0];\n    const yAxis = axes.y[0];\n    const axisFields = sourceInfo.fields;\n    const xField = axisFields.x[0].getMembers()[0];\n    const yField = axisFields.y[0].getMembers()[0];\n    const xFieldType = fieldsConfig[xField].def.subtype ? fieldsConfig[xField].def.subtype :\n        fieldsConfig[xField].def.type;\n    const yFieldType = fieldsConfig[yField].def.subtype ? fieldsConfig[yField].def.subtype :\n            fieldsConfig[yField].def.type;\n    const dimensions = {};\n    const stPos = config.startPos;\n    const endPos = config.endPos;\n\n    if (stPos.x === endPos.x && stPos.y === endPos.y) {\n        return {\n            criteria: null\n        };\n    }\n\n    const dragDim = xFieldType === FieldType.MEASURE ? (yFieldType === FieldType.MEASURE ? ['x', 'y'] : ['y']) : ['x'];\n    const criteria = {};\n    const isXDimension = xFieldType === DimensionSubtype.CATEGORICAL;\n    const isYDimension = yFieldType === DimensionSubtype.CATEGORICAL;\n    const xRange = xAxis.constructor.type() === 'band' ? xAxis.scale().invertExtent(stPos.x, endPos.x) :\n        xAxis.invert(stPos.x, endPos.x);\n    const yRange = yAxis.constructor.type() === 'band' ? yAxis.scale().invertExtent(stPos.y, endPos.y) :\n        yAxis.invert(stPos.y, endPos.y);\n    const selectedDomains = {\n        x: stPos.x === endPos.x ? [] : (isXDimension ? xRange : xRange.sort((a, b) => a - b)),\n        y: stPos.y === endPos.y ? [] : (isYDimension ? yRange : yRange.sort((a, b) => a - b))\n    };\n    const rangeObj = {};\n\n    if (dragDim.length === 2) {\n        rangeObj[xField] = selectedDomains.x;\n        rangeObj[yField] = selectedDomains.y;\n        if (xField === yField) {\n            const xdom = selectedDomains.x;\n            const ydom = selectedDomains.y;\n            const min = xdom[0] > ydom[0] ? ydom : xdom;\n            const max = min === ydom ? xdom : ydom;\n            if (min[1] < max[0]) {\n                rangeObj[xField] = [];\n            } else {\n                rangeObj[xField] = [max[0], min[1] < max[1] ? min[1] : max[1]];\n            }\n            dimensions.x = [stPos.x, endPos.x];\n            dimensions.y = [stPos.y, endPos.y];\n        }\n    } else {\n        criteria[dragDim[0]] = selectedDomains[dragDim[0]] || [];\n\n        if (dragDim[0] === 'x') {\n            rangeObj[xField] = criteria.x;\n            if (xFieldType === DimensionSubtype.CATEGORICAL) {\n                dimensions.x = (config.snap && stPos.x !== endPos.x) ? xAxis.getNearestRange(stPos.x, endPos.x) :\n                    [stPos.x, endPos.x];\n            }\n        } else {\n            rangeObj[yField] = criteria.y;\n            if (yFieldType === DimensionSubtype.CATEGORICAL) {\n                dimensions.y = (config.snap && stPos.y !== endPos.y) ? yAxis.getNearestRange(stPos.y, endPos.y) :\n                    [stPos.y, endPos.y];\n            }\n        }\n    }\n\n    return {\n        criteria: rangeObj,\n        dimensions\n    };\n};\n\nexport default getDragActionConfig;\n","import {\n    getEvent,\n    getD3Drag\n } from 'muze-utils';\n\nimport getDragActionConfig from './drag-action-config';\n\n/**\n * Adds dragging action to the target element.\n * @param {VisualUnit} instance Instance of visual unit.\n * @param {SVGElement} targetEl Element on which brushing action is needed.\n * @param {Array} behaviours Array of behaviours\n */\nexport const attachDragEvent = (targetEl, behaviours, firebolt, touch) => {\n    let startPos = {};\n    let endPos = {};\n    const d3Drag = getD3Drag();\n    const boundingBox = targetEl.node().getBoundingClientRect();\n    let touchStart;\n    targetEl.call(d3Drag().on('start', () => {\n        const event = getEvent();\n        startPos = {\n            x: event.x,\n            y: event.y\n        };\n        touchStart = new Date().getTime();\n    }).on('drag', () => {\n        const event = getEvent();\n        endPos = {\n            x: event.x,\n            y: event.y\n        };\n        if (touch && Math.abs(startPos.x - endPos.x) <= 5) {\n            return;\n        }\n        endPos.x = Math.max(0, Math.min(endPos.x, boundingBox.width));\n        endPos.y = Math.max(0, Math.min(endPos.y, boundingBox.height));\n\n        const payload = getDragActionConfig(firebolt.context.getSourceInfo(), {\n            startPos,\n            endPos\n        }, firebolt.context.data().getFieldsConfig());\n        behaviours.forEach(beh => firebolt.dispatchBehaviour(beh, payload));\n    }).on('end', () => {\n        const event = getEvent();\n        endPos = {\n            x: event.x,\n            y: event.y\n        };\n        const duration = new Date().getTime() - touchStart;\n\n        if (touch && duration > 100 && Math.abs(startPos.x - endPos.x) <= 5) {\n            return;\n        }\n        endPos.x = Math.max(0, Math.min(endPos.x, boundingBox.width));\n        endPos.y = Math.max(0, Math.min(endPos.y, boundingBox.height));\n\n        const payload = getDragActionConfig(firebolt.context.getSourceInfo(), {\n            startPos,\n            endPos,\n            snap: true\n        }, firebolt.context.data().getFieldsConfig());\n        payload.dragEnd = true;\n        behaviours.forEach(beh => firebolt.dispatchBehaviour(beh, payload));\n    }));\n};\n\n","import { getClientPoint } from 'muze-utils';\n\nexport const generatePayloadFromEvent = function (args, event, firebolt) {\n    const context = firebolt.context;\n    const pos = getClientPoint(context.getDrawingContext().svgContainer, event.touches ? event.touches[0] : event);\n    const nearestPoint = context.getNearestPoint(pos.x, pos.y, {\n        data: args\n    });\n    return {\n        criteria: nearestPoint ? nearestPoint.id : null,\n        showInPosition: nearestPoint.showInPosition,\n        target: nearestPoint.target,\n        position: pos\n    };\n};\n","import { getClientPoint, getEvent } from 'muze-utils';\nimport { CONSOLIDATED, FRAGMENTED } from '../../enums/constants';\n\n/**\n * Adds mouse interactions to target element.\n * @param {Firebolt} instance instance of firebolt.\n * @param {SVGElement} targetEl Element on which the event listeners will be attached.\n * @param {Array} behaviours Array of behaviours\n */\n/* istanbul ignore next */ const hover = firebolt => (targetEl, behaviours) => {\n    const dispatchBehaviour = function (args) {\n        const event = getEvent();\n        const context = firebolt.context;\n        const tooltipConf = context.config().interaction.tooltip;\n        const mode = tooltipConf.mode;\n        const pos = getClientPoint(context.getDrawingContext().svgContainer, event);\n        const nearestPoint = context.getNearestPoint(pos.x, pos.y, {\n            getAllPoints: mode === CONSOLIDATED || mode === FRAGMENTED,\n            data: args\n        });\n        const payload = {\n            criteria: nearestPoint ? nearestPoint.id : null,\n            showInPosition: nearestPoint.showInPosition,\n            target: nearestPoint.target,\n            position: pos,\n            mode\n        };\n\n        behaviours.forEach(beh => firebolt.dispatchBehaviour(beh, payload));\n        event.stopPropagation();\n    };\n\n    targetEl.on('mouseover', dispatchBehaviour)\n                    .on('mousemove', dispatchBehaviour)\n                    .on('mouseout', () => {\n                        behaviours.forEach(beh => firebolt.dispatchBehaviour(beh, {\n                            criteria: null\n                        }));\n                    });\n};\n\nexport default hover;\n","import drag from './drag';\nimport hover from './hover';\nimport { longtouch } from './longtouch';\nimport { touchdrag } from './touch-drag';\n\nimport * as ACTIONNAMES from '../../enums/actions';\nimport click from './click';\n\nexport const physicalActions = {\n    [ACTIONNAMES.DRAG]: drag,\n    [ACTIONNAMES.HOVER]: hover,\n    [ACTIONNAMES.CLICK]: click,\n    [ACTIONNAMES.LONGTOUCH]: longtouch,\n    [ACTIONNAMES.TOUCHDRAG]: touchdrag\n};\n\n","/* global setTimeout */\nimport { getEvent } from 'muze-utils';\nimport { generatePayloadFromEvent } from './helpers';\n\n/**\n * Adds mouse interactions to target element.\n * @param {VisualUnit} instance instance of visual unit.\n * @param {SVGElement} targetEl Element on which the event listeners will be attached.\n * @param {Array} behaviours Array of behaviours\n */\nexport const longtouch = firebolt => (targetEl, behaviours) => {\n    let event;\n    let touchEnd;\n    const dispatchBehaviour = function (args) {\n        const payload = generatePayloadFromEvent(args, event, firebolt);\n        behaviours.forEach(beh => firebolt.dispatchBehaviour(beh, payload));\n        event.stopPropagation();\n    };\n\n    touchEnd = false;\n    event = getEvent();\n    targetEl.on('touchstart', (args) => {\n        event = getEvent();\n        touchEnd = false;\n        setTimeout(() => {\n            if (!touchEnd) {\n                dispatchBehaviour(args);\n            } else {\n                behaviours.forEach(beh => firebolt.dispatchBehaviour(beh, {\n                    criteria: null\n                }));\n            }\n        }, 100);\n    }).on('touchend', () => {\n        touchEnd = true;\n    });\n};\n","import {\n    getEvent,\n    getD3Drag\n } from 'muze-utils';\n\nimport getDragActionConfig from './helpers/drag-action-config';\n\nexport const selectionBoxDrag = firebolt => (targetEl, behaviours) => {\n    let subject;\n    const context = firebolt.context;\n    const drawingInf = context.getDrawingContext();\n    const onDrag = (payload) => {\n        behaviours.forEach(action => firebolt.dispatchBehaviour(action, payload));\n    };\n    const d3Drag = getD3Drag();\n\n    targetEl.call(d3Drag().on('start', () => {\n        const event = getEvent();\n        subject = event.subject;\n    }).on('drag', () => {\n        const event = getEvent();\n        subject.x += event.dx;\n        subject.y += event.dy;\n        const width = drawingInf.width;\n        const height = drawingInf.height;\n        const x = Math.min(width - subject.width, Math.max(subject.x, 0));\n        const y = Math.min(height - subject.height, Math.max(subject.y, 0));\n        const y2 = y + subject.height;\n        const x2 = x + subject.width;\n\n        if (x >= 0 && x2 <= width && y >= 0 && y2 <= height) {\n            const payload = getDragActionConfig(context.getSourceInfo(), {\n                startPos: {\n                    x,\n                    y\n                },\n                endPos: {\n                    x: x2,\n                    y: y2\n                }\n            }, context.data().getFieldsConfig());\n            onDrag(payload);\n        }\n    }).on('end', () => {\n        const width = drawingInf.width;\n        const height = drawingInf.height;\n        const x = Math.min(width - subject.width, Math.max(subject.x, 0));\n        const y = Math.min(height - subject.height, Math.max(subject.y, 0));\n        const y2 = y + subject.height;\n        const x2 = x + subject.width;\n\n        if (x >= 0 && x2 <= width && y >= 0 && y2 <= height) {\n            const payload = getDragActionConfig(context.getSourceInfo(), {\n                startPos: {\n                    x,\n                    y\n                },\n                endPos: {\n                    x: x2,\n                    y: y2\n                },\n                snap: true\n            }, context.data().getFieldsConfig());\n            payload.dragEnd = true;\n            onDrag(payload);\n        }\n    }));\n};\n","import { attachDragEvent } from './helpers/drag-event';\n\n/**\n * Adds dragging action to the target element.\n * @param {VisualUnit} instance Instance of visual unit.\n * @param {SVGElement} targetEl Element on which brushing action is needed.\n * @param {Array} behaviours Array of behaviours\n */\nexport const touchdrag = firebolt => (targetEl, behaviours) => {\n    attachDragEvent(targetEl, behaviours, firebolt, true);\n};\n\n","import * as BEHAVIOURS from './enums/behaviours';\n\nexport const behaviourEffectMap = {\n    [BEHAVIOURS.BRUSH]: ['selectionBox', {\n        name: 'highlighter',\n        options: {\n            strategy: 'fade'\n        }\n    }, 'brush-anchors'],\n    [BEHAVIOURS.HIGHLIGHT]: [{\n        name: 'highlighter',\n        options: {\n            strategy: 'highlight'\n        }\n    }, 'crossline', {\n        name: 'tooltip',\n        options: {\n            order: 9999\n        }\n    }, 'anchors'],\n    [BEHAVIOURS.FILTER]: ['filter'],\n    [BEHAVIOURS.SELECT]: [{\n        name: 'highlighter',\n        options: {\n            strategy: 'focus'\n        }\n    }, 'persistent-anchors', {\n        name: 'tooltip',\n        options: {\n            strategy: 'showSelectedItems',\n            order: 0\n        }\n    }]\n};\n","export const DRAG = 'drag';\nexport const HOVER = 'hover';\nexport const SELECTIONDRAG = 'selectiondrag';\nexport const CLICK = 'click';\nexport const LONGTOUCH = 'longtouch';\nexport const TOUCHDRAG = 'touchdrag';\n\n","export const BRUSH = 'brush';\nexport const HIGHLIGHT = 'highlight';\nexport const TOOLTIP = 'tooltip';\nexport const FILTER = 'filter';\nexport const SELECT = 'select';\n","export const CLASSPREFIX = 'muze';\nexport const CONSOLIDATED = 'consolidated';\nexport const FRAGMENTED = 'fragmented';\n\n","const SELECTION_NEW_ENTRY = 1;\nconst SELECTION_NEW_EXIT = -1;\nconst SELECTION_NULL = 0;\nconst SELECTION_OLD_ENTRY = 2;\nconst SELECTION_OLD_EXIT = -2;\n\nexport {\n    SELECTION_NEW_ENTRY,\n    SELECTION_NEW_EXIT,\n    SELECTION_NULL,\n    SELECTION_OLD_ENTRY,\n    SELECTION_OLD_EXIT\n};\n","import {\n    mergeRecursive,\n    getElementsByClassName,\n    hasTouch,\n    filterPropagationModel,\n    FieldType,\n    selectElement\n} from 'muze-utils';\nimport SelectionSet from './selection-set';\nimport {\n    initializeBehaviouralActions,\n    initializeSideEffects,\n    changeSideEffectAvailability,\n    initializePhysicalActions\n} from './helper';\n\n/**\n * Relient firebolt is responsible for dispatching behaviours. It has only behaviours which can be\n * dispatched without any physical action being triggered.\n */\nexport default class Firebolt {\n    constructor (context, actions, sideEffects, behaviourEffectMap) {\n        this.context = context;\n        this._sideEffectDefinitions = {};\n        this._sideEffects = {};\n        this._propagationInf = {};\n        this._actions = {\n            behavioural: {},\n            physical: {}\n        };\n        this._propagationFields = {};\n        this._sourceSideEffects = {\n            tooltip: true,\n            selectionBox: true\n        };\n        this._actionBehaviourMap = {};\n        this._config = {};\n        this._behaviourEffectMap = {};\n\n        this.mapSideEffects(behaviourEffectMap);\n        this.registerBehaviouralActions(actions.behavioural);\n        this.registerSideEffects(sideEffects);\n        this.registerPhysicalBehaviouralMap(actions.physicalBehaviouralMap);\n        this.registerPhysicalActions(actions.physical);\n    }\n\n    config (...config) {\n        if (config.length) {\n            const conf = this._config = mergeRecursive(this._config, config[0]);\n            const sideEffects = this.sideEffects();\n            for (const key in sideEffects) {\n                if ({}.hasOwnProperty.call(sideEffects, key)) {\n                    const sideEffectConf = conf[key];\n                    sideEffectConf && sideEffects[key].config(sideEffectConf);\n                }\n            }\n            return this;\n        }\n        return this._config;\n    }\n\n    mapSideEffects (behEffectMap) {\n        const behaviourEffectMap = this._behaviourEffectMap;\n        for (const key in behEffectMap) {\n            if ({}.hasOwnProperty.call(behEffectMap, key)) {\n                const sideEffects = behEffectMap[key] || [];\n                !behaviourEffectMap[key] && (behaviourEffectMap[key] = []);\n                this._behaviourEffectMap[key] = [...new Set([...behaviourEffectMap[key], ...sideEffects])];\n            }\n        }\n        return this;\n    }\n\n    registerBehaviouralActions (actions) {\n        const behaviours = initializeBehaviouralActions(this, actions);\n        Object.assign(this._actions.behavioural, behaviours);\n        return this;\n    }\n\n    registerSideEffects (sideEffects) {\n        for (const key in sideEffects) {\n            this._sideEffectDefinitions[sideEffects[key].formalName()] = sideEffects[key];\n        }\n        return this;\n    }\n\n    applySideEffects (sideEffects, selectionSet, payload) {\n        const sideEffectStore = this.sideEffects();\n        sideEffects.forEach((sideEffect) => {\n            let options;\n            let name;\n            if (typeof sideEffect === 'object') {\n                name = sideEffect.name;\n                options = sideEffect.options;\n            } else {\n                name = sideEffect;\n            }\n\n            const sideEffectInstance = sideEffectStore[name];\n            if (sideEffectInstance.enabled) {\n                sideEffectStore[name].apply(selectionSet, payload, options);\n            }\n        });\n        return this;\n    }\n\n    dispatchBehaviour (behaviourName, payload) {\n        const action = this._actions.behavioural[behaviourName];\n        const sideEffects = this._behaviourEffectMap[behaviourName];\n\n        if (action) {\n            const selectionSet = action(payload);\n            this.applySideEffects(sideEffects, selectionSet, payload);\n        }\n    }\n\n    sideEffects (...sideEffects) {\n        if (sideEffects.length) {\n            this._sideEffects = sideEffects[0];\n            return this;\n        }\n        return this._sideEffects;\n    }\n\n    enable (fn) {\n        changeSideEffectAvailability(this.sideEffects(), fn, true);\n        return this;\n    }\n\n    disable (fn) {\n        changeSideEffectAvailability(this.sideEffects(), fn, false);\n        return this;\n    }\n\n    attachPropagationListener (dataModel) {\n        dataModel.unsubscribe('propagation');\n        dataModel.on('propagation', this.onDataModelPropagation());\n        return this;\n    }\n\n    onDataModelPropagation () {\n        return (propValue) => {\n            const payload = propValue.payload;\n            const action = payload.action;\n\n            this.dispatchBehaviour(action, payload, {\n                propagate: false\n            });\n        };\n    }\n\n    createSelectionSet (uniqueIds) {\n        const behaviours = this._actions.behavioural;\n        const selectionSet = {};\n        const volatileSelectionSet = {};\n\n        for (const key in behaviours) {\n            if ({}.hasOwnProperty.call(behaviours, key)) {\n                selectionSet[key] = new SelectionSet(uniqueIds);\n                volatileSelectionSet[key] = new SelectionSet(uniqueIds, true);\n            }\n        }\n        this._volatileSelectionSet = volatileSelectionSet;\n        this.selectionSet(selectionSet);\n        return this;\n    }\n\n    selectionSet (...selectionSet) {\n        if (selectionSet.length) {\n            this._selectionSet = selectionSet[0];\n            return this;\n        }\n        return this._selectionSet;\n    }\n\n    initializeSideEffects () {\n        const sideEffectDefinitions = this._sideEffectDefinitions;\n        this.sideEffects(initializeSideEffects(this, sideEffectDefinitions));\n        return this;\n    }\n\n    registerPhysicalActions (actions) {\n        const initedActions = initializePhysicalActions(this, actions);\n        Object.assign(this._actions.physical, initedActions);\n        return this;\n    }\n\n    propagateWith (action, ...fields) {\n        if (fields.length) {\n            this._propagationFields[action] = fields;\n            return this;\n        }\n        return this._propagationFields;\n    }\n\n    /**\n     * Map actions and behaviours\n     * @return {Firebolt} Firebolt instance\n     */\n    mapActionsAndBehaviour () {\n        const initedPhysicalActions = this._actions.physical;\n        const map = this._actionBehaviourMap;\n\n        for (const action in map) {\n            if (!({}).hasOwnProperty.call(action, map)) {\n                let target;\n                const mapObj = map[action];\n                target = mapObj.target;\n                const touch = mapObj.touch;\n                if (!target) {\n                    target = this.context.getDefaultTargetContainer();\n                }\n                const bind = hasTouch() ? touch === true || touch === undefined : !touch;\n                bind && this.bindActionWithBehaviour(initedPhysicalActions[action], target, mapObj.behaviours);\n            }\n        }\n        return this;\n    }\n\n    registerPhysicalBehaviouralMap (map) {\n        Object.assign(this._actionBehaviourMap, map);\n        return this;\n    }\n\n    /**\n     * Binds a target element with an action.\n     * @param {Function} action Action method\n     * @param {string} target Class name of element\n     * @param {Array} behaviourList Array of behaviours\n     * @return {FireBolt} Instance of firebolt\n     */\n    bindActionWithBehaviour (action, targets, behaviourList) {\n        if (typeof (targets) === 'string') {\n            targets = [targets];\n        }\n        targets.forEach((target) => {\n            let nodes;\n            const mount = this.context.mount();\n            if (target[0] === '.') {\n                nodes = getElementsByClassName(mount, target);\n            } else {\n                nodes = selectElement(mount).selectAll(target);\n            }\n            if (nodes instanceof Array) {\n                nodes.forEach((node) => {\n                    action(selectElement(node), behaviourList);\n                });\n            } else {\n                action(nodes, behaviourList);\n            }\n        });\n        return this;\n    }\n\n    getPropagationInf () {\n        return this._propagationInf;\n    }\n\n    getAddSetFromCriteria (criteria, propagationInf = {}) {\n        const context = this.context;\n        const filteredDataModel = propagationInf.data ? propagationInf.data :\n            context.getDataModelFromIdentifiers(criteria, 'all');\n        const xFields = context.fields().x || [];\n        const yFields = context.fields().y || [];\n        const xMeasures = xFields.every(field => field.type() === FieldType.MEASURE);\n        const yMeasures = yFields.every(field => field.type() === FieldType.MEASURE);\n        return {\n            model: filteredDataModel,\n            uids: criteria === null ? null : (propagationInf.data ? filterPropagationModel(this.getFullData(),\n                propagationInf.data[0], xMeasures && yMeasures).getData().uids : filteredDataModel[0].getData().uids)\n        };\n    }\n\n    getSelectionSets (action) {\n        const sourceId = this.context.id();\n        const propagationInf = this._propagationInf || {};\n        const propagationSource = propagationInf.sourceId;\n        let applicableSelectionSets = [];\n        if (propagationSource !== sourceId) {\n            applicableSelectionSets = [this._volatileSelectionSet[action]];\n        }\n\n        if (propagationSource) {\n            applicableSelectionSets.push(this.selectionSet()[action]);\n        }\n        return applicableSelectionSets;\n    }\n\n    getFullData () {\n        return this.context.data();\n    }\n\n    resetted () {\n        return this._resetted;\n    }\n}\n","import * as SELECTION from '../enums/selection';\n\nexport const initializeSideEffects = (context, sideEffects) => {\n    const sideEffectsMap = context._sideEffects;\n\n    sideEffects = sideEffects instanceof Array ? sideEffects : Object.values(sideEffects);\n    sideEffects.forEach((SideEffect) => {\n        const sideEffectInstance = sideEffectsMap[SideEffect.formalName()];\n        sideEffectsMap[SideEffect.formalName()] = sideEffectInstance || new SideEffect(context);\n    });\n    return sideEffectsMap;\n};\n\nexport const initializeBehaviouralActions = (context, actions) => {\n    const dispatchableBehaviours = {};\n\n    actions = actions instanceof Array ? actions : Object.values(actions);\n    actions.forEach((Action) => {\n        dispatchableBehaviours[Action.formalName()] = new Action(context);\n    });\n    return dispatchableBehaviours;\n};\n\nexport const initializePhysicalActions = (context, actions) => {\n    const physicalActions = {};\n\n    for (const name in actions) {\n        if (!({}).hasOwnProperty.call(name, actions)) {\n            physicalActions[name] = actions[name](context);\n        }\n    }\n    return physicalActions;\n};\n\nexport const changeSideEffectAvailability = (sideEffects, fn, toEnable) => {\n    for (const key in sideEffects) {\n        if ({}.hasOwnProperty.call(sideEffects, key)) {\n            let change = true;\n            if (fn && fn(sideEffects[key], key) === false) {\n                change = false;\n            }\n            if (change) {\n                toEnable ? sideEffects[key].enable() : sideEffects[key].disable();\n            }\n        }\n    }\n};\n\nexport const getMergedSet = set => [...new Set([...set[0], ...set[1]])];\n\nexport const getSourceFields = (propagationInf, criteria = {}) => {\n    const sourceIdentifiers = propagationInf.sourceIdentifiers;\n    let sourceFields;\n    if (sourceIdentifiers) {\n        sourceFields = sourceIdentifiers.getSchema().map(d => d.name);\n    } else if (criteria instanceof Array) {\n        sourceFields = criteria[0];\n    } else {\n        sourceFields = Object.keys(criteria || {});\n    }\n    return sourceFields;\n};\n\nconst conditionsMap = {\n    newEntry: [SELECTION.SELECTION_NEW_ENTRY],\n    oldEntry: [SELECTION.SELECTION_OLD_ENTRY],\n    mergedEnter: [SELECTION.SELECTION_NEW_ENTRY, SELECTION.SELECTION_OLD_ENTRY],\n    newExit: [SELECTION.SELECTION_NEW_EXIT],\n    oldExit: [SELECTION.SELECTION_OLD_EXIT],\n    mergedExit: [SELECTION.SELECTION_NEW_EXIT, SELECTION.SELECTION_OLD_EXIT],\n    complete: []\n};\n\nexport const getModelFromSet = (type, model, set) => {\n    if (model) {\n        return model.select((fields, i) =>\n           (conditionsMap[type].some(condition => set[i] === condition)), {\n               saveChild: false\n           });\n    }\n    return null;\n};\n\nexport const getSetInfo = (type, set, config) => {\n    let model = null;\n    const filteredDataModel = config.filteredDataModel;\n    const selectionSet = config.selectionSet;\n    if (!config.propagationData) {\n        if (selectionSet.resetted()) {\n            model = null;\n        } else {\n            model = getModelFromSet(type, config.dataModel, config.selectionSet._set);\n        }\n    } else if (filteredDataModel) {\n        model = type === 'mergedEnter' ? filteredDataModel[0] : filteredDataModel[1];\n    }\n    return {\n        uids: set,\n        length: set.length,\n        model\n    };\n};\n","import Firebolt from './firebolt';\nimport * as behaviouralActions from './actions/behavioural';\nimport PersistentBehaviour from './actions/behavioural/persistent';\nimport GenericBehaviour from './actions/behavioural/generic';\nimport VolatileBehaviour from './actions/behavioural/volatile';\nimport { physicalActions } from './actions/physical';\nimport * as BEHAVIOURS from './enums/behaviours';\nimport * as ACTIONS from './enums/actions';\nimport * as SELECTION from './enums/selection';\nimport SurrogateSideEffect from './side-effects/surrogate';\nimport SpawnableSideEffect from './side-effects/spawnable';\nimport GenericSideEffect from './side-effects/generic';\nimport * as sideEffects from './side-effects';\nimport SelectionSet from './selection-set';\nimport { behaviourEffectMap } from './behaviour-effect-map';\n\nexport {\n    behaviouralActions,\n    VolatileBehaviour,\n    GenericBehaviour,\n    PersistentBehaviour,\n    physicalActions,\n    Firebolt,\n    BEHAVIOURS,\n    ACTIONS,\n    sideEffects,\n    SelectionSet,\n    behaviourEffectMap,\n    SurrogateSideEffect,\n    SpawnableSideEffect,\n    GenericSideEffect,\n    SELECTION\n};\n","import {\n    SELECTION_NEW_ENTRY, SELECTION_NEW_EXIT, SELECTION_NULL, SELECTION_OLD_ENTRY, SELECTION_OLD_EXIT\n} from '../enums/selection';\n/* eslint-disable guard-for-in */\n\n/**\n * This component is used to keep track of the row tuples of the data which gets added and removed.\n * @class SelectionSet\n */\nclass SelectionSet {\n    /**\n     * Creates an instance of selection set\n     * @param {Array.<string>} completeSet Set of unique ids.\n     */\n    constructor (completeSet, _volatile) {\n        this.completeSet = completeSet;\n        this._set = completeSet.reduce((obj, key) => {\n            obj[key] = SELECTION_NULL;\n            return obj;\n        }, {});\n        this._volatile = _volatile;\n        this._completeSetCount = completeSet.length;\n        this._lockedSelection = {};\n        this._resetted = true;\n    }\n\n    /**\n     * Adds a set of ids to the selection set.\n     * @param {Array.<number|string>} ids Array of unique ids\n     * @return {SelectionSet} Instance of selection set.\n     */\n    add (ids) {\n        this._resetted = false;\n\n        const set = this._set;\n        // from exitset to entryset\n        ids.forEach((i) => {\n            set[i] = SELECTION_NEW_ENTRY;\n        });\n\n        for (const key in set) {\n            if (set[key] !== SELECTION_NEW_ENTRY && set[key] !== SELECTION_OLD_ENTRY) {\n                set[key] = set[key] < 0 ? SELECTION_OLD_EXIT : SELECTION_NEW_EXIT;\n            }\n        }\n        return this;\n    }\n\n    /**\n     * Adds a set of ids to the selection set.\n     * @param {Array.<number|string>} ids Array of unique ids\n     * @return {SelectionSet} Instance of selection set.\n     */\n    update (ids) {\n        const set = this._set;\n        // from exitset to entryset\n        ids.forEach((i) => {\n            set[i] = SELECTION_OLD_ENTRY;\n        });\n\n        return this;\n    }\n\n    /**\n     * Adds a set of ids to the selection set.\n     * @param {Array.<number|string>} ids Array of unique ids\n     * @return {SelectionSet} Instance of selection set.\n     */\n    updateEntry () {\n        const set = this._set;\n\n        // from exitset to entryset\n        for (const key in set) {\n            set[key] = set[key] === SELECTION_NEW_ENTRY ? SELECTION_OLD_ENTRY : set[key];\n        }\n        return this;\n    }\n\n    /**\n     * Adds a set of ids to the selection set.\n     * @param {Array.<number|string>} ids Array of unique ids\n     * @return {SelectionSet} Instance of selection set.\n     */\n    updateExit () {\n        const set = this._set;\n        // from exitset to entryset\n        for (const key in set) {\n            set[key] = set[key] === SELECTION_NEW_EXIT ? SELECTION_OLD_EXIT : set[key];\n        }\n        return this;\n    }\n\n    /**\n     * Removes the ids from the selection set.\n     * @param {Array.<string>} ids Array of unique ids\n     * @return {SelectionSet}  Instance of selection set\n     */\n    remove (ids) {\n        this._resetted = false;\n\n        const set = this._set;\n        ids.forEach((i) => {\n            set[i] = SELECTION_NEW_EXIT;\n        });\n\n        for (const key in set) {\n            if (set[key] !== SELECTION_NEW_EXIT && set[key] !== SELECTION_OLD_EXIT) {\n                set[key] = set[key] === 0 ? SELECTION_NEW_ENTRY : SELECTION_OLD_ENTRY;\n            }\n        }\n\n        return this;\n    }\n\n    getSets () {\n        const set = this._set;\n        const retObj = {\n            entrySet: [[], []],\n            exitSet: [[], []],\n            completeSet: []\n        };\n\n        for (const key in set) {\n            if (set[key] > 0) {\n                set[key] === SELECTION_OLD_ENTRY && retObj.entrySet[0].push(key);\n                set[key] === SELECTION_NEW_ENTRY && retObj.entrySet[1].push(key);\n            } else if (set[key] < 0) {\n                set[key] === SELECTION_OLD_EXIT && retObj.exitSet[0].push(key);\n                set[key] === SELECTION_NEW_EXIT && retObj.exitSet[1].push(key);\n            }\n            retObj.completeSet.push(key);\n        }\n\n        ['entrySet', 'exitSet'].forEach((type) => {\n            retObj[type] = retObj[type].map(e => e.map(Number));\n        });\n        retObj.completeSet = retObj.completeSet.map(Number);\n\n        return retObj;\n    }\n\n    /**\n     * Resets the selection set to initial state. It sets the value of every unique id value to\n     * null in the selection set.\n     * @return {SelectionSet} Instance of selection set.\n     */\n    reset (ids) {\n        const set = this._set;\n        if (ids) {\n            ids.forEach((i) => {\n                set[i] = SELECTION_NULL;\n            });\n        } else {\n            const lockedSel = this._lockedSelection;\n            for (const key in set) {\n                if (!(key in lockedSel)) {\n                    set[key] = SELECTION_NULL;\n                }\n            }\n        }\n        this._resetted = true;\n        return this;\n    }\n\n    /**\n     * Gets the set of ids which are added in the selection set.\n     * @return {Array.<string>} Array of unique ids\n     */\n    getEntrySet () {\n        const set = this._set;\n        const addSet = [];\n\n        for (const key in set) {\n            set[key] === SELECTION_NEW_ENTRY && addSet.push(key);\n        }\n\n        return addSet;\n    }\n\n    /**\n     * Gets the set of ids which are added in the selection set.\n     * @return {Array.<string>} Array of unique ids\n     */\n    getOldEntry () {\n        const set = this._set;\n        const updateSet = [];\n\n        for (const key in set) {\n            set[key] === SELECTION_OLD_ENTRY && updateSet.push(key);\n        }\n        return updateSet;\n    }\n\n    /**\n     * Gets the set of ids which are added in the selection set.\n     * @return {Array.<string>} Array of unique ids\n     */\n    getOldExit () {\n        const set = this._set;\n        const updateSet = [];\n\n        for (const key in set) {\n            set[key] === SELECTION_OLD_EXIT && updateSet.push(key);\n        }\n\n        return updateSet;\n    }\n\n    /**\n     * Gets the set of ids which are in the remove set.\n     * @return {Array.<string>} Array of unique ids\n     */\n    getExitSet () {\n        const set = this._set;\n        const removeSet = [];\n\n        for (const key in set) {\n            set[key] === SELECTION_NEW_EXIT && removeSet.push(key);\n        }\n        return removeSet;\n    }\n\n    getCompleteSet () {\n        const set = this._set;\n        const completeSet = [];\n\n        for (const key in set) {\n            completeSet.push(key);\n        }\n\n        return completeSet;\n    }\n\n    getCompleteSetCount () {\n        return this._completeSetCount;\n    }\n\n    resetted () {\n        return this._resetted;\n    }\n\n    /**\n     * Swaps the add set and remove set in the selection set.\n     * @return {SelectionSet} Instance of selection set.\n     */\n    toggle () {\n        const set = this._set;\n\n        for (const key in set) {\n            if (set[key] === SELECTION_NEW_ENTRY) {\n                set[key] = SELECTION_NEW_EXIT;\n            } else if (set[key] === SELECTION_NEW_EXIT) {\n                set[key] = SELECTION_NEW_ENTRY;\n            } else if (set[key] === SELECTION_OLD_ENTRY) {\n                set[key] = SELECTION_OLD_EXIT;\n            } else {\n                set[key] = SELECTION_OLD_ENTRY;\n            }\n        }\n\n        return this;\n    }\n}\n\nexport default SelectionSet;\n","import { CLASSPREFIX } from '../../enums/constants';\nimport SpawnableSideEffect from '../spawnable';\n\nexport default class AnchorEffect extends SpawnableSideEffect {\n    constructor (...params) {\n        super(...params);\n        const context = this.firebolt.context;\n        this._layers = this.addAnchorLayers(context);\n    }\n\n    static target () {\n        return 'visual-unit';\n    }\n\n    static defaultConfig () {\n        return {\n            className: `${CLASSPREFIX}-anchors-group`\n        };\n    }\n\n    static formalName () {\n        return 'anchors';\n    }\n\n    addAnchorLayers (context) {\n        let layers = [];\n        this.firebolt.context.layers().forEach((layer, idx) => {\n            const shouldDrawAnchors = layer.shouldDrawAnchors();\n            if (shouldDrawAnchors) {\n                const encodingFieldsInf = layer.encodingFieldsInf();\n                const config = layer.config();\n                layers = [...layers, ...context.addLayer({\n                    name: `${layer.alias()}-${this.constructor.formalName()}-${idx}`,\n                    mark: 'point',\n                    encoding: {\n                        x: encodingFieldsInf.xField,\n                        y: encodingFieldsInf.yField,\n                        color: {\n                            field: encodingFieldsInf.colorField\n                        },\n                        size: {\n                            field: encodingFieldsInf.sizeField,\n                            value: this.defaultSizeValue()\n                        }\n                    },\n                    transform: config.transform,\n                    transition: this.getTransitionConfig(),\n                    calculateDomain: false,\n                    source: dt => dt.select(() => false),\n                    interactive: false,\n                    render: false\n                })];\n            }\n        });\n        return layers;\n    }\n\n    getTransitionConfig () {\n        return {\n            disabled: true\n        };\n    }\n\n    /**\n     * Returns the default area value of the anchor point.\n     * @return { number } Default area value of anchor.\n     */\n    defaultSizeValue () {\n        return 100;\n    }\n\n    apply (selectionSet) {\n        const dataModel = selectionSet.mergedEnter.model;\n        const drawingInf = this.drawingContext();\n        const sideEffectGroup = drawingInf.sideEffectGroup;\n        const className = this.config().className;\n        const anchorGroups = this.createElement(sideEffectGroup, 'g', this._layers.map(d => d.id()), className);\n        const layers = this._layers;\n        anchorGroups.each(function (d, i) {\n            layers[i].data(dataModel).mount(this);\n        });\n\n        return this;\n    }\n}\n","import AnchorEffect from './anchors';\nimport { CLASSPREFIX } from '../enums/constants';\n\nexport default class BrushAnchors extends AnchorEffect {\n    static formalName () {\n        return 'brush-anchors';\n    }\n\n    static defaultConfig () {\n        return {\n            className: `${CLASSPREFIX}-brush-anchors`\n        };\n    }\n\n    getTransitionConfig () {\n        return {\n            disabled: true\n        };\n    }\n}\n","import { selectElement, FieldType } from 'muze-utils';\n\nimport './styles.scss';\nimport { CLASSPREFIX } from '../../enums/constants';\nimport SpawnableSideEffect from '../spawnable';\n\nexport default class Crossline extends SpawnableSideEffect {\n    static defaultConfig () {\n        return {\n            className: `${CLASSPREFIX}-crossline-group`,\n            bandClass: `${CLASSPREFIX}-crossband`,\n            lineClass: `${CLASSPREFIX}-crossline`\n        };\n    }\n\n    static formalName () {\n        return 'crossline';\n    }\n\n    apply (selectionSet, payload) {\n        let height;\n        let bandWidth;\n        let px;\n        let width;\n        const {\n            className,\n            bandClass,\n            lineClass\n        } = this.config();\n        const dataModel = selectionSet.mergedEnter.model;\n        const drawingInf = this.drawingContext();\n        if (payload.criteria && dataModel && dataModel.isEmpty()) {\n            return this;\n        }\n        if (payload.criteria === null || !dataModel) {\n            this.hide();\n            return this;\n        }\n\n        const dataObj = dataModel.getData();\n        const sourceInf = this.firebolt.context.getSourceInfo();\n        const axes = sourceInf.axes;\n        const axisFields = sourceInf.fields;\n        const fields = selectionSet.fields;\n        const data = dataObj.data;\n        const fieldsConfig = dataModel.getFieldsConfig();\n        const svgContainer = drawingInf.sideEffectGroup;\n\n        const elemData = [];\n        fields.forEach((field) => {\n            const fieldIndex = fieldsConfig[field] && fieldsConfig[field].index;\n            const dataArr = data.map(d => d[fieldIndex]);\n            const axisIndex = [['x', 0], ['x', 1], ['y', 0], ['y', 1]].find((arr) => {\n                const fieldInst = axisFields[arr[0]][arr[1]];\n                return fieldInst && fieldInst.type() === FieldType.DIMENSION &&\n                    fieldInst.getMembers().indexOf(field) !== -1;\n            });\n            if (axisIndex !== undefined && data.length) {\n                const type = axisIndex[0];\n                const axis = axes[type][axisIndex[1]];\n                const value = dataArr[0];\n                bandWidth = axis.getUnitWidth() || 0;\n                px = axis.getScaleValue(value) + bandWidth / 2 + drawingInf.xOffset;\n                const plotWidth = Math.max(...this.firebolt.context.layers().map(layer => layer.getPlotSpan()[type]));\n                const pad = Math.max(...this.firebolt.context.layers().map(layer => layer.getPlotPadding()[type]));\n                height = drawingInf.height;\n                width = drawingInf.width;\n                const startPx = px - plotWidth / 2 - pad / 2;\n                const endPx = px + plotWidth / 2 + pad / 2;\n                const dataPoint = {};\n                if (type === 'y') {\n                    dataPoint.d = `M 0 ${startPx} L 0 ${endPx} L ${width} ${endPx} L ${width} ${startPx} Z`;\n                } else {\n                    dataPoint.d = `M ${startPx} 0 L ${endPx} 0 L ${endPx} ${height} L ${startPx} ${height} Z`;\n                }\n                dataPoint.className = plotWidth ? bandClass : lineClass;\n                elemData.push(dataPoint);\n            }\n        });\n        if (elemData.length) {\n            const parentGroup = this.createElement(svgContainer, 'g', [1], className);\n            const elem = this.createElement(parentGroup, 'path', elemData);\n            elem.attr('d', d => d.d).style('pointer-events', 'none')\n                            .attr('class', d => d.className);\n        }\n        return this;\n    }\n\n    hide () {\n        const className = this.config().className;\n        const drawingInf = this.drawingContext();\n        selectElement(drawingInf.sideEffectGroup).selectAll(`.${className}`).remove();\n    }\n}\n","// extracted by mini-css-extract-plugin","import SurrogateSideEffect from '../surrogate';\n\nexport default class FilterEffect extends SurrogateSideEffect {\n    static formalName () {\n        return 'filter';\n    }\n\n    static target () {\n        return 'visual-unit';\n    }\n\n    static mutates () {\n        return true;\n    }\n\n    apply (selectionSet, payload) {\n        const context = this.firebolt.context;\n        const entryModel = selectionSet.mergedEnter.model;\n        if (payload.criteria === null) {\n            context.clearCaching().resetData();\n        } else {\n            context.enableCaching().data(entryModel);\n        }\n        return this;\n    }\n}\n","import { mergeRecursive, getUniqueId } from 'muze-utils';\n\nexport default class GenericSideEffect {\n    constructor (firebolt) {\n        this.firebolt = firebolt;\n        this.enabled = true;\n        this._strategy = 'default';\n        this._config = {};\n        this._id = getUniqueId();\n        this.config(this.constructor.defaultConfig());\n    }\n\n    static defaultConfig () {\n        return {};\n    }\n\n    static target () {\n        return 'all';\n    }\n\n    static mutates () {\n        return false;\n    }\n\n    config (...params) {\n        if (params.length) {\n            this._config = mergeRecursive(this._config, params[0]);\n            return this;\n        }\n        return this._config;\n    }\n\n    disable () {\n        this.enabled = false;\n        return this;\n    }\n\n    enable () {\n        this.enabled = true;\n        return this;\n    }\n\n    apply () {\n        return this;\n    }\n}\n","export const spaceOutBoxes = (boxes, extent, showVertically) => {\n    let y;\n    let height;\n    let x;\n    let width;\n    let i;\n    const pad = 5;\n    const len = boxes.length;\n    const spaceOutIfOverlap = (firstBox, secondBox, opposite) => {\n        x = firstBox.x;\n        width = firstBox.width;\n        y = firstBox.y;\n        height = firstBox.height;\n        const bottom = y + height;\n        const right = x + width;\n\n        if (showVertically) {\n            if (opposite ? y < (secondBox.y + secondBox.height) : bottom > secondBox.y) {\n                secondBox.y = opposite ? firstBox.y - secondBox.height - pad :\n                        bottom + pad;\n            }\n        } else if (opposite ? x < (secondBox.x + secondBox.width) : right > secondBox.x) {\n            secondBox.x = opposite ? firstBox.x - secondBox.width - pad :\n                    right + pad;\n        }\n    };\n\n    boxes.sort((a, b) => (showVertically ? a.y - b.y : a.x - b.x));\n    i = 0;\n\n    for (i = 0; i < len - 1; i++) {\n        spaceOutIfOverlap(boxes[i], boxes[i + 1]);\n    }\n\n    if ((boxes[i].y + boxes[i].height) > extent.height ||\n            (boxes[i].x + boxes[i].width) > extent.width) {\n        if (showVertically) {\n            boxes[i].y -= (boxes[i].height + boxes[i].y) - extent.height;\n        } else {\n            boxes[i].x -= (boxes[i].width + boxes[i].x) - extent.width;\n        }\n        for (i = len - 1; i > 0; i--) {\n            spaceOutIfOverlap(boxes[i], boxes[i - 1], true);\n        }\n    }\n    return boxes;\n}\n;\n","export { default as SelectionBox } from './selection-box';\nexport { default as Tooltip } from './tooltip';\nexport { default as Crossline } from './crossline';\nexport { default as PlotHighlighter } from './plot-highlighter';\nexport { default as FilterEffect } from './filter';\nexport { default as PersistentAnchors } from './persistent-anchors';\nexport { default as BrushAnchors } from './brush-anchors';\nexport { default as AnchorEffect } from './anchors';\n","import AnchorEffect from './anchors';\nimport { CLASSPREFIX } from '../enums/constants';\n\nexport default class PersistentAnchors extends AnchorEffect {\n    static formalName () {\n        return 'persistent-anchors';\n    }\n\n    static defaultConfig () {\n        return {\n            className: `${CLASSPREFIX}-persistent-anchors`\n        };\n    }\n\n    getTransitionConfig () {\n        return {\n            disabled: true\n        };\n    }\n}\n","import SurrogateSideEffect from '../surrogate';\nimport { strategies } from './strategy';\n\nexport default class PlotHighlighter extends SurrogateSideEffect {\n    constructor (...params) {\n        super(...params);\n        this._strategy = 'highlight';\n    }\n\n    static formalName () {\n        return 'highlighter';\n    }\n\n    static target () {\n        return 'visual-unit';\n    }\n\n    setStrategy (strategy) {\n        this._strategy = strategy;\n        return this;\n    }\n\n    apply (selectionSet, payload, options = {}) {\n        const strategy = strategies[options.strategy || this._strategy];\n\n        if (selectionSet.isSourceFieldPresent !== false) {\n            strategy(selectionSet, this);\n        }\n\n        return this;\n    }\n}\n","export const strategies = {\n    fade: (set, context) => {\n        const {\n            mergedEnter,\n            mergedExit,\n            exitSet,\n            completeSet\n        } = set;\n\n        if (!mergedEnter.length && !mergedExit.length) {\n            context.unfadeSelection(completeSet);\n        } else {\n            context.fadeOutSelection(exitSet[1]);\n            context.unfadeSelection(mergedEnter);\n        }\n    },\n    focus: (set, context) => {\n        const {\n            mergedEnter,\n            mergedExit,\n            completeSet\n        } = set;\n        if (!mergedEnter.length && !mergedExit.length) {\n            context.focusSelection(completeSet);\n        } else {\n            context.focusOutSelection(mergedExit);\n            context.focusSelection(mergedEnter);\n        }\n    },\n    highlight: (set, context) => {\n        const {\n            mergedEnter,\n            mergedExit,\n            entrySet,\n            exitSet,\n            completeSet\n        } = set;\n        if (!mergedEnter.length && !mergedExit.length) {\n            context.dehighlightPoint(completeSet);\n        } else {\n            context.highlightPoint(entrySet[1]);\n            context.dehighlightPoint(exitSet[1]);\n        }\n    }\n};\n","import { selectElement } from 'muze-utils';\n\nexport const getBoxDimensionsFromPayload = (payload, axes, axisFields) => {\n    let x1;\n    let x2;\n    let y1;\n    let y2;\n    let xRange;\n    let yRange;\n    let direction;\n    const criteria = payload.criteria;\n    const dimensions = payload.dimensions || {};\n    const xDim = dimensions.x;\n    const yDim = dimensions.y;\n\n    if (criteria === null) {\n        return null;\n    }\n\n    const xAxis = axes.x[0];\n    const yAxis = axes.y[0];\n    const xLinear = xAxis.constructor.type() === 'linear';\n    const yLinear = yAxis.constructor.type() === 'linear';\n    const xField = `${axisFields.x[0]}`;\n    const yField = `${axisFields.y[0]}`;\n    const xCriteria = criteria[xField];\n    const yCriteria = criteria[yField];\n\n    if (xCriteria && xCriteria[0] instanceof Array) {\n        xRange = xCriteria[0];\n        yRange = xCriteria[1];\n    } else {\n        xRange = xCriteria || [];\n        yRange = yCriteria || [];\n    }\n    direction = xCriteria && yCriteria ? 'both' : (xCriteria ? 'vertical' : 'horizontal');\n    if (xRange && xRange.length) {\n        if ((yAxis.constructor.type() === 'band' && xLinear)) {\n            x1 = x2 = undefined;\n            direction = 'horizontal';\n        } else {\n            const domain = xAxis.domain();\n            const bandScale = xAxis.constructor.type() === 'band';\n            let x1Val;\n            let x2Val;\n            if (bandScale) {\n                let x1DomainIndex = domain.indexOf(xRange[0]);\n                let x2DomainIndex = domain.indexOf(xRange[xRange.length - 1]);\n                [x1DomainIndex, x2DomainIndex] = [x1DomainIndex, x2DomainIndex].sort((a, b) => a - b);\n                x1Val = domain[x1DomainIndex];\n                x2Val = domain[x2DomainIndex];\n            } else {\n                x1Val = xRange[0];\n                x2Val = xRange[xRange.length - 1];\n            }\n            x1 = xAxis.getScaleValue(x1Val);\n            x2 = xAxis.getScaleValue(x2Val);\n            x2 += bandScale ? xAxis.getUnitWidth() : 0;\n        }\n    } else {\n        x1 = x2 = undefined;\n    }\n    if (yRange && yRange.length) {\n        if ((xAxis.constructor.type() === 'band' && yLinear)) {\n            y1 = y2 = undefined;\n            direction = 'vertical';\n        } else {\n            const domain = yAxis.domain();\n            const bandScale = yAxis.constructor.type() === 'band';\n            let y1Val;\n            let y2Val;\n            if (bandScale) {\n                let y1DomainIndex = domain.indexOf(yRange[0]);\n                let y2DomainIndex = domain.indexOf(yRange[yRange.length - 1]);\n                [y1DomainIndex, y2DomainIndex] = [y1DomainIndex, y2DomainIndex].sort(((a, b) => b - a));\n                y1Val = domain[y1DomainIndex];\n                y2Val = domain[y2DomainIndex];\n            } else {\n                y1Val = yRange[0];\n                y2Val = yRange[yRange.length - 1];\n            }\n            y1 = yAxis.getScaleValue(y1Val);\n            y2 = yAxis.getScaleValue(y2Val);\n            y2 += yAxis.constructor.type() === 'band' ? yAxis.getUnitWidth() : 0;\n        }\n    } else {\n        y1 = y2 = undefined;\n    }\n\n    if ((yLinear && xLinear) || !payload.dragEnd) {\n        if (xDim) {\n            [x1, x2] = xDim;\n        }\n        if (yDim) {\n            [y1, y2] = yDim;\n        }\n    }\n\n    return {\n        dimension: {\n            x1,\n            x2,\n            y1,\n            y2\n        },\n        direction\n    };\n};\n\nexport const changeVisibility = (context, sideEffectGroup, visible) => {\n    const config = context.config();\n    const className = config.defClassName;\n    const classPrefix = config.classPrefix;\n    selectElement(sideEffectGroup).selectAll(`.${classPrefix}-${className}`)\n                    .style('display', visible ? 'block' : 'none');\n};\n","import {\n    getQualifiedClassName,\n    selectElement,\n    makeElement,\n    isValidValue\n} from 'muze-utils';\nimport { CLASSPREFIX } from '../../enums/constants';\nimport './styles.scss';\nimport SpawnableSideEffect from '../spawnable';\nimport { selectionBoxDrag } from '../../actions/physical/selection-box-drag';\nimport { getBoxDimensionsFromPayload, changeVisibility } from './helper';\n\n/**\n * This class is used to create a selection box which is used by visual unit for brushing and\n * selection in the canvas.\n * @class SelectionBox\n */\nclass SelectionBox extends SpawnableSideEffect {\n    /**\n     * It returns the default configuration needed by selectionbox.\n     * @return {Object} Default configuration of the selection box.\n     */\n    static defaultConfig () {\n        return {\n            defClassName: 'selection-box-group',\n            className: '',\n            classPrefix: CLASSPREFIX,\n            box: {\n                defClassName: 'selection-box',\n                className: ''\n            },\n            transition: {\n                duration: 200\n            }\n        };\n    }\n\n    static formalName () {\n        return 'selectionBox';\n    }\n\n    /**\n     * Draws the selectionbox with the specified dimensions.\n     * @param {Object} dimension Dimensions of the selection box.\n     * @param {number} dimension.x1 Starting x position\n     * @param {number} dimension.x2 Ending x position\n     * @param {number} dimension.y1 Starting y position\n     * @param {number} dimension.y2 Ending y position\n     * @param {Object} conf Configuration needed to draw the selection box\n     * @param {number} unitWidth Width of the visual unit.\n     * @param {number} unitHeight Height of the visual unit.\n     */\n    apply (selectionSet, payload) {\n        let x;\n        let y;\n        let width;\n        let height;\n        const config = this._config;\n        const boxConf = config.box;\n        const firebolt = this.firebolt;\n        const drawingInf = this.drawingContext();\n        const mountPoint = drawingInf.sideEffectGroup;\n        const unitWidth = drawingInf.width;\n        const unitHeight = drawingInf.height;\n        const classPrefix = config.classPrefix;\n        const selectionGroupClassName = config.defClassName;\n\n        if (payload.criteria === null) {\n            this.hide(drawingInf);\n            return this;\n        }\n\n        const sourceInf = firebolt.context.getSourceInfo();\n        const { dimension, direction } = getBoxDimensionsFromPayload(payload, sourceInf.axes,\n            sourceInf.fields);\n        const transition = payload.dragEnd && config.transition;\n\n        if (direction === 'both' || direction === 'vertical') {\n            x = Math.min(dimension.x1, dimension.x2);\n            width = Math.abs(dimension.x2 - dimension.x1);\n        } else {\n            x = 0;\n            width = unitWidth;\n        }\n        if (direction === 'both' || direction === 'horizontal') {\n            y = Math.min(dimension.y1, dimension.y2);\n            height = Math.abs(dimension.y2 - dimension.y1);\n        } else {\n            height = unitHeight;\n            y = 0;\n        }\n        this.show(drawingInf);\n        // Create the data array for drawing the rectangle\n        const points = [\n            {\n                x,\n                y,\n                width,\n                height\n            }\n        ];\n        // Create the container group for selection box.\n        const selectionGroup = makeElement(selectElement(mountPoint), 'g', [1],\n            `.${classPrefix}-${selectionGroupClassName}`);\n        const sideEffect = this;\n        const selection = selectionGroup.selectAll('rect').data(points);\n        const selectionBox = selection.enter().append('rect')\n                        .each(function () {\n                            selectionBoxDrag(firebolt)(selectElement(this), ['brush'], sideEffect);\n                        })\n                        .merge(selection)\n                        .each(function (attrs) {\n                            let element = selectElement(this);\n                            transition && (element = element.transition().duration(transition.duration));\n                            for (const key in attrs) {\n                                if ({}.hasOwnProperty.call(attrs, key)) {\n                                    isValidValue(attrs[key]) && element.attr(key, attrs[key]);\n                                }\n                            }\n                        });\n        // Get the qualified class name for selection box rectangle\n        const boxClassName = getQualifiedClassName(boxConf.defClassName, this._id, classPrefix);\n        selectionBox.classed(boxClassName.join(' '), true);\n        selectionBox.classed(boxConf.className, true);\n\n        return this;\n    }\n\n    hide (drawingInf) {\n        changeVisibility(this, drawingInf.sideEffectGroup, false);\n    }\n\n    show (drawingInf) {\n        changeVisibility(this, drawingInf.sideEffectGroup, true);\n    }\n}\n\nexport default SelectionBox;\n\n","// extracted by mini-css-extract-plugin","import { makeElement } from 'muze-utils';\n\nimport GenericSideEffect from './generic';\n\nexport default class SpawnableSideEffect extends GenericSideEffect {\n    createElement (container, elemType, data, className) {\n        return makeElement(container, elemType, data, className);\n    }\n\n    drawingContext (...drawingContext) {\n        if (drawingContext.length) {\n            this._drawingContext = drawingContext[0];\n            return this;\n        }\n        return this._drawingContext();\n    }\n\n    show () {\n        return this;\n    }\n\n    hide () {\n        return this;\n    }\n}\n","import GenericSideEffect from './generic';\n\nexport default class SurrogateSideEffect extends GenericSideEffect {\n    fadeOutSelection (set) {\n        const context = this.firebolt.context;\n        context.fadeOutSelection(set);\n    }\n\n    unfadeSelection (set) {\n        const context = this.firebolt.context;\n        context.unfadeSelection(set);\n    }\n\n    highlightPoint (set) {\n        const context = this.firebolt.context;\n        context.highlightPoint(set);\n    }\n\n    dehighlightPoint (set) {\n        const context = this.firebolt.context;\n        context.dehighlightPoint(set);\n    }\n\n    focusSelection (set) {\n        const context = this.firebolt.context;\n        context.focusSelection(set);\n    }\n\n    focusOutSelection (set) {\n        const context = this.firebolt.context;\n        context.focusOutSelection(set);\n    }\n\n    resetPoint (set) {\n        const context = this.firebolt.context;\n        context.resetPoint(set);\n    }\n}\n","import { Tooltip as TooltipRenderer } from '@chartshq/muze-tooltip';\nimport { FieldType, ReservedFields } from 'muze-utils';\nimport { spaceOutBoxes } from '../helper';\nimport { strategies } from './strategies';\nimport { FRAGMENTED } from '../../enums/constants';\nimport SpawnableSideEffect from '../spawnable';\n\nimport './styles.scss';\n\nexport default class Tooltip extends SpawnableSideEffect {\n    constructor (...params) {\n        super(...params);\n        this._tooltips = {};\n        this._strategies = strategies;\n        this._strategy = 'default';\n    }\n\n    static defaultConfig () {\n        return {\n            padding: 5\n        };\n    }\n\n    static formalName () {\n        return 'tooltip';\n    }\n\n    apply (selectionSet, payload, options = {}) {\n        let totalHeight = 0;\n        let totalWidth = 0;\n        const dataModel = selectionSet.mergedEnter.model;\n        const drawingInf = this.drawingContext();\n        if (payload.criteria && dataModel && dataModel.isEmpty()) {\n            return this;\n        }\n        if (payload.criteria === null || !dataModel) {\n            this.hide(payload, null);\n            return this;\n        }\n\n        const tooltips = this._tooltips;\n        const config = this.config();\n        const boundBox = {\n            width: drawingInf.width,\n            height: drawingInf.height\n        };\n        const showInPosition = payload.showInPosition;\n        const pad = config.padding;\n        const dataModels = [];\n        const context = this.firebolt.context;\n        const fragmented = config.mode === FRAGMENTED;\n        const sourceInf = context.getSourceInfo();\n        const fields = sourceInf.fields;\n        const xField = `${fields.x[0]}`;\n        const fieldsConfig = dataModel.getFieldsConfig();\n        const xFieldDim = fieldsConfig[xField] && fieldsConfig[xField].def.type === FieldType.DIMENSION;\n        const showVertically = !!xFieldDim;\n        const tooltipPos = payload.position;\n        const boxes = [];\n        const enter = {};\n\n        const uids = dataModel.getData().uids;\n        if (fragmented) {\n            dataModels.push(...uids.map(d => dataModel.select((fieldsArr, i) => i === d, {\n                saveChild: false\n            })));\n        } else {\n            dataModels.push(dataModel);\n        }\n        const plotDimensions = context.getPlotPointsFromIdentifiers(payload.target || payload.criteria);\n        // Show tooltip for each datamodel\n        for (let i = 0; i < dataModels.length; i++) {\n            let plotDim = plotDimensions[i];\n            if (fragmented) {\n                plotDim = context.getPlotPointsFromIdentifiers([[ReservedFields.ROW_ID], dataModels[i].getData().uids]);\n                plotDim = plotDim && plotDim[0];\n            }\n            const dt = dataModels[i];\n            enter[i] = true;\n            const tooltipInst = tooltips[i] = tooltips[i] || new TooltipRenderer(drawingInf.htmlContainer,\n                    drawingInf.svgContainer);\n            tooltipInst.context(sourceInf);\n            const strategy = strategies[options.strategy];\n            tooltipInst.content(payload.action, dt, {\n                formatter: strategy,\n                order: options.order\n            })\n                            .config(this.config())\n                            .extent({\n                                x: 0,\n                                y: 0,\n                                width: drawingInf.width,\n                                height: drawingInf.height\n                            });\n\n            if (showInPosition) {\n                tooltipInst.position(tooltipPos.x + pad, tooltipPos.y + pad);\n            } else if (plotDim) {\n                tooltipInst.positionRelativeTo({\n                    x: plotDim.x,\n                    y: plotDim.y,\n                    width: plotDim.width || 0,\n                    height: plotDim.height || 0\n                }, {\n                    orientation: fragmented ?\n                        (showVertically ? 'horizontal' : 'vertical') : undefined\n                });\n            } else {\n                tooltipInst.hide();\n                break;\n            }\n            if (fragmented) {\n                const position = tooltipInst._position;\n                const tooltipBoundBox = tooltipInst._tooltipContainer.node().getBoundingClientRect();\n\n                totalHeight += tooltipBoundBox.height + pad;\n                totalWidth += tooltipBoundBox.width + pad;\n                if (showVertically ? totalHeight > drawingInf.height : totalWidth > drawingInf.width) {\n                    break;\n                }\n                boxes.push({\n                    x: position.x,\n                    y: position.y,\n                    width: tooltipBoundBox.width,\n                    height: tooltipBoundBox.height,\n                    tooltip: tooltipInst\n                });\n            }\n        }\n        // console.log(tooltips);\n        for (const key in tooltips) {\n            if (!enter[key]) {\n                const tooltip = tooltips[key];\n                tooltip.content(payload.action, null);\n                if (!tooltip.getContents().length) {\n                    tooltip.remove();\n                    delete tooltips[key];\n                }\n            }\n        }\n        if (fragmented) {\n            spaceOutBoxes(boxes, boundBox, showVertically);\n            boxes.forEach(box => box.tooltip.position(box.x, box.y, {\n                repositionArrow: true\n            }));\n        }\n        return this;\n    }\n\n    hide (payload) {\n        const tooltips = this._tooltips;\n        for (const key in tooltips) {\n            if ({}.hasOwnProperty.call(tooltips, key)) {\n                tooltips[key].content(payload.action, null);\n                tooltips[key].hide();\n            }\n        }\n    }\n}\n","import { FieldType } from 'muze-utils';\n\nexport const strategies = {\n    showSelectedItems: (dm) => {\n        const dataObj = dm.getData();\n        const measures = dataObj.schema.filter(d => d.type === FieldType.MEASURE).map(d => d.name);\n        const aggregatedModel = dm.groupBy(['']);\n        const fieldsObj = dm.getFieldspace().fieldsObj();\n        const fieldsConf = aggregatedModel.getFieldsConfig();\n        return [\n            [{\n                value: `${dataObj.data.length}`,\n                style: {\n                    'font-weight': 'bold'\n                }\n            }, 'Items Selected', `(${fieldsObj[measures[0]].defAggFn().toUpperCase()}) ${measures[0]}`,\n            {\n                value: `${aggregatedModel.getData().data[0][fieldsConf[measures[0]].index].toFixed(2)}`,\n                style: {\n                    'font-weight': 'bold'\n                }\n            }]\n        ];\n    }\n};\n","// extracted by mini-css-extract-plugin","export const DRAG = 'drag';\nexport const HOVER = 'hover';\nexport const SELECTIONDRAG = 'selectiondrag';\nexport const CLICK = 'click';\n","export const BRUSH = 'brush';\nexport const HIGHLIGHT = 'highlight';\nexport const TOOLTIP = 'tooltip';\nexport const FILTER = 'filter';\nexport const SELECT = 'select';\n\n","export const CLASSPREFIX = 'muze';\nexport const IDFIELD = '__id__';\nexport const CONFIG = 'config';\nexport const DATAMODEL = 'dataModel';\nexport const AXES = 'axes';\nexport const LAYERDEFS = 'layerDef';\nexport const WIDTH = 'width';\nexport const HEIGHT = 'height';\nexport const MOUNTPOINT = 'mountPoint';\nexport const GRIDLINEPARENTGROUPCLASS = 'grid-lines';\nexport const TRANSFORM = 'transform';\nexport const CONSOLIDATED = 'consolidated';\nexport const FRAGMENTED = 'fragmented';\nexport const DEFAULTCOLOR = '#F44336';\nexport const DEFAULTSIZE = 50;\nexport const DEFAULTSHAPE = 'circle';\nexport const STEP = 'step';\nexport const GRADIENT = 'gradient';\nexport const ORDINAL = 'ordinal';\nexport const SCALE_FUNCTIONS = {\n    size: 'getSize',\n    shape: 'getShape',\n    color: 'getColor'\n};\nexport const TOP = 'top';\nexport const LEFT = 'left';\nexport const RIGHT = 'right';\nexport const BOTTOM = 'bottom';\nexport const HORIZONTAL = 'horizontal';\nexport const VERTICAL = 'vertical';\nexport const CENTER = 'center';\nexport const VALUE = 'value';\nexport const PATH = 'path';\nexport const SHAPE = 'shape';\nexport const ICON = 'icon';\nexport const RECT = 'rect';\nexport const START = 'start';\nexport const UPPER = 'upper';\nexport const LOWER = 'lower';\nexport const END = 'end';\nexport const SIZE = 'size';\nexport const DISCRETE = 'discrete';\nexport const MEASURE = 'measure';\n\n","export const SELECTIONBOX = 'selectionBox';\nexport const Highlighter = 'highlighter';\n\n","import { BEHAVIOURS, ACTIONS } from '@chartshq/muze-firebolt';\n\nconst CLASSPREFIX = 'muze';\n\nexport const actionBehaviourMap = {\n    [ACTIONS.DRAG]: {\n        target: `.${CLASSPREFIX}-gradient-rect`,\n        behaviours: [BEHAVIOURS.BRUSH]\n    },\n    [ACTIONS.HOVER]: {\n        target: [`.${CLASSPREFIX}-legend-columns`],\n        behaviours: [BEHAVIOURS.HIGHLIGHT]\n    },\n    [ACTIONS.CLICK]: {\n        target: [`.${CLASSPREFIX}-legend-columns`],\n        behaviours: [BEHAVIOURS.SELECT]\n    }\n};\n\nexport const propagationBehaviourMap = {\n    [BEHAVIOURS.SELECT]: BEHAVIOURS.FILTER,\n    [BEHAVIOURS.BRUSH]: BEHAVIOURS.HIGHLIGHT\n};\n","import * as BEHAVIOURS from '../enums/behaviours';\nimport * as sideEffects from '../enums/side-effects';\n\nexport const behaviourEffectMap = {\n    [BEHAVIOURS.BRUSH]: [sideEffects.SELECTIONBOX, {\n        name: sideEffects.Highlighter,\n        options: {\n            strategy: 'fade'\n        }\n    }],\n    [BEHAVIOURS.HIGHLIGHT]: [sideEffects.Highlighter],\n    select: [{\n        name: sideEffects.Highlighter,\n        options: {\n            strategy: 'fade'\n        }\n    }]\n};\n\nexport const propagationSideEffects = {\n    [BEHAVIOURS.BRUSH]: [{\n        name: sideEffects.Highlighter,\n        options: {\n            strategy: 'fade'\n        }\n    }],\n    [BEHAVIOURS.HIGHLIGHT]: [{\n        name: sideEffects.Highlighter,\n        options: {\n            strategy: 'fade'\n        }\n    }]\n};\n\n","import { PersistentBehaviour, SELECTION } from '@chartshq/muze-firebolt';\n\nexport default class SelectBehaviour extends PersistentBehaviour {\n    static formalName () {\n        return 'select';\n    }\n\n    setSelectionSet (addSet, selectionSet) {\n        if (addSet === null) {\n            selectionSet.reset();\n        } else if (addSet.length) {\n            // new add set\n            const existingRemoveSet = addSet.filter(d => selectionSet._set[d] === SELECTION.SELECTION_OLD_EXIT\n                || selectionSet._set[d] === SELECTION.SELECTION_NEW_EXIT);\n                // existing add set\n            if (existingRemoveSet.length) {\n                selectionSet.updateEntry();\n                selectionSet.add(existingRemoveSet);\n            } else {\n                selectionSet.updateExit();\n                selectionSet.remove(addSet);\n            }\n            const { exitSet } = selectionSet.getSets();\n            const mergedExitSet = [...new Set(exitSet[1]), ...new Set(exitSet[0])];\n            const completeSetCount = selectionSet.getCompleteSet().length;\n            if (exitSet[1].length !== completeSetCount && mergedExitSet.length === completeSetCount) {\n                selectionSet.reset();\n            }\n        } else {\n            selectionSet.remove(selectionSet.getCompleteSet());\n        }\n        return this;\n    }\n}\n","import { assembleModelFromIdentifiers, getDataModelFromRange } from 'muze-utils';\nimport { propagationBehaviourMap } from './action-behaviour-map';\nimport { propagationSideEffects } from './behaviour-effect-map';\nimport { STEP, GRADIENT, DISCRETE, MEASURE } from '../enums/constants';\n\nexport const propagate = (firebolt, action, selectionSet, config = {}) => {\n    let propagationData;\n    const type = firebolt.context.constructor.type();\n    const payload = config.payload;\n    const data = firebolt.context.data();\n    const metaData = firebolt.context.metaData();\n    const fieldType = metaData.getData().schema[0].type;\n\n    const propPayload = {};\n    const sourceId = firebolt.context._id;\n    propPayload.action = propagationBehaviourMap[action] || action;\n    propPayload.sideEffects = propagationSideEffects[action];\n\n    const isMutableAction = firebolt._actions.behavioural[propPayload.action].constructor.mutates();\n    if (payload.criteria === null) {\n        propagationData = null;\n    } else {\n        const entrySet = selectionSet.mergedEnter;\n        let values = data.filter(d => entrySet.uids.indexOf(d.id) !== -1).map(d => d.value);\n        if (type === STEP || (type === DISCRETE && fieldType === MEASURE)) {\n            const field = Object.keys(payload.criteria || {})[0];\n            values = data.filter(d => entrySet.uids.indexOf(d.id) !== -1).map(d => d.range);\n            propagationData = values.length ? metaData.select((fields) => {\n                let check = false;\n                for (let i = 0; i < values.length; i++) {\n                    check = fields[field].value >= values[i][0] && fields[field].value < values[i][1];\n                    if (check === true) {\n                        break;\n                    }\n                }\n                return check;\n            }, {\n                saveChild: false\n            }) : null;\n        } else if (type === GRADIENT) {\n            propagationData = getDataModelFromRange(metaData, payload.criteria);\n        } else if (values.length) {\n            propagationData = assembleModelFromIdentifiers(metaData, [payload.criteria[0], ...values.map(d => [d])]);\n        } else {\n            propPayload.criteria = null;\n            propagationData = metaData.select(() => true, {\n                saveChild: false\n            });\n        }\n    }\n\n    metaData.addToPropNamespace(`legend-${sourceId}`, {\n        payload: propPayload,\n        criteria: propPayload.criteria === null ? null : propagationData,\n        isMutableAction,\n        actionName: propPayload.action\n    });\n    metaData.propagate(propagationData, propPayload, {\n        isMutableAction,\n        sourceId\n    });\n};\n","import { Firebolt } from '@chartshq/muze-firebolt';\nimport { propagate } from './helper';\nimport { STEP, GRADIENT } from '../enums/constants';\n\n/**\n * This class manages the interactions of legend.\n * @export\n * @class LegendFireBolt\n * @extends {Firebolt}\n */\nexport class LegendFireBolt extends Firebolt {\n    constructor (...params) {\n        super(...params);\n        this.initializeSideEffects();\n    }\n\n    /**\n     * Dispatches behavioural action on legend with a payload\n     * It also propagates the selection to other datatables.\n     * @param {string} behaviourName name of behaviour\n     * @param {Object} payload Information about behaviour\n     * @memberof LegendFireBolt\n     */\n    dispatchBehaviour (behaviourName, payload) {\n        const action = this._actions.behavioural[behaviourName];\n\n        if (action) {\n            const sideEffects = this._behaviourEffectMap[behaviourName];\n            const selectionSet = action.dispatch(payload);\n            const propagationSelectionSet = selectionSet[0];\n            this.applySideEffects(sideEffects, propagationSelectionSet, payload);\n            propagate(this, behaviourName, propagationSelectionSet, {\n                payload\n            });\n        }\n    }\n\n    getAddSetFromCriteria (criteria) {\n        let values;\n        let uniqueIds;\n        const type = this.context.constructor.type();\n\n        if (criteria === null) {\n            uniqueIds = null;\n        } else if (type === STEP) {\n            values = Object.values(criteria);\n            uniqueIds = this.context.data().filter(d => values.indexOf(d.range) !== -1).map(d => d.id);\n        } else if (type === GRADIENT) {\n            uniqueIds = [];\n        } else {\n            values = criteria[1];\n            if (values) {\n                uniqueIds = this.context.data().filter(d => values.indexOf(d.value) !== -1).map(d => d.id);\n            } else {\n                values = Object.values(criteria);\n                uniqueIds = this.context.data().filter(d => values.indexOf(d.range) !== -1).map(d => d.id);\n            }\n        }\n        return {\n            uids: uniqueIds,\n            model: null\n        };\n    }\n\n    getFullData () {\n        return null;\n    }\n}\n","/**\n * Adds mouse interactions to target element.\n * @param {VisualUnit} instance instance of visual unit.\n * @param {SVGElement} targetEl Element on which the event listeners will be attached.\n * @param {Array} behaviours Array of behaviours\n */\nconst click = firebolt => (targetEl, behaviours) => {\n    const dispatchBehaviour = function (args) {\n        const payload = {\n            criteria: firebolt.context.getCriteriaFromData(args)\n        };\n        behaviours.forEach(behaviour => firebolt.dispatchBehaviour(behaviour, payload));\n    };\n\n    targetEl.on('click', dispatchBehaviour);\n};\n\nexport default click;\n","import {\n    getEvent,\n    getD3Drag\n } from 'muze-utils';\n\n/**\n * Adds dragging action to the target element.\n * @param {firebolt} firebolt firebolt\n * @param {SVGElement} targetEl Element on which brushing action is needed.\n * @param {Array} behaviours Array of behaviours\n */\n/* istanbul ignore next */ const drag = firebolt => (targetEl, behaviours) => {\n    let startPos = {};\n    let endPos = {};\n    let payload;\n    const d3Drag = getD3Drag();\n    const context = firebolt.context;\n    const boundingBox = context.measurement().gradientDimensions;\n    const axisType = context.config().align === 'horizontal' ? 'x' : 'y';\n    const axisScale = context.axis().source().scale();\n    const rangeShifter = axisScale.range()[axisType === 'x' ? 0 : 1];\n\n    targetEl.call(d3Drag().on('start', () => {\n        const event = getEvent();\n        startPos = {\n            x: event.x,\n            y: event.y\n        };\n    }).on('drag', () => {\n        const event = getEvent();\n\n        endPos = {\n            x: event.x,\n            y: event.y\n        };\n        endPos.x = Math.max(0, Math.min(endPos.x, boundingBox.width));\n        endPos.y = Math.max(0, Math.min(endPos.y, boundingBox.height));\n\n        payload = {\n            criteria: {\n                [context.fieldName()]: [axisScale.invert(startPos[axisType] + rangeShifter),\n                    axisScale.invert(endPos[axisType] + rangeShifter)].sort((a, b) => a - b)\n            }\n        };\n        behaviours.forEach(behaviour => firebolt.dispatchBehaviour(behaviour, payload));\n    }).on('end', () => {\n        const event = getEvent();\n\n        endPos = {\n            x: event.x,\n            y: event.y\n        };\n        endPos.x = Math.max(0, Math.min(endPos.x, boundingBox.width));\n        endPos.y = Math.max(0, Math.min(endPos.y, boundingBox.height));\n        if (startPos[axisType] === endPos[axisType]) {\n            payload = {\n                criteria: {}\n            };\n        } else {\n            payload = {\n                criteria: {\n                    [context.fieldName()]: [axisScale.invert(startPos[axisType] + rangeShifter),\n                        axisScale.invert(endPos[axisType] + rangeShifter)].sort((a, b) => a - b)\n                }\n            };\n        }\n        behaviours.forEach(behaviour => firebolt.dispatchBehaviour(behaviour, payload));\n    }));\n};\n\nexport default drag;\n","/**\n * Adds mouse interactions to target element.\n * @param {Firebolt} Firebolt instance of firebolt.\n * @param {SVGElement} targetEl Element on which the event listeners will be attached.\n * @param {Array} behaviours Array of behaviours\n */\n/* istanbul ignore next */ const hover = firebolt => (targetEl, behaviours) => {\n    const dispatchBehaviour = function (args) {\n        const payload = {\n            criteria: firebolt.context.getCriteriaFromData(args)\n        };\n        behaviours.forEach(behaviour => firebolt.dispatchBehaviour(behaviour, payload));\n    };\n\n    targetEl.on('mouseover', dispatchBehaviour)\n                    .on('mousemove', dispatchBehaviour)\n                    .on('mouseout', () => {\n                        behaviours.forEach(behaviour => firebolt.dispatchBehaviour(behaviour, {\n                            criteria: null\n                        }));\n                    });\n};\n\nexport default hover;\n","import drag from './drag';\nimport hover from './hover';\nimport click from './click';\nimport * as ACTIONNAMES from '../../enums/actions';\n\nexport const physicalActions = {\n    [ACTIONNAMES.DRAG]: drag,\n    [ACTIONNAMES.HOVER]: hover,\n    [ACTIONNAMES.CLICK]: click\n};\n\n","import {\n    getMousePos,\n    getEvent,\n    getD3Drag\n } from 'muze-utils';\nimport { HEIGHT, WIDTH, HORIZONTAL } from '../../enums/constants';\n\nconst getSelectionCriteria = (subject, axis, measures) => {\n    let criteria = [];\n    const {\n        axisScale,\n        axisType\n    } = axis;\n    const {\n        startPos,\n        endPos,\n        selectionBoxMeasure,\n        drawingInfMeasure,\n        offset\n    } = measures;\n    const subjectStartPoint = subject[axisType];\n\n    if (startPos[axisType] === endPos[axisType]) {\n        criteria = [];\n    } else if (subjectStartPoint + selectionBoxMeasure >= drawingInfMeasure + offset) {\n        criteria = [axisScale.invert(drawingInfMeasure + offset - selectionBoxMeasure),\n            axisScale.invert(drawingInfMeasure + offset)];\n    } else if (subjectStartPoint - offset < offset) {\n        criteria = [axisScale.invert(offset * 2), axisScale.invert(selectionBoxMeasure + offset * 2)];\n    } else {\n        criteria = [axisScale.invert(subjectStartPoint), axisScale.invert(subjectStartPoint + selectionBoxMeasure)];\n    }\n    axisType === 'x' ? criteria : criteria.reverse();\n    return criteria;\n};\n\nexport const selectionBoxDrag = firebolt => (targetEl, behaviours) => {\n    let startPos = {};\n    let payload;\n    const endPos = {};\n    const d3Drag = getD3Drag();\n    const context = firebolt.context;\n    const axisScale = context.axis().source().scale();\n    const axisType = context.config().align === HORIZONTAL ? 'x' : 'y';\n    const drawingInfMeasure = context.measurement().gradientDimensions[axisType === 'x' ?\n        WIDTH : HEIGHT];\n    const offset = axisScale.range()[axisType === 'x' ? 0 : 1];\n    const measures = {\n        drawingInfMeasure,\n        offset\n    };\n    let subject = {};\n\n    targetEl.call(d3Drag().on('start', function () {\n        const event = getEvent();\n        startPos = getMousePos(this, event.sourceEvent);\n        subject = event.subject;\n    }).on('drag', () => {\n        const event = getEvent();\n        const selectionBoxMeasure = subject[axisType === 'x' ? WIDTH : HEIGHT];\n\n        subject.x += event.dx;\n        subject.y += event.dy;\n\n        measures.selectionBoxMeasure = selectionBoxMeasure;\n        measures.startPos = startPos;\n        measures.endPos = endPos;\n        const criteria = getSelectionCriteria(subject, { axisScale, axisType }, measures);\n\n        payload = {\n            criteria: {\n                [context.fieldName()]: criteria\n            },\n            fadeOut: true\n        };\n        firebolt.dispatchBehaviour(behaviours[0], payload);\n    }).on('end', () => {\n        const event = getEvent();\n        const selectionBoxMeasure = subject[axisType === 'x' ? WIDTH : HEIGHT];\n        measures.selectionBoxMeasure = selectionBoxMeasure;\n        measures.startPos = startPos;\n        measures.endPos = endPos;\n        const criteria = getSelectionCriteria(event, { axisScale, axisType }, measures);\n        payload = {\n            criteria: {\n                [context.fieldName()]: criteria\n            },\n            fadeOut: true,\n            config: {\n                transition: {\n                    duration: 200\n                }\n            }\n        };\n        firebolt.dispatchBehaviour(behaviours[0], payload);\n    }));\n};\n\n","import SelectionBox from './selection-box';\nimport LegendHighlighter from './legend-highlighter';\n\nexport {\n    SelectionBox,\n    LegendHighlighter\n};\n\n","import { GenericSideEffect } from '@chartshq/muze-firebolt';\nimport { strategies } from './strategies';\nimport { Highlighter } from '../../../enums/side-effects';\n\nexport default class LegendHighlighter extends GenericSideEffect {\n    constructor (...params) {\n        super(...params);\n        this._strategies = strategies(this.firebolt);\n        this._strategy = 'brighten';\n    }\n\n    static formalName () {\n        return Highlighter;\n    }\n\n    apply (selectionSet, payload, options = {}) {\n        const strategy = this._strategies[options.strategy || this._strategy];\n\n        strategy(selectionSet, this);\n    }\n}\n","import { selectElement } from 'muze-utils';\n\nexport const strategies = (firebolt) => {\n    const context = firebolt.context;\n    const classed = (set, className, change) => {\n        const classPrefix = context.config().classPrefix;\n        selectElement(context.mount())\n                        .selectAll(`.${classPrefix}-legend-columns`)\n                        .filter(d => set.uids.indexOf(d.id) !== -1)\n                        .selectAll('div')\n                        .classed(className, change);\n    };\n\n    return {\n        fade: (set, config = {}) => {\n            const classPrefix = context.config().classPrefix;\n            if (!set.mergedEnter.length && !set.mergedExit.length) {\n                classed(set.completeSet, config.className || `${classPrefix}-legend-fadeout`, false);\n            } else {\n                classed(set.mergedExit, config.className || `${classPrefix}-legend-brighten`, false);\n                classed(set.mergedExit, config.className || `${classPrefix}-legend-fadeout`, true);\n                classed(set.mergedEnter, config.className || `${classPrefix}-legend-fadeout`, false);\n            }\n        },\n        brighten: (set, config = {}) => {\n            const classPrefix = context.config().classPrefix;\n            if (!set.mergedEnter.length && !set.mergedExit.length) {\n                classed(set.completeSet, config.className || `${classPrefix}-legend-brighten`, false);\n            } else {\n                classed(set.mergedEnter, config.className || `${classPrefix}-legend-brighten`, true);\n                classed(set.mergedExit, config.className || `${classPrefix}-legend-brighten`, false);\n            }\n        }\n    };\n};\n","import { makeElement } from 'muze-utils';\nimport { SpawnableSideEffect } from '@chartshq/muze-firebolt';\nimport { CLASSPREFIX, HEIGHT, WIDTH, HORIZONTAL, RECT } from '../../../enums/constants';\nimport { SELECTIONBOX } from '../../../enums/side-effects';\nimport { selectionBoxDrag } from '../../physical/selection-box-drag';\nimport './styles.scss';\n\n/**\n * This class is used to create a selection box which is used by visual unit for brushing and\n * selection in the canvas.\n * @class SelectionBox\n */\n/* istanbul ignore next */ class SelectionBox extends SpawnableSideEffect {\n    static formalName () {\n        return SELECTIONBOX;\n    }\n\n    /**\n     * It returns the default configuration needed by selectionbox.\n     * @return {Object} Default configuration of the selection box.\n     */\n    static defaultConfig () {\n        return {\n            className: 'legend-selection-box',\n            classPrefix: CLASSPREFIX\n        };\n    }\n\n    /**\n     * Draws the selectionbox with the specified dimensions.\n     */\n    /* istanbul ignore next */ apply (selectionSet, payload) {\n        let x;\n        let y;\n        let width;\n        let height;\n        const firebolt = this.firebolt;\n        const context = firebolt.context;\n        const config = this.config();\n        const axis = context.axis().source();\n        const className = `${config.classPrefix}-${config.className}`;\n\n        const domain = payload.criteria[firebolt.context.fieldName()];\n        const axisScale = axis.scale();\n        const range = domain ? [axis.getScaleValue(domain[0]), axis.getScaleValue(domain[1])] : [];\n\n        const axisType = context.config().align === HORIZONTAL ? 'x' : 'y';\n\n        const gradientDimension = firebolt.context.measurement().gradientDimensions[axisType === 'x' ?\n            HEIGHT : WIDTH];\n\n        const rangeShifter = axisScale.range()[axisType === 'x' ? 0 : 1];\n        const legendGradContainer = context.getDrawingContext().svgContainer;\n        const legendSelGroup = makeElement(legendGradContainer, 'g', [1], `${config.classPrefix}-selection-box-group`);\n\n        if (firebolt.context.config().align === HORIZONTAL) {\n            x = range[0] - rangeShifter || 0;\n            y = 0;\n            width = range[1] - range[0] || 0;\n            height = gradientDimension;\n        } else {\n            x = 0;\n            y = range[1] - rangeShifter || 0;\n            height = range[0] - range[1] || 0;\n            width = gradientDimension;\n        }\n        const enterFn = function (el) {\n            selectionBoxDrag(firebolt)(el, ['brush']);\n        };\n        const selBox = makeElement(legendSelGroup, RECT, [{ domain, x, y, width, height }], className,\n            { enter: enterFn });\n        selBox.attr('y', y)\n                        .attr('x', x)\n                        .attr(WIDTH, width)\n                        .attr(HEIGHT, height);\n    }\n}\n\nexport default SelectionBox;\n\n","// extracted by mini-css-extract-plugin","import './styles.scss';\n\nexport { DiscreteLegend, GradientLegend, SimpleLegend, StepLegend } from './legend';\n","import { getSymbol } from 'muze-utils';\nimport {\n    CENTER,\n    LEFT,\n    RIGHT\n} from '../enums/constants';\n\nexport const ALIGN = {\n    HORIZONTAL: 'horizontal',\n    VERTICAL: 'vertical'\n};\n\nexport const DEFAULT_MEASUREMENT = {\n    height: 30,\n    width: 30,\n    maxWidth: Infinity,\n    maxHeight: Infinity,\n    padding: 2,\n    margin: 2,\n    border: 1\n};\n\nexport const LEGEND_TITLE = {\n    text: '',\n    orientation: (pos) => {\n        if (pos === LEFT || pos === RIGHT) {\n            return LEFT;\n        } return CENTER;\n    }\n};\n\nexport const DEFAULT_CONFIG = {\n    classPrefix: 'muze',\n\n    formatter: {\n        bounds: {\n            lower: 'less than',\n            upper: 'more than'\n        }\n    },\n    item: {\n        text: {\n            orientation: 'right',\n            width: 10\n        },\n        icon: {\n            className: 'legend-icon',\n            height: 20,\n            width: 20,\n            color: 'rgba(0,0,0,.5)',\n            type: 'square'\n        }\n    }\n};\n\n/**\n * Creates a map of pre defined icons\n *\n * @param {string} icon Accepts a icon name like 'square', 'cross', 'diamond' etc\n * @return {Object} icon object which can be used to draw the icons\n */\nexport const ICON_MAP = icon => icon && getSymbol(icon);\n","import SimpleLegend from './simple-legend';\nimport { DISCRETE, LEFT, SIZE } from '../enums/constants';\nimport { getScaleInfo } from './legend-helper';\nimport { createLegendSkeleton, createItemSkeleton, renderDiscreteItem } from './renderer';\nimport '../styles.scss';\n\n/**\n * Creates a Legend from the axes of a canvas\n *\n * @param {Object} dependencies : legend data\n * @class Legend\n */\nexport default class DiscreteLegend extends SimpleLegend {\n\n    /**\n     * Initializes an instance of the class\n     *\n     * @static\n     * @param {Object} dependencies Set of dependencies required by the legend\n     * @return {Instance} returns a new instance of Legend\n     * @memberof Legend\n     */\n    static create (dependencies) {\n        return new DiscreteLegend(dependencies);\n    }\n\n    /**\n     *\n     *\n     * @static\n     * @returns\n     * @memberof DiscreteLegend\n     */\n    static type () {\n        return DISCRETE;\n    }\n\n    /**\n     *\n     *\n     * @param {*} scale\n     * @returns\n     * @memberof DiscreteLegend\n     */\n    dataFromScale (scale) {\n        const { scaleType, domain, scaleFn } = getScaleInfo(scale);\n        let domainForLegend = [...new Set(domain)];\n        const type = this.metaData().getData().schema[0].type;\n\n        domainForLegend = domainForLegend.map((ele, i) => {\n            let value = 0;\n            let range = 0;\n            if (type === 'measure') {\n                value = (+domainForLegend[i]).toFixed(0);\n                const nextVal = domainForLegend[i + 1] ? +domainForLegend[i + 1] : +value;\n                range = [value, nextVal.toFixed(0)];\n            } else {\n                value = domainForLegend[i];\n                range = [domainForLegend[i]];\n            }\n            return {\n                [scaleType]: scale[scaleFn](ele),\n                value,\n                id: i,\n                range\n            };\n        }).filter(d => d.value !== null);\n\n        domainForLegend = scaleType === SIZE ? domainForLegend.sort((a, b) => a[scaleType] - b[scaleType])\n            : domainForLegend;\n        return domainForLegend;\n    }\n\n    /**\n     * Render the legend with its title\n     *\n     * @param {DOM} mountPoint Point where the legend and title are to be appended\n     * @return {Instance} Current instance of legend\n     * @memberof Legend\n     */\n    render () {\n        const firebolt = this.firebolt();\n        const data = this.data();\n        const { classPrefix } = this.config();\n        const legendContainer = super.render(this.mount());\n        // create Legend\n        const { legendItem } = createLegendSkeleton(this, legendContainer, classPrefix, data);\n        const { itemSkeleton } = createItemSkeleton(this, legendItem);\n        renderDiscreteItem(this, itemSkeleton);\n        legendContainer.selectAll('div').style('float', LEFT);\n        firebolt.mapActionsAndBehaviour();\n        firebolt.createSelectionSet(this.data().map(d => d.id));\n        return legendContainer;\n    }\n}\n","import { makeElement, applyStyle } from 'muze-utils';\nimport { ContinousAxis } from '@chartshq/muze-axis';\nimport { BOTTOM, RIGHT } from '../enums/constants';\nimport { ALIGN } from './defaults';\nimport '../styles.scss';\n\n/**\n *\n *\n * @param {*} data\n * @returns\n */\nexport const getGradientDomain = (data) => {\n    if (typeof data[0].value === 'number') {\n        return data.reduce((accumulator, currentValue) =>\n            [Math.min(currentValue.value, accumulator[0]), Math.max(currentValue.value, accumulator[1])],\n                [Number.MAX_VALUE, Number.MIN_VALUE]);\n    }\n    return data.map(e => e.value);\n};\n\n/**\n *\n *\n * @param {*} container\n * @param {*} data\n * @param {*} domain\n * @returns\n */\nexport const makeLinearGradient = (container, data, domain) => {\n    const defs = makeElement(container, 'defs', [1]);\n    const linearGradient = makeElement(defs, 'linearGradient', [1])\n                .attr('id', 'linear-gradient')\n                .attr('x1', '0%')\n                .attr('y2', '0%');\n    makeElement(linearGradient, 'stop', data, 'stop-gradient')\n                    .attr('offset', d => `${(d.value - domain[0]) * 100 / (domain[1] - domain[0])}%`)\n                    .attr('stop-color', d => d.color);\n    return linearGradient;\n};\n\n/**\n * Creates an axis cell with a linear axis for computing space and\n * creating gradient legend\n *\n * @return {AxisCell} Instance of Axis Cell for the gradient axis\n * @memberof Legend\n */\nexport const createAxis = (context) => {\n    const data = context.data();\n    const { align } = context.config();\n    const AxisCell = context._cells.AxisCell;\n    const newAxis = new ContinousAxis({\n        id: `legend-${context._id}`,\n        orientation: align === ALIGN.VERTICAL ? RIGHT : BOTTOM,\n        style: context._computedStyle,\n        nice: false,\n        tickValues: data.map(d => d.value),\n        fixedBaseline: false\n    }, { labelManager: context._labelManager });\n\n    newAxis.domain(getGradientDomain(data));\n    newAxis.range([1, 1]);\n    return new AxisCell().source(newAxis).config({\n        margin: { left: 0, bottom: 0, top: 0, right: 0 }\n    });\n};\n\n/**\n *\n *\n * @param {*} container\n * @param {*} data\n * @param {*} classPrefix\n * @returns\n * @memberof GradientLegend\n */\nconst createLegendSkeleton = (container, classPrefix, data) => {\n    const domain = getGradientDomain(data);\n    const legendContainer = makeElement(container, 'div', [1], `${classPrefix}-legend-body`);\n    const legendGradSvg = makeElement(legendContainer, 'svg', [1], `${classPrefix}-gradient`);\n    const legendGradCont = makeElement(legendGradSvg, 'g', [1], `${classPrefix}-gradient-group`);\n    const linearGradient = makeLinearGradient(legendGradSvg, data, domain);\n    const legendRect = makeElement(legendGradCont, 'rect', [1], `${classPrefix}-gradient-rect`);\n\n    return {\n        legendContainer,\n        legendGradCont,\n        legendGradSvg,\n        linearGradient,\n        legendRect\n    };\n};\n\n/**\n * Renders the axis for the gradient\n *\n * @param {Selection} container Point where axis is to be mounted\n * @param {number} height Height for axis\n * @param {number} width Width for axis\n * @memberof Legend\n */\nexport const renderAxis = (context, container, height, width) => {\n    const axis = context.axis();\n\n    axis.setAvailableSpace(width, height);\n    axis.render(container.node());\n};\n\n/**\n * Renders gradient legends\n *\n * @param {Selection} container Point where the legend is to be appended\n * @memberof GradientLegend\n */\nexport const renderGradient = (context, container) => {\n    let gradHeight = 0;\n    let gradWidth = 0;\n    const {\n        align,\n        classPrefix,\n        item\n    } = context.config();\n    const data = context.data();\n    // Create the skeleton for the legend\n    const {\n        legendContainer,\n        legendGradSvg,\n        legendGradCont,\n        linearGradient,\n        legendRect\n    } = createLegendSkeleton(container, classPrefix, data);\n    const labelDim = context.axis().source().getAxisDimensions().tickLabelDim;\n    const {\n        padding,\n        margin,\n        border,\n        titleSpaces,\n        maxHeight,\n        maxWidth,\n        height,\n        width\n    } = context.measurement();\n    const gradientDimensions = {};\n\n    gradHeight = Math.floor(height - (titleSpaces.height + 2 * margin + 2 * border));\n    gradWidth = Math.floor(width - (margin * 2 + border * 2));\n\n    if (align === ALIGN.HORIZONTAL) {\n        gradientDimensions.height = item.icon.height;\n        gradientDimensions.width = gradWidth - 2 * padding - labelDim.width / 2;\n        linearGradient.attr('x2', '100%');\n        legendGradCont.attr('transform', `translate( ${labelDim.width / 2} 0)`);\n        renderAxis(context, legendContainer, gradHeight - item.icon.height - padding, gradWidth - 2 * padding - 1);\n        legendContainer.classed(`${classPrefix}-overflow-x`, width > maxWidth);\n\n        applyStyle(legendContainer, {\n            height: `${height}px`,\n            width: `${Math.min(width, maxWidth)}px`,\n            padding: `${padding}px`\n        });\n    } else {\n        gradientDimensions.height = gradHeight - 2 * padding - labelDim.height / 2;\n        gradientDimensions.width = item.icon.width;\n        linearGradient.attr('x2', '0%').attr('y1', '100%');\n        legendGradCont.attr('transform', `translate(0 ${labelDim.height / 2})`);\n        renderAxis(context, legendContainer, gradHeight - 2 * padding - 1, gradWidth - item.icon.width - padding * 2);\n        legendContainer.classed(`${classPrefix}-overflow-y`, height > maxHeight);\n        applyStyle(legendContainer, {\n            height: `${Math.min(height, maxHeight)}px`,\n            width: `${width}px`,\n            padding: `${padding}px`\n        });\n    }\n\n    // Apply Styles to the legend plot area\n    applyStyle(legendGradSvg, {\n        height: `${gradientDimensions.height}px`,\n        width: `${gradientDimensions.width}px`\n    });\n\n        // Apply styles to the legend rect\n    applyStyle(legendRect, {\n        fill: 'url(#linear-gradient)'\n    });\n    legendRect.attr('height', gradientDimensions.height);\n    legendRect.attr('width', gradientDimensions.width);\n\n    context.measurement({\n        gradientDimensions\n    });\n    context._legendGradientSvg = legendGradSvg;\n    return context;\n};\n","import SimpleLegend from './simple-legend';\nimport { getScaleInfo, getInterpolatedData } from './legend-helper';\nimport { GRADIENT, LEFT, SIZE } from '../enums/constants';\nimport { renderGradient, createAxis } from './gradient-helper';\nimport '../styles.scss';\n\n/**\n * Creates a Legend from the axes of a canvas\n *\n * @param {Object} dependencies : legend data\n * @class Legend\n */\nexport default class GradientLegend extends SimpleLegend {\n\n    /**\n     * Initializes an instance of the class\n     *\n     * @static\n     * @param {Object} dependencies Set of dependencies required by the legend\n     * @return {Instance} returns a new instance of Legend\n     * @memberof Legend\n     */\n    static create (dependencies) {\n        return new GradientLegend(dependencies);\n    }\n\n    /**\n     *\n     *\n     * @static\n     * @returns\n     * @memberof GradientLegend\n     */\n    static type () {\n        return GRADIENT;\n    }\n\n    /**\n     *\n     *\n     * @param {*} axis\n     * @returns\n     * @memberof GradientLegend\n     */\n    axis (...axis) {\n        if (axis.length) {\n            this._axis = axis[0];\n            return this;\n        }\n        return this._axis;\n    }\n\n    /**\n     *\n     *\n     * @param {*} scale\n     * @returns\n     * @memberof GradientLegend\n     */\n    dataFromScale (scale) {\n        let domainForLegend = [];\n        const { scaleType, domain, steps, scaleFn } = getScaleInfo(scale);\n\n        if (steps instanceof Array) {\n            if (domain[0] < steps[0]) {\n                domainForLegend[0] = domain[0];\n            }\n            domainForLegend = [...domainForLegend, ...steps];\n            if (domain[domain.length - 1] > steps[steps.length - 1]) {\n                domainForLegend.push(domain[1]);\n            }\n        } else {\n            domainForLegend = getInterpolatedData(domain, steps);\n        }\n        domainForLegend = [...new Set(domainForLegend)].sort((a, b) => a - b);\n\n        return domainForLegend.map((ele, i) => {\n            const value = domainForLegend[i];\n            return {\n                [scaleType]: scaleType === SIZE ? scale[scaleFn](ele) * scale.getScaleFactor()\n                    : scale[scaleFn](Math.floor(ele)),\n                value: +value.toFixed(2),\n                id: i\n            };\n        }).filter(d => d.value !== null);\n    }\n\n    /**\n     *\n     *\n     * @param {*} effPadding\n     * @param {*} align\n     * @return\n     * @memberof Legend\n     */\n    getLabelSpaces (effPadding) {\n        this.config({\n            item: {\n                text: {\n                    orientation: this.config().position\n                }\n            }\n        });\n        const axis = createAxis(this);\n        const axisSpace = axis.getLogicalSpace();\n        const space = { width: axisSpace.width - effPadding, height: axisSpace.height - effPadding };\n        const axisDomainLength = axis.source().domain().length;\n        const labelSpaces = new Array(axisDomainLength).fill(space);\n\n        this.axis(axis);\n        return labelSpaces;\n    }\n\n    /**\n     *\n     *\n     * @returns\n     * @memberof GradientLegend\n     */\n    getDrawingContext () {\n        return {\n            svgContainer: this._legendGradientSvg\n        };\n    }\n\n    /**\n     * Render the legend with its title\n     *\n     * @param {DOM} mountPoint Point where the legend and title are to be appended\n     * @return {Instance} Current instance of legend\n     * @memberof Legend\n     */\n    render () {\n        const firebolt = this.firebolt();\n        const legendContainer = super.render(this.mount());\n        // create Legend\n        renderGradient(this, legendContainer);\n        legendContainer.selectAll('div').style('float', LEFT);\n        firebolt.mapActionsAndBehaviour();\n        firebolt.createSelectionSet(this.data().map(d => d.id));\n        return legendContainer;\n    }\n /**\n     *\n     *\n     * @param {*} data\n     * @returns\n     * @memberof SimpleLegend\n     */\n    getCriteriaFromData (data) {\n        return [[this.fieldName()], [data.value]];\n    }\n}\n","import DiscreteLegend from './discrete-legend';\nimport GradientLegend from './gradient-legend';\nimport SimpleLegend from './simple-legend';\nimport StepLegend from './step-legend';\n\nexport {\n    DiscreteLegend,\n    GradientLegend,\n    SimpleLegend,\n    StepLegend\n};\n","import { makeElement, numberInterpolator } from 'muze-utils';\n\nimport {\n    SCALE_FUNCTIONS,\n    WIDTH,\n    HEIGHT,\n    LEFT,\n    RIGHT,\n    TOP,\n    BOTTOM\n} from '../enums/constants';\n\n/**\n *\n *\n * @param {*} scale\n * @returns\n */\nexport const getScaleInfo = (scale) => {\n    const scaleType = scale.constructor.type();\n    const domain = scale.uniqueValues();\n    const steps = scale.config().stops || 1;\n    const scaleFn = SCALE_FUNCTIONS[scaleType];\n\n    return { scaleType, domain, steps, scaleFn };\n};\n\n/**\n *\n *\n * @param {*} domain\n * @param {*} steps\n * @returns\n */\nexport const getInterpolatedData = (domain, steps) => {\n    const domainForLegend = [];\n    const interpolatedFn = numberInterpolator()(domain[0], domain[1]);\n\n    for (let i = 0; i <= steps; i++) {\n        domainForLegend[i] = interpolatedFn(i / steps);\n    }\n    return domainForLegend;\n};\n\n/**\n *\n *\n * @param {*} container\n * @param {*} text\n * @param {*} measurement\n * @param {*} classPrefix\n */\nexport const titleCreator = (container, title, measurement, config) =>\n                makeElement(container, 'div', [1], `${config.classPrefix}-legend-title`)\n                                .style(WIDTH, '100%')\n                                .style(HEIGHT, `${measurement.height}px`)\n                                .style('padding-left', `${measurement.padding}px`)\n                                .style('padding-right', `${measurement.padding}px`)\n                                .style('border-bottom-width', `${measurement.border}px`)\n                                .style('text-align', title.orientation instanceof Function ?\n                                        title.orientation(config) : title.orientation)\n                                .text(title.text)\n                                .node();\n\n/**\n *\n *\n * @param {*} data\n * @param {*} prop\n * @param {*} labelManager\n * @return\n */\nexport const getMaxMeasures = (data, prop, labelManager) => {\n    let maxHeight = -Infinity;\n    let maxWidth = -Infinity;\n\n    data.forEach((item) => {\n        const value = prop ? item[prop] : item;\n        const space = labelManager.getOriSize(value);\n        maxHeight = Math.max(space.height + 2, maxHeight);\n        maxWidth = Math.max(space.width + 2, maxWidth);\n    });\n\n    return { height: maxHeight, width: maxWidth };\n};\n\n/**\n *\n *\n * @param {*} data\n * @param {*} prop\n * @param {*} labelManager\n * @return\n */\nexport const getItemMeasures = (data, prop, labelManager) => {\n    const space = [];\n\n    data.forEach((item, index) => {\n        const value = prop ? item[prop] : item;\n        const { height, width } = labelManager.getOriSize(value);\n        space[index] = { height: height + 1, width: width + 1 };\n    });\n    return space;\n};\n\n/**\n *\n *\n * @param {*} textOrientation\n * @param {*} effPadding\n * @param {*} titleSpace\n * @return\n * @memberof Legend\n */\nexport const computeItemSpaces = (config, measures, data) => {\n    let totalHeight = 0;\n    let totalWidth = 0;\n    let maxItemSpaces = {\n        width: 0, height: 0\n    };\n    const {\n        effPadding,\n        titleWidth,\n        labelSpaces,\n        titleHeight,\n        maxWidth\n    } = measures;\n    const {\n        item,\n        align\n    } = config;\n    const {\n        icon,\n        text\n    } = item;\n    const textOrientation = text.orientation;\n    const itemSpaces = [];\n    const iconSpaces = [];\n    let maxIconWidth = 0;\n    labelSpaces.forEach((labelSpace, i) => {\n        const itemSpace = { width: 0, height: 0 };\n        const iconSpace = { width: 0, height: 0 };\n            // Compute each legend item height/width\n        if (textOrientation === LEFT || textOrientation === RIGHT) {\n            // Get label, icon and item widths\n            labelSpace.width += effPadding;\n            iconSpace.width = (data[i].size ? 2 * Math.sqrt(data[i].size / Math.PI) : icon.width) + effPadding;\n            maxIconWidth = Math.max(iconSpace.width, maxIconWidth);\n            itemSpace.width = labelSpace.width + maxIconWidth;\n\n            // Get label, icon and item heights\n            labelSpace.height = Math.max(labelSpace.height, icon.height) + effPadding;\n            iconSpace.height = labelSpace.height;\n            itemSpace.height = labelSpace.height;\n        } else {\n            // Get label, icon and item widths\n            labelSpace.width = Math.max(labelSpace.width, data[i].size ? 2 * Math.sqrt(data[i].size / Math.PI)\n            : icon.width) + effPadding;\n            iconSpace.width = labelSpace.width;\n            itemSpace.width = labelSpace.width;\n            maxIconWidth = Math.max(iconSpace.width, maxIconWidth);\n\n            // Get label, icon and item heights\n            labelSpace.height += effPadding;\n            iconSpace.height = icon.height + effPadding;\n            itemSpace.height = labelSpace.height + iconSpace.height;\n        }\n        // Compute height and width of legend for each alignment\n        if (align === 'horizontal') {\n            totalHeight = Math.max(totalHeight, itemSpace.height);\n        } else {\n            totalHeight += itemSpace.height;\n\n            totalWidth = Math.max(totalWidth, itemSpace.width, titleWidth);\n        }\n        maxItemSpaces = {\n            width: Math.max(itemSpace.width, maxItemSpaces.width),\n            height: Math.max(itemSpace.height, maxItemSpaces.height)\n        };\n        itemSpaces.push(itemSpace);\n        iconSpaces.push(iconSpace);\n    });\n\n    itemSpaces.forEach((itemSpace, i) => {\n        if (align === 'horizontal') {\n            itemSpace.height = totalHeight;\n            iconSpaces[i].width = maxIconWidth;\n            if (textOrientation === LEFT || textOrientation === RIGHT) {\n                labelSpaces[i].height = totalHeight;\n                iconSpaces[i].height = totalHeight;\n                itemSpaces[i].width = labelSpaces[i].width + maxIconWidth;\n            } else {\n                labelSpaces[i].width = maxIconWidth;\n                itemSpaces[i].width = maxIconWidth;\n                labelSpaces[i].width = maxIconWidth;\n            }\n            totalWidth = Math.max(totalWidth + itemSpaces[i].width, titleWidth);\n        } else {\n            itemSpace.width = Math.max(totalWidth, maxWidth);\n            if (textOrientation === TOP || textOrientation === BOTTOM) {\n                labelSpaces[i].width = totalWidth;\n                iconSpaces[i].width = totalWidth;\n                maxIconWidth = totalWidth;\n            } else {\n                iconSpaces[i].width = maxIconWidth;\n                itemSpaces[i].width = labelSpaces[i].width + maxIconWidth;\n                labelSpaces[i].width = maxItemSpaces.width - maxIconWidth;\n                totalWidth = Math.max(totalWidth, itemSpace.width, titleWidth);\n            }\n        }\n    });\n    totalHeight += titleHeight + effPadding;\n\n    return { totalHeight, totalWidth, itemSpaces, iconSpaces, maxItemSpaces, maxIconWidth };\n};\n\n/**\n *\n *\n * @param {*} type\n * @param {*} scaleInfo\n * @param {*} domainInfo\n * @returns\n */\nexport const getDomainBounds = (type, scaleInfo, domainInfo) => {\n    const {\n        scaleFn,\n        scaleType,\n        scale\n    } = scaleInfo;\n    const {\n        domain,\n        domainBounds,\n        domainLeg,\n        steps\n    } = domainInfo;\n    const ele = domain[type === 'lower' ? 0 : domain.length - 1];\n    const step = steps[type === 'lower' ? 0 : steps.length - 1];\n\n    return {\n        [scaleType]: scaleType === 'size' ? scale[scaleFn](ele) * scale.getScaleFactor() : scale[scaleFn](ele),\n        value: domainBounds[type],\n        id: type === 'lower' ? 0 : domainLeg.length + 2,\n        range: [ele, step]\n    };\n};\n","import { mergeRecursive } from 'muze-utils';\n\nexport const PROPS = {\n    config: {\n        sanitization: (context, value) => mergeRecursive(context._config || {}, value)\n    },\n    data: {},\n    fieldName: {},\n    legendContainer: {},\n    measurement: {\n        sanitization: (context, value) => {\n            const measurement = mergeRecursive(context._measurement, value);\n            ['padding', 'border', 'margin'].forEach((space) => {\n                measurement[space] = Math.min(measurement[space] > 0 ? measurement[space] : 0,\n                     measurement.maxWidth * 0.1, measurement.maxHeight * 0.1);\n            });\n            return measurement;\n        }\n    },\n    logicalSpace: {},\n    metaData: {},\n    range: {\n        sanitization: (context, value) => {\n            context.scale().range(value);\n            context.resetLogicalSpace();\n            context.store().commit('range', value);\n            return value;\n        }\n    },\n    scale: {},\n    smartTicks: {},\n    store: {},\n    title: {\n        sanitization: (context, value) => mergeRecursive(context._title || {}, value)\n    }\n};\n","import { makeElement, selectElement, applyStyle } from 'muze-utils';\nimport { ICON_MAP } from './defaults';\nimport {\n    VERTICAL,\n    WIDTH,\n    HEIGHT,\n    START,\n    END,\n    CENTER,\n    VALUE,\n    RECT,\n    LEFT,\n    RIGHT,\n    TOP,\n    BOTTOM,\n    SHAPE\n} from '../enums/constants';\n\n/**\n *\n *\n * @param {*} measureType\n * @param {*} stepColorCheck\n */\nexport const applyItemStyle = (item, measureType, stepColorCheck, context) => {\n    const {\n        padding,\n        labelSpaces,\n        iconSpaces,\n        maxIconWidth\n    } = context.measurement();\n    const diff = stepColorCheck ? -padding * 2 : 0;\n\n    if (item[0] === VALUE) {\n        return `${labelSpaces[item[6]][measureType]}px`;\n    }\n    return `${measureType === 'width' && !stepColorCheck ? maxIconWidth : iconSpaces[item[6]][measureType] - diff}px`;\n};\n\n /**\n * Returns the icon of the legend item\n *\n * @param {Object} datum Data property attached to the item\n * @param {number} width width of the item\n * @param {number} height height of the item\n * @return {Object|string} returns the path string or the string name of the icon\n * @memberof Legend\n */\nexport const getLegendIcon = (datum, width, height, defaultIcon) => {\n    const icon = ICON_MAP(datum[1]);\n\n    if (icon) {\n        return icon.size(datum[3] || Math.min(width, height) * Math.PI);\n    }\n    return ICON_MAP(datum[3] ? 'circle' : defaultIcon).size(datum[3] || Math.min(width, height) * Math.PI);\n};\n\n/**\n *\n *\n */\nexport const renderIcon = (icon, container, datum, context) => {\n    const {\n        classPrefix,\n        iconHeight,\n        maxIconWidth,\n        padding,\n        color\n    } = context;\n    const svg = makeElement(container, 'svg', f => [f], `${classPrefix}-legend-icon-svg`)\n    .attr(WIDTH, maxIconWidth)\n    .attr(HEIGHT, iconHeight)\n    .style(WIDTH, `${maxIconWidth}px`)\n    .style(HEIGHT, `${iconHeight}px`);\n\n    if (icon !== RECT) {\n        makeElement(svg, 'path', [datum[1]], `${classPrefix}-legend-icon`)\n                        .attr('d', icon)\n                        .attr('transform', `translate(${maxIconWidth / 2 - padding} ${iconHeight / 2})`)\n                        .attr('fill', datum[2] || color);\n    } else {\n        makeElement(svg, RECT, [datum[1]], `${classPrefix}-legend-icon`)\n                        .attr('x', 0)\n                        .attr('y', 0)\n                        .attr(WIDTH, maxIconWidth)\n                        .attr(HEIGHT, iconHeight)\n                        .attr('fill', datum[2] || color);\n    }\n};\n\n/**\n *\n *\n * @param {*} container\n * @param {*} data\n * @param {*} legendInstance\n * @param {*} align\n * @return\n */\nexport const getItemContainers = (container, data, legendInstance) => {\n    const datasets = {};\n    const {\n        itemSpaces,\n        maxItemSpaces\n    } = legendInstance.measurement();\n    const {\n        classPrefix,\n        align,\n        padding\n    } = legendInstance.config();\n\n    if (align === VERTICAL) {\n        datasets.row = data;\n        datasets.column = d => [d];\n    } else {\n        datasets.row = [1];\n        datasets.column = data;\n    }\n\n    const rows = makeElement(container, 'div', datasets.row, `${classPrefix}-legend-row`);\n    rows.style(HEIGHT, (d, i) => `${itemSpaces[i].height}px`);\n    align === VERTICAL && rows.style(WIDTH, () => `${maxItemSpaces.width}px`);\n    align === VERTICAL && rows.style('padding', `${padding}px`);\n    const columns = makeElement(rows, 'div', datasets.column, `${classPrefix}-legend-columns`);\n    align !== VERTICAL && columns.style(WIDTH, (d, i) => `${itemSpaces[i].width}px`);\n    align !== VERTICAL && columns.style('padding', `${padding}px`);\n    return columns;\n};\n\n/**\n *\n *\n * @param {*} container\n * @param {*} classPrefix\n * @param {*} data\n * @returns\n * @memberof DiscreteLegend\n */\nexport const createLegendSkeleton = (context, container, classPrefix, data) => {\n    let gradWidth = 0;\n    let gradHeight = 0;\n    let maxGradHeight = 0;\n    let maxGradWidth = 0;\n    const measurement = context.measurement();\n    const {\n            margin,\n            border,\n            titleSpaces,\n            width,\n            height,\n            maxWidth,\n            maxHeight\n        } = measurement;\n\n    gradHeight = height - (titleSpaces.height + 2 * margin + 2 * border);\n    gradWidth = width - (margin * 2 + border * 2);\n\n    maxGradHeight = maxHeight - (titleSpaces.height + margin * 2 + border * 2);\n    maxGradWidth = maxWidth - (margin * 2 + border * 2);\n\n    let legendBody = makeElement(container, 'div', [1], `${classPrefix}-legend-body`);\n\n        // Create a div with scroll when overflow\n    if (maxGradWidth && maxGradWidth < gradWidth) {\n        legendBody = legendBody.style(WIDTH, `${maxGradWidth}px`).style('overflow-x', 'scroll');\n        legendBody = makeElement(legendBody, 'div', [1], `${classPrefix}-legend-overflow`);\n    }\n        // Create a div with scroll when overflow\n    if (maxGradHeight && maxGradHeight < gradHeight) {\n        legendBody.style(HEIGHT, `${maxGradHeight}px`).style('overflow-y', 'scroll');\n        legendBody = makeElement(legendBody, 'div', [1], `${classPrefix}-legend-overflow`);\n    }\n\n    legendBody.style(WIDTH, `${gradWidth}px`);\n    legendBody.style(HEIGHT, `${gradHeight}px`);\n\n    const legendItem = getItemContainers(legendBody, data, context);\n    return { legendItem };\n};\n\n/**\n * Creates legend item based on alignment and text orientation\n *\n * @param {Selection} container Point where items are to be mounted\n * @return {Instance} Current instance\n * @memberof Legend\n */\nexport const createItemSkeleton = (context, container) => {\n    const {\n        classPrefix,\n        item\n    } = context.config();\n    const textOrientation = item.text.orientation;\n\n    let stack = [VALUE, SHAPE];\n    if (textOrientation === RIGHT || textOrientation === BOTTOM) {\n        stack = [SHAPE, VALUE];\n    }\n\n    const itemSkeleton = makeElement(container, 'div', (d, i) => stack.map(e => [e, d[e], d.color, d.size,\n        d.value, context.fieldName(), i]), `${classPrefix}-legend-item-info`);\n\n    const alignClass = textOrientation === BOTTOM || textOrientation === TOP ?\n        CENTER : (textOrientation === RIGHT ? START : END);\n\n    itemSkeleton.classed(alignClass, true);\n    return { itemSkeleton };\n};\n\n/**\n * Renders the items in the legend i.e, icon and text\n *\n * @param {DOM} container Point where item is to be mounted\n * @memberof Legend\n */\nexport const renderDiscreteItem = (context, container) => {\n    const labelManager = context._labelManager;\n    const {\n           item,\n           classPrefix\n    } = context.config();\n    const {\n        maxIconWidth,\n        padding\n    } = context.measurement();\n    const {\n            width: iconWidth,\n            height: iconHeight,\n            color,\n            type,\n            className\n        } = item.icon;\n\n    const textOrientation = item.text.orientation;\n\n    labelManager.useEllipsesOnOverflow(true);\n    applyStyle(container, {\n        width: d => applyItemStyle(d, WIDTH, false, context),\n        height: d => applyItemStyle(d, HEIGHT, false, context),\n        'text-align': CENTER,\n        padding: `${padding}px`\n    });\n\n    labelManager.setStyle(context._computedStyle);\n    container.each(function (d, i) {\n        if (d[0] === VALUE) {\n            selectElement(this).text(d[1])\n                            .style(`padding-${textOrientation === RIGHT ? LEFT : RIGHT}`, '0px');\n        } else {\n            const icon = getLegendIcon(d, iconWidth, iconHeight, type);\n            selectElement(this).classed(`${classPrefix}-${className}`, true);\n            selectElement(this).classed(`${classPrefix}-${className}-${i}`, true);\n            renderIcon(icon, selectElement(this), d, {\n                classPrefix,\n                iconWidth: 2 * Math.sqrt(d[3] / Math.PI) || iconWidth,\n                iconHeight,\n                maxIconWidth,\n                padding,\n                color\n            });\n        }\n    });\n};\n\n/**\n* Renders the items in the legend i.e, icon and text\n*\n* @param {DOM} container Point where item is to be mounted\n* @memberof Legend\n*/\nexport const renderStepItem = (context, container) => {\n    let iconWidth;\n    let iconHeight;\n    const labelManager = context._labelManager;\n    const {\n      item,\n      position,\n      classPrefix\n   } = context.config();\n    const {\n      maxItemSpaces,\n      maxIconWidth,\n      padding\n   } = context.measurement();\n    const {\n       width,\n       height,\n       color\n   } = item.icon;\n    const stepColor = {\n        horizontal: false,\n        vertical: false\n    };\n\n    iconHeight = height;\n    iconWidth = width;\n\n    labelManager.useEllipsesOnOverflow(true);\n\n    if (position === BOTTOM || position === TOP) {\n        iconWidth = maxItemSpaces.width;\n        stepColor.horizontal = true;\n    } else if (position === LEFT || position === RIGHT) {\n        iconHeight = maxItemSpaces.height;\n        stepColor.vertical = true;\n    }\n\n    applyStyle(container, {\n        width: d => applyItemStyle(d, WIDTH, stepColor.horizontal, context),\n        height: d => applyItemStyle(d, HEIGHT, stepColor.vertical, context),\n        'text-align': 'center',\n        padding: `${padding}px`\n    });\n\n    labelManager.setStyle(context._computedStyle);\n    container.each(function (d) {\n        if (d[0] === VALUE) {\n            selectElement(this).text(d[1]);\n        } else {\n            renderIcon(RECT, selectElement(this), d, {\n                classPrefix,\n                iconWidth,\n                iconHeight,\n                maxIconWidth,\n                color\n            });\n        }\n    });\n};\n","import {\n    makeElement,\n    selectElement,\n    getUniqueId,\n    getSmartComputedStyle,\n    generateGetterSetters,\n    mergeRecursive\n} from 'muze-utils';\nimport { behaviouralActions } from '@chartshq/muze-firebolt';\nimport * as legendBehaviours from '../firebolt/behavioural';\n\nimport { LegendFireBolt } from '../firebolt/legend-firebolt';\nimport { actionBehaviourMap } from '../firebolt/action-behaviour-map';\nimport { physicalActions } from '../firebolt/physical';\nimport * as sideEffects from '../firebolt/side-effects';\nimport { behaviourEffectMap } from '../firebolt/behaviour-effect-map';\nimport { VALUE, PATH } from '../enums/constants';\nimport { PROPS } from './props';\nimport { DEFAULT_MEASUREMENT, DEFAULT_CONFIG, LEGEND_TITLE } from './defaults';\nimport { getItemMeasures, titleCreator, computeItemSpaces } from './legend-helper';\n\n/**\n * Creates a Legend from the axes of a canvas\n *\n * @param {Object} dependencies : legend data\n * @class SimpleLegend\n */\nexport default class SimpleLegend {\n\n    /**\n     * Creates an instance of Legend.\n     * @param {Object} dependencies Set of dependencies required by the legend\n     * @memberof Legend\n     */\n    constructor (dependencies) {\n        this._data = [];\n        this._metaData = [];\n        this._mount = null;\n        this._fieldName = null;\n        this._title = Object.assign({}, LEGEND_TITLE);\n        this._metaData = null;\n        this._labelManager = dependencies.labelManager;\n        this._cells = dependencies.cells;\n        this._id = getUniqueId();\n        this._measurement = Object.assign({}, this.constructor.defaultMeasurement());\n        this._config = mergeRecursive({}, this.constructor.defaultConfig());\n\n        generateGetterSetters(this, PROPS);\n        this._computedStyle = getSmartComputedStyle(selectElement('body'),\n            `${this.config().classPrefix}-legend-item-info`);\n\n        this._firebolt = new LegendFireBolt(this, {\n            behavioural: Object.assign({}, behaviouralActions, legendBehaviours),\n            physical: physicalActions,\n            physicalBehaviouralMap: actionBehaviourMap\n        }, sideEffects, behaviourEffectMap);\n    }\n\n    id () {\n        return this._id;\n    }\n    /**\n     * Initializes an instance of the class\n     *\n     * @static\n     * @param {Object} dependencies Set of dependencies required by the legend\n     * @return {Instance} returns a new instance of Legend\n     * @memberof Legend\n     */\n    static create (dependencies) {\n        return new SimpleLegend(dependencies);\n    }\n\n    /**\n     *\n     *\n     * @static\n     * @returns\n     * @memberof SimpleLegend\n     */\n    static defaultConfig () {\n        return DEFAULT_CONFIG;\n    }\n\n    /**\n     *\n     *\n     * @static\n     * @returns\n     * @memberof SimpleLegend\n     */\n    static defaultMeasurement () {\n        return DEFAULT_MEASUREMENT;\n    }\n\n    /**\n     *\n     *\n     * @readonly\n     * @memberof SimpleLegend\n     */\n    firebolt (...params) {\n        if (params.length) {\n            return this;\n        }\n        return this._firebolt;\n    }\n\n    /**\n     *\n     *\n     * @return\n     * @memberof Legend\n     */\n    elemType () {\n        return PATH;\n    }\n\n    /**\n     *\n     *\n     * @return\n     * @memberof Legend\n     */\n    mount (...params) {\n        if (params.length) {\n            this._mount = params[0];\n            this.render();\n            return this;\n        }\n        return this._mount;\n    }\n\n    /**\n     *\n     *\n     * @param {*} effPadding\n     * @param {*} align\n     * @return\n     * @memberof Legend\n     */\n    getLabelSpaces () {\n        this._labelManager.setStyle(getSmartComputedStyle(selectElement('body'),\n            `${this.config().classPrefix}-legend-item-info`));\n        return getItemMeasures(this.data(), VALUE, this._labelManager);\n    }\n\n    /**\n     * Sets the height and width of a legend based on provided max\n     * height and width and based on its contents\n     *\n     * @return {Instance} Current instance\n     * @memberof Legend\n     */\n    setLegendMeasures () {\n        const {\n           width,\n           height,\n           maxWidth,\n           maxHeight,\n           padding,\n           margin,\n           border\n       } = this.measurement();\n        const {\n            align\n        } = this.config();\n\n        // Effective padding, margin and padding\n        const effPadding = padding * 2;\n        const effBorder = border * 2;\n        const effMargin = margin * 2;\n\n        this.data(this.dataFromScale(this.scale()));\n        // Get space occupied by title\n        const titleSpace = this.getTitleSpace();\n        const titleHeight = titleSpace.height > 0 ? titleSpace.height * 1.25 : 0;\n        const titleWidth = titleSpace.width;\n\n        // Get space occupied by labels\n        const labelSpaces = this.getLabelSpaces(effPadding, align);\n\n        const {\n            totalHeight, totalWidth, itemSpaces, iconSpaces, maxItemSpaces, maxIconWidth\n        } = computeItemSpaces(this.config(),\n        { effPadding, titleWidth, labelSpaces, titleHeight, maxWidth, maxHeight }, this.data());\n\n        this.measurement({\n            width: Math.max(totalWidth, width) + effMargin + effBorder,\n            height: Math.max(totalHeight, height) + effMargin + effBorder,\n            labelSpaces,\n            iconSpaces,\n            itemSpaces,\n            maxItemSpaces,\n            maxIconWidth,\n            titleSpaces: {\n                width: Math.min(maxWidth, this.measurement().width) - effMargin - effBorder,\n                height: titleHeight\n            }\n        });\n        return this;\n    }\n\n    /**\n     * Returns the space occupied by the legend title\n     *\n     * @return {Object} Space occupied by title\n     * @memberof Legend\n     */\n    getTitleSpace () {\n        this._labelManager.setStyle(getSmartComputedStyle(selectElement('body'),\n                                                 `${this.config().classPrefix}-legend-title`));\n        return this._labelManager.getOriSize(this.title().text ? this.title().text : '');\n    }\n\n    /**\n     * Creates the title for the legend\n     *\n     * @param {DOM} container Container made for the title\n     * @return {Selection} Title and it's node\n     * @memberof Legend\n     */\n    renderTitle (container) {\n        const { titleSpaces, border, padding } = this.measurement();\n        return titleCreator(container, this.title(), {\n            height: titleSpaces.height,\n            border,\n            padding\n        }, this.config());\n    }\n\n    /**\n     * Render the legend with its title\n     *\n     * @param {DOM} mountPoint Point where the legend and title are to be appended\n     * @return {Instance} Current instance of legend\n     * @memberof Legend\n     */\n    render () {\n        const firebolt = this.firebolt();\n        const {\n            classPrefix\n        } = this.config();\n        const {\n           maxWidth,\n           maxHeight,\n           width,\n           height,\n           margin,\n           border\n       } = this.measurement();\n        const legendContainer = makeElement(selectElement(this.mount()), 'div', [1], `${classPrefix}-legend-box`);\n\n        legendContainer.classed(`${classPrefix}-legend-box-${this._id}`, true);\n        legendContainer.style('float', 'left');\n        // set height and width\n        legendContainer.style('width', `${Math.min(maxWidth, width) - margin * 2}px`)\n                        .style('height', `${Math.min(maxHeight, height) - margin * 2}px`)\n                        .style('margin', `${margin}px`)\n                        .style('border-width', `${border}px`);\n        this.legendContainer(legendContainer.node());\n\n        // create title\n        this.renderTitle(legendContainer);\n        firebolt.mapActionsAndBehaviour();\n        firebolt.createSelectionSet(this.data().map(d => d.id));\n        return legendContainer;\n    }\n  /**\n     *\n     *\n     * @param {*} data\n     * @returns\n     * @memberof StepLegend\n     */\n    getCriteriaFromData (data) {\n        const fieldName = this.fieldName();\n        const type = this.metaData().getData().schema[0].type;\n        if (type === 'measure') {\n            return {\n                [fieldName]: data.range\n            };\n        }\n        return [[fieldName], [data.value]];\n    }\n}\n","import SimpleLegend from './simple-legend';\nimport {\n    getScaleInfo,\n    getInterpolatedData,\n    getDomainBounds\n} from './legend-helper';\nimport {\n    createLegendSkeleton,\n    createItemSkeleton,\n    renderStepItem\n} from './renderer';\nimport { STEP, RECT, LEFT, RIGHT, SIZE, UPPER, LOWER } from '../enums/constants';\nimport '../styles.scss';\n\n/**\n * Creates a Legend from the axes of a canvas\n *\n * @param {Object} dependencies : legend data\n * @class Legend\n */\nexport default class StepLegend extends SimpleLegend {\n\n    /**\n     * Initializes an instance of the class\n     *\n     * @static\n     * @param {Object} dependencies Set of dependencies required by the legend\n     * @return {Instance} returns a new instance of Legend\n     * @memberof Legend\n     */\n    static create (dependencies) {\n        return new StepLegend(dependencies);\n    }\n\n    /**\n     *\n     *\n     * @static\n     * @returns\n     * @memberof StepLegend\n     */\n    static type () {\n        return STEP;\n    }\n\n    /**\n     *\n     *\n     * @param {*} scale\n     * @returns\n     * @memberof StepLegend\n     */\n    dataFromScale (scale) {\n        let domainLeg = [];\n        const { scaleType, domain, steps, scaleFn } = getScaleInfo(scale);\n\n        const { formatter } = this.config();\n        const domainBounds = {\n            lower: null, upper: null\n        };\n\n        if (steps instanceof Array) {\n            if (domain[0] < steps[0]) {\n                domainBounds.lower = [`${formatter.bounds.lower} ${steps[0]}`];\n            }\n            domainLeg = [...domainLeg, ...steps];\n            if (domain[domain.length - 1] > steps[steps.length - 1]) {\n                domainBounds.upper = [`${formatter.bounds.upper} ${steps[steps.length - 1]}`];\n            }\n        } else {\n            domainLeg = getInterpolatedData(domain, steps);\n        }\n\n        domainLeg = [...new Set(domainLeg)].sort((a, b) => a - b);\n        domainLeg = domainLeg.map((ele, i) => {\n            let value = null;\n            if (i < domainLeg.length - 1) {\n                value = `${(ele.toFixed(1))} - ${(+domainLeg[i + 1].toFixed(1))}`;\n            }\n            return {\n                [scaleType]: scaleType === SIZE ? scale[scaleFn](ele) * scale.getScaleFactor() : scale[scaleFn](ele),\n                value,\n                id: i + 1,\n                range: [ele, domainLeg[i + 1]]\n            };\n        }).filter(d => d.value !== null);\n\n        if (domainBounds.lower) {\n            const lowerBounds = getDomainBounds(LOWER, { scale, scaleFn, scaleType },\n                { domain, steps, domainBounds });\n            domainLeg = [lowerBounds, ...domainLeg];\n        }\n        if (domainBounds.upper) {\n            const upperBounds = getDomainBounds(UPPER, { scale, scaleFn, scaleType },\n            { domain, steps, domainBounds, domainLeg });\n            domainLeg = [...domainLeg, upperBounds];\n        }\n        return domainLeg;\n    }\n\n     /**\n     *\n     *\n     * @param {*} effPadding\n     * @param {*} align\n     * @return\n     * @memberof Legend\n     */\n    getLabelSpaces (effPadding, align) {\n        this.config({\n            item: {\n                text: {\n                    orientation: this.config().position\n                }\n            }\n        });\n        return super.getLabelSpaces(effPadding, align);\n    }\n\n    /**\n     *\n     *\n     * @return\n     * @memberof Legend\n     */\n    elemType () {\n        return RECT;\n    }\n\n     /**\n     * Render the legend with its title\n     *\n     * @param {DOM} mountPoint Point where the legend and title are to be appended\n     * @return {Instance} Current instance of legend\n     * @memberof Legend\n     */\n    render () {\n        const firebolt = this.firebolt();\n        const { classPrefix, position } = this.config();\n        const data = (position === LEFT || position === RIGHT) ? this.data().reverse() : this.data();\n\n        const legendContainer = super.render(this.mount());\n\n        // create Legend\n        const { legendItem } = createLegendSkeleton(this, legendContainer, classPrefix, data);\n        const { itemSkeleton } = createItemSkeleton(this, legendItem);\n\n        renderStepItem(this, itemSkeleton);\n        legendContainer.selectAll('div').style('float', LEFT);\n        firebolt.mapActionsAndBehaviour();\n        firebolt.createSelectionSet(this.data().map(d => d.id));\n        return legendContainer;\n    }\n\n    /**\n     *\n     *\n     * @param {*} data\n     * @returns\n     * @memberof StepLegend\n     */\n    getCriteriaFromData (data) {\n        const fieldName = this.fieldName();\n        return {\n            [fieldName]: data.range\n        };\n    }\n}\n","// extracted by mini-css-extract-plugin","export const CLASSPREFIX = 'muze';\nexport const ARROW_RIGHT = 'right';\nexport const ARROW_TOP = 'top';\nexport const ARROW_BOTTOM = 'bottom';\nexport const ARROW_LEFT = 'left';\nexport const TOOLTIP_LEFT = 'left';\nexport const TOOLTIP_RIGHT = 'right';\nexport const TOOLTIP_BOTTOM = 'bottom';\nexport const TOOLTIP_TOP = 'top';\nexport const INITIAL_STYLE = {\n    position: 'absolute',\n    width: 0,\n    height: 0\n};\n","import {\n    selectElement,\n    mergeRecursive,\n    makeElement,\n    setAttrs,\n    setStyles,\n    getSymbol\n} from 'muze-utils';\nimport { DEFAULT_STRATEGY, strategy } from './strategy';\nimport { defaultConfig } from './default-config';\n\n/**\n * This class is used to manage the content of tooltip.\n */\nexport default class Content {\n    /**\n     * Creates an instance of content.\n     */\n    constructor () {\n        this._model = null;\n        this._strategy = DEFAULT_STRATEGY;\n        this._formatter = null;\n        this._config = this.constructor.defaultConfig();\n    }\n   /**\n     * Returns the default configuration of tooltip\n     * @return {Object} Configuration of tooltip.\n     */\n    static defaultConfig () {\n        const config = defaultConfig.content;\n        config.classPrefix = defaultConfig.classPrefix;\n        return config;\n    }\n\n    config (...c) {\n        if (c.length > 0) {\n            this._config = mergeRecursive(this._config, c[0]);\n            return this;\n        }\n        return this._config;\n    }\n\n    /**\n     * Update model. The format contains presentation strategy which determines how to show the content.\n     * If no strategy is mentioned then default is to show key value pair\n    */\n    update (item) {\n        this._model = item.model;\n        this._strategy = item.strategy !== undefined ? item.strategy : DEFAULT_STRATEGY;\n        this._formatter = item.formatter;\n        return this;\n    }\n\n    context (ctx) {\n        this._context = ctx;\n        return this;\n    }\n\n    render (mount) {\n        let data;\n        const config = this._config;\n        const iconContainerSize = config.iconContainerSize;\n        const formatter = this._formatter;\n        const rowMargin = config.rowMargin;\n        const model = this._model;\n\n        this._mount = mount;\n        if (model instanceof Array) {\n            data = model;\n        } else {\n            data = formatter instanceof Function ? formatter(this._model, this._context) :\n                strategy[this._strategy](this._model, this.config(), this._context);\n        }\n\n        if (data instanceof Function) {\n            mount.html(data());\n        } else {\n            const rows = makeElement(mount, 'p', data, `${config.classPrefix}-tooltip-row`);\n            const cells = makeElement(rows, 'span', d => d, `${config.classPrefix}-tooltip-content`);\n            cells.attr('class', `${config.classPrefix}-tooltip-content`);\n            setStyles(rows, {\n                margin: rowMargin\n            });\n            setStyles(cells, {\n                display: 'inline-block',\n                'margin-right': `${config.spacing}px`\n            });\n\n            cells.each(function (d) {\n                const el = selectElement(this);\n                el.html('');\n                if (d instanceof Object) {\n                    if (d.type === 'icon') {\n                        const svg = makeElement(el, 'svg', [1]);\n                        const path = makeElement(svg, 'path', [1]);\n                        const shape = d.shape instanceof Function ? d.shape : getSymbol(d.shape);\n\n                        setAttrs(svg, {\n                            x: 0,\n                            y: 0,\n                            width: iconContainerSize,\n                            height: iconContainerSize\n                        });\n                        setAttrs(path, {\n                            d: shape.size(d.size)(),\n                            transform: `translate(${iconContainerSize / 2}, ${iconContainerSize / 2})`\n                        });\n                        setStyles(path, {\n                            fill: d.color\n                        });\n                    } else {\n                        el.html(d.value);\n                        d.className && el.classed(d.className, true);\n                        setStyles(el, d.style);\n                    }\n                } else {\n                    el.html(d);\n                }\n            });\n        }\n        return this;\n    }\n\n    clear () {\n        this._model = null;\n        // this._mount && this._mount.remove();\n        return this;\n    }\n}\n","import { CLASSPREFIX } from './constants';\n\nexport const defaultConfig = {\n    classPrefix: CLASSPREFIX,\n    defClassName: 'tooltip-box',\n    connectorClassName: 'tooltip-connectors',\n    className: '',\n    row: {\n        margin: 0\n    },\n    content: {\n        spacing: 5,\n        iconContainerSize: 10,\n        iconSize: 30,\n        iconShape: 'circle',\n        iconColor: '#ff0000',\n        rowMargin: '0px',\n        margin: 10,\n        separator: ':',\n        className: 'tooltip-content-container',\n        parentClassName: 'tooltip-content-parent-container'\n    },\n    arrow: {\n        size: 10,\n        disabled: false,\n        defClassName: 'tooltip-arrow',\n        className: '',\n        color: 'rgba(195,195,195,0.85)'\n    }\n};\n","import { getQualifiedClassName } from 'muze-utils';\nimport { TOOLTIP_LEFT, TOOLTIP_RIGHT, ARROW_RIGHT, ARROW_LEFT } from './constants';\n\nexport const getArrowPos = (orient, dim, measurement, config) => {\n    let arrowPos;\n    const { x, y, boxHeight, boxWidth } = measurement;\n    const arrowDisabled = config.arrow.disabled;\n    const arrowWidth = arrowDisabled ? 0 : config.arrow.size;\n\n    if (orient === ARROW_LEFT || orient === ARROW_RIGHT) {\n        let start = 0;\n        let diff = boxHeight / 2;\n        const plotBottom = dim.y + dim.height;\n        const boxBottom = y + boxHeight;\n\n        if (dim.y > y) {\n            start = dim.y - y;\n            diff = (plotBottom >= boxBottom ? (boxBottom - dim.y) : dim.height) / 2;\n        } else if (boxBottom > plotBottom) {\n            diff = Math.abs(y - (dim.y + dim.height)) / 2;\n        }\n        arrowPos = start + diff - arrowWidth / 2;\n    } else {\n        let start = 0;\n        let diff = boxWidth / 2;\n        const plotRight = dim.x + dim.width;\n        const boxRight = x + boxWidth;\n\n        if (dim.x > x) {\n            start = dim.x - x;\n            diff = (plotRight >= boxRight ? (boxRight - dim.x) : dim.width) / 2;\n        } else if (boxRight > plotRight) {\n            diff = Math.abs(x - (dim.x + dim.width)) / 2;\n        }\n        arrowPos = start + diff - arrowWidth / 2;\n    }\n    return arrowPos;\n};\n\n/**\n * Places the arrow in the specified arrow position. It also applies appropriate arrow\n * class name to the arrow element.\n * @param {string} position Left, bottom or right position of the arrow;\n * @param {number} arrowPos position of arrow in pixels\n * @return {Tooltip} Instance of tooltip.\n */\nexport const placeArrow = (context, position, arrowPos) => {\n    const tooltipArrow = context._tooltipArrow;\n    const tooltipBackground = context._tooltipBackground;\n    const config = context._config;\n    const classPrefix = config.classPrefix;\n    const arrowConf = config.arrow;\n    const className = getQualifiedClassName(arrowConf.defClassName, context._id, config.classPrefix);\n\n    tooltipArrow.style('display', 'block');\n    tooltipArrow.attr('class', `${className.join(' ')}`);\n    if (position === TOOLTIP_LEFT || position === TOOLTIP_RIGHT) {\n        tooltipArrow.style('top', `${arrowPos}px`);\n        tooltipArrow.style('left', '');\n        tooltipBackground.style('top', `${arrowPos}px`);\n        tooltipBackground.style('left', '');\n    } else {\n        tooltipArrow.style('top', '');\n        tooltipArrow.style('left', `${arrowPos}px`);\n        tooltipBackground.style('top', '');\n        tooltipBackground.style('left', `${arrowPos}px`);\n    }\n    tooltipArrow.classed(`${classPrefix}-tooltip-arrow`, true);\n    tooltipArrow.classed(`${classPrefix}-tooltip-arrow-${context._arrowOrientation}`, false);\n    tooltipArrow.classed(`${classPrefix}-tooltip-arrow-${position}`, true);\n    tooltipBackground.classed(`${classPrefix}-tooltip-background-arrow`, true);\n    tooltipBackground.classed(`${classPrefix}-tooltip-background-arrow-${context._arrowOrientation}`, false);\n    tooltipBackground.classed(`${classPrefix}-tooltip-background-arrow-${position}`, true);\n    return this;\n};\n\nexport const reorderContainers = (parentContainer, className) => {\n    parentContainer.selectAll(className).sort((a, b) => a - b);\n};\n","import {\n    getClosestIndexOf,\n    DateTimeFormatter,\n    DimensionSubtype,\n    FieldType\n} from 'muze-utils';\n\nconst timeFormats = {\n    millisecond: '%A, %b %e, %H:%M:%S.%L',\n    second: '%A, %b %e, %H:%M:%S',\n    minute: '%A, %b %e, %H:%M',\n    hour: '%A, %b %e, %H:%M',\n    day: '%A, %b %e, %Y',\n    month: '%B %Y',\n    year: '%Y'\n};\nconst timeDurations = [\n    ['millisecond', 'second', 'minute', 'hour', 'day', 'month', 'year'],\n    [1, 1000, 60000, 3600000, 86400000, 2592000000, 31536000000]\n];\nconst getNearestInterval = (interval) => {\n    const index = getClosestIndexOf(timeDurations[1], interval);\n    return timeDurations[0][index];\n};\nconst defaultTooltipFormatters = (type, formatter) => {\n    const formatters = {\n        [DimensionSubtype.TEMPORAL]: (value, interval) => {\n            const nearestInterval = getNearestInterval(interval);\n            return DateTimeFormatter.formatAs(value, timeFormats[nearestInterval]);\n        },\n        [FieldType.MEASURE]: value => formatter(value ? value.toFixed(2) : value),\n        [FieldType.DIMENSION]: value => value\n    };\n    return formatters[type];\n};\n\nexport const buildTooltipData = (dataModel, config = {}, context) => {\n    let fieldValues = [];\n    const dataObj = dataModel.getData();\n    const data = dataObj.data;\n    const schema = dataObj.schema;\n    const formatters = config.formatters;\n    const separator = config.separator;\n    const fieldsConfig = dataModel.getFieldsConfig();\n    const fieldspace = dataModel.getFieldspace();\n    const fieldsObj = fieldspace.fieldsObj();\n    const dimensionMeasureMap = context.dimensionMeasureMap;\n    const axes = context.axes;\n    const dimensions = schema.filter(d => d.type === FieldType.DIMENSION);\n    const measures = schema.filter(d => d.type === FieldType.MEASURE);\n    const dataLen = data.length;\n    const getRowContent = (field, type) => {\n        let value;\n        let formattedValue;\n        let measureIndex;\n        const values = [];\n        const index = fieldsConfig[field].index;\n        const interval = fieldsConfig[field].def.subtype === DimensionSubtype.TEMPORAL ?\n                fieldsObj[field].getMinDiff() : 0;\n        const formatterFn = (formatters && formatters[field]) || defaultTooltipFormatters(type, val => val);\n\n        if (value !== null) {\n            let uniqueVals = type === FieldType.MEASURE ? data.map(d => d[index]) :\n                [...new Set(data.map(d => d[index]))];\n            uniqueVals = uniqueVals.filter(d => d !== '');\n            const colorAxis = axes.color[0];\n            const shapeAxis = axes.shape[0];\n            const sizeAxis = axes.size[0];\n            const isRetinalField = (colorAxis || shapeAxis || sizeAxis) && dataLen > 1 &&\n                    type !== FieldType.MEASURE;\n\n            uniqueVals.forEach((val, i) => {\n                let key;\n                const associatedMeasures = dimensionMeasureMap[field];\n\n                if (associatedMeasures && associatedMeasures.length && dataLen > 1) {\n                    key = val;\n                    let icon = {\n                        value: ''\n                    };\n\n                    if (isRetinalField) {\n                        icon = {\n                            type: 'icon',\n                            color: colorAxis.getColor(val),\n                            shape: shapeAxis.getShape(val),\n                            size: sizeAxis.getSize(val) * config.iconSize\n                        };\n                    }\n                    if (associatedMeasures.length > 1) {\n                        values.push([icon, `${key}`]);\n                        associatedMeasures.forEach((measure) => {\n                            measureIndex = fieldsConfig[measure].index;\n                            value = data[i][measureIndex];\n                            formattedValue = defaultTooltipFormatters('measure',\n                                fieldspace.fields[measureIndex]._ref.numberFormat())(value, interval);\n                            values.push([{\n                                value: `${measure}${separator}`,\n                                style: {\n                                    'margin-left': `${config.margin}px}`\n                                },\n                                className: `${config.classPrefix}-tooltip-key`\n                            }, {\n                                value: `${formattedValue}`,\n                                className: `${config.classPrefix}-tooltip-value`\n                            }]);\n                        });\n                    } else {\n                        measureIndex = fieldsConfig[associatedMeasures[0]].index;\n                        value = data[i][measureIndex];\n                        formattedValue = defaultTooltipFormatters('measure',\n                            fieldspace.fields[measureIndex]._ref.numberFormat())(value, interval);\n                        values.push([icon, {\n                            value: `${key}${separator}`,\n                            className: `${config.classPrefix}-tooltip-key`\n                        }, {\n                            value: `${formattedValue}`,\n                            className: `${config.classPrefix}-tooltip-value`\n                        }]);\n                    }\n                } else {\n                    key = field;\n                    value = val;\n                    formattedValue = formatterFn(value, interval);\n                    values.push([{\n                        value: `${key}${separator}`,\n                        className: `${config.classPrefix}-tooltip-key`\n                    }, {\n                        value: `${formattedValue}`,\n                        className: `${config.classPrefix}-tooltip-value`\n                    }]);\n                }\n            });\n        }\n        return values;\n    };\n\n    dimensions.forEach((item) => {\n        const type = item.subtype ? item.subtype : item.type;\n        fieldValues = [...fieldValues, ...getRowContent(item.name, type)];\n    });\n\n    const allMeasures = [...new Set(...Object.values(dimensionMeasureMap))];\n    const filteredMeasures = dataLen > 1 ? measures.filter(d => allMeasures.indexOf(d.name) === -1)\n        : measures;\n    filteredMeasures.forEach((item) => {\n        const type = item.subtype ? item.subtype : item.type;\n        fieldValues = [...fieldValues, ...getRowContent(item.name, type)];\n    });\n\n    return fieldValues;\n};\n\n/**\n * This contains the strategy methods for showing tooltip in the chart.\n * @param {VisualUnit} context Attached instance.\n */\nexport const strategy = {\n    keyValue: (data, config, context) => {\n        const values = buildTooltipData(data, config, context);\n        return values;\n    }\n};\n\nexport const DEFAULT_STRATEGY = 'keyValue';\n","// extracted by mini-css-extract-plugin","import {\n    mergeRecursive,\n    getQualifiedClassName,\n    getUniqueId,\n    selectElement,\n    setStyles,\n    makeElement\n} from 'muze-utils';\nimport { ARROW_BOTTOM, ARROW_LEFT, ARROW_RIGHT, TOOLTIP_LEFT, TOOLTIP_RIGHT, TOOLTIP_BOTTOM,\n    INITIAL_STYLE } from './constants';\nimport { defaultConfig } from './default-config';\nimport { getArrowPos, placeArrow, reorderContainers } from './helper';\nimport './styles.scss';\nimport Content from './content';\n\n/**\n * This component is responsible for creating a tooltip element. It appends the tooltip\n * in the body element.\n * @class Tooltip\n */\nexport default class Tooltip {\n    /**\n     * Initializes the tooltip with the container element and configuration\n     * @param {HTMLElement} container container where the tooltip will be mounted.\n     * @param {string} className Class name of the tooltip.\n     */\n    constructor (htmlContainer, svgContainer) {\n        let connectorContainer = svgContainer;\n        this._id = getUniqueId();\n        this._config = {};\n        this._container = selectElement(htmlContainer);\n        this.config({});\n        const tooltipConf = this._config;\n        const classPrefix = tooltipConf.classPrefix;\n        const contentClass = tooltipConf.content.parentClassName;\n        this._tooltipContainer = this._container.append('div').style('position', 'absolute');\n        this._contentContainer = this._tooltipContainer.append('div').attr('class', `${classPrefix}-${contentClass}`);\n        this._tooltipBackground = this._tooltipContainer.append('div').style('position', 'relative');\n        this._tooltipArrow = this._tooltipContainer.append('div');\n\n        if (!svgContainer) {\n            connectorContainer = htmlContainer.append('svg').style('pointer-events', 'none');\n        }\n        this._contents = {};\n        this._tooltipConnectorContainer = selectElement(connectorContainer)\n            .append('g')\n            .attr('class', `${tooltipConf.classPrefix}-${tooltipConf.connectorClassName}`);\n        const id = this._id;\n        const defClassName = tooltipConf.defClassName;\n        const qualifiedClassName = getQualifiedClassName(defClassName, id, tooltipConf.classPrefix);\n\n        setStyles(this._tooltipArrow, INITIAL_STYLE);\n        setStyles(this._tooltipBackground, INITIAL_STYLE);\n        this.addClass(qualifiedClassName.join(' '));\n        this.addClass(tooltipConf.className);\n        this.hide();\n    }\n\n    /**\n     * Sets the configuration of tooltip.\n     * @param {Object} config Configuration of tooltip\n     * @return {Tooltip} Instance of tooltip\n     */\n    config (...config) {\n        if (config.length > 0) {\n            const defConf = mergeRecursive({}, this.constructor.defaultConfig());\n            this._config = mergeRecursive(defConf, config[0]);\n            return this;\n        }\n        return this._config;\n    }\n\n    /**\n     * Returns the default configuration of tooltip\n     * @return {Object} Configuration of tooltip.\n     */\n    static defaultConfig () {\n        return defaultConfig;\n    }\n    /**\n     * Sets the class name of tooltip\n     * @param {string} className tooltip class name\n     * @return {Tooltip} Instance of tooltip.\n     */\n    addClass (className) {\n        this._tooltipContainer.classed(className, true);\n        return this;\n    }\n\n    context (...ctx) {\n        if (ctx.length) {\n            this._context = ctx[0];\n            return this;\n        }\n        return this._context;\n    }\n\n    content (name, data, contentConfig = {}) {\n        const config = this.config();\n        const { classPrefix } = config;\n        const contentClass = config.content.className;\n        const formatter = config.formatter;\n        const className = contentConfig.className || `${classPrefix}-${contentClass}-${name}`;\n        const content = this._contents[name] = this._contents[name] || new Content();\n        const container = makeElement(this._contentContainer, 'div', [contentConfig.order], className);\n        container.attr('class', `${classPrefix}-${contentClass} ${className}`);\n        reorderContainers(this._contentContainer, `.${classPrefix}-${contentClass}`);\n        const contentConf = config.content;\n        contentConfig.classPrefix = this._config.classPrefix;\n        content.config(contentConf);\n\n        if (data === null) {\n            content.clear();\n            container.remove();\n            delete this._contents[name];\n        } else {\n            content.update({\n                model: data,\n                formatter: contentConfig.formatter || formatter\n            });\n            content.context(this._context);\n            content.render(container);\n        }\n\n        if (!Object.keys(this._contents).length) {\n            this.hide();\n        }\n        return this;\n    }\n\n    getContents () {\n        return Object.values(this._contents);\n    }\n\n    /**\n     * Positions the tooltip at the given x and y position.\n     * @param {number} x x position\n     * @param {number} y y position\n     * @return {Tooltip} Instance of tooltip.\n     */\n    position (x, y, conf = {}) {\n        if (!Object.keys(this._contents).length) {\n            this.hide();\n            return this;\n        }\n        this.show();\n        const target = this._target;\n        const repositionArrow = conf.repositionArrow;\n\n        if (target && repositionArrow) {\n            const node = this._tooltipContainer.node();\n            const config = this._config;\n            const arrowDisabled = config.arrow.disabled;\n            const arrowWidth = arrowDisabled ? 0 : config.arrow.size;\n            const arrowOrient = this._arrowOrientation;\n            const outsidePlot = arrowOrient === ARROW_LEFT || arrowOrient === ARROW_RIGHT ?\n                (y + node.offsetHeight - arrowWidth) < target.y || y > (target.y + target.height) :\n                (x + node.offsetWidth - arrowWidth) < target.x || x > (target.x + target.width);\n            if (outsidePlot) {\n                let path;\n                this._tooltipArrow.style('display', 'none');\n                this._tooltipBackground.style('display', 'none');\n                this._tooltipConnectorContainer.style('display', 'block');\n                const connector = this._tooltipConnectorContainer.selectAll('path').data([1]);\n                const enter = connector.enter().append('path');\n                if (arrowOrient === ARROW_LEFT) {\n                    path = `M ${x} ${y + node.offsetHeight / 2} L ${target.x + target.width}`\n                        + ` ${target.y + target.height / 2}`;\n                } else if (arrowOrient === ARROW_RIGHT) {\n                    path = `M ${x + node.offsetWidth} ${y + node.offsetHeight / 2}`\n                            + ` L ${target.x} ${target.y + target.height / 2}`;\n                } else if (arrowOrient === ARROW_BOTTOM) {\n                    path = `M ${x + node.offsetWidth / 2} ${y + node.offsetHeight}`\n                        + ` L ${target.x + target.width / 2} ${target.y}`;\n                }\n                enter.merge(connector).attr('d', path).style('display', 'block');\n            } else {\n                const arrowPos = getArrowPos(arrowOrient, target, {\n                    x,\n                    y,\n                    boxHeight: node.offsetHeight,\n                    boxWidth: node.offsetWidth\n                }, this._config);\n\n                placeArrow(this, this._arrowOrientation, arrowPos);\n                this._tooltipConnectorContainer.style('display', 'none');\n            }\n        }\n\n        const offset = this._offset || {\n            x: 0,\n            y: 0\n        };\n\n        this._tooltipContainer.style('left', `${offset.x + x}px`).style('top', `${offset.y + y}px`);\n\n        return this;\n    }\n\n    /**\n     * Positions the tooltip relative to a rectangular box. It takes care of tooltip overflowing the\n     * boundaries.\n     * @param {Object} dim Dimensions of the plot.\n     */\n    positionRelativeTo (dim, tooltipConf = {}) {\n        let obj;\n        let orientation = tooltipConf.orientation;\n        this.show();\n        if (!dim) {\n            dim = this._relativeDim;\n        } else {\n            this._relativeDim = dim;\n        }\n        if (!dim) {\n            this.hide();\n            return this;\n        }\n\n        const extent = this._extent;\n        const node = this._tooltipContainer.node();\n        const offsetWidth = node.offsetWidth;\n        const offsetHeight = node.offsetHeight;\n        const config = this._config;\n        const arrowDisabled = config.arrow.disabled;\n        const arrowSize = config.arrow.size;\n        const draw = tooltipConf.draw !== undefined ? tooltipConf.draw : true;\n        const topSpace = dim.y;\n        const positionHorizontal = () => {\n            let position;\n            let x = dim.x + dim.width;\n            let y = dim.y;\n            // When there is no space in right\n            const rightSpace = extent.width - x;\n            const leftSpace = dim.x - extent.x;\n            if (rightSpace >= offsetWidth + arrowSize) {\n                position = TOOLTIP_LEFT;\n                x += arrowSize;\n            } else if (leftSpace >= offsetWidth + arrowSize) {\n                x = dim.x - offsetWidth;\n                position = TOOLTIP_RIGHT;\n                x -= arrowSize;\n            } else {\n                position = 'left';\n                x += arrowSize;\n            }\n            if (dim.height < offsetHeight) {\n                y = Math.max(0, dim.y + dim.height / 2 - offsetHeight / 2);\n            }\n\n            const arrowPos = getArrowPos(position, dim, {\n                x,\n                y,\n                boxHeight: offsetHeight,\n                boxWidth: offsetWidth\n            }, this._config);\n\n            return {\n                position,\n                arrowPos,\n                x,\n                y\n            };\n        };\n        const positionVertical = () => {\n            let position;\n            // Position tooltip at the center of plot\n            let x = dim.x - offsetWidth / 2 + dim.width / 2;\n            const y = dim.y - offsetHeight - arrowSize;\n            // Overflows to the right\n            if ((extent.width - dim.x) < offsetWidth) {\n                x = extent.width - offsetWidth;\n            } else if (x < extent.x) { // Overflows to the left\n                x = extent.x;\n            }\n\n            const arrowPos = getArrowPos(position, dim, {\n                x,\n                y,\n                boxHeight: offsetHeight,\n                boxWidth: offsetWidth\n            }, this._config);\n\n            position = TOOLTIP_BOTTOM;\n            return {\n                position,\n                arrowPos,\n                x,\n                y\n            };\n        };\n\n        this._target = dim;\n        if (!orientation) {\n            orientation = topSpace > (offsetHeight + arrowSize) ? 'vertical' : 'horizontal';\n        }\n\n        if (orientation === 'horizontal') {\n            obj = positionHorizontal();\n        } else if (orientation === 'vertical') {\n            obj = positionVertical();\n        }\n\n        this._position = {\n            x: obj.x,\n            y: obj.y\n        };\n\n        this._arrowPos = obj.arrowPos;\n        if (!arrowDisabled) {\n            placeArrow(this, obj.position, obj.arrowPos);\n        }\n        this._arrowOrientation = obj.position;\n        draw && this.position(obj.x, obj.y);\n        return this;\n    }\n\n    /**\n     * Hides the tooltip element.\n     * @return {Tooltip} Instance of tooltip.\n     */\n    hide () {\n        this._tooltipContainer.style('display', 'none');\n        this._tooltipConnectorContainer.style('display', 'none');\n        return this;\n    }\n\n    /**\n     * Shows the tooltip element.\n     * @return {Tooltip} Instance of tooltip.\n     */\n    show () {\n        this._tooltipContainer.style('display', 'block');\n        return this;\n    }\n\n    extent (extent) {\n        this._extent = extent;\n        return this;\n    }\n\n    offset (offset) {\n        this._offset = offset;\n        return this;\n    }\n\n    remove () {\n        this._tooltipContainer.remove();\n        this._tooltipBackground.remove();\n        this._tooltipConnectorContainer.remove();\n        return this;\n    }\n}\n","export {default as bisect, bisectRight, bisectLeft} from \"./src/bisect\";\nexport {default as ascending} from \"./src/ascending\";\nexport {default as bisector} from \"./src/bisector\";\nexport {default as cross} from \"./src/cross\";\nexport {default as descending} from \"./src/descending\";\nexport {default as deviation} from \"./src/deviation\";\nexport {default as extent} from \"./src/extent\";\nexport {default as histogram} from \"./src/histogram\";\nexport {default as thresholdFreedmanDiaconis} from \"./src/threshold/freedmanDiaconis\";\nexport {default as thresholdScott} from \"./src/threshold/scott\";\nexport {default as thresholdSturges} from \"./src/threshold/sturges\";\nexport {default as max} from \"./src/max\";\nexport {default as mean} from \"./src/mean\";\nexport {default as median} from \"./src/median\";\nexport {default as merge} from \"./src/merge\";\nexport {default as min} from \"./src/min\";\nexport {default as pairs} from \"./src/pairs\";\nexport {default as permute} from \"./src/permute\";\nexport {default as quantile} from \"./src/quantile\";\nexport {default as range} from \"./src/range\";\nexport {default as scan} from \"./src/scan\";\nexport {default as shuffle} from \"./src/shuffle\";\nexport {default as sum} from \"./src/sum\";\nexport {default as ticks, tickIncrement, tickStep} from \"./src/ticks\";\nexport {default as transpose} from \"./src/transpose\";\nexport {default as variance} from \"./src/variance\";\nexport {default as zip} from \"./src/zip\";\n","var array = Array.prototype;\n\nexport var slice = array.slice;\nexport var map = array.map;\n","export default function(a, b) {\n  return a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;\n}\n","import ascending from \"./ascending\";\nimport bisector from \"./bisector\";\n\nvar ascendingBisect = bisector(ascending);\nexport var bisectRight = ascendingBisect.right;\nexport var bisectLeft = ascendingBisect.left;\nexport default bisectRight;\n","import ascending from \"./ascending\";\n\nexport default function(compare) {\n  if (compare.length === 1) compare = ascendingComparator(compare);\n  return {\n    left: function(a, x, lo, hi) {\n      if (lo == null) lo = 0;\n      if (hi == null) hi = a.length;\n      while (lo < hi) {\n        var mid = lo + hi >>> 1;\n        if (compare(a[mid], x) < 0) lo = mid + 1;\n        else hi = mid;\n      }\n      return lo;\n    },\n    right: function(a, x, lo, hi) {\n      if (lo == null) lo = 0;\n      if (hi == null) hi = a.length;\n      while (lo < hi) {\n        var mid = lo + hi >>> 1;\n        if (compare(a[mid], x) > 0) hi = mid;\n        else lo = mid + 1;\n      }\n      return lo;\n    }\n  };\n}\n\nfunction ascendingComparator(f) {\n  return function(d, x) {\n    return ascending(f(d), x);\n  };\n}\n","export default function(x) {\n  return function() {\n    return x;\n  };\n}\n","import {pair} from \"./pairs\";\n\nexport default function(values0, values1, reduce) {\n  var n0 = values0.length,\n      n1 = values1.length,\n      values = new Array(n0 * n1),\n      i0,\n      i1,\n      i,\n      value0;\n\n  if (reduce == null) reduce = pair;\n\n  for (i0 = i = 0; i0 < n0; ++i0) {\n    for (value0 = values0[i0], i1 = 0; i1 < n1; ++i1, ++i) {\n      values[i] = reduce(value0, values1[i1]);\n    }\n  }\n\n  return values;\n}\n","export default function(a, b) {\n  return b < a ? -1 : b > a ? 1 : b >= a ? 0 : NaN;\n}\n","import variance from \"./variance\";\n\nexport default function(array, f) {\n  var v = variance(array, f);\n  return v ? Math.sqrt(v) : v;\n}\n","export default function(values, valueof) {\n  var n = values.length,\n      i = -1,\n      value,\n      min,\n      max;\n\n  if (valueof == null) {\n    while (++i < n) { // Find the first comparable value.\n      if ((value = values[i]) != null && value >= value) {\n        min = max = value;\n        while (++i < n) { // Compare the remaining values.\n          if ((value = values[i]) != null) {\n            if (min > value) min = value;\n            if (max < value) max = value;\n          }\n        }\n      }\n    }\n  }\n\n  else {\n    while (++i < n) { // Find the first comparable value.\n      if ((value = valueof(values[i], i, values)) != null && value >= value) {\n        min = max = value;\n        while (++i < n) { // Compare the remaining values.\n          if ((value = valueof(values[i], i, values)) != null) {\n            if (min > value) min = value;\n            if (max < value) max = value;\n          }\n        }\n      }\n    }\n  }\n\n  return [min, max];\n}\n","import {slice} from \"./array\";\nimport bisect from \"./bisect\";\nimport constant from \"./constant\";\nimport extent from \"./extent\";\nimport identity from \"./identity\";\nimport range from \"./range\";\nimport {tickStep} from \"./ticks\";\nimport sturges from \"./threshold/sturges\";\n\nexport default function() {\n  var value = identity,\n      domain = extent,\n      threshold = sturges;\n\n  function histogram(data) {\n    var i,\n        n = data.length,\n        x,\n        values = new Array(n);\n\n    for (i = 0; i < n; ++i) {\n      values[i] = value(data[i], i, data);\n    }\n\n    var xz = domain(values),\n        x0 = xz[0],\n        x1 = xz[1],\n        tz = threshold(values, x0, x1);\n\n    // Convert number of thresholds into uniform thresholds.\n    if (!Array.isArray(tz)) {\n      tz = tickStep(x0, x1, tz);\n      tz = range(Math.ceil(x0 / tz) * tz, Math.floor(x1 / tz) * tz, tz); // exclusive\n    }\n\n    // Remove any thresholds outside the domain.\n    var m = tz.length;\n    while (tz[0] <= x0) tz.shift(), --m;\n    while (tz[m - 1] > x1) tz.pop(), --m;\n\n    var bins = new Array(m + 1),\n        bin;\n\n    // Initialize bins.\n    for (i = 0; i <= m; ++i) {\n      bin = bins[i] = [];\n      bin.x0 = i > 0 ? tz[i - 1] : x0;\n      bin.x1 = i < m ? tz[i] : x1;\n    }\n\n    // Assign data to bins by value, ignoring any outside the domain.\n    for (i = 0; i < n; ++i) {\n      x = values[i];\n      if (x0 <= x && x <= x1) {\n        bins[bisect(tz, x, 0, m)].push(data[i]);\n      }\n    }\n\n    return bins;\n  }\n\n  histogram.value = function(_) {\n    return arguments.length ? (value = typeof _ === \"function\" ? _ : constant(_), histogram) : value;\n  };\n\n  histogram.domain = function(_) {\n    return arguments.length ? (domain = typeof _ === \"function\" ? _ : constant([_[0], _[1]]), histogram) : domain;\n  };\n\n  histogram.thresholds = function(_) {\n    return arguments.length ? (threshold = typeof _ === \"function\" ? _ : Array.isArray(_) ? constant(slice.call(_)) : constant(_), histogram) : threshold;\n  };\n\n  return histogram;\n}\n","export default function(x) {\n  return x;\n}\n","export default function(values, valueof) {\n  var n = values.length,\n      i = -1,\n      value,\n      max;\n\n  if (valueof == null) {\n    while (++i < n) { // Find the first comparable value.\n      if ((value = values[i]) != null && value >= value) {\n        max = value;\n        while (++i < n) { // Compare the remaining values.\n          if ((value = values[i]) != null && value > max) {\n            max = value;\n          }\n        }\n      }\n    }\n  }\n\n  else {\n    while (++i < n) { // Find the first comparable value.\n      if ((value = valueof(values[i], i, values)) != null && value >= value) {\n        max = value;\n        while (++i < n) { // Compare the remaining values.\n          if ((value = valueof(values[i], i, values)) != null && value > max) {\n            max = value;\n          }\n        }\n      }\n    }\n  }\n\n  return max;\n}\n","import number from \"./number\";\n\nexport default function(values, valueof) {\n  var n = values.length,\n      m = n,\n      i = -1,\n      value,\n      sum = 0;\n\n  if (valueof == null) {\n    while (++i < n) {\n      if (!isNaN(value = number(values[i]))) sum += value;\n      else --m;\n    }\n  }\n\n  else {\n    while (++i < n) {\n      if (!isNaN(value = number(valueof(values[i], i, values)))) sum += value;\n      else --m;\n    }\n  }\n\n  if (m) return sum / m;\n}\n","import ascending from \"./ascending\";\nimport number from \"./number\";\nimport quantile from \"./quantile\";\n\nexport default function(values, valueof) {\n  var n = values.length,\n      i = -1,\n      value,\n      numbers = [];\n\n  if (valueof == null) {\n    while (++i < n) {\n      if (!isNaN(value = number(values[i]))) {\n        numbers.push(value);\n      }\n    }\n  }\n\n  else {\n    while (++i < n) {\n      if (!isNaN(value = number(valueof(values[i], i, values)))) {\n        numbers.push(value);\n      }\n    }\n  }\n\n  return quantile(numbers.sort(ascending), 0.5);\n}\n","export default function(arrays) {\n  var n = arrays.length,\n      m,\n      i = -1,\n      j = 0,\n      merged,\n      array;\n\n  while (++i < n) j += arrays[i].length;\n  merged = new Array(j);\n\n  while (--n >= 0) {\n    array = arrays[n];\n    m = array.length;\n    while (--m >= 0) {\n      merged[--j] = array[m];\n    }\n  }\n\n  return merged;\n}\n","export default function(values, valueof) {\n  var n = values.length,\n      i = -1,\n      value,\n      min;\n\n  if (valueof == null) {\n    while (++i < n) { // Find the first comparable value.\n      if ((value = values[i]) != null && value >= value) {\n        min = value;\n        while (++i < n) { // Compare the remaining values.\n          if ((value = values[i]) != null && min > value) {\n            min = value;\n          }\n        }\n      }\n    }\n  }\n\n  else {\n    while (++i < n) { // Find the first comparable value.\n      if ((value = valueof(values[i], i, values)) != null && value >= value) {\n        min = value;\n        while (++i < n) { // Compare the remaining values.\n          if ((value = valueof(values[i], i, values)) != null && min > value) {\n            min = value;\n          }\n        }\n      }\n    }\n  }\n\n  return min;\n}\n","export default function(x) {\n  return x === null ? NaN : +x;\n}\n","export default function(array, f) {\n  if (f == null) f = pair;\n  var i = 0, n = array.length - 1, p = array[0], pairs = new Array(n < 0 ? 0 : n);\n  while (i < n) pairs[i] = f(p, p = array[++i]);\n  return pairs;\n}\n\nexport function pair(a, b) {\n  return [a, b];\n}\n","export default function(array, indexes) {\n  var i = indexes.length, permutes = new Array(i);\n  while (i--) permutes[i] = array[indexes[i]];\n  return permutes;\n}\n","import number from \"./number\";\n\nexport default function(values, p, valueof) {\n  if (valueof == null) valueof = number;\n  if (!(n = values.length)) return;\n  if ((p = +p) <= 0 || n < 2) return +valueof(values[0], 0, values);\n  if (p >= 1) return +valueof(values[n - 1], n - 1, values);\n  var n,\n      i = (n - 1) * p,\n      i0 = Math.floor(i),\n      value0 = +valueof(values[i0], i0, values),\n      value1 = +valueof(values[i0 + 1], i0 + 1, values);\n  return value0 + (value1 - value0) * (i - i0);\n}\n","export default function(start, stop, step) {\n  start = +start, stop = +stop, step = (n = arguments.length) < 2 ? (stop = start, start = 0, 1) : n < 3 ? 1 : +step;\n\n  var i = -1,\n      n = Math.max(0, Math.ceil((stop - start) / step)) | 0,\n      range = new Array(n);\n\n  while (++i < n) {\n    range[i] = start + i * step;\n  }\n\n  return range;\n}\n","import ascending from \"./ascending\";\n\nexport default function(values, compare) {\n  if (!(n = values.length)) return;\n  var n,\n      i = 0,\n      j = 0,\n      xi,\n      xj = values[j];\n\n  if (compare == null) compare = ascending;\n\n  while (++i < n) {\n    if (compare(xi = values[i], xj) < 0 || compare(xj, xj) !== 0) {\n      xj = xi, j = i;\n    }\n  }\n\n  if (compare(xj, xj) === 0) return j;\n}\n","export default function(array, i0, i1) {\n  var m = (i1 == null ? array.length : i1) - (i0 = i0 == null ? 0 : +i0),\n      t,\n      i;\n\n  while (m) {\n    i = Math.random() * m-- | 0;\n    t = array[m + i0];\n    array[m + i0] = array[i + i0];\n    array[i + i0] = t;\n  }\n\n  return array;\n}\n","export default function(values, valueof) {\n  var n = values.length,\n      i = -1,\n      value,\n      sum = 0;\n\n  if (valueof == null) {\n    while (++i < n) {\n      if (value = +values[i]) sum += value; // Note: zero and null are equivalent.\n    }\n  }\n\n  else {\n    while (++i < n) {\n      if (value = +valueof(values[i], i, values)) sum += value;\n    }\n  }\n\n  return sum;\n}\n","import {map} from \"../array\";\nimport ascending from \"../ascending\";\nimport number from \"../number\";\nimport quantile from \"../quantile\";\n\nexport default function(values, min, max) {\n  values = map.call(values, number).sort(ascending);\n  return Math.ceil((max - min) / (2 * (quantile(values, 0.75) - quantile(values, 0.25)) * Math.pow(values.length, -1 / 3)));\n}\n","import deviation from \"../deviation\";\n\nexport default function(values, min, max) {\n  return Math.ceil((max - min) / (3.5 * deviation(values) * Math.pow(values.length, -1 / 3)));\n}\n","export default function(values) {\n  return Math.ceil(Math.log(values.length) / Math.LN2) + 1;\n}\n","var e10 = Math.sqrt(50),\n    e5 = Math.sqrt(10),\n    e2 = Math.sqrt(2);\n\nexport default function(start, stop, count) {\n  var reverse,\n      i = -1,\n      n,\n      ticks,\n      step;\n\n  stop = +stop, start = +start, count = +count;\n  if (start === stop && count > 0) return [start];\n  if (reverse = stop < start) n = start, start = stop, stop = n;\n  if ((step = tickIncrement(start, stop, count)) === 0 || !isFinite(step)) return [];\n\n  if (step > 0) {\n    start = Math.ceil(start / step);\n    stop = Math.floor(stop / step);\n    ticks = new Array(n = Math.ceil(stop - start + 1));\n    while (++i < n) ticks[i] = (start + i) * step;\n  } else {\n    start = Math.floor(start * step);\n    stop = Math.ceil(stop * step);\n    ticks = new Array(n = Math.ceil(start - stop + 1));\n    while (++i < n) ticks[i] = (start - i) / step;\n  }\n\n  if (reverse) ticks.reverse();\n\n  return ticks;\n}\n\nexport function tickIncrement(start, stop, count) {\n  var step = (stop - start) / Math.max(0, count),\n      power = Math.floor(Math.log(step) / Math.LN10),\n      error = step / Math.pow(10, power);\n  return power >= 0\n      ? (error >= e10 ? 10 : error >= e5 ? 5 : error >= e2 ? 2 : 1) * Math.pow(10, power)\n      : -Math.pow(10, -power) / (error >= e10 ? 10 : error >= e5 ? 5 : error >= e2 ? 2 : 1);\n}\n\nexport function tickStep(start, stop, count) {\n  var step0 = Math.abs(stop - start) / Math.max(0, count),\n      step1 = Math.pow(10, Math.floor(Math.log(step0) / Math.LN10)),\n      error = step0 / step1;\n  if (error >= e10) step1 *= 10;\n  else if (error >= e5) step1 *= 5;\n  else if (error >= e2) step1 *= 2;\n  return stop < start ? -step1 : step1;\n}\n","import min from \"./min\";\n\nexport default function(matrix) {\n  if (!(n = matrix.length)) return [];\n  for (var i = -1, m = min(matrix, length), transpose = new Array(m); ++i < m;) {\n    for (var j = -1, n, row = transpose[i] = new Array(n); ++j < n;) {\n      row[j] = matrix[j][i];\n    }\n  }\n  return transpose;\n}\n\nfunction length(d) {\n  return d.length;\n}\n","import number from \"./number\";\n\nexport default function(values, valueof) {\n  var n = values.length,\n      m = 0,\n      i = -1,\n      mean = 0,\n      value,\n      delta,\n      sum = 0;\n\n  if (valueof == null) {\n    while (++i < n) {\n      if (!isNaN(value = number(values[i]))) {\n        delta = value - mean;\n        mean += delta / ++m;\n        sum += delta * (value - mean);\n      }\n    }\n  }\n\n  else {\n    while (++i < n) {\n      if (!isNaN(value = number(valueof(values[i], i, values)))) {\n        delta = value - mean;\n        mean += delta / ++m;\n        sum += delta * (value - mean);\n      }\n    }\n  }\n\n  if (m > 1) return sum / (m - 1);\n}\n","import transpose from \"./transpose\";\n\nexport default function() {\n  return transpose(arguments);\n}\n","export var slice = Array.prototype.slice;\n","import {slice} from \"./array\";\nimport identity from \"./identity\";\n\nvar top = 1,\n    right = 2,\n    bottom = 3,\n    left = 4,\n    epsilon = 1e-6;\n\nfunction translateX(x) {\n  return \"translate(\" + (x + 0.5) + \",0)\";\n}\n\nfunction translateY(y) {\n  return \"translate(0,\" + (y + 0.5) + \")\";\n}\n\nfunction number(scale) {\n  return function(d) {\n    return +scale(d);\n  };\n}\n\nfunction center(scale) {\n  var offset = Math.max(0, scale.bandwidth() - 1) / 2; // Adjust for 0.5px offset.\n  if (scale.round()) offset = Math.round(offset);\n  return function(d) {\n    return +scale(d) + offset;\n  };\n}\n\nfunction entering() {\n  return !this.__axis;\n}\n\nfunction axis(orient, scale) {\n  var tickArguments = [],\n      tickValues = null,\n      tickFormat = null,\n      tickTransform = null,\n      tickSizeInner = 6,\n      tickSizeOuter = 6,\n      tickPadding = 3,\n      k = orient === top || orient === left ? -1 : 1,\n      x = orient === left || orient === right ? \"x\" : \"y\",\n      transform = orient === top || orient === bottom ? translateX : translateY;\n\n  function axis(context) {\n    var values = tickValues == null ? (scale.ticks ? scale.ticks.apply(scale, tickArguments) : scale.domain()) : tickValues,\n        format = tickFormat == null ? (scale.tickFormat ? scale.tickFormat.apply(scale, tickArguments) : identity) : tickFormat,\n        spacing = Math.max(tickSizeInner, 0) + tickPadding,\n        range = scale.range(),\n        range0 = +range[0] + 0.5,\n        range1 = +range[range.length - 1] + 0.5,\n        position = (scale.bandwidth ? center : number)(scale.copy()),\n        selection = context.selection ? context.selection() : context,\n        path = selection.selectAll(\".domain\").data([null]),\n        tick = selection.selectAll(\".tick\").data(values, scale).order(),\n        tickExit = tick.exit(),\n        tickEnter = tick.enter().append(\"g\").attr(\"class\", \"tick\"),\n        line = tick.select(\"line\"),\n        text = tick.select(\"text\");\n\n    path = path.merge(path.enter().insert(\"path\", \".tick\")\n        .attr(\"class\", \"domain\")\n        .attr(\"stroke\", \"#000\"));\n\n    tick = tick.merge(tickEnter);\n\n    line = line.merge(tickEnter.append(\"line\")\n        .attr(\"stroke\", \"#000\")\n        .attr(x + \"2\", k * tickSizeInner));\n\n    text = text.merge(tickEnter.append(\"text\")\n        .attr(\"fill\", \"#000\")\n        .attr(x, k * spacing)\n        .attr(\"dy\", orient === top ? \"0em\" : orient === bottom ? \"0.71em\" : \"0.32em\"))\n        .style('transform', tickTransform);\n\n    if (context !== selection) {\n      path = path.transition(context);\n      tick = tick.transition(context);\n      line = line.transition(context);\n      text = text.transition(context);\n\n      tickExit = tickExit.transition(context)\n          .attr(\"opacity\", epsilon)\n          .attr(\"transform\", function(d) { return isFinite(d = position(d)) ? transform(d) : this.getAttribute(\"transform\"); });\n\n      tickEnter\n          .attr(\"opacity\", epsilon)\n          .attr(\"transform\", function(d) { var p = this.parentNode.__axis; return transform(p && isFinite(p = p(d)) ? p : position(d)); });\n    }\n\n    tickExit.remove();\n\n    path\n        .attr(\"d\", orient === left || orient == right\n            ? \"M\" + k * tickSizeOuter + \",\" + range0 + \"H0.5V\" + range1 + \"H\" + k * tickSizeOuter\n            : \"M\" + range0 + \",\" + k * tickSizeOuter + \"V0.5H\" + range1 + \"V\" + k * tickSizeOuter);\n\n    tick\n        .attr(\"opacity\", 1)\n        .attr(\"transform\", function(d) { return transform(position(d)); });\n\n    line\n        .attr(x + \"2\", k * tickSizeInner);\n\n    text\n        .attr(x, k * spacing)\n        .text(format);\n\n    selection.filter(entering)\n        .attr(\"fill\", \"none\")\n        .attr(\"font-size\", 10)\n        .attr(\"font-family\", \"sans-serif\")\n        .attr(\"text-anchor\", orient === right ? \"start\" : orient === left ? \"end\" : \"middle\");\n\n    selection\n        .each(function() { this.__axis = position; });\n  }\n\n  axis.scale = function(_) {\n    return arguments.length ? (scale = _, axis) : scale;\n  };\n\n  axis.tickTransform = function(_) {\n    return arguments.length ? (tickTransform = _, axis) : tickTransform;\n  };\n\n  axis.ticks = function() {\n    return tickArguments = slice.call(arguments), axis;\n  };\n\n  axis.tickArguments = function(_) {\n    return arguments.length ? (tickArguments = _ == null ? [] : slice.call(_), axis) : tickArguments.slice();\n  };\n\n  axis.tickValues = function(_) {\n    return arguments.length ? (tickValues = _ == null ? null : slice.call(_), axis) : tickValues && tickValues.slice();\n  };\n\n  axis.tickFormat = function(_) {\n    return arguments.length ? (tickFormat = _, axis) : tickFormat;\n  };\n\n  axis.tickSize = function(_) {\n    return arguments.length ? (tickSizeInner = tickSizeOuter = +_, axis) : tickSizeInner;\n  };\n\n  axis.tickSizeInner = function(_) {\n    return arguments.length ? (tickSizeInner = +_, axis) : tickSizeInner;\n  };\n\n  axis.tickSizeOuter = function(_) {\n    return arguments.length ? (tickSizeOuter = +_, axis) : tickSizeOuter;\n  };\n\n  axis.tickPadding = function(_) {\n    return arguments.length ? (tickPadding = +_, axis) : tickPadding;\n  };\n\n  return axis;\n}\n\nexport function axisTop(scale) {\n  return axis(top, scale);\n}\n\nexport function axisRight(scale) {\n  return axis(right, scale);\n}\n\nexport function axisBottom(scale) {\n  return axis(bottom, scale);\n}\n\nexport function axisLeft(scale) {\n  return axis(left, scale);\n}\n","export default function(x) {\n  return x;\n}\n","export {default as nest} from \"./src/nest\";\nexport {default as set} from \"./src/set\";\nexport {default as map} from \"./src/map\";\nexport {default as keys} from \"./src/keys\";\nexport {default as values} from \"./src/values\";\nexport {default as entries} from \"./src/entries\";\n","export default function(map) {\n  var entries = [];\n  for (var key in map) entries.push({key: key, value: map[key]});\n  return entries;\n}\n","export default function(map) {\n  var keys = [];\n  for (var key in map) keys.push(key);\n  return keys;\n}\n","export var prefix = \"$\";\n\nfunction Map() {}\n\nMap.prototype = map.prototype = {\n  constructor: Map,\n  has: function(key) {\n    return (prefix + key) in this;\n  },\n  get: function(key) {\n    return this[prefix + key];\n  },\n  set: function(key, value) {\n    this[prefix + key] = value;\n    return this;\n  },\n  remove: function(key) {\n    var property = prefix + key;\n    return property in this && delete this[property];\n  },\n  clear: function() {\n    for (var property in this) if (property[0] === prefix) delete this[property];\n  },\n  keys: function() {\n    var keys = [];\n    for (var property in this) if (property[0] === prefix) keys.push(property.slice(1));\n    return keys;\n  },\n  values: function() {\n    var values = [];\n    for (var property in this) if (property[0] === prefix) values.push(this[property]);\n    return values;\n  },\n  entries: function() {\n    var entries = [];\n    for (var property in this) if (property[0] === prefix) entries.push({key: property.slice(1), value: this[property]});\n    return entries;\n  },\n  size: function() {\n    var size = 0;\n    for (var property in this) if (property[0] === prefix) ++size;\n    return size;\n  },\n  empty: function() {\n    for (var property in this) if (property[0] === prefix) return false;\n    return true;\n  },\n  each: function(f) {\n    for (var property in this) if (property[0] === prefix) f(this[property], property.slice(1), this);\n  }\n};\n\nfunction map(object, f) {\n  var map = new Map;\n\n  // Copy constructor.\n  if (object instanceof Map) object.each(function(value, key) { map.set(key, value); });\n\n  // Index array by numeric index or specified key function.\n  else if (Array.isArray(object)) {\n    var i = -1,\n        n = object.length,\n        o;\n\n    if (f == null) while (++i < n) map.set(i, object[i]);\n    else while (++i < n) map.set(f(o = object[i], i, object), o);\n  }\n\n  // Convert object to map.\n  else if (object) for (var key in object) map.set(key, object[key]);\n\n  return map;\n}\n\nexport default map;\n","import map from \"./map\";\n\nexport default function() {\n  var keys = [],\n      sortKeys = [],\n      sortValues,\n      rollup,\n      nest;\n\n  function apply(array, depth, createResult, setResult) {\n    if (depth >= keys.length) {\n      if (sortValues != null) array.sort(sortValues);\n      return rollup != null ? rollup(array) : array;\n    }\n\n    var i = -1,\n        n = array.length,\n        key = keys[depth++],\n        keyValue,\n        value,\n        valuesByKey = map(),\n        values,\n        result = createResult();\n\n    while (++i < n) {\n      if (values = valuesByKey.get(keyValue = key(value = array[i]) + \"\")) {\n        values.push(value);\n      } else {\n        valuesByKey.set(keyValue, [value]);\n      }\n    }\n\n    valuesByKey.each(function(values, key) {\n      setResult(result, key, apply(values, depth, createResult, setResult));\n    });\n\n    return result;\n  }\n\n  function entries(map, depth) {\n    if (++depth > keys.length) return map;\n    var array, sortKey = sortKeys[depth - 1];\n    if (rollup != null && depth >= keys.length) array = map.entries();\n    else array = [], map.each(function(v, k) { array.push({key: k, values: entries(v, depth)}); });\n    return sortKey != null ? array.sort(function(a, b) { return sortKey(a.key, b.key); }) : array;\n  }\n\n  return nest = {\n    object: function(array) { return apply(array, 0, createObject, setObject); },\n    map: function(array) { return apply(array, 0, createMap, setMap); },\n    entries: function(array) { return entries(apply(array, 0, createMap, setMap), 0); },\n    key: function(d) { keys.push(d); return nest; },\n    sortKeys: function(order) { sortKeys[keys.length - 1] = order; return nest; },\n    sortValues: function(order) { sortValues = order; return nest; },\n    rollup: function(f) { rollup = f; return nest; }\n  };\n}\n\nfunction createObject() {\n  return {};\n}\n\nfunction setObject(object, key, value) {\n  object[key] = value;\n}\n\nfunction createMap() {\n  return map();\n}\n\nfunction setMap(map, key, value) {\n  map.set(key, value);\n}\n","import {default as map, prefix} from \"./map\";\n\nfunction Set() {}\n\nvar proto = map.prototype;\n\nSet.prototype = set.prototype = {\n  constructor: Set,\n  has: proto.has,\n  add: function(value) {\n    value += \"\";\n    this[prefix + value] = value;\n    return this;\n  },\n  remove: proto.remove,\n  clear: proto.clear,\n  values: proto.keys,\n  size: proto.size,\n  empty: proto.empty,\n  each: proto.each\n};\n\nfunction set(object, f) {\n  var set = new Set;\n\n  // Copy constructor.\n  if (object instanceof Set) object.each(function(value) { set.add(value); });\n\n  // Otherwise, assume its an array.\n  else if (object) {\n    var i = -1, n = object.length;\n    if (f == null) while (++i < n) set.add(object[i]);\n    else while (++i < n) set.add(f(object[i], i, object));\n  }\n\n  return set;\n}\n\nexport default set;\n","export default function(map) {\n  var values = [];\n  for (var key in map) values.push(map[key]);\n  return values;\n}\n","export {default as color, rgb, hsl} from \"./src/color\";\nexport {default as lab, hcl, lch, gray} from \"./src/lab\";\nexport {default as cubehelix} from \"./src/cubehelix\";\n","import define, {extend} from \"./define\";\n\nexport function Color() {}\n\nexport var darker = 0.7;\nexport var brighter = 1 / darker;\n\nvar reI = \"\\\\s*([+-]?\\\\d+)\\\\s*\",\n    reN = \"\\\\s*([+-]?\\\\d*\\\\.?\\\\d+(?:[eE][+-]?\\\\d+)?)\\\\s*\",\n    reP = \"\\\\s*([+-]?\\\\d*\\\\.?\\\\d+(?:[eE][+-]?\\\\d+)?)%\\\\s*\",\n    reHex3 = /^#([0-9a-f]{3})$/,\n    reHex6 = /^#([0-9a-f]{6})$/,\n    reRgbInteger = new RegExp(\"^rgb\\\\(\" + [reI, reI, reI] + \"\\\\)$\"),\n    reRgbPercent = new RegExp(\"^rgb\\\\(\" + [reP, reP, reP] + \"\\\\)$\"),\n    reRgbaInteger = new RegExp(\"^rgba\\\\(\" + [reI, reI, reI, reN] + \"\\\\)$\"),\n    reRgbaPercent = new RegExp(\"^rgba\\\\(\" + [reP, reP, reP, reN] + \"\\\\)$\"),\n    reHslPercent = new RegExp(\"^hsl\\\\(\" + [reN, reP, reP] + \"\\\\)$\"),\n    reHslaPercent = new RegExp(\"^hsla\\\\(\" + [reN, reP, reP, reN] + \"\\\\)$\");\n\nvar named = {\n  aliceblue: 0xf0f8ff,\n  antiquewhite: 0xfaebd7,\n  aqua: 0x00ffff,\n  aquamarine: 0x7fffd4,\n  azure: 0xf0ffff,\n  beige: 0xf5f5dc,\n  bisque: 0xffe4c4,\n  black: 0x000000,\n  blanchedalmond: 0xffebcd,\n  blue: 0x0000ff,\n  blueviolet: 0x8a2be2,\n  brown: 0xa52a2a,\n  burlywood: 0xdeb887,\n  cadetblue: 0x5f9ea0,\n  chartreuse: 0x7fff00,\n  chocolate: 0xd2691e,\n  coral: 0xff7f50,\n  cornflowerblue: 0x6495ed,\n  cornsilk: 0xfff8dc,\n  crimson: 0xdc143c,\n  cyan: 0x00ffff,\n  darkblue: 0x00008b,\n  darkcyan: 0x008b8b,\n  darkgoldenrod: 0xb8860b,\n  darkgray: 0xa9a9a9,\n  darkgreen: 0x006400,\n  darkgrey: 0xa9a9a9,\n  darkkhaki: 0xbdb76b,\n  darkmagenta: 0x8b008b,\n  darkolivegreen: 0x556b2f,\n  darkorange: 0xff8c00,\n  darkorchid: 0x9932cc,\n  darkred: 0x8b0000,\n  darksalmon: 0xe9967a,\n  darkseagreen: 0x8fbc8f,\n  darkslateblue: 0x483d8b,\n  darkslategray: 0x2f4f4f,\n  darkslategrey: 0x2f4f4f,\n  darkturquoise: 0x00ced1,\n  darkviolet: 0x9400d3,\n  deeppink: 0xff1493,\n  deepskyblue: 0x00bfff,\n  dimgray: 0x696969,\n  dimgrey: 0x696969,\n  dodgerblue: 0x1e90ff,\n  firebrick: 0xb22222,\n  floralwhite: 0xfffaf0,\n  forestgreen: 0x228b22,\n  fuchsia: 0xff00ff,\n  gainsboro: 0xdcdcdc,\n  ghostwhite: 0xf8f8ff,\n  gold: 0xffd700,\n  goldenrod: 0xdaa520,\n  gray: 0x808080,\n  green: 0x008000,\n  greenyellow: 0xadff2f,\n  grey: 0x808080,\n  honeydew: 0xf0fff0,\n  hotpink: 0xff69b4,\n  indianred: 0xcd5c5c,\n  indigo: 0x4b0082,\n  ivory: 0xfffff0,\n  khaki: 0xf0e68c,\n  lavender: 0xe6e6fa,\n  lavenderblush: 0xfff0f5,\n  lawngreen: 0x7cfc00,\n  lemonchiffon: 0xfffacd,\n  lightblue: 0xadd8e6,\n  lightcoral: 0xf08080,\n  lightcyan: 0xe0ffff,\n  lightgoldenrodyellow: 0xfafad2,\n  lightgray: 0xd3d3d3,\n  lightgreen: 0x90ee90,\n  lightgrey: 0xd3d3d3,\n  lightpink: 0xffb6c1,\n  lightsalmon: 0xffa07a,\n  lightseagreen: 0x20b2aa,\n  lightskyblue: 0x87cefa,\n  lightslategray: 0x778899,\n  lightslategrey: 0x778899,\n  lightsteelblue: 0xb0c4de,\n  lightyellow: 0xffffe0,\n  lime: 0x00ff00,\n  limegreen: 0x32cd32,\n  linen: 0xfaf0e6,\n  magenta: 0xff00ff,\n  maroon: 0x800000,\n  mediumaquamarine: 0x66cdaa,\n  mediumblue: 0x0000cd,\n  mediumorchid: 0xba55d3,\n  mediumpurple: 0x9370db,\n  mediumseagreen: 0x3cb371,\n  mediumslateblue: 0x7b68ee,\n  mediumspringgreen: 0x00fa9a,\n  mediumturquoise: 0x48d1cc,\n  mediumvioletred: 0xc71585,\n  midnightblue: 0x191970,\n  mintcream: 0xf5fffa,\n  mistyrose: 0xffe4e1,\n  moccasin: 0xffe4b5,\n  navajowhite: 0xffdead,\n  navy: 0x000080,\n  oldlace: 0xfdf5e6,\n  olive: 0x808000,\n  olivedrab: 0x6b8e23,\n  orange: 0xffa500,\n  orangered: 0xff4500,\n  orchid: 0xda70d6,\n  palegoldenrod: 0xeee8aa,\n  palegreen: 0x98fb98,\n  paleturquoise: 0xafeeee,\n  palevioletred: 0xdb7093,\n  papayawhip: 0xffefd5,\n  peachpuff: 0xffdab9,\n  peru: 0xcd853f,\n  pink: 0xffc0cb,\n  plum: 0xdda0dd,\n  powderblue: 0xb0e0e6,\n  purple: 0x800080,\n  rebeccapurple: 0x663399,\n  red: 0xff0000,\n  rosybrown: 0xbc8f8f,\n  royalblue: 0x4169e1,\n  saddlebrown: 0x8b4513,\n  salmon: 0xfa8072,\n  sandybrown: 0xf4a460,\n  seagreen: 0x2e8b57,\n  seashell: 0xfff5ee,\n  sienna: 0xa0522d,\n  silver: 0xc0c0c0,\n  skyblue: 0x87ceeb,\n  slateblue: 0x6a5acd,\n  slategray: 0x708090,\n  slategrey: 0x708090,\n  snow: 0xfffafa,\n  springgreen: 0x00ff7f,\n  steelblue: 0x4682b4,\n  tan: 0xd2b48c,\n  teal: 0x008080,\n  thistle: 0xd8bfd8,\n  tomato: 0xff6347,\n  turquoise: 0x40e0d0,\n  violet: 0xee82ee,\n  wheat: 0xf5deb3,\n  white: 0xffffff,\n  whitesmoke: 0xf5f5f5,\n  yellow: 0xffff00,\n  yellowgreen: 0x9acd32\n};\n\ndefine(Color, color, {\n  displayable: function() {\n    return this.rgb().displayable();\n  },\n  hex: function() {\n    return this.rgb().hex();\n  },\n  toString: function() {\n    return this.rgb() + \"\";\n  }\n});\n\nexport default function color(format) {\n  var m;\n  format = (format + \"\").trim().toLowerCase();\n  return (m = reHex3.exec(format)) ? (m = parseInt(m[1], 16), new Rgb((m >> 8 & 0xf) | (m >> 4 & 0x0f0), (m >> 4 & 0xf) | (m & 0xf0), ((m & 0xf) << 4) | (m & 0xf), 1)) // #f00\n      : (m = reHex6.exec(format)) ? rgbn(parseInt(m[1], 16)) // #ff0000\n      : (m = reRgbInteger.exec(format)) ? new Rgb(m[1], m[2], m[3], 1) // rgb(255, 0, 0)\n      : (m = reRgbPercent.exec(format)) ? new Rgb(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, 1) // rgb(100%, 0%, 0%)\n      : (m = reRgbaInteger.exec(format)) ? rgba(m[1], m[2], m[3], m[4]) // rgba(255, 0, 0, 1)\n      : (m = reRgbaPercent.exec(format)) ? rgba(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, m[4]) // rgb(100%, 0%, 0%, 1)\n      : (m = reHslPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, 1) // hsl(120, 50%, 50%)\n      : (m = reHslaPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, m[4]) // hsla(120, 50%, 50%, 1)\n      : named.hasOwnProperty(format) ? rgbn(named[format])\n      : format === \"transparent\" ? new Rgb(NaN, NaN, NaN, 0)\n      : null;\n}\n\nfunction rgbn(n) {\n  return new Rgb(n >> 16 & 0xff, n >> 8 & 0xff, n & 0xff, 1);\n}\n\nfunction rgba(r, g, b, a) {\n  if (a <= 0) r = g = b = NaN;\n  return new Rgb(r, g, b, a);\n}\n\nexport function rgbConvert(o) {\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Rgb;\n  o = o.rgb();\n  return new Rgb(o.r, o.g, o.b, o.opacity);\n}\n\nexport function rgb(r, g, b, opacity) {\n  return arguments.length === 1 ? rgbConvert(r) : new Rgb(r, g, b, opacity == null ? 1 : opacity);\n}\n\nexport function Rgb(r, g, b, opacity) {\n  this.r = +r;\n  this.g = +g;\n  this.b = +b;\n  this.opacity = +opacity;\n}\n\ndefine(Rgb, rgb, extend(Color, {\n  brighter: function(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  darker: function(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  rgb: function() {\n    return this;\n  },\n  displayable: function() {\n    return (0 <= this.r && this.r <= 255)\n        && (0 <= this.g && this.g <= 255)\n        && (0 <= this.b && this.b <= 255)\n        && (0 <= this.opacity && this.opacity <= 1);\n  },\n  hex: function() {\n    return \"#\" + hex(this.r) + hex(this.g) + hex(this.b);\n  },\n  toString: function() {\n    var a = this.opacity; a = isNaN(a) ? 1 : Math.max(0, Math.min(1, a));\n    return (a === 1 ? \"rgb(\" : \"rgba(\")\n        + Math.max(0, Math.min(255, Math.round(this.r) || 0)) + \", \"\n        + Math.max(0, Math.min(255, Math.round(this.g) || 0)) + \", \"\n        + Math.max(0, Math.min(255, Math.round(this.b) || 0))\n        + (a === 1 ? \")\" : \", \" + a + \")\");\n  }\n}));\n\nfunction hex(value) {\n  value = Math.max(0, Math.min(255, Math.round(value) || 0));\n  return (value < 16 ? \"0\" : \"\") + value.toString(16);\n}\n\nfunction hsla(h, s, l, a) {\n  if (a <= 0) h = s = l = NaN;\n  else if (l <= 0 || l >= 1) h = s = NaN;\n  else if (s <= 0) h = NaN;\n  return new Hsl(h, s, l, a);\n}\n\nexport function hslConvert(o) {\n  if (o instanceof Hsl) return new Hsl(o.h, o.s, o.l, o.opacity);\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Hsl;\n  if (o instanceof Hsl) return o;\n  o = o.rgb();\n  var r = o.r / 255,\n      g = o.g / 255,\n      b = o.b / 255,\n      min = Math.min(r, g, b),\n      max = Math.max(r, g, b),\n      h = NaN,\n      s = max - min,\n      l = (max + min) / 2;\n  if (s) {\n    if (r === max) h = (g - b) / s + (g < b) * 6;\n    else if (g === max) h = (b - r) / s + 2;\n    else h = (r - g) / s + 4;\n    s /= l < 0.5 ? max + min : 2 - max - min;\n    h *= 60;\n  } else {\n    s = l > 0 && l < 1 ? 0 : h;\n  }\n  return new Hsl(h, s, l, o.opacity);\n}\n\nexport function hsl(h, s, l, opacity) {\n  return arguments.length === 1 ? hslConvert(h) : new Hsl(h, s, l, opacity == null ? 1 : opacity);\n}\n\nfunction Hsl(h, s, l, opacity) {\n  this.h = +h;\n  this.s = +s;\n  this.l = +l;\n  this.opacity = +opacity;\n}\n\ndefine(Hsl, hsl, extend(Color, {\n  brighter: function(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  darker: function(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  rgb: function() {\n    var h = this.h % 360 + (this.h < 0) * 360,\n        s = isNaN(h) || isNaN(this.s) ? 0 : this.s,\n        l = this.l,\n        m2 = l + (l < 0.5 ? l : 1 - l) * s,\n        m1 = 2 * l - m2;\n    return new Rgb(\n      hsl2rgb(h >= 240 ? h - 240 : h + 120, m1, m2),\n      hsl2rgb(h, m1, m2),\n      hsl2rgb(h < 120 ? h + 240 : h - 120, m1, m2),\n      this.opacity\n    );\n  },\n  displayable: function() {\n    return (0 <= this.s && this.s <= 1 || isNaN(this.s))\n        && (0 <= this.l && this.l <= 1)\n        && (0 <= this.opacity && this.opacity <= 1);\n  }\n}));\n\n/* From FvD 13.37, CSS Color Module Level 3 */\nfunction hsl2rgb(h, m1, m2) {\n  return (h < 60 ? m1 + (m2 - m1) * h / 60\n      : h < 180 ? m2\n      : h < 240 ? m1 + (m2 - m1) * (240 - h) / 60\n      : m1) * 255;\n}\n","import define, {extend} from \"./define\";\nimport {Color, rgbConvert, Rgb, darker, brighter} from \"./color\";\nimport {deg2rad, rad2deg} from \"./math\";\n\nvar A = -0.14861,\n    B = +1.78277,\n    C = -0.29227,\n    D = -0.90649,\n    E = +1.97294,\n    ED = E * D,\n    EB = E * B,\n    BC_DA = B * C - D * A;\n\nfunction cubehelixConvert(o) {\n  if (o instanceof Cubehelix) return new Cubehelix(o.h, o.s, o.l, o.opacity);\n  if (!(o instanceof Rgb)) o = rgbConvert(o);\n  var r = o.r / 255,\n      g = o.g / 255,\n      b = o.b / 255,\n      l = (BC_DA * b + ED * r - EB * g) / (BC_DA + ED - EB),\n      bl = b - l,\n      k = (E * (g - l) - C * bl) / D,\n      s = Math.sqrt(k * k + bl * bl) / (E * l * (1 - l)), // NaN if l=0 or l=1\n      h = s ? Math.atan2(k, bl) * rad2deg - 120 : NaN;\n  return new Cubehelix(h < 0 ? h + 360 : h, s, l, o.opacity);\n}\n\nexport default function cubehelix(h, s, l, opacity) {\n  return arguments.length === 1 ? cubehelixConvert(h) : new Cubehelix(h, s, l, opacity == null ? 1 : opacity);\n}\n\nexport function Cubehelix(h, s, l, opacity) {\n  this.h = +h;\n  this.s = +s;\n  this.l = +l;\n  this.opacity = +opacity;\n}\n\ndefine(Cubehelix, cubehelix, extend(Color, {\n  brighter: function(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Cubehelix(this.h, this.s, this.l * k, this.opacity);\n  },\n  darker: function(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Cubehelix(this.h, this.s, this.l * k, this.opacity);\n  },\n  rgb: function() {\n    var h = isNaN(this.h) ? 0 : (this.h + 120) * deg2rad,\n        l = +this.l,\n        a = isNaN(this.s) ? 0 : this.s * l * (1 - l),\n        cosh = Math.cos(h),\n        sinh = Math.sin(h);\n    return new Rgb(\n      255 * (l + a * (A * cosh + B * sinh)),\n      255 * (l + a * (C * cosh + D * sinh)),\n      255 * (l + a * (E * cosh)),\n      this.opacity\n    );\n  }\n}));\n","export default function(constructor, factory, prototype) {\n  constructor.prototype = factory.prototype = prototype;\n  prototype.constructor = constructor;\n}\n\nexport function extend(parent, definition) {\n  var prototype = Object.create(parent.prototype);\n  for (var key in definition) prototype[key] = definition[key];\n  return prototype;\n}\n","import define, {extend} from \"./define\";\nimport {Color, rgbConvert, Rgb} from \"./color\";\nimport {deg2rad, rad2deg} from \"./math\";\n\n// https://beta.observablehq.com/@mbostock/lab-and-rgb\nvar K = 18,\n    Xn = 0.96422,\n    Yn = 1,\n    Zn = 0.82521,\n    t0 = 4 / 29,\n    t1 = 6 / 29,\n    t2 = 3 * t1 * t1,\n    t3 = t1 * t1 * t1;\n\nfunction labConvert(o) {\n  if (o instanceof Lab) return new Lab(o.l, o.a, o.b, o.opacity);\n  if (o instanceof Hcl) {\n    if (isNaN(o.h)) return new Lab(o.l, 0, 0, o.opacity);\n    var h = o.h * deg2rad;\n    return new Lab(o.l, Math.cos(h) * o.c, Math.sin(h) * o.c, o.opacity);\n  }\n  if (!(o instanceof Rgb)) o = rgbConvert(o);\n  var r = rgb2lrgb(o.r),\n      g = rgb2lrgb(o.g),\n      b = rgb2lrgb(o.b),\n      y = xyz2lab((0.2225045 * r + 0.7168786 * g + 0.0606169 * b) / Yn), x, z;\n  if (r === g && g === b) x = z = y; else {\n    x = xyz2lab((0.4360747 * r + 0.3850649 * g + 0.1430804 * b) / Xn);\n    z = xyz2lab((0.0139322 * r + 0.0971045 * g + 0.7141733 * b) / Zn);\n  }\n  return new Lab(116 * y - 16, 500 * (x - y), 200 * (y - z), o.opacity);\n}\n\nexport function gray(l, opacity) {\n  return new Lab(l, 0, 0, opacity == null ? 1 : opacity);\n}\n\nexport default function lab(l, a, b, opacity) {\n  return arguments.length === 1 ? labConvert(l) : new Lab(l, a, b, opacity == null ? 1 : opacity);\n}\n\nexport function Lab(l, a, b, opacity) {\n  this.l = +l;\n  this.a = +a;\n  this.b = +b;\n  this.opacity = +opacity;\n}\n\ndefine(Lab, lab, extend(Color, {\n  brighter: function(k) {\n    return new Lab(this.l + K * (k == null ? 1 : k), this.a, this.b, this.opacity);\n  },\n  darker: function(k) {\n    return new Lab(this.l - K * (k == null ? 1 : k), this.a, this.b, this.opacity);\n  },\n  rgb: function() {\n    var y = (this.l + 16) / 116,\n        x = isNaN(this.a) ? y : y + this.a / 500,\n        z = isNaN(this.b) ? y : y - this.b / 200;\n    x = Xn * lab2xyz(x);\n    y = Yn * lab2xyz(y);\n    z = Zn * lab2xyz(z);\n    return new Rgb(\n      lrgb2rgb( 3.1338561 * x - 1.6168667 * y - 0.4906146 * z),\n      lrgb2rgb(-0.9787684 * x + 1.9161415 * y + 0.0334540 * z),\n      lrgb2rgb( 0.0719453 * x - 0.2289914 * y + 1.4052427 * z),\n      this.opacity\n    );\n  }\n}));\n\nfunction xyz2lab(t) {\n  return t > t3 ? Math.pow(t, 1 / 3) : t / t2 + t0;\n}\n\nfunction lab2xyz(t) {\n  return t > t1 ? t * t * t : t2 * (t - t0);\n}\n\nfunction lrgb2rgb(x) {\n  return 255 * (x <= 0.0031308 ? 12.92 * x : 1.055 * Math.pow(x, 1 / 2.4) - 0.055);\n}\n\nfunction rgb2lrgb(x) {\n  return (x /= 255) <= 0.04045 ? x / 12.92 : Math.pow((x + 0.055) / 1.055, 2.4);\n}\n\nfunction hclConvert(o) {\n  if (o instanceof Hcl) return new Hcl(o.h, o.c, o.l, o.opacity);\n  if (!(o instanceof Lab)) o = labConvert(o);\n  if (o.a === 0 && o.b === 0) return new Hcl(NaN, 0, o.l, o.opacity);\n  var h = Math.atan2(o.b, o.a) * rad2deg;\n  return new Hcl(h < 0 ? h + 360 : h, Math.sqrt(o.a * o.a + o.b * o.b), o.l, o.opacity);\n}\n\nexport function lch(l, c, h, opacity) {\n  return arguments.length === 1 ? hclConvert(l) : new Hcl(h, c, l, opacity == null ? 1 : opacity);\n}\n\nexport function hcl(h, c, l, opacity) {\n  return arguments.length === 1 ? hclConvert(h) : new Hcl(h, c, l, opacity == null ? 1 : opacity);\n}\n\nexport function Hcl(h, c, l, opacity) {\n  this.h = +h;\n  this.c = +c;\n  this.l = +l;\n  this.opacity = +opacity;\n}\n\ndefine(Hcl, hcl, extend(Color, {\n  brighter: function(k) {\n    return new Hcl(this.h, this.c, this.l + K * (k == null ? 1 : k), this.opacity);\n  },\n  darker: function(k) {\n    return new Hcl(this.h, this.c, this.l - K * (k == null ? 1 : k), this.opacity);\n  },\n  rgb: function() {\n    return labConvert(this).rgb();\n  }\n}));\n","export var deg2rad = Math.PI / 180;\nexport var rad2deg = 180 / Math.PI;\n","var noop = {value: function() {}};\n\nfunction dispatch() {\n  for (var i = 0, n = arguments.length, _ = {}, t; i < n; ++i) {\n    if (!(t = arguments[i] + \"\") || (t in _)) throw new Error(\"illegal type: \" + t);\n    _[t] = [];\n  }\n  return new Dispatch(_);\n}\n\nfunction Dispatch(_) {\n  this._ = _;\n}\n\nfunction parseTypenames(typenames, types) {\n  return typenames.trim().split(/^|\\s+/).map(function(t) {\n    var name = \"\", i = t.indexOf(\".\");\n    if (i >= 0) name = t.slice(i + 1), t = t.slice(0, i);\n    if (t && !types.hasOwnProperty(t)) throw new Error(\"unknown type: \" + t);\n    return {type: t, name: name};\n  });\n}\n\nDispatch.prototype = dispatch.prototype = {\n  constructor: Dispatch,\n  on: function(typename, callback) {\n    var _ = this._,\n        T = parseTypenames(typename + \"\", _),\n        t,\n        i = -1,\n        n = T.length;\n\n    // If no callback was specified, return the callback of the given type and name.\n    if (arguments.length < 2) {\n      while (++i < n) if ((t = (typename = T[i]).type) && (t = get(_[t], typename.name))) return t;\n      return;\n    }\n\n    // If a type was specified, set the callback for the given type and name.\n    // Otherwise, if a null callback was specified, remove callbacks of the given name.\n    if (callback != null && typeof callback !== \"function\") throw new Error(\"invalid callback: \" + callback);\n    while (++i < n) {\n      if (t = (typename = T[i]).type) _[t] = set(_[t], typename.name, callback);\n      else if (callback == null) for (t in _) _[t] = set(_[t], typename.name, null);\n    }\n\n    return this;\n  },\n  copy: function() {\n    var copy = {}, _ = this._;\n    for (var t in _) copy[t] = _[t].slice();\n    return new Dispatch(copy);\n  },\n  call: function(type, that) {\n    if ((n = arguments.length - 2) > 0) for (var args = new Array(n), i = 0, n, t; i < n; ++i) args[i] = arguments[i + 2];\n    if (!this._.hasOwnProperty(type)) throw new Error(\"unknown type: \" + type);\n    for (t = this._[type], i = 0, n = t.length; i < n; ++i) t[i].value.apply(that, args);\n  },\n  apply: function(type, that, args) {\n    if (!this._.hasOwnProperty(type)) throw new Error(\"unknown type: \" + type);\n    for (var t = this._[type], i = 0, n = t.length; i < n; ++i) t[i].value.apply(that, args);\n  }\n};\n\nfunction get(type, name) {\n  for (var i = 0, n = type.length, c; i < n; ++i) {\n    if ((c = type[i]).name === name) {\n      return c.value;\n    }\n  }\n}\n\nfunction set(type, name, callback) {\n  for (var i = 0, n = type.length; i < n; ++i) {\n    if (type[i].name === name) {\n      type[i] = noop, type = type.slice(0, i).concat(type.slice(i + 1));\n      break;\n    }\n  }\n  if (callback != null) type.push({name: name, value: callback});\n  return type;\n}\n\nexport default dispatch;\n","export {default as drag} from \"./src/drag\";\nexport {default as dragDisable, yesdrag as dragEnable} from \"./src/nodrag\";\n","export default function(x) {\n  return function() {\n    return x;\n  };\n}\n","import {dispatch} from \"d3-dispatch\";\nimport {event, customEvent, select, mouse, touch} from \"d3-selection\";\nimport nodrag, {yesdrag} from \"./nodrag\";\nimport noevent, {nopropagation} from \"./noevent\";\nimport constant from \"./constant\";\nimport DragEvent from \"./event\";\n\n// Ignore right-click, since that should open the context menu.\nfunction defaultFilter() {\n  return !event.button;\n}\n\nfunction defaultContainer() {\n  return this.parentNode;\n}\n\nfunction defaultSubject(d) {\n  return d == null ? {x: event.x, y: event.y} : d;\n}\n\nfunction defaultTouchable() {\n  return \"ontouchstart\" in this;\n}\n\nexport default function() {\n  var filter = defaultFilter,\n      container = defaultContainer,\n      subject = defaultSubject,\n      touchable = defaultTouchable,\n      gestures = {},\n      listeners = dispatch(\"start\", \"drag\", \"end\"),\n      active = 0,\n      mousedownx,\n      mousedowny,\n      mousemoving,\n      touchending,\n      clickDistance2 = 0;\n\n  function drag(selection) {\n    selection\n        .on(\"mousedown.drag\", mousedowned)\n      .filter(touchable)\n        .on(\"touchstart.drag\", touchstarted)\n        .on(\"touchmove.drag\", touchmoved)\n        .on(\"touchend.drag touchcancel.drag\", touchended)\n        .style(\"touch-action\", \"none\")\n        .style(\"-webkit-tap-highlight-color\", \"rgba(0,0,0,0)\");\n  }\n\n  function mousedowned() {\n    if (touchending || !filter.apply(this, arguments)) return;\n    var gesture = beforestart(\"mouse\", container.apply(this, arguments), mouse, this, arguments);\n    if (!gesture) return;\n    select(event.view).on(\"mousemove.drag\", mousemoved, true).on(\"mouseup.drag\", mouseupped, true);\n    nodrag(event.view);\n    nopropagation();\n    mousemoving = false;\n    mousedownx = event.clientX;\n    mousedowny = event.clientY;\n    gesture(\"start\");\n  }\n\n  function mousemoved() {\n    noevent();\n    if (!mousemoving) {\n      var dx = event.clientX - mousedownx, dy = event.clientY - mousedowny;\n      mousemoving = dx * dx + dy * dy > clickDistance2;\n    }\n    gestures.mouse(\"drag\");\n  }\n\n  function mouseupped() {\n    select(event.view).on(\"mousemove.drag mouseup.drag\", null);\n    yesdrag(event.view, mousemoving);\n    noevent();\n    gestures.mouse(\"end\");\n  }\n\n  function touchstarted() {\n    if (!filter.apply(this, arguments)) return;\n    var touches = event.changedTouches,\n        c = container.apply(this, arguments),\n        n = touches.length, i, gesture;\n\n    for (i = 0; i < n; ++i) {\n      if (gesture = beforestart(touches[i].identifier, c, touch, this, arguments)) {\n        nopropagation();\n        gesture(\"start\");\n      }\n    }\n  }\n\n  function touchmoved() {\n    var touches = event.changedTouches,\n        n = touches.length, i, gesture;\n\n    for (i = 0; i < n; ++i) {\n      if (gesture = gestures[touches[i].identifier]) {\n        noevent();\n        gesture(\"drag\");\n      }\n    }\n  }\n\n  function touchended() {\n    var touches = event.changedTouches,\n        n = touches.length, i, gesture;\n\n    if (touchending) clearTimeout(touchending);\n    touchending = setTimeout(function() { touchending = null; }, 500); // Ghost clicks are delayed!\n    for (i = 0; i < n; ++i) {\n      if (gesture = gestures[touches[i].identifier]) {\n        nopropagation();\n        gesture(\"end\");\n      }\n    }\n  }\n\n  function beforestart(id, container, point, that, args) {\n    var p = point(container, id), s, dx, dy,\n        sublisteners = listeners.copy();\n\n    if (!customEvent(new DragEvent(drag, \"beforestart\", s, id, active, p[0], p[1], 0, 0, sublisteners), function() {\n      if ((event.subject = s = subject.apply(that, args)) == null) return false;\n      dx = s.x - p[0] || 0;\n      dy = s.y - p[1] || 0;\n      return true;\n    })) return;\n\n    return function gesture(type) {\n      var p0 = p, n;\n      switch (type) {\n        case \"start\": gestures[id] = gesture, n = active++; break;\n        case \"end\": delete gestures[id], --active; // nobreak\n        case \"drag\": p = point(container, id), n = active; break;\n      }\n      customEvent(new DragEvent(drag, type, s, id, n, p[0] + dx, p[1] + dy, p[0] - p0[0], p[1] - p0[1], sublisteners), sublisteners.apply, sublisteners, [type, that, args]);\n    };\n  }\n\n  drag.filter = function(_) {\n    return arguments.length ? (filter = typeof _ === \"function\" ? _ : constant(!!_), drag) : filter;\n  };\n\n  drag.container = function(_) {\n    return arguments.length ? (container = typeof _ === \"function\" ? _ : constant(_), drag) : container;\n  };\n\n  drag.subject = function(_) {\n    return arguments.length ? (subject = typeof _ === \"function\" ? _ : constant(_), drag) : subject;\n  };\n\n  drag.touchable = function(_) {\n    return arguments.length ? (touchable = typeof _ === \"function\" ? _ : constant(!!_), drag) : touchable;\n  };\n\n  drag.on = function() {\n    var value = listeners.on.apply(listeners, arguments);\n    return value === listeners ? drag : value;\n  };\n\n  drag.clickDistance = function(_) {\n    return arguments.length ? (clickDistance2 = (_ = +_) * _, drag) : Math.sqrt(clickDistance2);\n  };\n\n  return drag;\n}\n","export default function DragEvent(target, type, subject, id, active, x, y, dx, dy, dispatch) {\n  this.target = target;\n  this.type = type;\n  this.subject = subject;\n  this.identifier = id;\n  this.active = active;\n  this.x = x;\n  this.y = y;\n  this.dx = dx;\n  this.dy = dy;\n  this._ = dispatch;\n}\n\nDragEvent.prototype.on = function() {\n  var value = this._.on.apply(this._, arguments);\n  return value === this._ ? this : value;\n};\n","import {select} from \"d3-selection\";\nimport noevent from \"./noevent\";\n\nexport default function(view) {\n  var root = view.document.documentElement,\n      selection = select(view).on(\"dragstart.drag\", noevent, true);\n  if (\"onselectstart\" in root) {\n    selection.on(\"selectstart.drag\", noevent, true);\n  } else {\n    root.__noselect = root.style.MozUserSelect;\n    root.style.MozUserSelect = \"none\";\n  }\n}\n\nexport function yesdrag(view, noclick) {\n  var root = view.document.documentElement,\n      selection = select(view).on(\"dragstart.drag\", null);\n  if (noclick) {\n    selection.on(\"click.drag\", noevent, true);\n    setTimeout(function() { selection.on(\"click.drag\", null); }, 0);\n  }\n  if (\"onselectstart\" in root) {\n    selection.on(\"selectstart.drag\", null);\n  } else {\n    root.style.MozUserSelect = root.__noselect;\n    delete root.__noselect;\n  }\n}\n","import {event} from \"d3-selection\";\n\nexport function nopropagation() {\n  event.stopImmediatePropagation();\n}\n\nexport default function() {\n  event.preventDefault();\n  event.stopImmediatePropagation();\n}\n","export {\n  linear as easeLinear\n} from \"./src/linear\";\n\nexport {\n  quadInOut as easeQuad,\n  quadIn as easeQuadIn,\n  quadOut as easeQuadOut,\n  quadInOut as easeQuadInOut\n} from \"./src/quad\";\n\nexport {\n  cubicInOut as easeCubic,\n  cubicIn as easeCubicIn,\n  cubicOut as easeCubicOut,\n  cubicInOut as easeCubicInOut\n} from \"./src/cubic\";\n\nexport {\n  polyInOut as easePoly,\n  polyIn as easePolyIn,\n  polyOut as easePolyOut,\n  polyInOut as easePolyInOut\n} from \"./src/poly\";\n\nexport {\n  sinInOut as easeSin,\n  sinIn as easeSinIn,\n  sinOut as easeSinOut,\n  sinInOut as easeSinInOut\n} from \"./src/sin\";\n\nexport {\n  expInOut as easeExp,\n  expIn as easeExpIn,\n  expOut as easeExpOut,\n  expInOut as easeExpInOut\n} from \"./src/exp\";\n\nexport {\n  circleInOut as easeCircle,\n  circleIn as easeCircleIn,\n  circleOut as easeCircleOut,\n  circleInOut as easeCircleInOut\n} from \"./src/circle\";\n\nexport {\n  bounceOut as easeBounce,\n  bounceIn as easeBounceIn,\n  bounceOut as easeBounceOut,\n  bounceInOut as easeBounceInOut\n} from \"./src/bounce\";\n\nexport {\n  backInOut as easeBack,\n  backIn as easeBackIn,\n  backOut as easeBackOut,\n  backInOut as easeBackInOut\n} from \"./src/back\";\n\nexport {\n  elasticOut as easeElastic,\n  elasticIn as easeElasticIn,\n  elasticOut as easeElasticOut,\n  elasticInOut as easeElasticInOut\n} from \"./src/elastic\";\n","var overshoot = 1.70158;\n\nexport var backIn = (function custom(s) {\n  s = +s;\n\n  function backIn(t) {\n    return t * t * ((s + 1) * t - s);\n  }\n\n  backIn.overshoot = custom;\n\n  return backIn;\n})(overshoot);\n\nexport var backOut = (function custom(s) {\n  s = +s;\n\n  function backOut(t) {\n    return --t * t * ((s + 1) * t + s) + 1;\n  }\n\n  backOut.overshoot = custom;\n\n  return backOut;\n})(overshoot);\n\nexport var backInOut = (function custom(s) {\n  s = +s;\n\n  function backInOut(t) {\n    return ((t *= 2) < 1 ? t * t * ((s + 1) * t - s) : (t -= 2) * t * ((s + 1) * t + s) + 2) / 2;\n  }\n\n  backInOut.overshoot = custom;\n\n  return backInOut;\n})(overshoot);\n","var b1 = 4 / 11,\n    b2 = 6 / 11,\n    b3 = 8 / 11,\n    b4 = 3 / 4,\n    b5 = 9 / 11,\n    b6 = 10 / 11,\n    b7 = 15 / 16,\n    b8 = 21 / 22,\n    b9 = 63 / 64,\n    b0 = 1 / b1 / b1;\n\nexport function bounceIn(t) {\n  return 1 - bounceOut(1 - t);\n}\n\nexport function bounceOut(t) {\n  return (t = +t) < b1 ? b0 * t * t : t < b3 ? b0 * (t -= b2) * t + b4 : t < b6 ? b0 * (t -= b5) * t + b7 : b0 * (t -= b8) * t + b9;\n}\n\nexport function bounceInOut(t) {\n  return ((t *= 2) <= 1 ? 1 - bounceOut(1 - t) : bounceOut(t - 1) + 1) / 2;\n}\n","export function circleIn(t) {\n  return 1 - Math.sqrt(1 - t * t);\n}\n\nexport function circleOut(t) {\n  return Math.sqrt(1 - --t * t);\n}\n\nexport function circleInOut(t) {\n  return ((t *= 2) <= 1 ? 1 - Math.sqrt(1 - t * t) : Math.sqrt(1 - (t -= 2) * t) + 1) / 2;\n}\n","export function cubicIn(t) {\n  return t * t * t;\n}\n\nexport function cubicOut(t) {\n  return --t * t * t + 1;\n}\n\nexport function cubicInOut(t) {\n  return ((t *= 2) <= 1 ? t * t * t : (t -= 2) * t * t + 2) / 2;\n}\n","var tau = 2 * Math.PI,\n    amplitude = 1,\n    period = 0.3;\n\nexport var elasticIn = (function custom(a, p) {\n  var s = Math.asin(1 / (a = Math.max(1, a))) * (p /= tau);\n\n  function elasticIn(t) {\n    return a * Math.pow(2, 10 * --t) * Math.sin((s - t) / p);\n  }\n\n  elasticIn.amplitude = function(a) { return custom(a, p * tau); };\n  elasticIn.period = function(p) { return custom(a, p); };\n\n  return elasticIn;\n})(amplitude, period);\n\nexport var elasticOut = (function custom(a, p) {\n  var s = Math.asin(1 / (a = Math.max(1, a))) * (p /= tau);\n\n  function elasticOut(t) {\n    return 1 - a * Math.pow(2, -10 * (t = +t)) * Math.sin((t + s) / p);\n  }\n\n  elasticOut.amplitude = function(a) { return custom(a, p * tau); };\n  elasticOut.period = function(p) { return custom(a, p); };\n\n  return elasticOut;\n})(amplitude, period);\n\nexport var elasticInOut = (function custom(a, p) {\n  var s = Math.asin(1 / (a = Math.max(1, a))) * (p /= tau);\n\n  function elasticInOut(t) {\n    return ((t = t * 2 - 1) < 0\n        ? a * Math.pow(2, 10 * t) * Math.sin((s - t) / p)\n        : 2 - a * Math.pow(2, -10 * t) * Math.sin((s + t) / p)) / 2;\n  }\n\n  elasticInOut.amplitude = function(a) { return custom(a, p * tau); };\n  elasticInOut.period = function(p) { return custom(a, p); };\n\n  return elasticInOut;\n})(amplitude, period);\n","export function expIn(t) {\n  return Math.pow(2, 10 * t - 10);\n}\n\nexport function expOut(t) {\n  return 1 - Math.pow(2, -10 * t);\n}\n\nexport function expInOut(t) {\n  return ((t *= 2) <= 1 ? Math.pow(2, 10 * t - 10) : 2 - Math.pow(2, 10 - 10 * t)) / 2;\n}\n","export function linear(t) {\n  return +t;\n}\n","var exponent = 3;\n\nexport var polyIn = (function custom(e) {\n  e = +e;\n\n  function polyIn(t) {\n    return Math.pow(t, e);\n  }\n\n  polyIn.exponent = custom;\n\n  return polyIn;\n})(exponent);\n\nexport var polyOut = (function custom(e) {\n  e = +e;\n\n  function polyOut(t) {\n    return 1 - Math.pow(1 - t, e);\n  }\n\n  polyOut.exponent = custom;\n\n  return polyOut;\n})(exponent);\n\nexport var polyInOut = (function custom(e) {\n  e = +e;\n\n  function polyInOut(t) {\n    return ((t *= 2) <= 1 ? Math.pow(t, e) : 2 - Math.pow(2 - t, e)) / 2;\n  }\n\n  polyInOut.exponent = custom;\n\n  return polyInOut;\n})(exponent);\n","export function quadIn(t) {\n  return t * t;\n}\n\nexport function quadOut(t) {\n  return t * (2 - t);\n}\n\nexport function quadInOut(t) {\n  return ((t *= 2) <= 1 ? t * t : --t * (2 - t) + 1) / 2;\n}\n","var pi = Math.PI,\n    halfPi = pi / 2;\n\nexport function sinIn(t) {\n  return 1 - Math.cos(t * halfPi);\n}\n\nexport function sinOut(t) {\n  return Math.sin(t * halfPi);\n}\n\nexport function sinInOut(t) {\n  return (1 - Math.cos(pi * t)) / 2;\n}\n","export {default as formatDefaultLocale, format, formatPrefix} from \"./src/defaultLocale\";\nexport {default as formatLocale} from \"./src/locale\";\nexport {default as formatSpecifier} from \"./src/formatSpecifier\";\nexport {default as precisionFixed} from \"./src/precisionFixed\";\nexport {default as precisionPrefix} from \"./src/precisionPrefix\";\nexport {default as precisionRound} from \"./src/precisionRound\";\n","import formatLocale from \"./locale\";\n\nvar locale;\nexport var format;\nexport var formatPrefix;\n\ndefaultLocale({\n  decimal: \".\",\n  thousands: \",\",\n  grouping: [3],\n  currency: [\"$\", \"\"]\n});\n\nexport default function defaultLocale(definition) {\n  locale = formatLocale(definition);\n  format = locale.format;\n  formatPrefix = locale.formatPrefix;\n  return locale;\n}\n","import formatDecimal from \"./formatDecimal\";\n\nexport default function(x) {\n  return x = formatDecimal(Math.abs(x)), x ? x[1] : NaN;\n}\n","// Computes the decimal coefficient and exponent of the specified number x with\n// significant digits p, where x is positive and p is in [1, 21] or undefined.\n// For example, formatDecimal(1.23) returns [\"123\", 0].\nexport default function(x, p) {\n  if ((i = (x = p ? x.toExponential(p - 1) : x.toExponential()).indexOf(\"e\")) < 0) return null; // NaN, Infinity\n  var i, coefficient = x.slice(0, i);\n\n  // The string returned by toExponential either has the form \\d\\.\\d+e[-+]\\d+\n  // (e.g., 1.2e+3) or the form \\de[-+]\\d+ (e.g., 1e+3).\n  return [\n    coefficient.length > 1 ? coefficient[0] + coefficient.slice(2) : coefficient,\n    +x.slice(i + 1)\n  ];\n}\n","export default function(grouping, thousands) {\n  return function(value, width) {\n    var i = value.length,\n        t = [],\n        j = 0,\n        g = grouping[0],\n        length = 0;\n\n    while (i > 0 && g > 0) {\n      if (length + g + 1 > width) g = Math.max(1, width - length);\n      t.push(value.substring(i -= g, i + g));\n      if ((length += g + 1) > width) break;\n      g = grouping[j = (j + 1) % grouping.length];\n    }\n\n    return t.reverse().join(thousands);\n  };\n}\n","export default function(numerals) {\n  return function(value) {\n    return value.replace(/[0-9]/g, function(i) {\n      return numerals[+i];\n    });\n  };\n}\n","import formatDecimal from \"./formatDecimal\";\n\nexport var prefixExponent;\n\nexport default function(x, p) {\n  var d = formatDecimal(x, p);\n  if (!d) return x + \"\";\n  var coefficient = d[0],\n      exponent = d[1],\n      i = exponent - (prefixExponent = Math.max(-8, Math.min(8, Math.floor(exponent / 3))) * 3) + 1,\n      n = coefficient.length;\n  return i === n ? coefficient\n      : i > n ? coefficient + new Array(i - n + 1).join(\"0\")\n      : i > 0 ? coefficient.slice(0, i) + \".\" + coefficient.slice(i)\n      : \"0.\" + new Array(1 - i).join(\"0\") + formatDecimal(x, Math.max(0, p + i - 1))[0]; // less than 1y!\n}\n","import formatDecimal from \"./formatDecimal\";\n\nexport default function(x, p) {\n  var d = formatDecimal(x, p);\n  if (!d) return x + \"\";\n  var coefficient = d[0],\n      exponent = d[1];\n  return exponent < 0 ? \"0.\" + new Array(-exponent).join(\"0\") + coefficient\n      : coefficient.length > exponent + 1 ? coefficient.slice(0, exponent + 1) + \".\" + coefficient.slice(exponent + 1)\n      : coefficient + new Array(exponent - coefficient.length + 2).join(\"0\");\n}\n","// [[fill]align][sign][symbol][0][width][,][.precision][~][type]\nvar re = /^(?:(.)?([<>=^]))?([+\\-\\( ])?([$#])?(0)?(\\d+)?(,)?(\\.\\d+)?(~)?([a-z%])?$/i;\n\nexport default function formatSpecifier(specifier) {\n  return new FormatSpecifier(specifier);\n}\n\nformatSpecifier.prototype = FormatSpecifier.prototype; // instanceof\n\nfunction FormatSpecifier(specifier) {\n  if (!(match = re.exec(specifier))) throw new Error(\"invalid format: \" + specifier);\n  var match;\n  this.fill = match[1] || \" \";\n  this.align = match[2] || \">\";\n  this.sign = match[3] || \"-\";\n  this.symbol = match[4] || \"\";\n  this.zero = !!match[5];\n  this.width = match[6] && +match[6];\n  this.comma = !!match[7];\n  this.precision = match[8] && +match[8].slice(1);\n  this.trim = !!match[9];\n  this.type = match[10] || \"\";\n}\n\nFormatSpecifier.prototype.toString = function() {\n  return this.fill\n      + this.align\n      + this.sign\n      + this.symbol\n      + (this.zero ? \"0\" : \"\")\n      + (this.width == null ? \"\" : Math.max(1, this.width | 0))\n      + (this.comma ? \",\" : \"\")\n      + (this.precision == null ? \"\" : \".\" + Math.max(0, this.precision | 0))\n      + (this.trim ? \"~\" : \"\")\n      + this.type;\n};\n","// Trims insignificant zeros, e.g., replaces 1.2000k with 1.2k.\nexport default function(s) {\n  out: for (var n = s.length, i = 1, i0 = -1, i1; i < n; ++i) {\n    switch (s[i]) {\n      case \".\": i0 = i1 = i; break;\n      case \"0\": if (i0 === 0) i0 = i; i1 = i; break;\n      default: if (i0 > 0) { if (!+s[i]) break out; i0 = 0; } break;\n    }\n  }\n  return i0 > 0 ? s.slice(0, i0) + s.slice(i1 + 1) : s;\n}\n","import formatPrefixAuto from \"./formatPrefixAuto\";\nimport formatRounded from \"./formatRounded\";\n\nexport default {\n  \"%\": function(x, p) { return (x * 100).toFixed(p); },\n  \"b\": function(x) { return Math.round(x).toString(2); },\n  \"c\": function(x) { return x + \"\"; },\n  \"d\": function(x) { return Math.round(x).toString(10); },\n  \"e\": function(x, p) { return x.toExponential(p); },\n  \"f\": function(x, p) { return x.toFixed(p); },\n  \"g\": function(x, p) { return x.toPrecision(p); },\n  \"o\": function(x) { return Math.round(x).toString(8); },\n  \"p\": function(x, p) { return formatRounded(x * 100, p); },\n  \"r\": formatRounded,\n  \"s\": formatPrefixAuto,\n  \"X\": function(x) { return Math.round(x).toString(16).toUpperCase(); },\n  \"x\": function(x) { return Math.round(x).toString(16); }\n};\n","export default function(x) {\n  return x;\n}\n","import exponent from \"./exponent\";\nimport formatGroup from \"./formatGroup\";\nimport formatNumerals from \"./formatNumerals\";\nimport formatSpecifier from \"./formatSpecifier\";\nimport formatTrim from \"./formatTrim\";\nimport formatTypes from \"./formatTypes\";\nimport {prefixExponent} from \"./formatPrefixAuto\";\nimport identity from \"./identity\";\n\nvar prefixes = [\"y\",\"z\",\"a\",\"f\",\"p\",\"n\",\"\",\"m\",\"\",\"k\",\"M\",\"G\",\"T\",\"P\",\"E\",\"Z\",\"Y\"];\n\nexport default function(locale) {\n  var group = locale.grouping && locale.thousands ? formatGroup(locale.grouping, locale.thousands) : identity,\n      currency = locale.currency,\n      decimal = locale.decimal,\n      numerals = locale.numerals ? formatNumerals(locale.numerals) : identity,\n      percent = locale.percent || \"%\";\n\n  function newFormat(specifier) {\n    specifier = formatSpecifier(specifier);\n\n    var fill = specifier.fill,\n        align = specifier.align,\n        sign = specifier.sign,\n        symbol = specifier.symbol,\n        zero = specifier.zero,\n        width = specifier.width,\n        comma = specifier.comma,\n        precision = specifier.precision,\n        trim = specifier.trim,\n        type = specifier.type;\n\n    // The \"n\" type is an alias for \",g\".\n    if (type === \"n\") comma = true, type = \"g\";\n\n    // The \"\" type, and any invalid type, is an alias for \".12~g\".\n    else if (!formatTypes[type]) precision == null && (precision = 12), trim = true, type = \"g\";\n\n    // If zero fill is specified, padding goes after sign and before digits.\n    if (zero || (fill === \"0\" && align === \"=\")) zero = true, fill = \"0\", align = \"=\";\n\n    // Compute the prefix and suffix.\n    // For SI-prefix, the suffix is lazily computed.\n    var prefix = symbol === \"$\" ? currency[0] : symbol === \"#\" && /[boxX]/.test(type) ? \"0\" + type.toLowerCase() : \"\",\n        suffix = symbol === \"$\" ? currency[1] : /[%p]/.test(type) ? percent : \"\";\n\n    // What format function should we use?\n    // Is this an integer type?\n    // Can this type generate exponential notation?\n    var formatType = formatTypes[type],\n        maybeSuffix = /[defgprs%]/.test(type);\n\n    // Set the default precision if not specified,\n    // or clamp the specified precision to the supported range.\n    // For significant precision, it must be in [1, 21].\n    // For fixed precision, it must be in [0, 20].\n    precision = precision == null ? 6\n        : /[gprs]/.test(type) ? Math.max(1, Math.min(21, precision))\n        : Math.max(0, Math.min(20, precision));\n\n    function format(value) {\n      var valuePrefix = prefix,\n          valueSuffix = suffix,\n          i, n, c;\n\n      if (type === \"c\") {\n        valueSuffix = formatType(value) + valueSuffix;\n        value = \"\";\n      } else {\n        value = +value;\n\n        // Perform the initial formatting.\n        var valueNegative = value < 0;\n        value = formatType(Math.abs(value), precision);\n\n        // Trim insignificant zeros.\n        if (trim) value = formatTrim(value);\n\n        // If a negative value rounds to zero during formatting, treat as positive.\n        if (valueNegative && +value === 0) valueNegative = false;\n\n        // Compute the prefix and suffix.\n        valuePrefix = (valueNegative ? (sign === \"(\" ? sign : \"-\") : sign === \"-\" || sign === \"(\" ? \"\" : sign) + valuePrefix;\n        valueSuffix = (type === \"s\" ? prefixes[8 + prefixExponent / 3] : \"\") + valueSuffix + (valueNegative && sign === \"(\" ? \")\" : \"\");\n\n        // Break the formatted value into the integer value part that can be\n        // grouped, and fractional or exponential suffix part that is not.\n        if (maybeSuffix) {\n          i = -1, n = value.length;\n          while (++i < n) {\n            if (c = value.charCodeAt(i), 48 > c || c > 57) {\n              valueSuffix = (c === 46 ? decimal + value.slice(i + 1) : value.slice(i)) + valueSuffix;\n              value = value.slice(0, i);\n              break;\n            }\n          }\n        }\n      }\n\n      // If the fill character is not \"0\", grouping is applied before padding.\n      if (comma && !zero) value = group(value, Infinity);\n\n      // Compute the padding.\n      var length = valuePrefix.length + value.length + valueSuffix.length,\n          padding = length < width ? new Array(width - length + 1).join(fill) : \"\";\n\n      // If the fill character is \"0\", grouping is applied after padding.\n      if (comma && zero) value = group(padding + value, padding.length ? width - valueSuffix.length : Infinity), padding = \"\";\n\n      // Reconstruct the final output based on the desired alignment.\n      switch (align) {\n        case \"<\": value = valuePrefix + value + valueSuffix + padding; break;\n        case \"=\": value = valuePrefix + padding + value + valueSuffix; break;\n        case \"^\": value = padding.slice(0, length = padding.length >> 1) + valuePrefix + value + valueSuffix + padding.slice(length); break;\n        default: value = padding + valuePrefix + value + valueSuffix; break;\n      }\n\n      return numerals(value);\n    }\n\n    format.toString = function() {\n      return specifier + \"\";\n    };\n\n    return format;\n  }\n\n  function formatPrefix(specifier, value) {\n    var f = newFormat((specifier = formatSpecifier(specifier), specifier.type = \"f\", specifier)),\n        e = Math.max(-8, Math.min(8, Math.floor(exponent(value) / 3))) * 3,\n        k = Math.pow(10, -e),\n        prefix = prefixes[8 + e / 3];\n    return function(value) {\n      return f(k * value) + prefix;\n    };\n  }\n\n  return {\n    format: newFormat,\n    formatPrefix: formatPrefix\n  };\n}\n","import exponent from \"./exponent\";\n\nexport default function(step) {\n  return Math.max(0, -exponent(Math.abs(step)));\n}\n","import exponent from \"./exponent\";\n\nexport default function(step, value) {\n  return Math.max(0, Math.max(-8, Math.min(8, Math.floor(exponent(value) / 3))) * 3 - exponent(Math.abs(step)));\n}\n","import exponent from \"./exponent\";\n\nexport default function(step, max) {\n  step = Math.abs(step), max = Math.abs(max) - step;\n  return Math.max(0, exponent(max) - exponent(step)) + 1;\n}\n","export {default as interpolate} from \"./src/value\";\nexport {default as interpolateArray} from \"./src/array\";\nexport {default as interpolateBasis} from \"./src/basis\";\nexport {default as interpolateBasisClosed} from \"./src/basisClosed\";\nexport {default as interpolateDate} from \"./src/date\";\nexport {default as interpolateNumber} from \"./src/number\";\nexport {default as interpolateObject} from \"./src/object\";\nexport {default as interpolateRound} from \"./src/round\";\nexport {default as interpolateString} from \"./src/string\";\nexport {interpolateTransformCss, interpolateTransformSvg} from \"./src/transform/index\";\nexport {default as interpolateZoom} from \"./src/zoom\";\nexport {default as interpolateRgb, rgbBasis as interpolateRgbBasis, rgbBasisClosed as interpolateRgbBasisClosed} from \"./src/rgb\";\nexport {default as interpolateHsl, hslLong as interpolateHslLong} from \"./src/hsl\";\nexport {default as interpolateLab} from \"./src/lab\";\nexport {default as interpolateHcl, hclLong as interpolateHclLong} from \"./src/hcl\";\nexport {default as interpolateCubehelix, cubehelixLong as interpolateCubehelixLong} from \"./src/cubehelix\";\nexport {default as piecewise} from \"./src/piecewise\";\nexport {default as quantize} from \"./src/quantize\";\n","import value from \"./value\";\n\nexport default function(a, b) {\n  var nb = b ? b.length : 0,\n      na = a ? Math.min(nb, a.length) : 0,\n      x = new Array(na),\n      c = new Array(nb),\n      i;\n\n  for (i = 0; i < na; ++i) x[i] = value(a[i], b[i]);\n  for (; i < nb; ++i) c[i] = b[i];\n\n  return function(t) {\n    for (i = 0; i < na; ++i) c[i] = x[i](t);\n    return c;\n  };\n}\n","export function basis(t1, v0, v1, v2, v3) {\n  var t2 = t1 * t1, t3 = t2 * t1;\n  return ((1 - 3 * t1 + 3 * t2 - t3) * v0\n      + (4 - 6 * t2 + 3 * t3) * v1\n      + (1 + 3 * t1 + 3 * t2 - 3 * t3) * v2\n      + t3 * v3) / 6;\n}\n\nexport default function(values) {\n  var n = values.length - 1;\n  return function(t) {\n    var i = t <= 0 ? (t = 0) : t >= 1 ? (t = 1, n - 1) : Math.floor(t * n),\n        v1 = values[i],\n        v2 = values[i + 1],\n        v0 = i > 0 ? values[i - 1] : 2 * v1 - v2,\n        v3 = i < n - 1 ? values[i + 2] : 2 * v2 - v1;\n    return basis((t - i / n) * n, v0, v1, v2, v3);\n  };\n}\n","import {basis} from \"./basis\";\n\nexport default function(values) {\n  var n = values.length;\n  return function(t) {\n    var i = Math.floor(((t %= 1) < 0 ? ++t : t) * n),\n        v0 = values[(i + n - 1) % n],\n        v1 = values[i % n],\n        v2 = values[(i + 1) % n],\n        v3 = values[(i + 2) % n];\n    return basis((t - i / n) * n, v0, v1, v2, v3);\n  };\n}\n","import constant from \"./constant\";\n\nfunction linear(a, d) {\n  return function(t) {\n    return a + t * d;\n  };\n}\n\nfunction exponential(a, b, y) {\n  return a = Math.pow(a, y), b = Math.pow(b, y) - a, y = 1 / y, function(t) {\n    return Math.pow(a + t * b, y);\n  };\n}\n\nexport function hue(a, b) {\n  var d = b - a;\n  return d ? linear(a, d > 180 || d < -180 ? d - 360 * Math.round(d / 360) : d) : constant(isNaN(a) ? b : a);\n}\n\nexport function gamma(y) {\n  return (y = +y) === 1 ? nogamma : function(a, b) {\n    return b - a ? exponential(a, b, y) : constant(isNaN(a) ? b : a);\n  };\n}\n\nexport default function nogamma(a, b) {\n  var d = b - a;\n  return d ? linear(a, d) : constant(isNaN(a) ? b : a);\n}\n","export default function(x) {\n  return function() {\n    return x;\n  };\n}\n","import {cubehelix as colorCubehelix} from \"d3-color\";\nimport color, {hue} from \"./color\";\n\nfunction cubehelix(hue) {\n  return (function cubehelixGamma(y) {\n    y = +y;\n\n    function cubehelix(start, end) {\n      var h = hue((start = colorCubehelix(start)).h, (end = colorCubehelix(end)).h),\n          s = color(start.s, end.s),\n          l = color(start.l, end.l),\n          opacity = color(start.opacity, end.opacity);\n      return function(t) {\n        start.h = h(t);\n        start.s = s(t);\n        start.l = l(Math.pow(t, y));\n        start.opacity = opacity(t);\n        return start + \"\";\n      };\n    }\n\n    cubehelix.gamma = cubehelixGamma;\n\n    return cubehelix;\n  })(1);\n}\n\nexport default cubehelix(hue);\nexport var cubehelixLong = cubehelix(color);\n","export default function(a, b) {\n  var d = new Date;\n  return a = +a, b -= a, function(t) {\n    return d.setTime(a + b * t), d;\n  };\n}\n","import {hcl as colorHcl} from \"d3-color\";\nimport color, {hue} from \"./color\";\n\nfunction hcl(hue) {\n  return function(start, end) {\n    var h = hue((start = colorHcl(start)).h, (end = colorHcl(end)).h),\n        c = color(start.c, end.c),\n        l = color(start.l, end.l),\n        opacity = color(start.opacity, end.opacity);\n    return function(t) {\n      start.h = h(t);\n      start.c = c(t);\n      start.l = l(t);\n      start.opacity = opacity(t);\n      return start + \"\";\n    };\n  }\n}\n\nexport default hcl(hue);\nexport var hclLong = hcl(color);\n","import {hsl as colorHsl} from \"d3-color\";\nimport color, {hue} from \"./color\";\n\nfunction hsl(hue) {\n  return function(start, end) {\n    var h = hue((start = colorHsl(start)).h, (end = colorHsl(end)).h),\n        s = color(start.s, end.s),\n        l = color(start.l, end.l),\n        opacity = color(start.opacity, end.opacity);\n    return function(t) {\n      start.h = h(t);\n      start.s = s(t);\n      start.l = l(t);\n      start.opacity = opacity(t);\n      return start + \"\";\n    };\n  }\n}\n\nexport default hsl(hue);\nexport var hslLong = hsl(color);\n","import {lab as colorLab} from \"d3-color\";\nimport color from \"./color\";\n\nexport default function lab(start, end) {\n  var l = color((start = colorLab(start)).l, (end = colorLab(end)).l),\n      a = color(start.a, end.a),\n      b = color(start.b, end.b),\n      opacity = color(start.opacity, end.opacity);\n  return function(t) {\n    start.l = l(t);\n    start.a = a(t);\n    start.b = b(t);\n    start.opacity = opacity(t);\n    return start + \"\";\n  };\n}\n","export default function(a, b) {\n  return a = +a, b -= a, function(t) {\n    return a + b * t;\n  };\n}\n","import value from \"./value\";\n\nexport default function(a, b) {\n  var i = {},\n      c = {},\n      k;\n\n  if (a === null || typeof a !== \"object\") a = {};\n  if (b === null || typeof b !== \"object\") b = {};\n\n  for (k in b) {\n    if (k in a) {\n      i[k] = value(a[k], b[k]);\n    } else {\n      c[k] = b[k];\n    }\n  }\n\n  return function(t) {\n    for (k in i) c[k] = i[k](t);\n    return c;\n  };\n}\n","export default function piecewise(interpolate, values) {\n  var i = 0, n = values.length - 1, v = values[0], I = new Array(n < 0 ? 0 : n);\n  while (i < n) I[i] = interpolate(v, v = values[++i]);\n  return function(t) {\n    var i = Math.max(0, Math.min(n - 1, Math.floor(t *= n)));\n    return I[i](t - i);\n  };\n}\n","export default function(interpolator, n) {\n  var samples = new Array(n);\n  for (var i = 0; i < n; ++i) samples[i] = interpolator(i / (n - 1));\n  return samples;\n}\n","import {rgb as colorRgb} from \"d3-color\";\nimport basis from \"./basis\";\nimport basisClosed from \"./basisClosed\";\nimport nogamma, {gamma} from \"./color\";\n\nexport default (function rgbGamma(y) {\n  var color = gamma(y);\n\n  function rgb(start, end) {\n    var r = color((start = colorRgb(start)).r, (end = colorRgb(end)).r),\n        g = color(start.g, end.g),\n        b = color(start.b, end.b),\n        opacity = nogamma(start.opacity, end.opacity);\n    return function(t) {\n      start.r = r(t);\n      start.g = g(t);\n      start.b = b(t);\n      start.opacity = opacity(t);\n      return start + \"\";\n    };\n  }\n\n  rgb.gamma = rgbGamma;\n\n  return rgb;\n})(1);\n\nfunction rgbSpline(spline) {\n  return function(colors) {\n    var n = colors.length,\n        r = new Array(n),\n        g = new Array(n),\n        b = new Array(n),\n        i, color;\n    for (i = 0; i < n; ++i) {\n      color = colorRgb(colors[i]);\n      r[i] = color.r || 0;\n      g[i] = color.g || 0;\n      b[i] = color.b || 0;\n    }\n    r = spline(r);\n    g = spline(g);\n    b = spline(b);\n    color.opacity = 1;\n    return function(t) {\n      color.r = r(t);\n      color.g = g(t);\n      color.b = b(t);\n      return color + \"\";\n    };\n  };\n}\n\nexport var rgbBasis = rgbSpline(basis);\nexport var rgbBasisClosed = rgbSpline(basisClosed);\n","export default function(a, b) {\n  return a = +a, b -= a, function(t) {\n    return Math.round(a + b * t);\n  };\n}\n","import number from \"./number\";\n\nvar reA = /[-+]?(?:\\d+\\.?\\d*|\\.?\\d+)(?:[eE][-+]?\\d+)?/g,\n    reB = new RegExp(reA.source, \"g\");\n\nfunction zero(b) {\n  return function() {\n    return b;\n  };\n}\n\nfunction one(b) {\n  return function(t) {\n    return b(t) + \"\";\n  };\n}\n\nexport default function(a, b) {\n  var bi = reA.lastIndex = reB.lastIndex = 0, // scan index for next number in b\n      am, // current match in a\n      bm, // current match in b\n      bs, // string preceding current number in b, if any\n      i = -1, // index in s\n      s = [], // string constants and placeholders\n      q = []; // number interpolators\n\n  // Coerce inputs to strings.\n  a = a + \"\", b = b + \"\";\n\n  // Interpolate pairs of numbers in a & b.\n  while ((am = reA.exec(a))\n      && (bm = reB.exec(b))) {\n    if ((bs = bm.index) > bi) { // a string precedes the next number in b\n      bs = b.slice(bi, bs);\n      if (s[i]) s[i] += bs; // coalesce with previous string\n      else s[++i] = bs;\n    }\n    if ((am = am[0]) === (bm = bm[0])) { // numbers in a & b match\n      if (s[i]) s[i] += bm; // coalesce with previous string\n      else s[++i] = bm;\n    } else { // interpolate non-matching numbers\n      s[++i] = null;\n      q.push({i: i, x: number(am, bm)});\n    }\n    bi = reB.lastIndex;\n  }\n\n  // Add remains of b.\n  if (bi < b.length) {\n    bs = b.slice(bi);\n    if (s[i]) s[i] += bs; // coalesce with previous string\n    else s[++i] = bs;\n  }\n\n  // Special optimization for only a single match.\n  // Otherwise, interpolate each of the numbers and rejoin the string.\n  return s.length < 2 ? (q[0]\n      ? one(q[0].x)\n      : zero(b))\n      : (b = q.length, function(t) {\n          for (var i = 0, o; i < b; ++i) s[(o = q[i]).i] = o.x(t);\n          return s.join(\"\");\n        });\n}\n","var degrees = 180 / Math.PI;\n\nexport var identity = {\n  translateX: 0,\n  translateY: 0,\n  rotate: 0,\n  skewX: 0,\n  scaleX: 1,\n  scaleY: 1\n};\n\nexport default function(a, b, c, d, e, f) {\n  var scaleX, scaleY, skewX;\n  if (scaleX = Math.sqrt(a * a + b * b)) a /= scaleX, b /= scaleX;\n  if (skewX = a * c + b * d) c -= a * skewX, d -= b * skewX;\n  if (scaleY = Math.sqrt(c * c + d * d)) c /= scaleY, d /= scaleY, skewX /= scaleY;\n  if (a * d < b * c) a = -a, b = -b, skewX = -skewX, scaleX = -scaleX;\n  return {\n    translateX: e,\n    translateY: f,\n    rotate: Math.atan2(b, a) * degrees,\n    skewX: Math.atan(skewX) * degrees,\n    scaleX: scaleX,\n    scaleY: scaleY\n  };\n}\n","import number from \"../number\";\nimport {parseCss, parseSvg} from \"./parse\";\n\nfunction interpolateTransform(parse, pxComma, pxParen, degParen) {\n\n  function pop(s) {\n    return s.length ? s.pop() + \" \" : \"\";\n  }\n\n  function translate(xa, ya, xb, yb, s, q) {\n    if (xa !== xb || ya !== yb) {\n      var i = s.push(\"translate(\", null, pxComma, null, pxParen);\n      q.push({i: i - 4, x: number(xa, xb)}, {i: i - 2, x: number(ya, yb)});\n    } else if (xb || yb) {\n      s.push(\"translate(\" + xb + pxComma + yb + pxParen);\n    }\n  }\n\n  function rotate(a, b, s, q) {\n    if (a !== b) {\n      if (a - b > 180) b += 360; else if (b - a > 180) a += 360; // shortest path\n      q.push({i: s.push(pop(s) + \"rotate(\", null, degParen) - 2, x: number(a, b)});\n    } else if (b) {\n      s.push(pop(s) + \"rotate(\" + b + degParen);\n    }\n  }\n\n  function skewX(a, b, s, q) {\n    if (a !== b) {\n      q.push({i: s.push(pop(s) + \"skewX(\", null, degParen) - 2, x: number(a, b)});\n    } else if (b) {\n      s.push(pop(s) + \"skewX(\" + b + degParen);\n    }\n  }\n\n  function scale(xa, ya, xb, yb, s, q) {\n    if (xa !== xb || ya !== yb) {\n      var i = s.push(pop(s) + \"scale(\", null, \",\", null, \")\");\n      q.push({i: i - 4, x: number(xa, xb)}, {i: i - 2, x: number(ya, yb)});\n    } else if (xb !== 1 || yb !== 1) {\n      s.push(pop(s) + \"scale(\" + xb + \",\" + yb + \")\");\n    }\n  }\n\n  return function(a, b) {\n    var s = [], // string constants and placeholders\n        q = []; // number interpolators\n    a = parse(a), b = parse(b);\n    translate(a.translateX, a.translateY, b.translateX, b.translateY, s, q);\n    rotate(a.rotate, b.rotate, s, q);\n    skewX(a.skewX, b.skewX, s, q);\n    scale(a.scaleX, a.scaleY, b.scaleX, b.scaleY, s, q);\n    a = b = null; // gc\n    return function(t) {\n      var i = -1, n = q.length, o;\n      while (++i < n) s[(o = q[i]).i] = o.x(t);\n      return s.join(\"\");\n    };\n  };\n}\n\nexport var interpolateTransformCss = interpolateTransform(parseCss, \"px, \", \"px)\", \"deg)\");\nexport var interpolateTransformSvg = interpolateTransform(parseSvg, \", \", \")\", \")\");\n","import decompose, {identity} from \"./decompose\";\n\nvar cssNode,\n    cssRoot,\n    cssView,\n    svgNode;\n\nexport function parseCss(value) {\n  if (value === \"none\") return identity;\n  if (!cssNode) cssNode = document.createElement(\"DIV\"), cssRoot = document.documentElement, cssView = document.defaultView;\n  cssNode.style.transform = value;\n  value = cssView.getComputedStyle(cssRoot.appendChild(cssNode), null).getPropertyValue(\"transform\");\n  cssRoot.removeChild(cssNode);\n  value = value.slice(7, -1).split(\",\");\n  return decompose(+value[0], +value[1], +value[2], +value[3], +value[4], +value[5]);\n}\n\nexport function parseSvg(value) {\n  if (value == null) return identity;\n  if (!svgNode) svgNode = document.createElementNS(\"http://www.w3.org/2000/svg\", \"g\");\n  svgNode.setAttribute(\"transform\", value);\n  if (!(value = svgNode.transform.baseVal.consolidate())) return identity;\n  value = value.matrix;\n  return decompose(value.a, value.b, value.c, value.d, value.e, value.f);\n}\n","import {color} from \"d3-color\";\nimport rgb from \"./rgb\";\nimport array from \"./array\";\nimport date from \"./date\";\nimport number from \"./number\";\nimport object from \"./object\";\nimport string from \"./string\";\nimport constant from \"./constant\";\n\nexport default function(a, b) {\n  var t = typeof b, c;\n  return b == null || t === \"boolean\" ? constant(b)\n      : (t === \"number\" ? number\n      : t === \"string\" ? ((c = color(b)) ? (b = c, rgb) : string)\n      : b instanceof color ? rgb\n      : b instanceof Date ? date\n      : Array.isArray(b) ? array\n      : typeof b.valueOf !== \"function\" && typeof b.toString !== \"function\" || isNaN(b) ? object\n      : number)(a, b);\n}\n","var rho = Math.SQRT2,\n    rho2 = 2,\n    rho4 = 4,\n    epsilon2 = 1e-12;\n\nfunction cosh(x) {\n  return ((x = Math.exp(x)) + 1 / x) / 2;\n}\n\nfunction sinh(x) {\n  return ((x = Math.exp(x)) - 1 / x) / 2;\n}\n\nfunction tanh(x) {\n  return ((x = Math.exp(2 * x)) - 1) / (x + 1);\n}\n\n// p0 = [ux0, uy0, w0]\n// p1 = [ux1, uy1, w1]\nexport default function(p0, p1) {\n  var ux0 = p0[0], uy0 = p0[1], w0 = p0[2],\n      ux1 = p1[0], uy1 = p1[1], w1 = p1[2],\n      dx = ux1 - ux0,\n      dy = uy1 - uy0,\n      d2 = dx * dx + dy * dy,\n      i,\n      S;\n\n  // Special case for u0  u1.\n  if (d2 < epsilon2) {\n    S = Math.log(w1 / w0) / rho;\n    i = function(t) {\n      return [\n        ux0 + t * dx,\n        uy0 + t * dy,\n        w0 * Math.exp(rho * t * S)\n      ];\n    }\n  }\n\n  // General case.\n  else {\n    var d1 = Math.sqrt(d2),\n        b0 = (w1 * w1 - w0 * w0 + rho4 * d2) / (2 * w0 * rho2 * d1),\n        b1 = (w1 * w1 - w0 * w0 - rho4 * d2) / (2 * w1 * rho2 * d1),\n        r0 = Math.log(Math.sqrt(b0 * b0 + 1) - b0),\n        r1 = Math.log(Math.sqrt(b1 * b1 + 1) - b1);\n    S = (r1 - r0) / rho;\n    i = function(t) {\n      var s = t * S,\n          coshr0 = cosh(r0),\n          u = w0 / (rho2 * d1) * (coshr0 * tanh(rho * s + r0) - sinh(r0));\n      return [\n        ux0 + u * dx,\n        uy0 + u * dy,\n        w0 * coshr0 / cosh(rho * s + r0)\n      ];\n    }\n  }\n\n  i.duration = S * 1000;\n\n  return i;\n}\n","var pi = Math.PI,\n    tau = 2 * pi,\n    epsilon = 1e-6,\n    tauEpsilon = tau - epsilon;\n\nfunction Path() {\n  this._x0 = this._y0 = // start of current subpath\n  this._x1 = this._y1 = null; // end of current subpath\n  this._ = \"\";\n}\n\nfunction path() {\n  return new Path;\n}\n\nPath.prototype = path.prototype = {\n  constructor: Path,\n  moveTo: function(x, y) {\n    this._ += \"M\" + (this._x0 = this._x1 = +x) + \",\" + (this._y0 = this._y1 = +y);\n  },\n  closePath: function() {\n    if (this._x1 !== null) {\n      this._x1 = this._x0, this._y1 = this._y0;\n      this._ += \"Z\";\n    }\n  },\n  lineTo: function(x, y) {\n    this._ += \"L\" + (this._x1 = +x) + \",\" + (this._y1 = +y);\n  },\n  quadraticCurveTo: function(x1, y1, x, y) {\n    this._ += \"Q\" + (+x1) + \",\" + (+y1) + \",\" + (this._x1 = +x) + \",\" + (this._y1 = +y);\n  },\n  bezierCurveTo: function(x1, y1, x2, y2, x, y) {\n    this._ += \"C\" + (+x1) + \",\" + (+y1) + \",\" + (+x2) + \",\" + (+y2) + \",\" + (this._x1 = +x) + \",\" + (this._y1 = +y);\n  },\n  arcTo: function(x1, y1, x2, y2, r) {\n    x1 = +x1, y1 = +y1, x2 = +x2, y2 = +y2, r = +r;\n    var x0 = this._x1,\n        y0 = this._y1,\n        x21 = x2 - x1,\n        y21 = y2 - y1,\n        x01 = x0 - x1,\n        y01 = y0 - y1,\n        l01_2 = x01 * x01 + y01 * y01;\n\n    // Is the radius negative? Error.\n    if (r < 0) throw new Error(\"negative radius: \" + r);\n\n    // Is this path empty? Move to (x1,y1).\n    if (this._x1 === null) {\n      this._ += \"M\" + (this._x1 = x1) + \",\" + (this._y1 = y1);\n    }\n\n    // Or, is (x1,y1) coincident with (x0,y0)? Do nothing.\n    else if (!(l01_2 > epsilon)) {}\n\n    // Or, are (x0,y0), (x1,y1) and (x2,y2) collinear?\n    // Equivalently, is (x1,y1) coincident with (x2,y2)?\n    // Or, is the radius zero? Line to (x1,y1).\n    else if (!(Math.abs(y01 * x21 - y21 * x01) > epsilon) || !r) {\n      this._ += \"L\" + (this._x1 = x1) + \",\" + (this._y1 = y1);\n    }\n\n    // Otherwise, draw an arc!\n    else {\n      var x20 = x2 - x0,\n          y20 = y2 - y0,\n          l21_2 = x21 * x21 + y21 * y21,\n          l20_2 = x20 * x20 + y20 * y20,\n          l21 = Math.sqrt(l21_2),\n          l01 = Math.sqrt(l01_2),\n          l = r * Math.tan((pi - Math.acos((l21_2 + l01_2 - l20_2) / (2 * l21 * l01))) / 2),\n          t01 = l / l01,\n          t21 = l / l21;\n\n      // If the start tangent is not coincident with (x0,y0), line to.\n      if (Math.abs(t01 - 1) > epsilon) {\n        this._ += \"L\" + (x1 + t01 * x01) + \",\" + (y1 + t01 * y01);\n      }\n\n      this._ += \"A\" + r + \",\" + r + \",0,0,\" + (+(y01 * x20 > x01 * y20)) + \",\" + (this._x1 = x1 + t21 * x21) + \",\" + (this._y1 = y1 + t21 * y21);\n    }\n  },\n  arc: function(x, y, r, a0, a1, ccw) {\n    x = +x, y = +y, r = +r;\n    var dx = r * Math.cos(a0),\n        dy = r * Math.sin(a0),\n        x0 = x + dx,\n        y0 = y + dy,\n        cw = 1 ^ ccw,\n        da = ccw ? a0 - a1 : a1 - a0;\n\n    // Is the radius negative? Error.\n    if (r < 0) throw new Error(\"negative radius: \" + r);\n\n    // Is this path empty? Move to (x0,y0).\n    if (this._x1 === null) {\n      this._ += \"M\" + x0 + \",\" + y0;\n    }\n\n    // Or, is (x0,y0) not coincident with the previous point? Line to (x0,y0).\n    else if (Math.abs(this._x1 - x0) > epsilon || Math.abs(this._y1 - y0) > epsilon) {\n      this._ += \"L\" + x0 + \",\" + y0;\n    }\n\n    // Is this arc empty? Were done.\n    if (!r) return;\n\n    // Does the angle go the wrong way? Flip the direction.\n    if (da < 0) da = da % tau + tau;\n\n    // Is this a complete circle? Draw two arcs to complete the circle.\n    if (da > tauEpsilon) {\n      this._ += \"A\" + r + \",\" + r + \",0,1,\" + cw + \",\" + (x - dx) + \",\" + (y - dy) + \"A\" + r + \",\" + r + \",0,1,\" + cw + \",\" + (this._x1 = x0) + \",\" + (this._y1 = y0);\n    }\n\n    // Is this arc non-empty? Draw an arc!\n    else if (da > epsilon) {\n      this._ += \"A\" + r + \",\" + r + \",0,\" + (+(da >= pi)) + \",\" + cw + \",\" + (this._x1 = x + r * Math.cos(a1)) + \",\" + (this._y1 = y + r * Math.sin(a1));\n    }\n  },\n  rect: function(x, y, w, h) {\n    this._ += \"M\" + (this._x0 = this._x1 = +x) + \",\" + (this._y0 = this._y1 = +y) + \"h\" + (+w) + \"v\" + (+h) + \"h\" + (-w) + \"Z\";\n  },\n  toString: function() {\n    return this._;\n  }\n};\n\nexport default path;\n","export {default as schemeCategory10} from \"./src/categorical/category10\";\nexport {default as schemeAccent} from \"./src/categorical/Accent\";\nexport {default as schemeDark2} from \"./src/categorical/Dark2\";\nexport {default as schemePaired} from \"./src/categorical/Paired\";\nexport {default as schemePastel1} from \"./src/categorical/Pastel1\";\nexport {default as schemePastel2} from \"./src/categorical/Pastel2\";\nexport {default as schemeSet1} from \"./src/categorical/Set1\";\nexport {default as schemeSet2} from \"./src/categorical/Set2\";\nexport {default as schemeSet3} from \"./src/categorical/Set3\";\nexport {default as interpolateBrBG, scheme as schemeBrBG} from \"./src/diverging/BrBG\";\nexport {default as interpolatePRGn, scheme as schemePRGn} from \"./src/diverging/PRGn\";\nexport {default as interpolatePiYG, scheme as schemePiYG} from \"./src/diverging/PiYG\";\nexport {default as interpolatePuOr, scheme as schemePuOr} from \"./src/diverging/PuOr\";\nexport {default as interpolateRdBu, scheme as schemeRdBu} from \"./src/diverging/RdBu\";\nexport {default as interpolateRdGy, scheme as schemeRdGy} from \"./src/diverging/RdGy\";\nexport {default as interpolateRdYlBu, scheme as schemeRdYlBu} from \"./src/diverging/RdYlBu\";\nexport {default as interpolateRdYlGn, scheme as schemeRdYlGn} from \"./src/diverging/RdYlGn\";\nexport {default as interpolateSpectral, scheme as schemeSpectral} from \"./src/diverging/Spectral\";\nexport {default as interpolateBuGn, scheme as schemeBuGn} from \"./src/sequential-multi/BuGn\";\nexport {default as interpolateBuPu, scheme as schemeBuPu} from \"./src/sequential-multi/BuPu\";\nexport {default as interpolateGnBu, scheme as schemeGnBu} from \"./src/sequential-multi/GnBu\";\nexport {default as interpolateOrRd, scheme as schemeOrRd} from \"./src/sequential-multi/OrRd\";\nexport {default as interpolatePuBuGn, scheme as schemePuBuGn} from \"./src/sequential-multi/PuBuGn\";\nexport {default as interpolatePuBu, scheme as schemePuBu} from \"./src/sequential-multi/PuBu\";\nexport {default as interpolatePuRd, scheme as schemePuRd} from \"./src/sequential-multi/PuRd\";\nexport {default as interpolateRdPu, scheme as schemeRdPu} from \"./src/sequential-multi/RdPu\";\nexport {default as interpolateYlGnBu, scheme as schemeYlGnBu} from \"./src/sequential-multi/YlGnBu\";\nexport {default as interpolateYlGn, scheme as schemeYlGn} from \"./src/sequential-multi/YlGn\";\nexport {default as interpolateYlOrBr, scheme as schemeYlOrBr} from \"./src/sequential-multi/YlOrBr\";\nexport {default as interpolateYlOrRd, scheme as schemeYlOrRd} from \"./src/sequential-multi/YlOrRd\";\nexport {default as interpolateBlues, scheme as schemeBlues} from \"./src/sequential-single/Blues\";\nexport {default as interpolateGreens, scheme as schemeGreens} from \"./src/sequential-single/Greens\";\nexport {default as interpolateGreys, scheme as schemeGreys} from \"./src/sequential-single/Greys\";\nexport {default as interpolatePurples, scheme as schemePurples} from \"./src/sequential-single/Purples\";\nexport {default as interpolateReds, scheme as schemeReds} from \"./src/sequential-single/Reds\";\nexport {default as interpolateOranges, scheme as schemeOranges} from \"./src/sequential-single/Oranges\";\nexport {default as interpolateCubehelixDefault} from \"./src/sequential-multi/cubehelix\";\nexport {default as interpolateRainbow, warm as interpolateWarm, cool as interpolateCool} from \"./src/sequential-multi/rainbow\";\nexport {default as interpolateSinebow} from \"./src/sequential-multi/sinebow\";\nexport {default as interpolateViridis, magma as interpolateMagma, inferno as interpolateInferno, plasma as interpolatePlasma} from \"./src/sequential-multi/viridis\";\n","import colors from \"../colors\";\n\nexport default colors(\"7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666\");\n","import colors from \"../colors\";\n\nexport default colors(\"1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666\");\n","import colors from \"../colors\";\n\nexport default colors(\"a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928\");\n","import colors from \"../colors\";\n\nexport default colors(\"fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2\");\n","import colors from \"../colors\";\n\nexport default colors(\"b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc\");\n","import colors from \"../colors\";\n\nexport default colors(\"e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999\");\n","import colors from \"../colors\";\n\nexport default colors(\"66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3\");\n","import colors from \"../colors\";\n\nexport default colors(\"8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f\");\n","import colors from \"../colors\";\n\nexport default colors(\"1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf\");\n","export default function(specifier) {\n  var n = specifier.length / 6 | 0, colors = new Array(n), i = 0;\n  while (i < n) colors[i] = \"#\" + specifier.slice(i * 6, ++i * 6);\n  return colors;\n}\n","import colors from \"../colors\";\nimport ramp from \"../ramp\";\n\nexport var scheme = new Array(3).concat(\n  \"d8b365f5f5f55ab4ac\",\n  \"a6611adfc27d80cdc1018571\",\n  \"a6611adfc27df5f5f580cdc1018571\",\n  \"8c510ad8b365f6e8c3c7eae55ab4ac01665e\",\n  \"8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e\",\n  \"8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e\",\n  \"8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e\",\n  \"5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30\",\n  \"5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors\";\nimport ramp from \"../ramp\";\n\nexport var scheme = new Array(3).concat(\n  \"af8dc3f7f7f77fbf7b\",\n  \"7b3294c2a5cfa6dba0008837\",\n  \"7b3294c2a5cff7f7f7a6dba0008837\",\n  \"762a83af8dc3e7d4e8d9f0d37fbf7b1b7837\",\n  \"762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837\",\n  \"762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837\",\n  \"762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837\",\n  \"40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b\",\n  \"40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors\";\nimport ramp from \"../ramp\";\n\nexport var scheme = new Array(3).concat(\n  \"e9a3c9f7f7f7a1d76a\",\n  \"d01c8bf1b6dab8e1864dac26\",\n  \"d01c8bf1b6daf7f7f7b8e1864dac26\",\n  \"c51b7de9a3c9fde0efe6f5d0a1d76a4d9221\",\n  \"c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221\",\n  \"c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221\",\n  \"c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221\",\n  \"8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419\",\n  \"8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors\";\nimport ramp from \"../ramp\";\n\nexport var scheme = new Array(3).concat(\n  \"998ec3f7f7f7f1a340\",\n  \"5e3c99b2abd2fdb863e66101\",\n  \"5e3c99b2abd2f7f7f7fdb863e66101\",\n  \"542788998ec3d8daebfee0b6f1a340b35806\",\n  \"542788998ec3d8daebf7f7f7fee0b6f1a340b35806\",\n  \"5427888073acb2abd2d8daebfee0b6fdb863e08214b35806\",\n  \"5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806\",\n  \"2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08\",\n  \"2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors\";\nimport ramp from \"../ramp\";\n\nexport var scheme = new Array(3).concat(\n  \"ef8a62f7f7f767a9cf\",\n  \"ca0020f4a58292c5de0571b0\",\n  \"ca0020f4a582f7f7f792c5de0571b0\",\n  \"b2182bef8a62fddbc7d1e5f067a9cf2166ac\",\n  \"b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac\",\n  \"b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac\",\n  \"b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac\",\n  \"67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061\",\n  \"67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors\";\nimport ramp from \"../ramp\";\n\nexport var scheme = new Array(3).concat(\n  \"ef8a62ffffff999999\",\n  \"ca0020f4a582bababa404040\",\n  \"ca0020f4a582ffffffbababa404040\",\n  \"b2182bef8a62fddbc7e0e0e09999994d4d4d\",\n  \"b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d\",\n  \"b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d\",\n  \"b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d\",\n  \"67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a\",\n  \"67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors\";\nimport ramp from \"../ramp\";\n\nexport var scheme = new Array(3).concat(\n  \"fc8d59ffffbf91bfdb\",\n  \"d7191cfdae61abd9e92c7bb6\",\n  \"d7191cfdae61ffffbfabd9e92c7bb6\",\n  \"d73027fc8d59fee090e0f3f891bfdb4575b4\",\n  \"d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4\",\n  \"d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4\",\n  \"d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4\",\n  \"a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695\",\n  \"a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors\";\nimport ramp from \"../ramp\";\n\nexport var scheme = new Array(3).concat(\n  \"fc8d59ffffbf91cf60\",\n  \"d7191cfdae61a6d96a1a9641\",\n  \"d7191cfdae61ffffbfa6d96a1a9641\",\n  \"d73027fc8d59fee08bd9ef8b91cf601a9850\",\n  \"d73027fc8d59fee08bffffbfd9ef8b91cf601a9850\",\n  \"d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850\",\n  \"d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850\",\n  \"a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837\",\n  \"a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors\";\nimport ramp from \"../ramp\";\n\nexport var scheme = new Array(3).concat(\n  \"fc8d59ffffbf99d594\",\n  \"d7191cfdae61abdda42b83ba\",\n  \"d7191cfdae61ffffbfabdda42b83ba\",\n  \"d53e4ffc8d59fee08be6f59899d5943288bd\",\n  \"d53e4ffc8d59fee08bffffbfe6f59899d5943288bd\",\n  \"d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd\",\n  \"d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd\",\n  \"9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2\",\n  \"9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2\"\n).map(colors);\n\nexport default ramp(scheme);\n","import {interpolateRgbBasis} from \"d3-interpolate\";\n\nexport default function(scheme) {\n  return interpolateRgbBasis(scheme[scheme.length - 1]);\n}\n","import colors from \"../colors\";\nimport ramp from \"../ramp\";\n\nexport var scheme = new Array(3).concat(\n  \"e5f5f999d8c92ca25f\",\n  \"edf8fbb2e2e266c2a4238b45\",\n  \"edf8fbb2e2e266c2a42ca25f006d2c\",\n  \"edf8fbccece699d8c966c2a42ca25f006d2c\",\n  \"edf8fbccece699d8c966c2a441ae76238b45005824\",\n  \"f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824\",\n  \"f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors\";\nimport ramp from \"../ramp\";\n\nexport var scheme = new Array(3).concat(\n  \"e0ecf49ebcda8856a7\",\n  \"edf8fbb3cde38c96c688419d\",\n  \"edf8fbb3cde38c96c68856a7810f7c\",\n  \"edf8fbbfd3e69ebcda8c96c68856a7810f7c\",\n  \"edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b\",\n  \"f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b\",\n  \"f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors\";\nimport ramp from \"../ramp\";\n\nexport var scheme = new Array(3).concat(\n  \"e0f3dba8ddb543a2ca\",\n  \"f0f9e8bae4bc7bccc42b8cbe\",\n  \"f0f9e8bae4bc7bccc443a2ca0868ac\",\n  \"f0f9e8ccebc5a8ddb57bccc443a2ca0868ac\",\n  \"f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e\",\n  \"f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e\",\n  \"f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors\";\nimport ramp from \"../ramp\";\n\nexport var scheme = new Array(3).concat(\n  \"fee8c8fdbb84e34a33\",\n  \"fef0d9fdcc8afc8d59d7301f\",\n  \"fef0d9fdcc8afc8d59e34a33b30000\",\n  \"fef0d9fdd49efdbb84fc8d59e34a33b30000\",\n  \"fef0d9fdd49efdbb84fc8d59ef6548d7301f990000\",\n  \"fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000\",\n  \"fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors\";\nimport ramp from \"../ramp\";\n\nexport var scheme = new Array(3).concat(\n  \"ece7f2a6bddb2b8cbe\",\n  \"f1eef6bdc9e174a9cf0570b0\",\n  \"f1eef6bdc9e174a9cf2b8cbe045a8d\",\n  \"f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d\",\n  \"f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b\",\n  \"fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b\",\n  \"fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors\";\nimport ramp from \"../ramp\";\n\nexport var scheme = new Array(3).concat(\n  \"ece2f0a6bddb1c9099\",\n  \"f6eff7bdc9e167a9cf02818a\",\n  \"f6eff7bdc9e167a9cf1c9099016c59\",\n  \"f6eff7d0d1e6a6bddb67a9cf1c9099016c59\",\n  \"f6eff7d0d1e6a6bddb67a9cf3690c002818a016450\",\n  \"fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450\",\n  \"fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors\";\nimport ramp from \"../ramp\";\n\nexport var scheme = new Array(3).concat(\n  \"e7e1efc994c7dd1c77\",\n  \"f1eef6d7b5d8df65b0ce1256\",\n  \"f1eef6d7b5d8df65b0dd1c77980043\",\n  \"f1eef6d4b9dac994c7df65b0dd1c77980043\",\n  \"f1eef6d4b9dac994c7df65b0e7298ace125691003f\",\n  \"f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f\",\n  \"f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors\";\nimport ramp from \"../ramp\";\n\nexport var scheme = new Array(3).concat(\n  \"fde0ddfa9fb5c51b8a\",\n  \"feebe2fbb4b9f768a1ae017e\",\n  \"feebe2fbb4b9f768a1c51b8a7a0177\",\n  \"feebe2fcc5c0fa9fb5f768a1c51b8a7a0177\",\n  \"feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177\",\n  \"fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177\",\n  \"fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors\";\nimport ramp from \"../ramp\";\n\nexport var scheme = new Array(3).concat(\n  \"f7fcb9addd8e31a354\",\n  \"ffffccc2e69978c679238443\",\n  \"ffffccc2e69978c67931a354006837\",\n  \"ffffccd9f0a3addd8e78c67931a354006837\",\n  \"ffffccd9f0a3addd8e78c67941ab5d238443005a32\",\n  \"ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32\",\n  \"ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors\";\nimport ramp from \"../ramp\";\n\nexport var scheme = new Array(3).concat(\n  \"edf8b17fcdbb2c7fb8\",\n  \"ffffcca1dab441b6c4225ea8\",\n  \"ffffcca1dab441b6c42c7fb8253494\",\n  \"ffffccc7e9b47fcdbb41b6c42c7fb8253494\",\n  \"ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84\",\n  \"ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84\",\n  \"ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors\";\nimport ramp from \"../ramp\";\n\nexport var scheme = new Array(3).concat(\n  \"fff7bcfec44fd95f0e\",\n  \"ffffd4fed98efe9929cc4c02\",\n  \"ffffd4fed98efe9929d95f0e993404\",\n  \"ffffd4fee391fec44ffe9929d95f0e993404\",\n  \"ffffd4fee391fec44ffe9929ec7014cc4c028c2d04\",\n  \"ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04\",\n  \"ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors\";\nimport ramp from \"../ramp\";\n\nexport var scheme = new Array(3).concat(\n  \"ffeda0feb24cf03b20\",\n  \"ffffb2fecc5cfd8d3ce31a1c\",\n  \"ffffb2fecc5cfd8d3cf03b20bd0026\",\n  \"ffffb2fed976feb24cfd8d3cf03b20bd0026\",\n  \"ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026\",\n  \"ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026\",\n  \"ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026\"\n).map(colors);\n\nexport default ramp(scheme);\n","import {cubehelix} from \"d3-color\";\nimport {interpolateCubehelixLong} from \"d3-interpolate\";\n\nexport default interpolateCubehelixLong(cubehelix(300, 0.5, 0.0), cubehelix(-240, 0.5, 1.0));\n","import {cubehelix} from \"d3-color\";\nimport {interpolateCubehelixLong} from \"d3-interpolate\";\n\nexport var warm = interpolateCubehelixLong(cubehelix(-100, 0.75, 0.35), cubehelix(80, 1.50, 0.8));\n\nexport var cool = interpolateCubehelixLong(cubehelix(260, 0.75, 0.35), cubehelix(80, 1.50, 0.8));\n\nvar c = cubehelix();\n\nexport default function(t) {\n  if (t < 0 || t > 1) t -= Math.floor(t);\n  var ts = Math.abs(t - 0.5);\n  c.h = 360 * t - 100;\n  c.s = 1.5 - 1.5 * ts;\n  c.l = 0.8 - 0.9 * ts;\n  return c + \"\";\n}\n","import {rgb} from \"d3-color\";\n\nvar c = rgb(),\n    pi_1_3 = Math.PI / 3,\n    pi_2_3 = Math.PI * 2 / 3;\n\nexport default function(t) {\n  var x;\n  t = (0.5 - t) * Math.PI;\n  c.r = 255 * (x = Math.sin(t)) * x;\n  c.g = 255 * (x = Math.sin(t + pi_1_3)) * x;\n  c.b = 255 * (x = Math.sin(t + pi_2_3)) * x;\n  return c + \"\";\n}\n","import colors from \"../colors\";\n\nfunction ramp(range) {\n  var n = range.length;\n  return function(t) {\n    return range[Math.max(0, Math.min(n - 1, Math.floor(t * n)))];\n  };\n}\n\nexport default ramp(colors(\"44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725\"));\n\nexport var magma = ramp(colors(\"00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf\"));\n\nexport var inferno = ramp(colors(\"00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4\"));\n\nexport var plasma = ramp(colors(\"0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921\"));\n","import colors from \"../colors\";\nimport ramp from \"../ramp\";\n\nexport var scheme = new Array(3).concat(\n  \"deebf79ecae13182bd\",\n  \"eff3ffbdd7e76baed62171b5\",\n  \"eff3ffbdd7e76baed63182bd08519c\",\n  \"eff3ffc6dbef9ecae16baed63182bd08519c\",\n  \"eff3ffc6dbef9ecae16baed64292c62171b5084594\",\n  \"f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594\",\n  \"f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors\";\nimport ramp from \"../ramp\";\n\nexport var scheme = new Array(3).concat(\n  \"e5f5e0a1d99b31a354\",\n  \"edf8e9bae4b374c476238b45\",\n  \"edf8e9bae4b374c47631a354006d2c\",\n  \"edf8e9c7e9c0a1d99b74c47631a354006d2c\",\n  \"edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32\",\n  \"f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32\",\n  \"f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors\";\nimport ramp from \"../ramp\";\n\nexport var scheme = new Array(3).concat(\n  \"f0f0f0bdbdbd636363\",\n  \"f7f7f7cccccc969696525252\",\n  \"f7f7f7cccccc969696636363252525\",\n  \"f7f7f7d9d9d9bdbdbd969696636363252525\",\n  \"f7f7f7d9d9d9bdbdbd969696737373525252252525\",\n  \"fffffff0f0f0d9d9d9bdbdbd969696737373525252252525\",\n  \"fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors\";\nimport ramp from \"../ramp\";\n\nexport var scheme = new Array(3).concat(\n  \"fee6cefdae6be6550d\",\n  \"feeddefdbe85fd8d3cd94701\",\n  \"feeddefdbe85fd8d3ce6550da63603\",\n  \"feeddefdd0a2fdae6bfd8d3ce6550da63603\",\n  \"feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04\",\n  \"fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04\",\n  \"fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors\";\nimport ramp from \"../ramp\";\n\nexport var scheme = new Array(3).concat(\n  \"efedf5bcbddc756bb1\",\n  \"f2f0f7cbc9e29e9ac86a51a3\",\n  \"f2f0f7cbc9e29e9ac8756bb154278f\",\n  \"f2f0f7dadaebbcbddc9e9ac8756bb154278f\",\n  \"f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486\",\n  \"fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486\",\n  \"fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors\";\nimport ramp from \"../ramp\";\n\nexport var scheme = new Array(3).concat(\n  \"fee0d2fc9272de2d26\",\n  \"fee5d9fcae91fb6a4acb181d\",\n  \"fee5d9fcae91fb6a4ade2d26a50f15\",\n  \"fee5d9fcbba1fc9272fb6a4ade2d26a50f15\",\n  \"fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d\",\n  \"fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d\",\n  \"fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d\"\n).map(colors);\n\nexport default ramp(scheme);\n","export {\n  default as scaleBand,\n  point as scalePoint\n} from \"./src/band\";\n\nexport {\n  default as scaleIdentity\n} from \"./src/identity\";\n\nexport {\n  default as scaleLinear\n} from \"./src/linear\";\n\nexport {\n  default as scaleLog\n} from \"./src/log\";\n\nexport {\n  default as scaleOrdinal,\n  implicit as scaleImplicit\n} from \"./src/ordinal\";\n\nexport {\n  default as scalePow,\n  sqrt as scaleSqrt\n} from \"./src/pow\";\n\nexport {\n  default as scaleQuantile\n} from \"./src/quantile\";\n\nexport {\n  default as scaleQuantize\n} from \"./src/quantize\";\n\nexport {\n  default as scaleThreshold\n} from \"./src/threshold\";\n\nexport {\n  default as scaleTime\n} from \"./src/time\";\n\nexport {\n  default as scaleUtc\n} from \"./src/utcTime\";\n\nexport {\n  default as schemeCategory10\n} from \"./src/category10\";\n\nexport {\n  default as schemeCategory20b\n} from \"./src/category20b\";\n\nexport {\n  default as schemeCategory20c\n} from \"./src/category20c\";\n\nexport {\n  default as schemeCategory20\n} from \"./src/category20\";\n\nexport {\n  default as interpolateCubehelixDefault\n} from \"./src/cubehelix\";\n\nexport {\n  default as interpolateRainbow,\n  warm as interpolateWarm,\n  cool as interpolateCool\n} from \"./src/rainbow\";\n\nexport {\n  default as interpolateViridis,\n  magma as interpolateMagma,\n  inferno as interpolateInferno,\n  plasma as interpolatePlasma\n} from \"./src/viridis\";\n\nexport {\n  default as scaleSequential\n} from \"./src/sequential\";\n","var array = Array.prototype;\n\nexport var map = array.map;\nexport var slice = array.slice;\n","import {range as sequence} from \"d3-array\";\nimport ordinal from \"./ordinal\";\n\nexport default function band() {\n  var scale = ordinal().unknown(undefined),\n      domain = scale.domain,\n      ordinalRange = scale.range,\n      range = [0, 1],\n      step,\n      bandwidth,\n      round = false,\n      paddingInner = 0,\n      paddingOuter = 0,\n      align = 0.5;\n\n  delete scale.unknown;\n  function rescale() {\n    var n = domain().length,\n        reverse = range[1] < range[0],\n        start = range[reverse - 0],\n        stop = range[1 - reverse];\n    step = (stop - start) / Math.max(1, n - paddingInner + paddingOuter * 2);\n    if (round) step = Math.floor(step);\n    start += (stop - start - step * (n - paddingInner)) * align;\n    bandwidth = step * (1 - paddingInner);\n    if (round) start = Math.round(start), bandwidth = Math.round(bandwidth);\n    var values = sequence(n).map(function(i) { return start + step * i; });\n    return ordinalRange(reverse ? values.reverse() : values);\n  }\n\n  scale.domain = function(_) {\n    return arguments.length ? (domain(_), rescale()) : domain();\n  };\n\n  scale.range = function(_) {\n    return arguments.length ? (range = [+_[0], +_[1]], rescale()) : range.slice();\n  };\n\n  scale.rangeRound = function(_) {\n    return range = [+_[0], +_[1]], round = true, rescale();\n  };\n\n  scale.bandwidth = function() {\n    return bandwidth;\n  };\n\n  scale.step = function() {\n    return step;\n  };\n\n  scale.round = function(_) {\n    return arguments.length ? (round = !!_, rescale()) : round;\n  };\n\n  scale.padding = function(_) {\n    return arguments.length ? (paddingInner = paddingOuter = Math.max(0, Math.min(1, _)), rescale()) : paddingInner;\n  };\n\n  scale.paddingInner = function(_) {\n    return arguments.length ? (paddingInner = Math.max(0, Math.min(1, _)), rescale()) : paddingInner;\n  };\n\n  scale.paddingOuter = function(_) {\n    return arguments.length ? (paddingOuter = Math.max(0, Math.min(1, _)), rescale()) : paddingOuter;\n  };\n\n  scale.align = function(_) {\n    return arguments.length ? (align = Math.max(0, Math.min(1, _)), rescale()) : align;\n  };\n\n  scale.copy = function() {\n    return band()\n        .domain(domain())\n        .range(range)\n        .round(round)\n        .paddingInner(paddingInner)\n        .paddingOuter(paddingOuter)\n        .align(align);\n  };\n\n  scale.invertExtent = function(r0, r1) {\n    var lo = +r0,\n        hi = arguments.length > 1 ? +r1 : lo,\n        reverse = range[1] < range[0],\n        values = reverse ? ordinalRange().reverse() : ordinalRange(),\n        n = values.length - 1, a, b, t,\n        hiIndex;\n    values.push(values[n] + this.step());\n    // order range inputs, bail if outside of scale range\n    if (hi < lo) t = lo, lo = hi, hi = t;\n    if (hi < values[0] || lo > range[1-reverse]) return undefined;\n\n    // binary search to index into scale range\n    a = Math.max(0, getClosestIndexOf(values, lo));\n    hiIndex = getClosestIndexOf(values, hi);\n    b = lo===hi ? a : Math.max(a, hiIndex - 1);\n\n    // increment index a if lo is within padding gap\n    // if (lo - values[a] > bandwidth + 1e-10) ++a;\n\n    if (reverse) t = a, a = n - b, b = n - t; // map + swap\n    return (a > b) ? undefined : domain().slice(a, b+1);\n  };\n\n  scale.invert = function (r0, r1) {\n    var lo = +r0,\n        hi = arguments.length > 1 ? +r1 : lo,\n        reverse = range[1] < range[0],\n        values = reverse ? ordinalRange().reverse() : ordinalRange(),\n        n = values.length - 1,\n        a,\n        t;\n\n    // order range inputs, bail if outside of scale range\n    if (hi < lo) t = lo, lo = hi, hi = t;\n    if (hi < values[0] || lo > range[1-reverse]) return undefined;\n\n    // binary search to index into scale range\n    a = Math.max(0, getClosestIndexOf(values, lo, 'left'));\n\n    // increment index a if lo is within padding gap\n    // if (lo - values[a] > bandwidth + 1e-10) ++a;\n\n    return domain()[reverse ? n - a : a];\n  }\n  return rescale();\n}\n\nfunction pointish(scale) {\n  var copy = scale.copy;\n\n  scale.padding = scale.paddingOuter;\n  delete scale.paddingInner;\n  delete scale.paddingOuter;\n\n  scale.copy = function() {\n    return pointish(copy());\n  };\n\n  return scale;\n}\n\nexport function point() {\n  return pointish(band().paddingInner(1));\n}\n\nfunction getClosestIndexOf (arr, value, side) {\n  var low = 0,\n      arrLen = arr.length,\n      high = arrLen - 1,\n      highVal,\n      mid,\n      d1,\n      d2;\n\n  while (low < high) {\n      mid = Math.floor((low + high) / 2);\n      d1 = Math.abs(arr[mid] - value);\n      d2 = Math.abs(arr[mid + 1] - value);\n\n      if (d2 <= d1) {\n          low = mid + 1;\n      }\n      else {\n          high = mid;\n      }\n  }\n\n  if (!side) {\n      return high;\n  }\n\n  highVal = arr[high];\n  if (highVal === value) {\n      return high;\n  } else if (highVal > value) {\n      if (high === 0) { return high; }\n      return side === 'left'? high - 1 : high;\n  } else {\n      if (high === arr.length - 1) { return high; }\n      return side === 'left'? high : high + 1;\n  }\n}","import colors from \"./colors\";\n\nexport default colors(\"1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf\");\n","import colors from \"./colors\";\n\nexport default colors(\"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5\");\n","import colors from \"./colors\";\n\nexport default colors(\"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6\");\n","import colors from \"./colors\";\n\nexport default colors(\"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9\");\n","export default function(s) {\n  return s.match(/.{6}/g).map(function(x) {\n    return \"#\" + x;\n  });\n}\n","export default function(x) {\n  return function() {\n    return x;\n  };\n}\n","import {bisect} from \"d3-array\";\nimport {interpolate as interpolateValue, interpolateRound} from \"d3-interpolate\";\nimport {map, slice} from \"./array\";\nimport constant from \"./constant\";\nimport number from \"./number\";\n\nvar unit = [0, 1];\n\nexport function deinterpolateLinear(a, b) {\n  return (b -= (a = +a))\n      ? function(x) { return (x - a) / b; }\n      : constant(b);\n}\n\nfunction deinterpolateClamp(deinterpolate) {\n  return function(a, b) {\n    var d = deinterpolate(a = +a, b = +b);\n    return function(x) { return x <= a ? 0 : x >= b ? 1 : d(x); };\n  };\n}\n\nfunction reinterpolateClamp(reinterpolate) {\n  return function(a, b) {\n    var r = reinterpolate(a = +a, b = +b);\n    return function(t) { return t <= 0 ? a : t >= 1 ? b : r(t); };\n  };\n}\n\nfunction bimap(domain, range, deinterpolate, reinterpolate) {\n  var d0 = domain[0], d1 = domain[1], r0 = range[0], r1 = range[1];\n  if (d1 < d0) d0 = deinterpolate(d1, d0), r0 = reinterpolate(r1, r0);\n  else d0 = deinterpolate(d0, d1), r0 = reinterpolate(r0, r1);\n  return function(x) { return r0(d0(x)); };\n}\n\nfunction polymap(domain, range, deinterpolate, reinterpolate) {\n  var j = Math.min(domain.length, range.length) - 1,\n      d = new Array(j),\n      r = new Array(j),\n      i = -1;\n\n  // Reverse descending domains.\n  if (domain[j] < domain[0]) {\n    domain = domain.slice().reverse();\n    range = range.slice().reverse();\n  }\n\n  while (++i < j) {\n    d[i] = deinterpolate(domain[i], domain[i + 1]);\n    r[i] = reinterpolate(range[i], range[i + 1]);\n  }\n\n  return function(x) {\n    var i = bisect(domain, x, 1, j) - 1;\n    return r[i](d[i](x));\n  };\n}\n\nexport function copy(source, target) {\n  return target\n      .domain(source.domain())\n      .range(source.range())\n      .interpolate(source.interpolate())\n      .clamp(source.clamp());\n}\n\n// deinterpolate(a, b)(x) takes a domain value x in [a,b] and returns the corresponding parameter t in [0,1].\n// reinterpolate(a, b)(t) takes a parameter t in [0,1] and returns the corresponding domain value x in [a,b].\nexport default function continuous(deinterpolate, reinterpolate) {\n  var domain = unit,\n      range = unit,\n      interpolate = interpolateValue,\n      clamp = false,\n      piecewise,\n      output,\n      input;\n\n  function rescale() {\n    piecewise = Math.min(domain.length, range.length) > 2 ? polymap : bimap;\n    output = input = null;\n    return scale;\n  }\n\n  function scale(x) {\n    return (output || (output = piecewise(domain, range, clamp ? deinterpolateClamp(deinterpolate) : deinterpolate, interpolate)))(+x);\n  }\n\n  scale.invert = function(y) {\n    return (input || (input = piecewise(range, domain, deinterpolateLinear, clamp ? reinterpolateClamp(reinterpolate) : reinterpolate)))(+y);\n  };\n\n  scale.domain = function(_) {\n    return arguments.length ? (domain = map.call(_, number), rescale()) : domain.slice();\n  };\n\n  scale.range = function(_) {\n    return arguments.length ? (range = slice.call(_), rescale()) : range.slice();\n  };\n\n  scale.rangeRound = function(_) {\n    return range = slice.call(_), interpolate = interpolateRound, rescale();\n  };\n\n  scale.clamp = function(_) {\n    return arguments.length ? (clamp = !!_, rescale()) : clamp;\n  };\n\n  scale.interpolate = function(_) {\n    return arguments.length ? (interpolate = _, rescale()) : interpolate;\n  };\n\n  return rescale();\n}\n","import {cubehelix} from \"d3-color\";\nimport {interpolateCubehelixLong} from \"d3-interpolate\";\n\nexport default interpolateCubehelixLong(cubehelix(300, 0.5, 0.0), cubehelix(-240, 0.5, 1.0));\n","import {map} from \"./array\";\nimport {linearish} from \"./linear\";\nimport number from \"./number\";\n\nexport default function identity() {\n  var domain = [0, 1];\n\n  function scale(x) {\n    return +x;\n  }\n\n  scale.invert = scale;\n\n  scale.domain = scale.range = function(_) {\n    return arguments.length ? (domain = map.call(_, number), scale) : domain.slice();\n  };\n\n  scale.copy = function() {\n    return identity().domain(domain);\n  };\n\n  return linearish(scale);\n}\n","import {ticks, tickIncrement} from \"d3-array\";\nimport {interpolateNumber as reinterpolate} from \"d3-interpolate\";\nimport {default as continuous, copy, deinterpolateLinear as deinterpolate} from \"./continuous\";\nimport tickFormat from \"./tickFormat\";\n\nexport function linearish(scale) {\n  var domain = scale.domain;\n\n  scale.ticks = function(count) {\n    var d = domain();\n    return ticks(d[0], d[d.length - 1], count == null ? 10 : count);\n  };\n\n  scale.tickFormat = function(count, specifier) {\n    return tickFormat(domain(), count, specifier);\n  };\n\n  scale.nice = function(count) {\n    if (count == null) count = 10;\n\n    var d = domain(),\n        i0 = 0,\n        i1 = d.length - 1,\n        start = d[i0],\n        stop = d[i1],\n        step;\n\n    if (stop < start) {\n      step = start, start = stop, stop = step;\n      step = i0, i0 = i1, i1 = step;\n    }\n\n    step = tickIncrement(start, stop, count);\n\n    if (step > 0) {\n      start = Math.floor(start / step) * step;\n      stop = Math.ceil(stop / step) * step;\n      step = tickIncrement(start, stop, count);\n    } else if (step < 0) {\n      start = Math.ceil(start * step) / step;\n      stop = Math.floor(stop * step) / step;\n      step = tickIncrement(start, stop, count);\n    }\n\n    if (step > 0) {\n      d[i0] = Math.floor(start / step) * step;\n      d[i1] = Math.ceil(stop / step) * step;\n      domain(d);\n    } else if (step < 0) {\n      d[i0] = Math.ceil(start * step) / step;\n      d[i1] = Math.floor(stop * step) / step;\n      domain(d);\n    }\n\n    return scale;\n  };\n\n  return scale;\n}\n\nexport default function linear() {\n  var scale = continuous(deinterpolate, reinterpolate);\n\n  scale.copy = function() {\n    return copy(scale, linear());\n  };\n\n  return linearish(scale);\n}\n","import {ticks} from \"d3-array\";\nimport {format} from \"d3-format\";\nimport constant from \"./constant\";\nimport nice from \"./nice\";\nimport {default as continuous, copy} from \"./continuous\";\n\nfunction deinterpolate(a, b) {\n  return (b = Math.log(b / a))\n      ? function(x) { return Math.log(x / a) / b; }\n      : constant(b);\n}\n\nfunction reinterpolate(a, b) {\n  return a < 0\n      ? function(t) { return -Math.pow(-b, t) * Math.pow(-a, 1 - t); }\n      : function(t) { return Math.pow(b, t) * Math.pow(a, 1 - t); };\n}\n\nfunction pow10(x) {\n  return isFinite(x) ? +(\"1e\" + x) : x < 0 ? 0 : x;\n}\n\nfunction powp(base) {\n  return base === 10 ? pow10\n      : base === Math.E ? Math.exp\n      : function(x) { return Math.pow(base, x); };\n}\n\nfunction logp(base) {\n  return base === Math.E ? Math.log\n      : base === 10 && Math.log10\n      || base === 2 && Math.log2\n      || (base = Math.log(base), function(x) { return Math.log(x) / base; });\n}\n\nfunction reflect(f) {\n  return function(x) {\n    return -f(-x);\n  };\n}\n\nexport default function log() {\n  var scale = continuous(deinterpolate, reinterpolate).domain([1, 10]),\n      domain = scale.domain,\n      base = 10,\n      logs = logp(10),\n      pows = powp(10);\n\n  function rescale() {\n    logs = logp(base), pows = powp(base);\n    if (domain()[0] < 0) logs = reflect(logs), pows = reflect(pows);\n    return scale;\n  }\n\n  scale.base = function(_) {\n    return arguments.length ? (base = +_, rescale()) : base;\n  };\n\n  scale.domain = function(_) {\n    return arguments.length ? (domain(_), rescale()) : domain();\n  };\n\n  scale.ticks = function(count) {\n    var d = domain(),\n        u = d[0],\n        v = d[d.length - 1],\n        r;\n\n    if (r = v < u) i = u, u = v, v = i;\n\n    var i = logs(u),\n        j = logs(v),\n        p,\n        k,\n        t,\n        n = count == null ? 10 : +count,\n        z = [];\n\n    if (!(base % 1) && j - i < n) {\n      i = Math.round(i) - 1, j = Math.round(j) + 1;\n      if (u > 0) for (; i < j; ++i) {\n        for (k = 1, p = pows(i); k < base; ++k) {\n          t = p * k;\n          if (t < u) continue;\n          if (t > v) break;\n          z.push(t);\n        }\n      } else for (; i < j; ++i) {\n        for (k = base - 1, p = pows(i); k >= 1; --k) {\n          t = p * k;\n          if (t < u) continue;\n          if (t > v) break;\n          z.push(t);\n        }\n      }\n    } else {\n      z = ticks(i, j, Math.min(j - i, n)).map(pows);\n    }\n\n    return r ? z.reverse() : z;\n  };\n\n  scale.tickFormat = function(count, specifier) {\n    if (specifier == null) specifier = base === 10 ? \".0e\" : \",\";\n    if (typeof specifier !== \"function\") specifier = format(specifier);\n    if (count === Infinity) return specifier;\n    if (count == null) count = 10;\n    var k = Math.max(1, base * count / scale.ticks().length); // TODO fast estimate?\n    return function(d) {\n      var i = d / pows(Math.round(logs(d)));\n      if (i * base < base - 0.5) i *= base;\n      return i <= k ? specifier(d) : \"\";\n    };\n  };\n\n  scale.nice = function() {\n    return domain(nice(domain(), {\n      floor: function(x) { return pows(Math.floor(logs(x))); },\n      ceil: function(x) { return pows(Math.ceil(logs(x))); }\n    }));\n  };\n\n  scale.copy = function() {\n    return copy(scale, log().base(base));\n  };\n\n  return scale;\n}\n","export default function(domain, interval) {\n  domain = domain.slice();\n\n  var i0 = 0,\n      i1 = domain.length - 1,\n      x0 = domain[i0],\n      x1 = domain[i1],\n      t;\n\n  if (x1 < x0) {\n    t = i0, i0 = i1, i1 = t;\n    t = x0, x0 = x1, x1 = t;\n  }\n\n  domain[i0] = interval.floor(x0);\n  domain[i1] = interval.ceil(x1);\n  return domain;\n}\n","export default function(x) {\n  return +x;\n}\n","import {map} from \"d3-collection\";\nimport {slice} from \"./array\";\n\nexport var implicit = {name: \"implicit\"};\n\nexport default function ordinal(range) {\n  var index = map(),\n      domain = [],\n      unknown = implicit;\n\n  range = range == null ? [] : slice.call(range);\n\n  function scale(d) {\n    var key = d + \"\", i = index.get(key);\n    if (!i) {\n      if (unknown !== implicit) return unknown;\n      index.set(key, i = domain.push(d));\n    }\n    return range[(i - 1) % range.length];\n  }\n\n  scale.domain = function(_) {\n    if (!arguments.length) return domain.slice();\n    domain = [], index = map();\n    var i = -1, n = _.length, d, key;\n    while (++i < n) if (!index.has(key = (d = _[i]) + \"\")) index.set(key, domain.push(d));\n    return scale;\n  };\n\n  scale.range = function(_) {\n    return arguments.length ? (range = slice.call(_), scale) : range.slice();\n  };\n\n  scale.unknown = function(_) {\n    return arguments.length ? (unknown = _, scale) : unknown;\n  };\n\n  scale.copy = function() {\n    return ordinal()\n        .domain(domain)\n        .range(range)\n        .unknown(unknown);\n  };\n\n  return scale;\n}\n","import constant from \"./constant\";\nimport {linearish} from \"./linear\";\nimport {default as continuous, copy} from \"./continuous\";\n\nfunction raise(x, exponent) {\n  return x < 0 ? -Math.pow(-x, exponent) : Math.pow(x, exponent);\n}\n\nexport default function pow() {\n  var exponent = 1,\n      scale = continuous(deinterpolate, reinterpolate),\n      domain = scale.domain;\n\n  function deinterpolate(a, b) {\n    return (b = raise(b, exponent) - (a = raise(a, exponent)))\n        ? function(x) { return (raise(x, exponent) - a) / b; }\n        : constant(b);\n  }\n\n  function reinterpolate(a, b) {\n    b = raise(b, exponent) - (a = raise(a, exponent));\n    return function(t) { return raise(a + b * t, 1 / exponent); };\n  }\n\n  scale.exponent = function(_) {\n    return arguments.length ? (exponent = +_, domain(domain())) : exponent;\n  };\n\n  scale.copy = function() {\n    return copy(scale, pow().exponent(exponent));\n  };\n\n  return linearish(scale);\n}\n\nexport function sqrt() {\n  return pow().exponent(0.5);\n}\n","import {ascending, bisect, quantile as threshold} from \"d3-array\";\nimport {slice} from \"./array\";\n\nexport default function quantile() {\n  var domain = [],\n      range = [],\n      thresholds = [];\n\n  function rescale() {\n    var i = 0, n = Math.max(1, range.length);\n    thresholds = new Array(n - 1);\n    while (++i < n) thresholds[i - 1] = threshold(domain, i / n);\n    return scale;\n  }\n\n  function scale(x) {\n    if (!isNaN(x = +x)) return range[bisect(thresholds, x)];\n  }\n\n  scale.invertExtent = function(y) {\n    var i = range.indexOf(y);\n    return i < 0 ? [NaN, NaN] : [\n      i > 0 ? thresholds[i - 1] : domain[0],\n      i < thresholds.length ? thresholds[i] : domain[domain.length - 1]\n    ];\n  };\n\n  scale.domain = function(_) {\n    if (!arguments.length) return domain.slice();\n    domain = [];\n    for (var i = 0, n = _.length, d; i < n; ++i) if (d = _[i], d != null && !isNaN(d = +d)) domain.push(d);\n    domain.sort(ascending);\n    return rescale();\n  };\n\n  scale.range = function(_) {\n    return arguments.length ? (range = slice.call(_), rescale()) : range.slice();\n  };\n\n  scale.quantiles = function() {\n    return thresholds.slice();\n  };\n\n  scale.copy = function() {\n    return quantile()\n        .domain(domain)\n        .range(range);\n  };\n\n  return scale;\n}\n","import {bisect} from \"d3-array\";\nimport {slice} from \"./array\";\nimport {linearish} from \"./linear\";\n\nexport default function quantize() {\n  var x0 = 0,\n      x1 = 1,\n      n = 1,\n      domain = [0.5],\n      range = [0, 1];\n\n  function scale(x) {\n    if (x <= x) return range[bisect(domain, x, 0, n)];\n  }\n\n  function rescale() {\n    var i = -1;\n    domain = new Array(n);\n    while (++i < n) domain[i] = ((i + 1) * x1 - (i - n) * x0) / (n + 1);\n    return scale;\n  }\n\n  scale.domain = function(_) {\n    return arguments.length ? (x0 = +_[0], x1 = +_[1], rescale()) : [x0, x1];\n  };\n\n  scale.range = function(_) {\n    return arguments.length ? (n = (range = slice.call(_)).length - 1, rescale()) : range.slice();\n  };\n\n  scale.invertExtent = function(y) {\n    var i = range.indexOf(y);\n    return i < 0 ? [NaN, NaN]\n        : i < 1 ? [x0, domain[0]]\n        : i >= n ? [domain[n - 1], x1]\n        : [domain[i - 1], domain[i]];\n  };\n\n  scale.copy = function() {\n    return quantize()\n        .domain([x0, x1])\n        .range(range);\n  };\n\n  return linearish(scale);\n}\n","import {cubehelix} from \"d3-color\";\nimport {interpolateCubehelixLong} from \"d3-interpolate\";\n\nexport var warm = interpolateCubehelixLong(cubehelix(-100, 0.75, 0.35), cubehelix(80, 1.50, 0.8));\n\nexport var cool = interpolateCubehelixLong(cubehelix(260, 0.75, 0.35), cubehelix(80, 1.50, 0.8));\n\nvar rainbow = cubehelix();\n\nexport default function(t) {\n  if (t < 0 || t > 1) t -= Math.floor(t);\n  var ts = Math.abs(t - 0.5);\n  rainbow.h = 360 * t - 100;\n  rainbow.s = 1.5 - 1.5 * ts;\n  rainbow.l = 0.8 - 0.9 * ts;\n  return rainbow + \"\";\n}\n","import {linearish} from \"./linear\";\n\nexport default function sequential(interpolator) {\n  var x0 = 0,\n      x1 = 1,\n      clamp = false;\n\n  function scale(x) {\n    var t = (x - x0) / (x1 - x0);\n    return interpolator(clamp ? Math.max(0, Math.min(1, t)) : t);\n  }\n\n  scale.domain = function(_) {\n    return arguments.length ? (x0 = +_[0], x1 = +_[1], scale) : [x0, x1];\n  };\n\n  scale.clamp = function(_) {\n    return arguments.length ? (clamp = !!_, scale) : clamp;\n  };\n\n  scale.interpolator = function(_) {\n    return arguments.length ? (interpolator = _, scale) : interpolator;\n  };\n\n  scale.copy = function() {\n    return sequential(interpolator).domain([x0, x1]).clamp(clamp);\n  };\n\n  return linearish(scale);\n}\n","import {bisect} from \"d3-array\";\nimport {slice} from \"./array\";\n\nexport default function threshold() {\n  var domain = [0.5],\n      range = [0, 1],\n      n = 1;\n\n  function scale(x) {\n    if (x <= x) return range[bisect(domain, x, 0, n)];\n  }\n\n  scale.domain = function(_) {\n    return arguments.length ? (domain = slice.call(_), n = Math.min(domain.length, range.length - 1), scale) : domain.slice();\n  };\n\n  scale.range = function(_) {\n    return arguments.length ? (range = slice.call(_), n = Math.min(domain.length, range.length - 1), scale) : range.slice();\n  };\n\n  scale.invertExtent = function(y) {\n    var i = range.indexOf(y);\n    return [domain[i - 1], domain[i]];\n  };\n\n  scale.copy = function() {\n    return threshold()\n        .domain(domain)\n        .range(range);\n  };\n\n  return scale;\n}\n","import {tickStep} from \"d3-array\";\nimport {format, formatPrefix, formatSpecifier, precisionFixed, precisionPrefix, precisionRound} from \"d3-format\";\n\nexport default function(domain, count, specifier) {\n  var start = domain[0],\n      stop = domain[domain.length - 1],\n      step = tickStep(start, stop, count == null ? 10 : count),\n      precision;\n  specifier = formatSpecifier(specifier == null ? \",f\" : specifier);\n  switch (specifier.type) {\n    case \"s\": {\n      var value = Math.max(Math.abs(start), Math.abs(stop));\n      if (specifier.precision == null && !isNaN(precision = precisionPrefix(step, value))) specifier.precision = precision;\n      return formatPrefix(specifier, value);\n    }\n    case \"\":\n    case \"e\":\n    case \"g\":\n    case \"p\":\n    case \"r\": {\n      if (specifier.precision == null && !isNaN(precision = precisionRound(step, Math.max(Math.abs(start), Math.abs(stop))))) specifier.precision = precision - (specifier.type === \"e\");\n      break;\n    }\n    case \"f\":\n    case \"%\": {\n      if (specifier.precision == null && !isNaN(precision = precisionFixed(step))) specifier.precision = precision - (specifier.type === \"%\") * 2;\n      break;\n    }\n  }\n  return format(specifier);\n}\n","import {bisector, tickStep} from \"d3-array\";\nimport {interpolateNumber as reinterpolate} from \"d3-interpolate\";\nimport {timeYear, timeMonth, timeWeek, timeDay, timeHour, timeMinute, timeSecond, timeMillisecond} from \"d3-time\";\nimport {timeFormat} from \"d3-time-format\";\nimport {map} from \"./array\";\nimport {default as continuous, copy, deinterpolateLinear as deinterpolate} from \"./continuous\";\nimport nice from \"./nice\";\n\nvar durationSecond = 1000,\n    durationMinute = durationSecond * 60,\n    durationHour = durationMinute * 60,\n    durationDay = durationHour * 24,\n    durationWeek = durationDay * 7,\n    durationMonth = durationDay * 30,\n    durationYear = durationDay * 365;\n\nfunction date(t) {\n  return new Date(t);\n}\n\nfunction number(t) {\n  return t instanceof Date ? +t : +new Date(+t);\n}\n\nexport function calendar(year, month, week, day, hour, minute, second, millisecond, format) {\n  var scale = continuous(deinterpolate, reinterpolate),\n      invert = scale.invert,\n      domain = scale.domain;\n\n  var formatMillisecond = format(\".%L\"),\n      formatSecond = format(\":%S\"),\n      formatMinute = format(\"%I:%M\"),\n      formatHour = format(\"%I %p\"),\n      formatDay = format(\"%a %d\"),\n      formatWeek = format(\"%b %d\"),\n      formatMonth = format(\"%B\"),\n      formatYear = format(\"%Y\");\n\n  var tickIntervals = [\n    [second,  1,      durationSecond],\n    [second,  5,  5 * durationSecond],\n    [second, 15, 15 * durationSecond],\n    [second, 30, 30 * durationSecond],\n    [minute,  1,      durationMinute],\n    [minute,  5,  5 * durationMinute],\n    [minute, 15, 15 * durationMinute],\n    [minute, 30, 30 * durationMinute],\n    [  hour,  1,      durationHour  ],\n    [  hour,  3,  3 * durationHour  ],\n    [  hour,  6,  6 * durationHour  ],\n    [  hour, 12, 12 * durationHour  ],\n    [   day,  1,      durationDay   ],\n    [   day,  2,  2 * durationDay   ],\n    [  week,  1,      durationWeek  ],\n    [ month,  1,      durationMonth ],\n    [ month,  3,  3 * durationMonth ],\n    [  year,  1,      durationYear  ]\n  ];\n\n  function tickFormat(date) {\n    return (second(date) < date ? formatMillisecond\n        : minute(date) < date ? formatSecond\n        : hour(date) < date ? formatMinute\n        : day(date) < date ? formatHour\n        : month(date) < date ? (week(date) < date ? formatDay : formatWeek)\n        : year(date) < date ? formatMonth\n        : formatYear)(date);\n  }\n\n  function tickInterval(interval, start, stop, step) {\n    if (interval == null) interval = 10;\n\n    // If a desired tick count is specified, pick a reasonable tick interval\n    // based on the extent of the domain and a rough estimate of tick size.\n    // Otherwise, assume interval is already a time interval and use it.\n    if (typeof interval === \"number\") {\n      var target = Math.abs(stop - start) / interval,\n          i = bisector(function(i) { return i[2]; }).right(tickIntervals, target);\n      if (i === tickIntervals.length) {\n        step = tickStep(start / durationYear, stop / durationYear, interval);\n        interval = year;\n      } else if (i) {\n        i = tickIntervals[target / tickIntervals[i - 1][2] < tickIntervals[i][2] / target ? i - 1 : i];\n        step = i[1];\n        interval = i[0];\n      } else {\n        step = Math.max(tickStep(start, stop, interval), 1);\n        interval = millisecond;\n      }\n    }\n\n    return step == null ? interval : interval.every(step);\n  }\n\n  scale.invert = function(y) {\n    return new Date(invert(y));\n  };\n\n  scale.domain = function(_) {\n    return arguments.length ? domain(map.call(_, number)) : domain().map(date);\n  };\n\n  scale.ticks = function(interval, step) {\n    var d = domain(),\n        t0 = d[0],\n        t1 = d[d.length - 1],\n        r = t1 < t0,\n        t;\n    if (r) t = t0, t0 = t1, t1 = t;\n    t = tickInterval(interval, t0, t1, step);\n    t = t ? t.range(t0, t1 + 1) : []; // inclusive stop\n    return r ? t.reverse() : t;\n  };\n\n  scale.tickFormat = function(count, specifier) {\n    return specifier == null ? tickFormat : format(specifier);\n  };\n\n  scale.nice = function(interval, step) {\n    var d = domain();\n    return (interval = tickInterval(interval, d[0], d[d.length - 1], step))\n        ? domain(nice(d, interval))\n        : scale;\n  };\n\n  scale.copy = function() {\n    return copy(scale, calendar(year, month, week, day, hour, minute, second, millisecond, format));\n  };\n\n  return scale;\n}\n\nexport default function() {\n  return calendar(timeYear, timeMonth, timeWeek, timeDay, timeHour, timeMinute, timeSecond, timeMillisecond, timeFormat).domain([new Date(2000, 0, 1), new Date(2000, 0, 2)]);\n}\n","import {calendar} from \"./time\";\nimport {utcFormat} from \"d3-time-format\";\nimport {utcYear, utcMonth, utcWeek, utcDay, utcHour, utcMinute, utcSecond, utcMillisecond} from \"d3-time\";\n\nexport default function() {\n  return calendar(utcYear, utcMonth, utcWeek, utcDay, utcHour, utcMinute, utcSecond, utcMillisecond, utcFormat).domain([Date.UTC(2000, 0, 1), Date.UTC(2000, 0, 2)]);\n}\n","import colors from \"./colors\";\n\nfunction ramp(range) {\n  var n = range.length;\n  return function(t) {\n    return range[Math.max(0, Math.min(n - 1, Math.floor(t * n)))];\n  };\n}\n\nexport default ramp(colors(\"44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725\"));\n\nexport var magma = ramp(colors(\"00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf\"));\n\nexport var inferno = ramp(colors(\"00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4\"));\n\nexport var plasma = ramp(colors(\"0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921\"));\n","export {default as create} from \"./src/create\";\nexport {default as creator} from \"./src/creator\";\nexport {default as local} from \"./src/local\";\nexport {default as matcher} from \"./src/matcher\";\nexport {default as mouse} from \"./src/mouse\";\nexport {default as namespace} from \"./src/namespace\";\nexport {default as namespaces} from \"./src/namespaces\";\nexport {default as clientPoint} from \"./src/point\";\nexport {default as select} from \"./src/select\";\nexport {default as selectAll} from \"./src/selectAll\";\nexport {default as selection} from \"./src/selection/index\";\nexport {default as selector} from \"./src/selector\";\nexport {default as selectorAll} from \"./src/selectorAll\";\nexport {styleValue as style} from \"./src/selection/style\";\nexport {default as touch} from \"./src/touch\";\nexport {default as touches} from \"./src/touches\";\nexport {default as window} from \"./src/window\";\nexport {event, customEvent} from \"./src/selection/on\";\n","export default function(x) {\n  return function() {\n    return x;\n  };\n}\n","import creator from \"./creator\";\nimport select from \"./select\";\n\nexport default function(name) {\n  return select(creator(name).call(document.documentElement));\n}\n","import namespace from \"./namespace\";\nimport {xhtml} from \"./namespaces\";\n\nfunction creatorInherit(name) {\n  return function() {\n    var document = this.ownerDocument,\n        uri = this.namespaceURI;\n    return uri === xhtml && document.documentElement.namespaceURI === xhtml\n        ? document.createElement(name)\n        : document.createElementNS(uri, name);\n  };\n}\n\nfunction creatorFixed(fullname) {\n  return function() {\n    return this.ownerDocument.createElementNS(fullname.space, fullname.local);\n  };\n}\n\nexport default function(name) {\n  var fullname = namespace(name);\n  return (fullname.local\n      ? creatorFixed\n      : creatorInherit)(fullname);\n}\n","var nextId = 0;\n\nexport default function local() {\n  return new Local;\n}\n\nfunction Local() {\n  this._ = \"@\" + (++nextId).toString(36);\n}\n\nLocal.prototype = local.prototype = {\n  constructor: Local,\n  get: function(node) {\n    var id = this._;\n    while (!(id in node)) if (!(node = node.parentNode)) return;\n    return node[id];\n  },\n  set: function(node, value) {\n    return node[this._] = value;\n  },\n  remove: function(node) {\n    return this._ in node && delete node[this._];\n  },\n  toString: function() {\n    return this._;\n  }\n};\n","var matcher = function(selector) {\n  return function() {\n    return this.matches(selector);\n  };\n};\n\nif (typeof document !== \"undefined\") {\n  var element = document.documentElement;\n  if (!element.matches) {\n    var vendorMatches = element.webkitMatchesSelector\n        || element.msMatchesSelector\n        || element.mozMatchesSelector\n        || element.oMatchesSelector;\n    matcher = function(selector) {\n      return function() {\n        return vendorMatches.call(this, selector);\n      };\n    };\n  }\n}\n\nexport default matcher;\n","import sourceEvent from \"./sourceEvent\";\nimport point from \"./point\";\n\nexport default function(node) {\n  var event = sourceEvent();\n  if (event.changedTouches) event = event.changedTouches[0];\n  return point(node, event);\n}\n","import namespaces from \"./namespaces\";\n\nexport default function(name) {\n  var prefix = name += \"\", i = prefix.indexOf(\":\");\n  if (i >= 0 && (prefix = name.slice(0, i)) !== \"xmlns\") name = name.slice(i + 1);\n  return namespaces.hasOwnProperty(prefix) ? {space: namespaces[prefix], local: name} : name;\n}\n","export var xhtml = \"http://www.w3.org/1999/xhtml\";\n\nexport default {\n  svg: \"http://www.w3.org/2000/svg\",\n  xhtml: xhtml,\n  xlink: \"http://www.w3.org/1999/xlink\",\n  xml: \"http://www.w3.org/XML/1998/namespace\",\n  xmlns: \"http://www.w3.org/2000/xmlns/\"\n};\n","export default function(node, event) {\n  var svg = node.ownerSVGElement || node;\n\n  if (svg.createSVGPoint) {\n    var point = svg.createSVGPoint();\n    point.x = event.clientX, point.y = event.clientY;\n    point = point.matrixTransform(node.getScreenCTM().inverse());\n    return [point.x, point.y];\n  }\n\n  var rect = node.getBoundingClientRect();\n  return [event.clientX - rect.left - node.clientLeft, event.clientY - rect.top - node.clientTop];\n}\n","import {Selection, root} from \"./selection/index\";\n\nexport default function(selector) {\n  return typeof selector === \"string\"\n      ? new Selection([[document.querySelector(selector)]], [document.documentElement])\n      : new Selection([[selector]], root);\n}\n","import {Selection, root} from \"./selection/index\";\n\nexport default function(selector) {\n  return typeof selector === \"string\"\n      ? new Selection([document.querySelectorAll(selector)], [document.documentElement])\n      : new Selection([selector == null ? [] : selector], root);\n}\n","import creator from \"../creator\";\n\nexport default function(name) {\n  var create = typeof name === \"function\" ? name : creator(name);\n  return this.select(function() {\n    return this.appendChild(create.apply(this, arguments));\n  });\n}\n","import namespace from \"../namespace\";\n\nfunction attrRemove(name) {\n  return function() {\n    this.removeAttribute(name);\n  };\n}\n\nfunction attrRemoveNS(fullname) {\n  return function() {\n    this.removeAttributeNS(fullname.space, fullname.local);\n  };\n}\n\nfunction attrConstant(name, value) {\n  return function() {\n    this.setAttribute(name, value);\n  };\n}\n\nfunction attrConstantNS(fullname, value) {\n  return function() {\n    this.setAttributeNS(fullname.space, fullname.local, value);\n  };\n}\n\nfunction attrFunction(name, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.removeAttribute(name);\n    else this.setAttribute(name, v);\n  };\n}\n\nfunction attrFunctionNS(fullname, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.removeAttributeNS(fullname.space, fullname.local);\n    else this.setAttributeNS(fullname.space, fullname.local, v);\n  };\n}\n\nexport default function(name, value) {\n  var fullname = namespace(name);\n\n  if (arguments.length < 2) {\n    var node = this.node();\n    return fullname.local\n        ? node.getAttributeNS(fullname.space, fullname.local)\n        : node.getAttribute(fullname);\n  }\n\n  return this.each((value == null\n      ? (fullname.local ? attrRemoveNS : attrRemove) : (typeof value === \"function\"\n      ? (fullname.local ? attrFunctionNS : attrFunction)\n      : (fullname.local ? attrConstantNS : attrConstant)))(fullname, value));\n}\n","export default function() {\n  var callback = arguments[0];\n  arguments[0] = this;\n  callback.apply(null, arguments);\n  return this;\n}\n","function classArray(string) {\n  return string.trim().split(/^|\\s+/);\n}\n\nfunction classList(node) {\n  return node.classList || new ClassList(node);\n}\n\nfunction ClassList(node) {\n  this._node = node;\n  this._names = classArray(node.getAttribute(\"class\") || \"\");\n}\n\nClassList.prototype = {\n  add: function(name) {\n    var i = this._names.indexOf(name);\n    if (i < 0) {\n      this._names.push(name);\n      this._node.setAttribute(\"class\", this._names.join(\" \"));\n    }\n  },\n  remove: function(name) {\n    var i = this._names.indexOf(name);\n    if (i >= 0) {\n      this._names.splice(i, 1);\n      this._node.setAttribute(\"class\", this._names.join(\" \"));\n    }\n  },\n  contains: function(name) {\n    return this._names.indexOf(name) >= 0;\n  }\n};\n\nfunction classedAdd(node, names) {\n  var list = classList(node), i = -1, n = names.length;\n  while (++i < n) list.add(names[i]);\n}\n\nfunction classedRemove(node, names) {\n  var list = classList(node), i = -1, n = names.length;\n  while (++i < n) list.remove(names[i]);\n}\n\nfunction classedTrue(names) {\n  return function() {\n    classedAdd(this, names);\n  };\n}\n\nfunction classedFalse(names) {\n  return function() {\n    classedRemove(this, names);\n  };\n}\n\nfunction classedFunction(names, value) {\n  return function() {\n    (value.apply(this, arguments) ? classedAdd : classedRemove)(this, names);\n  };\n}\n\nexport default function(name, value) {\n  var names = classArray(name + \"\");\n\n  if (arguments.length < 2) {\n    var list = classList(this.node()), i = -1, n = names.length;\n    while (++i < n) if (!list.contains(names[i])) return false;\n    return true;\n  }\n\n  return this.each((typeof value === \"function\"\n      ? classedFunction : value\n      ? classedTrue\n      : classedFalse)(names, value));\n}\n","function selection_cloneShallow() {\n  return this.parentNode.insertBefore(this.cloneNode(false), this.nextSibling);\n}\n\nfunction selection_cloneDeep() {\n  return this.parentNode.insertBefore(this.cloneNode(true), this.nextSibling);\n}\n\nexport default function(deep) {\n  return this.select(deep ? selection_cloneDeep : selection_cloneShallow);\n}\n","import {Selection} from \"./index\";\nimport {EnterNode} from \"./enter\";\nimport constant from \"../constant\";\n\nvar keyPrefix = \"$\"; // Protect against keys like __proto__.\n\nfunction bindIndex(parent, group, enter, update, exit, data) {\n  var i = 0,\n      node,\n      groupLength = group.length,\n      dataLength = data.length;\n\n  // Put any non-null nodes that fit into update.\n  // Put any null nodes into enter.\n  // Put any remaining data into enter.\n  for (; i < dataLength; ++i) {\n    if (node = group[i]) {\n      node.__data__ = data[i];\n      update[i] = node;\n    } else {\n      enter[i] = new EnterNode(parent, data[i]);\n    }\n  }\n\n  // Put any non-null nodes that dont fit into exit.\n  for (; i < groupLength; ++i) {\n    if (node = group[i]) {\n      exit[i] = node;\n    }\n  }\n}\n\nfunction bindKey(parent, group, enter, update, exit, data, key) {\n  var i,\n      node,\n      nodeByKeyValue = {},\n      groupLength = group.length,\n      dataLength = data.length,\n      keyValues = new Array(groupLength),\n      keyValue;\n\n  // Compute the key for each node.\n  // If multiple nodes have the same key, the duplicates are added to exit.\n  for (i = 0; i < groupLength; ++i) {\n    if (node = group[i]) {\n      keyValues[i] = keyValue = keyPrefix + key.call(node, node.__data__, i, group);\n      if (keyValue in nodeByKeyValue) {\n        exit[i] = node;\n      } else {\n        nodeByKeyValue[keyValue] = node;\n      }\n    }\n  }\n\n  // Compute the key for each datum.\n  // If there a node associated with this key, join and add it to update.\n  // If there is not (or the key is a duplicate), add it to enter.\n  for (i = 0; i < dataLength; ++i) {\n    keyValue = keyPrefix + key.call(parent, data[i], i, data);\n    if (node = nodeByKeyValue[keyValue]) {\n      update[i] = node;\n      node.__data__ = data[i];\n      nodeByKeyValue[keyValue] = null;\n    } else {\n      enter[i] = new EnterNode(parent, data[i]);\n    }\n  }\n\n  // Add any remaining nodes that were not bound to data to exit.\n  for (i = 0; i < groupLength; ++i) {\n    if ((node = group[i]) && (nodeByKeyValue[keyValues[i]] === node)) {\n      exit[i] = node;\n    }\n  }\n}\n\nexport default function(value, key) {\n  if (!value) {\n    data = new Array(this.size()), j = -1;\n    this.each(function(d) { data[++j] = d; });\n    return data;\n  }\n\n  var bind = key ? bindKey : bindIndex,\n      parents = this._parents,\n      groups = this._groups;\n\n  if (typeof value !== \"function\") value = constant(value);\n\n  for (var m = groups.length, update = new Array(m), enter = new Array(m), exit = new Array(m), j = 0; j < m; ++j) {\n    var parent = parents[j],\n        group = groups[j],\n        groupLength = group.length,\n        data = value.call(parent, parent && parent.__data__, j, parents),\n        dataLength = data.length,\n        enterGroup = enter[j] = new Array(dataLength),\n        updateGroup = update[j] = new Array(dataLength),\n        exitGroup = exit[j] = new Array(groupLength);\n\n    bind(parent, group, enterGroup, updateGroup, exitGroup, data, key);\n\n    // Now connect the enter nodes to their following update node, such that\n    // appendChild can insert the materialized enter node before this node,\n    // rather than at the end of the parent node.\n    for (var i0 = 0, i1 = 0, previous, next; i0 < dataLength; ++i0) {\n      if (previous = enterGroup[i0]) {\n        if (i0 >= i1) i1 = i0 + 1;\n        while (!(next = updateGroup[i1]) && ++i1 < dataLength);\n        previous._next = next || null;\n      }\n    }\n  }\n\n  update = new Selection(update, parents);\n  update._enter = enter;\n  update._exit = exit;\n  return update;\n}\n","export default function(value) {\n  return arguments.length\n      ? this.property(\"__data__\", value)\n      : this.node().__data__;\n}\n","import defaultView from \"../window\";\n\nfunction dispatchEvent(node, type, params) {\n  var window = defaultView(node),\n      event = window.CustomEvent;\n\n  if (typeof event === \"function\") {\n    event = new event(type, params);\n  } else {\n    event = window.document.createEvent(\"Event\");\n    if (params) event.initEvent(type, params.bubbles, params.cancelable), event.detail = params.detail;\n    else event.initEvent(type, false, false);\n  }\n\n  node.dispatchEvent(event);\n}\n\nfunction dispatchConstant(type, params) {\n  return function() {\n    return dispatchEvent(this, type, params);\n  };\n}\n\nfunction dispatchFunction(type, params) {\n  return function() {\n    return dispatchEvent(this, type, params.apply(this, arguments));\n  };\n}\n\nexport default function(type, params) {\n  return this.each((typeof params === \"function\"\n      ? dispatchFunction\n      : dispatchConstant)(type, params));\n}\n","export default function(callback) {\n\n  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {\n    for (var group = groups[j], i = 0, n = group.length, node; i < n; ++i) {\n      if (node = group[i]) callback.call(node, node.__data__, i, group);\n    }\n  }\n\n  return this;\n}\n","export default function() {\n  return !this.node();\n}\n","import sparse from \"./sparse\";\nimport {Selection} from \"./index\";\n\nexport default function() {\n  return new Selection(this._enter || this._groups.map(sparse), this._parents);\n}\n\nexport function EnterNode(parent, datum) {\n  this.ownerDocument = parent.ownerDocument;\n  this.namespaceURI = parent.namespaceURI;\n  this._next = null;\n  this._parent = parent;\n  this.__data__ = datum;\n}\n\nEnterNode.prototype = {\n  constructor: EnterNode,\n  appendChild: function(child) { return this._parent.insertBefore(child, this._next); },\n  insertBefore: function(child, next) { return this._parent.insertBefore(child, next); },\n  querySelector: function(selector) { return this._parent.querySelector(selector); },\n  querySelectorAll: function(selector) { return this._parent.querySelectorAll(selector); }\n};\n","import sparse from \"./sparse\";\nimport {Selection} from \"./index\";\n\nexport default function() {\n  return new Selection(this._exit || this._groups.map(sparse), this._parents);\n}\n","import {Selection} from \"./index\";\nimport matcher from \"../matcher\";\n\nexport default function(match) {\n  if (typeof match !== \"function\") match = matcher(match);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = [], node, i = 0; i < n; ++i) {\n      if ((node = group[i]) && match.call(node, node.__data__, i, group)) {\n        subgroup.push(node);\n      }\n    }\n  }\n\n  return new Selection(subgroups, this._parents);\n}\n","function htmlRemove() {\n  this.innerHTML = \"\";\n}\n\nfunction htmlConstant(value) {\n  return function() {\n    this.innerHTML = value;\n  };\n}\n\nfunction htmlFunction(value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    this.innerHTML = v == null ? \"\" : v;\n  };\n}\n\nexport default function(value) {\n  return arguments.length\n      ? this.each(value == null\n          ? htmlRemove : (typeof value === \"function\"\n          ? htmlFunction\n          : htmlConstant)(value))\n      : this.node().innerHTML;\n}\n","import selection_select from \"./select\";\nimport selection_selectAll from \"./selectAll\";\nimport selection_filter from \"./filter\";\nimport selection_data from \"./data\";\nimport selection_enter from \"./enter\";\nimport selection_exit from \"./exit\";\nimport selection_merge from \"./merge\";\nimport selection_order from \"./order\";\nimport selection_sort from \"./sort\";\nimport selection_call from \"./call\";\nimport selection_nodes from \"./nodes\";\nimport selection_node from \"./node\";\nimport selection_size from \"./size\";\nimport selection_empty from \"./empty\";\nimport selection_each from \"./each\";\nimport selection_attr from \"./attr\";\nimport selection_style from \"./style\";\nimport selection_property from \"./property\";\nimport selection_classed from \"./classed\";\nimport selection_text from \"./text\";\nimport selection_html from \"./html\";\nimport selection_raise from \"./raise\";\nimport selection_lower from \"./lower\";\nimport selection_append from \"./append\";\nimport selection_insert from \"./insert\";\nimport selection_remove from \"./remove\";\nimport selection_clone from \"./clone\";\nimport selection_datum from \"./datum\";\nimport selection_on from \"./on\";\nimport selection_dispatch from \"./dispatch\";\n\nexport var root = [null];\n\nexport function Selection(groups, parents) {\n  this._groups = groups;\n  this._parents = parents;\n}\n\nfunction selection() {\n  return new Selection([[document.documentElement]], root);\n}\n\nSelection.prototype = selection.prototype = {\n  constructor: Selection,\n  select: selection_select,\n  selectAll: selection_selectAll,\n  filter: selection_filter,\n  data: selection_data,\n  enter: selection_enter,\n  exit: selection_exit,\n  merge: selection_merge,\n  order: selection_order,\n  sort: selection_sort,\n  call: selection_call,\n  nodes: selection_nodes,\n  node: selection_node,\n  size: selection_size,\n  empty: selection_empty,\n  each: selection_each,\n  attr: selection_attr,\n  style: selection_style,\n  property: selection_property,\n  classed: selection_classed,\n  text: selection_text,\n  html: selection_html,\n  raise: selection_raise,\n  lower: selection_lower,\n  append: selection_append,\n  insert: selection_insert,\n  remove: selection_remove,\n  clone: selection_clone,\n  datum: selection_datum,\n  on: selection_on,\n  dispatch: selection_dispatch\n};\n\nexport default selection;\n","import creator from \"../creator\";\nimport selector from \"../selector\";\n\nfunction constantNull() {\n  return null;\n}\n\nexport default function(name, before) {\n  var create = typeof name === \"function\" ? name : creator(name),\n      select = before == null ? constantNull : typeof before === \"function\" ? before : selector(before);\n  return this.select(function() {\n    return this.insertBefore(create.apply(this, arguments), select.apply(this, arguments) || null);\n  });\n}\n","function lower() {\n  if (this.previousSibling) this.parentNode.insertBefore(this, this.parentNode.firstChild);\n}\n\nexport default function() {\n  return this.each(lower);\n}\n","import {Selection} from \"./index\";\n\nexport default function(selection) {\n\n  for (var groups0 = this._groups, groups1 = selection._groups, m0 = groups0.length, m1 = groups1.length, m = Math.min(m0, m1), merges = new Array(m0), j = 0; j < m; ++j) {\n    for (var group0 = groups0[j], group1 = groups1[j], n = group0.length, merge = merges[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group0[i] || group1[i]) {\n        merge[i] = node;\n      }\n    }\n  }\n\n  for (; j < m0; ++j) {\n    merges[j] = groups0[j];\n  }\n\n  return new Selection(merges, this._parents);\n}\n","export default function() {\n\n  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {\n    for (var group = groups[j], i = 0, n = group.length; i < n; ++i) {\n      var node = group[i];\n      if (node) return node;\n    }\n  }\n\n  return null;\n}\n","export default function() {\n  var nodes = new Array(this.size()), i = -1;\n  this.each(function() { nodes[++i] = this; });\n  return nodes;\n}\n","var filterEvents = {};\n\nexport var event = null;\n\nif (typeof document !== \"undefined\") {\n  var element = document.documentElement;\n  if (!(\"onmouseenter\" in element)) {\n    filterEvents = {mouseenter: \"mouseover\", mouseleave: \"mouseout\"};\n  }\n}\n\nfunction filterContextListener(listener, index, group) {\n  listener = contextListener(listener, index, group);\n  return function(event) {\n    var related = event.relatedTarget;\n    if (!related || (related !== this && !(related.compareDocumentPosition(this) & 8))) {\n      listener.call(this, event);\n    }\n  };\n}\n\nfunction contextListener(listener, index, group) {\n  return function(event1) {\n    var event0 = event; // Events can be reentrant (e.g., focus).\n    event = event1;\n    try {\n      listener.call(this, this.__data__, index, group);\n    } finally {\n      event = event0;\n    }\n  };\n}\n\nfunction parseTypenames(typenames) {\n  return typenames.trim().split(/^|\\s+/).map(function(t) {\n    var name = \"\", i = t.indexOf(\".\");\n    if (i >= 0) name = t.slice(i + 1), t = t.slice(0, i);\n    return {type: t, name: name};\n  });\n}\n\nfunction onRemove(typename) {\n  return function() {\n    var on = this.__on;\n    if (!on) return;\n    for (var j = 0, i = -1, m = on.length, o; j < m; ++j) {\n      if (o = on[j], (!typename.type || o.type === typename.type) && o.name === typename.name) {\n        this.removeEventListener(o.type, o.listener, o.capture);\n      } else {\n        on[++i] = o;\n      }\n    }\n    if (++i) on.length = i;\n    else delete this.__on;\n  };\n}\n\nfunction onAdd(typename, value, capture) {\n  var wrap = filterEvents.hasOwnProperty(typename.type) ? filterContextListener : contextListener;\n  return function(d, i, group) {\n    var on = this.__on, o, listener = wrap(value, i, group);\n    if (on) for (var j = 0, m = on.length; j < m; ++j) {\n      if ((o = on[j]).type === typename.type && o.name === typename.name) {\n        this.removeEventListener(o.type, o.listener, o.capture);\n        this.addEventListener(o.type, o.listener = listener, o.capture = capture);\n        o.value = value;\n        return;\n      }\n    }\n    this.addEventListener(typename.type, listener, capture);\n    o = {type: typename.type, name: typename.name, value: value, listener: listener, capture: capture};\n    if (!on) this.__on = [o];\n    else on.push(o);\n  };\n}\n\nexport default function(typename, value, capture) {\n  var typenames = parseTypenames(typename + \"\"), i, n = typenames.length, t;\n\n  if (arguments.length < 2) {\n    var on = this.node().__on;\n    if (on) for (var j = 0, m = on.length, o; j < m; ++j) {\n      for (i = 0, o = on[j]; i < n; ++i) {\n        if ((t = typenames[i]).type === o.type && t.name === o.name) {\n          return o.value;\n        }\n      }\n    }\n    return;\n  }\n\n  on = value ? onAdd : onRemove;\n  if (capture == null) capture = false;\n  for (i = 0; i < n; ++i) this.each(on(typenames[i], value, capture));\n  return this;\n}\n\nexport function customEvent(event1, listener, that, args) {\n  var event0 = event;\n  event1.sourceEvent = event;\n  event = event1;\n  try {\n    return listener.apply(that, args);\n  } finally {\n    event = event0;\n  }\n}\n","export default function() {\n\n  for (var groups = this._groups, j = -1, m = groups.length; ++j < m;) {\n    for (var group = groups[j], i = group.length - 1, next = group[i], node; --i >= 0;) {\n      if (node = group[i]) {\n        if (next && next !== node.nextSibling) next.parentNode.insertBefore(node, next);\n        next = node;\n      }\n    }\n  }\n\n  return this;\n}\n","function propertyRemove(name) {\n  return function() {\n    delete this[name];\n  };\n}\n\nfunction propertyConstant(name, value) {\n  return function() {\n    this[name] = value;\n  };\n}\n\nfunction propertyFunction(name, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) delete this[name];\n    else this[name] = v;\n  };\n}\n\nexport default function(name, value) {\n  return arguments.length > 1\n      ? this.each((value == null\n          ? propertyRemove : typeof value === \"function\"\n          ? propertyFunction\n          : propertyConstant)(name, value))\n      : this.node()[name];\n}\n","function raise() {\n  if (this.nextSibling) this.parentNode.appendChild(this);\n}\n\nexport default function() {\n  return this.each(raise);\n}\n","function remove() {\n  var parent = this.parentNode;\n  if (parent) parent.removeChild(this);\n}\n\nexport default function() {\n  return this.each(remove);\n}\n","import {Selection} from \"./index\";\nimport selector from \"../selector\";\n\nexport default function(select) {\n  if (typeof select !== \"function\") select = selector(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = new Array(n), node, subnode, i = 0; i < n; ++i) {\n      if ((node = group[i]) && (subnode = select.call(node, node.__data__, i, group))) {\n        if (\"__data__\" in node) subnode.__data__ = node.__data__;\n        subgroup[i] = subnode;\n      }\n    }\n  }\n\n  return new Selection(subgroups, this._parents);\n}\n","import {Selection} from \"./index\";\nimport selectorAll from \"../selectorAll\";\n\nexport default function(select) {\n  if (typeof select !== \"function\") select = selectorAll(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = [], parents = [], j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        subgroups.push(select.call(node, node.__data__, i, group));\n        parents.push(node);\n      }\n    }\n  }\n\n  return new Selection(subgroups, parents);\n}\n","export default function() {\n  var size = 0;\n  this.each(function() { ++size; });\n  return size;\n}\n","import {Selection} from \"./index\";\n\nexport default function(compare) {\n  if (!compare) compare = ascending;\n\n  function compareNode(a, b) {\n    return a && b ? compare(a.__data__, b.__data__) : !a - !b;\n  }\n\n  for (var groups = this._groups, m = groups.length, sortgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, sortgroup = sortgroups[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        sortgroup[i] = node;\n      }\n    }\n    sortgroup.sort(compareNode);\n  }\n\n  return new Selection(sortgroups, this._parents).order();\n}\n\nfunction ascending(a, b) {\n  return a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;\n}\n","export default function(update) {\n  return new Array(update.length);\n}\n","import defaultView from \"../window\";\n\nfunction styleRemove(name) {\n  return function() {\n    this.style.removeProperty(name);\n  };\n}\n\nfunction styleConstant(name, value, priority) {\n  return function() {\n    this.style.setProperty(name, value, priority);\n  };\n}\n\nfunction styleFunction(name, value, priority) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.style.removeProperty(name);\n    else this.style.setProperty(name, v, priority);\n  };\n}\n\nexport default function(name, value, priority) {\n  return arguments.length > 1\n      ? this.each((value == null\n            ? styleRemove : typeof value === \"function\"\n            ? styleFunction\n            : styleConstant)(name, value, priority == null ? \"\" : priority))\n      : styleValue(this.node(), name);\n}\n\nexport function styleValue(node, name) {\n  return node.style.getPropertyValue(name)\n      || defaultView(node).getComputedStyle(node, null).getPropertyValue(name);\n}\n","function textRemove() {\n  this.textContent = \"\";\n}\n\nfunction textConstant(value) {\n  return function() {\n    this.textContent = value;\n  };\n}\n\nfunction textFunction(value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    this.textContent = v == null ? \"\" : v;\n  };\n}\n\nexport default function(value) {\n  return arguments.length\n      ? this.each(value == null\n          ? textRemove : (typeof value === \"function\"\n          ? textFunction\n          : textConstant)(value))\n      : this.node().textContent;\n}\n","function none() {}\n\nexport default function(selector) {\n  return selector == null ? none : function() {\n    return this.querySelector(selector);\n  };\n}\n","function empty() {\n  return [];\n}\n\nexport default function(selector) {\n  return selector == null ? empty : function() {\n    return this.querySelectorAll(selector);\n  };\n}\n","import {event} from \"./selection/on\";\n\nexport default function() {\n  var current = event, source;\n  while (source = current.sourceEvent) current = source;\n  return current;\n}\n","import sourceEvent from \"./sourceEvent\";\nimport point from \"./point\";\n\nexport default function(node, touches, identifier) {\n  if (arguments.length < 3) identifier = touches, touches = sourceEvent().changedTouches;\n\n  for (var i = 0, n = touches ? touches.length : 0, touch; i < n; ++i) {\n    if ((touch = touches[i]).identifier === identifier) {\n      return point(node, touch);\n    }\n  }\n\n  return null;\n}\n","import sourceEvent from \"./sourceEvent\";\nimport point from \"./point\";\n\nexport default function(node, touches) {\n  if (touches == null) touches = sourceEvent().touches;\n\n  for (var i = 0, n = touches ? touches.length : 0, points = new Array(n); i < n; ++i) {\n    points[i] = point(node, touches[i]);\n  }\n\n  return points;\n}\n","export default function(node) {\n  return (node.ownerDocument && node.ownerDocument.defaultView) // node is a Node\n      || (node.document && node) // node is a Window\n      || node.defaultView; // node is a Document\n}\n","export {default as arc} from \"./src/arc\";\nexport {default as area} from \"./src/area\";\nexport {default as line} from \"./src/line\";\nexport {default as pie} from \"./src/pie\";\nexport {default as areaRadial, default as radialArea} from \"./src/areaRadial\"; // Note: radialArea is deprecated!\nexport {default as lineRadial, default as radialLine} from \"./src/lineRadial\"; // Note: radialLine is deprecated!\nexport {default as pointRadial} from \"./src/pointRadial\";\nexport {linkHorizontal, linkVertical, linkRadial} from \"./src/link/index\";\n\nexport {default as symbol, symbols} from \"./src/symbol\";\nexport {default as symbolCircle} from \"./src/symbol/circle\";\nexport {default as symbolCross} from \"./src/symbol/cross\";\nexport {default as symbolDiamond} from \"./src/symbol/diamond\";\nexport {default as symbolSquare} from \"./src/symbol/square\";\nexport {default as symbolStar} from \"./src/symbol/star\";\nexport {default as symbolTriangle} from \"./src/symbol/triangle\";\nexport {default as symbolWye} from \"./src/symbol/wye\";\n\nexport {default as curveBasisClosed} from \"./src/curve/basisClosed\";\nexport {default as curveBasisOpen} from \"./src/curve/basisOpen\";\nexport {default as curveBasis} from \"./src/curve/basis\";\nexport {default as curveBundle} from \"./src/curve/bundle\";\nexport {default as curveCardinalClosed} from \"./src/curve/cardinalClosed\";\nexport {default as curveCardinalOpen} from \"./src/curve/cardinalOpen\";\nexport {default as curveCardinal} from \"./src/curve/cardinal\";\nexport {default as curveCatmullRomClosed} from \"./src/curve/catmullRomClosed\";\nexport {default as curveCatmullRomOpen} from \"./src/curve/catmullRomOpen\";\nexport {default as curveCatmullRom} from \"./src/curve/catmullRom\";\nexport {default as curveLinearClosed} from \"./src/curve/linearClosed\";\nexport {default as curveLinear} from \"./src/curve/linear\";\nexport {monotoneX as curveMonotoneX, monotoneY as curveMonotoneY} from \"./src/curve/monotone\";\nexport {default as curveNatural} from \"./src/curve/natural\";\nexport {default as curveStep, stepAfter as curveStepAfter, stepBefore as curveStepBefore} from \"./src/curve/step\";\n\nexport {default as stack} from \"./src/stack\";\nexport {default as stackOffsetExpand} from \"./src/offset/expand\";\nexport {default as stackOffsetDiverging} from \"./src/offset/diverging\";\nexport {default as stackOffsetNone} from \"./src/offset/none\";\nexport {default as stackOffsetSilhouette} from \"./src/offset/silhouette\";\nexport {default as stackOffsetWiggle} from \"./src/offset/wiggle\";\nexport {default as stackOrderAscending} from \"./src/order/ascending\";\nexport {default as stackOrderDescending} from \"./src/order/descending\";\nexport {default as stackOrderInsideOut} from \"./src/order/insideOut\";\nexport {default as stackOrderNone} from \"./src/order/none\";\nexport {default as stackOrderReverse} from \"./src/order/reverse\";\n","import {path} from \"d3-path\";\nimport constant from \"./constant\";\nimport {abs, acos, asin, atan2, cos, epsilon, halfPi, max, min, pi, sin, sqrt, tau} from \"./math\";\n\nfunction arcInnerRadius(d) {\n  return d.innerRadius;\n}\n\nfunction arcOuterRadius(d) {\n  return d.outerRadius;\n}\n\nfunction arcStartAngle(d) {\n  return d.startAngle;\n}\n\nfunction arcEndAngle(d) {\n  return d.endAngle;\n}\n\nfunction arcPadAngle(d) {\n  return d && d.padAngle; // Note: optional!\n}\n\nfunction intersect(x0, y0, x1, y1, x2, y2, x3, y3) {\n  var x10 = x1 - x0, y10 = y1 - y0,\n      x32 = x3 - x2, y32 = y3 - y2,\n      t = (x32 * (y0 - y2) - y32 * (x0 - x2)) / (y32 * x10 - x32 * y10);\n  return [x0 + t * x10, y0 + t * y10];\n}\n\n// Compute perpendicular offset line of length rc.\n// http://mathworld.wolfram.com/Circle-LineIntersection.html\nfunction cornerTangents(x0, y0, x1, y1, r1, rc, cw) {\n  var x01 = x0 - x1,\n      y01 = y0 - y1,\n      lo = (cw ? rc : -rc) / sqrt(x01 * x01 + y01 * y01),\n      ox = lo * y01,\n      oy = -lo * x01,\n      x11 = x0 + ox,\n      y11 = y0 + oy,\n      x10 = x1 + ox,\n      y10 = y1 + oy,\n      x00 = (x11 + x10) / 2,\n      y00 = (y11 + y10) / 2,\n      dx = x10 - x11,\n      dy = y10 - y11,\n      d2 = dx * dx + dy * dy,\n      r = r1 - rc,\n      D = x11 * y10 - x10 * y11,\n      d = (dy < 0 ? -1 : 1) * sqrt(max(0, r * r * d2 - D * D)),\n      cx0 = (D * dy - dx * d) / d2,\n      cy0 = (-D * dx - dy * d) / d2,\n      cx1 = (D * dy + dx * d) / d2,\n      cy1 = (-D * dx + dy * d) / d2,\n      dx0 = cx0 - x00,\n      dy0 = cy0 - y00,\n      dx1 = cx1 - x00,\n      dy1 = cy1 - y00;\n\n  // Pick the closer of the two intersection points.\n  // TODO Is there a faster way to determine which intersection to use?\n  if (dx0 * dx0 + dy0 * dy0 > dx1 * dx1 + dy1 * dy1) cx0 = cx1, cy0 = cy1;\n\n  return {\n    cx: cx0,\n    cy: cy0,\n    x01: -ox,\n    y01: -oy,\n    x11: cx0 * (r1 / r - 1),\n    y11: cy0 * (r1 / r - 1)\n  };\n}\n\nexport default function() {\n  var innerRadius = arcInnerRadius,\n      outerRadius = arcOuterRadius,\n      cornerRadius = constant(0),\n      padRadius = null,\n      startAngle = arcStartAngle,\n      endAngle = arcEndAngle,\n      padAngle = arcPadAngle,\n      context = null;\n\n  function arc() {\n    var buffer,\n        r,\n        r0 = +innerRadius.apply(this, arguments),\n        r1 = +outerRadius.apply(this, arguments),\n        a0 = startAngle.apply(this, arguments) - halfPi,\n        a1 = endAngle.apply(this, arguments) - halfPi,\n        da = abs(a1 - a0),\n        cw = a1 > a0;\n\n    if (!context) context = buffer = path();\n\n    // Ensure that the outer radius is always larger than the inner radius.\n    if (r1 < r0) r = r1, r1 = r0, r0 = r;\n\n    // Is it a point?\n    if (!(r1 > epsilon)) context.moveTo(0, 0);\n\n    // Or is it a circle or annulus?\n    else if (da > tau - epsilon) {\n      context.moveTo(r1 * cos(a0), r1 * sin(a0));\n      context.arc(0, 0, r1, a0, a1, !cw);\n      if (r0 > epsilon) {\n        context.moveTo(r0 * cos(a1), r0 * sin(a1));\n        context.arc(0, 0, r0, a1, a0, cw);\n      }\n    }\n\n    // Or is it a circular or annular sector?\n    else {\n      var a01 = a0,\n          a11 = a1,\n          a00 = a0,\n          a10 = a1,\n          da0 = da,\n          da1 = da,\n          ap = padAngle.apply(this, arguments) / 2,\n          rp = (ap > epsilon) && (padRadius ? +padRadius.apply(this, arguments) : sqrt(r0 * r0 + r1 * r1)),\n          rc = min(abs(r1 - r0) / 2, +cornerRadius.apply(this, arguments)),\n          rc0 = rc,\n          rc1 = rc,\n          t0,\n          t1;\n\n      // Apply padding? Note that since r1  r0, da1  da0.\n      if (rp > epsilon) {\n        var p0 = asin(rp / r0 * sin(ap)),\n            p1 = asin(rp / r1 * sin(ap));\n        if ((da0 -= p0 * 2) > epsilon) p0 *= (cw ? 1 : -1), a00 += p0, a10 -= p0;\n        else da0 = 0, a00 = a10 = (a0 + a1) / 2;\n        if ((da1 -= p1 * 2) > epsilon) p1 *= (cw ? 1 : -1), a01 += p1, a11 -= p1;\n        else da1 = 0, a01 = a11 = (a0 + a1) / 2;\n      }\n\n      var x01 = r1 * cos(a01),\n          y01 = r1 * sin(a01),\n          x10 = r0 * cos(a10),\n          y10 = r0 * sin(a10);\n\n      // Apply rounded corners?\n      if (rc > epsilon) {\n        var x11 = r1 * cos(a11),\n            y11 = r1 * sin(a11),\n            x00 = r0 * cos(a00),\n            y00 = r0 * sin(a00);\n\n        // Restrict the corner radius according to the sector angle.\n        if (da < pi) {\n          var oc = da0 > epsilon ? intersect(x01, y01, x00, y00, x11, y11, x10, y10) : [x10, y10],\n              ax = x01 - oc[0],\n              ay = y01 - oc[1],\n              bx = x11 - oc[0],\n              by = y11 - oc[1],\n              kc = 1 / sin(acos((ax * bx + ay * by) / (sqrt(ax * ax + ay * ay) * sqrt(bx * bx + by * by))) / 2),\n              lc = sqrt(oc[0] * oc[0] + oc[1] * oc[1]);\n          rc0 = min(rc, (r0 - lc) / (kc - 1));\n          rc1 = min(rc, (r1 - lc) / (kc + 1));\n        }\n      }\n\n      // Is the sector collapsed to a line?\n      if (!(da1 > epsilon)) context.moveTo(x01, y01);\n\n      // Does the sectors outer ring have rounded corners?\n      else if (rc1 > epsilon) {\n        t0 = cornerTangents(x00, y00, x01, y01, r1, rc1, cw);\n        t1 = cornerTangents(x11, y11, x10, y10, r1, rc1, cw);\n\n        context.moveTo(t0.cx + t0.x01, t0.cy + t0.y01);\n\n        // Have the corners merged?\n        if (rc1 < rc) context.arc(t0.cx, t0.cy, rc1, atan2(t0.y01, t0.x01), atan2(t1.y01, t1.x01), !cw);\n\n        // Otherwise, draw the two corners and the ring.\n        else {\n          context.arc(t0.cx, t0.cy, rc1, atan2(t0.y01, t0.x01), atan2(t0.y11, t0.x11), !cw);\n          context.arc(0, 0, r1, atan2(t0.cy + t0.y11, t0.cx + t0.x11), atan2(t1.cy + t1.y11, t1.cx + t1.x11), !cw);\n          context.arc(t1.cx, t1.cy, rc1, atan2(t1.y11, t1.x11), atan2(t1.y01, t1.x01), !cw);\n        }\n      }\n\n      // Or is the outer ring just a circular arc?\n      else context.moveTo(x01, y01), context.arc(0, 0, r1, a01, a11, !cw);\n\n      // Is there no inner ring, and its a circular sector?\n      // Or perhaps its an annular sector collapsed due to padding?\n      if (!(r0 > epsilon) || !(da0 > epsilon)) context.lineTo(x10, y10);\n\n      // Does the sectors inner ring (or point) have rounded corners?\n      else if (rc0 > epsilon) {\n        t0 = cornerTangents(x10, y10, x11, y11, r0, -rc0, cw);\n        t1 = cornerTangents(x01, y01, x00, y00, r0, -rc0, cw);\n\n        context.lineTo(t0.cx + t0.x01, t0.cy + t0.y01);\n\n        // Have the corners merged?\n        if (rc0 < rc) context.arc(t0.cx, t0.cy, rc0, atan2(t0.y01, t0.x01), atan2(t1.y01, t1.x01), !cw);\n\n        // Otherwise, draw the two corners and the ring.\n        else {\n          context.arc(t0.cx, t0.cy, rc0, atan2(t0.y01, t0.x01), atan2(t0.y11, t0.x11), !cw);\n          context.arc(0, 0, r0, atan2(t0.cy + t0.y11, t0.cx + t0.x11), atan2(t1.cy + t1.y11, t1.cx + t1.x11), cw);\n          context.arc(t1.cx, t1.cy, rc0, atan2(t1.y11, t1.x11), atan2(t1.y01, t1.x01), !cw);\n        }\n      }\n\n      // Or is the inner ring just a circular arc?\n      else context.arc(0, 0, r0, a10, a00, cw);\n    }\n\n    context.closePath();\n\n    if (buffer) return context = null, buffer + \"\" || null;\n  }\n\n  arc.centroid = function() {\n    var r = (+innerRadius.apply(this, arguments) + +outerRadius.apply(this, arguments)) / 2,\n        a = (+startAngle.apply(this, arguments) + +endAngle.apply(this, arguments)) / 2 - pi / 2;\n    return [cos(a) * r, sin(a) * r];\n  };\n\n  arc.innerRadius = function(_) {\n    return arguments.length ? (innerRadius = typeof _ === \"function\" ? _ : constant(+_), arc) : innerRadius;\n  };\n\n  arc.outerRadius = function(_) {\n    return arguments.length ? (outerRadius = typeof _ === \"function\" ? _ : constant(+_), arc) : outerRadius;\n  };\n\n  arc.cornerRadius = function(_) {\n    return arguments.length ? (cornerRadius = typeof _ === \"function\" ? _ : constant(+_), arc) : cornerRadius;\n  };\n\n  arc.padRadius = function(_) {\n    return arguments.length ? (padRadius = _ == null ? null : typeof _ === \"function\" ? _ : constant(+_), arc) : padRadius;\n  };\n\n  arc.startAngle = function(_) {\n    return arguments.length ? (startAngle = typeof _ === \"function\" ? _ : constant(+_), arc) : startAngle;\n  };\n\n  arc.endAngle = function(_) {\n    return arguments.length ? (endAngle = typeof _ === \"function\" ? _ : constant(+_), arc) : endAngle;\n  };\n\n  arc.padAngle = function(_) {\n    return arguments.length ? (padAngle = typeof _ === \"function\" ? _ : constant(+_), arc) : padAngle;\n  };\n\n  arc.context = function(_) {\n    return arguments.length ? ((context = _ == null ? null : _), arc) : context;\n  };\n\n  return arc;\n}\n","import {path} from \"d3-path\";\nimport constant from \"./constant\";\nimport curveLinear from \"./curve/linear\";\nimport line from \"./line\";\nimport {x as pointX, y as pointY} from \"./point\";\n\nexport default function() {\n  var x0 = pointX,\n      x1 = null,\n      y0 = constant(0),\n      y1 = pointY,\n      defined = constant(true),\n      context = null,\n      curve = curveLinear,\n      output = null;\n\n  function area(data) {\n    var i,\n        j,\n        k,\n        n = data.length,\n        d,\n        defined0 = false,\n        buffer,\n        x0z = new Array(n),\n        y0z = new Array(n);\n\n    if (context == null) output = curve(buffer = path());\n\n    for (i = 0; i <= n; ++i) {\n      if (!(i < n && defined(d = data[i], i, data)) === defined0) {\n        if (defined0 = !defined0) {\n          j = i;\n          output.areaStart();\n          output.lineStart();\n        } else {\n          output.lineEnd();\n          output.lineStart();\n          for (k = i - 1; k >= j; --k) {\n            output.point(x0z[k], y0z[k]);\n          }\n          output.lineEnd();\n          output.areaEnd();\n        }\n      }\n      if (defined0) {\n        x0z[i] = +x0(d, i, data), y0z[i] = +y0(d, i, data);\n        output.point(x1 ? +x1(d, i, data) : x0z[i], y1 ? +y1(d, i, data) : y0z[i]);\n      }\n    }\n\n    if (buffer) return output = null, buffer + \"\" || null;\n  }\n\n  function arealine() {\n    return line().defined(defined).curve(curve).context(context);\n  }\n\n  area.x = function(_) {\n    return arguments.length ? (x0 = typeof _ === \"function\" ? _ : constant(+_), x1 = null, area) : x0;\n  };\n\n  area.x0 = function(_) {\n    return arguments.length ? (x0 = typeof _ === \"function\" ? _ : constant(+_), area) : x0;\n  };\n\n  area.x1 = function(_) {\n    return arguments.length ? (x1 = _ == null ? null : typeof _ === \"function\" ? _ : constant(+_), area) : x1;\n  };\n\n  area.y = function(_) {\n    return arguments.length ? (y0 = typeof _ === \"function\" ? _ : constant(+_), y1 = null, area) : y0;\n  };\n\n  area.y0 = function(_) {\n    return arguments.length ? (y0 = typeof _ === \"function\" ? _ : constant(+_), area) : y0;\n  };\n\n  area.y1 = function(_) {\n    return arguments.length ? (y1 = _ == null ? null : typeof _ === \"function\" ? _ : constant(+_), area) : y1;\n  };\n\n  area.lineX0 =\n  area.lineY0 = function() {\n    return arealine().x(x0).y(y0);\n  };\n\n  area.lineY1 = function() {\n    return arealine().x(x0).y(y1);\n  };\n\n  area.lineX1 = function() {\n    return arealine().x(x1).y(y0);\n  };\n\n  area.defined = function(_) {\n    return arguments.length ? (defined = typeof _ === \"function\" ? _ : constant(!!_), area) : defined;\n  };\n\n  area.curve = function(_) {\n    return arguments.length ? (curve = _, context != null && (output = curve(context)), area) : curve;\n  };\n\n  area.context = function(_) {\n    return arguments.length ? (_ == null ? context = output = null : output = curve(context = _), area) : context;\n  };\n\n  return area;\n}\n","import curveRadial, {curveRadialLinear} from \"./curve/radial\";\nimport area from \"./area\";\nimport {lineRadial} from \"./lineRadial\"\n\nexport default function() {\n  var a = area().curve(curveRadialLinear),\n      c = a.curve,\n      x0 = a.lineX0,\n      x1 = a.lineX1,\n      y0 = a.lineY0,\n      y1 = a.lineY1;\n\n  a.angle = a.x, delete a.x;\n  a.startAngle = a.x0, delete a.x0;\n  a.endAngle = a.x1, delete a.x1;\n  a.radius = a.y, delete a.y;\n  a.innerRadius = a.y0, delete a.y0;\n  a.outerRadius = a.y1, delete a.y1;\n  a.lineStartAngle = function() { return lineRadial(x0()); }, delete a.lineX0;\n  a.lineEndAngle = function() { return lineRadial(x1()); }, delete a.lineX1;\n  a.lineInnerRadius = function() { return lineRadial(y0()); }, delete a.lineY0;\n  a.lineOuterRadius = function() { return lineRadial(y1()); }, delete a.lineY1;\n\n  a.curve = function(_) {\n    return arguments.length ? c(curveRadial(_)) : c()._curve;\n  };\n\n  return a;\n}\n","export var slice = Array.prototype.slice;\n","export default function(x) {\n  return function constant() {\n    return x;\n  };\n}\n","export function point(that, x, y) {\n  that._context.bezierCurveTo(\n    (2 * that._x0 + that._x1) / 3,\n    (2 * that._y0 + that._y1) / 3,\n    (that._x0 + 2 * that._x1) / 3,\n    (that._y0 + 2 * that._y1) / 3,\n    (that._x0 + 4 * that._x1 + x) / 6,\n    (that._y0 + 4 * that._y1 + y) / 6\n  );\n}\n\nexport function Basis(context) {\n  this._context = context;\n}\n\nBasis.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x0 = this._x1 =\n    this._y0 = this._y1 = NaN;\n    this._point = 0;\n  },\n  lineEnd: function() {\n    switch (this._point) {\n      case 3: point(this, this._x1, this._y1); // proceed\n      case 2: this._context.lineTo(this._x1, this._y1); break;\n    }\n    if (this._line || (this._line !== 0 && this._point === 1)) this._context.closePath();\n    this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n    switch (this._point) {\n      case 0: this._point = 1; this._line ? this._context.lineTo(x, y) : this._context.moveTo(x, y); break;\n      case 1: this._point = 2; break;\n      case 2: this._point = 3; this._context.lineTo((5 * this._x0 + this._x1) / 6, (5 * this._y0 + this._y1) / 6); // proceed\n      default: point(this, x, y); break;\n    }\n    this._x0 = this._x1, this._x1 = x;\n    this._y0 = this._y1, this._y1 = y;\n  }\n};\n\nexport default function(context) {\n  return new Basis(context);\n}\n","import noop from \"../noop\";\nimport {point} from \"./basis\";\n\nfunction BasisClosed(context) {\n  this._context = context;\n}\n\nBasisClosed.prototype = {\n  areaStart: noop,\n  areaEnd: noop,\n  lineStart: function() {\n    this._x0 = this._x1 = this._x2 = this._x3 = this._x4 =\n    this._y0 = this._y1 = this._y2 = this._y3 = this._y4 = NaN;\n    this._point = 0;\n  },\n  lineEnd: function() {\n    switch (this._point) {\n      case 1: {\n        this._context.moveTo(this._x2, this._y2);\n        this._context.closePath();\n        break;\n      }\n      case 2: {\n        this._context.moveTo((this._x2 + 2 * this._x3) / 3, (this._y2 + 2 * this._y3) / 3);\n        this._context.lineTo((this._x3 + 2 * this._x2) / 3, (this._y3 + 2 * this._y2) / 3);\n        this._context.closePath();\n        break;\n      }\n      case 3: {\n        this.point(this._x2, this._y2);\n        this.point(this._x3, this._y3);\n        this.point(this._x4, this._y4);\n        break;\n      }\n    }\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n    switch (this._point) {\n      case 0: this._point = 1; this._x2 = x, this._y2 = y; break;\n      case 1: this._point = 2; this._x3 = x, this._y3 = y; break;\n      case 2: this._point = 3; this._x4 = x, this._y4 = y; this._context.moveTo((this._x0 + 4 * this._x1 + x) / 6, (this._y0 + 4 * this._y1 + y) / 6); break;\n      default: point(this, x, y); break;\n    }\n    this._x0 = this._x1, this._x1 = x;\n    this._y0 = this._y1, this._y1 = y;\n  }\n};\n\nexport default function(context) {\n  return new BasisClosed(context);\n}\n","import {point} from \"./basis\";\n\nfunction BasisOpen(context) {\n  this._context = context;\n}\n\nBasisOpen.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x0 = this._x1 =\n    this._y0 = this._y1 = NaN;\n    this._point = 0;\n  },\n  lineEnd: function() {\n    if (this._line || (this._line !== 0 && this._point === 3)) this._context.closePath();\n    this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n    switch (this._point) {\n      case 0: this._point = 1; break;\n      case 1: this._point = 2; break;\n      case 2: this._point = 3; var x0 = (this._x0 + 4 * this._x1 + x) / 6, y0 = (this._y0 + 4 * this._y1 + y) / 6; this._line ? this._context.lineTo(x0, y0) : this._context.moveTo(x0, y0); break;\n      case 3: this._point = 4; // proceed\n      default: point(this, x, y); break;\n    }\n    this._x0 = this._x1, this._x1 = x;\n    this._y0 = this._y1, this._y1 = y;\n  }\n};\n\nexport default function(context) {\n  return new BasisOpen(context);\n}\n","import {Basis} from \"./basis\";\n\nfunction Bundle(context, beta) {\n  this._basis = new Basis(context);\n  this._beta = beta;\n}\n\nBundle.prototype = {\n  lineStart: function() {\n    this._x = [];\n    this._y = [];\n    this._basis.lineStart();\n  },\n  lineEnd: function() {\n    var x = this._x,\n        y = this._y,\n        j = x.length - 1;\n\n    if (j > 0) {\n      var x0 = x[0],\n          y0 = y[0],\n          dx = x[j] - x0,\n          dy = y[j] - y0,\n          i = -1,\n          t;\n\n      while (++i <= j) {\n        t = i / j;\n        this._basis.point(\n          this._beta * x[i] + (1 - this._beta) * (x0 + t * dx),\n          this._beta * y[i] + (1 - this._beta) * (y0 + t * dy)\n        );\n      }\n    }\n\n    this._x = this._y = null;\n    this._basis.lineEnd();\n  },\n  point: function(x, y) {\n    this._x.push(+x);\n    this._y.push(+y);\n  }\n};\n\nexport default (function custom(beta) {\n\n  function bundle(context) {\n    return beta === 1 ? new Basis(context) : new Bundle(context, beta);\n  }\n\n  bundle.beta = function(beta) {\n    return custom(+beta);\n  };\n\n  return bundle;\n})(0.85);\n","export function point(that, x, y) {\n  that._context.bezierCurveTo(\n    that._x1 + that._k * (that._x2 - that._x0),\n    that._y1 + that._k * (that._y2 - that._y0),\n    that._x2 + that._k * (that._x1 - x),\n    that._y2 + that._k * (that._y1 - y),\n    that._x2,\n    that._y2\n  );\n}\n\nexport function Cardinal(context, tension) {\n  this._context = context;\n  this._k = (1 - tension) / 6;\n}\n\nCardinal.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x0 = this._x1 = this._x2 =\n    this._y0 = this._y1 = this._y2 = NaN;\n    this._point = 0;\n  },\n  lineEnd: function() {\n    switch (this._point) {\n      case 2: this._context.lineTo(this._x2, this._y2); break;\n      case 3: point(this, this._x1, this._y1); break;\n    }\n    if (this._line || (this._line !== 0 && this._point === 1)) this._context.closePath();\n    this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n    switch (this._point) {\n      case 0: this._point = 1; this._line ? this._context.lineTo(x, y) : this._context.moveTo(x, y); break;\n      case 1: this._point = 2; this._x1 = x, this._y1 = y; break;\n      case 2: this._point = 3; // proceed\n      default: point(this, x, y); break;\n    }\n    this._x0 = this._x1, this._x1 = this._x2, this._x2 = x;\n    this._y0 = this._y1, this._y1 = this._y2, this._y2 = y;\n  }\n};\n\nexport default (function custom(tension) {\n\n  function cardinal(context) {\n    return new Cardinal(context, tension);\n  }\n\n  cardinal.tension = function(tension) {\n    return custom(+tension);\n  };\n\n  return cardinal;\n})(0);\n","import noop from \"../noop\";\nimport {point} from \"./cardinal\";\n\nexport function CardinalClosed(context, tension) {\n  this._context = context;\n  this._k = (1 - tension) / 6;\n}\n\nCardinalClosed.prototype = {\n  areaStart: noop,\n  areaEnd: noop,\n  lineStart: function() {\n    this._x0 = this._x1 = this._x2 = this._x3 = this._x4 = this._x5 =\n    this._y0 = this._y1 = this._y2 = this._y3 = this._y4 = this._y5 = NaN;\n    this._point = 0;\n  },\n  lineEnd: function() {\n    switch (this._point) {\n      case 1: {\n        this._context.moveTo(this._x3, this._y3);\n        this._context.closePath();\n        break;\n      }\n      case 2: {\n        this._context.lineTo(this._x3, this._y3);\n        this._context.closePath();\n        break;\n      }\n      case 3: {\n        this.point(this._x3, this._y3);\n        this.point(this._x4, this._y4);\n        this.point(this._x5, this._y5);\n        break;\n      }\n    }\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n    switch (this._point) {\n      case 0: this._point = 1; this._x3 = x, this._y3 = y; break;\n      case 1: this._point = 2; this._context.moveTo(this._x4 = x, this._y4 = y); break;\n      case 2: this._point = 3; this._x5 = x, this._y5 = y; break;\n      default: point(this, x, y); break;\n    }\n    this._x0 = this._x1, this._x1 = this._x2, this._x2 = x;\n    this._y0 = this._y1, this._y1 = this._y2, this._y2 = y;\n  }\n};\n\nexport default (function custom(tension) {\n\n  function cardinal(context) {\n    return new CardinalClosed(context, tension);\n  }\n\n  cardinal.tension = function(tension) {\n    return custom(+tension);\n  };\n\n  return cardinal;\n})(0);\n","import {point} from \"./cardinal\";\n\nexport function CardinalOpen(context, tension) {\n  this._context = context;\n  this._k = (1 - tension) / 6;\n}\n\nCardinalOpen.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x0 = this._x1 = this._x2 =\n    this._y0 = this._y1 = this._y2 = NaN;\n    this._point = 0;\n  },\n  lineEnd: function() {\n    if (this._line || (this._line !== 0 && this._point === 3)) this._context.closePath();\n    this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n    switch (this._point) {\n      case 0: this._point = 1; break;\n      case 1: this._point = 2; break;\n      case 2: this._point = 3; this._line ? this._context.lineTo(this._x2, this._y2) : this._context.moveTo(this._x2, this._y2); break;\n      case 3: this._point = 4; // proceed\n      default: point(this, x, y); break;\n    }\n    this._x0 = this._x1, this._x1 = this._x2, this._x2 = x;\n    this._y0 = this._y1, this._y1 = this._y2, this._y2 = y;\n  }\n};\n\nexport default (function custom(tension) {\n\n  function cardinal(context) {\n    return new CardinalOpen(context, tension);\n  }\n\n  cardinal.tension = function(tension) {\n    return custom(+tension);\n  };\n\n  return cardinal;\n})(0);\n","import {epsilon} from \"../math\";\nimport {Cardinal} from \"./cardinal\";\n\nexport function point(that, x, y) {\n  var x1 = that._x1,\n      y1 = that._y1,\n      x2 = that._x2,\n      y2 = that._y2;\n\n  if (that._l01_a > epsilon) {\n    var a = 2 * that._l01_2a + 3 * that._l01_a * that._l12_a + that._l12_2a,\n        n = 3 * that._l01_a * (that._l01_a + that._l12_a);\n    x1 = (x1 * a - that._x0 * that._l12_2a + that._x2 * that._l01_2a) / n;\n    y1 = (y1 * a - that._y0 * that._l12_2a + that._y2 * that._l01_2a) / n;\n  }\n\n  if (that._l23_a > epsilon) {\n    var b = 2 * that._l23_2a + 3 * that._l23_a * that._l12_a + that._l12_2a,\n        m = 3 * that._l23_a * (that._l23_a + that._l12_a);\n    x2 = (x2 * b + that._x1 * that._l23_2a - x * that._l12_2a) / m;\n    y2 = (y2 * b + that._y1 * that._l23_2a - y * that._l12_2a) / m;\n  }\n\n  that._context.bezierCurveTo(x1, y1, x2, y2, that._x2, that._y2);\n}\n\nfunction CatmullRom(context, alpha) {\n  this._context = context;\n  this._alpha = alpha;\n}\n\nCatmullRom.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x0 = this._x1 = this._x2 =\n    this._y0 = this._y1 = this._y2 = NaN;\n    this._l01_a = this._l12_a = this._l23_a =\n    this._l01_2a = this._l12_2a = this._l23_2a =\n    this._point = 0;\n  },\n  lineEnd: function() {\n    switch (this._point) {\n      case 2: this._context.lineTo(this._x2, this._y2); break;\n      case 3: this.point(this._x2, this._y2); break;\n    }\n    if (this._line || (this._line !== 0 && this._point === 1)) this._context.closePath();\n    this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n\n    if (this._point) {\n      var x23 = this._x2 - x,\n          y23 = this._y2 - y;\n      this._l23_a = Math.sqrt(this._l23_2a = Math.pow(x23 * x23 + y23 * y23, this._alpha));\n    }\n\n    switch (this._point) {\n      case 0: this._point = 1; this._line ? this._context.lineTo(x, y) : this._context.moveTo(x, y); break;\n      case 1: this._point = 2; break;\n      case 2: this._point = 3; // proceed\n      default: point(this, x, y); break;\n    }\n\n    this._l01_a = this._l12_a, this._l12_a = this._l23_a;\n    this._l01_2a = this._l12_2a, this._l12_2a = this._l23_2a;\n    this._x0 = this._x1, this._x1 = this._x2, this._x2 = x;\n    this._y0 = this._y1, this._y1 = this._y2, this._y2 = y;\n  }\n};\n\nexport default (function custom(alpha) {\n\n  function catmullRom(context) {\n    return alpha ? new CatmullRom(context, alpha) : new Cardinal(context, 0);\n  }\n\n  catmullRom.alpha = function(alpha) {\n    return custom(+alpha);\n  };\n\n  return catmullRom;\n})(0.5);\n","import {CardinalClosed} from \"./cardinalClosed\";\nimport noop from \"../noop\";\nimport {point} from \"./catmullRom\";\n\nfunction CatmullRomClosed(context, alpha) {\n  this._context = context;\n  this._alpha = alpha;\n}\n\nCatmullRomClosed.prototype = {\n  areaStart: noop,\n  areaEnd: noop,\n  lineStart: function() {\n    this._x0 = this._x1 = this._x2 = this._x3 = this._x4 = this._x5 =\n    this._y0 = this._y1 = this._y2 = this._y3 = this._y4 = this._y5 = NaN;\n    this._l01_a = this._l12_a = this._l23_a =\n    this._l01_2a = this._l12_2a = this._l23_2a =\n    this._point = 0;\n  },\n  lineEnd: function() {\n    switch (this._point) {\n      case 1: {\n        this._context.moveTo(this._x3, this._y3);\n        this._context.closePath();\n        break;\n      }\n      case 2: {\n        this._context.lineTo(this._x3, this._y3);\n        this._context.closePath();\n        break;\n      }\n      case 3: {\n        this.point(this._x3, this._y3);\n        this.point(this._x4, this._y4);\n        this.point(this._x5, this._y5);\n        break;\n      }\n    }\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n\n    if (this._point) {\n      var x23 = this._x2 - x,\n          y23 = this._y2 - y;\n      this._l23_a = Math.sqrt(this._l23_2a = Math.pow(x23 * x23 + y23 * y23, this._alpha));\n    }\n\n    switch (this._point) {\n      case 0: this._point = 1; this._x3 = x, this._y3 = y; break;\n      case 1: this._point = 2; this._context.moveTo(this._x4 = x, this._y4 = y); break;\n      case 2: this._point = 3; this._x5 = x, this._y5 = y; break;\n      default: point(this, x, y); break;\n    }\n\n    this._l01_a = this._l12_a, this._l12_a = this._l23_a;\n    this._l01_2a = this._l12_2a, this._l12_2a = this._l23_2a;\n    this._x0 = this._x1, this._x1 = this._x2, this._x2 = x;\n    this._y0 = this._y1, this._y1 = this._y2, this._y2 = y;\n  }\n};\n\nexport default (function custom(alpha) {\n\n  function catmullRom(context) {\n    return alpha ? new CatmullRomClosed(context, alpha) : new CardinalClosed(context, 0);\n  }\n\n  catmullRom.alpha = function(alpha) {\n    return custom(+alpha);\n  };\n\n  return catmullRom;\n})(0.5);\n","import {CardinalOpen} from \"./cardinalOpen\";\nimport {point} from \"./catmullRom\";\n\nfunction CatmullRomOpen(context, alpha) {\n  this._context = context;\n  this._alpha = alpha;\n}\n\nCatmullRomOpen.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x0 = this._x1 = this._x2 =\n    this._y0 = this._y1 = this._y2 = NaN;\n    this._l01_a = this._l12_a = this._l23_a =\n    this._l01_2a = this._l12_2a = this._l23_2a =\n    this._point = 0;\n  },\n  lineEnd: function() {\n    if (this._line || (this._line !== 0 && this._point === 3)) this._context.closePath();\n    this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n\n    if (this._point) {\n      var x23 = this._x2 - x,\n          y23 = this._y2 - y;\n      this._l23_a = Math.sqrt(this._l23_2a = Math.pow(x23 * x23 + y23 * y23, this._alpha));\n    }\n\n    switch (this._point) {\n      case 0: this._point = 1; break;\n      case 1: this._point = 2; break;\n      case 2: this._point = 3; this._line ? this._context.lineTo(this._x2, this._y2) : this._context.moveTo(this._x2, this._y2); break;\n      case 3: this._point = 4; // proceed\n      default: point(this, x, y); break;\n    }\n\n    this._l01_a = this._l12_a, this._l12_a = this._l23_a;\n    this._l01_2a = this._l12_2a, this._l12_2a = this._l23_2a;\n    this._x0 = this._x1, this._x1 = this._x2, this._x2 = x;\n    this._y0 = this._y1, this._y1 = this._y2, this._y2 = y;\n  }\n};\n\nexport default (function custom(alpha) {\n\n  function catmullRom(context) {\n    return alpha ? new CatmullRomOpen(context, alpha) : new CardinalOpen(context, 0);\n  }\n\n  catmullRom.alpha = function(alpha) {\n    return custom(+alpha);\n  };\n\n  return catmullRom;\n})(0.5);\n","function Linear(context) {\n  this._context = context;\n}\n\nLinear.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._point = 0;\n  },\n  lineEnd: function() {\n    if (this._line || (this._line !== 0 && this._point === 1)) this._context.closePath();\n    this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n    switch (this._point) {\n      case 0: this._point = 1; this._line ? this._context.lineTo(x, y) : this._context.moveTo(x, y); break;\n      case 1: this._point = 2; // proceed\n      default: this._context.lineTo(x, y); break;\n    }\n  }\n};\n\nexport default function(context) {\n  return new Linear(context);\n}\n","import noop from \"../noop\";\n\nfunction LinearClosed(context) {\n  this._context = context;\n}\n\nLinearClosed.prototype = {\n  areaStart: noop,\n  areaEnd: noop,\n  lineStart: function() {\n    this._point = 0;\n  },\n  lineEnd: function() {\n    if (this._point) this._context.closePath();\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n    if (this._point) this._context.lineTo(x, y);\n    else this._point = 1, this._context.moveTo(x, y);\n  }\n};\n\nexport default function(context) {\n  return new LinearClosed(context);\n}\n","function sign(x) {\n  return x < 0 ? -1 : 1;\n}\n\n// Calculate the slopes of the tangents (Hermite-type interpolation) based on\n// the following paper: Steffen, M. 1990. A Simple Method for Monotonic\n// Interpolation in One Dimension. Astronomy and Astrophysics, Vol. 239, NO.\n// NOV(II), P. 443, 1990.\nfunction slope3(that, x2, y2) {\n  var h0 = that._x1 - that._x0,\n      h1 = x2 - that._x1,\n      s0 = (that._y1 - that._y0) / (h0 || h1 < 0 && -0),\n      s1 = (y2 - that._y1) / (h1 || h0 < 0 && -0),\n      p = (s0 * h1 + s1 * h0) / (h0 + h1);\n  return (sign(s0) + sign(s1)) * Math.min(Math.abs(s0), Math.abs(s1), 0.5 * Math.abs(p)) || 0;\n}\n\n// Calculate a one-sided slope.\nfunction slope2(that, t) {\n  var h = that._x1 - that._x0;\n  return h ? (3 * (that._y1 - that._y0) / h - t) / 2 : t;\n}\n\n// According to https://en.wikipedia.org/wiki/Cubic_Hermite_spline#Representations\n// \"you can express cubic Hermite interpolation in terms of cubic Bzier curves\n// with respect to the four values p0, p0 + m0 / 3, p1 - m1 / 3, p1\".\nfunction point(that, t0, t1) {\n  var x0 = that._x0,\n      y0 = that._y0,\n      x1 = that._x1,\n      y1 = that._y1,\n      dx = (x1 - x0) / 3;\n  that._context.bezierCurveTo(x0 + dx, y0 + dx * t0, x1 - dx, y1 - dx * t1, x1, y1);\n}\n\nfunction MonotoneX(context) {\n  this._context = context;\n}\n\nMonotoneX.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x0 = this._x1 =\n    this._y0 = this._y1 =\n    this._t0 = NaN;\n    this._point = 0;\n  },\n  lineEnd: function() {\n    switch (this._point) {\n      case 2: this._context.lineTo(this._x1, this._y1); break;\n      case 3: point(this, this._t0, slope2(this, this._t0)); break;\n    }\n    if (this._line || (this._line !== 0 && this._point === 1)) this._context.closePath();\n    this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    var t1 = NaN;\n\n    x = +x, y = +y;\n    if (x === this._x1 && y === this._y1) return; // Ignore coincident points.\n    switch (this._point) {\n      case 0: this._point = 1; this._line ? this._context.lineTo(x, y) : this._context.moveTo(x, y); break;\n      case 1: this._point = 2; break;\n      case 2: this._point = 3; point(this, slope2(this, t1 = slope3(this, x, y)), t1); break;\n      default: point(this, this._t0, t1 = slope3(this, x, y)); break;\n    }\n\n    this._x0 = this._x1, this._x1 = x;\n    this._y0 = this._y1, this._y1 = y;\n    this._t0 = t1;\n  }\n}\n\nfunction MonotoneY(context) {\n  this._context = new ReflectContext(context);\n}\n\n(MonotoneY.prototype = Object.create(MonotoneX.prototype)).point = function(x, y) {\n  MonotoneX.prototype.point.call(this, y, x);\n};\n\nfunction ReflectContext(context) {\n  this._context = context;\n}\n\nReflectContext.prototype = {\n  moveTo: function(x, y) { this._context.moveTo(y, x); },\n  closePath: function() { this._context.closePath(); },\n  lineTo: function(x, y) { this._context.lineTo(y, x); },\n  bezierCurveTo: function(x1, y1, x2, y2, x, y) { this._context.bezierCurveTo(y1, x1, y2, x2, y, x); }\n};\n\nexport function monotoneX(context) {\n  return new MonotoneX(context);\n}\n\nexport function monotoneY(context) {\n  return new MonotoneY(context);\n}\n","function Natural(context) {\n  this._context = context;\n}\n\nNatural.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x = [];\n    this._y = [];\n  },\n  lineEnd: function() {\n    var x = this._x,\n        y = this._y,\n        n = x.length;\n\n    if (n) {\n      this._line ? this._context.lineTo(x[0], y[0]) : this._context.moveTo(x[0], y[0]);\n      if (n === 2) {\n        this._context.lineTo(x[1], y[1]);\n      } else {\n        var px = controlPoints(x),\n            py = controlPoints(y);\n        for (var i0 = 0, i1 = 1; i1 < n; ++i0, ++i1) {\n          this._context.bezierCurveTo(px[0][i0], py[0][i0], px[1][i0], py[1][i0], x[i1], y[i1]);\n        }\n      }\n    }\n\n    if (this._line || (this._line !== 0 && n === 1)) this._context.closePath();\n    this._line = 1 - this._line;\n    this._x = this._y = null;\n  },\n  point: function(x, y) {\n    this._x.push(+x);\n    this._y.push(+y);\n  }\n};\n\n// See https://www.particleincell.com/2012/bezier-splines/ for derivation.\nfunction controlPoints(x) {\n  var i,\n      n = x.length - 1,\n      m,\n      a = new Array(n),\n      b = new Array(n),\n      r = new Array(n);\n  a[0] = 0, b[0] = 2, r[0] = x[0] + 2 * x[1];\n  for (i = 1; i < n - 1; ++i) a[i] = 1, b[i] = 4, r[i] = 4 * x[i] + 2 * x[i + 1];\n  a[n - 1] = 2, b[n - 1] = 7, r[n - 1] = 8 * x[n - 1] + x[n];\n  for (i = 1; i < n; ++i) m = a[i] / b[i - 1], b[i] -= m, r[i] -= m * r[i - 1];\n  a[n - 1] = r[n - 1] / b[n - 1];\n  for (i = n - 2; i >= 0; --i) a[i] = (r[i] - a[i + 1]) / b[i];\n  b[n - 1] = (x[n] + a[n - 1]) / 2;\n  for (i = 0; i < n - 1; ++i) b[i] = 2 * x[i + 1] - a[i + 1];\n  return [a, b];\n}\n\nexport default function(context) {\n  return new Natural(context);\n}\n","import curveLinear from \"./linear\";\n\nexport var curveRadialLinear = curveRadial(curveLinear);\n\nfunction Radial(curve) {\n  this._curve = curve;\n}\n\nRadial.prototype = {\n  areaStart: function() {\n    this._curve.areaStart();\n  },\n  areaEnd: function() {\n    this._curve.areaEnd();\n  },\n  lineStart: function() {\n    this._curve.lineStart();\n  },\n  lineEnd: function() {\n    this._curve.lineEnd();\n  },\n  point: function(a, r) {\n    this._curve.point(r * Math.sin(a), r * -Math.cos(a));\n  }\n};\n\nexport default function curveRadial(curve) {\n\n  function radial(context) {\n    return new Radial(curve(context));\n  }\n\n  radial._curve = curve;\n\n  return radial;\n}\n","function Step(context, t) {\n  this._context = context;\n  this._t = t;\n}\n\nStep.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x = this._y = NaN;\n    this._point = 0;\n  },\n  lineEnd: function() {\n    if (0 < this._t && this._t < 1 && this._point === 2) this._context.lineTo(this._x, this._y);\n    if (this._line || (this._line !== 0 && this._point === 1)) this._context.closePath();\n    if (this._line >= 0) this._t = 1 - this._t, this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n    switch (this._point) {\n      case 0: this._point = 1; this._line ? this._context.lineTo(x, y) : this._context.moveTo(x, y); break;\n      case 1: this._point = 2; // proceed\n      default: {\n        if (this._t <= 0) {\n          this._context.lineTo(this._x, y);\n          this._context.lineTo(x, y);\n        } else {\n          var x1 = this._x * (1 - this._t) + x * this._t;\n          this._context.lineTo(x1, this._y);\n          this._context.lineTo(x1, y);\n        }\n        break;\n      }\n    }\n    this._x = x, this._y = y;\n  }\n};\n\nexport default function(context) {\n  return new Step(context, 0.5);\n}\n\nexport function stepBefore(context) {\n  return new Step(context, 0);\n}\n\nexport function stepAfter(context) {\n  return new Step(context, 1);\n}\n","export default function(a, b) {\n  return b < a ? -1 : b > a ? 1 : b >= a ? 0 : NaN;\n}\n","export default function(d) {\n  return d;\n}\n","import {path} from \"d3-path\";\nimport constant from \"./constant\";\nimport curveLinear from \"./curve/linear\";\nimport {x as pointX, y as pointY} from \"./point\";\n\nexport default function() {\n  var x = pointX,\n      y = pointY,\n      defined = constant(true),\n      context = null,\n      curve = curveLinear,\n      output = null;\n\n  function line(data) {\n    var i,\n        n = data.length,\n        d,\n        defined0 = false,\n        buffer;\n\n    if (context == null) output = curve(buffer = path());\n\n    for (i = 0; i <= n; ++i) {\n      if (!(i < n && defined(d = data[i], i, data)) === defined0) {\n        if (defined0 = !defined0) output.lineStart();\n        else output.lineEnd();\n      }\n      if (defined0) output.point(+x(d, i, data), +y(d, i, data));\n    }\n\n    if (buffer) return output = null, buffer + \"\" || null;\n  }\n\n  line.x = function(_) {\n    return arguments.length ? (x = typeof _ === \"function\" ? _ : constant(+_), line) : x;\n  };\n\n  line.y = function(_) {\n    return arguments.length ? (y = typeof _ === \"function\" ? _ : constant(+_), line) : y;\n  };\n\n  line.defined = function(_) {\n    return arguments.length ? (defined = typeof _ === \"function\" ? _ : constant(!!_), line) : defined;\n  };\n\n  line.curve = function(_) {\n    return arguments.length ? (curve = _, context != null && (output = curve(context)), line) : curve;\n  };\n\n  line.context = function(_) {\n    return arguments.length ? (_ == null ? context = output = null : output = curve(context = _), line) : context;\n  };\n\n  return line;\n}\n","import curveRadial, {curveRadialLinear} from \"./curve/radial\";\nimport line from \"./line\";\n\nexport function lineRadial(l) {\n  var c = l.curve;\n\n  l.angle = l.x, delete l.x;\n  l.radius = l.y, delete l.y;\n\n  l.curve = function(_) {\n    return arguments.length ? c(curveRadial(_)) : c()._curve;\n  };\n\n  return l;\n}\n\nexport default function() {\n  return lineRadial(line().curve(curveRadialLinear));\n}\n","import {path} from \"d3-path\";\nimport {slice} from \"../array\";\nimport constant from \"../constant\";\nimport {x as pointX, y as pointY} from \"../point\";\nimport pointRadial from \"../pointRadial\";\n\nfunction linkSource(d) {\n  return d.source;\n}\n\nfunction linkTarget(d) {\n  return d.target;\n}\n\nfunction link(curve) {\n  var source = linkSource,\n      target = linkTarget,\n      x = pointX,\n      y = pointY,\n      context = null;\n\n  function link() {\n    var buffer, argv = slice.call(arguments), s = source.apply(this, argv), t = target.apply(this, argv);\n    if (!context) context = buffer = path();\n    curve(context, +x.apply(this, (argv[0] = s, argv)), +y.apply(this, argv), +x.apply(this, (argv[0] = t, argv)), +y.apply(this, argv));\n    if (buffer) return context = null, buffer + \"\" || null;\n  }\n\n  link.source = function(_) {\n    return arguments.length ? (source = _, link) : source;\n  };\n\n  link.target = function(_) {\n    return arguments.length ? (target = _, link) : target;\n  };\n\n  link.x = function(_) {\n    return arguments.length ? (x = typeof _ === \"function\" ? _ : constant(+_), link) : x;\n  };\n\n  link.y = function(_) {\n    return arguments.length ? (y = typeof _ === \"function\" ? _ : constant(+_), link) : y;\n  };\n\n  link.context = function(_) {\n    return arguments.length ? ((context = _ == null ? null : _), link) : context;\n  };\n\n  return link;\n}\n\nfunction curveHorizontal(context, x0, y0, x1, y1) {\n  context.moveTo(x0, y0);\n  context.bezierCurveTo(x0 = (x0 + x1) / 2, y0, x0, y1, x1, y1);\n}\n\nfunction curveVertical(context, x0, y0, x1, y1) {\n  context.moveTo(x0, y0);\n  context.bezierCurveTo(x0, y0 = (y0 + y1) / 2, x1, y0, x1, y1);\n}\n\nfunction curveRadial(context, x0, y0, x1, y1) {\n  var p0 = pointRadial(x0, y0),\n      p1 = pointRadial(x0, y0 = (y0 + y1) / 2),\n      p2 = pointRadial(x1, y0),\n      p3 = pointRadial(x1, y1);\n  context.moveTo(p0[0], p0[1]);\n  context.bezierCurveTo(p1[0], p1[1], p2[0], p2[1], p3[0], p3[1]);\n}\n\nexport function linkHorizontal() {\n  return link(curveHorizontal);\n}\n\nexport function linkVertical() {\n  return link(curveVertical);\n}\n\nexport function linkRadial() {\n  var l = link(curveRadial);\n  l.angle = l.x, delete l.x;\n  l.radius = l.y, delete l.y;\n  return l;\n}\n","export var abs = Math.abs;\nexport var atan2 = Math.atan2;\nexport var cos = Math.cos;\nexport var max = Math.max;\nexport var min = Math.min;\nexport var sin = Math.sin;\nexport var sqrt = Math.sqrt;\n\nexport var epsilon = 1e-12;\nexport var pi = Math.PI;\nexport var halfPi = pi / 2;\nexport var tau = 2 * pi;\n\nexport function acos(x) {\n  return x > 1 ? 0 : x < -1 ? pi : Math.acos(x);\n}\n\nexport function asin(x) {\n  return x >= 1 ? halfPi : x <= -1 ? -halfPi : Math.asin(x);\n}\n","export default function() {}\n","export default function(series, order) {\n  if (!((n = series.length) > 1)) return;\n  for (var i, j = 0, d, dy, yp, yn, n, m = series[order[0]].length; j < m; ++j) {\n    for (yp = yn = 0, i = 0; i < n; ++i) {\n      if ((dy = (d = series[order[i]][j])[1] - d[0]) >= 0) {\n        d[0] = yp, d[1] = yp += dy;\n      } else if (dy < 0) {\n        d[1] = yn, d[0] = yn += dy;\n      } else {\n        d[0] = yp;\n      }\n    }\n  }\n}\n","import none from \"./none\";\n\nexport default function(series, order) {\n  if (!((n = series.length) > 0)) return;\n  for (var i, n, j = 0, m = series[0].length, y; j < m; ++j) {\n    for (y = i = 0; i < n; ++i) y += series[i][j][1] || 0;\n    if (y) for (i = 0; i < n; ++i) series[i][j][1] /= y;\n  }\n  none(series, order);\n}\n","export default function(series, order) {\n  if (!((n = series.length) > 1)) return;\n  for (var i = 1, j, s0, s1 = series[order[0]], n, m = s1.length; i < n; ++i) {\n    s0 = s1, s1 = series[order[i]];\n    for (j = 0; j < m; ++j) {\n      s1[j][1] += s1[j][0] = isNaN(s0[j][1]) ? s0[j][0] : s0[j][1];\n    }\n  }\n}\n","import none from \"./none\";\n\nexport default function(series, order) {\n  if (!((n = series.length) > 0)) return;\n  for (var j = 0, s0 = series[order[0]], n, m = s0.length; j < m; ++j) {\n    for (var i = 0, y = 0; i < n; ++i) y += series[i][j][1] || 0;\n    s0[j][1] += s0[j][0] = -y / 2;\n  }\n  none(series, order);\n}\n","import none from \"./none\";\n\nexport default function(series, order) {\n  if (!((n = series.length) > 0) || !((m = (s0 = series[order[0]]).length) > 0)) return;\n  for (var y = 0, j = 1, s0, m, n; j < m; ++j) {\n    for (var i = 0, s1 = 0, s2 = 0; i < n; ++i) {\n      var si = series[order[i]],\n          sij0 = si[j][1] || 0,\n          sij1 = si[j - 1][1] || 0,\n          s3 = (sij0 - sij1) / 2;\n      for (var k = 0; k < i; ++k) {\n        var sk = series[order[k]],\n            skj0 = sk[j][1] || 0,\n            skj1 = sk[j - 1][1] || 0;\n        s3 += skj0 - skj1;\n      }\n      s1 += sij0, s2 += s3 * sij0;\n    }\n    s0[j - 1][1] += s0[j - 1][0] = y;\n    if (s1) y -= s2 / s1;\n  }\n  s0[j - 1][1] += s0[j - 1][0] = y;\n  none(series, order);\n}\n","import none from \"./none\";\n\nexport default function(series) {\n  var sums = series.map(sum);\n  return none(series).sort(function(a, b) { return sums[a] - sums[b]; });\n}\n\nexport function sum(series) {\n  var s = 0, i = -1, n = series.length, v;\n  while (++i < n) if (v = +series[i][1]) s += v;\n  return s;\n}\n","import ascending from \"./ascending\";\n\nexport default function(series) {\n  return ascending(series).reverse();\n}\n","import none from \"./none\";\nimport {sum} from \"./ascending\";\n\nexport default function(series) {\n  var n = series.length,\n      i,\n      j,\n      sums = series.map(sum),\n      order = none(series).sort(function(a, b) { return sums[b] - sums[a]; }),\n      top = 0,\n      bottom = 0,\n      tops = [],\n      bottoms = [];\n\n  for (i = 0; i < n; ++i) {\n    j = order[i];\n    if (top < bottom) {\n      top += sums[j];\n      tops.push(j);\n    } else {\n      bottom += sums[j];\n      bottoms.push(j);\n    }\n  }\n\n  return bottoms.reverse().concat(tops);\n}\n","export default function(series) {\n  var n = series.length, o = new Array(n);\n  while (--n >= 0) o[n] = n;\n  return o;\n}\n","import none from \"./none\";\n\nexport default function(series) {\n  return none(series).reverse();\n}\n","import constant from \"./constant\";\nimport descending from \"./descending\";\nimport identity from \"./identity\";\nimport {tau} from \"./math\";\n\nexport default function() {\n  var value = identity,\n      sortValues = descending,\n      sort = null,\n      startAngle = constant(0),\n      endAngle = constant(tau),\n      padAngle = constant(0);\n\n  function pie(data) {\n    var i,\n        n = data.length,\n        j,\n        k,\n        sum = 0,\n        index = new Array(n),\n        arcs = new Array(n),\n        a0 = +startAngle.apply(this, arguments),\n        da = Math.min(tau, Math.max(-tau, endAngle.apply(this, arguments) - a0)),\n        a1,\n        p = Math.min(Math.abs(da) / n, padAngle.apply(this, arguments)),\n        pa = p * (da < 0 ? -1 : 1),\n        v;\n\n    for (i = 0; i < n; ++i) {\n      if ((v = arcs[index[i] = i] = +value(data[i], i, data)) > 0) {\n        sum += v;\n      }\n    }\n\n    // Optionally sort the arcs by previously-computed values or by data.\n    if (sortValues != null) index.sort(function(i, j) { return sortValues(arcs[i], arcs[j]); });\n    else if (sort != null) index.sort(function(i, j) { return sort(data[i], data[j]); });\n\n    // Compute the arcs! They are stored in the original data's order.\n    for (i = 0, k = sum ? (da - n * pa) / sum : 0; i < n; ++i, a0 = a1) {\n      j = index[i], v = arcs[j], a1 = a0 + (v > 0 ? v * k : 0) + pa, arcs[j] = {\n        data: data[j],\n        index: i,\n        value: v,\n        startAngle: a0,\n        endAngle: a1,\n        padAngle: p\n      };\n    }\n\n    return arcs;\n  }\n\n  pie.value = function(_) {\n    return arguments.length ? (value = typeof _ === \"function\" ? _ : constant(+_), pie) : value;\n  };\n\n  pie.sortValues = function(_) {\n    return arguments.length ? (sortValues = _, sort = null, pie) : sortValues;\n  };\n\n  pie.sort = function(_) {\n    return arguments.length ? (sort = _, sortValues = null, pie) : sort;\n  };\n\n  pie.startAngle = function(_) {\n    return arguments.length ? (startAngle = typeof _ === \"function\" ? _ : constant(+_), pie) : startAngle;\n  };\n\n  pie.endAngle = function(_) {\n    return arguments.length ? (endAngle = typeof _ === \"function\" ? _ : constant(+_), pie) : endAngle;\n  };\n\n  pie.padAngle = function(_) {\n    return arguments.length ? (padAngle = typeof _ === \"function\" ? _ : constant(+_), pie) : padAngle;\n  };\n\n  return pie;\n}\n","export function x(p) {\n  return p[0];\n}\n\nexport function y(p) {\n  return p[1];\n}\n","export default function(x, y) {\n  return [(y = +y) * Math.cos(x -= Math.PI / 2), y * Math.sin(x)];\n}\n","import {slice} from \"./array\";\nimport constant from \"./constant\";\nimport offsetNone from \"./offset/none\";\nimport orderNone from \"./order/none\";\n\nfunction stackValue(d, key) {\n  return d[key];\n}\n\nexport default function() {\n  var keys = constant([]),\n      order = orderNone,\n      offset = offsetNone,\n      value = stackValue;\n\n  function stack(data) {\n    var kz = keys.apply(this, arguments),\n        i,\n        m = data.length,\n        n = kz.length,\n        sz = new Array(n),\n        oz;\n\n    for (i = 0; i < n; ++i) {\n      for (var ki = kz[i], si = sz[i] = new Array(m), j = 0, sij; j < m; ++j) {\n        si[j] = sij = [0, +value(data[j], ki, j, data)];\n        sij.data = data[j];\n      }\n      si.key = ki;\n    }\n\n    for (i = 0, oz = order(sz); i < n; ++i) {\n      sz[oz[i]].index = i;\n    }\n\n    offset(sz, oz);\n    return sz;\n  }\n\n  stack.keys = function(_) {\n    return arguments.length ? (keys = typeof _ === \"function\" ? _ : constant(slice.call(_)), stack) : keys;\n  };\n\n  stack.value = function(_) {\n    return arguments.length ? (value = typeof _ === \"function\" ? _ : constant(+_), stack) : value;\n  };\n\n  stack.order = function(_) {\n    return arguments.length ? (order = _ == null ? orderNone : typeof _ === \"function\" ? _ : constant(slice.call(_)), stack) : order;\n  };\n\n  stack.offset = function(_) {\n    return arguments.length ? (offset = _ == null ? offsetNone : _, stack) : offset;\n  };\n\n  return stack;\n}\n","import {path} from \"d3-path\";\nimport circle from \"./symbol/circle\";\nimport cross from \"./symbol/cross\";\nimport diamond from \"./symbol/diamond\";\nimport star from \"./symbol/star\";\nimport square from \"./symbol/square\";\nimport triangle from \"./symbol/triangle\";\nimport wye from \"./symbol/wye\";\nimport constant from \"./constant\";\n\nexport var symbols = [\n  circle,\n  cross,\n  diamond,\n  square,\n  star,\n  triangle,\n  wye\n];\n\nexport default function() {\n  var type = constant(circle),\n      size = constant(64),\n      context = null;\n\n  function symbol() {\n    var buffer;\n    if (!context) context = buffer = path();\n    type.apply(this, arguments).draw(context, +size.apply(this, arguments));\n    if (buffer) return context = null, buffer + \"\" || null;\n  }\n\n  symbol.type = function(_) {\n    return arguments.length ? (type = typeof _ === \"function\" ? _ : constant(_), symbol) : type;\n  };\n\n  symbol.size = function(_) {\n    return arguments.length ? (size = typeof _ === \"function\" ? _ : constant(+_), symbol) : size;\n  };\n\n  symbol.context = function(_) {\n    return arguments.length ? (context = _ == null ? null : _, symbol) : context;\n  };\n\n  return symbol;\n}\n","import {pi, tau} from \"../math\";\n\nexport default {\n  draw: function(context, size) {\n    var r = Math.sqrt(size / pi);\n    context.moveTo(r, 0);\n    context.arc(0, 0, r, 0, tau);\n  }\n};\n","export default {\n  draw: function(context, size) {\n    var r = Math.sqrt(size / 5) / 2;\n    context.moveTo(-3 * r, -r);\n    context.lineTo(-r, -r);\n    context.lineTo(-r, -3 * r);\n    context.lineTo(r, -3 * r);\n    context.lineTo(r, -r);\n    context.lineTo(3 * r, -r);\n    context.lineTo(3 * r, r);\n    context.lineTo(r, r);\n    context.lineTo(r, 3 * r);\n    context.lineTo(-r, 3 * r);\n    context.lineTo(-r, r);\n    context.lineTo(-3 * r, r);\n    context.closePath();\n  }\n};\n","var tan30 = Math.sqrt(1 / 3),\n    tan30_2 = tan30 * 2;\n\nexport default {\n  draw: function(context, size) {\n    var y = Math.sqrt(size / tan30_2),\n        x = y * tan30;\n    context.moveTo(0, -y);\n    context.lineTo(x, 0);\n    context.lineTo(0, y);\n    context.lineTo(-x, 0);\n    context.closePath();\n  }\n};\n","export default {\n  draw: function(context, size) {\n    var w = Math.sqrt(size),\n        x = -w / 2;\n    context.rect(x, x, w, w);\n  }\n};\n","import {pi, tau} from \"../math\";\n\nvar ka = 0.89081309152928522810,\n    kr = Math.sin(pi / 10) / Math.sin(7 * pi / 10),\n    kx = Math.sin(tau / 10) * kr,\n    ky = -Math.cos(tau / 10) * kr;\n\nexport default {\n  draw: function(context, size) {\n    var r = Math.sqrt(size * ka),\n        x = kx * r,\n        y = ky * r;\n    context.moveTo(0, -r);\n    context.lineTo(x, y);\n    for (var i = 1; i < 5; ++i) {\n      var a = tau * i / 5,\n          c = Math.cos(a),\n          s = Math.sin(a);\n      context.lineTo(s * r, -c * r);\n      context.lineTo(c * x - s * y, s * x + c * y);\n    }\n    context.closePath();\n  }\n};\n","var sqrt3 = Math.sqrt(3);\n\nexport default {\n  draw: function(context, size) {\n    var y = -Math.sqrt(size / (sqrt3 * 3));\n    context.moveTo(0, y * 2);\n    context.lineTo(-sqrt3 * y, -y);\n    context.lineTo(sqrt3 * y, -y);\n    context.closePath();\n  }\n};\n","var c = -0.5,\n    s = Math.sqrt(3) / 2,\n    k = 1 / Math.sqrt(12),\n    a = (k / 2 + 1) * 3;\n\nexport default {\n  draw: function(context, size) {\n    var r = Math.sqrt(size / a),\n        x0 = r / 2,\n        y0 = r * k,\n        x1 = x0,\n        y1 = r * k + r,\n        x2 = -x1,\n        y2 = y1;\n    context.moveTo(x0, y0);\n    context.lineTo(x1, y1);\n    context.lineTo(x2, y2);\n    context.lineTo(c * x0 - s * y0, s * x0 + c * y0);\n    context.lineTo(c * x1 - s * y1, s * x1 + c * y1);\n    context.lineTo(c * x2 - s * y2, s * x2 + c * y2);\n    context.lineTo(c * x0 + s * y0, c * y0 - s * x0);\n    context.lineTo(c * x1 + s * y1, c * y1 - s * x1);\n    context.lineTo(c * x2 + s * y2, c * y2 - s * x2);\n    context.closePath();\n  }\n};\n","export {default as timeFormatDefaultLocale, timeFormat, timeParse, utcFormat, utcParse} from \"./src/defaultLocale\";\nexport {default as timeFormatLocale} from \"./src/locale\";\nexport {default as isoFormat} from \"./src/isoFormat\";\nexport {default as isoParse} from \"./src/isoParse\";\n","import formatLocale from \"./locale\";\n\nvar locale;\nexport var timeFormat;\nexport var timeParse;\nexport var utcFormat;\nexport var utcParse;\n\ndefaultLocale({\n  dateTime: \"%x, %X\",\n  date: \"%-m/%-d/%Y\",\n  time: \"%-I:%M:%S %p\",\n  periods: [\"AM\", \"PM\"],\n  days: [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"],\n  shortDays: [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"],\n  months: [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"],\n  shortMonths: [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"]\n});\n\nexport default function defaultLocale(definition) {\n  locale = formatLocale(definition);\n  timeFormat = locale.format;\n  timeParse = locale.parse;\n  utcFormat = locale.utcFormat;\n  utcParse = locale.utcParse;\n  return locale;\n}\n","import {utcFormat} from \"./defaultLocale\";\n\nexport var isoSpecifier = \"%Y-%m-%dT%H:%M:%S.%LZ\";\n\nfunction formatIsoNative(date) {\n  return date.toISOString();\n}\n\nvar formatIso = Date.prototype.toISOString\n    ? formatIsoNative\n    : utcFormat(isoSpecifier);\n\nexport default formatIso;\n","import {isoSpecifier} from \"./isoFormat\";\nimport {utcParse} from \"./defaultLocale\";\n\nfunction parseIsoNative(string) {\n  var date = new Date(string);\n  return isNaN(date) ? null : date;\n}\n\nvar parseIso = +new Date(\"2000-01-01T00:00:00.000Z\")\n    ? parseIsoNative\n    : utcParse(isoSpecifier);\n\nexport default parseIso;\n","import {\n  timeDay,\n  timeSunday,\n  timeMonday,\n  timeThursday,\n  timeYear,\n  utcDay,\n  utcSunday,\n  utcMonday,\n  utcThursday,\n  utcYear\n} from \"d3-time\";\n\nfunction localDate(d) {\n  if (0 <= d.y && d.y < 100) {\n    var date = new Date(-1, d.m, d.d, d.H, d.M, d.S, d.L);\n    date.setFullYear(d.y);\n    return date;\n  }\n  return new Date(d.y, d.m, d.d, d.H, d.M, d.S, d.L);\n}\n\nfunction utcDate(d) {\n  if (0 <= d.y && d.y < 100) {\n    var date = new Date(Date.UTC(-1, d.m, d.d, d.H, d.M, d.S, d.L));\n    date.setUTCFullYear(d.y);\n    return date;\n  }\n  return new Date(Date.UTC(d.y, d.m, d.d, d.H, d.M, d.S, d.L));\n}\n\nfunction newYear(y) {\n  return {y: y, m: 0, d: 1, H: 0, M: 0, S: 0, L: 0};\n}\n\nexport default function formatLocale(locale) {\n  var locale_dateTime = locale.dateTime,\n      locale_date = locale.date,\n      locale_time = locale.time,\n      locale_periods = locale.periods,\n      locale_weekdays = locale.days,\n      locale_shortWeekdays = locale.shortDays,\n      locale_months = locale.months,\n      locale_shortMonths = locale.shortMonths;\n\n  var periodRe = formatRe(locale_periods),\n      periodLookup = formatLookup(locale_periods),\n      weekdayRe = formatRe(locale_weekdays),\n      weekdayLookup = formatLookup(locale_weekdays),\n      shortWeekdayRe = formatRe(locale_shortWeekdays),\n      shortWeekdayLookup = formatLookup(locale_shortWeekdays),\n      monthRe = formatRe(locale_months),\n      monthLookup = formatLookup(locale_months),\n      shortMonthRe = formatRe(locale_shortMonths),\n      shortMonthLookup = formatLookup(locale_shortMonths);\n\n  var formats = {\n    \"a\": formatShortWeekday,\n    \"A\": formatWeekday,\n    \"b\": formatShortMonth,\n    \"B\": formatMonth,\n    \"c\": null,\n    \"d\": formatDayOfMonth,\n    \"e\": formatDayOfMonth,\n    \"f\": formatMicroseconds,\n    \"H\": formatHour24,\n    \"I\": formatHour12,\n    \"j\": formatDayOfYear,\n    \"L\": formatMilliseconds,\n    \"m\": formatMonthNumber,\n    \"M\": formatMinutes,\n    \"p\": formatPeriod,\n    \"Q\": formatUnixTimestamp,\n    \"s\": formatUnixTimestampSeconds,\n    \"S\": formatSeconds,\n    \"u\": formatWeekdayNumberMonday,\n    \"U\": formatWeekNumberSunday,\n    \"V\": formatWeekNumberISO,\n    \"w\": formatWeekdayNumberSunday,\n    \"W\": formatWeekNumberMonday,\n    \"x\": null,\n    \"X\": null,\n    \"y\": formatYear,\n    \"Y\": formatFullYear,\n    \"Z\": formatZone,\n    \"%\": formatLiteralPercent\n  };\n\n  var utcFormats = {\n    \"a\": formatUTCShortWeekday,\n    \"A\": formatUTCWeekday,\n    \"b\": formatUTCShortMonth,\n    \"B\": formatUTCMonth,\n    \"c\": null,\n    \"d\": formatUTCDayOfMonth,\n    \"e\": formatUTCDayOfMonth,\n    \"f\": formatUTCMicroseconds,\n    \"H\": formatUTCHour24,\n    \"I\": formatUTCHour12,\n    \"j\": formatUTCDayOfYear,\n    \"L\": formatUTCMilliseconds,\n    \"m\": formatUTCMonthNumber,\n    \"M\": formatUTCMinutes,\n    \"p\": formatUTCPeriod,\n    \"Q\": formatUnixTimestamp,\n    \"s\": formatUnixTimestampSeconds,\n    \"S\": formatUTCSeconds,\n    \"u\": formatUTCWeekdayNumberMonday,\n    \"U\": formatUTCWeekNumberSunday,\n    \"V\": formatUTCWeekNumberISO,\n    \"w\": formatUTCWeekdayNumberSunday,\n    \"W\": formatUTCWeekNumberMonday,\n    \"x\": null,\n    \"X\": null,\n    \"y\": formatUTCYear,\n    \"Y\": formatUTCFullYear,\n    \"Z\": formatUTCZone,\n    \"%\": formatLiteralPercent\n  };\n\n  var parses = {\n    \"a\": parseShortWeekday,\n    \"A\": parseWeekday,\n    \"b\": parseShortMonth,\n    \"B\": parseMonth,\n    \"c\": parseLocaleDateTime,\n    \"d\": parseDayOfMonth,\n    \"e\": parseDayOfMonth,\n    \"f\": parseMicroseconds,\n    \"H\": parseHour24,\n    \"I\": parseHour24,\n    \"j\": parseDayOfYear,\n    \"L\": parseMilliseconds,\n    \"m\": parseMonthNumber,\n    \"M\": parseMinutes,\n    \"p\": parsePeriod,\n    \"Q\": parseUnixTimestamp,\n    \"s\": parseUnixTimestampSeconds,\n    \"S\": parseSeconds,\n    \"u\": parseWeekdayNumberMonday,\n    \"U\": parseWeekNumberSunday,\n    \"V\": parseWeekNumberISO,\n    \"w\": parseWeekdayNumberSunday,\n    \"W\": parseWeekNumberMonday,\n    \"x\": parseLocaleDate,\n    \"X\": parseLocaleTime,\n    \"y\": parseYear,\n    \"Y\": parseFullYear,\n    \"Z\": parseZone,\n    \"%\": parseLiteralPercent\n  };\n\n  // These recursive directive definitions must be deferred.\n  formats.x = newFormat(locale_date, formats);\n  formats.X = newFormat(locale_time, formats);\n  formats.c = newFormat(locale_dateTime, formats);\n  utcFormats.x = newFormat(locale_date, utcFormats);\n  utcFormats.X = newFormat(locale_time, utcFormats);\n  utcFormats.c = newFormat(locale_dateTime, utcFormats);\n\n  function newFormat(specifier, formats) {\n    return function(date) {\n      var string = [],\n          i = -1,\n          j = 0,\n          n = specifier.length,\n          c,\n          pad,\n          format;\n\n      if (!(date instanceof Date)) date = new Date(+date);\n\n      while (++i < n) {\n        if (specifier.charCodeAt(i) === 37) {\n          string.push(specifier.slice(j, i));\n          if ((pad = pads[c = specifier.charAt(++i)]) != null) c = specifier.charAt(++i);\n          else pad = c === \"e\" ? \" \" : \"0\";\n          if (format = formats[c]) c = format(date, pad);\n          string.push(c);\n          j = i + 1;\n        }\n      }\n\n      string.push(specifier.slice(j, i));\n      return string.join(\"\");\n    };\n  }\n\n  function newParse(specifier, newDate) {\n    return function(string) {\n      var d = newYear(1900),\n          i = parseSpecifier(d, specifier, string += \"\", 0),\n          week, day;\n      if (i != string.length) return null;\n\n      // If a UNIX timestamp is specified, return it.\n      if (\"Q\" in d) return new Date(d.Q);\n\n      // The am-pm flag is 0 for AM, and 1 for PM.\n      if (\"p\" in d) d.H = d.H % 12 + d.p * 12;\n\n      // Convert day-of-week and week-of-year to day-of-year.\n      if (\"V\" in d) {\n        if (d.V < 1 || d.V > 53) return null;\n        if (!(\"w\" in d)) d.w = 1;\n        if (\"Z\" in d) {\n          week = utcDate(newYear(d.y)), day = week.getUTCDay();\n          week = day > 4 || day === 0 ? utcMonday.ceil(week) : utcMonday(week);\n          week = utcDay.offset(week, (d.V - 1) * 7);\n          d.y = week.getUTCFullYear();\n          d.m = week.getUTCMonth();\n          d.d = week.getUTCDate() + (d.w + 6) % 7;\n        } else {\n          week = newDate(newYear(d.y)), day = week.getDay();\n          week = day > 4 || day === 0 ? timeMonday.ceil(week) : timeMonday(week);\n          week = timeDay.offset(week, (d.V - 1) * 7);\n          d.y = week.getFullYear();\n          d.m = week.getMonth();\n          d.d = week.getDate() + (d.w + 6) % 7;\n        }\n      } else if (\"W\" in d || \"U\" in d) {\n        if (!(\"w\" in d)) d.w = \"u\" in d ? d.u % 7 : \"W\" in d ? 1 : 0;\n        day = \"Z\" in d ? utcDate(newYear(d.y)).getUTCDay() : newDate(newYear(d.y)).getDay();\n        d.m = 0;\n        d.d = \"W\" in d ? (d.w + 6) % 7 + d.W * 7 - (day + 5) % 7 : d.w + d.U * 7 - (day + 6) % 7;\n      }\n\n      // If a time zone is specified, all fields are interpreted as UTC and then\n      // offset according to the specified time zone.\n      if (\"Z\" in d) {\n        d.H += d.Z / 100 | 0;\n        d.M += d.Z % 100;\n        return utcDate(d);\n      }\n\n      // Otherwise, all fields are in local time.\n      return newDate(d);\n    };\n  }\n\n  function parseSpecifier(d, specifier, string, j) {\n    var i = 0,\n        n = specifier.length,\n        m = string.length,\n        c,\n        parse;\n\n    while (i < n) {\n      if (j >= m) return -1;\n      c = specifier.charCodeAt(i++);\n      if (c === 37) {\n        c = specifier.charAt(i++);\n        parse = parses[c in pads ? specifier.charAt(i++) : c];\n        if (!parse || ((j = parse(d, string, j)) < 0)) return -1;\n      } else if (c != string.charCodeAt(j++)) {\n        return -1;\n      }\n    }\n\n    return j;\n  }\n\n  function parsePeriod(d, string, i) {\n    var n = periodRe.exec(string.slice(i));\n    return n ? (d.p = periodLookup[n[0].toLowerCase()], i + n[0].length) : -1;\n  }\n\n  function parseShortWeekday(d, string, i) {\n    var n = shortWeekdayRe.exec(string.slice(i));\n    return n ? (d.w = shortWeekdayLookup[n[0].toLowerCase()], i + n[0].length) : -1;\n  }\n\n  function parseWeekday(d, string, i) {\n    var n = weekdayRe.exec(string.slice(i));\n    return n ? (d.w = weekdayLookup[n[0].toLowerCase()], i + n[0].length) : -1;\n  }\n\n  function parseShortMonth(d, string, i) {\n    var n = shortMonthRe.exec(string.slice(i));\n    return n ? (d.m = shortMonthLookup[n[0].toLowerCase()], i + n[0].length) : -1;\n  }\n\n  function parseMonth(d, string, i) {\n    var n = monthRe.exec(string.slice(i));\n    return n ? (d.m = monthLookup[n[0].toLowerCase()], i + n[0].length) : -1;\n  }\n\n  function parseLocaleDateTime(d, string, i) {\n    return parseSpecifier(d, locale_dateTime, string, i);\n  }\n\n  function parseLocaleDate(d, string, i) {\n    return parseSpecifier(d, locale_date, string, i);\n  }\n\n  function parseLocaleTime(d, string, i) {\n    return parseSpecifier(d, locale_time, string, i);\n  }\n\n  function formatShortWeekday(d) {\n    return locale_shortWeekdays[d.getDay()];\n  }\n\n  function formatWeekday(d) {\n    return locale_weekdays[d.getDay()];\n  }\n\n  function formatShortMonth(d) {\n    return locale_shortMonths[d.getMonth()];\n  }\n\n  function formatMonth(d) {\n    return locale_months[d.getMonth()];\n  }\n\n  function formatPeriod(d) {\n    return locale_periods[+(d.getHours() >= 12)];\n  }\n\n  function formatUTCShortWeekday(d) {\n    return locale_shortWeekdays[d.getUTCDay()];\n  }\n\n  function formatUTCWeekday(d) {\n    return locale_weekdays[d.getUTCDay()];\n  }\n\n  function formatUTCShortMonth(d) {\n    return locale_shortMonths[d.getUTCMonth()];\n  }\n\n  function formatUTCMonth(d) {\n    return locale_months[d.getUTCMonth()];\n  }\n\n  function formatUTCPeriod(d) {\n    return locale_periods[+(d.getUTCHours() >= 12)];\n  }\n\n  return {\n    format: function(specifier) {\n      var f = newFormat(specifier += \"\", formats);\n      f.toString = function() { return specifier; };\n      return f;\n    },\n    parse: function(specifier) {\n      var p = newParse(specifier += \"\", localDate);\n      p.toString = function() { return specifier; };\n      return p;\n    },\n    utcFormat: function(specifier) {\n      var f = newFormat(specifier += \"\", utcFormats);\n      f.toString = function() { return specifier; };\n      return f;\n    },\n    utcParse: function(specifier) {\n      var p = newParse(specifier, utcDate);\n      p.toString = function() { return specifier; };\n      return p;\n    }\n  };\n}\n\nvar pads = {\"-\": \"\", \"_\": \" \", \"0\": \"0\"},\n    numberRe = /^\\s*\\d+/, // note: ignores next directive\n    percentRe = /^%/,\n    requoteRe = /[\\\\^$*+?|[\\]().{}]/g;\n\nfunction pad(value, fill, width) {\n  var sign = value < 0 ? \"-\" : \"\",\n      string = (sign ? -value : value) + \"\",\n      length = string.length;\n  return sign + (length < width ? new Array(width - length + 1).join(fill) + string : string);\n}\n\nfunction requote(s) {\n  return s.replace(requoteRe, \"\\\\$&\");\n}\n\nfunction formatRe(names) {\n  return new RegExp(\"^(?:\" + names.map(requote).join(\"|\") + \")\", \"i\");\n}\n\nfunction formatLookup(names) {\n  var map = {}, i = -1, n = names.length;\n  while (++i < n) map[names[i].toLowerCase()] = i;\n  return map;\n}\n\nfunction parseWeekdayNumberSunday(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 1));\n  return n ? (d.w = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseWeekdayNumberMonday(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 1));\n  return n ? (d.u = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseWeekNumberSunday(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.U = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseWeekNumberISO(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.V = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseWeekNumberMonday(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.W = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseFullYear(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 4));\n  return n ? (d.y = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseYear(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.y = +n[0] + (+n[0] > 68 ? 1900 : 2000), i + n[0].length) : -1;\n}\n\nfunction parseZone(d, string, i) {\n  var n = /^(Z)|([+-]\\d\\d)(?::?(\\d\\d))?/.exec(string.slice(i, i + 6));\n  return n ? (d.Z = n[1] ? 0 : -(n[2] + (n[3] || \"00\")), i + n[0].length) : -1;\n}\n\nfunction parseMonthNumber(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.m = n[0] - 1, i + n[0].length) : -1;\n}\n\nfunction parseDayOfMonth(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.d = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseDayOfYear(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 3));\n  return n ? (d.m = 0, d.d = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseHour24(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.H = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseMinutes(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.M = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseSeconds(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.S = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseMilliseconds(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 3));\n  return n ? (d.L = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseMicroseconds(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 6));\n  return n ? (d.L = Math.floor(n[0] / 1000), i + n[0].length) : -1;\n}\n\nfunction parseLiteralPercent(d, string, i) {\n  var n = percentRe.exec(string.slice(i, i + 1));\n  return n ? i + n[0].length : -1;\n}\n\nfunction parseUnixTimestamp(d, string, i) {\n  var n = numberRe.exec(string.slice(i));\n  return n ? (d.Q = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseUnixTimestampSeconds(d, string, i) {\n  var n = numberRe.exec(string.slice(i));\n  return n ? (d.Q = (+n[0]) * 1000, i + n[0].length) : -1;\n}\n\nfunction formatDayOfMonth(d, p) {\n  return pad(d.getDate(), p, 2);\n}\n\nfunction formatHour24(d, p) {\n  return pad(d.getHours(), p, 2);\n}\n\nfunction formatHour12(d, p) {\n  return pad(d.getHours() % 12 || 12, p, 2);\n}\n\nfunction formatDayOfYear(d, p) {\n  return pad(1 + timeDay.count(timeYear(d), d), p, 3);\n}\n\nfunction formatMilliseconds(d, p) {\n  return pad(d.getMilliseconds(), p, 3);\n}\n\nfunction formatMicroseconds(d, p) {\n  return formatMilliseconds(d, p) + \"000\";\n}\n\nfunction formatMonthNumber(d, p) {\n  return pad(d.getMonth() + 1, p, 2);\n}\n\nfunction formatMinutes(d, p) {\n  return pad(d.getMinutes(), p, 2);\n}\n\nfunction formatSeconds(d, p) {\n  return pad(d.getSeconds(), p, 2);\n}\n\nfunction formatWeekdayNumberMonday(d) {\n  var day = d.getDay();\n  return day === 0 ? 7 : day;\n}\n\nfunction formatWeekNumberSunday(d, p) {\n  return pad(timeSunday.count(timeYear(d), d), p, 2);\n}\n\nfunction formatWeekNumberISO(d, p) {\n  var day = d.getDay();\n  d = (day >= 4 || day === 0) ? timeThursday(d) : timeThursday.ceil(d);\n  return pad(timeThursday.count(timeYear(d), d) + (timeYear(d).getDay() === 4), p, 2);\n}\n\nfunction formatWeekdayNumberSunday(d) {\n  return d.getDay();\n}\n\nfunction formatWeekNumberMonday(d, p) {\n  return pad(timeMonday.count(timeYear(d), d), p, 2);\n}\n\nfunction formatYear(d, p) {\n  return pad(d.getFullYear() % 100, p, 2);\n}\n\nfunction formatFullYear(d, p) {\n  return pad(d.getFullYear() % 10000, p, 4);\n}\n\nfunction formatZone(d) {\n  var z = d.getTimezoneOffset();\n  return (z > 0 ? \"-\" : (z *= -1, \"+\"))\n      + pad(z / 60 | 0, \"0\", 2)\n      + pad(z % 60, \"0\", 2);\n}\n\nfunction formatUTCDayOfMonth(d, p) {\n  return pad(d.getUTCDate(), p, 2);\n}\n\nfunction formatUTCHour24(d, p) {\n  return pad(d.getUTCHours(), p, 2);\n}\n\nfunction formatUTCHour12(d, p) {\n  return pad(d.getUTCHours() % 12 || 12, p, 2);\n}\n\nfunction formatUTCDayOfYear(d, p) {\n  return pad(1 + utcDay.count(utcYear(d), d), p, 3);\n}\n\nfunction formatUTCMilliseconds(d, p) {\n  return pad(d.getUTCMilliseconds(), p, 3);\n}\n\nfunction formatUTCMicroseconds(d, p) {\n  return formatUTCMilliseconds(d, p) + \"000\";\n}\n\nfunction formatUTCMonthNumber(d, p) {\n  return pad(d.getUTCMonth() + 1, p, 2);\n}\n\nfunction formatUTCMinutes(d, p) {\n  return pad(d.getUTCMinutes(), p, 2);\n}\n\nfunction formatUTCSeconds(d, p) {\n  return pad(d.getUTCSeconds(), p, 2);\n}\n\nfunction formatUTCWeekdayNumberMonday(d) {\n  var dow = d.getUTCDay();\n  return dow === 0 ? 7 : dow;\n}\n\nfunction formatUTCWeekNumberSunday(d, p) {\n  return pad(utcSunday.count(utcYear(d), d), p, 2);\n}\n\nfunction formatUTCWeekNumberISO(d, p) {\n  var day = d.getUTCDay();\n  d = (day >= 4 || day === 0) ? utcThursday(d) : utcThursday.ceil(d);\n  return pad(utcThursday.count(utcYear(d), d) + (utcYear(d).getUTCDay() === 4), p, 2);\n}\n\nfunction formatUTCWeekdayNumberSunday(d) {\n  return d.getUTCDay();\n}\n\nfunction formatUTCWeekNumberMonday(d, p) {\n  return pad(utcMonday.count(utcYear(d), d), p, 2);\n}\n\nfunction formatUTCYear(d, p) {\n  return pad(d.getUTCFullYear() % 100, p, 2);\n}\n\nfunction formatUTCFullYear(d, p) {\n  return pad(d.getUTCFullYear() % 10000, p, 4);\n}\n\nfunction formatUTCZone() {\n  return \"+0000\";\n}\n\nfunction formatLiteralPercent() {\n  return \"%\";\n}\n\nfunction formatUnixTimestamp(d) {\n  return +d;\n}\n\nfunction formatUnixTimestampSeconds(d) {\n  return Math.floor(+d / 1000);\n}\n","export {\n  default as timeInterval\n} from \"./src/interval\";\n\nexport {\n  default as timeMillisecond,\n  milliseconds as timeMilliseconds,\n  default as utcMillisecond,\n  milliseconds as utcMilliseconds\n} from \"./src/millisecond\";\n\nexport {\n  default as timeSecond,\n  seconds as timeSeconds,\n  default as utcSecond,\n  seconds as utcSeconds\n} from \"./src/second\";\n\nexport {\n  default as timeMinute,\n  minutes as timeMinutes\n} from \"./src/minute\";\n\nexport {\n  default as timeHour,\n  hours as timeHours\n} from \"./src/hour\";\n\nexport {\n  default as timeDay,\n  days as timeDays\n} from \"./src/day\";\n\nexport {\n  sunday as timeWeek,\n  sundays as timeWeeks,\n  sunday as timeSunday,\n  sundays as timeSundays,\n  monday as timeMonday,\n  mondays as timeMondays,\n  tuesday as timeTuesday,\n  tuesdays as timeTuesdays,\n  wednesday as timeWednesday,\n  wednesdays as timeWednesdays,\n  thursday as timeThursday,\n  thursdays as timeThursdays,\n  friday as timeFriday,\n  fridays as timeFridays,\n  saturday as timeSaturday,\n  saturdays as timeSaturdays\n} from \"./src/week\";\n\nexport {\n  default as timeMonth,\n  months as timeMonths\n} from \"./src/month\";\n\nexport {\n  default as timeYear,\n  years as timeYears\n} from \"./src/year\";\n\nexport {\n  default as utcMinute,\n  utcMinutes as utcMinutes\n} from \"./src/utcMinute\";\n\nexport {\n  default as utcHour,\n  utcHours as utcHours\n} from \"./src/utcHour\";\n\nexport {\n  default as utcDay,\n  utcDays as utcDays\n} from \"./src/utcDay\";\n\nexport {\n  utcSunday as utcWeek,\n  utcSundays as utcWeeks,\n  utcSunday as utcSunday,\n  utcSundays as utcSundays,\n  utcMonday as utcMonday,\n  utcMondays as utcMondays,\n  utcTuesday as utcTuesday,\n  utcTuesdays as utcTuesdays,\n  utcWednesday as utcWednesday,\n  utcWednesdays as utcWednesdays,\n  utcThursday as utcThursday,\n  utcThursdays as utcThursdays,\n  utcFriday as utcFriday,\n  utcFridays as utcFridays,\n  utcSaturday as utcSaturday,\n  utcSaturdays as utcSaturdays\n} from \"./src/utcWeek\";\n\nexport {\n  default as utcMonth,\n  utcMonths as utcMonths\n} from \"./src/utcMonth\";\n\nexport {\n  default as utcYear,\n  utcYears as utcYears\n} from \"./src/utcYear\";\n","import interval from \"./interval\";\nimport {durationDay, durationMinute} from \"./duration\";\n\nvar day = interval(function(date) {\n  date.setHours(0, 0, 0, 0);\n}, function(date, step) {\n  date.setDate(date.getDate() + step);\n}, function(start, end) {\n  return (end - start - (end.getTimezoneOffset() - start.getTimezoneOffset()) * durationMinute) / durationDay;\n}, function(date) {\n  return date.getDate() - 1;\n});\n\nexport default day;\nexport var days = day.range;\n","export var durationSecond = 1e3;\nexport var durationMinute = 6e4;\nexport var durationHour = 36e5;\nexport var durationDay = 864e5;\nexport var durationWeek = 6048e5;\n","import interval from \"./interval\";\nimport {durationHour, durationMinute} from \"./duration\";\n\nvar hour = interval(function(date) {\n  var offset = date.getTimezoneOffset() * durationMinute % durationHour;\n  if (offset < 0) offset += durationHour;\n  date.setTime(Math.floor((+date - offset) / durationHour) * durationHour + offset);\n}, function(date, step) {\n  date.setTime(+date + step * durationHour);\n}, function(start, end) {\n  return (end - start) / durationHour;\n}, function(date) {\n  return date.getHours();\n});\n\nexport default hour;\nexport var hours = hour.range;\n","var t0 = new Date,\n    t1 = new Date;\n\nexport default function newInterval(floori, offseti, count, field) {\n\n  function interval(date) {\n    return floori(date = new Date(+date)), date;\n  }\n\n  interval.floor = interval;\n\n  interval.ceil = function(date) {\n    return floori(date = new Date(date - 1)), offseti(date, 1), floori(date), date;\n  };\n\n  interval.round = function(date) {\n    var d0 = interval(date),\n        d1 = interval.ceil(date);\n    return date - d0 < d1 - date ? d0 : d1;\n  };\n\n  interval.offset = function(date, step) {\n    return offseti(date = new Date(+date), step == null ? 1 : Math.floor(step)), date;\n  };\n\n  interval.range = function(start, stop, step) {\n    var range = [], previous;\n    start = interval.ceil(start);\n    step = step == null ? 1 : Math.floor(step);\n    if (!(start < stop) || !(step > 0)) return range; // also handles Invalid Date\n    do range.push(previous = new Date(+start)), offseti(start, step), floori(start);\n    while (previous < start && start < stop);\n    return range;\n  };\n\n  interval.filter = function(test) {\n    return newInterval(function(date) {\n      if (date >= date) while (floori(date), !test(date)) date.setTime(date - 1);\n    }, function(date, step) {\n      if (date >= date) {\n        if (step < 0) while (++step <= 0) {\n          while (offseti(date, -1), !test(date)) {} // eslint-disable-line no-empty\n        } else while (--step >= 0) {\n          while (offseti(date, +1), !test(date)) {} // eslint-disable-line no-empty\n        }\n      }\n    });\n  };\n\n  if (count) {\n    interval.count = function(start, end) {\n      t0.setTime(+start), t1.setTime(+end);\n      floori(t0), floori(t1);\n      return Math.floor(count(t0, t1));\n    };\n\n    interval.every = function(step) {\n      step = Math.floor(step);\n      return !isFinite(step) || !(step > 0) ? null\n          : !(step > 1) ? interval\n          : interval.filter(field\n              ? function(d) { return field(d) % step === 0; }\n              : function(d) { return interval.count(0, d) % step === 0; });\n    };\n  }\n\n  return interval;\n}\n","import interval from \"./interval\";\n\nvar millisecond = interval(function() {\n  // noop\n}, function(date, step) {\n  date.setTime(+date + step);\n}, function(start, end) {\n  return end - start;\n});\n\n// An optimized implementation for this simple case.\nmillisecond.every = function(k) {\n  k = Math.floor(k);\n  if (!isFinite(k) || !(k > 0)) return null;\n  if (!(k > 1)) return millisecond;\n  return interval(function(date) {\n    date.setTime(Math.floor(date / k) * k);\n  }, function(date, step) {\n    date.setTime(+date + step * k);\n  }, function(start, end) {\n    return (end - start) / k;\n  });\n};\n\nexport default millisecond;\nexport var milliseconds = millisecond.range;\n","import interval from \"./interval\";\nimport {durationMinute} from \"./duration\";\n\nvar minute = interval(function(date) {\n  date.setTime(Math.floor(date / durationMinute) * durationMinute);\n}, function(date, step) {\n  date.setTime(+date + step * durationMinute);\n}, function(start, end) {\n  return (end - start) / durationMinute;\n}, function(date) {\n  return date.getMinutes();\n});\n\nexport default minute;\nexport var minutes = minute.range;\n","import interval from \"./interval\";\n\nvar month = interval(function(date) {\n  date.setDate(1);\n  date.setHours(0, 0, 0, 0);\n}, function(date, step) {\n  date.setMonth(date.getMonth() + step);\n}, function(start, end) {\n  return end.getMonth() - start.getMonth() + (end.getFullYear() - start.getFullYear()) * 12;\n}, function(date) {\n  return date.getMonth();\n});\n\nexport default month;\nexport var months = month.range;\n","import interval from \"./interval\";\nimport {durationSecond} from \"./duration\";\n\nvar second = interval(function(date) {\n  date.setTime(Math.floor(date / durationSecond) * durationSecond);\n}, function(date, step) {\n  date.setTime(+date + step * durationSecond);\n}, function(start, end) {\n  return (end - start) / durationSecond;\n}, function(date) {\n  return date.getUTCSeconds();\n});\n\nexport default second;\nexport var seconds = second.range;\n","import interval from \"./interval\";\nimport {durationDay} from \"./duration\";\n\nvar utcDay = interval(function(date) {\n  date.setUTCHours(0, 0, 0, 0);\n}, function(date, step) {\n  date.setUTCDate(date.getUTCDate() + step);\n}, function(start, end) {\n  return (end - start) / durationDay;\n}, function(date) {\n  return date.getUTCDate() - 1;\n});\n\nexport default utcDay;\nexport var utcDays = utcDay.range;\n","import interval from \"./interval\";\nimport {durationHour} from \"./duration\";\n\nvar utcHour = interval(function(date) {\n  date.setUTCMinutes(0, 0, 0);\n}, function(date, step) {\n  date.setTime(+date + step * durationHour);\n}, function(start, end) {\n  return (end - start) / durationHour;\n}, function(date) {\n  return date.getUTCHours();\n});\n\nexport default utcHour;\nexport var utcHours = utcHour.range;\n","import interval from \"./interval\";\nimport {durationMinute} from \"./duration\";\n\nvar utcMinute = interval(function(date) {\n  date.setUTCSeconds(0, 0);\n}, function(date, step) {\n  date.setTime(+date + step * durationMinute);\n}, function(start, end) {\n  return (end - start) / durationMinute;\n}, function(date) {\n  return date.getUTCMinutes();\n});\n\nexport default utcMinute;\nexport var utcMinutes = utcMinute.range;\n","import interval from \"./interval\";\n\nvar utcMonth = interval(function(date) {\n  date.setUTCDate(1);\n  date.setUTCHours(0, 0, 0, 0);\n}, function(date, step) {\n  date.setUTCMonth(date.getUTCMonth() + step);\n}, function(start, end) {\n  return end.getUTCMonth() - start.getUTCMonth() + (end.getUTCFullYear() - start.getUTCFullYear()) * 12;\n}, function(date) {\n  return date.getUTCMonth();\n});\n\nexport default utcMonth;\nexport var utcMonths = utcMonth.range;\n","import interval from \"./interval\";\nimport {durationWeek} from \"./duration\";\n\nfunction utcWeekday(i) {\n  return interval(function(date) {\n    date.setUTCDate(date.getUTCDate() - (date.getUTCDay() + 7 - i) % 7);\n    date.setUTCHours(0, 0, 0, 0);\n  }, function(date, step) {\n    date.setUTCDate(date.getUTCDate() + step * 7);\n  }, function(start, end) {\n    return (end - start) / durationWeek;\n  });\n}\n\nexport var utcSunday = utcWeekday(0);\nexport var utcMonday = utcWeekday(1);\nexport var utcTuesday = utcWeekday(2);\nexport var utcWednesday = utcWeekday(3);\nexport var utcThursday = utcWeekday(4);\nexport var utcFriday = utcWeekday(5);\nexport var utcSaturday = utcWeekday(6);\n\nexport var utcSundays = utcSunday.range;\nexport var utcMondays = utcMonday.range;\nexport var utcTuesdays = utcTuesday.range;\nexport var utcWednesdays = utcWednesday.range;\nexport var utcThursdays = utcThursday.range;\nexport var utcFridays = utcFriday.range;\nexport var utcSaturdays = utcSaturday.range;\n","import interval from \"./interval\";\n\nvar utcYear = interval(function(date) {\n  date.setUTCMonth(0, 1);\n  date.setUTCHours(0, 0, 0, 0);\n}, function(date, step) {\n  date.setUTCFullYear(date.getUTCFullYear() + step);\n}, function(start, end) {\n  return end.getUTCFullYear() - start.getUTCFullYear();\n}, function(date) {\n  return date.getUTCFullYear();\n});\n\n// An optimized implementation for this simple case.\nutcYear.every = function(k) {\n  return !isFinite(k = Math.floor(k)) || !(k > 0) ? null : interval(function(date) {\n    date.setUTCFullYear(Math.floor(date.getUTCFullYear() / k) * k);\n    date.setUTCMonth(0, 1);\n    date.setUTCHours(0, 0, 0, 0);\n  }, function(date, step) {\n    date.setUTCFullYear(date.getUTCFullYear() + step * k);\n  });\n};\n\nexport default utcYear;\nexport var utcYears = utcYear.range;\n","import interval from \"./interval\";\nimport {durationMinute, durationWeek} from \"./duration\";\n\nfunction weekday(i) {\n  return interval(function(date) {\n    date.setDate(date.getDate() - (date.getDay() + 7 - i) % 7);\n    date.setHours(0, 0, 0, 0);\n  }, function(date, step) {\n    date.setDate(date.getDate() + step * 7);\n  }, function(start, end) {\n    return (end - start - (end.getTimezoneOffset() - start.getTimezoneOffset()) * durationMinute) / durationWeek;\n  });\n}\n\nexport var sunday = weekday(0);\nexport var monday = weekday(1);\nexport var tuesday = weekday(2);\nexport var wednesday = weekday(3);\nexport var thursday = weekday(4);\nexport var friday = weekday(5);\nexport var saturday = weekday(6);\n\nexport var sundays = sunday.range;\nexport var mondays = monday.range;\nexport var tuesdays = tuesday.range;\nexport var wednesdays = wednesday.range;\nexport var thursdays = thursday.range;\nexport var fridays = friday.range;\nexport var saturdays = saturday.range;\n","import interval from \"./interval\";\n\nvar year = interval(function(date) {\n  date.setMonth(0, 1);\n  date.setHours(0, 0, 0, 0);\n}, function(date, step) {\n  date.setFullYear(date.getFullYear() + step);\n}, function(start, end) {\n  return end.getFullYear() - start.getFullYear();\n}, function(date) {\n  return date.getFullYear();\n});\n\n// An optimized implementation for this simple case.\nyear.every = function(k) {\n  return !isFinite(k = Math.floor(k)) || !(k > 0) ? null : interval(function(date) {\n    date.setFullYear(Math.floor(date.getFullYear() / k) * k);\n    date.setMonth(0, 1);\n    date.setHours(0, 0, 0, 0);\n  }, function(date, step) {\n    date.setFullYear(date.getFullYear() + step * k);\n  });\n};\n\nexport default year;\nexport var years = year.range;\n","export {\n  now,\n  timer,\n  timerFlush\n} from \"./src/timer\";\n\nexport {\n  default as timeout\n} from \"./src/timeout\";\n\nexport {\n  default as interval\n} from \"./src/interval\";\n","import {Timer, now} from \"./timer\";\n\nexport default function(callback, delay, time) {\n  var t = new Timer, total = delay;\n  if (delay == null) return t.restart(callback, delay, time), t;\n  delay = +delay, time = time == null ? now() : +time;\n  t.restart(function tick(elapsed) {\n    elapsed += total;\n    t.restart(tick, total += delay, time);\n    callback(elapsed);\n  }, delay, time);\n  return t;\n}\n","import {Timer} from \"./timer\";\n\nexport default function(callback, delay, time) {\n  var t = new Timer;\n  delay = delay == null ? 0 : +delay;\n  t.restart(function(elapsed) {\n    t.stop();\n    callback(elapsed + delay);\n  }, delay, time);\n  return t;\n}\n","var frame = 0, // is an animation frame pending?\n    timeout = 0, // is a timeout pending?\n    interval = 0, // are any timers active?\n    pokeDelay = 1000, // how frequently we check for clock skew\n    taskHead,\n    taskTail,\n    clockLast = 0,\n    clockNow = 0,\n    clockSkew = 0,\n    clock = typeof performance === \"object\" && performance.now ? performance : Date,\n    setFrame = typeof window === \"object\" && window.requestAnimationFrame ? window.requestAnimationFrame.bind(window) : function(f) { setTimeout(f, 17); };\n\nexport function now() {\n  return clockNow || (setFrame(clearNow), clockNow = clock.now() + clockSkew);\n}\n\nfunction clearNow() {\n  clockNow = 0;\n}\n\nexport function Timer() {\n  this._call =\n  this._time =\n  this._next = null;\n}\n\nTimer.prototype = timer.prototype = {\n  constructor: Timer,\n  restart: function(callback, delay, time) {\n    if (typeof callback !== \"function\") throw new TypeError(\"callback is not a function\");\n    time = (time == null ? now() : +time) + (delay == null ? 0 : +delay);\n    if (!this._next && taskTail !== this) {\n      if (taskTail) taskTail._next = this;\n      else taskHead = this;\n      taskTail = this;\n    }\n    this._call = callback;\n    this._time = time;\n    sleep();\n  },\n  stop: function() {\n    if (this._call) {\n      this._call = null;\n      this._time = Infinity;\n      sleep();\n    }\n  }\n};\n\nexport function timer(callback, delay, time) {\n  var t = new Timer;\n  t.restart(callback, delay, time);\n  return t;\n}\n\nexport function timerFlush() {\n  now(); // Get the current time, if not already set.\n  ++frame; // Pretend weve set an alarm, if we havent already.\n  var t = taskHead, e;\n  while (t) {\n    if ((e = clockNow - t._time) >= 0) t._call.call(null, e);\n    t = t._next;\n  }\n  --frame;\n}\n\nfunction wake() {\n  clockNow = (clockLast = clock.now()) + clockSkew;\n  frame = timeout = 0;\n  try {\n    timerFlush();\n  } finally {\n    frame = 0;\n    nap();\n    clockNow = 0;\n  }\n}\n\nfunction poke() {\n  var now = clock.now(), delay = now - clockLast;\n  if (delay > pokeDelay) clockSkew -= delay, clockLast = now;\n}\n\nfunction nap() {\n  var t0, t1 = taskHead, t2, time = Infinity;\n  while (t1) {\n    if (t1._call) {\n      if (time > t1._time) time = t1._time;\n      t0 = t1, t1 = t1._next;\n    } else {\n      t2 = t1._next, t1._next = null;\n      t1 = t0 ? t0._next = t2 : taskHead = t2;\n    }\n  }\n  taskTail = t0;\n  sleep(time);\n}\n\nfunction sleep(time) {\n  if (frame) return; // Soonest alarm already set, or will be.\n  if (timeout) timeout = clearTimeout(timeout);\n  var delay = time - clockNow; // Strictly less than if we recomputed clockNow.\n  if (delay > 24) {\n    if (time < Infinity) timeout = setTimeout(wake, time - clock.now() - clockSkew);\n    if (interval) interval = clearInterval(interval);\n  } else {\n    if (!interval) clockLast = clock.now(), interval = setInterval(poke, pokeDelay);\n    frame = 1, setFrame(wake);\n  }\n}\n","import \"./src/selection/index\";\nexport {default as transition} from \"./src/transition/index\";\nexport {default as active} from \"./src/active\";\nexport {default as interrupt} from \"./src/interrupt\";\n","import {Transition} from \"./transition/index\";\nimport {SCHEDULED} from \"./transition/schedule\";\n\nvar root = [null];\n\nexport default function(node, name) {\n  var schedules = node.__transition,\n      schedule,\n      i;\n\n  if (schedules) {\n    name = name == null ? null : name + \"\";\n    for (i in schedules) {\n      if ((schedule = schedules[i]).state > SCHEDULED && schedule.name === name) {\n        return new Transition([[node]], root, name, +i);\n      }\n    }\n  }\n\n  return null;\n}\n","import {STARTING, ENDING, ENDED} from \"./transition/schedule\";\n\nexport default function(node, name) {\n  var schedules = node.__transition,\n      schedule,\n      active,\n      empty = true,\n      i;\n\n  if (!schedules) return;\n\n  name = name == null ? null : name + \"\";\n\n  for (i in schedules) {\n    if ((schedule = schedules[i]).name !== name) { empty = false; continue; }\n    active = schedule.state > STARTING && schedule.state < ENDING;\n    schedule.state = ENDED;\n    schedule.timer.stop();\n    if (active) schedule.on.call(\"interrupt\", node, node.__data__, schedule.index, schedule.group);\n    delete schedules[i];\n  }\n\n  if (empty) delete node.__transition;\n}\n","import {selection} from \"d3-selection\";\nimport selection_interrupt from \"./interrupt\";\nimport selection_transition from \"./transition\";\n\nselection.prototype.interrupt = selection_interrupt;\nselection.prototype.transition = selection_transition;\n","import interrupt from \"../interrupt\";\n\nexport default function(name) {\n  return this.each(function() {\n    interrupt(this, name);\n  });\n}\n","import {Transition, newId} from \"../transition/index\";\nimport schedule from \"../transition/schedule\";\nimport {easeCubicInOut} from \"d3-ease\";\nimport {now} from \"d3-timer\";\n\nvar defaultTiming = {\n  time: null, // Set on use.\n  delay: 0,\n  duration: 250,\n  ease: easeCubicInOut\n};\n\nfunction inherit(node, id) {\n  var timing;\n  while (!(timing = node.__transition) || !(timing = timing[id])) {\n    if (!(node = node.parentNode)) {\n      return defaultTiming.time = now(), defaultTiming;\n    }\n  }\n  return timing;\n}\n\nexport default function(name) {\n  var id,\n      timing;\n\n  if (name instanceof Transition) {\n    id = name._id, name = name._name;\n  } else {\n    id = newId(), (timing = defaultTiming).time = now(), name = name == null ? null : name + \"\";\n  }\n\n  for (var groups = this._groups, m = groups.length, j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        schedule(node, name, id, i, group, timing || inherit(node, id));\n      }\n    }\n  }\n\n  return new Transition(groups, this._parents, name, id);\n}\n","import {interpolateTransformSvg as interpolateTransform} from \"d3-interpolate\";\nimport {namespace} from \"d3-selection\";\nimport {tweenValue} from \"./tween\";\nimport interpolate from \"./interpolate\";\n\nfunction attrRemove(name) {\n  return function() {\n    this.removeAttribute(name);\n  };\n}\n\nfunction attrRemoveNS(fullname) {\n  return function() {\n    this.removeAttributeNS(fullname.space, fullname.local);\n  };\n}\n\nfunction attrConstant(name, interpolate, value1) {\n  var value00,\n      interpolate0;\n  return function() {\n    var value0 = this.getAttribute(name);\n    return value0 === value1 ? null\n        : value0 === value00 ? interpolate0\n        : interpolate0 = interpolate(value00 = value0, value1);\n  };\n}\n\nfunction attrConstantNS(fullname, interpolate, value1) {\n  var value00,\n      interpolate0;\n  return function() {\n    var value0 = this.getAttributeNS(fullname.space, fullname.local);\n    return value0 === value1 ? null\n        : value0 === value00 ? interpolate0\n        : interpolate0 = interpolate(value00 = value0, value1);\n  };\n}\n\nfunction attrFunction(name, interpolate, value) {\n  var value00,\n      value10,\n      interpolate0;\n  return function() {\n    var value0, value1 = value(this);\n    if (value1 == null) return void this.removeAttribute(name);\n    value0 = this.getAttribute(name);\n    return value0 === value1 ? null\n        : value0 === value00 && value1 === value10 ? interpolate0\n        : interpolate0 = interpolate(value00 = value0, value10 = value1);\n  };\n}\n\nfunction attrFunctionNS(fullname, interpolate, value) {\n  var value00,\n      value10,\n      interpolate0;\n  return function() {\n    var value0, value1 = value(this);\n    if (value1 == null) return void this.removeAttributeNS(fullname.space, fullname.local);\n    value0 = this.getAttributeNS(fullname.space, fullname.local);\n    return value0 === value1 ? null\n        : value0 === value00 && value1 === value10 ? interpolate0\n        : interpolate0 = interpolate(value00 = value0, value10 = value1);\n  };\n}\n\nexport default function(name, value) {\n  var fullname = namespace(name), i = fullname === \"transform\" ? interpolateTransform : interpolate;\n  return this.attrTween(name, typeof value === \"function\"\n      ? (fullname.local ? attrFunctionNS : attrFunction)(fullname, i, tweenValue(this, \"attr.\" + name, value))\n      : value == null ? (fullname.local ? attrRemoveNS : attrRemove)(fullname)\n      : (fullname.local ? attrConstantNS : attrConstant)(fullname, i, value + \"\"));\n}\n","import {namespace} from \"d3-selection\";\n\nfunction attrTweenNS(fullname, value) {\n  function tween() {\n    var node = this, i = value.apply(node, arguments);\n    return i && function(t) {\n      node.setAttributeNS(fullname.space, fullname.local, i(t));\n    };\n  }\n  tween._value = value;\n  return tween;\n}\n\nfunction attrTween(name, value) {\n  function tween() {\n    var node = this, i = value.apply(node, arguments);\n    return i && function(t) {\n      node.setAttribute(name, i(t));\n    };\n  }\n  tween._value = value;\n  return tween;\n}\n\nexport default function(name, value) {\n  var key = \"attr.\" + name;\n  if (arguments.length < 2) return (key = this.tween(key)) && key._value;\n  if (value == null) return this.tween(key, null);\n  if (typeof value !== \"function\") throw new Error;\n  var fullname = namespace(name);\n  return this.tween(key, (fullname.local ? attrTweenNS : attrTween)(fullname, value));\n}\n","import {get, init} from \"./schedule\";\n\nfunction delayFunction(id, value) {\n  return function() {\n    init(this, id).delay = +value.apply(this, arguments);\n  };\n}\n\nfunction delayConstant(id, value) {\n  return value = +value, function() {\n    init(this, id).delay = value;\n  };\n}\n\nexport default function(value) {\n  var id = this._id;\n\n  return arguments.length\n      ? this.each((typeof value === \"function\"\n          ? delayFunction\n          : delayConstant)(id, value))\n      : get(this.node(), id).delay;\n}\n","import {get, set} from \"./schedule\";\n\nfunction durationFunction(id, value) {\n  return function() {\n    set(this, id).duration = +value.apply(this, arguments);\n  };\n}\n\nfunction durationConstant(id, value) {\n  return value = +value, function() {\n    set(this, id).duration = value;\n  };\n}\n\nexport default function(value) {\n  var id = this._id;\n\n  return arguments.length\n      ? this.each((typeof value === \"function\"\n          ? durationFunction\n          : durationConstant)(id, value))\n      : get(this.node(), id).duration;\n}\n","import {get, set} from \"./schedule\";\n\nfunction easeConstant(id, value) {\n  if (typeof value !== \"function\") throw new Error;\n  return function() {\n    set(this, id).ease = value;\n  };\n}\n\nexport default function(value) {\n  var id = this._id;\n\n  return arguments.length\n      ? this.each(easeConstant(id, value))\n      : get(this.node(), id).ease;\n}\n","import {matcher} from \"d3-selection\";\nimport {Transition} from \"./index\";\n\nexport default function(match) {\n  if (typeof match !== \"function\") match = matcher(match);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = [], node, i = 0; i < n; ++i) {\n      if ((node = group[i]) && match.call(node, node.__data__, i, group)) {\n        subgroup.push(node);\n      }\n    }\n  }\n\n  return new Transition(subgroups, this._parents, this._name, this._id);\n}\n","import {selection} from \"d3-selection\";\nimport transition_attr from \"./attr\";\nimport transition_attrTween from \"./attrTween\";\nimport transition_delay from \"./delay\";\nimport transition_duration from \"./duration\";\nimport transition_ease from \"./ease\";\nimport transition_filter from \"./filter\";\nimport transition_merge from \"./merge\";\nimport transition_on from \"./on\";\nimport transition_remove from \"./remove\";\nimport transition_select from \"./select\";\nimport transition_selectAll from \"./selectAll\";\nimport transition_selection from \"./selection\";\nimport transition_style from \"./style\";\nimport transition_styleTween from \"./styleTween\";\nimport transition_text from \"./text\";\nimport transition_transition from \"./transition\";\nimport transition_tween from \"./tween\";\n\nvar id = 0;\n\nexport function Transition(groups, parents, name, id) {\n  this._groups = groups;\n  this._parents = parents;\n  this._name = name;\n  this._id = id;\n}\n\nexport default function transition(name) {\n  return selection().transition(name);\n}\n\nexport function newId() {\n  return ++id;\n}\n\nvar selection_prototype = selection.prototype;\n\nTransition.prototype = transition.prototype = {\n  constructor: Transition,\n  select: transition_select,\n  selectAll: transition_selectAll,\n  filter: transition_filter,\n  merge: transition_merge,\n  selection: transition_selection,\n  transition: transition_transition,\n  call: selection_prototype.call,\n  nodes: selection_prototype.nodes,\n  node: selection_prototype.node,\n  size: selection_prototype.size,\n  empty: selection_prototype.empty,\n  each: selection_prototype.each,\n  on: transition_on,\n  attr: transition_attr,\n  attrTween: transition_attrTween,\n  style: transition_style,\n  styleTween: transition_styleTween,\n  text: transition_text,\n  remove: transition_remove,\n  tween: transition_tween,\n  delay: transition_delay,\n  duration: transition_duration,\n  ease: transition_ease\n};\n","import {color} from \"d3-color\";\nimport {interpolateNumber, interpolateRgb, interpolateString} from \"d3-interpolate\";\n\nexport default function(a, b) {\n  var c;\n  return (typeof b === \"number\" ? interpolateNumber\n      : b instanceof color ? interpolateRgb\n      : (c = color(b)) ? (b = c, interpolateRgb)\n      : interpolateString)(a, b);\n}\n","import {Transition} from \"./index\";\n\nexport default function(transition) {\n  if (transition._id !== this._id) throw new Error;\n\n  for (var groups0 = this._groups, groups1 = transition._groups, m0 = groups0.length, m1 = groups1.length, m = Math.min(m0, m1), merges = new Array(m0), j = 0; j < m; ++j) {\n    for (var group0 = groups0[j], group1 = groups1[j], n = group0.length, merge = merges[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group0[i] || group1[i]) {\n        merge[i] = node;\n      }\n    }\n  }\n\n  for (; j < m0; ++j) {\n    merges[j] = groups0[j];\n  }\n\n  return new Transition(merges, this._parents, this._name, this._id);\n}\n","import {get, set, init} from \"./schedule\";\n\nfunction start(name) {\n  return (name + \"\").trim().split(/^|\\s+/).every(function(t) {\n    var i = t.indexOf(\".\");\n    if (i >= 0) t = t.slice(0, i);\n    return !t || t === \"start\";\n  });\n}\n\nfunction onFunction(id, name, listener) {\n  var on0, on1, sit = start(name) ? init : set;\n  return function() {\n    var schedule = sit(this, id),\n        on = schedule.on;\n\n    // If this node shared a dispatch with the previous node,\n    // just assign the updated shared dispatch and were done!\n    // Otherwise, copy-on-write.\n    if (on !== on0) (on1 = (on0 = on).copy()).on(name, listener);\n\n    schedule.on = on1;\n  };\n}\n\nexport default function(name, listener) {\n  var id = this._id;\n\n  return arguments.length < 2\n      ? get(this.node(), id).on.on(name)\n      : this.each(onFunction(id, name, listener));\n}\n","function removeFunction(id) {\n  return function() {\n    var parent = this.parentNode;\n    for (var i in this.__transition) if (+i !== id) return;\n    if (parent) parent.removeChild(this);\n  };\n}\n\nexport default function() {\n  return this.on(\"end.remove\", removeFunction(this._id));\n}\n","import {dispatch} from \"d3-dispatch\";\nimport {timer, timeout} from \"d3-timer\";\n\nvar emptyOn = dispatch(\"start\", \"end\", \"interrupt\");\nvar emptyTween = [];\n\nexport var CREATED = 0;\nexport var SCHEDULED = 1;\nexport var STARTING = 2;\nexport var STARTED = 3;\nexport var RUNNING = 4;\nexport var ENDING = 5;\nexport var ENDED = 6;\n\nexport default function(node, name, id, index, group, timing) {\n  var schedules = node.__transition;\n  if (!schedules) node.__transition = {};\n  else if (id in schedules) return;\n  create(node, id, {\n    name: name,\n    index: index, // For context during callback.\n    group: group, // For context during callback.\n    on: emptyOn,\n    tween: emptyTween,\n    time: timing.time,\n    delay: timing.delay,\n    duration: timing.duration,\n    ease: timing.ease,\n    timer: null,\n    state: CREATED\n  });\n}\n\nexport function init(node, id) {\n  var schedule = get(node, id);\n  if (schedule.state > CREATED) throw new Error(\"too late; already scheduled\");\n  return schedule;\n}\n\nexport function set(node, id) {\n  var schedule = get(node, id);\n  if (schedule.state > STARTING) throw new Error(\"too late; already started\");\n  return schedule;\n}\n\nexport function get(node, id) {\n  var schedule = node.__transition;\n  if (!schedule || !(schedule = schedule[id])) throw new Error(\"transition not found\");\n  return schedule;\n}\n\nfunction create(node, id, self) {\n  var schedules = node.__transition,\n      tween;\n\n  // Initialize the self timer when the transition is created.\n  // Note the actual delay is not known until the first callback!\n  schedules[id] = self;\n  self.timer = timer(schedule, 0, self.time);\n\n  function schedule(elapsed) {\n    self.state = SCHEDULED;\n    self.timer.restart(start, self.delay, self.time);\n\n    // If the elapsed delay is less than our first sleep, start immediately.\n    if (self.delay <= elapsed) start(elapsed - self.delay);\n  }\n\n  function start(elapsed) {\n    var i, j, n, o;\n\n    // If the state is not SCHEDULED, then we previously errored on start.\n    if (self.state !== SCHEDULED) return stop();\n\n    for (i in schedules) {\n      o = schedules[i];\n      if (o.name !== self.name) continue;\n\n      // While this element already has a starting transition during this frame,\n      // defer starting an interrupting transition until that transition has a\n      // chance to tick (and possibly end); see d3/d3-transition#54!\n      if (o.state === STARTED) return timeout(start);\n\n      // Interrupt the active transition, if any.\n      // Dispatch the interrupt event.\n      if (o.state === RUNNING) {\n        o.state = ENDED;\n        o.timer.stop();\n        o.on.call(\"interrupt\", node, node.__data__, o.index, o.group);\n        delete schedules[i];\n      }\n\n      // Cancel any pre-empted transitions. No interrupt event is dispatched\n      // because the cancelled transitions never started. Note that this also\n      // removes this transition from the pending list!\n      else if (+i < id) {\n        o.state = ENDED;\n        o.timer.stop();\n        delete schedules[i];\n      }\n    }\n\n    // Defer the first tick to end of the current frame; see d3/d3#1576.\n    // Note the transition may be canceled after start and before the first tick!\n    // Note this must be scheduled before the start event; see d3/d3-transition#16!\n    // Assuming this is successful, subsequent callbacks go straight to tick.\n    timeout(function() {\n      if (self.state === STARTED) {\n        self.state = RUNNING;\n        self.timer.restart(tick, self.delay, self.time);\n        tick(elapsed);\n      }\n    });\n\n    // Dispatch the start event.\n    // Note this must be done before the tween are initialized.\n    self.state = STARTING;\n    self.on.call(\"start\", node, node.__data__, self.index, self.group);\n    if (self.state !== STARTING) return; // interrupted\n    self.state = STARTED;\n\n    // Initialize the tween, deleting null tween.\n    tween = new Array(n = self.tween.length);\n    for (i = 0, j = -1; i < n; ++i) {\n      if (o = self.tween[i].value.call(node, node.__data__, self.index, self.group)) {\n        tween[++j] = o;\n      }\n    }\n    tween.length = j + 1;\n  }\n\n  function tick(elapsed) {\n    var t = elapsed < self.duration ? self.ease.call(null, elapsed / self.duration) : (self.timer.restart(stop), self.state = ENDING, 1),\n        i = -1,\n        n = tween.length;\n\n    while (++i < n) {\n      tween[i].call(null, t);\n    }\n\n    // Dispatch the end event.\n    if (self.state === ENDING) {\n      self.on.call(\"end\", node, node.__data__, self.index, self.group);\n      stop();\n    }\n  }\n\n  function stop() {\n    self.state = ENDED;\n    self.timer.stop();\n    delete schedules[id];\n    for (var i in schedules) return; // eslint-disable-line no-unused-vars\n    delete node.__transition;\n  }\n}\n","import {selector} from \"d3-selection\";\nimport {Transition} from \"./index\";\nimport schedule, {get} from \"./schedule\";\n\nexport default function(select) {\n  var name = this._name,\n      id = this._id;\n\n  if (typeof select !== \"function\") select = selector(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = new Array(n), node, subnode, i = 0; i < n; ++i) {\n      if ((node = group[i]) && (subnode = select.call(node, node.__data__, i, group))) {\n        if (\"__data__\" in node) subnode.__data__ = node.__data__;\n        subgroup[i] = subnode;\n        schedule(subgroup[i], name, id, i, subgroup, get(node, id));\n      }\n    }\n  }\n\n  return new Transition(subgroups, this._parents, name, id);\n}\n","import {selectorAll} from \"d3-selection\";\nimport {Transition} from \"./index\";\nimport schedule, {get} from \"./schedule\";\n\nexport default function(select) {\n  var name = this._name,\n      id = this._id;\n\n  if (typeof select !== \"function\") select = selectorAll(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = [], parents = [], j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        for (var children = select.call(node, node.__data__, i, group), child, inherit = get(node, id), k = 0, l = children.length; k < l; ++k) {\n          if (child = children[k]) {\n            schedule(child, name, id, k, children, inherit);\n          }\n        }\n        subgroups.push(children);\n        parents.push(node);\n      }\n    }\n  }\n\n  return new Transition(subgroups, parents, name, id);\n}\n","import {selection} from \"d3-selection\";\n\nvar Selection = selection.prototype.constructor;\n\nexport default function() {\n  return new Selection(this._groups, this._parents);\n}\n","import {interpolateTransformCss as interpolateTransform} from \"d3-interpolate\";\nimport {style} from \"d3-selection\";\nimport {tweenValue} from \"./tween\";\nimport interpolate from \"./interpolate\";\n\nfunction styleRemove(name, interpolate) {\n  var value00,\n      value10,\n      interpolate0;\n  return function() {\n    var value0 = style(this, name),\n        value1 = (this.style.removeProperty(name), style(this, name));\n    return value0 === value1 ? null\n        : value0 === value00 && value1 === value10 ? interpolate0\n        : interpolate0 = interpolate(value00 = value0, value10 = value1);\n  };\n}\n\nfunction styleRemoveEnd(name) {\n  return function() {\n    this.style.removeProperty(name);\n  };\n}\n\nfunction styleConstant(name, interpolate, value1) {\n  var value00,\n      interpolate0;\n  return function() {\n    var value0 = style(this, name);\n    return value0 === value1 ? null\n        : value0 === value00 ? interpolate0\n        : interpolate0 = interpolate(value00 = value0, value1);\n  };\n}\n\nfunction styleFunction(name, interpolate, value) {\n  var value00,\n      value10,\n      interpolate0;\n  return function() {\n    var value0 = style(this, name),\n        value1 = value(this);\n    if (value1 == null) value1 = (this.style.removeProperty(name), style(this, name));\n    return value0 === value1 ? null\n        : value0 === value00 && value1 === value10 ? interpolate0\n        : interpolate0 = interpolate(value00 = value0, value10 = value1);\n  };\n}\n\nexport default function(name, value, priority) {\n  var i = (name += \"\") === \"transform\" ? interpolateTransform : interpolate;\n  return value == null ? this\n          .styleTween(name, styleRemove(name, i))\n          .on(\"end.style.\" + name, styleRemoveEnd(name))\n      : this.styleTween(name, typeof value === \"function\"\n          ? styleFunction(name, i, tweenValue(this, \"style.\" + name, value))\n          : styleConstant(name, i, value + \"\"), priority);\n}\n","function styleTween(name, value, priority) {\n  function tween() {\n    var node = this, i = value.apply(node, arguments);\n    return i && function(t) {\n      node.style.setProperty(name, i(t), priority);\n    };\n  }\n  tween._value = value;\n  return tween;\n}\n\nexport default function(name, value, priority) {\n  var key = \"style.\" + (name += \"\");\n  if (arguments.length < 2) return (key = this.tween(key)) && key._value;\n  if (value == null) return this.tween(key, null);\n  if (typeof value !== \"function\") throw new Error;\n  return this.tween(key, styleTween(name, value, priority == null ? \"\" : priority));\n}\n","import {tweenValue} from \"./tween\";\n\nfunction textConstant(value) {\n  return function() {\n    this.textContent = value;\n  };\n}\n\nfunction textFunction(value) {\n  return function() {\n    var value1 = value(this);\n    this.textContent = value1 == null ? \"\" : value1;\n  };\n}\n\nexport default function(value) {\n  return this.tween(\"text\", typeof value === \"function\"\n      ? textFunction(tweenValue(this, \"text\", value))\n      : textConstant(value == null ? \"\" : value + \"\"));\n}\n","import {Transition, newId} from \"./index\";\nimport schedule, {get} from \"./schedule\";\n\nexport default function() {\n  var name = this._name,\n      id0 = this._id,\n      id1 = newId();\n\n  for (var groups = this._groups, m = groups.length, j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        var inherit = get(node, id0);\n        schedule(node, name, id1, i, group, {\n          time: inherit.time + inherit.delay + inherit.duration,\n          delay: 0,\n          duration: inherit.duration,\n          ease: inherit.ease\n        });\n      }\n    }\n  }\n\n  return new Transition(groups, this._parents, name, id1);\n}\n","import {get, set} from \"./schedule\";\n\nfunction tweenRemove(id, name) {\n  var tween0, tween1;\n  return function() {\n    var schedule = set(this, id),\n        tween = schedule.tween;\n\n    // If this node shared tween with the previous node,\n    // just assign the updated shared tween and were done!\n    // Otherwise, copy-on-write.\n    if (tween !== tween0) {\n      tween1 = tween0 = tween;\n      for (var i = 0, n = tween1.length; i < n; ++i) {\n        if (tween1[i].name === name) {\n          tween1 = tween1.slice();\n          tween1.splice(i, 1);\n          break;\n        }\n      }\n    }\n\n    schedule.tween = tween1;\n  };\n}\n\nfunction tweenFunction(id, name, value) {\n  var tween0, tween1;\n  if (typeof value !== \"function\") throw new Error;\n  return function() {\n    var schedule = set(this, id),\n        tween = schedule.tween;\n\n    // If this node shared tween with the previous node,\n    // just assign the updated shared tween and were done!\n    // Otherwise, copy-on-write.\n    if (tween !== tween0) {\n      tween1 = (tween0 = tween).slice();\n      for (var t = {name: name, value: value}, i = 0, n = tween1.length; i < n; ++i) {\n        if (tween1[i].name === name) {\n          tween1[i] = t;\n          break;\n        }\n      }\n      if (i === n) tween1.push(t);\n    }\n\n    schedule.tween = tween1;\n  };\n}\n\nexport default function(name, value) {\n  var id = this._id;\n\n  name += \"\";\n\n  if (arguments.length < 2) {\n    var tween = get(this.node(), id).tween;\n    for (var i = 0, n = tween.length, t; i < n; ++i) {\n      if ((t = tween[i]).name === name) {\n        return t.value;\n      }\n    }\n    return null;\n  }\n\n  return this.each((value == null ? tweenRemove : tweenFunction)(id, name, value));\n}\n\nexport function tweenValue(transition, name, value) {\n  var id = transition._id;\n\n  transition.each(function() {\n    var schedule = set(this, id);\n    (schedule.value || (schedule.value = {}))[name] = value.apply(this, arguments);\n  });\n\n  return function(node) {\n    return get(node, id).value[name];\n  };\n}\n","import {RedBlackNode} from \"./RedBlackTree\";\nimport {createCell} from \"./Cell\";\nimport {attachCircle, detachCircle} from \"./Circle\";\nimport {createEdge, setEdgeEnd} from \"./Edge\";\nimport {beaches, epsilon} from \"./Diagram\";\n\nvar beachPool = [];\n\nfunction Beach() {\n  RedBlackNode(this);\n  this.edge =\n  this.site =\n  this.circle = null;\n}\n\nfunction createBeach(site) {\n  var beach = beachPool.pop() || new Beach;\n  beach.site = site;\n  return beach;\n}\n\nfunction detachBeach(beach) {\n  detachCircle(beach);\n  beaches.remove(beach);\n  beachPool.push(beach);\n  RedBlackNode(beach);\n}\n\nexport function removeBeach(beach) {\n  var circle = beach.circle,\n      x = circle.x,\n      y = circle.cy,\n      vertex = [x, y],\n      previous = beach.P,\n      next = beach.N,\n      disappearing = [beach];\n\n  detachBeach(beach);\n\n  var lArc = previous;\n  while (lArc.circle\n      && Math.abs(x - lArc.circle.x) < epsilon\n      && Math.abs(y - lArc.circle.cy) < epsilon) {\n    previous = lArc.P;\n    disappearing.unshift(lArc);\n    detachBeach(lArc);\n    lArc = previous;\n  }\n\n  disappearing.unshift(lArc);\n  detachCircle(lArc);\n\n  var rArc = next;\n  while (rArc.circle\n      && Math.abs(x - rArc.circle.x) < epsilon\n      && Math.abs(y - rArc.circle.cy) < epsilon) {\n    next = rArc.N;\n    disappearing.push(rArc);\n    detachBeach(rArc);\n    rArc = next;\n  }\n\n  disappearing.push(rArc);\n  detachCircle(rArc);\n\n  var nArcs = disappearing.length,\n      iArc;\n  for (iArc = 1; iArc < nArcs; ++iArc) {\n    rArc = disappearing[iArc];\n    lArc = disappearing[iArc - 1];\n    setEdgeEnd(rArc.edge, lArc.site, rArc.site, vertex);\n  }\n\n  lArc = disappearing[0];\n  rArc = disappearing[nArcs - 1];\n  rArc.edge = createEdge(lArc.site, rArc.site, null, vertex);\n\n  attachCircle(lArc);\n  attachCircle(rArc);\n}\n\nexport function addBeach(site) {\n  var x = site[0],\n      directrix = site[1],\n      lArc,\n      rArc,\n      dxl,\n      dxr,\n      node = beaches._;\n\n  while (node) {\n    dxl = leftBreakPoint(node, directrix) - x;\n    if (dxl > epsilon) node = node.L; else {\n      dxr = x - rightBreakPoint(node, directrix);\n      if (dxr > epsilon) {\n        if (!node.R) {\n          lArc = node;\n          break;\n        }\n        node = node.R;\n      } else {\n        if (dxl > -epsilon) {\n          lArc = node.P;\n          rArc = node;\n        } else if (dxr > -epsilon) {\n          lArc = node;\n          rArc = node.N;\n        } else {\n          lArc = rArc = node;\n        }\n        break;\n      }\n    }\n  }\n\n  createCell(site);\n  var newArc = createBeach(site);\n  beaches.insert(lArc, newArc);\n\n  if (!lArc && !rArc) return;\n\n  if (lArc === rArc) {\n    detachCircle(lArc);\n    rArc = createBeach(lArc.site);\n    beaches.insert(newArc, rArc);\n    newArc.edge = rArc.edge = createEdge(lArc.site, newArc.site);\n    attachCircle(lArc);\n    attachCircle(rArc);\n    return;\n  }\n\n  if (!rArc) { // && lArc\n    newArc.edge = createEdge(lArc.site, newArc.site);\n    return;\n  }\n\n  // else lArc !== rArc\n  detachCircle(lArc);\n  detachCircle(rArc);\n\n  var lSite = lArc.site,\n      ax = lSite[0],\n      ay = lSite[1],\n      bx = site[0] - ax,\n      by = site[1] - ay,\n      rSite = rArc.site,\n      cx = rSite[0] - ax,\n      cy = rSite[1] - ay,\n      d = 2 * (bx * cy - by * cx),\n      hb = bx * bx + by * by,\n      hc = cx * cx + cy * cy,\n      vertex = [(cy * hb - by * hc) / d + ax, (bx * hc - cx * hb) / d + ay];\n\n  setEdgeEnd(rArc.edge, lSite, rSite, vertex);\n  newArc.edge = createEdge(lSite, site, null, vertex);\n  rArc.edge = createEdge(site, rSite, null, vertex);\n  attachCircle(lArc);\n  attachCircle(rArc);\n}\n\nfunction leftBreakPoint(arc, directrix) {\n  var site = arc.site,\n      rfocx = site[0],\n      rfocy = site[1],\n      pby2 = rfocy - directrix;\n\n  if (!pby2) return rfocx;\n\n  var lArc = arc.P;\n  if (!lArc) return -Infinity;\n\n  site = lArc.site;\n  var lfocx = site[0],\n      lfocy = site[1],\n      plby2 = lfocy - directrix;\n\n  if (!plby2) return lfocx;\n\n  var hl = lfocx - rfocx,\n      aby2 = 1 / pby2 - 1 / plby2,\n      b = hl / plby2;\n\n  if (aby2) return (-b + Math.sqrt(b * b - 2 * aby2 * (hl * hl / (-2 * plby2) - lfocy + plby2 / 2 + rfocy - pby2 / 2))) / aby2 + rfocx;\n\n  return (rfocx + lfocx) / 2;\n}\n\nfunction rightBreakPoint(arc, directrix) {\n  var rArc = arc.N;\n  if (rArc) return leftBreakPoint(rArc, directrix);\n  var site = arc.site;\n  return site[1] === directrix ? site[0] : Infinity;\n}\n","import {createBorderEdge} from \"./Edge\";\nimport {cells, edges, epsilon} from \"./Diagram\";\n\nexport function createCell(site) {\n  return cells[site.index] = {\n    site: site,\n    halfedges: []\n  };\n}\n\nfunction cellHalfedgeAngle(cell, edge) {\n  var site = cell.site,\n      va = edge.left,\n      vb = edge.right;\n  if (site === vb) vb = va, va = site;\n  if (vb) return Math.atan2(vb[1] - va[1], vb[0] - va[0]);\n  if (site === va) va = edge[1], vb = edge[0];\n  else va = edge[0], vb = edge[1];\n  return Math.atan2(va[0] - vb[0], vb[1] - va[1]);\n}\n\nexport function cellHalfedgeStart(cell, edge) {\n  return edge[+(edge.left !== cell.site)];\n}\n\nexport function cellHalfedgeEnd(cell, edge) {\n  return edge[+(edge.left === cell.site)];\n}\n\nexport function sortCellHalfedges() {\n  for (var i = 0, n = cells.length, cell, halfedges, j, m; i < n; ++i) {\n    if ((cell = cells[i]) && (m = (halfedges = cell.halfedges).length)) {\n      var index = new Array(m),\n          array = new Array(m);\n      for (j = 0; j < m; ++j) index[j] = j, array[j] = cellHalfedgeAngle(cell, edges[halfedges[j]]);\n      index.sort(function(i, j) { return array[j] - array[i]; });\n      for (j = 0; j < m; ++j) array[j] = halfedges[index[j]];\n      for (j = 0; j < m; ++j) halfedges[j] = array[j];\n    }\n  }\n}\n\nexport function clipCells(x0, y0, x1, y1) {\n  var nCells = cells.length,\n      iCell,\n      cell,\n      site,\n      iHalfedge,\n      halfedges,\n      nHalfedges,\n      start,\n      startX,\n      startY,\n      end,\n      endX,\n      endY,\n      cover = true;\n\n  for (iCell = 0; iCell < nCells; ++iCell) {\n    if (cell = cells[iCell]) {\n      site = cell.site;\n      halfedges = cell.halfedges;\n      iHalfedge = halfedges.length;\n\n      // Remove any dangling clipped edges.\n      while (iHalfedge--) {\n        if (!edges[halfedges[iHalfedge]]) {\n          halfedges.splice(iHalfedge, 1);\n        }\n      }\n\n      // Insert any border edges as necessary.\n      iHalfedge = 0, nHalfedges = halfedges.length;\n      while (iHalfedge < nHalfedges) {\n        end = cellHalfedgeEnd(cell, edges[halfedges[iHalfedge]]), endX = end[0], endY = end[1];\n        start = cellHalfedgeStart(cell, edges[halfedges[++iHalfedge % nHalfedges]]), startX = start[0], startY = start[1];\n        if (Math.abs(endX - startX) > epsilon || Math.abs(endY - startY) > epsilon) {\n          halfedges.splice(iHalfedge, 0, edges.push(createBorderEdge(site, end,\n              Math.abs(endX - x0) < epsilon && y1 - endY > epsilon ? [x0, Math.abs(startX - x0) < epsilon ? startY : y1]\n              : Math.abs(endY - y1) < epsilon && x1 - endX > epsilon ? [Math.abs(startY - y1) < epsilon ? startX : x1, y1]\n              : Math.abs(endX - x1) < epsilon && endY - y0 > epsilon ? [x1, Math.abs(startX - x1) < epsilon ? startY : y0]\n              : Math.abs(endY - y0) < epsilon && endX - x0 > epsilon ? [Math.abs(startY - y0) < epsilon ? startX : x0, y0]\n              : null)) - 1);\n          ++nHalfedges;\n        }\n      }\n\n      if (nHalfedges) cover = false;\n    }\n  }\n\n  // If there werent any edges, have the closest site cover the extent.\n  // It doesnt matter which corner of the extent we measure!\n  if (cover) {\n    var dx, dy, d2, dc = Infinity;\n\n    for (iCell = 0, cover = null; iCell < nCells; ++iCell) {\n      if (cell = cells[iCell]) {\n        site = cell.site;\n        dx = site[0] - x0;\n        dy = site[1] - y0;\n        d2 = dx * dx + dy * dy;\n        if (d2 < dc) dc = d2, cover = cell;\n      }\n    }\n\n    if (cover) {\n      var v00 = [x0, y0], v01 = [x0, y1], v11 = [x1, y1], v10 = [x1, y0];\n      cover.halfedges.push(\n        edges.push(createBorderEdge(site = cover.site, v00, v01)) - 1,\n        edges.push(createBorderEdge(site, v01, v11)) - 1,\n        edges.push(createBorderEdge(site, v11, v10)) - 1,\n        edges.push(createBorderEdge(site, v10, v00)) - 1\n      );\n    }\n  }\n\n  // Lastly delete any cells with no edges; these were entirely clipped.\n  for (iCell = 0; iCell < nCells; ++iCell) {\n    if (cell = cells[iCell]) {\n      if (!cell.halfedges.length) {\n        delete cells[iCell];\n      }\n    }\n  }\n}\n","import {RedBlackNode} from \"./RedBlackTree\";\nimport {circles, epsilon2} from \"./Diagram\";\n\nvar circlePool = [];\n\nexport var firstCircle;\n\nfunction Circle() {\n  RedBlackNode(this);\n  this.x =\n  this.y =\n  this.arc =\n  this.site =\n  this.cy = null;\n}\n\nexport function attachCircle(arc) {\n  var lArc = arc.P,\n      rArc = arc.N;\n\n  if (!lArc || !rArc) return;\n\n  var lSite = lArc.site,\n      cSite = arc.site,\n      rSite = rArc.site;\n\n  if (lSite === rSite) return;\n\n  var bx = cSite[0],\n      by = cSite[1],\n      ax = lSite[0] - bx,\n      ay = lSite[1] - by,\n      cx = rSite[0] - bx,\n      cy = rSite[1] - by;\n\n  var d = 2 * (ax * cy - ay * cx);\n  if (d >= -epsilon2) return;\n\n  var ha = ax * ax + ay * ay,\n      hc = cx * cx + cy * cy,\n      x = (cy * ha - ay * hc) / d,\n      y = (ax * hc - cx * ha) / d;\n\n  var circle = circlePool.pop() || new Circle;\n  circle.arc = arc;\n  circle.site = cSite;\n  circle.x = x + bx;\n  circle.y = (circle.cy = y + by) + Math.sqrt(x * x + y * y); // y bottom\n\n  arc.circle = circle;\n\n  var before = null,\n      node = circles._;\n\n  while (node) {\n    if (circle.y < node.y || (circle.y === node.y && circle.x <= node.x)) {\n      if (node.L) node = node.L;\n      else { before = node.P; break; }\n    } else {\n      if (node.R) node = node.R;\n      else { before = node; break; }\n    }\n  }\n\n  circles.insert(before, circle);\n  if (!before) firstCircle = circle;\n}\n\nexport function detachCircle(arc) {\n  var circle = arc.circle;\n  if (circle) {\n    if (!circle.P) firstCircle = circle.N;\n    circles.remove(circle);\n    circlePool.push(circle);\n    RedBlackNode(circle);\n    arc.circle = null;\n  }\n}\n","import {addBeach, removeBeach} from \"./Beach\";\nimport {sortCellHalfedges, cellHalfedgeStart, clipCells} from \"./Cell\";\nimport {firstCircle} from \"./Circle\";\nimport {clipEdges} from \"./Edge\";\nimport RedBlackTree from \"./RedBlackTree\";\n\nexport var epsilon = 1e-6;\nexport var epsilon2 = 1e-12;\nexport var beaches;\nexport var cells;\nexport var circles;\nexport var edges;\n\nfunction triangleArea(a, b, c) {\n  return (a[0] - c[0]) * (b[1] - a[1]) - (a[0] - b[0]) * (c[1] - a[1]);\n}\n\nfunction lexicographic(a, b) {\n  return b[1] - a[1]\n      || b[0] - a[0];\n}\n\nexport default function Diagram(sites, extent) {\n  var site = sites.sort(lexicographic).pop(),\n      x,\n      y,\n      circle;\n\n  edges = [];\n  cells = new Array(sites.length);\n  beaches = new RedBlackTree;\n  circles = new RedBlackTree;\n\n  while (true) {\n    circle = firstCircle;\n    if (site && (!circle || site[1] < circle.y || (site[1] === circle.y && site[0] < circle.x))) {\n      if (site[0] !== x || site[1] !== y) {\n        addBeach(site);\n        x = site[0], y = site[1];\n      }\n      site = sites.pop();\n    } else if (circle) {\n      removeBeach(circle.arc);\n    } else {\n      break;\n    }\n  }\n\n  sortCellHalfedges();\n\n  if (extent) {\n    var x0 = +extent[0][0],\n        y0 = +extent[0][1],\n        x1 = +extent[1][0],\n        y1 = +extent[1][1];\n    clipEdges(x0, y0, x1, y1);\n    clipCells(x0, y0, x1, y1);\n  }\n\n  this.edges = edges;\n  this.cells = cells;\n\n  beaches =\n  circles =\n  edges =\n  cells = null;\n}\n\nDiagram.prototype = {\n  constructor: Diagram,\n\n  polygons: function() {\n    var edges = this.edges;\n\n    return this.cells.map(function(cell) {\n      var polygon = cell.halfedges.map(function(i) { return cellHalfedgeStart(cell, edges[i]); });\n      polygon.data = cell.site.data;\n      return polygon;\n    });\n  },\n\n  triangles: function() {\n    var triangles = [],\n        edges = this.edges;\n\n    this.cells.forEach(function(cell, i) {\n      if (!(m = (halfedges = cell.halfedges).length)) return;\n      var site = cell.site,\n          halfedges,\n          j = -1,\n          m,\n          s0,\n          e1 = edges[halfedges[m - 1]],\n          s1 = e1.left === site ? e1.right : e1.left;\n\n      while (++j < m) {\n        s0 = s1;\n        e1 = edges[halfedges[j]];\n        s1 = e1.left === site ? e1.right : e1.left;\n        if (s0 && s1 && i < s0.index && i < s1.index && triangleArea(site, s0, s1) < 0) {\n          triangles.push([site.data, s0.data, s1.data]);\n        }\n      }\n    });\n\n    return triangles;\n  },\n\n  links: function() {\n    return this.edges.filter(function(edge) {\n      return edge.right;\n    }).map(function(edge) {\n      return {\n        source: edge.left.data,\n        target: edge.right.data\n      };\n    });\n  },\n\n  find: function(x, y, radius) {\n    var that = this, i0, i1 = that._found || 0, n = that.cells.length, cell;\n\n    // Use the previously-found cell, or start with an arbitrary one.\n    while (!(cell = that.cells[i1])) if (++i1 >= n) return null;\n    var dx = x - cell.site[0], dy = y - cell.site[1], d2 = dx * dx + dy * dy;\n\n    // Traverse the half-edges to find a closer cell, if any.\n    do {\n      cell = that.cells[i0 = i1], i1 = null;\n      cell.halfedges.forEach(function(e) {\n        var edge = that.edges[e], v = edge.left;\n        if ((v === cell.site || !v) && !(v = edge.right)) return;\n        var vx = x - v[0], vy = y - v[1], v2 = vx * vx + vy * vy;\n        if (v2 < d2) d2 = v2, i1 = v.index;\n      });\n    } while (i1 !== null);\n\n    that._found = i0;\n\n    return radius == null || d2 <= radius * radius ? cell.site : null;\n  }\n}\n","import {cells, edges, epsilon} from \"./Diagram\";\n\nexport function createEdge(left, right, v0, v1) {\n  var edge = [null, null],\n      index = edges.push(edge) - 1;\n  edge.left = left;\n  edge.right = right;\n  if (v0) setEdgeEnd(edge, left, right, v0);\n  if (v1) setEdgeEnd(edge, right, left, v1);\n  cells[left.index].halfedges.push(index);\n  cells[right.index].halfedges.push(index);\n  return edge;\n}\n\nexport function createBorderEdge(left, v0, v1) {\n  var edge = [v0, v1];\n  edge.left = left;\n  return edge;\n}\n\nexport function setEdgeEnd(edge, left, right, vertex) {\n  if (!edge[0] && !edge[1]) {\n    edge[0] = vertex;\n    edge.left = left;\n    edge.right = right;\n  } else if (edge.left === right) {\n    edge[1] = vertex;\n  } else {\n    edge[0] = vertex;\n  }\n}\n\n// LiangBarsky line clipping.\nfunction clipEdge(edge, x0, y0, x1, y1) {\n  var a = edge[0],\n      b = edge[1],\n      ax = a[0],\n      ay = a[1],\n      bx = b[0],\n      by = b[1],\n      t0 = 0,\n      t1 = 1,\n      dx = bx - ax,\n      dy = by - ay,\n      r;\n\n  r = x0 - ax;\n  if (!dx && r > 0) return;\n  r /= dx;\n  if (dx < 0) {\n    if (r < t0) return;\n    if (r < t1) t1 = r;\n  } else if (dx > 0) {\n    if (r > t1) return;\n    if (r > t0) t0 = r;\n  }\n\n  r = x1 - ax;\n  if (!dx && r < 0) return;\n  r /= dx;\n  if (dx < 0) {\n    if (r > t1) return;\n    if (r > t0) t0 = r;\n  } else if (dx > 0) {\n    if (r < t0) return;\n    if (r < t1) t1 = r;\n  }\n\n  r = y0 - ay;\n  if (!dy && r > 0) return;\n  r /= dy;\n  if (dy < 0) {\n    if (r < t0) return;\n    if (r < t1) t1 = r;\n  } else if (dy > 0) {\n    if (r > t1) return;\n    if (r > t0) t0 = r;\n  }\n\n  r = y1 - ay;\n  if (!dy && r < 0) return;\n  r /= dy;\n  if (dy < 0) {\n    if (r > t1) return;\n    if (r > t0) t0 = r;\n  } else if (dy > 0) {\n    if (r < t0) return;\n    if (r < t1) t1 = r;\n  }\n\n  if (!(t0 > 0) && !(t1 < 1)) return true; // TODO Better check?\n\n  if (t0 > 0) edge[0] = [ax + t0 * dx, ay + t0 * dy];\n  if (t1 < 1) edge[1] = [ax + t1 * dx, ay + t1 * dy];\n  return true;\n}\n\nfunction connectEdge(edge, x0, y0, x1, y1) {\n  var v1 = edge[1];\n  if (v1) return true;\n\n  var v0 = edge[0],\n      left = edge.left,\n      right = edge.right,\n      lx = left[0],\n      ly = left[1],\n      rx = right[0],\n      ry = right[1],\n      fx = (lx + rx) / 2,\n      fy = (ly + ry) / 2,\n      fm,\n      fb;\n\n  if (ry === ly) {\n    if (fx < x0 || fx >= x1) return;\n    if (lx > rx) {\n      if (!v0) v0 = [fx, y0];\n      else if (v0[1] >= y1) return;\n      v1 = [fx, y1];\n    } else {\n      if (!v0) v0 = [fx, y1];\n      else if (v0[1] < y0) return;\n      v1 = [fx, y0];\n    }\n  } else {\n    fm = (lx - rx) / (ry - ly);\n    fb = fy - fm * fx;\n    if (fm < -1 || fm > 1) {\n      if (lx > rx) {\n        if (!v0) v0 = [(y0 - fb) / fm, y0];\n        else if (v0[1] >= y1) return;\n        v1 = [(y1 - fb) / fm, y1];\n      } else {\n        if (!v0) v0 = [(y1 - fb) / fm, y1];\n        else if (v0[1] < y0) return;\n        v1 = [(y0 - fb) / fm, y0];\n      }\n    } else {\n      if (ly < ry) {\n        if (!v0) v0 = [x0, fm * x0 + fb];\n        else if (v0[0] >= x1) return;\n        v1 = [x1, fm * x1 + fb];\n      } else {\n        if (!v0) v0 = [x1, fm * x1 + fb];\n        else if (v0[0] < x0) return;\n        v1 = [x0, fm * x0 + fb];\n      }\n    }\n  }\n\n  edge[0] = v0;\n  edge[1] = v1;\n  return true;\n}\n\nexport function clipEdges(x0, y0, x1, y1) {\n  var i = edges.length,\n      edge;\n\n  while (i--) {\n    if (!connectEdge(edge = edges[i], x0, y0, x1, y1)\n        || !clipEdge(edge, x0, y0, x1, y1)\n        || !(Math.abs(edge[0][0] - edge[1][0]) > epsilon\n            || Math.abs(edge[0][1] - edge[1][1]) > epsilon)) {\n      delete edges[i];\n    }\n  }\n}\n","function RedBlackTree() {\n  this._ = null; // root node\n}\n\nexport function RedBlackNode(node) {\n  node.U = // parent node\n  node.C = // color - true for red, false for black\n  node.L = // left node\n  node.R = // right node\n  node.P = // previous node\n  node.N = null; // next node\n}\n\nRedBlackTree.prototype = {\n  constructor: RedBlackTree,\n\n  insert: function(after, node) {\n    var parent, grandpa, uncle;\n\n    if (after) {\n      node.P = after;\n      node.N = after.N;\n      if (after.N) after.N.P = node;\n      after.N = node;\n      if (after.R) {\n        after = after.R;\n        while (after.L) after = after.L;\n        after.L = node;\n      } else {\n        after.R = node;\n      }\n      parent = after;\n    } else if (this._) {\n      after = RedBlackFirst(this._);\n      node.P = null;\n      node.N = after;\n      after.P = after.L = node;\n      parent = after;\n    } else {\n      node.P = node.N = null;\n      this._ = node;\n      parent = null;\n    }\n    node.L = node.R = null;\n    node.U = parent;\n    node.C = true;\n\n    after = node;\n    while (parent && parent.C) {\n      grandpa = parent.U;\n      if (parent === grandpa.L) {\n        uncle = grandpa.R;\n        if (uncle && uncle.C) {\n          parent.C = uncle.C = false;\n          grandpa.C = true;\n          after = grandpa;\n        } else {\n          if (after === parent.R) {\n            RedBlackRotateLeft(this, parent);\n            after = parent;\n            parent = after.U;\n          }\n          parent.C = false;\n          grandpa.C = true;\n          RedBlackRotateRight(this, grandpa);\n        }\n      } else {\n        uncle = grandpa.L;\n        if (uncle && uncle.C) {\n          parent.C = uncle.C = false;\n          grandpa.C = true;\n          after = grandpa;\n        } else {\n          if (after === parent.L) {\n            RedBlackRotateRight(this, parent);\n            after = parent;\n            parent = after.U;\n          }\n          parent.C = false;\n          grandpa.C = true;\n          RedBlackRotateLeft(this, grandpa);\n        }\n      }\n      parent = after.U;\n    }\n    this._.C = false;\n  },\n\n  remove: function(node) {\n    if (node.N) node.N.P = node.P;\n    if (node.P) node.P.N = node.N;\n    node.N = node.P = null;\n\n    var parent = node.U,\n        sibling,\n        left = node.L,\n        right = node.R,\n        next,\n        red;\n\n    if (!left) next = right;\n    else if (!right) next = left;\n    else next = RedBlackFirst(right);\n\n    if (parent) {\n      if (parent.L === node) parent.L = next;\n      else parent.R = next;\n    } else {\n      this._ = next;\n    }\n\n    if (left && right) {\n      red = next.C;\n      next.C = node.C;\n      next.L = left;\n      left.U = next;\n      if (next !== right) {\n        parent = next.U;\n        next.U = node.U;\n        node = next.R;\n        parent.L = node;\n        next.R = right;\n        right.U = next;\n      } else {\n        next.U = parent;\n        parent = next;\n        node = next.R;\n      }\n    } else {\n      red = node.C;\n      node = next;\n    }\n\n    if (node) node.U = parent;\n    if (red) return;\n    if (node && node.C) { node.C = false; return; }\n\n    do {\n      if (node === this._) break;\n      if (node === parent.L) {\n        sibling = parent.R;\n        if (sibling.C) {\n          sibling.C = false;\n          parent.C = true;\n          RedBlackRotateLeft(this, parent);\n          sibling = parent.R;\n        }\n        if ((sibling.L && sibling.L.C)\n            || (sibling.R && sibling.R.C)) {\n          if (!sibling.R || !sibling.R.C) {\n            sibling.L.C = false;\n            sibling.C = true;\n            RedBlackRotateRight(this, sibling);\n            sibling = parent.R;\n          }\n          sibling.C = parent.C;\n          parent.C = sibling.R.C = false;\n          RedBlackRotateLeft(this, parent);\n          node = this._;\n          break;\n        }\n      } else {\n        sibling = parent.L;\n        if (sibling.C) {\n          sibling.C = false;\n          parent.C = true;\n          RedBlackRotateRight(this, parent);\n          sibling = parent.L;\n        }\n        if ((sibling.L && sibling.L.C)\n          || (sibling.R && sibling.R.C)) {\n          if (!sibling.L || !sibling.L.C) {\n            sibling.R.C = false;\n            sibling.C = true;\n            RedBlackRotateLeft(this, sibling);\n            sibling = parent.L;\n          }\n          sibling.C = parent.C;\n          parent.C = sibling.L.C = false;\n          RedBlackRotateRight(this, parent);\n          node = this._;\n          break;\n        }\n      }\n      sibling.C = true;\n      node = parent;\n      parent = parent.U;\n    } while (!node.C);\n\n    if (node) node.C = false;\n  }\n};\n\nfunction RedBlackRotateLeft(tree, node) {\n  var p = node,\n      q = node.R,\n      parent = p.U;\n\n  if (parent) {\n    if (parent.L === p) parent.L = q;\n    else parent.R = q;\n  } else {\n    tree._ = q;\n  }\n\n  q.U = parent;\n  p.U = q;\n  p.R = q.L;\n  if (p.R) p.R.U = p;\n  q.L = p;\n}\n\nfunction RedBlackRotateRight(tree, node) {\n  var p = node,\n      q = node.L,\n      parent = p.U;\n\n  if (parent) {\n    if (parent.L === p) parent.L = q;\n    else parent.R = q;\n  } else {\n    tree._ = q;\n  }\n\n  q.U = parent;\n  p.U = q;\n  p.L = q.R;\n  if (p.L) p.L.U = p;\n  q.R = p;\n}\n\nfunction RedBlackFirst(node) {\n  while (node.L) node = node.L;\n  return node;\n}\n\nexport default RedBlackTree;\n","export default function(x) {\n  return function() {\n    return x;\n  };\n}\n","export function x(d) {\n  return d[0];\n}\n\nexport function y(d) {\n  return d[1];\n}\n","import constant from \"./constant\";\nimport {x as pointX, y as pointY} from \"./point\";\nimport Diagram, {epsilon} from \"./Diagram\";\n\nexport default function() {\n  var x = pointX,\n      y = pointY,\n      extent = null;\n\n  function voronoi(data) {\n    return new Diagram(data.map(function(d, i) {\n      var s = [Math.round(x(d, i, data) / epsilon) * epsilon, Math.round(y(d, i, data) / epsilon) * epsilon];\n      s.index = i;\n      s.data = d;\n      return s;\n    }), extent);\n  }\n\n  voronoi.polygons = function(data) {\n    return voronoi(data).polygons();\n  };\n\n  voronoi.links = function(data) {\n    return voronoi(data).links();\n  };\n\n  voronoi.triangles = function(data) {\n    return voronoi(data).triangles();\n  };\n\n  voronoi.x = function(_) {\n    return arguments.length ? (x = typeof _ === \"function\" ? _ : constant(+_), voronoi) : x;\n  };\n\n  voronoi.y = function(_) {\n    return arguments.length ? (y = typeof _ === \"function\" ? _ : constant(+_), voronoi) : y;\n  };\n\n  voronoi.extent = function(_) {\n    return arguments.length ? (extent = _ == null ? null : [[+_[0][0], +_[0][1]], [+_[1][0], +_[1][1]]], voronoi) : extent && [[extent[0][0], extent[0][1]], [extent[1][0], extent[1][1]]];\n  };\n\n  voronoi.size = function(_) {\n    return arguments.length ? (extent = _ == null ? null : [[0, 0], [+_[0], +_[1]]], voronoi) : extent && [extent[1][0] - extent[0][0], extent[1][1] - extent[0][1]];\n  };\n\n  return voronoi;\n}\n","import {\n    pullableRecent,\n    pullableEnd\n} from './utils';\n\nexport default class ElectricNode {\n    constructor () {\n        this.edges = [];\n        this.listeners = {\n            nextFrame: [],\n            currentFrame: []\n        };\n    }\n\n    addEdges (...nodes) {\n        this.edges.push(...nodes);\n        return this;\n    }\n\n    regListenerForCurrFrame (fn) {\n        const lstnrs = this.listeners.currentFrame;\n        let index = lstnrs.push(pullableRecent(this.edges, fn)) - 1;\n\n        return () => {\n            this.listeners.currentFrame = lstnrs.filter((fn, i) => i !== index);\n        };\n    }\n\n    regListenerForNextFrame (fn) {\n        const lstnrs = this.listeners.nextFrame;\n        let index = lstnrs.push(pullableEnd(this.edges, fn)) - 1;\n\n        return () => {\n            this.listeners.nextFrame = lstnrs.filter((fn, i) => i !== index);\n        };\n    }\n\n    hasNextFrameListener () {\n        return !!this.listeners.nextFrame.length;\n    }\n}\n","export default class GraphNode {\n    constructor (name, qualifiedName, options) {\n        /* istanbul ignore next */options = options || {};\n        this.name = name;\n        this.qualifiedName = qualifiedName;\n        this.edges = [];\n        this.outgoingEdges = [];\n        this._seed = null;\n        this.requireResolve = true;\n        this.retriever = options.retriever;\n        this.history = [];\n        this.resolver = null;\n        this.electricEdges = [];\n    }\n\n    addDependencies (...dep) {\n        this.edges.push(...dep);\n        dep.forEach(entry => entry.outgoingEdges.push(this));\n        return this;\n    }\n\n    addElectricNode (node) {\n        this.electricEdges.push(node);\n        return this;\n    }\n\n    get seed () {\n        return this._seed;\n    }\n\n    set seed (value) {\n        this._seed = value;\n        this.requireResolve = true;\n        return this;\n    }\n\n    resolve () {\n        this.seed = this.resolver(...this.retrieveDetails());\n        this.history.push(this.seed);\n        this.requireResolve = false;\n        return this;\n    }\n\n    retrieveDetails () {\n        if (this.edges.length === 0) {\n            return [{\n                name: this.name,\n                qualifiedName: this.qualifiedName,\n                value: this.seed\n            }];\n        }\n        return this.retriever(...this.edges.map(edge => edge.qualifiedName));\n    }\n\n    repeatHead () {\n        const\n            history = this.history,\n            head = history[history.length - 1];\n        // @todo- Akash, write test case if history.length === 0 to pass code coverage\n        if (history.length === 0) {\n            return this;\n        }\n        history.push(head);\n        return this;\n    }\n\n    flush () {\n        const hist = this.history,\n            head = hist[hist.length - 1];\n        hist.length = 0;\n        hist.push(head);\n        return this;\n    }\n\n    isRoot () {\n        return this.name === null;\n    }\n}\n","import {\n    isSimpleObject,\n    resolver,\n    // upstreamNodes,\n    flat,\n    resolveDependencyOrder,\n    getUpstreamNodes,\n    ForeignSet,\n    fetch,\n    CustomResolver,\n    scheduler\n} from './utils';\nimport Node from './graph-node';\nimport ElectricNode from './electric-node';\n\nexport default class Graph {\n    constructor () {\n        this.qualifiedNodeMap = {};\n        this.retriever = fetch(this.qualifiedNodeMap);\n        this.root = new Node(null, null, { retriever: this.retriever });\n        this.root.resolver = resolver.accumulate;\n\n        this._wholeSet = null;\n        this._propagate = true;\n        this.propagationOverride = {\n            currentFrameListeners: false,\n            nextFrameListeners: false\n        };\n\n        this._schedule = scheduler(() => {\n            let qname;\n            for (qname in this.qualifiedNodeMap) {\n                if (!({}).hasOwnProperty.call(this.qualifiedNodeMap, qname)) {\n                    return;\n                }\n                this.qualifiedNodeMap[qname].flush();\n            }\n        });\n    }\n\n    createNodesFrom (obj, mount) {\n        let val,\n            resolveReqList;\n        const qualifiedNodeMap = this.qualifiedNodeMap,\n            root = this.root,\n            retriever = this.retriever;\n\n        (function rec (objn, qualifiedName, history) {\n            let key,\n                qname,\n                perv,\n                node;\n\n            for (key in objn) {\n                if (!({}).hasOwnProperty.call(objn, key)) {\n                    continue;\n                }\n                qname = `${qualifiedName}${key}`;\n                node = new Node(key, qname, { retriever });\n                qualifiedNodeMap[qname] = node;\n\n                if ((perv = history.perv) !== undefined) {\n                    perv.addDependencies(node);\n                } else {\n                    // top most level entries\n                    root.addDependencies(node);\n                }\n\n                if (isSimpleObject(val = objn[key])) {\n                    rec(val, `${qualifiedName}${key}.`, { perv: node });\n                    node.resolver = resolver.accumulate;\n                } else if (val instanceof CustomResolver) {\n                    node.resolver = val.get();\n                    node.addDependencies(...val.getDependencies().map(qname => qualifiedNodeMap[qname]));\n                } else {\n                    node.resolver = resolver.identity;\n                    node.seed = val;\n                    // node.resolve();\n                }\n            }\n        }(obj, mount === null ? '' : `${mount}.`, {\n            perv: qualifiedNodeMap[mount]\n        }));\n\n        this._wholeSet = new ForeignSet(Object.keys(this.qualifiedNodeMap));\n\n        // Recalculate the model without firing the listeners\n        // @todo selective branch resolve. Currently resolve gets called even for a branch which was updated\n        resolveReqList = this.constructor.getResolvedList(root).concat(root).filter(node => node.requireResolve);\n        resolveReqList.forEach(node => node.resolve());\n        getUpstreamNodes(resolveReqList).forEach(node => node.resolve());\n        return this;\n    }\n\n    getNodeValue (prop) {\n        if (prop in this.qualifiedNodeMap) {\n            return this.qualifiedNodeMap[prop].seed;\n        }\n        return undefined;\n    }\n\n    createElectricNodeOf (props, fnSpec) {\n        const nodes = props.map(prop => this.qualifiedNodeMap[prop]),\n            eNode = new ElectricNode().addEdges(...nodes);\n\n        nodes.forEach(node => node.addElectricNode(eNode));\n        return eNode[`regListenerFor${fnSpec.type}`](fnSpec.fn);\n    }\n\n    update (...params) {\n        let changedSet,\n            upstreamNodes;\n        const\n            electricEdges = [],\n            nodes = params.map((entry) => {\n                entry[0].seed = entry[1];\n                return entry[0];\n            });\n        nodes.forEach(node => node.resolve());\n        electricEdges.push(...flat(...nodes.map(node => node.electricEdges)));\n        changedSet = new ForeignSet(nodes.map(node => node.qualifiedName));\n\n        if (!this._propagate) {\n            this.__execUniqueElectricEdges(electricEdges);\n            this._propagate = true;\n            return this;\n        }\n\n        upstreamNodes = getUpstreamNodes(nodes);\n        upstreamNodes.forEach(upstreamNode => upstreamNode.resolve());\n        changedSet.append(upstreamNodes.map(node => node.qualifiedName));\n        electricEdges.push(...flat(...upstreamNodes.map(node => node.electricEdges)));\n\n        this.__execUniqueElectricEdges(Array.from(new Set(electricEdges)), changedSet);\n        return this;\n    }\n\n    __execUniqueElectricEdges (electricEdges, changedSet) {\n        const\n            cfLstnrs = [], // current frame listeners\n            nfLstnrs = []; // next frame listeners\n        if (changedSet) {\n            const\n                differenceSet = ForeignSet.difference(this._wholeSet, changedSet),\n                entries = differenceSet.toArray();\n\n            entries.forEach(entry => this.qualifiedNodeMap[entry].repeatHead());\n        }\n\n        electricEdges.forEach((e) => {\n            cfLstnrs.push(...e.listeners.currentFrame);\n        });\n        electricEdges.forEach((e) => {\n            nfLstnrs.push(...e.listeners.nextFrame);\n        });\n\n        !this.propagationOverride.currentFrameListeners && cfLstnrs.forEach(fn => fn());\n        !this.propagationOverride.nextFrameListeners && this._schedule(nfLstnrs);\n        this.resetPropagationOverride();\n        return this;\n    }\n\n    resetNodeValue (...qnames) {\n        const nodes = qnames.map(qname => this.qualifiedNodeMap[qname]),\n            args = nodes.map(node => [node, node.seed]);\n        this.update(...args);\n        return this;\n    }\n\n    static getResolvedList (node) {\n        const resolved = [];\n        resolveDependencyOrder(node, resolved, {});\n        return resolved;\n    }\n\n    stopPropagation () {\n        this._propagate = false;\n        return this;\n    }\n\n    resetPropagationOverride () {\n        this.propagationOverride.currentFrameListeners = false;\n        this.propagationOverride.nextFrameListeners = false;\n        return this;\n    }\n\n    setPropagationOverride (key) {\n        this.propagationOverride[`${key}Listeners`] = true;\n        return this;\n    }\n\n    getNodeFromQualifiedName (qname) {\n        return this.qualifiedNodeMap[qname];\n    }\n}\n","import Model from './model';\n\nexport default Model;\n","import Graph from './graph';\nimport { CustomResolver, fetchAggregator } from './utils';\n\n/**\n * The container class for Hyperdis. Hyperdis is an enabler for observable object with few interesting features like,\n * calculated property, next frame and same frame listeners, multiple listeners etc with a dependency resolving system.\n * It internally uses a graph to hold the hierarchial relationship of a object. Model is merely a container which\n * ties all the components together.\n *\n * @todo Circular dependency detection is not present\n *\n * @example check src/index.spec.js\n * @class\n */\nclass Model {\n    constructor () {\n        this._graph = new Graph();\n        this._lockFlag = false;\n        this._reqQ = [];\n    }\n\n    /**\n     * Static method to create and init the model with an observable seed\n     *\n     * @param {Object} obj The target object which is required to be made observable\n     * @return {Model} instance of the observable object model\n     */\n    static create (obj) {\n        return new Model()._addPropInModel(null, obj);\n    }\n\n    /**\n     * Appends more observable property on the already observable instance. This mutates the original model.\n     *\n     * This function works in two mode. One being\n     * @param {String} mountPoint the property on which the new set of properties will be mounted. If its a nested\n     *                          property then the mountPoint has to be written such a way so it feels like you are\n     *                          accessing the object. If the mount point is not found then he obeservables are added in\n     *                          the root.\n     * @param {Object} The target object which is required to be made observable\n     *\n     * Another being\n     * @param {Object} The target object which is required to be made observable\n     *\n     * @return {Model} instance of the observable object model\n     */\n    append (...params) {\n        let mountPoint,\n            obj;\n\n        if (params.length === 1) {\n            mountPoint = null;\n            obj = params[0];\n        } else {\n            mountPoint = params[0];\n            obj = params[1];\n        }\n\n        this._addPropInModel(mountPoint, obj);\n        return this;\n    }\n\n    /**\n     * Creates a calculated variable from existing variable. This variable can't be updated from outside.\n     * @param {string} mountpoint property path on which the new variable will be placed\n     * @param {string} name name of the variable. If the variable could have hierarchy like `limits.start`\n     * @param {Function} fn funtion where the dependent variables are injected based on the dependency requirement\n     */\n    calculatedProp (...params) {\n        let calculationConfig,\n            customResolver,\n            varName,\n            mount,\n            fetchFn;\n\n        if (params.length > 2) {\n            mount = params[0];\n            varName = params[1];\n            fetchFn = params[2];\n        } else {\n            mount = null;\n            varName = params[0];\n            fetchFn = params[1];\n        }\n\n        calculationConfig = fetchFn(fetchAggregator);\n        customResolver = new CustomResolver(calculationConfig.fn);\n        customResolver.addDependencies(...calculationConfig.dependencies);\n\n        this._addPropInModel(mount, { [varName]: customResolver });\n        return this;\n    }\n\n    // eslint-disable-next-line require-jsdoc\n    _addPropInModel (mountPoint, obj) {\n        this._graph.createNodesFrom(obj, mountPoint);\n        return this;\n    }\n\n    /**\n     * Register a listener in the current frame when a property or group of properties is changed.\n     *\n     * @example\n     * This function takes a single or group of property and handler which is called when any of the properties are\n     * changed.\n     * When a single property is changed the handler is called with two parameter, what was the old value of the state\n     * property and what is the new value.\n     * myState.on('range.start', (oldValue, newValue) => {\n     *      console.log('Value before prop change', oldValue);\n     *      console.log('Value after prop change', newValue);\n     * });\n     *\n     * myState.prop('range.start', 9);\n     * // Output\n     * Value before prop change 1\n     * Value after prop change 9\n     *\n     * If a handler is registered on change of a property which has another state property as value, then the handler\n     * gets called whenever any state property connected to it gets changed\n     *\n     * myState.on('range', (oldValue, newValue) => {\n     *      console.log('Value before prop change', oldValue);\n     *      console.log('Value after prop change', newValue);\n     * });\n     *\n     * myState.prop('range.start', 10);\n     * myState.prop('range.type.absolute', false);\n     *\n     * // Output\n     * Value before prop change\n     * range {\n     *      start: 9,\n     *      end: 5,\n     *      type: {\n     *          absolute: true\n     *      }\n     * }\n     * Value after prop change\n     * range: {\n     *      start: 10,\n     *      end: 5,\n     *      type: {\n     *          absolute: false\n     *      }\n     * }\n     * If a handler is registered with more than one property change then, the handler is called when any of the\n     * properties gets changed. In this cast the handler is called with more than one parameter: each for one state\n     * property which is registered for listening. Each parameter is of type array containing [oldValue, newValue]\n     *\n     * myState.on('range.start', 'range.end', (start, end) => {\n     *      console.log('Start', start);\n     *      console.log('End', end);\n     * });\n     *\n     * myState.prop('range.start', 12);\n     *\n     * // Output\n     * Start [10, 12]\n     * End [5, 5]\n     *\n     * myState.prop('range.end', 7);\n     *\n     * // Output\n     * Start [12, 12]\n     * End [5, 7]\n     *\n     * The on returns a function which is when called the listener registered gets unregistered\n     *\n     * let unsub = myState.on(['range.start', 'range.end'], (start, end) => {\n     *      console.log('Start', start);\n     *      console.log('End', end);\n     * });\n     *\n     * // Unsubscribe\n     * unsub()\n     *\n     * On takes an optional boolean value as the last parameter, which if passed as a true value the handler gets called\n     * during registration itself.\n     *\n     * @param {Array.<String>} props List of properties which is of interest\n     * @param {Function} fn Listener to be executed when any of them is changed. The listener is called with the old\n     *                      value and new value of the properties\n     * @param {*} instantCall When registered if the function is to be triggered with the value of the property\n     *\n     * @return {Function} function to unsubscribe from the listeners registry\n     */\n    on (props, fn, instantCall) {\n        const\n            propsArr = props instanceof Array ? props : [props],\n            // All there listeners will be executed in the current stack frame\n            unsub = this._graph.createElectricNodeOf(propsArr, {\n                type: 'CurrFrame',\n                fn\n            });\n\n        if (instantCall) {\n            // Bar current next frame listeners from getting fired\n            this._graph.stopPropagation().setPropagationOverride('nextFrame').resetNodeValue(...props);\n        }\n        return unsub;\n    }\n\n    /**\n     * Register a listener for the next frame when a property or group of properties is changed.\n     *\n     * @example\n     * See the examples for the on listener\n     *\n     * @param {Array.<String>} props List of properties which is of interest\n     * @param {Function} fn Listener to be executed when any of them is changed. The listener is called with the old\n     *                      value and new value of the properties. Here the oldvalue is last value of the last frame\n     * @param {*} instantCall When registered if the function is to be triggered with the value of the property\n     *\n     * @return {Function} function to unsubscribe from the listeners registry\n     */\n    next (props, fn, instantCall) {\n        const\n            propsArr = props instanceof Array ? props : [props],\n            // All there listeners will be executed at the tick of next animation frame\n            unsub = this._graph.createElectricNodeOf(propsArr, {\n                type: 'NextFrame',\n                fn\n            });\n\n        // @todo check support for this from the graph side\n        if (instantCall) {\n            // Bar current frame listeners from getting fired\n            this._graph.stopPropagation().setPropagationOverride('currentFrame').resetNodeValue(...props);\n        }\n\n        return unsub;\n    }\n\n    /**\n     * Lock queues the request of property change and releases the change when unlock is called. This is helpful when\n     * multiple property is getting called and the model listeners are to be fired once at the end of update.\n     *\n     * @return {Model} instance of the model\n     */\n    lock () {\n        this._lockFlag = true;\n        this._reqQ.length = 0;\n        return this;\n    }\n\n    /**\n     * Unlock unleashes the change done after the lock was called.\n\n     * @return {Model} instance of the model\n     */\n    unlock () {\n        this._lockFlag = false;\n        this.setProp(...this._reqQ);\n        this._reqQ.length = 0;\n        return this;\n    }\n\n    /**\n     * This acts as getter and setter. If the function is called by passing only one argument, it retrieve the value\n     * associated with the property. If the same function is called using two parameters, first one being the property\n     * and second one being the value, then the value is set for the property and the handlers are called (if any)\n     * which got registered using the on function\n     *\n     * Getter\n     * @param {string} prop property path whose value to be retrieved\n     * @return {Object} value of the property at the time of call\n     *\n     * Setter\n     * @param {string} property property path whose value to be ser\n     * @return {Model} instance of the model\n     */\n    prop (...params) {\n        let prop,\n            val,\n            len;\n\n        switch (len = params.length) {\n        case 1:\n            prop = params[0];\n            break;\n\n        case 2:\n            prop = params[0];\n            val = params[1];\n            break;\n\n        default:\n            return this;\n        }\n\n        if (len === 2) {\n            this._lockFlag ? this._reqQ.push([prop, val]) : this.setProp([prop, val]);\n            return this;\n        }\n\n        return this._graph.getNodeValue(prop);\n    }\n\n    // eslint-disable-next-line require-jsdoc\n    setProp (...props) {\n        // Filter out the calculated variables, so that it cant be changed from outside\n        // @todo if a node is not leafValue, and change is called, ignore it too\n        // props = props.filter(prop => !(VirtualObj.walkTill(prop[0].split('.'), this._vObj).leafValue()\n        //     instanceof CalculatedVar));\n\n        if (props.length === 0) {\n            return this;\n        }\n\n        this._graph.update(...props.map(prop => [this._graph.getNodeFromQualifiedName(prop[0]), prop[1]]));\n        return this;\n    }\n\n    /**\n     * Retrieves the graph representation of the object\n     * @return {Graph} instance of the graph associated to the model\n     */\n    graph () {\n        return this._graph;\n    }\n\n    /**\n     * Get serialized data from the model\n     *\n     * @return {Object} Serialized data\n     */\n    serialize () {\n        return this._graph.root.seed;\n    }\n}\n\nexport default Model;\n","/* global window */\n\nimport ForeignSet from './set';\n\nconst\n    isSimpleObject = (obj) => {\n        let token;\n        if (typeof obj === 'object') {\n            if (obj === null) { return false; }\n            token = Object.prototype.toString.call(obj);\n            if (token === '[object Object]') {\n                return (obj.constructor.toString().match(/^function (.*)\\(\\)/m) || [])[1] === 'Object';\n            }\n        }\n        return false;\n    },\n    minMsThreshold = 16,\n    /* istanbul ignore next */win = typeof window === 'undefined' ? (this || {}) : window,\n    /* istanbul ignore next */ reqAnimFrame = win.requestAnimationFrame || win.webkitRequestAnimationFrame ||\n        win.mozRequestAnimationFrame || win.oRequestAnimationFrame ||\n        win.msRequestAnimationFrame ||\n        function (callback) {\n            setTimeout(callback, minMsThreshold);\n        },\n\n    getTimeBasedId = () => {\n        if (getTimeBasedId.__lastTime === new Date().getTime()) {\n            return (getTimeBasedId.__lastTime).toString() + (getTimeBasedId.__id++).toString();\n        }\n\n        getTimeBasedId.__id = 0;\n        getTimeBasedId.__lastTime = new Date().getTime();\n        return (getTimeBasedId.__lastTime).toString() + (getTimeBasedId.__id++).toString();\n    },\n    pullableRecent = (nodes, fn) => {\n        let nFn = () => {\n            fn(...nodes.map((node) => {\n                const\n                    hist = node.history,\n                    l = hist.length - 1;\n                return [hist[l - 1 < 0 ? 0 : l - 1], hist[l]];\n            }));\n        };\n        nFn.__id = getTimeBasedId();\n        return nFn;\n    },\n    pullableEnd = (nodes, fn) => {\n        let nFn = () => {\n            fn(...nodes.map((node) => {\n                const hist = node.history;\n                return [hist[0], hist[hist.length - 1]];\n            }));\n        };\n        nFn.__id = getTimeBasedId();\n        return nFn;\n    },\n    unique = fns => fns\n                    .reduce((store, fn) => {\n                // @warn function with side effect, it mutates the store passed during initialization\n                        if (fn.__id in store.map) {\n                            return store;\n                        }\n\n                        store.map[fn.__id] = 1;\n                        store.unique.push(fn);\n\n                        return store;\n                    }, { map: {}, unique: [] })\n                    .unique,\n    compose = fns => () => {\n        fns.forEach(fn => fn());\n    },\n    flat = (...params) => {\n        const res = [];\n        params.forEach(param => res.push(...param));\n        return res;\n    },\n    identityMap = arrays => arrays,\n    splitPathProp = (path) => {\n        const pathArr = path.split('.'),\n            len = pathArr.length;\n        return [pathArr.slice(0, len - 1), pathArr[len - 1]];\n    },\n    scheduler = (onFinishCallback) => {\n        let queue = [],\n            animationFrame = null;\n\n        onFinishCallback = onFinishCallback &&\n            typeof onFinishCallback === 'function' && onFinishCallback || (() => { });\n\n        return (listeners) => {\n            [].push.apply(queue, listeners);\n            if (animationFrame === null) {\n                animationFrame = reqAnimFrame(() => {\n                    unique(queue).forEach(fn => fn());\n                    onFinishCallback();\n                    animationFrame = null;\n                    queue.length = 0;\n                });\n            }\n        };\n    },\n    fetch = namedNode => (...params) => params.map((param) => {\n        const node = namedNode[param];\n        return {\n            name: node.name,\n            qualifiedName: node.qualifiedName,\n            value: node.seed\n        };\n    }),\n    fetchAggregator = (...params) => ({\n        dependencies: params.slice(0, params.length - 1),\n        fn: params[params.length - 1]\n    }),\n    getUpstreamNodes = (list) => {\n        let res = [];\n        const map = {};\n        list.forEach(node => map[node.qualifiedName] = -1);\n        function rec (arr) {\n            arr.forEach((node) => {\n                let qname,\n                    placedIndex,\n                    preArr,\n                    postArr;\n                if (!((qname = node.qualifiedName) in map)) {\n                    map[qname] = res.push(node) - 1;\n                } else {\n                    placedIndex = map[qname];\n                    if (placedIndex !== -1 && placedIndex !== res.length - 1) {\n                        // If not the last element, readjust the array so that the later dependency position is saved\n                        preArr = res.slice(0, placedIndex);\n                        postArr = res.slice(placedIndex + 1);\n                        res = preArr.concat(postArr);\n\n                        // reset the index in map\n                        postArr.forEach((elem, i) => map[elem.qualifiedName] = i + preArr.length);\n                        map[qname] = res.push(node) - 1;\n                    }\n                }\n                rec(node.outgoingEdges);\n            });\n        }\n        rec(list);\n        return res;\n    },\n    resolver = {\n        accumulate: (...params) => {\n            const resp = {};\n            params.forEach((nodeDetails) => {\n                Object.assign(resp, { [nodeDetails.name]: nodeDetails.value });\n            });\n            return resp;\n        },\n        identity: nodeDetails => nodeDetails.value\n    };\n\nfunction resolveDependencyOrder (node, resolved, resolveMap) {\n    let qname;\n    node.edges.forEach((neighbour) => {\n        resolveDependencyOrder(neighbour, resolved, resolveMap);\n    });\n\n    if (node.isRoot() || (qname = node.qualifiedName) in resolveMap) {\n        return;\n    }\n    resolved.push(node);\n    resolveMap[qname] = 1;\n}\n\n// function getUpstreamNodes (node, list) {\n//     if (node.isRoot()) {\n//         return;\n//     }\n//     node.outgoingEdges.forEach((_node) => {\n//         list.push(_node);\n//         getUpstreamNodes(_node, list);\n//     });\n// }\n\nclass CustomResolver {\n    constructor (resolver) {\n        this.fn = resolver;\n        this.dep = [];\n    }\n\n    addDependencies(...dep) {\n        this.dep.push(...dep);\n        return this;\n    }\n\n    getDependencies () {\n        return this.dep;\n    }\n\n    get () {\n        return this.fn;\n    }\n}\n\nexport {\n    isSimpleObject,\n    scheduler,\n    compose,\n    flat,\n    identityMap,\n    pullableEnd,\n    pullableRecent,\n    unique,\n    splitPathProp,\n    resolver,\n    ForeignSet,\n    resolveDependencyOrder,\n    fetch,\n    // upstreamNodes,\n    fetchAggregator,\n    CustomResolver,\n    getUpstreamNodes\n};\n","const makeEntry = (arr, sCon) => {\n    arr.forEach((elem) => {\n        if (elem === undefined || elem === null) {\n            return;\n        }\n        sCon[elem] = 1;\n    });\n};\n\nexport default class ForeignSet {\n    constructor (arr) {\n        this._set = {};\n        makeEntry(arr, this._set);\n    }\n\n    append (arr) {\n        makeEntry(arr, this._set);\n        return this;\n    }\n\n    toArray () {\n        return Object.keys(this._set);\n    }\n\n    static difference (set1, set2) {\n        let key;\n        const filteredKeys = [],\n            s1 = set1._set,\n            s2 = set2._set;\n        for (key in s1) {\n            if (!({}).hasOwnProperty.call(s1, key)) {\n                continue;\n            }\n            if (key in s2) {\n                continue;\n            }\n            filteredKeys.push(key);\n        }\n        return new ForeignSet(filteredKeys);\n    }\n}\n","import { getUniqueId } from '../index';\n/**\n * Represents the base class that all objects that form\n * the data for a selection must inherit from.\n *\n * @class DataObject\n */\nclass DataObject {\n/**\n * Creates an instance of DataObject.\n * @memberof DataObject\n */\n    constructor () {\n        this._id = getUniqueId();\n    }\n    /**\n     * Returns the id.\n     *\n     * @readonly\n     * @memberof DataObject\n     */\n    get id () {\n        return this._id;\n    }\n\n    /**\n     * Sets the value corresponding to supplied key.\n     *\n     * @param {string} key The property name.\n     * @param {any} value Value associated with prop.\n     * @memberof DataObject\n     */\n    attr (key, value) {\n        this[key] = value;\n    }\n\n    /**\n     * Clean up code to be executed by each object.\n     *\n     * @override\n     * @memberof DataObject\n     */\n    remove () {\n        // cleanup\n    }\n}\n\nexport default DataObject;\n","import Selection from './selection';\n/**\n * This function applies a selection operation on a data array.\n *\n * @export\n * @param {Array} [data=[]] The data array to be observed.\n * @return {Selection} Instance of a selection.\n */\nexport default function dataSelect (data = []) {\n    return new Selection(data);\n}\n\n","import dataSelect from './dataSelect';\nimport DataObject from './data-object';\n\nexport { dataSelect, DataObject };\n","/**\n * This class represents a selection applied on a data array.\n *\n * @class Selection\n */\nclass Selection {\n    /**\n     * Creates an instance of Selection.\n     * @param {Array<DataObject>} data Array of DataObjects.\n     * @memberof Selection\n     */\n    constructor () {\n        this._data = [];\n        // // map of id to data\n        this._idMap = {};\n\n        this._mode = '';\n        // data.forEach((item, idx) => {\n        //     const index = item.id || idx;\n        //     this._idMap[index] = item;\n        // });\n        // // array to store data in enter phase\n        this._enterdata = [];\n        // // array to store data in exit phase\n        this._exitdata = [];\n    }\n    /**\n     *  Gets the object bound to a class\n     *\n     * @return {Object} current data set bound to the class\n     * @memberof Selection\n     */\n    getObjects () {\n        return Object.keys(this._idMap).map(e => this._idMap[e]);\n    }\n\n    /**\n     * This method is used to supply seed data to a selection.\n     *\n     * @param {Array} newData Seed data to create the enter selection.\n     * @param {Functon | undefined } idGetter This function is used to uniqely identify a data entry.\n     * @return {Selection} Modified selection.\n     * @memberof Selection\n     */\n    data (newData, idGetter) {\n        if (idGetter) {\n            this._data = [];\n            this._idGetter = idGetter;\n            const tempMap = {};\n\n            newData.forEach((...params) => {\n                const index = idGetter(...params);\n                tempMap[index] = params[0];\n            });\n            // check if any data items have been removed\n            const purgedIds = [];\n\n            Object.keys(this._idMap).forEach((id) => {\n                if (!tempMap[id]) {\n                    purgedIds.push(id);\n                }\n            });\n\n            Object.keys(tempMap).forEach((id) => {\n                if (!this._idMap[id]) {\n                    this._enterdata.push(tempMap[id]);\n                } else {\n                    this._idMap[id] = tempMap[id];\n                    this._data.push(tempMap[id]);\n                }\n            });\n            // move the purged items to exit selection\n            purgedIds.forEach((id) => {\n                const purged = this._idMap[id];\n                this._exitdata.push(purged);\n                // this._data = this._data.slice(id, 1);\n                delete this._idMap[id];\n            });\n            // this._data = this._data.slice(temp, this._data.length);\n\n            return this;\n        }\n        // no id getter supplied so use indices\n        if (newData.length > this._data.length) {\n            const startIdx = this._data.length;\n            for (let i = startIdx; i < newData.length; i += 1) {\n                this._enterdata.push(newData[i]);\n            }\n        } else {\n            // push to exit selection\n            const temp = newData.length;\n            for (let i = temp; i < this._data.length; i += 1) {\n                const purged = this._data[i];\n                delete this._idMap[purged.id];\n                this._exitdata.push(purged);\n            }\n            this._data = this._data.slice(temp, this._data.length);\n        }\n        return this;\n    }\n\n    /**\n     * Applies the supplied callback to each data element\n     * and returns a new selection.\n     *\n     * @param {Function} callback Callback to execute on each item.\n     * @return {Selection} New selection with data created using callback.\n     * @memberof EnterSelection\n     */\n    append (callback) {\n        this[`_${this._mode}data`].forEach((...params) => {\n            const data = params[0];\n            const id = this._idGetter ? this._idGetter(...params) : (data.id || params[1]);\n            this._idMap[id] = callback(...params);\n        });\n        this._mode = '';\n        return this;\n    }\n\n    /**\n     * This method returns an enter selection that\n     * allows or update operations.\n     *\n     * @return {EnterSelection} Instance of enter selection.\n     * @memberof Selection\n     */\n    enter () {\n        this._mode = 'enter';\n        return this;\n        // return new EnterSelection(this._enterdata, this._idMap, this._idGetter);\n    }\n\n    /**\n     * This method is used to set key value pairs\n     * on data objects.\n     *\n     * @param {string} key Name of property.\n     * @param {any} value Value of property.\n     * @return {Selection} Modified selection.\n     * @memberof Selection\n     */\n    attr (key, value) {\n        this._data.forEach(item => item.attr(key, value));\n        return this;\n    }\n\n    /**\n     * This method merges the data of one selection with another.\n     *\n     * @param {Selection} selection Instance of selection.\n     * @return {Selection} Modified selection.\n     * @memberof Selection\n     */\n    merge (selection) {\n        selection._data.forEach((...params) => {\n            const id = this._idGetter ? this._idGetter(...params) : (params[0].id || params[1]);\n            this._idMap[id] = params[0];\n            this._data.push(params[0]);\n        });\n        // reset enter selection\n        this._enterdata = [];\n        return this;\n    }\n\n    /**\n     * Returns a selection with exit data.\n     *\n     * @return {Selection} Instance of selection.\n     * @memberof Selection\n     */\n    exit () {\n        this._mode = 'exit';\n        // const exitdata = this._exitdata;\n        // const exitSelection = new Selection(exitdata);\n        // this._exitdata = [];\n        return this;\n    }\n\n    each (fn) {\n        Object.keys(this._idMap).forEach((e) => {\n            fn(this._idMap[e]);\n        });\n        return this;\n    }\n\n    map (fn) {\n        Object.keys(this._idMap).forEach((...params) => {\n            this._idMap[params[0]] = fn(this._idMap[params[0]], ...params);\n        });\n        return this;\n    }\n\n    /**\n     * Executes the cleanup operation associated with data objets.\n     *\n     * @memberof Selection\n     */\n    remove () {\n        // do cleanup on DDO's\n        const data = this[`_${this._mode}data`];\n\n        data.forEach(item => item.remove());\n        if (this._mode === '') {\n            this.each(e => e.remove());\n        }\n        this[`_${this._mode}data`] = [];\n        this._mode = '';\n    }\n}\n\nexport default Selection;\n","/* global window, requestAnimationFrame, cancelAnimationFrame */\nimport { FieldType, DimensionSubtype } from 'datamodel';\nimport {\n    axisLeft,\n    axisRight,\n    axisTop,\n    axisBottom\n} from 'd3-axis';\nimport {\n    symbolCircle,\n    symbolCross,\n    symbolDiamond,\n    symbolSquare,\n    symbolStar,\n    symbolWye,\n    symbolTriangle,\n    symbol,\n    stack as d3Stack,\n    stackOffsetDiverging,\n    stackOrderNone,\n    stackOrderAscending,\n    stackOrderDescending,\n    stackOffsetNone,\n    stackOffsetExpand,\n    stackOffsetWiggle,\n    pie,\n    arc,\n    line,\n    curveLinear,\n    curveStepAfter,\n    curveStepBefore,\n    curveStep,\n    curveCatmullRom,\n    area\n} from 'd3-shape';\nimport { scaleBand } from 'd3-scale';\nimport { nest } from 'd3-collection';\nimport {\n    interpolate,\n    interpolateRgb,\n    piecewise,\n    interpolateNumber,\n    interpolateHslLong\n} from 'd3-interpolate';\nimport {\n    easeCubic,\n    easeBounce,\n    easePoly,\n    easeBack,\n    easeCircle,\n    easeLinear,\n    easeElastic\n} from 'd3-ease';\nimport {\n   color,\n   rgb,\n   hsl\n} from 'd3-color';\nimport { voronoi } from 'd3-voronoi';\nimport Model from 'hyperdis';\nimport * as STACK_CONFIG from './enums/stack-config';\n\nconst HTMLElement = window.HTMLElement;\n\n/**\n * Returns unique id\n * @return {string} Unique id string\n */\nconst\n    getUniqueId = () => `id-${new Date().getTime()}${Math.round(Math.random() * 10000)}`;\n/**\n * Deep copies an object and returns a new object.\n * @param {Object} o Object to clone\n * @return {Object} New Object.\n */\nconst clone = (o) => {\n    const output = {};\n    let v;\n    for (const key in o) {\n        if ({}.hasOwnProperty.call(o, key)) {\n            v = o[key];\n            output[key] = (typeof v === 'object') ? clone(v) : v;\n        }\n    }\n    return output;\n};\n\n/**\n* Checks the existence of keys in an object\n* @param {Array} keys Set of keys which are to be checked\n* @param {Object} obj whose keys are checked from the set of keys provided\n* @return {Object} Error if the keys are absent, or the object itself\n*/\nconst checkExistence = (keys, obj) => {\n    const nonExistentKeys = [];\n    keys.forEach((key) => {\n        if (key in obj) {\n            return;\n        }\n        nonExistentKeys.push(key);\n    });\n    return nonExistentKeys;\n};\n\nconst sanitizeIP = {\n    typeObj: (keys, obj) => {\n        if (typeof obj !== 'object') {\n            return Error('Argument type object expected');\n        }\n\n        const nonExistentKeys = checkExistence(keys, obj);\n        if (nonExistentKeys.length) {\n            return Error(`Missing keys from parameter ${nonExistentKeys.join(', ')}`);\n        }\n        return obj;\n    },\n\n    /* istanbul ignore next */ htmlElem: (elem) => {\n        if (!(elem instanceof HTMLElement)) {\n            return Error('HTMLElement required');\n        }\n        return elem;\n    }\n};\n\n/**\n * Gets the maximum value from an array of objects for a given property name\n * @param  {Array.<Object>} data   Array of objects\n * @param  {string} field Field name\n * @return {number} Maximum value\n */\nconst getMax = (data, field) => Math.max(...data.filter(d => !isNaN(d[field])).map(d => d[field]));\n\n/**\n * Gets the minimum value from an array of objects for a given property name\n * @param  {Array.<Object>} data   Array of objects\n * @param  {string} field Field name\n * @return {number} Minimum value\n */\nconst getMin = (data, field) => Math.min(...data.filter(d => !isNaN(d[field])).map(d => d[field]));\n\n/**\n * Gets the domain from the data based on the field name and type of field\n * @param  {Array.<Object> | Array.<Array>} data       Data Array\n * @param  {Array.<string>} fields    Array of fields from where the domain will be calculated\n * @param {string} fieldType Type of field - nominal, quantitiative, temporal.\n * @return {Array} Usually contains a min and max value if field is quantitative or\n * an array of values if field type is nominal or ordinal\n */\nconst getDomainFromData = (data, fields, fieldType) => {\n    let domain;\n    let domArr;\n    data = data[0] instanceof Array ? data : [data];\n    switch (fieldType) {\n    case DimensionSubtype.CATEGORICAL:\n        domain = [].concat(...data.map(arr => arr.map(d => d[fields[0]]).filter(d => d !== undefined)));\n        break;\n    default:\n        domArr = data.map((arr) => {\n            const firstMin = getMin(arr, fields[0]);\n            const secondMin = getMin(arr, fields[1]);\n            const firstMax = getMax(arr, fields[0]);\n            const secondMax = getMax(arr, fields[1]);\n            return [Math.min(firstMin, secondMin), Math.max(firstMax, secondMax)];\n        });\n        domain = [Math.min(...domArr.map(d => d[0])), Math.max(...domArr.map(d => d[1]))];\n        break;\n    }\n    return domain;\n};\n\n/**\n * Union Domain values\n * @param {Array.<Array>} domains Array of domain values\n * @param {string} fieldType type of field - dimension,measure or datetime.\n * @return {Array} Unioned domain of all domain values.\n */\nconst unionDomain = (domains, fieldType) => {\n    let domain;\n    domains = domains.filter(dom => dom.length);\n    if (fieldType === DimensionSubtype.CATEGORICAL) {\n        domain = domain = [].concat(...domains);\n    } else {\n        domain = [Math.min(...domains.map(d => d[0])), Math.max(...domains.map(d => d[1]))];\n    }\n\n    return domain;\n};\n\nconst symbolFns = {\n    circle: symbolCircle,\n    cross: symbolCross,\n    diamond: symbolDiamond,\n    square: symbolSquare,\n    star: symbolStar,\n    wye: symbolWye,\n    triangle: symbolTriangle\n};\n\nconst easeFns = {\n    cubic: easeCubic,\n    bounce: easeBounce,\n    linear: easeLinear,\n    elastic: easeElastic,\n    back: easeBack,\n    poly: easePoly,\n    circle: easeCircle\n};\n\n/**\n * Returns the maximum or minimum points of a compare value from an array of objects.\n * @param {Array} points Array of objects\n * @param {string} compareValue Key in the object on which the comparing will be done.\n * @param {string} minOrMax minimum or maximum.\n * @return {Object} Minimum or maximum point.\n */\nconst getExtremePoint = (points, compareValue, minOrMax) => {\n    let extremePoint;\n    let point;\n    const len = points.length;\n    let minOrMaxVal = minOrMax === 'max' ? -Infinity : Infinity;\n    let val;\n\n    for (let i = 0; i < len; i++) {\n        point = points[i];\n        val = point[compareValue];\n        if (minOrMax === 'min' ? val < minOrMaxVal : val > minOrMaxVal) {\n            minOrMaxVal = val;\n            extremePoint = point;\n        }\n    }\n\n    return extremePoint;\n};\n\n/**\n * Returns the minimum point of a compare value from an array of objects.\n * @param {Array} points Array of objects\n * @param {string} compareValue Key in the object on which the comparing will be done.\n * @return {Object} Minimum point.\n */\nconst getMinPoint = (points, compareValue) => getExtremePoint(points, compareValue, 'min');\n\n/**\n * Returns the maximum point of a compare value from an array of objects.\n * @param {Array} points Array of objects\n * @param {string} compareValue Key in the object on which the comparing will be done.\n * @return {Object} Maximum point.\n */\nconst getMaxPoint = (points, compareValue) => getExtremePoint(points, compareValue, 'max');\n\n/**\n * Gets the index of the closest value of the given value from the array.\n * @param {Array} arr Array of values\n * @param {number} value Value from which the nearest value will be calculated.\n * @param {string} side side property.\n * @return {number} index of the closest value\n */\n/* istanbul ignore next */const getClosestIndexOf = (arr, value, side) => {\n    let low = 0;\n    const arrLen = arr.length;\n    let high = arrLen - 1;\n\n    let mid;\n    let d1;\n    let d2;\n\n    while (low < high) {\n        mid = Math.floor((low + high) / 2);\n        d1 = Math.abs(arr[mid] - value);\n        d2 = Math.abs(arr[mid + 1] - value);\n\n        if (d2 <= d1) {\n            low = mid + 1;\n        } else {\n            high = mid;\n        }\n    }\n\n    if (!side) {\n        return high;\n    }\n\n    const highVal = arr[high];\n    if (highVal === value) {\n        return high;\n    } else if (highVal > value) {\n        if (high === 0) { return high; }\n        return side === 'left' ? high - 1 : high;\n    }\n    if (high === arr.length - 1) { return high; }\n    return side === 'left' ? high : high + 1;\n};\n\n/**\n * Returns the browser window object\n * @return {Window} Window object\n*/\nconst getWindow = () => window;\n\n/**\n * Returns the browser window object\n * @return {Window} Window object\n*/\nconst reqAnimFrame = (() => requestAnimationFrame)();\n\nconst cancelAnimFrame = (() => cancelAnimationFrame)();\n\n/**\n * Capitalizes the first letter of the word\n * @param {string} text word\n * @return {string} Capitalized word\n */\nconst capitalizeFirst = (text) => {\n    text = text.toLowerCase();\n\n    return text.replace(/\\w\\S*/g, txt => txt.charAt(0).toUpperCase() + txt.substr(1));\n};\n\n/**\n *\n *\n * @param {*} arr\n */\nconst unique = arr => ([...new Set(arr)]);\n\n/**\n * Gets the minimum difference between two consecutive numbers  in an array.\n * @param {Array} arr Array of numbers\n * @param {number} index index of the value\n * @return {number} minimum difference between values\n */\n/* istanbul ignore next */ const getMinDiff = (arr, index) => {\n    let diff;\n    let uniqueVals;\n    if (index !== undefined) {\n        uniqueVals = unique(arr.map(d => d[index]));\n    } else {\n        uniqueVals = unique(arr);\n    }\n    if (uniqueVals.length > 1) {\n        diff = Math.abs(uniqueVals[1] - uniqueVals[0]);\n        for (let i = 2, len = uniqueVals.length; i < len; i++) {\n            diff = Math.min(diff, Math.abs(uniqueVals[i] - uniqueVals[i - 1]));\n        }\n    } else {\n        diff = uniqueVals[0];\n    }\n\n    return diff;\n};\n\n/**\n * Returns the class name appended with a given id.\n * @param {string} cls class name\n * @param {string} id unique identifier\n * @param {string} prefix string needed to add before the classname\n * @return {string} qualified class name\n */\n/* istanbul ignore next */const getQualifiedClassName = (cls, id, prefix) => {\n    cls = cls.replace(/^\\.*/, '');\n    return [`${prefix}-${cls}`, `${prefix}-${cls}-${id}`];\n};\n\n/**\n * This method is used to set the default value for variables\n * without sullying the code with conditional statements.\n *\n * @export\n * @param {any} param The parameter to test.\n * @param {any} value The default value to assign.\n * @return {any} The value.\n */\n/* istanbul ignore next */ const defaultValue = (param, value) => {\n    if (typeof param === 'undefined' || (typeof param === 'object' && !param)) {\n        return value;\n    }\n    return param;\n};\n\n/**\n * DESCRIPTION TODO\n * @todo\n *\n * @export\n * @param {Object} graph graph whose dependency order has to be generated\n * @return {Object} @todo\n */\nconst getDependencyOrder = (graph) => {\n    const dependencyOrder = [];\n    const visited = {};\n    const keys = Object.keys(graph);\n    /**\n     * DESCRIPTION TODO\n     * @todo\n     *\n     * @export\n     * @param {Object} name @todo\n     * @return {Object} @todo\n     */\n    const visit = (name) => {\n        if (dependencyOrder.length === keys.length) {\n            return true;\n        }\n        visited[name] = true;\n        const edges = graph[name];\n        for (let e = 0; e < edges.length; e++) {\n            const dep = edges[e];\n            if (!visited[dep]) {\n                visit(dep);\n            }\n        }\n\n        dependencyOrder.push(name);\n        return false;\n    };\n\n    for (let i = 0; i < keys.length; i++) {\n        if (visit(keys[i], i)) break;\n    }\n\n    return dependencyOrder;\n};\n\n/**\n * Iterates over the properties of an object and applies the function\n *\n * @param {any} obj object to be iterated upon\n * @param {any} fn  function to be applied on it\n */\nconst objectIterator = (obj, fn) => {\n    for (const key in obj) {\n        if (Object.hasOwnProperty.call(obj, key)) {\n            fn(key, obj);\n        }\n    }\n};\n\n/**\n * This class creates a d3 voronoi for retrieving the nearest neighbour of any point from a set of two\n * dimensional points\n * @class Voronoi\n */\n/* istanbul ignore next */ class Voronoi {\n    /**\n     * Initialize the voronoi with the data given.\n     * @param {Array.<Object>} data Array of points.\n     */\n    constructor (data) {\n        this._voronoi = voronoi().x(d => d.x).y(d => d.y);\n        this.data(data);\n    }\n\n    /**\n     * Sets the data to voronoi\n     * @param {Array.<Object>} data Array of objects.\n     * @return {Voronoi} Instance of voronoi.\n     */\n    data (data) {\n        if (data) {\n            this._voronoiFn = this._voronoi(data);\n        }\n        return this;\n    }\n\n    /**\n     * Finds the closest point to the x and y position given.\n     * @param {number} x x value\n     * @param {number} y y value\n     * @param {number} radius search radius.\n     * @return {Object} Details of the nearest point.\n     */\n    find (x, y, radius) {\n        return this._voronoiFn.find(x, y, radius);\n    }\n}\n\n/**\n * Methods to handle changes to table configuration and reactivity are handled by this\n * class.\n */\n/**\n *  Common store class\n *\n * @class Store\n */\nclass Store {\n    /**\n     * Creates an instance of Store.\n     * @param {Object} config The object to create the state store with.\n     * @memberof Store\n     */\n    constructor (config) {\n        // create reactive model\n        this.model = Model.create(config);\n        this._listeners = [];\n    }\n\n    /**\n     * This method returns a plain JSON object\n     * with all the fields in the state store.\n     *\n     * @return {Object} Serialized representation of state store.\n     * @memberof Store\n     */\n    serialize () {\n        return this.model.serialize();\n    }\n\n    /**\n     * This method is used to update the value of a property in the state store.\n     *\n     * @param {string} propName The name of the property.\n     * @param {number} value The new value of the property.\n     * @memberof Store\n     */\n    commit (propName, value) {\n        // check if appropriate enum has been used\n        this.model.prop(propName, value);\n    }\n\n    /**\n     * This method is used to register a callbacl that will execute\n     * when one or more properties change.\n     *\n     * @param {string | Array} propNames name of property or array of props.\n     * @param {Function} callBack The callback to execute.\n     * @memberof Store\n     */\n    /* istanbul ignore next */registerChangeListener (propNames, callBack, instantCall) {\n        let props = propNames;\n        if (!Array.isArray(propNames)) {\n            props = [propNames];\n        }\n        const fn = this.model.next(props, callBack, instantCall);\n        this._listeners.push(fn);\n        return this;\n    }\n    /**\n     * This method is used to register a callbacl that will execute\n     * when one or more properties change.\n     *\n     * @param {string | Array} propNames name of property or array of props.\n     * @param {Function} callBack The callback to execute.\n     * @memberof Store\n     */\n    /* istanbul ignore next */ registerImmediateListener (propNames, callBack, instantCall) {\n        let props = propNames;\n        if (!Array.isArray(propNames)) {\n            props = [propNames];\n        }\n        const fn = this.model.on(props, callBack, instantCall);\n        this._listeners.push(fn);\n        return this;\n    }\n    /**\n     * This method is used to get the name of the property\n     * from the state store.\n     *\n     * @param {string} propName The name of the field in state store.\n     * @return {any} The value of the field.\n     * @memberof Store\n     */\n    get (propName) {\n        return this.model.prop(propName);\n    }\n\n    /**\n     * This method is used to register a computed property that is computed every time\n     * the store value changes.\n     *\n     * @param {string} propName The name of the property to create.\n     * @param {Function} callBack The function to execute when depemdent props change.\n     * @memberof Store\n     */\n    computed (propName, callBack) {\n        return this.model.calculatedProp(propName, callBack);\n    }\n\n    unsubscribeAll () {\n        this._listeners.forEach(fn => fn());\n    }\n}\n\n/**\n * Sanitize an input number / string mixed number. Currently dot in the no is not supported.\n *\n * @param {number | string} val pure number or string mixed number\n * @return {number | null}  Number if it can be extracted. Otherwise null\n */\nconst intSanitizer = (val) => {\n    const arr = val.toString().match(/(\\d+)(px)*/g);\n    if (!arr) {\n        // If only characters are passed\n        return null;\n    }\n\n    return parseInt(arr[0], 10);\n};\n\n/**\n * Setter getter creator from config\n * Format\n *  PROPERTRY_NAME: {\n *      value: // default value of the property,\n *      meta: {\n *          typeCheck: // The setter value will be checked using this. If the value is function then the setter value\n *                     // is passed as args. (Optional)\n *          typeExpected: // The output of typecheck action will be tested against this. Truthy value will set the\n *                       // value to the setter\n *          sanitizaiton: // Need for sanitization before type is checked\n *      }\n *  }\n *\n * @param {Object} holder an empty object on which the getters and setters will be mounted\n * @param {Object} options options config based on which the getters and setters are determined.\n * @param {Hyperdis} model optional model to attach the property. If not sent new moel is created.\n * @return {Array} @todo\n */\nconst transactor = (holder, options, model) => {\n    let conf;\n    const store = model && model instanceof Model ? model : Model.create({});\n\n    for (const prop in options) {\n        if ({}.hasOwnProperty.call(options, prop)) {\n            conf = options[prop];\n            if (!store.prop(prop)) {\n                store.append({ [prop]: conf.value });\n            }\n            holder[prop] = ((context, key, meta) => (...params) => {\n                let val;\n                let compareTo;\n                const paramsLen = params.length;\n                const prevVal = store.prop(prop);\n                if (paramsLen) {\n                    // If parameters are passed then it's a setter\n                    const spreadParams = meta && meta.spreadParams;\n                    val = params;\n                    const values = [];\n                    if (meta) {\n                        for (let i = 0; i < paramsLen; i++) {\n                            val = params[i];\n                            const sanitization = meta.sanitization && (spreadParams ? meta.sanitization[i] :\n                                meta.sanitization);\n                            const typeCheck = meta.typeCheck && (spreadParams ? meta.typeCheck[i] : meta.typeCheck);\n                            if (sanitization && typeof sanitization === 'function') {\n                                // Sanitize if required\n                                val = sanitization(val, prevVal, holder);\n                            }\n\n                            if (typeCheck) {\n                                // Checking if a setter is valid\n                                if (typeof typeCheck === 'function') {\n                                    let typeExpected = meta.typeExpected;\n                                    if (typeExpected && spreadParams) {\n                                        typeExpected = typeExpected[i];\n                                    }\n                                    if (typeExpected) {\n                                        compareTo = typeExpected;\n                                    } else {\n                                        compareTo = true;\n                                    }\n\n                                    if (typeCheck(val) === compareTo) {\n                                        values.push(val);\n                                    }\n                                } else if (typeof typeCheck === 'string') {\n                                    if (typeCheck === 'constructor') {\n                                        const typeExpected = spreadParams ? meta.typeExpected[i] : meta.typeExpected;\n                                        if (val && (val.constructor.name === typeExpected)) {\n                                            values.push(val);\n                                        }\n                                    }\n                                } else {\n                                    // context.prop(key, val);\n                                    values.push(val);\n                                }\n                            } else {\n                                values.push(val);\n                            }\n                        }\n                        const preset = meta.preset;\n                        const oldValues = context.prop(key);\n                        preset && preset(values[0], holder);\n                        if (spreadParams) {\n                            oldValues.forEach((value, i) => {\n                                if (values[i] === undefined) {\n                                    values[i] = value;\n                                }\n                            });\n                        }\n                        values.length && context.prop(key, spreadParams ? values : values[0]);\n                    } else {\n                        context.prop(key, spreadParams ? val : val[0]);\n                    }\n                    return holder;\n                }\n            // No parameters are passed hence its a getter\n                return context.prop(key);\n            })(store, prop, conf.meta);\n        }\n    }\n\n    return [holder, store];\n};\n\n/**\n *\n *\n * @param {*} context\n * @param {*} props\n */\nconst generateGetterSetters = (context, props) => {\n    Object.entries(props).forEach((propInfo) => {\n        const prop = propInfo[0];\n        const typeChecker = propInfo[1].typeChecker;\n        const sanitization = propInfo[1].sanitization;\n        const prototype = context.constructor.prototype;\n        if (!(Object.hasOwnProperty.call(prototype, prop))) {\n            context[prop] = (...params) => {\n                if (params.length) {\n                    let value = params[0];\n                    if (sanitization) {\n                        value = sanitization(context, params[0]);\n                    }\n                    if (typeChecker && !typeChecker(value)) {\n                        return context[`_${prop}`];\n                    }\n                    context[`_${prop}`] = value;\n                    return context;\n                } return context[`_${prop}`];\n            };\n        }\n    });\n};\n\n/**\n *\n *\n * @param {*} arr\n * @param {*} prop\n */\nconst getArraySum = (arr, prop) => arr.reduce((total, elem) => {\n    total += prop ? elem[prop] : elem;\n    return total;\n}, 0);\n\n/**\n *\n *\n * @param {*} arr1\n * @param {*} arr2\n * @returns\n */\nconst arraysEqual = (arr1, arr2) => {\n    if (arr1.length !== arr2.length) { return false; }\n    for (let i = arr1.length; i--;) {\n        if (arr1[i] !== arr2[i]) { return false; }\n    }\n\n    return true;\n};\n\n/* eslint valid-typeof:0 */\n/**\n * Returns a validation function which can be used to validate variables against a type and value\n *\n * @param {any} type type of value that the object should have\n * @return {Object} validation function\n */\nconst isEqual = type => (oldVal, newVal) => {\n    if (type === 'Array') {\n        if (!oldVal) {\n            return false;\n        }\n        return arraysEqual(oldVal, newVal);\n    } else if (type === 'Object') {\n        return Object.is(oldVal, newVal);\n    } return oldVal === newVal;\n};\n\n/**\n * Description @todo\n *\n * @param {any} transactionModel @todo\n * @param {any} transactionEndpoint @todo\n * @param {any} transactionItems @todo\n * @return {any} @todo\n */\nconst enableChainedTransaction = (transactionModel, transactionEndpoint, transactionItems) =>\n    transactionItems.forEach(item => transactionModel.on(item, ([, newVal]) => transactionEndpoint[item](newVal)));\n\n/**\n * Chceks if the element is istanceof HTMLElement\n *\n * @param {Object} elem any JS Object\n */\nconst isHTMLElem = elem => elem instanceof HTMLElement;\n\nconst ERROR_MSG = {\n    INTERFACE_IMPL: 'Method not implemented'\n};\n\nconst isSimpleObject = (obj) => {\n    let token;\n    if (typeof obj === 'object') {\n        if (obj === null) { return false; }\n        token = Object.prototype.toString.call(obj);\n        if (token === '[object Object]') {\n            return (obj.constructor.toString().match(/^function (.*)\\(\\)/m) || [])[1] === 'Object';\n        }\n    }\n    return false;\n};\n\n/**\n * Merges the sink object in the source by recursively iterating through the object properties\n * @param {Object} source Source Object\n * @param {Object} sink Sink Object\n * @return {Object} Merged object\n */\nconst mergeRecursive = (source, sink) => {\n    for (const prop in sink) {\n        if (isSimpleObject(source[prop]) && isSimpleObject(sink[prop])) {\n            mergeRecursive(source[prop], sink[prop]);\n        } else if (sink[prop] instanceof Object && sink[prop].constructor === Object) {\n            source[prop] = {};\n            mergeRecursive(source[prop], sink[prop]);\n        } else {\n            source[prop] = sink[prop];\n        }\n    }\n    return source;\n};\n\nconst interpolateArray = (data, fitCount) => {\n    const linearInterpolate = function (before, after, atPoint) {\n        return before + (after - before) * atPoint;\n    };\n    const newData = [];\n    const springFactor = ((data.length - 1) / (fitCount - 1));\n    newData[0] = data[0]; // for new allocation\n    for (let i = 1; i < fitCount - 1; i++) {\n        const tmp = i * springFactor;\n        const before = (Math.floor(tmp)).toFixed();\n        const after = (Math.ceil(tmp)).toFixed();\n        const atPoint = tmp - before;\n        newData[i] = linearInterpolate(data[before], data[after], atPoint);\n    }\n    newData[fitCount - 1] = data[data.length - 1]; // for new allocation\n    return newData;\n};\n\n/**\n *\n *\n * @param {*} fn\n */\nconst nextFrame = (fn) => {\n    setTimeout(() => {\n        fn();\n    }, 0);\n};\n\n/**\n *\n *\n * @param {*} angle\n */\nconst angleToRadian = angle => angle * Math.PI / 180;\n\n/**\n *\n *\n * @param {*} newName\n * @param {*} oldName\n */\nconst replaceCSSPrefix = () => {\n    // @todo\n};\n\n/**\n *\n *\n */\nconst interpolator = () => interpolate;\n\n/**\n *\n *\n */\nconst numberInterpolator = () => interpolateNumber;\n\n/**\n *\n *\n */\nconst colorInterpolator = () => interpolateRgb;\n\n/**\n *\n *\n */\nconst hslInterpolator = () => interpolateHslLong;\n\nconst transformColors = () => ({\n    color,\n    rgb,\n    hsl\n});\n\n/**\n *\n *\n */\nconst piecewiseInterpolator = () => piecewise;\n\nfunction hue2rgb (p, q, t) {\n    if (t < 0) t += 1;\n    if (t > 1) t -= 1;\n    if (t < 1 / 6) return p + (q - p) * 6 * t;\n    if (t < 1 / 2) return q;\n    if (t < 2 / 3) return p + (q - p) * (2 / 3 - t) * 6;\n    return p;\n}\n\n  /**\n   * Converts an HSL color value to RGB. Conversion formula\n   * adapted from http://en.wikipedia.org/wiki/HSL_color_space.\n   * Assumes h, s, and l are contained in the set [0, 1] and\n   * returns r, g, and b in the set [0, 255].\n   *\n   * @param   Number  h       The hue\n   * @param   Number  s       The saturation\n   * @param   Number  l       The lightness\n   * @return  Array           The RGB representation\n   */\nconst hslToRgb = (h, s, l, a = 1) => {\n    let r;\n    let g;\n    let b;\n\n    if (s === 0) {\n        r = g = b = l; // achromatic\n    } else {\n        const q = l < 0.5 ? l * (1 + s) : l + s - l * s;\n        const p = 2 * l - q;\n\n        r = hue2rgb(p, q, h + 1 / 3);\n        g = hue2rgb(p, q, h);\n        b = hue2rgb(p, q, h - 1 / 3);\n    }\n\n    return [r * 255, g * 255, b * 255, a];\n};\n\n  /**\n   * Converts an RGB color value to HSV. Conversion formula\n   * adapted from http://en.wikipedia.org/wiki/HSV_color_space.\n   * Assumes r, g, and b are contained in the set [0, 255] and\n   * returns h, s, and v in the set [0, 1].\n   *\n   * @param   Number  r       The red color value\n   * @param   Number  g       The green color value\n   * @param   Number  b       The blue color value\n   * @return  Array           The HSV representation\n   */\nconst rgbToHsv = (r, g, b, a = 1) => {\n    r = +r; g = +g; b = +b; a = +a;\n    r /= 255; g /= 255; b /= 255;\n    const max = Math.max(r, g, b);\n    const min = Math.min(r, g, b);\n    let h;\n    let s;\n    const l = (max + min) / 2;\n\n    if (max === min) {\n        h = s = 0; // achromatic\n    } else {\n        const d = max - min;\n        s = l > 0.5 ? d / (2 - max - min) : d / (max + min);\n        switch (max) {\n        case r: h = (g - b) / d + (g < b ? 6 : 0); break;\n        case g: h = (b - r) / d + 2; break;\n        case b: h = (r - g) / d + 4; break;\n        default: break;\n        }\n        h /= 6;\n    }\n    return [h, s, l, a];\n};\n\n  /**\n   * Converts an HSV color value to RGB. Conversion formula\n   * adapted from http://en.wikipedia.org/wiki/HSV_color_space.\n   * Assumes h, s, and v are contained in the set [0, 1] and\n   * returns r, g, and b in the set [0, 255].\n   *\n   * @param   Number  h       The hue\n   * @param   Number  s       The saturation\n   * @param   Number  v       The value\n   * @return  Array           The RGB representation\n   */\nconst hsvToRgb = (h, s, v, a = 1) => {\n    let r;\n    let g;\n    let b;\n\n    const i = Math.floor(h * 6);\n    const f = h * 6 - i;\n    const p = v * (1 - s);\n    const q = v * (1 - f * s);\n    const t = v * (1 - (1 - f) * s);\n\n    switch (i % 6) {\n    case 0: r = v; g = t; b = p; break;\n    case 1: r = q; g = v; b = p; break;\n    case 2: r = p; g = v; b = t; break;\n    case 3: r = p; g = q; b = v; break;\n    case 4: r = t; g = p; b = v; break;\n    case 5: r = v; g = p; b = q; break;\n    default: break;\n    }\n\n    return [r * 255, g * 255, b * 255, a];\n};\n\nconst hexToHsv = (hex) => {\n    const result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\n\n    const r = parseInt(result[1], 16);\n    const g = parseInt(result[2], 16);\n    const b = parseInt(result[3], 16);\n    const a = result[4] ? parseInt(result[4], 16) : 1;\n    return rgbToHsv(r, g, b, a);\n};\n\nconst detectColor = (col) => {\n    const matchRgb = /rgb\\((\\d{1,3}), (\\d{1,3}), (\\d{1,3})\\)/;\n    const matchHsl = /hsl\\((\\d+),\\s*([\\d.]+)%,\\s*([\\d.]+)%\\)/g;\n\n    // Source :  https://gist.github.com/sethlopezme/d072b945969a3cc2cc11\n     // eslint-disable-next-line\n    const matchRgba = /rgba?\\(((25[0-5]|2[0-4]\\d|1\\d{1,2}|\\d\\d?)\\s*,\\s*?){2}(25[0-5]|2[0-4]\\d|1\\d{1,2}|\\d\\d?)\\s*,?\\s*([01]\\.?\\d*?)?\\)/;\n     // eslint-disable-next-line\n    const matchHsla = /^hsla\\((0|360|35\\d|3[0-4]\\d|[12]\\d\\d|0?\\d?\\d),(0|100|\\d{1,2})%,(0|100|\\d{1,2})%,(0?\\.\\d|1(\\.0)?)\\)$/;\n    const matchHex = /^#([0-9a-f]{3}){1,2}$/i;\n\n    if (matchRgb.test(col) || matchRgba.test(col)) {\n        return 'rgb';\n    } else if (matchHsl.test(col) || matchHsla.test(col)) {\n        return 'hsl';\n    } else if (matchHex.test(col)) {\n        return 'hex';\n    } return col;\n};\n\n/**\n *\n *\n * @param {*} model\n * @param {*} propModel\n * @returns\n */\nconst filterPropagationModel = (model, propModel, measures) => {\n    const { data, schema } = propModel.getData();\n    let filteredModel;\n    if (schema.length) {\n        const fieldMap = model.getFieldsConfig();\n        filteredModel = model.select((fields) => {\n            const include = data.some(row => schema.every((propField, idx) => {\n                if (!measures && (!(propField.name in fieldMap) ||\n                        fieldMap[propField.name].def.type === FieldType.MEASURE)) {\n                    return true;\n                }\n                return row[idx] === fields[propField.name].valueOf();\n            }));\n            return include;\n        }, {\n            saveChild: false\n        });\n    } else {\n        filteredModel = propModel;\n    }\n\n    return filteredModel;\n};\n\nconst assembleModelFromIdentifiers = (model, identifiers) => {\n    let schema = [];\n    let data;\n    const fieldMap = model.getFieldsConfig();\n    if (identifiers.length) {\n        const fields = identifiers[0];\n        const len = fields.length;\n        for (let i = 0; i < len; i++) {\n            const field = fields[i];\n            const fieldObj = fieldMap[field] && Object.assign({}, fieldMap[field].def);\n            if (fieldObj) {\n                schema.push(Object.assign(fieldObj));\n            }\n        }\n\n        data = [];\n        const header = identifiers[0];\n        for (let i = 1; i < identifiers.length; i += 1) {\n            const vals = identifiers[i];\n            const temp = {};\n            vals.forEach((fieldVal, cIdx) => {\n                temp[header[cIdx]] = fieldVal;\n            });\n            data.push(temp);\n        }\n    } else {\n        data = [];\n        schema = [];\n    }\n\n    return new model.constructor(data, schema);\n};\n\n/**\n *\n *\n * @param {*} dataModel\n * @param {*} criteria\n * @returns\n */\nconst getDataModelFromRange = (dataModel, criteria, mode) => {\n    if (criteria === null) {\n        return null;\n    }\n    const selFields = Object.keys(criteria);\n    const selFn = fields => selFields.every((field) => {\n        const val = fields[field].value;\n        const range = criteria[field][0] instanceof Array ? criteria[field][0] : criteria[field];\n        if (typeof range[0] === 'string') {\n            return range.find(d => d === val) !== undefined;\n        }\n        return range ? val >= range[0] && val <= range[1] : true;\n    });\n\n    return dataModel.select(selFn, {\n        saveChild: false,\n        mode\n    });\n};\n\n/**\n *\n *\n * @param {*} dataModel\n * @param {*} identifiers\n * @returns\n */\nconst getDataModelFromIdentifiers = (dataModel, identifiers, mode) => {\n    let filteredDataModel;\n    if (identifiers instanceof Array) {\n        const fieldsConfig = dataModel.getFieldsConfig();\n\n        const dataArr = identifiers.slice(1, identifiers.length);\n        if (identifiers instanceof Function) {\n            filteredDataModel = identifiers(dataModel, {}, false);\n        } else if (identifiers instanceof Array && identifiers[0].length) {\n            const filteredSchema = identifiers[0].filter(d => d in fieldsConfig);\n            filteredDataModel = dataModel.select((fields) => {\n                let include = true;\n                filteredSchema.forEach((propField, idx) => {\n                    const value = fields[propField].valueOf();\n                    const index = dataArr.findIndex(d => d[idx] === value);\n                    include = include && index !== -1;\n                });\n                return include;\n            }, {\n                saveChild: false,\n                mode\n            });\n        }\n    } else {\n        filteredDataModel = getDataModelFromRange(dataModel, identifiers, mode);\n    }\n    return filteredDataModel;\n};\n\n/**\n *\n *\n * @param {*} context\n * @param {*} listenerMap\n */\nconst registerListeners = (context, listenerMap) => {\n    const propListenerMap = listenerMap(context);\n    for (const key in propListenerMap) {\n        if ({}.hasOwnProperty.call(propListenerMap, key)) {\n            const mapObj = propListenerMap[key];\n            const propType = mapObj.type;\n            const props = mapObj.props;\n            const listenerFn = mapObj.listener;\n            context.store()[propType](props, listenerFn);\n        }\n    }\n};\n\nconst isValidValue = value => !isNaN(value) && value !== -Infinity && value !== Infinity;\n/**\n *\n *\n * @param {*} obj\n * @param {*} fields\n * @returns\n */\nconst getObjProp = (obj, ...fields) => {\n    if (obj === undefined || obj === null) {\n        return obj;\n    }\n    let retObj = obj;\n    for (let i = 0, len = fields.length; i < len; i++) {\n        retObj = retObj[fields[i]];\n        if (retObj === undefined || retObj === null) {\n            break;\n        }\n    }\n    return retObj;\n};\n\n/**\n *\n *\n * @param {*} str\n * @returns\n */\nconst escapeHTML = (str) => {\n    const htmlEscapes = {\n        '&': '&amp;',\n        '<': '&lt;',\n        '>': '&gt;',\n        '\"': '&quot;',\n        \"'\": '&#x27;',\n        '/': '&#x2F;'\n    };\n    const htmlEscaper = /[&<>\"'/]/g;\n    return (`${str}`).replace(htmlEscaper, match => htmlEscapes[match]);\n};\n\n/**\n *\n *\n * @param {*} arr\n */\nconst transposeArray = arr => arr[0].map((col, i) => arr.map(row => row[i]));\nconst toArray = arr => (arr instanceof Array ? arr : [arr]);\nconst extendsClass = (cls, extendsFrom, found) => {\n    if (!cls) {\n        return false;\n    }\n    const prototype = cls.prototype;\n    if (prototype instanceof extendsFrom) {\n        found = true;\n    } else {\n        found = extendsClass(prototype, extendsFrom, found);\n    }\n    return found;\n};\n\n/**\n *\n * @param {*} dm1\n * @param {*} dm2\n */\nconst concatModels = (dm1, dm2) => {\n    const dataObj1 = dm1.getData();\n    const dataObj2 = dm2.getData();\n    const data1 = dataObj1.data;\n    const data2 = dataObj2.data;\n    const schema1 = dataObj1.schema;\n    const schema2 = dataObj2.schema;\n    const tuples1 = {};\n    const tuples2 = {};\n    const commonTuples = {};\n    for (let i = 0; i < data1.length; i++) {\n        for (let ii = 0; ii < data2.length; ii++) {\n            const row1 = data1[i];\n            const row2 = data2[ii];\n            const dim1Values = row1.filter((d, idx) => schema1[idx].type === FieldType.DIMENSION);\n            const dim2Values = row2.filter((d, idx) => schema2[idx].type === FieldType.DIMENSION);\n            const allDimSame = dim1Values.every(value => dim2Values.indexOf(value) !== -1);\n            if (allDimSame) {\n                const key = dim1Values.join();\n                !commonTuples[key] && (commonTuples[key] = {});\n                row1.forEach((value, idx) => {\n                    commonTuples[key][schema1[idx].name] = value;\n                });\n                row2.forEach((value, idx) => {\n                    commonTuples[key][schema2[idx].name] = value;\n                });\n            } else {\n                const dm1Key = dim1Values.join();\n                const dm2Key = dim2Values.join();\n                if (!commonTuples[dm1Key] && !commonTuples[dm2Key]) {\n                    !tuples1[dm1Key] && (tuples1[dm1Key] = {});\n                    !tuples2[dm2Key] && (tuples2[dm2Key] = {});\n                    row1.forEach((value, idx) => {\n                        tuples1[dm1Key][schema1[idx].name] = value;\n                    });\n                    row2.forEach((value, idx) => {\n                        tuples2[dm2Key][schema2[idx].name] = value;\n                    });\n                }\n            }\n        }\n    }\n\n    const commonSchema = [...schema1, ...schema2.filter(s2 => schema1.findIndex(s1 => s1.name === s2.name) === -1)];\n    const data = [...Object.values(tuples1), ...Object.values(tuples2), ...Object.values(commonTuples)];\n    return [data, commonSchema];\n};\n\nconst getSymbol = type => symbol().type(symbolFns[type]);\n\nconst stackOrders = {\n    [STACK_CONFIG.ORDER_NONE]: stackOrderNone,\n    [STACK_CONFIG.ORDER_ASCENDING]: stackOrderAscending,\n    [STACK_CONFIG.ORDER_DESCENDING]: stackOrderDescending\n};\nconst stackOffsets = {\n    [STACK_CONFIG.OFFSET_DIVERGING]: stackOffsetDiverging,\n    [STACK_CONFIG.OFFSET_NONE]: stackOffsetNone,\n    [STACK_CONFIG.OFFSET_EXPAND]: stackOffsetExpand,\n    [STACK_CONFIG.OFFSET_WIGGLE]: stackOffsetWiggle\n};\n\n// eslint-disable-next-line require-jsdoc\nconst stack = params => d3Stack().keys(params.keys).offset(stackOffsets[params.offset])\n                .order(stackOrders[params.order])(params.data);\n\n/**\n * Groups the data into a hierarchical tree structure based on one or more fields.\n * @param { Object } params Configuration properties for nesting data\n * @param { Array.<Array> } params.data Data which needs to be grouped\n * @param { Array.<number> } params.keys Field indices by which the data will be grouped\n * @return { Array.<Object> } Grouped data array\n */\nconst nestCollection = (params) => {\n    const nestFn = nest();\n    params.keys.forEach(key => nestFn.key(d => d[key]));\n    return nestFn.entries(params.data);\n};\n\nconst pathInterpolators = {\n    curveLinear,\n    curveStepAfter,\n    curveStepBefore,\n    curveStep,\n    curveCatmullRom,\n    stepAfter: curveStepAfter,\n    catmullRom: curveCatmullRom,\n    step: curveStep,\n    stepBefore: curveStepBefore,\n    linear: curveLinear\n};\n\nconst Symbols = {\n    axisLeft,\n    axisRight,\n    axisTop,\n    axisBottom,\n    line,\n    area,\n    pie,\n    arc,\n    nest\n};\n\nconst Scales = {\n    band: scaleBand\n};\n\n/**\n *\n *\n */\nconst getSmallestDiff = (points) => {\n    points = points.sort((a, b) => a - b);\n    let minDiff = points[1] - points[0];\n    for (let i = 2; i < points.length; i++) {\n        minDiff = Math.min(minDiff, points[i] - points[i - 1]);\n    }\n\n    return minDiff;\n};\n\nconst require = (lookupWhat, lookupDetails) => ({\n    resolvable: (store) => {\n        const lookupTarget = store[lookupWhat];\n        const depArr = lookupDetails.slice(0, lookupDetails.length - 1);\n        const fn = lookupDetails[lookupDetails.length - 1]; // fn\n\n        const deps = depArr.map(str => lookupTarget[str]);\n        return {\n            fn: fn(...deps),\n            depArr\n        };\n    }\n});\n\nexport {\n    require,\n    Scales,\n    Symbols,\n    pathInterpolators,\n    stack,\n    nestCollection,\n    getSymbol,\n    transformColors,\n    detectColor,\n    hexToHsv,\n    hslToRgb,\n    rgbToHsv,\n    hsvToRgb,\n    concatModels,\n    toArray,\n    angleToRadian,\n    escapeHTML,\n    generateGetterSetters,\n    getArraySum,\n    interpolator,\n    piecewiseInterpolator,\n    getDataModelFromIdentifiers,\n    getDataModelFromRange,\n    colorInterpolator,\n    numberInterpolator,\n    ERROR_MSG,\n    reqAnimFrame,\n    filterPropagationModel,\n    transposeArray,\n    cancelAnimFrame,\n    getMax,\n    getMin,\n    getDomainFromData,\n    getUniqueId,\n    mergeRecursive,\n    unionDomain,\n    symbolFns,\n    easeFns,\n    clone,\n    isEqual,\n    interpolateArray,\n    getMinPoint,\n    defaultValue,\n    getMaxPoint,\n    getClosestIndexOf,\n    Voronoi,\n    checkExistence,\n    sanitizeIP,\n    getMinDiff,\n    capitalizeFirst,\n    getWindow,\n    getQualifiedClassName,\n    Store,\n    getDependencyOrder,\n    objectIterator,\n    intSanitizer,\n    transactor,\n    enableChainedTransaction,\n    isHTMLElem,\n    isSimpleObject,\n    nextFrame,\n    registerListeners,\n    replaceCSSPrefix,\n    getObjProp,\n    extendsClass,\n    assembleModelFromIdentifiers,\n    isValidValue,\n    hslInterpolator,\n    getSmallestDiff\n};\n","const CommonProps = {\n    ACTION_INF: 'actionInf',\n    ON_LAYER_DRAW: 'onlayerdraw'\n};\n\nexport default CommonProps;\n","export { default as ReservedFields } from './reserved-fields';\nexport { default as CommonProps } from './common-props';\n","const ReservedFields = {\n    ROW_ID: '__id__'\n};\n\nexport default ReservedFields;\n","export const ORDER_ASCENDING = 'ascending';\nexport const ORDER_DESCENDING = 'descending';\nexport const ORDER_NONE = 'none';\nexport const OFFSET_DIVERGING = 'diverging';\nexport const OFFSET_NONE = 'none';\nexport const OFFSET_EXPAND = 'expand';\nexport const OFFSET_WIGGLE = 'wiggle';\n","import * as scales from './scales';\nimport * as colorSchemes from './color-schemes';\n\nexport {\n    ReservedFields,\n    CommonProps\n} from './enums';\n\nexport {\n    scales,\n    colorSchemes\n};\n\nexport {\n    transformColors,\n    detectColor,\n    hslToRgb,\n    rgbToHsv,\n    hexToHsv,\n    hsvToRgb,\n    escapeHTML,\n    angleToRadian,\n    generateGetterSetters,\n    getArraySum,\n    ERROR_MSG,\n    interpolator,\n    colorInterpolator,\n    numberInterpolator,\n    piecewiseInterpolator,\n    reqAnimFrame,\n    cancelAnimFrame,\n    getMax,\n    getMin,\n    getDomainFromData,\n    getUniqueId,\n    mergeRecursive,\n    unionDomain,\n    replaceCSSPrefix,\n    symbolFns,\n    defaultValue,\n    easeFns,\n    clone,\n    interpolateArray,\n    getMinPoint,\n    getMaxPoint,\n    getClosestIndexOf,\n    registerListeners,\n    Voronoi,\n    checkExistence,\n    sanitizeIP,\n    getMinDiff,\n    capitalizeFirst,\n    getWindow,\n    getQualifiedClassName,\n    Store,\n    getDependencyOrder,\n    objectIterator,\n    intSanitizer,\n    transactor,\n    enableChainedTransaction,\n    isHTMLElem,\n    isEqual,\n    isSimpleObject,\n    nextFrame,\n    filterPropagationModel,\n    getObjProp,\n    getDataModelFromIdentifiers,\n    getDataModelFromRange,\n    transposeArray,\n    toArray,\n    extendsClass,\n    concatModels,\n    assembleModelFromIdentifiers,\n    isValidValue,\n    nestCollection,\n    stack,\n    getSymbol,\n    Scales,\n    Symbols,\n    pathInterpolators,\n    hslInterpolator,\n    getSmallestDiff,\n    require\n} from './common-utils';\n\nexport {\n    selectElement,\n    makeElement,\n    applyStyle,\n    addClass,\n    removeClass,\n    appendElement,\n    setAttrs,\n    setStyles,\n    createElement,\n    createElements,\n    clipElement,\n    getElementsByClassName,\n    getMousePos,\n    drawTracker,\n    getEvent,\n    getD3Drag,\n    getSmartComputedStyle,\n    getClientPoint,\n    hasTouch\n} from './renderer-utils';\n\nexport { dataSelect, DataObject } from './DataSystem';\n\nexport { default as LifeCycleManager } from './lifecycle-manager';\n\nexport { DimensionSubtype, FieldType, MeasureSubtype, DateTimeFormatter, default as DataModel } from 'datamodel';\n","const events = [\n    'initialized',\n    'beforeupdate',\n    'updated',\n    'beforedraw',\n    'drawn',\n    'beforeremove',\n    'removed'\n];\n\nconst compositions = [\n    'canvas',\n    'unit',\n    'layer',\n    'axis',\n    'facet-headers',\n    'legend',\n    'caption'\n];\n\nconst EVENT_LIST = [];\n\ncompositions.forEach((composition) => {\n    events.forEach((event) => {\n        EVENT_LIST.push(`${composition}.${event}`);\n    });\n});\n\nexport default EVENT_LIST;\n","import LifeCycleManager from './lifecycle-manager';\n\nexport default LifeCycleManager;\n","import EVENT_LIST from './event-list';\n\n/**\n * At first call it accepts one function\n * calling it second time accepts notification object.\n * notification object then called with first accepted function\n *\n * @param {Function} resolveFn a promise's resolve function\n * @return {Function} a function to accept notification object\n */\nconst resolver = resolveFn => notification => resolveFn(notification);\n\n/**\n * Checks if the property string is present in the source object\n *\n * @param {Object} source source object whom you want to check the property\n * @param {string} property key name that need to be checked\n * @return {boolean} returns true if the property found in the source object\n */\nconst hasOwn = (source, property) => Object.prototype.hasOwnProperty.call(source, property);\n\n/**\n * LifeCycleManager which goes as a dependendecy to a muze\n * it accepts notification from the entire library throughout\n * the exeecution life\n *\n * @export\n * @class LifeCycleManager\n */\nexport default class LifeCycleManager {\n\n    /**\n     * Creates an instance of LifeCycleManager.\n     * @memberof LifeCycleManager\n     */\n    constructor () {\n        this._eventList = EVENT_LIST;\n        this._promises = new Map();\n        this._notifiers = {};\n        this._lifeCycles = {};\n        this._unreleasedLifeCycles = {};\n        this._boot();\n    }\n\n    /**\n     * Fills all the notifiers with resolver callback\n     *\n     * @memberof LifeCycleManager\n     */\n    _boot () {\n        this._notifiers = this._eventList.reduce((acc, name) => {\n            acc[name] = resolver;\n            return acc;\n        }, {});\n        this._preparePromises();\n    }\n\n    /**\n     * Public method which gives the promise corresponding\n     * to the event name\n     *\n     * @param {string} eventName name of the event like `canvas.drawn`\n     * @return {promise} promise that is passed to the user\n     * @memberof LifeCycleManager\n     */\n    retrieve (eventName) {\n        return this._promises.get(eventName);\n    }\n\n    /**\n     * Creates a promise that will be passed to user's callback\n     *\n     * @param {string} eventName name of the event like `canvas.drawn`\n     * @return {promise} a pending promise waiting for resolve to be called\n     * @memberof LifeCycleManager\n     */\n    _makeNotifierPromise (eventName) {\n        return new Promise((resolve) => {\n            this._notifiers[eventName] = this._notifiers[eventName](resolve);\n        });\n    }\n\n    /**\n     * Prepares the promise map with pending promises\n     * all the promises are in a pending state where their's\n     * resolve function waiting to be called with notification object\n     * @memberof LifeCycleManager\n     */\n    _preparePromises () {\n        this._eventList.forEach((eventName) => {\n            this._promises.set(eventName, this._makeNotifierPromise(eventName));\n        });\n    }\n\n    /**\n     * Resolves the promise with notification object\n     *\n     * @param {string} eventName name of the event in the system\n     * @param {Object} notification notification object\n     * @param {string} notification.formalName name of the sender creating the notification\n     * @param {Object} notification.client instance or array of instances sending the notification\n     * @param {string} notification.action the stage name when the event happened like `beforedraw`\n     *\n     * @memberof LifeCycleManager\n     */\n    _resolvePromise (eventName, notification) {\n        this._notifiers[eventName](notification);\n    }\n\n    /**\n     * Public method which is being called by different\n     * subcompoents of the system at different execution atages\n     * @param {Object} notification notification object\n     * @param {string} notification.formalName name of the sender creating the notification\n     * @param {Object} notification.client instance or array of instances sending the notification\n     * @param {string} notification.action the stage name when the event happened like `beforedraw`\n     * @memberof LifeCycleManager\n     */\n    notify (notification) {\n        // get the composition name from notification\n        // or from static formalName() method\n        const composition = notification.formalName || notification.client.constructor.formalName();\n        notification.formalName = composition;\n        this._releasePromisesFromCache();\n        this._notify(composition, notification);\n    }\n\n    /**\n     * Notify user the with promsie in a callback\n     * if callback not found then cache it\n     *\n     * @param {string} composition\n     * @param {Object} notification notification object\n     * @param {string} notification.formalName name of the sender creating the notification\n     * @param {Object} notification.client instance or array of instances sending the notification\n     * @param {string} notification.action the stage name when the event happened like `beforedraw`\n     * @memberof LifeCycleManager\n     */\n    _notify (composition, notification) {\n        const stage = notification.action;\n        const eventName = `${composition}.${stage}`;\n\n        // resolves promise with the notification object\n        this._resolvePromise(eventName, notification);\n\n        // get the promise from the promise map\n        const promise = this.retrieve(eventName);\n\n        if (this._lifeCycles[composition]) {\n            if (this._lifeCycles[composition][stage]) {\n                // if user given call back exists, then call with promise\n                this._callLifeCycleCallback(composition, stage, promise);\n            } else {\n                // otherwise cache the promise\n                this._cachePromise(composition, stage, promise);\n            }\n        } else {\n            this._cachePromise(composition, stage, promise);\n        }\n    }\n\n    /**\n     * Calls the user's callback with callback\n     *\n     * @param {string} composition name of the compositon like `canvas`\n     * @param {string} stage the stage name when the event happened like `beforedraw`\n     * @param {promise} promise promise that is passed to the user\n     * @memberof LifeCycleManager\n     */\n    _callLifeCycleCallback (composition, stage, promise) {\n        const eventName = `${composition}.${stage}`;\n        this._lifeCycles[composition][stage](promise);\n        this._resetTargetPromise(eventName);\n    }\n\n    /**\n     * Try to clear the cached promsies once we have\n     * macthed callbacks from the user\n     *\n     * @memberof LifeCycleManager\n     */\n    _releasePromisesFromCache () {\n        const compositions = Object.keys(this._unreleasedLifeCycles);\n        compositions.forEach((composition) => {\n            const stages = Object.keys(this._unreleasedLifeCycles[composition]);\n            stages.forEach((stage) => {\n                if (this._lifeCycles[composition]) {\n                    if (this._lifeCycles[composition][stage]) {\n                        // take the promise from unreleased lifeCycles\n                        const promise = this._unreleasedLifeCycles[composition][stage];\n                        // call the user given callback with that promise\n                        this._callLifeCycleCallback(composition, stage, promise);\n                        // delete promise from unreleased lifeCycles\n                        delete this._unreleasedLifeCycles[composition][stage];\n                    }\n                }\n            });\n        });\n    }\n\n    /**\n     * Cache the promise in the map. This cache\n     * then get consumed if we get user callbacks\n     * @param {string} composition name of the compositon like `canvas`\n     * @param {string} stage the stage name when the event happened like `beforedraw`\n     * @param {promise} promise promise that is passed to the user\n     * @memberof LifeCycleManager\n     */\n    _cachePromise (composition, stage, promise) {\n        if (!hasOwn(this._unreleasedLifeCycles, composition)) {\n            this._unreleasedLifeCycles[composition] = {};\n        }\n\n        if (!hasOwn(this._unreleasedLifeCycles[composition], stage)) {\n            this._unreleasedLifeCycles[composition][stage] = {};\n        }\n        this._unreleasedLifeCycles[composition][stage] = promise;\n    }\n\n    /**\n     * It register's the callbacks gievn the user\n     *\n     * @param {Object} [lifeCycles={}] a object with list of callbacks\n     * @memberof LifeCycleManager\n     */\n    register (lifeCycles = {}) {\n        this._lifeCycles = lifeCycles;\n        // as we get all the callbacks, try to call them\n        // from unreleased promise map\n        this._releasePromisesFromCache();\n    }\n\n    /**\n     * Reset the promise into pending state\n     *\n     * @param {string} eventName name of the event happening\n     * @memberof LifeCycleManager\n     */\n    _resetTargetPromise (eventName) {\n        setTimeout(() => {\n            this._notifiers[eventName] = resolver;\n            this._promises.set(eventName, this._makeNotifierPromise(eventName));\n        }, 0);\n    }\n}\n","import { select, event as d3event, selection, clientPoint } from 'd3-selection';\nimport { drag as d3drag } from 'd3-drag';\nimport 'd3-transition';\nimport { mergeRecursive } from './common-utils';\n/**\n * This function takes a raw DOM element or\n * a string and returns a d3 selection of that element.\n *\n * @param {HTMLElement | string} element The element to wrap in d3 selection.\n * @return {Selection} Instance of d3 selection.\n */\nconst selectElement = element => select(element);\n\n/**\n * It creates a new d3 element on the parent element\n * @param  {Selection} parent Element to which the element is to be appended\n * @param  {Object} elemType Type of the new element\n * @param  {Array} data Data for the new element\n * @param  {Object} selector classname/id/tagname for the element\n * @return {HTMLElement} Newly Created Element\n */\nconst makeElement = (parent, elemType, data, selector, callbacks = {}, keyFn) => {\n    if ((parent instanceof HTMLElement || parent instanceof SVGElement)) {\n        parent = selectElement(parent);\n    }\n\n    const selectorVal = selector ? selector[0] : null;\n    let selectorType = null;\n    let actualSelector = null;\n    let element = null;\n    let enterSel = null;\n    let mergeSel = null;\n    let filter;\n    if (selectorVal) {\n        if (selectorVal === '#') {\n            selectorType = 'id';\n            actualSelector = selector;\n        } else {\n            selectorType = 'class';\n            actualSelector = selector[0] === '.' ? selector : `.${selector}`;\n        }\n    } else {\n        actualSelector = elemType;\n        filter = true;\n    }\n    element = parent.selectAll(actualSelector);\n\n    filter && (element = element.filter(function () {\n        return this.parentNode === parent.node();\n    }));\n    element = element.data(data, keyFn);\n\n    enterSel = element.enter()\n                            .append(elemType || 'div');\n    callbacks.enter && enterSel.each(function (...params) {\n        callbacks.enter(selectElement(this), ...params);\n    });\n\n    mergeSel = enterSel.merge(element);\n    callbacks.update && mergeSel.each(function (...params) {\n        callbacks.update(selectElement(this), ...params);\n    });\n    if (selectorType === 'class') {\n        mergeSel.classed(selectorVal === '.' ? selector.substring(1, selector.length) : selector, true);\n    } else if (selectorType === 'id') {\n        mergeSel.attr('id', selector.substring(1, selector.length));\n    }\n    const exitSel = element.exit();\n\n    if (callbacks.exit) {\n        exitSel.each(function (...params) {\n            callbacks.exit(selectElement(this), ...params);\n        });\n    } else {\n        exitSel.remove();\n    }\n    return mergeSel;\n};\n\n/**\n * This function applies styles to an element\n *  @param  {Object} elem Element Selection\n * @param  {Object} styleObj Style Object to be applied\n * @return {Element} Newly Created Element\n*/\nconst applyStyle = (elem, styleObj) => {\n    Object.entries(styleObj).forEach((d) => {\n        elem.style(d[0], d[1]);\n    }, this);\n    return elem;\n};\n\n/**\n * This function appends a dom element in another element.\n * @param {HTMLElement | SVGElement} element1 The element in which to append the second element\n * @param {HTMLElement | SVGElement} element2 The element which will be appended.\n */\nconst appendElement = (element1, element2) => {\n    element1.appendChild(element2);\n};\n\n/**\n * Sets the attributes to the element.\n * @param {HTMLElement | SVGElement} element Element on which attributes will be applied\n * @param {Object} attrs Attributes which need to be applied\n */\nconst setElementAttrs = (element, attrs) => {\n    for (const key in attrs) {\n        if ({}.hasOwnProperty.call(attrs, key)) {\n            element.attr(key, attrs[key]);\n        }\n    }\n};\n\n/**\n * Sets attributes in the svg or html element\n * @param {SVGElement | HTMLElement} element The element on which attrs will be applied\n * @param {Array.<Object>} attrs Array of attributes\n * @param {string} className className of elements to select.\n * @return {SVGElement | HTMLElement} SVGElement or html element.\n */\nconst setAttrs = (element, attrs, className) => {\n    if (!(element instanceof selection)) {\n        element = selectElement(element);\n    }\n    className !== undefined ? element.selectAll(`.${className}`).each(function () {\n        setElementAttrs(select(this), attrs);\n    }) : setElementAttrs(element, attrs);\n    return element;\n};\n\n/**\n * Adds a css class to elements which passes the filter function.If filter function is not given,\n * then all elements will be applied the class.\n * @param {HTMLElement | SVGElement} element element\n * @param {string} className css class\n * @param {string} selector css selector\n * @param {Function} filterFn filter method.\n */\nconst addClass = (element, className, selector, filterFn) => {\n    select(element).selectAll(selector).each(function (data) {\n        const elem = select(this);\n        filterFn ? filterFn(data) && elem.classed(className, true) :\n                elem.classed(className, true);\n    });\n};\n\n/**\n * Removes the css class from elements which passes the filter function.If filter function is not given,\n * then all elements will be applied the class.\n * @param {HTMLElement | SVGElement} element element\n * @param {string} className css class\n * @param {string} selector css selector\n * @param {Function} filterFn filter method.\n */\nconst removeClass = (element, className, selector, filterFn) => {\n    select(element).selectAll(selector).each(function (data) {\n        const elem = select(this);\n        filterFn ? filterFn(data) && elem.classed(className, false) :\n                elem.classed(className, false);\n    });\n};\n\n/**\n * Sets styles in the svg or html element\n * @param {SVGElement | HTMLElement} element The element on which styles will be applied\n * @param {Array.<Object>} styles Array of style attributes\n * @return {SVGElement | HTMLElement} SVGElement or html element.\n */\nconst setStyles = (element, styles) => {\n    if (!(element instanceof selection)) {\n        element = selectElement(element);\n    }\n    for (const key in styles) {\n        if ({}.hasOwnProperty.call(styles, key)) {\n            element.style(key, styles[key]);\n        }\n    }\n    return element;\n};\n\n/**\n * Creates svg or html elements by binding data to the selection.Removes extra elements\n * on exit.\n * @param {Object} params Parameter object\n * @param {SVGElement | HTMLElement} params.container Container element where all elements will be appended\n * @param {string} params.selector Selector by which elements will be selected from dom\n * @param {string} params.append Append tag\n * @param {Function} params.each Function which will be executed for each data point and element.\n */\nconst createElements = (params) => {\n    const container = select(params.container);\n    let data;\n    let sel;\n\n    data = params.data;\n    if (typeof data === 'number') {\n        data = Array(data).fill().map((d, i) => i);\n    }\n    sel = container.selectAll(params.selector).data(data);\n\n    sel = container.selectAll(params.selector).filter(function () {\n        return this.parentNode === container.node();\n    }).data(params.data);\n\n    const selectionMerge = sel.enter().append(params.append).merge(sel).each(function (d, i) {\n        params.each(d, select(this), i);\n    });\n\n    selectionMerge.attr('class', params.className || '');\n    sel.exit().remove();\n};\n\n/**\n * Clips an element with given measurement. Basically it is used to hide overflowing portions\n * of any element.\n * @param {SVGElement} container svg element which needs to be clipped.\n * @param {Object} measurement Dimensions of the clipped rectangle.\n * @param {string} id Unique id of the clip element\n */\nconst clipElement = (container, measurement, id) => {\n    const clipPathElement = makeElement(select(container), 'clipPath', [1], `#${id}`);\n    const clipPathRect = makeElement(clipPathElement, 'rect', [1]);\n    clipPathRect.attr('x', measurement.x)\n                    .attr('y', measurement.x)\n                    .attr('width', measurement.width)\n                    .attr('height', measurement.height);\n    clipPathElement.attr('clip-path', `url(#${id})`);\n};\n\n/**\n * Returns the element of the corresponding classname.\n * @param {HTMLElement | SVGElement} node html or svg node element.\n * @param {string} className css class to be applied.\n * @return {HTMLElement | SVGElement} html or svg element.\n */\nconst getElementsByClassName = (node, className) => select(node).selectAll(className).nodes();\n\n/**\n * Gets the mouse position relative to an svg type of element\n * @param {SVGElement} element Any svg element like rect, circle, etc.\n * @param {Event} event Event object.\n * @return {Object} x and y position relative to the container element passed.\n */\nconst getMousePos = (element, event) => {\n    const boundingClientRect = element.getBoundingClientRect();\n    return {\n        x: event.x - boundingClientRect.x,\n        y: event.y - boundingClientRect.y\n    };\n};\n\nconst getClientPoint = (...params) => {\n    const pos = clientPoint(...params);\n    return {\n        x: pos[0],\n        y: pos[1]\n    };\n};\n\n/** This function appends a dom element in another element.\n * @param {Object} tag The tag name of the element to append\n * @param {Object} mount Mount point fo the element\n * @return {Object} selection of the appended element\n */\nconst createElement = (tag, mount) => select(mount).append(tag).node();\n\n/**\n * Gets the d3 event function\n * @return {Object} d3 event\n */\nconst getEvent = () => d3event;\n\n/**\n * Gets the d3 drag function\n * @return {Object} d3 drag\n */\nconst getD3Drag = () => d3drag;\n\nconst getSmartComputedStyle = (group, css) => {\n    let textEl;\n    const testText = 'W';\n    const mandatoryStyle = {\n        'fill-opacity': 0\n    };\n    const className = typeof css === 'string' ? css : (css instanceof Array ? css.join(' ') : undefined);\n\n    if (group.node() instanceof HTMLElement) {\n        textEl = group.append('div').html(testText);\n    } else {\n        textEl = group.append('text').text(testText);\n    }\n\n    if (className) {\n        textEl.attr('class', className);\n    } else if (typeof css === 'object') {\n        delete css['fill-opacity'];\n        mergeRecursive(mandatoryStyle, css);\n    }\n\n    textEl.style(mandatoryStyle);\n\n    const computedStyle = window.getComputedStyle(textEl.node());\n    const styleForSmartLabel = {\n        fontSize: computedStyle.fontSize,\n        fontFamily: computedStyle.fontFamily,\n        fontWeight: computedStyle.fontWeight,\n        fontStyle: computedStyle.fontStyle\n    };\n\n    textEl.remove();\n\n    return styleForSmartLabel;\n};\n\nconst hasTouch = () => 'ontouchstart' in document.documentElement;\n\nexport {\n    hasTouch,\n    selectElement,\n    makeElement,\n    applyStyle,\n    addClass,\n    removeClass,\n    appendElement,\n    setAttrs,\n    setStyles,\n    createElement,\n    createElements,\n    clipElement,\n    getElementsByClassName,\n    getMousePos,\n    getEvent,\n    getD3Drag,\n    getSmartComputedStyle,\n    getClientPoint\n};\n","/**\n * This file exports functions to create or modify the scale of a plot.\n */\nexport {\n    scaleLinear,\n    scaleThreshold,\n    scaleLog,\n    scalePow,\n    scaleIdentity,\n    scaleOrdinal,\n    scaleSequential,\n    scaleQuantize,\n    scaleQuantile,\n    schemeCategory10,\n    schemeCategory20,\n    schemeCategory20b,\n    scaleBand,\n    scaleTime\n} from 'd3-scale';\n","'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n    value: true\n});\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _lib = require('./lib');\n\nvar _lib2 = _interopRequireDefault(_lib);\n\nvar _containerManager = require('./container-manager');\n\nvar _containerManager2 = _interopRequireDefault(_containerManager);\n\nvar slLib = _lib2['default'].init(typeof window !== \"undefined\" ? window : undefined),\n    doc = slLib.win.document,\n    M = slLib.win.Math,\n    max = M.max,\n    round = M.round,\n    BLANK = '',\n    htmlSplCharSpace = { ' ': '&nbsp;' },\n    documentSupport = slLib.getDocumentSupport(),\n    SVG_BBOX_CORRECTION = documentSupport.isWebKit ? 0 : 4.5;\n\n/*\n * Create new instance of SmartLabelManager.\n *\n * SmartLabelManager controls the lifetime of the execution space where the text's metrics will be calculated.\n * This takes a string for a given style and returns the height, width.\n * If a bound box is defined it wraps the text and returns the wrapped height and width.\n * It allows to append ellipsis at the end if the text is truncated.\n *\n * @param {String | Number} id - Id of the instance. If the same id is passed, it disposes the old instance and\n *                              save the new one;\n * @param {String | HTMLElement} container - The id or the instance of the container where the intermediate dom\n *                              elements are to be attached. If not passed, it appends in div\n *\n * @param {Boolean} useEllipses - This decides if a ellipses to be appended if the text is truncated.\n * @param {Object} options - Control options\n *                          {\n *                              maxCacheLimit: No of letter to be cached. Default: 500.\n *                          }\n * @constructor\n */\nfunction SmartLabelManager(id, container, useEllipses, options) {\n    var wrapper,\n        prop,\n        max,\n        prevInstance,\n        isBrowserLess = false,\n        store = SmartLabelManager.store;\n\n    if (typeof id === 'undefined' || typeof id === 'object') {\n        return;\n    }\n\n    if (prevInstance = store[id]) {\n        prevInstance.dispose();\n    }\n\n    store[id] = this;\n    options = options || {};\n    options.maxCacheLimit = isFinite(max = options.maxCacheLimit) ? max : slLib.maxDefaultCacheLimit;\n\n    if (typeof container === 'string') {\n        container = doc.getElementById(container);\n    }\n\n    wrapper = slLib.createContainer(container);\n    wrapper.innerHTML = slLib.testStrAvg;\n\n    if (documentSupport.isHeadLess || !documentSupport.isIE && !wrapper.offsetHeight && !wrapper.offsetWidth) {\n        isBrowserLess = true;\n    }\n\n    wrapper.innerHTML = '';\n    for (prop in slLib.parentContainerStyle) {\n        wrapper.style[prop] = slLib.parentContainerStyle[prop];\n    }\n\n    this.id = id;\n    this.parentContainer = wrapper;\n\n    this._containerManager = new _containerManager2['default'](wrapper, isBrowserLess, 10);\n    this._showNoEllipses = !useEllipses;\n    this._init = true;\n    this.style = {};\n    this.options = options;\n\n    this.setStyle();\n}\n\n/*\n * getSmartText returns the text separated by <br/> whenever a break is necessary. This is to recgonize one\n * generalized format independent of the implementation (canvas based solution, svg based solution). This method\n * converts the output of getSmartText().text to array of lines if the text is wrapped. It sets a named property\n * `lines` on the object passed as parameter.\n *\n * @param {Object} smartlabel - the object returned by getSmartText based on which line arr which to be formed.\n *\n * @return {Object} - The same object which was passed in the arguments. Also a named property `lines` is set.\n */\nSmartLabelManager.textToLines = function (smartlabel) {\n    smartlabel = smartlabel || {};\n\n    if (!smartlabel.text) {\n        smartlabel.text = '';\n    } else if (typeof smartlabel.text !== 'string') {\n        smartlabel.text = smartlabel.text.toString();\n    }\n\n    smartlabel.lines = smartlabel.text.split(/\\n|<br\\s*?\\/?>/ig);\n    return smartlabel;\n};\n\n// Saves all the instance created so far\nSmartLabelManager.store = {};\n\n// Calculates space taken by a character with an approximation value which is calculated by repeating the\n// character by string length times.\nSmartLabelManager.prototype._calCharDimWithCache = function (text, calculateDifference, length) {\n    if (!this._init) {\n        return false;\n    }\n\n    var size,\n        csArr,\n        tw,\n        twi,\n        cachedStyle,\n        asymmetricDifference,\n        maxAdvancedCacheLimit = this.options.maxCacheLimit,\n        container = this._container,\n        style = this.style || {},\n        cache = this._advancedCache || (this._advancedCache = {}),\n        advancedCacheKey = this._advancedCacheKey || (this._advancedCacheKey = []),\n        cacheName = text + (style.fontSize || BLANK) + (style.fontFamily || BLANK) + (style.fontWeight || BLANK) + (style.fontStyle || BLANK),\n        cacheInitName = text + 'init' + (style.fontSize || BLANK) + (style.fontFamily || BLANK) + (style.fontWeight || BLANK) + (style.fontStyle || BLANK);\n\n    htmlSplCharSpace[text] && (text = htmlSplCharSpace[text]);\n\n    if (!calculateDifference) {\n        asymmetricDifference = 0;\n    } else {\n        if ((asymmetricDifference = cache[cacheInitName]) === undefined) {\n            container.innerHTML = text.repeat ? text.repeat(length) : Array(length + 1).join(text); // jshint ignore:line\n            tw = container.offsetWidth;\n\n            container.innerHTML = text;\n            twi = container.offsetWidth;\n\n            asymmetricDifference = cache[cacheInitName] = (tw - length * twi) / (length + 1);\n            advancedCacheKey.push(cacheInitName);\n            if (advancedCacheKey.length > maxAdvancedCacheLimit) {\n                delete cache[advancedCacheKey.shift()];\n            }\n        }\n    }\n\n    if (cachedStyle = cache[cacheName]) {\n        csArr = cachedStyle.split(',');\n        return {\n            width: parseFloat(csArr[0], 10),\n            height: parseFloat(csArr[1], 10)\n        };\n    }\n\n    container.innerHTML = text;\n\n    size = {\n        height: container.offsetHeight,\n        width: container.offsetWidth + asymmetricDifference\n    };\n\n    cache[cacheName] = size.width + ',' + size.height;\n    advancedCacheKey.push(cacheName);\n    if (advancedCacheKey.length > maxAdvancedCacheLimit) {\n        delete cache[advancedCacheKey.shift()];\n    }\n\n    return size;\n};\n\n// Provide function to calculate the height and width based on the environment and available support from dom.\nSmartLabelManager.prototype._getWidthFn = function () {\n    var contObj = this._containerObj,\n        container = this._container,\n        svgText = contObj.svgText;\n\n    if (svgText) {\n        return function (str) {\n            var bbox, width;\n\n            svgText.textContent = str;\n            bbox = svgText.getBBox();\n            width = bbox.width - SVG_BBOX_CORRECTION;\n            if (width < 1) {\n                width = bbox.width;\n            }\n\n            return width;\n        };\n    } else {\n        return function (str) {\n            container.innerHTML = str;\n            return container.offsetWidth;\n        };\n    }\n};\n\n/*\n * Sets the style based on which the text's metrics to be calculated.\n *\n * @param {Object} style - The style object which affects the text size\n *                      {\n *                          fontSize / 'font-size' : MUST BE FOLLOWED BY PX (10px, 11px)\n *                          fontFamily / 'font-family'\n *                          fontWeight / 'font-weight'\n *                          fontStyle / 'font-style'\n *                      }\n *\n * @return {SmartLabelManager} - Current instance of SmartLabelManager\n */\nSmartLabelManager.prototype.setStyle = function (style) {\n    if (!this._init) {\n        return this;\n    }\n\n    var sCont;\n\n    if (style === this.style && !this._styleNotSet) {\n        return;\n    }\n\n    if (!style) {\n        style = this.style;\n    }\n\n    slLib.setLineHeight(style);\n    this.style = style;\n\n    this._containerObj = sCont = this._containerManager.get(style);\n\n    if (this._containerObj) {\n        this._container = sCont.node;\n        this._context = sCont.context;\n        this._cache = sCont.charCache;\n        this._lineHeight = sCont.lineHeight;\n        this._styleNotSet = false;\n    } else {\n        this._styleNotSet = true;\n    }\n\n    return this;\n};\n\n/*\n * Decides whether ellipses to be shown if the node is truncated\n *\n * @param {Boolean} useEllipses - decides if a ellipses to be appended if the text is truncated. Default: false\n *\n * @return {SmartLabelManager} - Current instance of SmartLabelManager\n */\nSmartLabelManager.prototype.useEllipsesOnOverflow = function (useEllipses) {\n    if (!this._init) {\n        return this;\n    }\n    this._showNoEllipses = !useEllipses;\n    return this;\n};\n\n/*\n * Get wrapped or truncated text if a bound box is defined around it. The result text would be separated by <br/>\n * if wrapped\n *\n * @param {String} text - the subject text\n * @param {Number} maxWidth - width in px of the the bound box\n * @param {Number} maxHeight - height in px of the the bound box\n * @param {Boolean} noWrap - whether the text to be wrapped. Default false.\n *\n * @return {Object} - The metrics of the text bounded by the box\n *                  {\n *                      height : height of the wrapped text\n *                      width : width of the wrapped text\n *                      isTruncated : whether the text is truncated\n *                      maxHeight : Maximum height given\n *                      maxWidth : Maximum width given\n *                      oriText : Original text sent\n *                      oriTextHeight : Original text height\n *                      oriTextWidth : Original text width\n *                      text : SMART TEXT\n *                  }\n */\nSmartLabelManager.prototype.getSmartText = function (text, maxWidth, maxHeight, noWrap) {\n    if (!this._init) {\n        return false;\n    }\n\n    if (text === undefined || text === null) {\n        text = '';\n    } else if (typeof text !== 'string') {\n        text = text.toString();\n    }\n\n    var len,\n        trimStr,\n        tempArr,\n        tmpText,\n        maxWidthWithEll,\n        toolText,\n        oriWidth,\n        oriHeight,\n        newCharIndex,\n        nearestChar,\n        tempChar,\n        getWidth,\n        initialLeft,\n        initialTop,\n        getOriSizeImproveObj,\n        spanArr,\n        x,\n        y,\n        minWidth,\n        elem,\n        chr,\n        elemRightMostPoint,\n        elemLowestPoint,\n        lastBR,\n        removeFromIndex,\n        removeFromIndexForEllipses,\n        hasHTMLTag = false,\n        maxStrWidth = 0,\n        lastDash = -1,\n        lastSpace = -1,\n        lastIndexBroken = -1,\n        strWidth = 0,\n        strHeight = 0,\n        oriTextArr = [],\n        i = 0,\n        ellipsesStr = this._showNoEllipses ? '' : '...',\n        lineHeight = this._lineHeight,\n        context = this._context,\n        container = this._container,\n        sCont = this._containerObj,\n        ellipsesWidth = sCont.ellipsesWidth,\n        dotWidth = sCont.dotWidth,\n        characterArr = [],\n        dashIndex = -1,\n        spaceIndex = -1,\n        lastLineBreak = -1,\n        fastTrim = function fastTrim(str) {\n        str = str.replace(/^\\s\\s*/, '');\n        var ws = /\\s/,\n            i = str.length;\n        while (ws.test(str.charAt(i -= 1))) {/* jshint noempty:false */}\n        return str.slice(0, i + 1);\n    },\n        smartLabel = {\n        text: text,\n        maxWidth: maxWidth,\n        maxHeight: maxHeight,\n        width: null,\n        height: null,\n        oriTextWidth: null,\n        oriTextHeight: null,\n        oriText: text,\n        isTruncated: false\n    };\n\n    getWidth = this._getWidthFn();\n\n    // In some browsers, offsetheight of a single-line text is getting little (1 px) heigher value of the\n    // lineheight. As a result, smartLabel is unable to return single-line text.\n    // To fix this, increase the maxHeight a little amount. Hence maxHeight =  lineHeight * 1.2\n    if (maxHeight === lineHeight) {\n        maxHeight *= 1.2;\n    }\n\n    if (container) {\n        if (!documentSupport.isBrowserLess) {\n            hasHTMLTag = slLib.xmlTagRegEx.test(text);\n            if (!hasHTMLTag) {\n                // Due to support of <,> for xml we convert &lt;, &gt; to <,> respectively so to get the correct\n                // width it is required to convert the same before calculation for the new improve version of the\n                // get text width.\n                tmpText = text.replace(slLib.ltgtRegex, function (match) {\n                    return match === '&lt;' ? '<' : '>';\n                });\n                getOriSizeImproveObj = this.getOriSize(tmpText, true);\n\n                smartLabel.oriTextWidth = oriWidth = getOriSizeImproveObj.width;\n                smartLabel.oriTextHeight = oriHeight = getOriSizeImproveObj.height;\n            } else {\n                container.innerHTML = text;\n                smartLabel.oriTextWidth = oriWidth = container.offsetWidth;\n                smartLabel.oriTextHeight = oriHeight = container.offsetHeight;\n            }\n\n            if (oriHeight <= maxHeight && oriWidth <= maxWidth) {\n                smartLabel.width = smartLabel.oriTextWidth = oriWidth;\n                smartLabel.height = smartLabel.oriTextHeight = oriHeight;\n                return smartLabel;\n            }\n\n            if (lineHeight > maxHeight) {\n                smartLabel.text = '';\n                smartLabel.width = smartLabel.oriTextWidth = 0;\n                smartLabel.height = smartLabel.oriTextHeight = 0;\n                return smartLabel;\n            }\n        }\n\n        // Calculate width with ellipses\n        text = fastTrim(text).replace(/(\\s+)/g, ' ');\n        maxWidthWithEll = this._showNoEllipses ? maxWidth : maxWidth - ellipsesWidth;\n\n        if (!hasHTMLTag) {\n            oriTextArr = text.split('');\n            len = oriTextArr.length;\n            trimStr = '', tempArr = [];\n            tempChar = oriTextArr[0];\n\n            if (this._cache[tempChar]) {\n                minWidth = this._cache[tempChar].width;\n            } else {\n                minWidth = getWidth(tempChar);\n                this._cache[tempChar] = { width: minWidth };\n            }\n\n            if (maxWidthWithEll > minWidth) {\n                tempArr = text.substr(0, slLib.getNearestBreakIndex(text, maxWidthWithEll, this)).split('');\n                i = tempArr.length;\n            } else if (minWidth > maxWidth) {\n                smartLabel.text = '';\n                smartLabel.width = smartLabel.oriTextWidth = smartLabel.height = smartLabel.oriTextHeight = 0;\n                return smartLabel;\n            } else if (ellipsesStr) {\n                maxWidthWithEll = maxWidth - 2 * dotWidth;\n                if (maxWidthWithEll > minWidth) {\n                    ellipsesStr = '..';\n                } else {\n                    maxWidthWithEll = maxWidth - dotWidth;\n                    if (maxWidthWithEll > minWidth) {\n                        ellipsesStr = '.';\n                    } else {\n                        maxWidthWithEll = 0;\n                        ellipsesStr = '';\n                    }\n                }\n            }\n\n            strWidth = getWidth(tempArr.join(''));\n            strHeight = this._lineHeight;\n\n            if (noWrap) {\n                for (; i < len; i += 1) {\n                    tempChar = tempArr[i] = oriTextArr[i];\n                    if (this._cache[tempChar]) {\n                        minWidth = this._cache[tempChar].width;\n                    } else {\n                        if (!getOriSizeImproveObj || !(minWidth = getOriSizeImproveObj.detailObj[tempChar])) {\n                            minWidth = getWidth(tempChar);\n                        }\n                        this._cache[tempChar] = {\n                            width: minWidth\n                        };\n                    }\n                    strWidth += minWidth;\n                    if (strWidth > maxWidthWithEll) {\n                        if (!trimStr) {\n                            trimStr = tempArr.slice(0, -1).join('');\n                        }\n                        if (strWidth > maxWidth) {\n                            smartLabel.text = fastTrim(trimStr) + ellipsesStr;\n                            smartLabel.tooltext = smartLabel.oriText;\n                            smartLabel.width = getWidth(smartLabel.text);\n                            smartLabel.height = this._lineHeight;\n                            return smartLabel;\n                        }\n                    }\n                }\n\n                smartLabel.text = tempArr.join('');\n                smartLabel.width = strWidth;\n                smartLabel.height = this._lineHeight;\n                return smartLabel;\n            } else {\n                for (; i < len; i += 1) {\n                    tempChar = tempArr[i] = oriTextArr[i];\n                    if (tempChar === ' ' && !context) {\n                        tempChar = '&nbsp;';\n                    }\n\n                    if (this._cache[tempChar]) {\n                        minWidth = this._cache[tempChar].width;\n                    } else {\n                        if (!getOriSizeImproveObj || !(minWidth = getOriSizeImproveObj.detailObj[tempChar])) {\n                            minWidth = getWidth(tempChar);\n                        }\n                        this._cache[tempChar] = {\n                            width: minWidth\n                        };\n                    }\n                    strWidth += minWidth;\n\n                    if (strWidth > maxWidthWithEll) {\n                        if (!trimStr) {\n                            trimStr = tempArr.slice(0, -1).join('');\n                        }\n                        if (strWidth > maxWidth) {\n                            /** @todo use regular expressions for better performance. */\n                            lastSpace = text.substr(0, tempArr.length).lastIndexOf(' ');\n                            lastDash = text.substr(0, tempArr.length).lastIndexOf('-');\n                            if (lastSpace > lastIndexBroken) {\n                                strWidth = getWidth(tempArr.slice(lastIndexBroken + 1, lastSpace).join(''));\n                                tempArr.splice(lastSpace, 1, '<br/>');\n                                lastIndexBroken = lastSpace;\n                                newCharIndex = lastSpace + 1;\n                            } else if (lastDash > lastIndexBroken) {\n                                if (lastDash === tempArr.length - 1) {\n                                    strWidth = getWidth(tempArr.slice(lastIndexBroken + 1, lastSpace).join(''));\n                                    tempArr.splice(lastDash, 1, '<br/>-');\n                                } else {\n                                    strWidth = getWidth(tempArr.slice(lastIndexBroken + 1, lastSpace).join(''));\n                                    tempArr.splice(lastDash, 1, '-<br/>');\n                                }\n                                lastIndexBroken = lastDash;\n                                newCharIndex = lastDash + 1;\n                            } else {\n                                tempArr.splice(tempArr.length - 1, 1, '<br/>' + oriTextArr[i]);\n                                lastLineBreak = tempArr.length - 2;\n                                strWidth = getWidth(tempArr.slice(lastIndexBroken + 1, lastLineBreak + 1).join(''));\n                                lastIndexBroken = lastLineBreak;\n                                newCharIndex = i;\n                            }\n                            strHeight += this._lineHeight;\n                            if (strHeight > maxHeight) {\n                                smartLabel.text = fastTrim(trimStr) + ellipsesStr;\n                                smartLabel.tooltext = smartLabel.oriText;\n                                // The max width among all the lines will be the width of the string.\n                                smartLabel.width = maxWidth;\n                                smartLabel.height = strHeight - this._lineHeight;\n                                return smartLabel;\n                            } else {\n                                maxStrWidth = max(maxStrWidth, strWidth);\n                                trimStr = null;\n                                nearestChar = slLib.getNearestBreakIndex(text.substr(newCharIndex), maxWidthWithEll, this);\n                                strWidth = getWidth(text.substr(newCharIndex, nearestChar || 1));\n                                if (tempArr.length < newCharIndex + nearestChar) {\n                                    tempArr = tempArr.concat(text.substr(tempArr.length, newCharIndex + nearestChar - tempArr.length).split(''));\n                                    i = tempArr.length - 1;\n                                }\n                            }\n                        }\n                    }\n                }\n\n                maxStrWidth = max(maxStrWidth, strWidth);\n\n                smartLabel.text = tempArr.join('');\n                smartLabel.width = maxStrWidth;\n                smartLabel.height = strHeight;\n                return smartLabel;\n            }\n        } else {\n            toolText = text.replace(slLib.spanAdditionRegx, '$2');\n            text = text.replace(slLib.spanAdditionRegx, slLib.spanAdditionReplacer);\n            text = text.replace(/(<br\\s*\\/*\\>)/g, '<span class=\"' + [slLib.classNameWithTag, ' ', slLib.classNameWithTagBR].join('') + '\">$1</span>');\n\n            container.innerHTML = text;\n\n            spanArr = container[documentSupport.childRetriverFn](documentSupport.childRetriverString);\n\n            for (x = 0, y = spanArr.length; x < y; x += 1) {\n                elem = spanArr[x];\n                //chech whether this span is temporary inserted span from it's class\n                if (documentSupport.noClassTesting || slLib.classNameReg.test(elem.className)) {\n                    chr = elem.innerHTML;\n                    if (chr !== '') {\n                        if (chr === ' ') {\n                            spaceIndex = characterArr.length;\n                        } else if (chr === '-') {\n                            dashIndex = characterArr.length;\n                        }\n\n                        characterArr.push({\n                            spaceIdx: spaceIndex,\n                            dashIdx: dashIndex,\n                            elem: elem\n                        });\n                        oriTextArr.push(chr);\n                    }\n                }\n            }\n\n            i = 0;\n            len = characterArr.length;\n            minWidth = characterArr[0].elem.offsetWidth;\n\n            if (minWidth > maxWidth) {\n                smartLabel.text = '';\n                smartLabel.width = smartLabel.oriTextWidth = smartLabel.height = smartLabel.oriTextHeight = 0;\n\n                return smartLabel;\n            } else if (minWidth > maxWidthWithEll && !this._showNoEllipses) {\n\n                maxWidthWithEll = maxWidth - 2 * dotWidth;\n                if (maxWidthWithEll > minWidth) {\n                    ellipsesStr = '..';\n                } else {\n                    maxWidthWithEll = maxWidth - dotWidth;\n                    if (maxWidthWithEll > minWidth) {\n                        ellipsesStr = '.';\n                    } else {\n                        maxWidthWithEll = 0;\n                        ellipsesStr = '';\n                    }\n                }\n            }\n\n            initialLeft = characterArr[0].elem.offsetLeft;\n            initialTop = characterArr[0].elem.offsetTop;\n\n            if (noWrap) {\n                for (; i < len; i += 1) {\n                    elem = characterArr[i].elem;\n                    elemRightMostPoint = elem.offsetLeft - initialLeft + elem.offsetWidth;\n\n                    if (elemRightMostPoint > maxWidthWithEll) {\n                        if (!removeFromIndexForEllipses) {\n                            removeFromIndexForEllipses = i;\n                        }\n                        if (container.offsetWidth > maxWidth) {\n                            removeFromIndex = i;\n                            i = len;\n                        }\n                    }\n                }\n            } else {\n                for (; i < len; i += 1) {\n                    elem = characterArr[i].elem;\n                    elemLowestPoint = elem.offsetHeight + (elem.offsetTop - initialTop);\n                    elemRightMostPoint = elem.offsetLeft - initialLeft + elem.offsetWidth;\n\n                    lastBR = null;\n\n                    if (elemRightMostPoint > maxWidthWithEll) {\n                        if (!removeFromIndexForEllipses) {\n                            removeFromIndexForEllipses = i;\n                        }\n\n                        if (elemRightMostPoint > maxWidth) {\n                            lastSpace = characterArr[i].spaceIdx;\n                            lastDash = characterArr[i].dashIdx;\n                            if (lastSpace > lastIndexBroken) {\n                                characterArr[lastSpace].elem.innerHTML = '<br/>';\n                                lastIndexBroken = lastSpace;\n                            } else if (lastDash > lastIndexBroken) {\n                                if (lastDash === i) {\n                                    // in case the overflowing character itself is the '-'\n                                    characterArr[lastDash].elem.innerHTML = '<br/>-';\n                                } else {\n                                    characterArr[lastDash].elem.innerHTML = '-<br/>';\n                                }\n                                lastIndexBroken = lastDash;\n                            } else {\n                                elem.parentNode.insertBefore(lastBR = doc.createElement('br'), elem);\n                            }\n\n                            //check whether this break made current element outside the area height\n                            if (elem.offsetHeight + elem.offsetTop > maxHeight) {\n                                //remove the lastly inserted line break\n                                if (lastBR) {\n                                    lastBR.parentNode.removeChild(lastBR);\n                                } else if (lastIndexBroken === lastDash) {\n                                    characterArr[lastDash].elem.innerHTML = '-';\n                                } else {\n                                    characterArr[lastSpace].elem.innerHTML = ' ';\n                                }\n                                removeFromIndex = i;\n                                //break the looping condition\n                                i = len;\n                            } else {\n                                removeFromIndexForEllipses = null;\n                            }\n                        }\n                    } else {\n                        //check whether this break made current element outside the area height\n                        if (elemLowestPoint > maxHeight) {\n                            removeFromIndex = i;\n                            i = len;\n                        }\n                    }\n                }\n            }\n\n            if (removeFromIndex < len) {\n                //set the trancated property of the smartlabel\n                smartLabel.isTruncated = true;\n\n                /** @todo is this really needed? */\n                removeFromIndexForEllipses = removeFromIndexForEllipses ? removeFromIndexForEllipses : removeFromIndex;\n\n                for (i = len - 1; i >= removeFromIndexForEllipses; i -= 1) {\n                    elem = characterArr[i].elem;\n                    //chech whether this span is temporary inserted span from it's class\n                    elem.parentNode.removeChild(elem);\n                }\n\n                for (; i >= 0; i -= 1) {\n                    elem = characterArr[i].elem;\n                    if (slLib.classNameBrReg.test(elem.className)) {\n                        //chech whether this span is temporary inserted span from it's class\n                        elem.parentNode.removeChild(elem);\n                    } else {\n                        i = 0;\n                    }\n                }\n            }\n\n            //get the smart text\n            smartLabel.text = container.innerHTML.replace(slLib.spanRemovalRegx, '$1').replace(/\\&amp\\;/g, '&');\n            if (smartLabel.isTruncated) {\n                smartLabel.text += ellipsesStr;\n                smartLabel.tooltext = toolText;\n            }\n        }\n\n        smartLabel.height = container.offsetHeight;\n        smartLabel.width = container.offsetWidth;\n\n        return smartLabel;\n    } else {\n        smartLabel.error = new Error('Body Tag Missing!');\n        return smartLabel;\n    }\n};\n\n/*\n * Get the height and width of a text.\n *\n * @param {String} text - Text whose metrics to be measured\n * @param {Boolean} Optional detailedCalculationFlag - this flag if set it calculates per letter position\n *                          information and returns it. Ideally you dont need it unless you want to post process the\n *                          string. And its an EXPENSIVE OPERATION.\n *\n * @return {Object} - If detailedCalculationFlag is set to true the returned object would be\n *                  {\n *                      height: height of the text\n *                      width: width of the text\n *                      detailObj: detail calculation of letters in the format {lettername: width}\n *                  }\n *                  If detailedCalculationFlag is set to false the returned object wont have the detailObj prop.\n */\nSmartLabelManager.prototype.getOriSize = function (text, detailedCalculationFlag) {\n    if (!this._init) {\n        return false;\n    }\n\n    var textArr,\n        letter,\n        lSize,\n        i,\n        l,\n        cumulativeSize = 0,\n        height = 0,\n        indiSizeStore = {};\n\n    if (!detailedCalculationFlag) {\n        return this._calCharDimWithCache(text);\n    }\n\n    // Calculate the width of every letter with an approximation\n    textArr = text.split('');\n    for (i = 0, l = textArr.length; i < l; i++) {\n        letter = textArr[i];\n        lSize = this._calCharDimWithCache(letter, true, textArr.length);\n        height = max(height, lSize.height);\n        cumulativeSize += lSize.width;\n        indiSizeStore[letter] = lSize.width;\n    }\n\n    return {\n        width: round(cumulativeSize),\n        height: height,\n        detailObj: indiSizeStore\n    };\n};\n\n/*\n * Dispose the container and object allocated by the smartlabel\n */\nSmartLabelManager.prototype.dispose = function () {\n    if (!this._init) {\n        return this;\n    }\n\n    this._containerManager && this._containerManager.dispose && this._containerManager.dispose();\n\n    delete this._container;\n    delete this._context;\n    delete this._cache;\n    delete this._containerManager;\n    delete this._containerObj;\n    delete this.id;\n    delete this.style;\n    delete this.parentContainer;\n    delete this._showNoEllipses;\n\n    return this;\n};\n\nexports['default'] = SmartLabelManager;\nmodule.exports = exports['default'];","'use strict';\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _lib = require('./lib');\n\nvar _lib2 = _interopRequireDefault(_lib);\n\nvar slLib = _lib2['default'].init(typeof window !== \"undefined\" ? window : undefined),\n    doc = slLib.win.document,\n    documentSupport = slLib.getDocumentSupport(),\n    SVG_BBOX_CORRECTION = documentSupport.isWebKit ? 0 : 4.5;\n\nfunction ContainerManager(parentContainer, isBrowserLess, maxContainers) {\n    var svg;\n\n    maxContainers = maxContainers > 5 ? maxContainers : 5;\n    maxContainers = maxContainers < 20 ? maxContainers : 20;\n\n    this.maxContainers = maxContainers;\n    this.first = null;\n    this.last = null;\n    this.containers = {};\n    this.length = 0;\n    this.rootNode = parentContainer;\n\n    if (isBrowserLess) {\n        svg = doc.createElementNS('http://www.w3.org/2000/svg', 'svg');\n        svg.setAttributeNS('http://www.w3.org/2000/svg', 'xlink', 'http://www.w3.org/1999/xlink');\n        svg.setAttributeNS('http://www.w3.org/2000/svg', 'height', '0');\n        svg.setAttributeNS('http://www.w3.org/2000/svg', 'width', '0');\n        this.svgRoot = svg;\n        this.rootNode.appendChild(svg);\n    }\n}\n\nContainerManager.prototype.get = function (style) {\n    var diff,\n        key,\n        containerObj,\n        containers = this.containers,\n        len = this.length,\n        max = this.maxContainers,\n        keyStr = '';\n\n    for (key in slLib.supportedStyle) {\n        if (style[key] !== undefined) {\n            keyStr += slLib.supportedStyle[key] + ':' + style[key] + ';';\n        }\n    }\n\n    if (!keyStr) {\n        return false;\n    }\n\n    if (containerObj = containers[keyStr]) {\n        if (this.first !== containerObj) {\n            containerObj.prev && (containerObj.prev.next = containerObj.next);\n            containerObj.next && (containerObj.next.prev = containerObj.prev);\n            containerObj.next = this.first;\n            containerObj.next.prev = containerObj;\n            this.last === containerObj && (this.last = containerObj.prev);\n            containerObj.prev = null;\n            this.first = containerObj;\n        }\n    } else {\n        if (len >= max) {\n            diff = len - max + 1;\n            // +1 is to remove an extra entry to make space for the new container to be added.\n            while (diff--) {\n                this.removeContainer(this.last);\n            }\n        }\n        containerObj = this.addContainer(keyStr);\n    }\n\n    return containerObj;\n};\n\nContainerManager.prototype.addContainer = function (keyStr) {\n    var node, container;\n\n    this.containers[keyStr] = container = {\n        next: null,\n        prev: null,\n        node: null,\n        ellipsesWidth: 0,\n        lineHeight: 0,\n        dotWidth: 0,\n        avgCharWidth: 4,\n        keyStr: keyStr,\n        charCache: {}\n    };\n\n    // Since the container objects are arranged from most recent to least recent order, we need to add the new\n    // object at the beginning of the list.\n    container.next = this.first;\n    container.next && (container.next.prev = container);\n    this.first = container;\n    if (!this.last) {\n        this.last = container;\n    }\n    this.length += 1;\n\n    node = container.node = doc.createElement('div');\n    this.rootNode.appendChild(node);\n\n    if (documentSupport.isIE && !documentSupport.hasSVG) {\n        node.style.setAttribute('cssText', keyStr);\n    } else {\n        node.setAttribute('style', keyStr);\n    }\n\n    node.setAttribute('aria-hidden', 'true');\n    node.setAttribute('role', 'presentation');\n    node.style.display = 'inline-block';\n\n    node.innerHTML = slLib.testStrAvg; // A test string.\n    container.lineHeight = node.offsetHeight;\n    container.avgCharWidth = node.offsetWidth / 3;\n\n    if (documentSupport.isBrowserLess) {\n        node = container.svgText = doc.createElementNS('http://www.w3.org/2000/svg', 'text');\n        node.setAttribute('style', keyStr);\n        this.svgRoot.appendChild(node);\n\n        node.textContent = slLib.testStrAvg; // A test string.\n        container.lineHeight = node.getBBox().height;\n        container.avgCharWidth = (node.getBBox().width - SVG_BBOX_CORRECTION) / 3;\n\n        node.textContent = '...';\n        container.ellipsesWidth = node.getBBox().width - SVG_BBOX_CORRECTION;\n        node.textContent = '.';\n        container.dotWidth = node.getBBox().width - SVG_BBOX_CORRECTION;\n    } else {\n        node.innerHTML = '...';\n        container.ellipsesWidth = node.offsetWidth;\n        node.innerHTML = '.';\n        container.dotWidth = node.offsetWidth;\n        node.innerHTML = '';\n    }\n\n    return container;\n};\n\nContainerManager.prototype.removeContainer = function (cObj) {\n    var keyStr = cObj.keyStr;\n\n    if (!keyStr || !this.length || !cObj) {\n        return;\n    }\n    this.length -= 1;\n\n    cObj.prev && (cObj.prev.next = cObj.next);\n    cObj.next && (cObj.next.prev = cObj.prev);\n    this.first === cObj && (this.first = cObj.next);\n    this.last === cObj && (this.last = cObj.prev);\n\n    cObj.node.parentNode.removeChild(cObj.node);\n\n    delete this.containers[keyStr];\n};\n\nContainerManager.prototype.dispose = function () {\n    var key,\n        containers = this.containers;\n\n    this.maxContainers = null;\n    for (key in containers) {\n        this.removeContainer(containers[key]);\n    }\n\n    this.rootNode.parentNode.removeChild(this.rootNode);\n\n    this.rootNode = null;\n    this.first = null;\n    this.last = null;\n};\n\nmodule.exports = ContainerManager;","'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n\tvalue: true\n});\nvar lib = {\n\tinit: function init(win) {\n\t\tvar doc = win.document,\n\t\t    nav = win.navigator,\n\t\t    userAgent = nav.userAgent,\n\t\t    DIV = 'DIV',\n\t\t    ceil = Math.ceil,\n\t\t    floor = Math.floor,\n\t\t    containerInstanceCount = 0,\n\t\t    clsNameSpace = 'fusioncharts-smartlabel-',\n\t\t    containerClass = clsNameSpace + 'container',\n\t\t    classNameWithTag = clsNameSpace + 'tag',\n\t\t    classNameWithTagBR = clsNameSpace + 'br';\n\n\t\tlib = {\n\t\t\twin: win,\n\n\t\t\tcontainerClass: containerClass,\n\n\t\t\tclassNameWithTag: classNameWithTag,\n\n\t\t\tclassNameWithTagBR: classNameWithTagBR,\n\n\t\t\tmaxDefaultCacheLimit: 500,\n\n\t\t\tclassNameReg: new RegExp('\\b' + classNameWithTag + '\\b'),\n\n\t\t\tclassNameBrReg: new RegExp('\\b' + classNameWithTagBR + '\\b'),\n\n\t\t\tspanAdditionRegx: /(<[^<\\>]+?\\>)|(&(?:[a-z]+|#[0-9]+);|.)/ig,\n\n\t\t\tspanAdditionReplacer: '$1<span class=\"' + classNameWithTag + '\">$2</span>',\n\n\t\t\tspanRemovalRegx: new RegExp('\\\\<span[^\\\\>]+?' + classNameWithTag + '[^\\\\>]{0,}\\\\>(.*?)\\\\<\\\\/span\\\\>', 'ig'),\n\n\t\t\txmlTagRegEx: new RegExp('<[^>][^<]*[^>]+>', 'i'),\n\n\t\t\tltgtRegex: /&lt;|&gt;/g,\n\n\t\t\tbrReplaceRegex: /<br\\/>/ig,\n\n\t\t\ttestStrAvg: 'WgI',\n\n\t\t\t// This style is applied over the parent smartlabel container. The container is kept hidden from the viewport\n\t\t\tparentContainerStyle: {\n\t\t\t\tposition: 'absolute',\n\t\t\t\ttop: '-9999em',\n\t\t\t\twhiteSpace: 'nowrap',\n\t\t\t\tpadding: '0px',\n\t\t\t\twidth: '1px',\n\t\t\t\theight: '1px',\n\t\t\t\toverflow: 'hidden'\n\t\t\t},\n\n\t\t\t// All the style which might affect the text metrics\n\t\t\tsupportedStyle: {\n\t\t\t\tfont: 'font',\n\t\t\t\tfontFamily: 'font-family',\n\t\t\t\t'font-family': 'font-family',\n\t\t\t\tfontWeight: 'font-weight',\n\t\t\t\t'font-weight': 'font-weight',\n\t\t\t\tfontSize: 'font-size',\n\t\t\t\t'font-size': 'font-size',\n\t\t\t\tlineHeight: 'line-height',\n\t\t\t\t'line-height': 'line-height',\n\t\t\t\tfontStyle: 'font-style',\n\t\t\t\t'font-style': 'font-style'\n\t\t\t},\n\n\t\t\t// Get the support list for html the document where the text calcution is to be done.\n\t\t\tgetDocumentSupport: function getDocumentSupport() {\n\t\t\t\tvar childRetriverFn, childRetriverString, noClassTesting;\n\n\t\t\t\tif (doc.getElementsByClassName) {\n\t\t\t\t\tchildRetriverFn = 'getElementsByClassName';\n\t\t\t\t\tchildRetriverString = classNameWithTag;\n\t\t\t\t\tnoClassTesting = true;\n\t\t\t\t} else {\n\t\t\t\t\tchildRetriverFn = 'getElementsByTagName';\n\t\t\t\t\tchildRetriverString = 'span';\n\t\t\t\t\tnoClassTesting = false;\n\t\t\t\t}\n\n\t\t\t\treturn {\n\t\t\t\t\tisIE: /msie/i.test(userAgent) && !win.opera,\n\t\t\t\t\thasSVG: Boolean(win.SVGAngle || doc.implementation.hasFeature('http://www.w3.org/TR/SVG11/feature#BasicStructure', '1.1')),\n\t\t\t\t\tisHeadLess: new RegExp(' HtmlUnit').test(userAgent),\n\t\t\t\t\tisWebKit: new RegExp(' AppleWebKit/').test(userAgent),\n\t\t\t\t\tchildRetriverFn: childRetriverFn,\n\t\t\t\t\tchildRetriverString: childRetriverString,\n\t\t\t\t\tnoClassTesting: noClassTesting\n\t\t\t\t};\n\t\t\t},\n\n\t\t\t/*\n    * Create a html div element and attach it with a parent. All the subsequent operations are performed\n    * by upding this dom tree only.\n    *\n    * @param {HTMLElement} - The html element where the newly created div is to be attached. If not passed,\n    *                      the new div is appended on the body.\n    */\n\t\t\tcreateContainer: function createContainer(containerParent) {\n\t\t\t\tvar body, container;\n\n\t\t\t\tif (containerParent && (containerParent.offsetWidth || containerParent.offsetHeight)) {\n\t\t\t\t\tif (containerParent.appendChild) {\n\t\t\t\t\t\tcontainerParent.appendChild(container = doc.createElement(DIV));\n\t\t\t\t\t\tcontainer.className = containerClass;\n\t\t\t\t\t\tcontainer.setAttribute('aria-hidden', 'true');\n\t\t\t\t\t\tcontainer.setAttribute('role', 'presentation');\n\t\t\t\t\t\treturn container;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tbody = doc.getElementsByTagName('body')[0];\n\n\t\t\t\t\tif (body && body.appendChild) {\n\t\t\t\t\t\tcontainer = doc.createElement(DIV);\n\t\t\t\t\t\tcontainer.className = containerClass;\n\t\t\t\t\t\tcontainer.setAttribute('aria-hidden', 'true');\n\t\t\t\t\t\tcontainer.setAttribute('role', 'presentation');\n\t\t\t\t\t\tcontainerInstanceCount += 1;\n\t\t\t\t\t\tbody.appendChild(container);\n\t\t\t\t\t\treturn container;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t// Finds a approximate position where the text is to be broken\n\t\t\tgetNearestBreakIndex: function getNearestBreakIndex(text, maxWidth, sl) {\n\t\t\t\tif (!text || !text.length) {\n\t\t\t\t\treturn 0;\n\t\t\t\t}\n\n\t\t\t\tvar difference,\n\t\t\t\t    getWidth = sl._getWidthFn(),\n\t\t\t\t    charLen = 0,\n\t\t\t\t    increment = 0,\n\t\t\t\t    oriWidth = getWidth(text),\n\t\t\t\t    avgWidth = oriWidth / text.length;\n\n\t\t\t\tdifference = maxWidth;\n\t\t\t\tcharLen = ceil(maxWidth / avgWidth);\n\n\t\t\t\tif (oriWidth < maxWidth) {\n\t\t\t\t\treturn text.length - 1;\n\t\t\t\t}\n\n\t\t\t\tif (charLen > text.length) {\n\t\t\t\t\tdifference = maxWidth - oriWidth;\n\t\t\t\t\tcharLen = text.length;\n\t\t\t\t}\n\n\t\t\t\twhile (difference > 0) {\n\t\t\t\t\tdifference = maxWidth - getWidth(text.substr(0, charLen));\n\t\t\t\t\tincrement = floor(difference / avgWidth);\n\t\t\t\t\tif (increment) {\n\t\t\t\t\t\tcharLen += increment;\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn charLen;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\twhile (difference < 0) {\n\t\t\t\t\tdifference = maxWidth - getWidth(text.substr(0, charLen));\n\t\t\t\t\tincrement = floor(difference / avgWidth);\n\t\t\t\t\tif (increment) {\n\t\t\t\t\t\tcharLen += increment;\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn charLen;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn charLen;\n\t\t\t},\n\n\t\t\t/*\n    * Determine lineheight of a text for a given style. It adds propery lineHeight to the style passed\n    *\n    * @param {Object} - The style based on which the text's metric needs to be calculated. The calculation happens\n    *                  based on fontSize property, if its not present a default font size is assumed.\n    *\n    * @return {Object} - The style that was passed with lineHeight as a named propery set on the object.\n    */\n\t\t\tsetLineHeight: function setLineHeight(styleObj) {\n\t\t\t\tvar fSize = styleObj.fontSize = styleObj.fontSize || '12px';\n\t\t\t\tstyleObj.lineHeight = styleObj.lineHeight || styleObj['line-height'] || parseInt(fSize, 10) * 1.2 + 'px';\n\t\t\t\treturn styleObj;\n\t\t\t}\n\t\t};\n\n\t\treturn lib;\n\t}\n};\n\nexports['default'] = lib;\nmodule.exports = exports['default'];","class ActionModel {\n    constructor () {\n        this._registrableComponents = [];\n    }\n\n    /**\n     *\n     *\n     * @param {*} action\n     * @returns\n     * @memberof ActionModel\n     */\n    registerPhysicalActions (action) {\n        const canvases = this._registrableComponents;\n\n        canvases.forEach((canvas) => {\n            canvas.once('canvas.updated').then((args) => {\n                const matrix = args.client.composition().visualGroup.matrixInstance().value;\n                matrix.each(cell => cell.valueOf().firebolt().registerPhysicalActions(action));\n            });\n        });\n        return this;\n    }\n\n    /**\n     *\n     *\n     * @param {*} actions\n     * @returns\n     * @memberof ActionModel\n     */\n    registerBehaviouralActions (...actions) {\n        const canvases = this._registrableComponents;\n\n        canvases.forEach((canvas) => {\n            canvas.once('canvas.updated').then(() => {\n                const matrix = canvas.composition().visualGroup.matrixInstance().value;\n                matrix.each(cell => cell.valueOf().firebolt().registerBehaviouralActions(...actions));\n            });\n        });\n        return this;\n    }\n\n    /**\n     *\n     *\n     * @param {*} map\n     * @returns\n     * @memberof ActionModel\n     */\n    registerPhysicalBehaviouralMap (map) {\n        const canvases = this._registrableComponents;\n\n        canvases.forEach((canvas) => {\n            canvas.once('canvas.updated').then((args) => {\n                const matrix = args.client.composition().visualGroup.matrixInstance().value;\n                matrix.each(cell => cell.valueOf().firebolt().registerPhysicalBehaviouralMap(map));\n            });\n        });\n        return this;\n    }\n\n    /**\n     *\n     *\n     * @param {*} map\n     * @returns\n     * @memberof ActionModel\n     */\n    mapSideEffects (map) {\n        const canvases = this._registrableComponents;\n\n        canvases.forEach((canvas) => {\n            canvas.once('canvas.updated').then(() => {\n                const matrix = canvas.composition().visualGroup.matrixInstance().value;\n                matrix.each(cell => cell.valueOf().firebolt().mapSideEffects(map));\n            });\n        });\n        return this;\n    }\n\n    /**\n     *\n     *\n     * @param {*} componentName\n     * @returns\n     * @memberof ActionModel\n     */\n    for (...components) {\n        this._registrableComponents = components;\n        return this;\n    }\n\n    /**\n     *\n     *\n     * @param {*} sideEffects\n     * @returns\n     * @memberof ActionModel\n     */\n    registerSideEffects (...sideEffects) {\n        const registrableComponents = this._registrableComponents;\n\n        registrableComponents.forEach((canvas) => {\n            canvas.once('canvas.updated').then((args) => {\n                const matrix = args.client.composition().visualGroup.matrixInstance().value;\n                matrix.each(cell => cell.valueOf().firebolt().registerSideEffects(sideEffects));\n            });\n        });\n\n        return this;\n    }\n}\n\nexport const actionModel = (() => new ActionModel())();\n","import { GridLayout } from '@chartshq/layout';\nimport { transactor, Store, getUniqueId } from 'muze-utils';\nimport { RETINAL } from '../constants';\nimport TransactionSupport from '../transaction-support';\nimport { getRenderDetails, prepareLayout } from './layout-maker';\nimport { localOptions, canvasOptions } from './local-options';\nimport { renderComponents } from './renderer';\nimport GroupFireBolt from './firebolt';\nimport options from '../options';\nimport { initCanvas, setupChangeListener } from './helper';\n\n/**\n * This is the primary class which manages highlevel components like visualGroup, Titles, Legend, Extensions\n * (in future). Global level Muze functionality is subset this. Every time user works with an instance of\n * canvas in dom which provides instance level settings.\n *\n */\nexport default class Canvas extends TransactionSupport {\n\n    /**\n     * Creates reactive property accessors.\n     * - data\n     * - height\n     * - width\n     * - config\n     * This configs are retrieved from options.\n     */\n    constructor (globalDependencies) {\n        super();\n\n        this._allOptions = Object.assign({}, options, localOptions);\n        this._registry = {};\n        this._composition = {};\n        this._cachedProps = {};\n        this._alias = null;\n        this._renderedResolve = null;\n        this._renderedPromise = new Promise((resolve) => {\n            this._renderedResolve = resolve;\n        });\n        this._layout = new GridLayout();\n        this._store = new Store({});\n\n        this.firebolt(new GroupFireBolt(this));\n\n        // Setters and getters will be mounted on this. The object will be mutated.\n        const [, store] = transactor(this, options, this._store.model);\n        transactor(this, localOptions, store);\n        transactor(this, canvasOptions, store);\n        this.dependencies(Object.assign({}, globalDependencies, this._dependencies));\n        this.alias(`canvas-${getUniqueId()}`);\n        this.title('', {});\n        this.subtitle('', {});\n        this.legend({});\n        setupChangeListener(this);\n    }\n\n    /**\n     *\n     *\n     * @readonly\n     * @memberof Canvas\n     */\n    layout (...params) {\n        if (params.length) {\n            return this;\n        }\n        return this._layout;\n    }\n\n    /**\n     *\n     *\n     * @readonly\n     * @memberof Canvas\n     */\n    composition (...params) {\n        if (params.length) {\n            this._composition = params[0];\n            return this;\n        }\n        return this._composition;\n    }\n\n    done () {\n        return this._renderedPromise;\n    }\n\n    /**\n     *\n     *\n     * @param {*} params\n     * @returns\n     * @memberof Canvas\n     */\n    alias (...params) {\n        if (params.length) {\n            const visualGroup = this.composition().visualGroup;\n            this._alias = params[0];\n            visualGroup && visualGroup.alias(this.alias());\n            return this;\n        }\n        return this._alias;\n    }\n\n    /**\n     * Creates an instance initiated with given settings.\n     *\n     * @param {Object} initialSettings Initial settings to be populated in the model\n     * @param {Object} regEntry newly created instance with the initial settings\n     * @param {Object} globalDependencies dependencies which will be created only once in the page\n     *\n     * @return {Object} newly created instance with the initial settings\n     */\n    static withSettings (initialSettings, regEntry, globalDependencies) {\n        const instance = new Canvas(globalDependencies);\n\n        for (const key in initialSettings) {\n            instance[key](initialSettings[key]);\n        }\n        // set registry for instance\n        instance.registry(regEntry);\n        return instance;\n    }\n\n    /**\n     *\n     *\n     * @static\n     * @returns\n     * @memberof Canvas\n     */\n    static formalName () {\n        return 'canvas';\n    }\n\n    /**\n     *\n     *\n     * @readonly\n     * @memberof Canvas\n     */\n    firebolt (...firebolt) {\n        if (firebolt.length) {\n            this._firebolt = firebolt[0];\n            return this;\n        }\n        return this._firebolt;\n    }\n\n    /**\n     * Registry peoperty accessor\n     *\n     * @param {Object} reg plain old javascript object keyvalue pairs. Key containing module name and value contains\n     * module definition class. The reg object has to be flat object of level 1.\n     */\n    registry (...params) {\n        if (params.length) {\n            const components = Object.assign({}, params[0].components);\n            const componentSubRegistry = Object.assign({}, params[0].componentSubRegistry);\n\n            this._registry = { components, componentSubRegistry };\n            const initedComponents = initCanvas(this);\n            // @todo is it okay to continue this tight behaviour? If not use a resolver to resolve diff component type.\n            this.composition({ visualGroup: initedComponents[0] });\n            this.composition().visualGroup.alias(this.alias());\n            return this;\n        }\n        return this._registry;\n    }\n\n    /*\n     * Prepare dependencies for top level elements\n     */\n    dependencies (...param) {\n        if (param.length) {\n            this._dependencies = param[0];\n            return this;\n        }\n        // @todo prepare dependencies here.\n        return this._dependencies;\n    }\n\n    /**\n     *\n     *\n     * @param {*} lifeCycles\n     * @returns\n     * @memberof Canvas\n     */\n    lifeCycle (lifeCycles) {\n        const lifeCycleManager = this.dependencies().lifeCycleManager;\n        if (lifeCycles) {\n            lifeCycleManager.register(lifeCycles);\n            return this;\n        }\n        return lifeCycleManager;\n    }\n\n    /**\n     *\n     *\n     * @readonly\n     * @memberof Canvas\n     */\n    legend (...params) {\n        if (params.length) {\n            return this;\n        }\n        return this._legend;\n    }\n\n    /**\n     *\n     *\n     * @param {*} eventName\n     * @returns\n     * @memberof Canvas\n     */\n    once (eventName) {\n        const lifeCycleManager = this.dependencies().lifeCycleManager;\n        return lifeCycleManager.retrieve(eventName);\n    }\n\n    /**\n     * Internal function to trigger render, this method is cognizant of all the properties of the core modules and\n     * establish a passive reactivity. Passive reactivity is not always a bad thing :)\n     * @internal\n     */\n    render () {\n        const mount = this.mount();\n        const visGroup = this.composition().visualGroup;\n        const lifeCycleManager = this.dependencies().lifeCycleManager;\n        // Get render details including arrangement and measurement\n        const { components, layoutConfig, measurement } = getRenderDetails(this, mount);\n\n        lifeCycleManager.notify({ client: this, action: 'beforedraw' });\n        // Prepare the layout by triggering the matrix calculation\n        prepareLayout(this.layout(), components, layoutConfig, measurement);\n        // Render each component\n        renderComponents(this, components, layoutConfig, measurement);\n        // Update life cycle\n        lifeCycleManager.notify({ client: this, action: 'drawn' });\n        const promises = [];\n        visGroup.matrixInstance().value.each((el) => {\n            promises.push(el.valueOf().done());\n        });\n        Promise.all(promises).then(() => {\n            this._renderedResolve();\n        });\n    }\n\n    /**\n     *\n     *\n     * @returns\n     * @memberof Canvas\n     */\n    xAxes () {\n        return this.composition().visualGroup.getAxes('x');\n    }\n\n    /**\n     *\n     *\n     * @returns\n     * @memberof Canvas\n     */\n    yAxes () {\n        return this.composition().visualGroup.getAxes('y');\n    }\n\n    /**\n     *\n     *\n     * @returns\n     * @memberof Canvas\n     */\n    getRetinalAxes () {\n        const visualGroup = this.composition().visualGroup;\n        return visualGroup.getAxes(RETINAL);\n    }\n}\n","import { TOP, BOTTOM, LEFT, TITLE, SUB_TITLE, GROUP, LAYOUT, LEGEND } from '../constants';\n\n/**\n *\n *\n * @param {*} context\n * @returns\n */\nexport const arrangeComponents = (context) => {\n    const legendConfig = context.config().legend;\n    const titleConfig = context.title()[1];\n    const subtitleConfig = context.subtitle()[1];\n    const titleLayouts = {\n        [`${TOP}-${TOP}`]: [TITLE, SUB_TITLE, GROUP],\n        [`${BOTTOM}-${BOTTOM}`]: [GROUP, SUB_TITLE, TITLE],\n        [`${TOP}-${BOTTOM}`]: [TITLE, GROUP, SUB_TITLE],\n        [`${BOTTOM}-${TOP}`]: [SUB_TITLE, GROUP, TITLE]\n    };\n    const legendLayouts = [\n        [LEGEND, LAYOUT],\n        [LAYOUT, LEGEND]\n    ];\n    const titlePosition = titleConfig.position || TOP;\n    const subtitlePosition = subtitleConfig.position || TOP;\n\n    return {\n        headers: titleLayouts[`${titlePosition}-${subtitlePosition}`],\n        legends: legendConfig.position === LEFT || legendConfig.position === TOP ?\n        legendLayouts[0] : legendLayouts[1]\n    };\n};\n","export const LEGEND_CONFIG = {\n    position: 'right',\n    show: true\n};\n\nexport const TITLE_CONFIG = {\n    position: 'top',\n    align: 'center',\n    padding: 8\n};\n\nexport const SUB_TITLE_CONFIG = {\n    position: 'bottom',\n    align: 'center',\n    padding: 16\n};\n","import {\n    getDataModelFromIdentifiers\n} from 'muze-utils';\n\nexport default class GroupFireBolt {\n    constructor (context) {\n        this.context = context;\n    }\n\n    dispatchBehaviour (behaviour, payload) {\n        const propPayload = Object.assign(payload);\n        const criteria = propPayload.criteria;\n        const data = this.context.data();\n\n        propPayload.action = behaviour;\n        const model = getDataModelFromIdentifiers(data, criteria);\n        data.propagate(model, propPayload, {\n            sourceId: this.context.alias()\n        });\n        return this;\n    }\n}\n","import { isEqual } from 'muze-utils';\nimport { ROWS, COLUMNS, COLOR, SHAPE, SIZE, MOUNT, DETAIL } from '../constants';\nimport { canvasOptions } from './local-options';\n\n/**\n * Instantiate high level components. Canvas knows what all high level component it has.\n * @nice-to-have dynamic high level components.\n *  - Is it even required ?\n *  - Reactive to source (canvas) streaming ?\n * @param {*} context Canvas instance\n * @return {Object.fArray>} Arrays of Title, visualGroup, Legend\n */\nexport const initCanvas = (context) => {\n    const reg = context._registry.components;\n\n    return [new reg.VisualGroup(context._registry, context.dependencies())];\n};\n\n/**\n *\n *\n * @memberof Canvas\n */\nexport const dispatchProps = (context) => {\n    const lifeCycleManager = context.dependencies().lifeCycleManager;\n    lifeCycleManager.notify({ client: context, action: 'beforeupdate' });\n    const visualGroup = context.composition().visualGroup;\n\n    visualGroup.lockModel();\n    const allOptions = context._allOptions;\n    for (const key in allOptions) {\n        const value = context[key]();\n        if (value !== null) {\n            visualGroup[key] && visualGroup[key](value);\n        }\n    }\n    visualGroup.unlockModel();\n\n    context._cachedProps = {};\n    lifeCycleManager.notify({ client: context, action: 'initialized' });\n    lifeCycleManager.notify({ client: context, action: 'updated' });\n};\n\n/**\n *\n *\n */\nexport const setupChangeListener = (context) => {\n    const store = context._store;\n\n    store.registerImmediateListener(MOUNT, () => {\n        const allOptions = Object.keys(context._allOptions);\n        const props = [...allOptions, ...Object.keys(canvasOptions)];\n        store.registerChangeListener(props, (...params) => {\n            const updateProps = allOptions.every((option, i) => {\n                let equalityChecker = () => false;\n                switch (option) {\n                case ROWS:\n                case COLUMNS:\n                    equalityChecker = isEqual('Array');\n                    break;\n\n                case SHAPE:\n                case SIZE:\n                case COLOR:\n                case DETAIL:\n                    equalityChecker = isEqual('Object');\n                    break;\n\n                default:\n                    break;\n                }\n                const oldVal = params[i][0];\n                const newVal = params[i][1];\n                return !equalityChecker(oldVal, newVal);\n            });\n\n            // inform attached board to rerender\n            !updateProps && dispatchProps(context);\n            context.render();\n        }, true);\n    });\n};\n\n","import { cellRegistry } from '@chartshq/visual-cell';\nimport { mergeRecursive } from 'muze-utils';\nimport { arrangeComponents } from './component-resolver';\nimport { createHeaders } from './title-maker';\nimport { createLegend, getLegendSpace } from './legend-maker';\nimport { TOP, BOTTOM, LEFT, RIGHT } from '../constants';\n\nconst BlankCell = cellRegistry().get().BlankCell;\n\nconst createBlankCell = () => new BlankCell();\n\n/**\n *\n *\n * @param {*} canvases\n * @returns\n */\nconst getMaxRows = (rows) => {\n    const maxRows = [0, 0];\n\n    maxRows[0] = Math.max(maxRows[0], rows[0].length ? rows[0][0].length : 0);\n    maxRows[1] = Math.max(maxRows[1], rows[1].length ? rows[1][0].length : 0);\n    return maxRows;\n};\n\n/**\n *\n *\n * @param {*} arr\n * @param {*} value\n */\nconst fillArray = (arr, value) => arr.map(() => value());\n\n/**\n *\n *\n * @param {*} rows\n * @param {*} columns\n * @param {*} blankCellCreator\n * @returns\n */\nconst blankMatrixCreator = (rows, columns, blankCellCreator) => {\n    const arr = [];\n\n    for (let i = 0; i < rows; i++) {\n        let array = new Array(columns).fill([]);\n        array = fillArray(array, blankCellCreator);\n        arr.push(array);\n    }\n    return arr;\n};\n\n/**\n *\n *\n * @param {*} rowMatrices\n * @param {*} maxRows\n */\nconst blankCellCreator = (rowMatrices, maxRows) => rowMatrices.map((rowMatrix, rowMatrixIndex) => {\n    if (rowMatrix.length === 0 && maxRows[rowMatrixIndex] > 0) {\n        const numberOfRows = Math.max(rowMatrices[0].length, rowMatrices[1].length);\n        return blankMatrixCreator(numberOfRows, maxRows[rowMatrixIndex], createBlankCell);\n    }\n    if (rowMatrix.length > 0) {\n        if (rowMatrix[0] && rowMatrix[0].length <= maxRows[rowMatrixIndex]) {\n            return rowMatrix.map((row) => {\n                let arr = new Array(maxRows[rowMatrixIndex] - rowMatrix[0].length).fill(1);\n                arr = fillArray(arr, createBlankCell);\n                return [...arr, ...row];\n            });\n        }\n        return blankMatrixCreator(rowMatrix.length, maxRows[rowMatrixIndex], createBlankCell);\n    }\n    return rowMatrix;\n});\n\n/**\n *\n *\n * @param {*} context\n * @returns\n */\nexport const prepareLayout = (layout, components, config, measurement) => {\n    let topL;\n    let topR;\n    let bottomL;\n    let bottomR;\n    const {\n        rows,\n        columns,\n        values,\n        cornerMatrices\n    } = components;\n    const {\n        showHeaders\n    } = config;\n    const maxRows = getMaxRows(rows);\n    const {\n        topLeft,\n        topRight,\n        bottomLeft,\n        bottomRight\n    } = cornerMatrices;\n\n    if (!showHeaders) {\n        const colLengths = [columns[0].length, columns[1].length];\n        // Create blank cells for corener matrices\n        [topL, topR] = blankCellCreator([new Array(colLengths[0]), new Array(colLengths[0])], maxRows);\n        [bottomL, bottomR] = blankCellCreator([new Array(colLengths[1]), new Array(colLengths[1])], maxRows);\n    } else {\n        [topL, topR, bottomL, bottomR] = [topLeft, topRight, bottomLeft, bottomRight];\n    }\n\n    layout.measurement(measurement)\n                    .config(config)\n                    .matrices({\n                        top: [topL, columns[0], topR],\n                        center: [rows[0], values, rows[1]],\n                        bottom: [bottomL, columns[1], bottomR]\n                    })\n                    .triggerReflow();\n};\n\n/**\n *\n *\n * @param {*} context\n * @param {*} mount\n * @returns\n */\nexport const getRenderDetails = (context, mount) => {\n    let layoutConfig = mergeRecursive({}, context.config());\n    const visGroup = context.composition().visualGroup;\n    const {\n        isColumnSizeEqual,\n        isRowSizeEqual,\n        rows,\n        columns,\n        values\n    } = visGroup.placeholderInfo();\n    const {\n        minWidth,\n        minHeight,\n        classPrefix,\n        showHeaders,\n        legend\n    } = context.config();\n    // Get title configuration\n    const titleConfig = context.title()[1];\n     // Get subtitle configuration\n    const subtitleConfig = context.subtitle()[1];\n    // Get legend position\n    const legendPosition = legend.position;\n    // Arrange components according to config\n    const layoutArrangement = arrangeComponents(context);\n\n    // Get height width of the mount point\n    const { height, width } = mount.getBoundingClientRect();\n\n    const availableHeightForCanvas = context.height() >= 0 ? context.height() : (height || minHeight);\n    const availableWidthForCanvas = context.width() >= 0 ? context.width() : (width || minWidth);\n    // Create headers and determine header height\n    const { headers, headerHeight } = createHeaders(context, availableHeightForCanvas, availableWidthForCanvas);\n\n    // Create legends and determine legend space\n    context._legend = createLegend(context, headerHeight, availableHeightForCanvas, availableWidthForCanvas);\n\n    const legendSpace = getLegendSpace(context, availableHeightForCanvas, availableWidthForCanvas);\n    const legendWidth = (legendPosition === LEFT || legendPosition === RIGHT) ? legendSpace.width : 0;\n    const legendHeight = (legendPosition === TOP || legendPosition === BOTTOM) ? legendSpace.height : 0;\n\n    // Set components for layouting\n    const components = {\n        headers,\n        legends: context.legend(),\n        canvases: [context],\n        rows,\n        columns,\n        values,\n        cornerMatrices: visGroup.cornerMatrices()\n    };\n    const measurement = {\n        mountSpace: {\n            height,\n            width\n        },\n        headerHeight,\n        legendSpace,\n        canvasWidth: availableWidthForCanvas,\n        canvasHeight: availableHeightForCanvas,\n        width: availableWidthForCanvas - legendWidth,\n        height: availableHeightForCanvas - headerHeight - legendHeight,\n        minUnitHeight: context.minUnitHeight(),\n        minUnitWidth: context.minUnitWidth()\n    };\n    layoutConfig = mergeRecursive(layoutConfig, {\n        classPrefix,\n        showHeaders,\n        border: mergeRecursive(visGroup.metaData().border, context.config().border),\n        layoutArrangement,\n        legend,\n        title: titleConfig,\n        subtitle: subtitleConfig,\n        isColumnSizeEqual,\n        isRowSizeEqual\n    });\n    return {\n        layoutConfig,\n        components,\n        measurement\n    };\n};\n","import { TextCell, AxisCell } from '@chartshq/visual-cell';\nimport {\n    VERTICAL, HORIZONTAL, LEFT, RIGHT, LEGEND_TYPE_MAP, HEIGHT, PADDING, BORDER, CONFIG, LINEAR, COLOR, STEP_COLOR,\n    GRADIENT, DISCRETE, WIDTH\n} from '../constants';\n\n/**\n *\n *\n * @param {*} legendConfig\n * @param {*} canvases\n * @returns\n */\nexport const legendDataCreator = (canvas) => {\n    let LegendCls;\n    const dataset = [];\n    const axes = canvas.getRetinalAxes();\n    Object.entries(axes).forEach((axisInfo) => {\n        const scale = axisInfo[1][0];\n        const scaleType = axisInfo[0];\n        const scaleProps = canvas[scaleType]();\n\n        if (scaleProps && scaleProps.field) {\n            const {\n                type,\n                step\n            } = scale.config();\n            LegendCls = LEGEND_TYPE_MAP[DISCRETE];\n            if (type === LINEAR && scaleType === COLOR) {\n                if (!step) {\n                    LegendCls = LEGEND_TYPE_MAP[GRADIENT];\n                } else {\n                    LegendCls = LEGEND_TYPE_MAP[STEP_COLOR];\n                }\n            }\n            dataset.push({ scale, canvas, fieldName: scaleProps.field, LegendCls, scaleType });\n        }\n    });\n\n    return dataset;\n};\n\n/**\n *\n *\n * @param {*} legendConfig\n * @param {*} canvases\n * @param {*} measurement\n * @param {*} prevLegends\n * @returns\n */\nexport const legendInitializer = (legendConfig, canvas, measurement, prevLegends) => {\n    const legends = [];\n    const {\n        height,\n        width,\n        headerHeight\n    } = measurement;\n    const {\n        position,\n        align\n    } = legendConfig;\n\n    const dataset = legendDataCreator(canvas);\n\n    dataset.forEach((dataInfo, index) => {\n        let legend = {};\n\n        const legendMeasures = {};\n        const {\n                LegendCls,\n                scale,\n                fieldName,\n                scaleType\n            } = dataInfo;\n        const config = legendConfig[scaleType] || {};\n        const title = config.title || {};\n        title.text = title.text || fieldName;\n        if (config.show) {\n            config.position = position;\n            config.align = align;\n\n            if (prevLegends[index]) {\n                legend = prevLegends[index].legend;\n            } else {\n                legend = LegendCls.create({\n                    labelManager: canvas._dependencies.smartlabel,\n                    cells: {\n                        AxisCell, TextCell\n                    }\n                });\n            }\n            legendMeasures.maxHeight = align === VERTICAL ? (height - headerHeight) : height * 0.2;\n            legendMeasures.maxWidth = align === HORIZONTAL ? width : width * 0.2;\n            [HEIGHT, WIDTH, PADDING, BORDER, CONFIG].forEach((e) => {\n                if (legendConfig[e]) {\n                    if (e === HEIGHT) {\n                        legendMeasures[e] = Math.min(legendMeasures.maxHeight, config[e]);\n                    } else if (e === WIDTH) {\n                        legendMeasures[e] = Math.min(legendMeasures.maxWidth, config[e]);\n                    } else {\n                        legendMeasures[e] = config[e];\n                    }\n                }\n            });\n            legend.scale(scale)\n                            .title(title)\n                            .fieldName(fieldName)\n                            .config(config)\n                            .metaData(canvas.composition().visualGroup.getGroupByData().project([fieldName]))\n                            .measurement(legendMeasures)\n                            .setLegendMeasures();\n\n            legends.push({ canvas, legend });\n        }\n    });\n    // }\n    return legends;\n};\n\n/**\n *\n *\n * @param {*} legends\n * @param {*} legendConfig\n * @param {*} availableHeight\n * @param {*} availableWidth\n * @returns\n */\nexport const getLegendSpace = (context, availableHeight, availableWidth) => {\n    const legends = context.legend();\n    const legendConfig = context.config().legend;\n    const legendMeasures = legends.map(legendInfo => legendInfo.legend.measurement());\n    const legendSpace = { width: 0, height: 0 };\n\n    legendMeasures.forEach((space) => {\n        let height = 0;\n        let width = 0;\n        width = Math.min(space.width, space.maxWidth);\n        height = Math.min(space.height, space.maxHeight);\n\n        if (legendConfig.align === HORIZONTAL) {\n            if (legendSpace.width + width > availableWidth) {\n                legendSpace.width = availableWidth;\n                legendSpace.height += height;\n            } else {\n                legendSpace.width += width;\n                legendSpace.height = Math.max(legendSpace.height, height);\n            }\n        } else if (legendSpace.height + height > availableHeight) {\n            legendSpace.height = height;\n            legendSpace.width += width;\n        } else {\n            legendSpace.height += height;\n            legendSpace.width = Math.max(legendSpace.width, width);\n        }\n    });\n    if (legendConfig.align === HORIZONTAL) {\n        legendSpace.width = availableWidth;\n    }\n    return legendSpace;\n};\n\n/**\n *\n *\n * @param {*} context\n * @param {*} headerHeight\n * @returns\n */\nexport const createLegend = (context, headerHeight, height, width) => {\n    const measurement = {\n        height,\n        width,\n        headerHeight\n    };\n    const { legend } = context.config();\n    const { show, position } = legend;\n\n    legend.classPrefix = context.config().classPrefix;\n    const align = (position === LEFT || position === RIGHT) ? VERTICAL : HORIZONTAL;\n\n    legend.show = show ? ((align === VERTICAL && width > 200) || (align === HORIZONTAL && height > 200)) : show;\n    legend.align = align;\n    return legendInitializer(legend, context, measurement, context.legends || []);\n};\n","import { mergeRecursive } from 'muze-utils';\nimport {\n    ROWS,\n    COLUMNS,\n    COLOR,\n    SHAPE,\n    SIZE,\n    DETAIL,\n    LAYERS,\n    TRANSFORM,\n    MOUNT,\n    TITLE,\n    SUB_TITLE\n} from '../constants';\nimport { TITLE_CONFIG, SUB_TITLE_CONFIG } from './defaults';\n/**\n * @module\n * This is the local options semantics based on which setters getters are created and reactivity is initiated.\n * This local object is only valid for Canvas.\n * Canvas merges global and local object both to the model\n *\n * Format\n *  PROPERTRY_NAME: {\n *      value: // default value of the property,\n *      meta: {\n *          typeCheck: // The setter value will be checked using this. If the value is function then the setter value\n *                     // is passed as args.\n *          typeExpected: // The output of typecheck action will be tested against this. Truthy value will set the\n *                       // value to the setter\n *          sanitizaiton: // Need for sanitization before type is checked\n *      }\n *  }\n */\n\nexport const localOptions = {\n    [ROWS]: {\n        value: null,\n        meta: {\n            typeCheck: 'constructor',\n            typeExpected: 'Array'\n        }\n    },\n    [COLUMNS]: {\n        value: null,\n        meta: {\n            typeCheck: 'constructor',\n            typeExpected: 'Array'\n        }\n    },\n    [COLOR]: {\n        value: null,\n        meta: {\n            typeCheck: 'constructor',\n            typeExpected: 'Object',\n            sanitization: (config) => {\n                if (typeof config === 'string') {\n                    return {\n                        field: config\n                    };\n                }\n                return config;\n            }\n        }\n    },\n    [SHAPE]: {\n        value: null,\n        meta: {\n            typeCheck: 'constructor',\n            typeExpected: 'Object',\n            sanitization: (config) => {\n                if (typeof config === 'string') {\n                    return {\n                        field: config\n                    };\n                }\n                return config;\n            }\n        }\n    },\n    [SIZE]: {\n        value: null,\n        meta: {\n            typeCheck: 'constructor',\n            typeExpected: 'Object',\n            sanitization: (config) => {\n                if (typeof config === 'string') {\n                    return {\n                        field: config\n                    };\n                }\n                return config;\n            }\n        }\n    },\n    [DETAIL]: {\n        value: [],\n        meta: {\n            typeCheck: 'constructor',\n            typeExpected: 'Array'\n        }\n    },\n\n    [LAYERS]: {\n        value: null,\n        meta: {\n            typeCheck: 'constructor',\n            typeExpected: 'Array'\n        }\n    },\n    [TRANSFORM]: {\n        value: null,\n        meta: {\n            typeCheck: 'constructor',\n            typeExpected: 'Object'\n        }\n    },\n    [MOUNT]: {\n        value: null\n    }\n};\n\nexport const canvasOptions = {\n    [TITLE]: {\n        value: [null, null],\n        meta: {\n            typeCheck: ['constructor', 'constructor'],\n            typeExpected: ['Function', 'Object'],\n            spreadParams: true,\n            sanitization: [(title) => {\n                if (typeof title === 'string') {\n                    const t = () => title;\n                    t._sanitized = true;\n                    return t;\n                }\n                return title;\n            }, (titleConfig) => {\n                const defConfig = mergeRecursive({}, TITLE_CONFIG);\n                return mergeRecursive(defConfig, titleConfig);\n            }]\n        }\n    },\n    [SUB_TITLE]: {\n        value: [null, null],\n        meta: {\n            typeCheck: ['constructor', 'constructor'],\n            typeExpected: ['Function', 'Object'],\n            spreadParams: true,\n            sanitization: [(subtitle) => {\n                if (typeof subtitle === 'string') {\n                    const sub = () => subtitle;\n                    sub._sanitized = true;\n                    return sub;\n                }\n                return subtitle;\n            }, (subtitleConfig) => {\n                const defConfig = mergeRecursive({}, SUB_TITLE_CONFIG);\n                return mergeRecursive(defConfig, subtitleConfig);\n            }]\n        }\n    }\n};\n","import { makeElement, selectElement } from 'muze-utils';\nimport { VERTICAL, HORIZONTAL, TOP, LEFT, RIGHT, BOTTOM } from '../constants';\n\n/**\n * Sets the rotation for all x axes if any axis has the rotation config set in the\n * entire view\n *\n * @param {Array} columns Column cells that contain the axes cells\n */\nconst setLabelRotationForAxes = (context) => {\n    let rotation = 0;\n\n    const xAxes = context.xAxes() || [];\n\n    (() => {\n        for (let i = 0; i < xAxes.length; i++) {\n            for (let j = 0; j < xAxes[i].length; j++) {\n                if (xAxes[i][j].config().labels.rotation !== 0) {\n                    rotation = xAxes[i][j].config().labels.rotation;\n                    return;\n                }\n            }\n        }\n    })();\n\n    if (rotation) {\n        xAxes.forEach((axes) => {\n            axes.forEach((axis) => {\n                axis.config({ labels: { rotation, smartTicks: false } });\n            });\n        });\n    }\n};\n\n/**\n *\n *\n * @param {*} context\n * @param {*} mount\n * @returns\n */\nconst getSkeletons = (mount, layoutConfig, measurement) => {\n    const {\n        layoutArrangement,\n        classPrefix\n    } = layoutConfig;\n    const {\n        headers,\n        legends\n    } = layoutArrangement;\n    const {\n        canvasWidth,\n        canvasHeight,\n        mountSpace\n    } = measurement;\n    const container = selectElement(mount);\n    const components = {};\n    if (mountSpace.height && mountSpace.height < canvasHeight) {\n        container.style('overflow-y', 'scroll');\n    }\n    if (mountSpace.width && mountSpace.width < canvasWidth) {\n        container.style('overflow-x', 'scroll');\n    }\n    const mountPoint = makeElement(container, 'div', [1], `${classPrefix}-viz`)\n       .style('width', `${canvasWidth}px`);\n    headers.forEach((type) => {\n        components[type] = makeElement(mountPoint, 'div', [1], `${classPrefix}-${type}-container`);\n        components[type].style('width', `${canvasWidth}px`);\n    });\n    makeElement(mountPoint, 'div', headers)\n                    .style('width', `${canvasWidth}px`)\n                    .each(function (type, i) {\n                        components[type] = selectElement(this)\n                            .attr('class', `${classPrefix}-${type}-container`);\n                        if (type === 'group') {\n                            makeElement(components[type], 'div', legends, `${classPrefix}-${type}-container-${i}`)\n                                            .each(function (layoutType) {\n                                                components[layoutType] = selectElement(this)\n                                                     .classed(`${classPrefix}-${layoutType}-container`, true);\n                                            });\n                        }\n                    });\n\n    return components;\n};\n\n/**\n *\n *\n * @param {*} context\n * @param {*} container\n * @param {*} legendComponents\n */\nconst renderLegend = (legendConfig, container, legendComponents, measurement) => {\n    const sectionComponents = [];\n    const { legendSpace, headerHeight, height, width } = measurement;\n    const { legend, classPrefix } = legendConfig;\n    const { position } = legend;\n    const legendMount = makeElement(container, 'div', [1], `${classPrefix}-legend`);\n    const align = (position === LEFT || position === RIGHT) ? VERTICAL : HORIZONTAL;\n    const legWidth = align === VERTICAL ? legendSpace.width : width;\n    const legHeight = align === VERTICAL ? height - headerHeight : legendSpace.height;\n\n    [container, legendMount].forEach((elem) => {\n        elem.style('width', `${legWidth}px`)\n                        .style('height', `${legHeight}px`)\n                        .style('float', LEFT);\n    });\n\n    if (align === VERTICAL) {\n        let sections = -1;\n        let currHeight = legHeight;\n        let currWidth = 0;\n\n        legendComponents.forEach((legendInfo) => {\n            const leg = legendInfo.legend;\n            if (leg.measurement().height > currHeight) {\n                sections++;\n                currWidth = 0;\n                currHeight = legHeight;\n            } else {\n                sections < 0 && sections++;\n            }\n            sectionComponents[sections] = sectionComponents[sections] || [];\n            currHeight -= Math.min(leg.measurement().height, currHeight);\n            currWidth = Math.max(leg.measurement().width, currWidth);\n            sectionComponents[sections].push({\n                legendInstance: leg,\n                legendHeight: legHeight,\n                legendWidth: currWidth\n            });\n        });\n\n        const mount = makeElement(legendMount, ['div'], sectionComponents, `${classPrefix}-legend-section`)\n                        .each((d, i) => selectElement(this).classed(`${classPrefix}-legend-section-${i}`, true))\n                        .classed(`${classPrefix}-legend-vertical-section`, true)\n                        .style('width', d => `${d[0].legendWidth}px`);\n        makeElement(mount, ['div'], d => d, `${classPrefix}-legend-components`)\n                        .each(function (d) { d.legendInstance.mount(this); })\n                        .style('width', d => `${d.legendWidth}px`);\n    } else {\n        const mount = makeElement(legendMount, 'div', [1], `${classPrefix}-legend-section-${0}`)\n                        .classed(`${classPrefix}-legend-horizontal-section`, true)\n                        .classed(`${classPrefix}-legend-section`, true)\n                        .style('width', `${legWidth}px`);\n        makeElement(mount, 'div', legendComponents, `${classPrefix}-legend-components`)\n                        .each(function (d) { d.legend.mount(this); });\n    }\n};\n\n/**\n *\n *\n * @param {*} context\n * @param {*} container\n * @param {*} type\n * @param {*} headers\n */\nconst renderHeader = (layoutConfig, container, type, headers) => {\n    const headerCell = headers[`${type}Cell`];\n    const config = layoutConfig[`${type}`];\n    const { position, align, padding } = config;\n    const cont = makeElement(container, 'div', [1], `${layoutConfig.classPrefix}-${type}-container`);\n\n    headerCell && headerCell.render(cont.node());\n    cont.style('width', `${100}%`);\n\n    if (config && headerCell) {\n        cont.style('float', LEFT)\n                        .style('text-align', align)\n                        .style(`padding-${position === TOP ? BOTTOM : TOP}`, `${padding}px`);\n    }\n};\n\n/**\n *\n *\n * @param {*} context\n * @param {*} shifter\n */\nconst shiftHeaders = (config, shifter, measurement) => {\n    const { classPrefix, title, subtitle, legend } = config;\n    const { legendSpace } = measurement;\n    const { position } = legend;\n\n    shifter += position === LEFT ? legendSpace.width : 0;\n    title && selectElement(`.${classPrefix}-title-container`)\n                    .style('padding-left', title.align === LEFT ? `${shifter}px` : 0);\n    subtitle && selectElement(`.${classPrefix}-subtitle-container`)\n                    .style('padding-left', subtitle.align === LEFT ? `${shifter}px` : 0);\n    selectElement(`.${classPrefix}-legend-horizontal-section`)\n                    .style('padding-left', `${shifter}px`)\n                    .selectAll(`.${classPrefix}-legend-body, .${classPrefix}-legend-title`)\n                    .style('max-width', `${legendSpace.width - shifter}px`);\n};\n\n/**\n *\n *\n * @param {*} mountPoint\n * @param {*} measurement\n * @param {*} classPrefix\n * @returns\n */\nconst prepareGridContainer = (mountPoint, measurement, classPrefix, alias) => {\n    if (!mountPoint) {\n        return this;\n    }\n\n    const {\n        height,\n        width\n    } = measurement;\n     // Create container for the layout\n    const container = makeElement(selectElement(mountPoint), 'div', [1], `${classPrefix}-grid-layout`)\n        .attr('id', `${classPrefix}-grid-layout-${alias}`)\n        .style('height', `${height}px`)\n        .style('width', `${width}px`);\n    // Mount for matrices\n    const mount = makeElement(container, 'div', [1], `${classPrefix}-layout-grid-container`)\n        .attr('id', `${classPrefix}-layout-grid-container-${alias}`)\n        .style('height', `${height}px`)\n        .style('width', `${width}px`)\n        .style('overflow-x', width > 300 ? 'none' : 'scroll')\n        .style('overflow-y', height > 300 ? 'none' : 'scroll');\n\n    return {\n        mount,\n        container\n    };\n};\n\n/**\n *\n *\n * @param {*} context\n * @param {*} components\n * @param {*} layoutConfig\n * @param {*} measurement\n */\nexport const renderComponents = (context, components, layoutConfig, measurement) => {\n    const {\n        headers,\n        legends\n    } = components;\n    const {\n        classPrefix\n    } = layoutConfig;\n    const {\n        title,\n        legend,\n        subtitle,\n        layout\n    } = getSkeletons(context.mount(), layoutConfig, measurement);\n    const {\n        mount\n   } = prepareGridContainer(layout.node(), measurement, classPrefix, context.alias());\n    const padding = context.layout().getViewInformation().layoutDimensions.viewWidth[0];\n    measurement.padding = padding;\n    setLabelRotationForAxes(context);\n\n    // Render layout\n    context.layout().renderGrid(mount);\n    renderLegend(layoutConfig, legend, legends, measurement);\n    renderHeader(layoutConfig, title, 'title', headers);\n    renderHeader(layoutConfig, subtitle, 'subtitle', headers);\n\n    shiftHeaders(layoutConfig, padding, measurement);\n};\n","import { TextCell } from '@chartshq/visual-cell';\nimport { escapeHTML } from 'muze-utils';\n\n/**\n *\n *\n * @param {*} rawContent\n * @returns\n */\nconst resolveTitleSubTitleContent = (rawContent) => {\n    if (typeof rawContent === 'function' && !rawContent._sanitize) {\n        return rawContent();\n    }\n    return escapeHTML(rawContent());\n};\n\n/**\n *\n *\n * @param {*} config\n * @param {*} cellType\n * @param {*} labelManager\n * @param {*} prevCell\n * @returns\n */\nconst headerCreator = (config, cellType, labelManager, prevCell) => {\n    const {\n        content\n    } = config;\n    const cell = prevCell || new TextCell({ type: cellType }, { labelManager });\n\n    cell.source(content);\n\n    return {\n        height: cell.getLogicalSpace().height,\n        cell\n    };\n};\n\n/**\n *\n *\n * @param {*} config\n * @param {*} type\n * @param {*} labelManager\n * @param {*} cell\n * @returns\n */\nconst createHeading = (config, type, labelManager, prevCell) => {\n    if (!config) { return ''; }\n\n    return headerCreator(\n        config,\n        type === 'title' ? 'header' : 'text',\n        labelManager,\n        prevCell\n    );\n};\n\n/**\n *\n *\n * @param {*} context\n */\nexport const createHeaders = (context, canvasHeight, canvasWidth) => {\n    let headerHeight = 0;\n    const headers = {};\n\n    canvasHeight > 200 && canvasWidth > 200 && ['title', 'subtitle'].forEach((type) => {\n        const headerOptions = context[type]();\n        const content = resolveTitleSubTitleContent(headerOptions[0]);\n        if (content.length) {\n            const config = headerOptions[1];\n\n            config.width = context.width();\n            config.content = content;\n\n            const { height, cell } = createHeading(config, type, context.dependencies().smartlabel,\n                context[`${type}Cell`]);\n\n            headers[`${type}Cell`] = cell;\n            headerHeight += height + config.padding;\n        }\n    });\n    return { headerHeight, headers };\n};\n\n","import { GradientLegend, DiscreteLegend, StepLegend } from '@chartshq/muze-legend';\n\n/**\n * Contants to be used as attr\n */\nexport const ROWS = 'rows';\nexport const COLUMNS = 'columns';\nexport const COLOR = 'color';\nexport const SHAPE = 'shape';\nexport const SIZE = 'size';\nexport const DETAIL = 'detail';\nexport const LAYERS = 'layers';\nexport const TRANSFORM = 'transform';\nexport const INITIALIZED = 'isInitialized';\nexport const SOURCE = 'source';\nexport const WIDTH = 'width';\nexport const HEIGHT = 'height';\nexport const PADDING = 'padding';\nexport const BORDER = 'border';\nexport const CONFIG = 'config';\nexport const MOUNT = 'mount';\nexport const CANVAS_UPDATED = 'canvasUpdated';\nexport const CLASSPREFIX = 'classPrefix';\nexport const POLICIES = '_policies';\nexport const LEGEND = 'legend';\nexport const TITLE = 'title';\nexport const SUB_TITLE = 'subtitle';\nexport const RESOLVE = 'resolve';\nexport const DISCRETE = 'discrete';\nexport const STEP_COLOR = 'step-color';\nexport const GRADIENT = 'gradient';\nexport const LINEAR = 'linear';\n\nexport const TITLE_TEMPLATE_NOT_ALLOWED_TAGS = [\n    'script',\n    'style'\n];\n\nexport const DEFAULT_CONFIG = {\n    classPrefix: 'muze',\n    interaction: {\n        sideEffect: 'individual'\n    },\n    legend: {\n        position: 'right',\n        color: {\n            show: true\n        },\n        shape: {\n            show: true\n        },\n        size: {\n            show: true\n        }\n    },\n    showHeaders: false,\n    minWidth: 300,\n    minHeight: 200,\n    border: {\n        style: 'solid',\n        color: '#d6d6d6',\n        width: 2,\n        collapse: true,\n        spacing: 0\n    },\n    groupBy: {\n        disabled: false\n    }\n};\n\nexport const LEGEND_TYPE_MAP = {\n    [DISCRETE]: DiscreteLegend,\n    [STEP_COLOR]: StepLegend,\n    [GRADIENT]: GradientLegend\n};\n\nexport const LEFT = 'left';\nexport const RIGHT = 'right';\nexport const BOTTOM = 'bottom';\nexport const TOP = 'top';\nexport const GROUP = 'group';\nexport const LAYOUT = 'layout';\nexport const RETINAL = 'retinal';\nexport const DIMENSION = 'dimension';\nexport const MEASURE = 'measure';\nexport const VERTICAL = 'vertical';\nexport const HORIZONTAL = 'horizontal';\n\n","import { cellRegistry, SimpleCell } from '@chartshq/visual-cell';\nimport { VisualUnit } from '@chartshq/visual-unit';\nimport { layerRegistry } from '@chartshq/visual-layer';\nimport { SimpleGroup, VisualGroup } from '@chartshq/visual-group';\n\nexport const COMPONENTS = {\n    VisualGroup,\n    VisualUnit\n};\nexport const SUBREGISTRIES = {\n    cellRegistry,\n    layerRegistry\n};\nexport const INTERFACES = {\n    SimpleGroup,\n    SimpleCell\n};\n\n","const Muze = require('./muze');\n\nmodule.exports = Muze.default ? Muze.default : Muze;\n","import Smartlabel from 'fusioncharts-smartlabel';\nimport {\n    transactor,\n    enableChainedTransaction,\n    LifeCycleManager,\n    DataModel,\n    makeElement,\n    getClientPoint,\n    getEvent,\n    require\n} from 'muze-utils';\nimport { SurrogateSideEffect, SpawnableSideEffect, sideEffects } from '@chartshq/muze-firebolt';\nimport { layerFactory } from '@chartshq/visual-layer';\nimport pkg from '../package.json';\nimport * as operators from './operators';\nimport { actionModel as ActionModel } from './action-model';\nimport options from './options';\nimport { Canvas } from './canvas';\nimport { COMPONENTS, SUBREGISTRIES } from './default-registry';\nimport './muze.scss';\n\n// Cache singleton instances which should be included only once in a page\nconst globalCache = {};\nconst defaultRegistry = COMPONENTS;\n\nconst overrideRegistryDefinitions = (overrideRegistry, registry) => {\n    for (const prop in overrideRegistry) {\n        registry.set(prop, overrideRegistry[prop]);\n    }\n};\n\n/**\n * Entry point to renderer. Initializes an environment with settings and registries for canvas. This is a simple wrapper\n * over {@link Canvas} which enables common configuration passing to multiple such canvases.\n *\n * Everytime `muze()` is called it creates an environment. These environment supports subset of APIs of Canvas. If\n * common configuration is used to render multiple canvases then it can be set directly in the env. Like if data is\n * common across all the visulization then its better to set the data in env. When a canvas is created it receives all\n * those configuration from env.\n *\n * ```\n *  // Creates an environment\n *  const env = muze()\n *  // Set data property in environment, so that all the canvas created from the same environment gets this data\n *  // automatically\n *  env.data(dm);\n *  // Creates canvas, by default env pushes data to canvas instance\n *  const canvas = env.canvas();\n * ```\n *\n * If a property is set on both environment and canvas instance, property set on canvas instance gets more priority.\n *\n * @public\n * @module muze\n * @namespace Muze\n *\n * @return {Env} Instance of an environment\n */\nconst muze = () => {\n    // Setters and getters will be mounted on this. Object will be mutated.\n    const [env, globalStore] = transactor({}, options);\n    const components = Object.assign({}, COMPONENTS);\n    const componentSubRegistryDef = Object.assign(SUBREGISTRIES);\n    const componentSubRegistry = {};\n\n    for (const prop in componentSubRegistryDef) {\n        componentSubRegistry[prop] = componentSubRegistryDef[prop]();\n    }\n\n    // Apart form the setter getter, an instance method is injected to create real renderer instances\n    env.canvas = () => {\n        // Create a canvas instance with this settings\n        const settings = globalStore.serialize();\n        const canvas = Canvas.withSettings(settings, { /* registry */\n            components,\n            componentSubRegistry\n        }, env.globalDependencies());\n\n        // Whenever settings is changed canvas is updated\n        enableChainedTransaction(globalStore, canvas, Object.keys(settings));\n\n        return canvas;\n    };\n\n    // Global dependencies for for compositions. Only one copy of the same should be in the page\n    env.globalDependencies = () => {\n        if (!globalCache.smartlabel) {\n            globalCache.smartlabel = new Smartlabel(1, 'body');\n        }\n        return {\n            smartlabel: globalCache.smartlabel,\n            lifeCycleManager: new LifeCycleManager()\n        };\n    };\n\n    // Retrieves global settings. This getter is readonly so that user can't change this as change should happen\n    // only from setter to avoid unwanted sync issues.\n    env.settings = () => globalStore.serialize();\n\n    env.registry = (...overrideRegistry) => {\n        // Selectively copy the properties from COMPONENTS\n        if (overrideRegistry.length) {\n            for (const prop in overrideRegistry) {\n                if (prop in defaultRegistry) {\n                    components[prop] = overrideRegistry[prop];\n                }\n            }\n            return env;\n        }\n        return components;\n    };\n\n    env.cellRegistry = (...overrideRegistry) => {\n        const cellRegistry = componentSubRegistry.cellRegistry;\n        if (overrideRegistry.length) {\n            overrideRegistryDefinitions(overrideRegistry[0], cellRegistry);\n            return env;\n        }\n        return cellRegistry.get();\n    };\n\n    env.layerRegistry = (...overrideRegistry) => {\n        const layerRegistry = componentSubRegistry.layerRegistry;\n        if (overrideRegistry.length) {\n            overrideRegistryDefinitions(overrideRegistry[0], layerRegistry);\n            return env;\n        }\n        return layerRegistry.get();\n    };\n\n    return env;\n};\n\nconst SideEffects = {\n    concrete: sideEffects,\n    abstract: {\n        SurrogateSideEffect,\n        SpawnableSideEffect\n    }\n};\n\nmuze.DataModel = DataModel;\nmuze.pkg = pkg;\nmuze.SideEffects = SideEffects;\nmuze.ActionModel = ActionModel;\nmuze.layerFactory = layerFactory;\nmuze.operators = operators;\nmuze.utils = {\n    getClientPoint,\n    getEvent,\n    makeElement,\n    require\n};\n\nexport default muze;\n","// extracted by mini-css-extract-plugin","import { ComposedVars, SimpleVariable } from '@chartshq/visual-group';\nimport { TITLE_TEMPLATE_NOT_ALLOWED_TAGS } from './constants';\n\n/**\n * This method creates a new composed variable instance from multiple variables.\n * @param {Array} vars Variable names\n * @return {ComposedVars} Instance of composed variable\n */\nexport const share = (...vars) => new ComposedVars(...vars.map(variable => new SimpleVariable(variable)));\n\n/**\n *\n *\n * @param {*} node\n * @returns\n */\nfunction treeShakeNode (node) {\n    if (node.nodeType !== Node.ELEMENT_NODE) { return; }\n\n    if (TITLE_TEMPLATE_NOT_ALLOWED_TAGS.indexOf(node.tagName.toLowerCase()) !== -1) {\n        node.parentNode.removeChild(node);\n    } else {\n        for (const childNode of node.childNodes) {\n            treeShakeNode(childNode);\n        }\n    }\n}\n\n/**\n * A string template tagged function which sanitizes input html formatted\n * string according to the allowed html tags.\n *\n * @param {Array.<string>} strings - The string parts of the template.\n * @param {Array} exps - The list of evaluated expression values.\n * @return {Function} Returns a function which returns the sanitized html string.\n */\nexport function html (strings, ...exps) {\n    let htmlCode = '';\n    const expLn = exps.length;\n    let i = 0;\n\n    for (; i < expLn; ++i) {\n        htmlCode += strings[i] + exps[i];\n    }\n    htmlCode += strings[i];\n\n    const frag = document.createDocumentFragment();\n    const wrapper = document.createElement('div');\n\n    frag.appendChild(wrapper);\n    wrapper.innerHTML = htmlCode;\n\n    treeShakeNode(wrapper);\n    const { innerHTML } = wrapper;\n\n    return () => innerHTML;\n}\n","/**\n * @module\n * This is the global options semantics based on which setters getters are created and reactivity is initiated.\n * Format\n *  PROPERTRY_NAME: {\n *      value: // default value of the property,\n *      meta: {\n *          typeCheck: // The setter value will be checked using this. If the value is function then the setter value\n *                     // is passed as args.\n *          typeExpected: // The output of typecheck action will be tested against this. Truthy value will set the\n *                       // value to the setter\n *          sanitizaiton: // Need for sanitization before type is checked\n *      }\n *  }\n */\n\nimport { intSanitizer, mergeRecursive } from 'muze-utils';\nimport { DEFAULT_CONFIG } from './constants';\n\nexport default {\n    data: {\n        value: null,\n        meta: {\n            typeCheck: 'constructor',\n            typeExpected: 'DataModel'\n        }\n    },\n    width: {\n        value: 0,\n        meta: {\n            sanitization: intSanitizer,\n            typeCheck: Number.isInteger\n        }\n    },\n    height: {\n        value: 0,\n        meta: {\n            sanitization: intSanitizer,\n            typeCheck: Number.isInteger\n        }\n    },\n    minUnitWidth: {\n        value: 150,\n        meta: {\n            sanitization: intSanitizer,\n            typeCheck: Number.isInteger\n        }\n    },\n    minUnitHeight: {\n        value: 150,\n        meta: {\n            sanitization: intSanitizer,\n            typeCheck: Number.isInteger\n        }\n    },\n    config: {\n        value: null,\n        meta: {\n            typeCheck: 'constructor',\n            typeExpected: 'Object',\n            sanitization: (config, oldConfig) => {\n                const defConfig = Object.assign(oldConfig || {}, DEFAULT_CONFIG);\n                return mergeRecursive(defConfig, config);\n            }\n\n        }\n    }\n};\n","import { ERROR_MSG } from 'muze-utils';\n/**\n * An Interface to be implemented if the transaction support is necessary. This class ensures reactivity to\n * global properties.\n */\nexport default class TransactionSupport {\n    /**\n     * Property accessor for data member of the class. Data is passed to the system by calling this method.\n     */\n    data () {\n        throw new Error(ERROR_MSG.INTERFACE_IMPl);\n    }\n\n    /**\n     * Property accessor for width of the class. Width is passed as an integer.\n     */\n    width () {\n        throw new Error(ERROR_MSG.INTERFACE_IMPl);\n    }\n\n    /**\n     * Property accessor for height of the class. Height is passed as an integer.\n     */\n    height () {\n        throw new Error(ERROR_MSG.INTERFACE_IMPl);\n    }\n\n    /**\n     * Property accessor for config of the class. Config is passed as an object.\n     */\n    config () {\n        throw new Error(ERROR_MSG.INTERFACE_IMPl);\n    }\n}\n","/**\n * @module Transform\n * This module exports constants that are used to reference transforms in\n * a consistent manner throughout the project.\n */\n/* eslint one-var: 0 */\n export const IDENTITY = 'identity';\n export const GROUP = 'group';\n export const STACK = 'stack';\n export const FRACTURE = 'fracture';\n","import { nestCollection } from 'muze-utils';\n\n/**\n * Create multiple datasets from a single dataset by grouping the data using\n * a dimensional field.\n * @param {Array} schema Name and type of fields are stored in schema\n * @param {Array} data Data array\n * @param {Object} config Configuration object\n * @return {Array} Grouped data array\n */\nexport default (schema, data, config) => {\n    const groupBy = config.groupBy instanceof Array ? config.groupBy : [config.groupBy];\n    const groupByIndices = groupBy.map(fieldName => schema.findIndex(d => d.name === fieldName));\n\n    if (groupByIndices.find(d => d === -1) !== undefined) {\n        throw new Error(`Groupby field ${groupBy} not found in schema`);\n    }\n\n    return nestCollection({\n        keys: groupByIndices,\n        data\n    });\n};\n","/**\n * @module Transform\n * This file exports a function that is used to implement\n * the identity transform\n */\n /* eslint no-unused-vars: 0 */\n /**\n  * This function accepts data and returns the data unchanged.\n  * @param {Object} schema The schema.\n  * @param {Array} data The data array.\n  * @param {Object} config The config object.\n  * @return {Array} The unchanged data.\n  */\n function identityTransform (schema, data, config) {\n     return data;\n }\n\n export default identityTransform;\n","import stackTransform from './stack-transform';\nimport groupTransform from './group-transform';\nimport identityTransform from './identity-transform';\nimport transformFactory from './transform-factory';\n\nexport {\n    identityTransform,\n    stackTransform,\n    groupTransform,\n    transformFactory\n};\n\nexport default { version: '1.0.0' };\n","import { stack } from 'muze-utils';\n\nimport group from '../group-transform';\n/*\n    Normalize the data to a form which can be given to d3 stack for stacking the data\n    ['Product', 'Sales', 'Region'],\n    0 ['A', 2000, 'North'],\n    1 ['A', 3000, 'South'],\n    2 ['B', 3000, 'South'],\n    3 ['B', 2000, 'North'],\n    4 ['C', 3000, 'South'],\n    5 ['C', 2000, 'North']\n            |\n            |\n    ['Product', 'North', 'South'],\n    ['A', 2000, 3000],\n    ['B', 2000, 3000],\n    ['C', 2000, 3000]\n*/\n// eslint-disable-next-line require-jsdoc\nconst normalizeData = (data, schema, valueField, uniqueField, groupBy) => {\n    const groupedData = group(schema, data, {\n        groupBy: uniqueField\n    });\n    const uniqueFieldIndex = schema.findIndex(d => d.name === uniqueField);\n    const valueFieldIndex = schema.findIndex(d => d.name === valueField);\n    const seriesKeyIndex = schema.findIndex(d => d.name === groupBy);\n    const seriesKeys = data.map(d => d[seriesKeyIndex]).filter((item, pos, arr) => arr.indexOf(item) === pos).sort();\n    const fieldNames = schema.reduce((acc, obj, i) => {\n        acc[i] = obj.name;\n        return acc;\n    }, {});\n    const dataArr = groupedData.map((arr) => {\n        const tuples = {};\n        const rowObj = arr.values.reduce((acc, row) => {\n            acc = row.reduce((obj, value, i) => {\n                if (i === seriesKeyIndex) {\n                    obj[value] = row[valueFieldIndex];\n                    tuples[value] = row;\n                } else if (i !== valueFieldIndex) {\n                    obj[fieldNames[i]] = value;\n                }\n                return obj;\n            }, acc);\n            return acc;\n        }, {});\n        rowObj._tuple = tuples;\n            // Set missing values field to zero value\n        seriesKeys.forEach((seriesKey) => {\n            if (rowObj[seriesKey] === undefined) {\n                rowObj[seriesKey] = 0;\n                const newArr = new Array(arr.values[0].length);\n                newArr[uniqueFieldIndex] = arr.key;\n                newArr[seriesKeyIndex] = seriesKey;\n                rowObj._tuple[seriesKey] = newArr;\n            }\n        });\n        return rowObj;\n    });\n\n    return {\n        data: dataArr,\n        keys: seriesKeys\n    };\n};\n/**\n * Generate a stacked representation of data\n * @param {Array} schema schema Array\n * @param {Array} data data array\n * @param {Object} config Configuration object\n * @return {Array} stacked data\n */\nexport default (schema, data, config) => {\n    const uniqueField = config.uniqueField;\n    const valueField = config.value;\n    const groupBy = config.groupBy;\n    const sort = config.sort || 'descending';\n    const normalizedData = normalizeData(data, schema, valueField, uniqueField, groupBy);\n    const stackData = stack({\n        keys: normalizedData.keys,\n        offset: config.offset || 'diverging',\n        order: sort,\n        data: normalizedData.data\n    });\n    stackData.forEach((seriesData) => {\n        seriesData.forEach((dataObj) => {\n            dataObj.data = dataObj.data._tuple[seriesData.key];\n        });\n    });\n    return stackData;\n};\n\n","/**\n * @module Transform\n * This file exports the transform factory.\n */\nimport * as TransformType from '../enums/transform-type';\nimport identity from '../identity-transform';\nimport group from '../group-transform';\nimport stack from '../stack-transform';\n\n/* istanbul ignore next */\nconst transformMap = {\n    [TransformType.IDENTITY]: identity,\n    [TransformType.GROUP]: group,\n    [TransformType.STACK]: stack\n};\n\n/**\n * This function is used to retirn a transform associated\n * with the given type.\n *\n * @param {string} type The type of the transform.\n * @return {Function} The transform function.\n */\nfunction transformFactory (type) {\n    const transform = transformMap[type];\n    if (typeof transform !== 'function') {\n        throw new Error('Invalid transform type supplied.');\n    }\n    return transform;\n}\n\nexport default transformFactory;\n","/**\n * This file declares a class that represents a table cell\n * used to house an axis.\n * @module VisualCell\n */\nimport { selectElement, makeElement, generateGetterSetters } from 'muze-utils';\nimport { CLASSPREFIX, HEIGHT, WIDTH, AXIS_CELL } from './enums/constants';\nimport SimpleCell from './simple-cell';\nimport { DEFAULT_CONFIG } from './enums/defaults';\nimport { AXIS } from './enums/cell-type';\nimport { PROPS } from './props';\n\n/**\n * Computes the logical space of the an axis instance within an axis cell\n *\n * @param {Object} context Required to get the needed parameters to compute axis space\n * @return {Object} Returns the logical space for axis\n */\nconst computeAxisSpace = (context) => {\n    let logicalWidth;\n    let logicalHeight;\n    const axis = context.source();\n    const {\n        spaceFixer,\n        margin\n    } = context.config();\n    const {\n        width,\n        height\n    } = axis.getLogicalSpace();\n    const {\n            show\n        } = axis.config();\n    if (show === true) {\n        logicalHeight = Math.floor(height + margin.top + margin.bottom + spaceFixer);\n        logicalWidth = Math.floor(width + margin.left + margin.right + spaceFixer);\n    } else {\n        [logicalWidth, logicalHeight] = [width, height];\n    }\n    return {\n        width: logicalWidth,\n        height: logicalHeight\n    };\n};\n\n/**\n * Represents an axis cell.\n *\n * @class Axis\n */\nclass AxisCell extends SimpleCell {\n\n    /**\n     * Creates an instance of AxisCell.\n     *\n     * @param {Object} config The input config.\n     * @memberof AxisCell\n     */\n    constructor (config) {\n        super(config);\n\n        this._axis = null;\n        this._availHeight = null;\n        this._availWidth = null;\n        this._logicalSpace = null;\n\n        generateGetterSetters(this, PROPS[AXIS]);\n    }\n\n    /**\n     * return the type pf SimpleCell cell.\n     *\n     * @readonly\n     * @memberof AxisCell\n     */\n    get type () {\n        return AXIS;\n    }\n\n    /**\n     * This method return the value conatined by this SimpleCell.\n     *\n     * @return {SimpleAxis | ColorAxis} Instance of SimpleAxis or ColorAxis.\n     * @memberof AxisCell\n     */\n    valueOf () {\n        return this.source().id;\n    }\n\n    /**\n     * This method return the unique identififer of the axis\n     *\n     * @return {string} Id of the axis.\n     * @memberof AxisCell\n     */\n    get id () {\n        return this._id;\n    }\n\n    /**\n     * Retrns the serialized representation of this cell.\n     *\n     * @return {Object}Object with serializable props.\n     * @memberof AxisCell\n     */\n    serialize () {\n        return {\n            type: AXIS,\n            axis: this.source().serialize()\n        };\n    }\n\n    /**\n     * return the default configuration for the text cell\n     *\n     * @static\n     * @return {Object} Default configuration of the cell\n     * @memberof AxisCell\n     */\n    static defaultConfig () {\n        return DEFAULT_CONFIG;\n    }\n\n    /**\n     * return the space taken up by an axis element in the dom.\n     *\n     * @return {Object} Object with width and height fields.\n     * @memberof AxisCell\n     */\n    getLogicalSpace () {\n        if (!this.logicalSpace()) {\n            this.logicalSpace(computeAxisSpace(this));\n        }\n        return this.logicalSpace();\n    }\n\n    /**\n     * This method is used to set the space availiable to render\n     * the SimpleCell.\n     *\n     * @param {number} width The width of SimpleCell.\n     * @param {number} height The height of SimpleCell.\n     * @return {Instance} Returns current Instance\n     * @memberof AxisCell\n     */\n    setAvailableSpace (width, height) {\n        this.availWidth(width);\n        this.availHeight(height);\n        const {\n            margin,\n            isOffset\n        } = this.config();\n        this.source().setAvailableSpace(width, height, margin, isOffset);\n        this.logicalSpace(null);\n        this.source().logicalSpace(null);\n        return this;\n    }\n\n    /**\n     * This method is used to render the axis inside the axis cell.\n     *\n     * @param {HTMLElement} mount The mount point.\n     * @return {Selection} node where axis mounted\n     * @memberof AxisCell\n     */\n    /* istanbul ignore next */render (mount) {\n        if (!mount) {\n            return this;\n        }\n        const axis = this.source();\n        const availHeight = this.availHeight();\n        const availWidth = this.availWidth();\n        const {\n            margin\n        } = this.config();\n        const {\n            top,\n            bottom,\n            left,\n            right\n        } = margin;\n        const {\n            show\n        } = axis.config();\n        const wrapperDiv = makeElement(selectElement(mount), 'div', [this], `${CLASSPREFIX}-${AXIS_CELL}`);\n        const selection = makeElement(wrapperDiv, 'svg', [1], `${CLASSPREFIX}-axis-container`);\n\n        this.mount(mount);\n        if (availWidth === 0 || !availWidth) {\n            selection.attr(WIDTH, `${0}px`);\n        }\n        if (availHeight === 0 || !availHeight) {\n            selection.attr(HEIGHT, `${0}px`);\n        }\n        wrapperDiv.style(WIDTH, `${show ? availWidth : 0}px`)\n                        .style(HEIGHT, `${show ? availHeight : 0}px`)\n                        .style('margin-top', top)\n                        .style('margin-bottom', bottom)\n                        .style('margin-left', left)\n                        .style('margin-right', right);\n\n        axis.mount(selection.node());\n        return selection;\n    }\n\n    /**\n     * Disposes the cell\n     *\n     * @return {Instance} Current instance of AxisCell\n     * @memberof AxisCell\n     */\n    remove () {\n        this.source() && this.source().remove();\n        this.mount() && this.mount().remove();\n        return this;\n    }\n}\n\nexport default AxisCell;\n\n","/**\n * This file declares a class that represents a BLANK element in a  table.\n * @module VisualCell\n */\nimport {\n    selectElement,\n    makeElement,\n    applyStyle,\n    generateGetterSetters\n    } from 'muze-utils';\nimport SimpleCell from './simple-cell';\nimport { CLASSPREFIX, BLANK_CELL } from './enums/constants';\nimport { BLANK } from './enums/cell-type';\nimport { DEFAULT_CONFIG } from './enums/defaults';\nimport { PROPS } from './props';\n\n/**\n * Represents a table haeder.\n *\n * @class BLANK\n */\nclass BlankCell extends SimpleCell {\n\n    /**\n     * Creates an instance of BLANK.\n     * @param {Object} config The input configuration.\n     * @memberof BLANK\n     */\n    constructor (config) {\n        super(config);\n\n        generateGetterSetters(this, PROPS[BLANK]);\n    }\n\n    /**\n     * return the type pf SimpleCell cell.\n     *\n     * @readonly\n     * @memberof BlankCell\n     */\n    get type () {\n        return BLANK;\n    }\n\n    /**\n     * This method return the value contained by this SimpleCell.\n     *\n     * @return {string} The text value contained by this cell.\n     * @memberof BlankCell\n     */\n    valueOf () {\n        return this.id;\n    }\n\n    /**\n     * return the default configuration for the text cell\n     *\n     * @static\n     * @return {Object} Default configuration of the cell\n     * @memberof BlankCell\n     */\n    static defaultConfig () {\n        return DEFAULT_CONFIG;\n    }\n\n    /**\n     * This method is used to return a unique identifier for\n     * the BLANK cell.\n     *\n     * @return {string} The unique identifier for the BLANK.\n     * @memberof BlankCell\n     */\n    get id () {\n        return this._id;\n    }\n\n    /**\n     * This method is used to obtain a serialized representation of this instance.\n     *\n     * @return {Object} Object with serilizable props.\n     * @memberof BLANK\n     */\n    serialize () {\n        return {\n            type: BLANK\n        };\n    }\n\n    /**\n     * This method return the space taken up\n     * by the text with the style applied.\n     *\n     * @return {Object} width and height taken up by the text.\n     * @memberof BLANK\n     */\n    getLogicalSpace () {\n        const {\n            spaceFixer\n        } = this.config();\n        if (!this.logicalSpace()) {\n            return {\n                width: this.width || spaceFixer,\n                height: this.height || spaceFixer\n            };\n        }\n        return this.logicalSpace();\n    }\n\n    /**\n     * This method is used to set the available space.\n     *\n     * @param {number} width The available width.\n     * @param {number} height The available height.\n     * @return {Instance} Returns current Instance\n     * @memberof BlankCell\n     */\n    setAvailableSpace (width, height) {\n        this.availWidth(width);\n        this.availHeight(height);\n        this.logicalSpace(null);\n        return this;\n    }\n\n    /**\n     * This method is used to render the BLANK cell inside\n     * the provided mount point.\n     *\n     * @param {HTMLElement} mount The mount point for this cell.\n     * @return {Instance} Returns current Instance\n     * @memberof BLANK\n     */\n    /* istanbul ignore next */render (mount) {\n        if (mount) {\n            const { style } = this.config();\n            // append span element to mount point\n            this.mount(mount);\n            const container = selectElement(mount);\n            const elem = makeElement(container, 'div', [this.id]);\n            elem.classed(`${CLASSPREFIX}-${BLANK_CELL}`, true);\n            elem.style('width', `${this.availWidth()}px`);\n            elem.style('height', `${this.availHeight()}px`);\n            elem.html('');\n            // apply style on the returned element\n            if (style) {\n                applyStyle(elem, style);\n            }\n        } return this;\n    }\n\n    /**\n     * Removes the cell(Disposal)\n     *\n     * @return {Instance} Returns current Instance\n     * @memberof BlankCell\n     */\n    remove () {\n        this.mount() && this.mount().remove();\n        return this;\n    }\n }\nexport default BlankCell;\n","import { DEFAULT_PLACEHOLDERS } from './defaults';\n\n/**\n * Creates a registry for the cells, which can be used for\n * setting a new cell or getting the registered cells\n *\n * @return {Object} Setters and getters for registered cells\n */\nconst cellRegistry = () => {\n    const reg = DEFAULT_PLACEHOLDERS;\n    return {\n        set: (key, def) => {\n            if (key in reg) {\n                reg[key] = def;\n            }\n            return cellRegistry;\n        },\n        get: () => reg\n    };\n};\nexport default cellRegistry;\n","export const SIMPLE_CELL = 'SimpleCell';\nexport const TEXT_CELL = 'TextCell';\nexport const AXIS_CELL = 'AxisCell';\nexport const BLANK_CELL = 'BlankCell';\nexport const GEOM_CELL = 'GeomCell';\n\n","import AxisCell from './axis-cell';\nimport BlankCell from './blank-cell';\nimport TextCell from './text-cell';\nimport GeomCell from './geom-cell';\nimport SimpleCell from './simple-cell';\n\nimport * as CONSTANTS from './constants';\n\nexport const DEFAULT_PLACEHOLDERS = {\n    [CONSTANTS.SIMPLE_CELL]: SimpleCell,\n    [CONSTANTS.TEXT_CELL]: TextCell,\n    [CONSTANTS.AXIS_CELL]: AxisCell,\n    [CONSTANTS.GEOM_CELL]: GeomCell,\n    [CONSTANTS.BLANK_CELL]: BlankCell\n};\n\n","// eneum to refer to simple cell\nexport const SIMPLE = 'simple';\n// eneum to refer to header cell\nexport const TEXT = 'text';\n// enum to refer to axis cell\nexport const AXIS = 'axis';\n// enum to refer to visual cell\nexport const GEOM = 'geom';\n// enum to refer blank cell\nexport const BLANK = 'blank';\n","/**\n * Flag to specify whether direction is vertical.\n */\nexport const MARGIN = 'margin';\nexport const LEFT = 'left';\nexport const RIGHT = 'right';\nexport const BOTTOM = 'bottom';\nexport const TOP = 'top';\nexport const SPACE_FIXER = 'spaceFixer';\nexport const CLASSPREFIX = 'muze';\nexport const VERTICAL_ALIGN = 'verticalAlign';\nexport const TEXT_ALIGN = 'textAlign';\nexport const IS_OFFSET = 'isOffset';\nexport const MIDDLE = 'middle';\nexport const BASELINE = 'baseline';\nexport const SHOW = 'show';\nexport const CENTER = 'center';\nexport const TEXT = 'text';\nexport const HEADER = 'header';\nexport const HEIGHT = 'height';\nexport const WIDTH = 'width';\nexport const DATA = 'data';\nexport const AXES = 'axes';\nexport const FACET_BY_FIELDS = 'facetByFields';\nexport const FIELDS = 'fields';\nexport const TRANSFORM = 'transform';\nexport const LAYER_DEF = 'layerDef';\nexport const CONFIG = 'config';\n\nexport const TEXT_CELL = 'text-cell';\nexport const AXIS_CELL = 'axis-cell';\nexport const GEOM_CELL = 'geom-cell';\nexport const BLANK_CELL = 'blank-cell';\n","/**\n * This file exports variables that are used as defaults for\n * the placeholders\n */\nimport * as CONSTANTS from './constants';\n\n /**\n * Default Configuration for the cells\n * @return {Object} Default configuration\n */\nexport const DEFAULT_CONFIG = {\n    [CONSTANTS.MARGIN]: {\n        [CONSTANTS.LEFT]: 0,\n        [CONSTANTS.RIGHT]: 0,\n        [CONSTANTS.TOP]: 0,\n        [CONSTANTS.BOTTOM]: 0\n    },\n    [CONSTANTS.SPACE_FIXER]: 2,\n    [CONSTANTS.IS_OFFSET]: false,\n    [CONSTANTS.VERTICAL_ALIGN]: CONSTANTS.TOP,\n    [CONSTANTS.TEXT_ALIGN]: CONSTANTS.CENTER,\n    [CONSTANTS.SHOW]: true\n};\n","/**\n * This file declares a class that is used to represent a table cell\n * that houses a visual unit.\n * @module VisualCell\n */\n\nimport { selectElement, makeElement, generateGetterSetters } from 'muze-utils';\nimport SimpleCell from './simple-cell';\nimport { GEOM } from './enums/cell-type';\nimport { PROPS } from './props';\nimport {\n    CLASSPREFIX, HEIGHT, WIDTH, DATA, AXES, FACET_BY_FIELDS, FIELDS, TRANSFORM, LAYER_DEF, CONFIG, GEOM_CELL\n} from './enums/constants';\nimport { DEFAULT_CONFIG } from './enums/defaults';\n\n/**\n * Calculates the logical space of the cell\n *\n * @param {Object} context Required to get the needed parameters to compute unit space\n * @return {Object} Logical space taken up by the unit\n * @memberof GeomCell\n */\nconst computeGeomSpace = (context) => {\n    const config = context.source().config();\n    const { width, height } = config;\n    return {\n        width: Math.ceil(width),\n        height: Math.ceil(height + context.getCaptionSpace().height)\n    };\n};\n\n /**\n * This class represents a SimpleCell for visual unit.\n *\n * @class GeomCell\n */\nclass GeomCell extends SimpleCell {\n\n    /**\n     * Creates an instance of GeomCell.\n     * @param {Object} config The input configuration.\n     * @memberof GeomCell\n     */\n    constructor (config) {\n        super(config);\n\n        this._unit = null;\n        this._layers = null;\n        this._axes = {};\n        this._datamodel = {};\n        this._facetByFields = {};\n        this._fields = null;\n        this._transform = null;\n        this._caption = null;\n\n        generateGetterSetters(this, PROPS[GEOM]);\n    }\n\n    /**\n     * return the type pf SimpleCell cell.\n     *\n     * @readonly\n     * @memberof GeomCell\n     */\n    get type () {\n        return GEOM;\n    }\n\n    /**\n     * This method return the value contained by this cell.\n     *\n     * @return {VisualUnit} Instance of visual unit contained by visual unit.\n     * @memberof GeomCell\n     */\n    valueOf () {\n        return this.source();\n    }\n\n    /**\n     * This method is used to return the id of the\n     * visual unit housed by this cell.\n     *\n     * @return {string} The unique id of the visual unit.\n     * @memberof GeomCell\n     */\n    get id () {\n        return this.source().id();\n    }\n\n    /**\n     * This method return a serialized representation of\n     * this instance.\n     *\n     * @return {Object} Object with serializable props.\n     * @memberof GeomCell\n     */\n    serialize () {\n        return {\n            type: GEOM,\n            unit: this.source().serialize(),\n            caption: this.caption()\n        };\n    }\n\n    /**\n     * return the default configuration for the geom cell\n     *\n     * @static\n     * @return {Object} Default configuration of the cell\n     * @memberof GeomCell\n     */\n    static defaultConfig () {\n        return DEFAULT_CONFIG;\n    }\n\n    /**\n     * Updates the model based on the changed parameters\n     *\n     * @return {Instance} return instance\n     * @memberof GeomCell\n     */\n    updateModel () {\n        const unit = this.source();\n        unit.lockModel();\n        [DATA, AXES, FACET_BY_FIELDS, FIELDS, TRANSFORM, LAYER_DEF, CONFIG].forEach((prop) => {\n            this[prop]() && unit[prop](this[prop]());\n        });\n        unit.unlockModel();\n        return this;\n    }\n\n    /**\n     * It gives the space taken by the caption of the unit\n     *\n     * @return {Object} return the space taken by caption\n     * @memberof GeomCell\n     */\n    getCaptionSpace () {\n        const caption = this.caption();\n\n        let captionSpace = { width: 0, height: 0 };\n        if (caption) {\n            captionSpace = caption.getLogicalSpace();\n        }\n        return captionSpace;\n    }\n\n    /**\n     * return the space taken up by the element in the dom.\n     *\n     * @return {Object} Object with width and height fields.\n     * @memberof GeomCell\n     */\n    getLogicalSpace () {\n        if (!this.logicalSpace()) {\n            this.logicalSpace(computeGeomSpace(this));\n        }\n        return this.logicalSpace();\n    }\n\n    /**\n     * This method is used to set the space available to\n     * render the SimpleCell.\n     *\n     * @param {number} width The available width.\n     * @param {number} height The available height.\n     * @return {Instance} Returns current Instance\n     * @memberof GeomCell\n     */\n    setAvailableSpace (width, height) {\n        const unit = this.source();\n\n        this.availWidth(width);\n        this.availHeight(height);\n        unit.lockModel();\n        unit.width(width).height(height - this.getCaptionSpace().height);\n        unit.unlockModel();\n        this.logicalSpace(null);\n        return this;\n    }\n\n    /**\n     * his method is used to render the visual unit inside the provided cell.\n     *\n     * @param {HTMLElement} mount The mountpoint in the table.\n     * @return {Instance} Returns current Instance\n     * @memberof GeomCell\n     */\n    render (mount) {\n        if (mount) {\n            this.mount(mount);\n            const availHeight = this.availHeight();\n            const availWidth = this.availWidth();\n            const caption = this.caption();\n            const wrapperDiv = makeElement(selectElement(mount), 'div', [1], `${CLASSPREFIX}-${GEOM_CELL}`);\n\n            if (caption) {\n                const captionDom = makeElement(wrapperDiv, 'div', [caption], `${CLASSPREFIX}-unit-caption`).node();\n                caption.render(captionDom);\n            }\n            const selection = makeElement(wrapperDiv, 'div', [1], `${CLASSPREFIX}-unit`);\n            wrapperDiv.style(WIDTH, `${availWidth}px`).style(HEIGHT, `${availHeight}px`);\n            selection.style(WIDTH, `${availWidth}px`)\n                            .style(HEIGHT, `${availHeight - this.getCaptionSpace().height}px`);\n            this.source().mount(selection.node());\n        }\n        return this;\n    }\n\n    /**\n     * Disposes the cell\n     *\n     * @return {Object} Current instance\n     * @memberof GeomCell\n     */\n    remove () {\n        this.mount() && this.mount().remove();\n        this.source().remove();\n        return this;\n    }\n}\n\nexport default GeomCell;\n","import AxisCell from './axis-cell';\nimport BlankCell from './blank-cell';\nimport TextCell from './text-cell';\nimport GeomCell from './geom-cell';\nimport SimpleCell from './simple-cell';\nimport cellRegistry from './cell-registry';\n\nexport {\n    AxisCell,\n    BlankCell,\n    TextCell,\n    GeomCell,\n    SimpleCell,\n    cellRegistry\n};\n","import { mergeRecursive } from 'muze-utils';\nimport { GEOM, TEXT, AXIS, BLANK } from './enums/cell-type';\n\nconst DEFAULT_PROPS = {\n    mount: {},\n    availHeight: {},\n    availWidth: {},\n    config: {\n        sanitization: (context, value) => mergeRecursive(context._config, value)\n    },\n    logicalSpace: {},\n    source: {}\n};\n\nconst geomProps = {\n    data: {},\n    caption: {},\n    config: {},\n    axes: {\n        sanitization: (context, value) => Object.assign(context._axes, value)\n    },\n    facetByFields: {},\n    fields: {},\n    transform: {},\n    layerDef: {}\n};\n\nexport const PROPS = {\n    [TEXT]: DEFAULT_PROPS,\n    [GEOM]: mergeRecursive(geomProps, DEFAULT_PROPS),\n    [AXIS]: DEFAULT_PROPS,\n    [BLANK]: DEFAULT_PROPS\n};\n","import {\n    ERROR_MSG,\n    getUniqueId,\n    mergeRecursive\n} from 'muze-utils';\nimport { SIMPLE } from './enums/cell-type';\n\n/**\n * This file declares a class that is used as an interface to create new\n * SimpleCell elements.\n * @module SimpleCell\n */\n/**\n * Base class for all table cells.\n *\n * @interface\n * @class SimpleCell\n */\nclass SimpleCell {\n\n    /**\n     * Creates an instance of SimpleCell.\n     *\n     * @param {*} config The input configuration.\n     * @memberof SimpleCell\n     */\n    constructor (config) {\n        this._id = getUniqueId();\n\n        const defConfig = mergeRecursive({}, this.constructor.defaultConfig());\n        this._config = mergeRecursive(defConfig, config || {});\n\n        this._mount = null;\n    }\n\n    /**\n     * Returns the type of the placehlder.\n     *\n     * @readonly\n     * @memberof SimpleCell\n     */\n    get type () {\n        return SIMPLE;\n    }\n\n    /**\n     * Returns the type of the placehlder.\n     *\n     * @readonly\n     * @memberof SimpleCell\n     * @return {Object} Default config for the placeholder\n     */\n    static defaultConfig () {\n        return {};\n    }\n\n    /**\n     * Returns the value contained by the SimpleCell.\n     *\n     * @memberof SimpleCell\n     */\n    valueOf () {\n        throw new Error(ERROR_MSG.INTERFACE_IMPL);\n    }\n\n    /**\n     * Returns a unique identifier for the instance used\n     * to control selective rendering.\n     *\n     * @memberof SimpleCell\n     */\n    id () {\n        throw new Error(ERROR_MSG.INTERFACE_IMPL);\n    }\n\n    /**\n     * Returns a serialized representation of the instance.\n     *\n     * @memberof SimpleCell\n     */\n    serialize () {\n        throw new Error(ERROR_MSG.INTERFACE_IMPL);\n    }\n\n    /**\n     * Returns an object with width and height fields\n     * specifying the space taken up by this metod.\n     *\n     * @memberof SimpleCell\n     */\n    getLogicalSpace () {\n        throw new Error(ERROR_MSG.INTERFACE_IMPL);\n    }\n\n    /**\n     * Method used to set the space available to render the SimpleCell\n     *\n     * @param {number} width The available width.\n     * @param {number} height The available height.\n     * @memberof SimpleCell\n     */\n    setAvailableSpace () {\n        throw new Error(ERROR_MSG.INTERFACE_IMPL);\n    }\n\n    /**\n     * Render the SimpleCell inthe supplied mount point.\n     *\n     * @param {HTMLElement} mount The mount point to render in.\n     * @memberof SimpleCell\n     */\n    render () {\n        throw new Error(ERROR_MSG.INTERFACE_IMPL);\n    }\n\n    /**\n     * Render the SimpleCell inthe supplied mount point.\n     *\n     * @param {HTMLElement} mount The mount point to render in.\n     * @memberof SimpleCell\n     */\n    remove () {\n        throw new Error(ERROR_MSG.INTERFACE_IMPL);\n    }\n\n}\n\nexport default SimpleCell;\n","/**\n * This file declares a class that represents a Text element in a  table.\n * @module VisualCell\n */\n\nimport {\n    selectElement,\n    makeElement,\n    getSmartComputedStyle,\n    generateGetterSetters\n} from 'muze-utils';\nimport SimpleCell from './simple-cell';\nimport { TEXT } from './enums/cell-type';\nimport { PROPS } from './props';\nimport { DEFAULT_CONFIG } from './enums/defaults';\nimport { CLASSPREFIX, TOP, BOTTOM, LEFT, RIGHT, HEADER, WIDTH, TEXT_CELL } from './enums/constants';\nimport './text-cell.scss';\n\n/**\n* Computes the Logical Space for the text\n*\n* @param {Object} context Required to get the needed parameters to compute text space\n* @return {Object} Logical space taken up by text\n* @memberof TextCell\n*/\nconst computeTextSpace = (context) => {\n    const { labelManager } = context.dependencies();\n    const space = labelManager.getOriSize(context.source());\n    const {\n       margin,\n        show\n   } = context.config();\n\n    labelManager.setStyle(context._computedStyle);\n    if (show) {\n        return {\n            width: space.width + margin.left + margin.right + context._minTickDiff.width,\n            height: space.height + margin.top + margin.bottom + context._minTickDiff.height\n        };\n    } return {\n        width: 0,\n        height: 0\n    };\n};\n\n/**\n * Represents a table haeder.\n *\n * @class Text\n */\nclass TextCell extends SimpleCell {\n\n    /**\n     * Creates an instance of Text.\n     * @param {Object} config The input configuration.\n     * @param {string} dependencies Dependencies for the class(labelManager)\n     * @memberof Text\n     */\n    constructor (config, dependencies) {\n        super(config);\n\n        this._dependencies = dependencies;\n        this._className = this._config.className ||\n                    (this._config.type === HEADER ? `${CLASSPREFIX}-${HEADER}-cell` : `${CLASSPREFIX}-${TEXT}-cell`);\n        this._computedStyle = getSmartComputedStyle(selectElement('body'), this._className);\n        this._dependencies.labelManager.setStyle(this._computedStyle);\n        this._minTickDiff = this._dependencies.labelManager.getOriSize('WW');\n\n        generateGetterSetters(this, PROPS[TEXT]);\n    }\n\n    /**\n     * return the type pf SimpleCell cell.\n     *\n     * @readonly\n     * @memberof TextCell\n     */\n    get type () {\n        return TEXT;\n    }\n\n    /**\n     * This method return the value contained by this SimpleCell.\n     *\n     * @return {string} The text value contained by this cell.\n     * @memberof TextCell\n     */\n    valueOf () {\n        return this.source();\n    }\n\n    /**\n     * This method is used to return a unique identifier for\n     * the Text cell.\n     *\n     * @return {string} The unique identifier for the Text.\n     * @memberof TextCell\n     */\n    get id () {\n        return this._id;\n    }\n\n    /**\n     * Returns the dependencies of the instance\n     *\n     * @return {Object} Dependencies needed by the class\n     * @memberof TextCell\n     */\n    dependencies () {\n        return this._dependencies;\n    }\n\n    /**\n     * This method is used to obtain a serialized representation of this instance.\n     *\n     * @return {Object} Object with serilizable props.\n     * @memberof TextCell\n     */\n    serialize () {\n        return {\n            text: this.source(),\n            type: TEXT\n        };\n    }\n\n    /**\n     * return the default configuration for the text cell\n     *\n     * @static\n     * @return {Object} Default configuration of the cell\n     * @memberof TextCell\n     */\n    static defaultConfig () {\n        return DEFAULT_CONFIG;\n    }\n\n    /**\n     * This method return the space taken up\n     * by the text with the style applied.\n     *\n     * @return {Object} width and height taken up by the text.\n     * @memberof Text\n     */\n    getLogicalSpace () {\n        if (!this.logicalSpace()) {\n            this.logicalSpace(computeTextSpace(this));\n        }\n        return this.logicalSpace();\n    }\n\n    /**\n     * This method is used to set the available space.\n     *\n     * @param {number} width The available width.\n     * @param {number} height The available height.\n     * @return {Instance} Returns current Instance\n     * @memberof TextCell\n     */\n    setAvailableSpace (width, height) {\n        this.availWidth(width);\n        this.availHeight(height);\n        this.logicalSpace(null);\n        return this;\n    }\n\n    /**\n     * This method is used to render the Text cell inside\n     * the provided mount point.\n     *\n     * @param {HTMLElement} mount The mount point for this cell.\n     * @return {Instance} Returns current Instance\n     * @memberof Text\n     */\n    render (mount) {\n        const availWidth = this.availWidth();\n        const {\n            margin,\n            show,\n            verticalAlign,\n            textAlign\n        } = this.config();\n\n        this.mount(mount);\n        if (show) {\n            const container = selectElement(mount);\n            const elem = makeElement(container, 'div', [this.id], `${CLASSPREFIX}-${TEXT_CELL}`);\n\n            container.style('vertical-align', verticalAlign);\n            elem.classed(this._className, true);\n            // apply style on the returned element\n            elem.style(WIDTH, availWidth ? `${availWidth}px` : '100%');\n            [TOP, BOTTOM, LEFT, RIGHT].forEach((type) => {\n                elem.style(`padding-${type}`, `${margin[type]}px`);\n            });\n            elem.style('text-align', textAlign);\n            elem.style('display', 'inline');\n            // set the text as the innerHTML\n            elem.html(this.source());\n        }\n        return this;\n    }\n\n    /**\n     * Disposes the cell\n     *\n     * @return {Instance} Returns current Instance\n     * @memberof TextCell\n     */\n    remove () {\n        this.mount() && this.mount().remove();\n        return this;\n    }\n }\n\nexport default TextCell;\n","// extracted by mini-css-extract-plugin","import { ScaleType } from '@chartshq/muze-axis';\n\n/**\n * Map of DataModel types to associated field types.\n */\nexport const dataTypeScaleMap = {\n    dimension: ScaleType.BAND,\n    categorical: ScaleType.BAND,\n    measure: ScaleType.LINEAR,\n    temporal: ScaleType.TIME\n};\n\n","import { layerFactory } from '@chartshq/visual-layer';\nimport { mergeRecursive } from 'muze-utils';\nimport { generateAxisFromMap, getDefaultMark, getIndex, getLayerConfFromFields } from './encoder-helper';\nimport { retriveDomainFromData } from '../group-helper';\n\nimport { ROW, COLUMN, COL, LEFT, TOP, CARTESIAN, MEASURE, BOTH, X, Y } from '../enums/constants';\nimport VisualEncoder from './visual-encoder';\n\n/**\n *\n *\n * @export\n * @class CartesianEncoder\n * @extends {VisualEncoder}\n */\nexport default class CartesianEncoder extends VisualEncoder {\n\n    /**\n     *\n     *\n     * @return\n     * @memberof CartesianEncoder\n     */\n    static type () {\n        return CARTESIAN;\n    }\n\n    /**\n     *\n     *\n     * @param {*} axesCreators\n     * @param {*} fieldInfo\n     * @return\n     * @memberof CartesianEncoder\n     */\n    createAxis (axesCreators, fieldInfo) {\n        const geomCellAxes = {};\n        const {\n            axes\n        } = axesCreators;\n        const {\n            projections,\n            indices\n        } = fieldInfo;\n        const {\n            rowFields,\n            columnFields\n        } = projections;\n        const {\n             rowIndex,\n             columnIndex\n        } = indices;\n        const axisFields = [{\n            fields: rowFields,\n            index: rowIndex\n        }, {\n            fields: columnFields,\n            index: columnIndex\n        }];\n        const xAxes = axes.x || [];\n        const yAxes = axes.y || [];\n\n        [rowFields, columnFields].forEach((fields, i) => {\n            const type = i === 0 ? ROW : COLUMN;\n            const axis = i === 0 ? Y : X;\n\n            if (fields.length > 1) {\n                axesCreators.position = BOTH;\n            } else {\n                axesCreators.position = this.axisFrom()[type];\n            }\n            geomCellAxes[axis] = generateAxisFromMap(axis, axisFields[i], axesCreators, axis === X ? xAxes : yAxes);\n        });\n        return geomCellAxes;\n    }\n\n    /**\n     *\n     *\n     * @param {*} fields\n     * @return\n     * @memberof CartesianEncoder\n     */\n    getFacetsAndProjections (fields, type) {\n        let facets = [];\n        let projections = [];\n        let counter = 0;\n        const primaryFacets = [];\n        const secondaryFacets = [];\n        const primaryFields = fields[0];\n        const secondaryFields = fields[1];\n        const primaryLen = primaryFields.length;\n        const secondaryLen = secondaryFields.length;\n        const axisFrom = this.axisFrom();\n\n        for (let i = 0; i < primaryLen; i++) {\n            let projArr = [primaryFields[i]];\n            const primaryField = primaryFields[i];\n\n            if (primaryField.type() === MEASURE) {\n                const secondaryField = secondaryFields[counter];\n                if (secondaryField && secondaryField.type() === MEASURE) {\n                    counter++;\n                    projArr = [primaryField, secondaryField];\n                }\n                projections.push(projArr);\n            } else {\n                facets.push(primaryField);\n                primaryFacets.push(primaryField);\n            }\n        }\n        if (secondaryLen > counter) {\n            for (let i = counter; i < secondaryLen; i++) {\n                const secondaryField = secondaryFields[i];\n                const projArr = [secondaryField];\n                if (secondaryField.type() === MEASURE) {\n                    projections.push(projArr);\n                } else {\n                    facets.push(secondaryField);\n                    secondaryFacets.push(secondaryField);\n                }\n            }\n        }\n        if ((primaryFacets.length || secondaryFacets.length) && !projections.length) {\n            type = type === COL ? COLUMN : type;\n            if ((axisFrom[type] === LEFT || axisFrom[type] === TOP) && primaryFacets.length) {\n                const axisFromIndex = primaryFacets.length - 1;\n                const facet = primaryFacets[axisFromIndex];\n                projections = [[facet]];\n                const existIndex = getIndex(secondaryFacets, facet);\n                if (existIndex > -1) {\n                    projections = [[facet, facet]];\n                    secondaryFacets.splice(existIndex, 1);\n                }\n                primaryFacets.splice(axisFromIndex, 1);\n            } else {\n                const axisFromIndex = 0;\n                const facet = secondaryFacets[axisFromIndex];\n                projections = [[facet]];\n                const existIndex = getIndex(primaryFacets, facet);\n                if (existIndex > -1) {\n                    projections = [[facet, facet]];\n                    primaryFacets.splice(existIndex, 1);\n                }\n                secondaryFacets.splice(axisFromIndex, 1);\n            }\n        }\n\n        facets = [...primaryFacets, ...secondaryFacets];\n        facets = facets.filter((el, index, self) => index === self.findIndex(t => (t.toString() === el.toString())));\n        return {\n            facets,\n            projections\n        };\n    }\n\n    /**\n     *\n     *\n     * @param {*} datamodel\n     * @param {*} config\n     * @return\n     * @memberof CartesianEncoder\n     */\n    fieldSanitizer (datamodel, config) {\n        return super.fieldSanitizer(datamodel, config);\n    }\n\n    /**\n     *\n     *\n     * @param {*} datamodel\n     * @return\n     * @memberof CartesianEncoder\n     */\n    getRetinalFieldsDomain (dataModels, encoding) {\n        const groupedModel = dataModels.groupedModel;\n        const domains = {};\n        Object.entries(encoding).forEach((enc) => {\n            if (enc[1] && enc[1].field) {\n                const field = enc[1].field;\n                if (field && (!field[1] || (field[1] && !field[1].domain))) {\n                    const domain = retriveDomainFromData(groupedModel, field);\n                    domains[field] = domain;\n                }\n            }\n        });\n        return domains;\n    }\n\n    /**\n     *\n     *\n     * @param {*} layerArray\n     * @memberof CartesianEncoder\n     */\n    serializeLayerConfig (layerArray) {\n        const serializedLayers = [];\n\n        layerArray.length && layerArray.forEach((layer) => {\n            const def = layerFactory.getSerializedConf(layer.mark, layer);\n            serializedLayers.push({\n                mark: layer.mark,\n                def\n            });\n        });\n        return serializedLayers;\n    }\n\n    /**\n     *\n     *\n     * @param {*} fields\n     * @param {*} userLayerConfig\n     * @return\n     * @memberof CartesianEncoder\n     */\n    getLayerConfig (fields, userLayerConfig) {\n        const layerConfig = [];\n        const {\n            columnFields,\n            rowFields\n        } = fields;\n\n        columnFields.forEach((colField) => {\n            const colFieldName = colField.toString();\n            rowFields.forEach((rowField) => {\n                let configs = [];\n                const rowFieldName = rowField.toString();\n                const encoding = {\n                    x: {\n                        field: colFieldName\n                    },\n                    y: {\n                        field: rowFieldName\n                    }\n                };\n                const rowFieldType = rowField.subtype();\n                const colFieldType = colField.subtype();\n                const mark = getDefaultMark(colFieldType, rowFieldType);\n\n                configs = [{\n                    mark,\n                    def: {\n                        mark,\n                        encoding\n                    }\n                }];\n\n                const layerConfigs = getLayerConfFromFields(colField.getMembers(),\n                    rowField.getMembers(), userLayerConfig || []);\n\n                if (layerConfigs.length) {\n                    configs = layerConfigs.map((layerConf) => {\n                        const def = layerConf.def;\n                        if (def instanceof Array) {\n                            configs[0].def.mark = mark;\n                            return {\n                                mark: layerConf.mark,\n                                def: def.map(conf => mergeRecursive(mergeRecursive({}, configs[0].def), conf))\n                            };\n                        }\n                        return mergeRecursive(mergeRecursive({}, configs[0]), layerConf);\n                    });\n                }\n\n                layerConfig.push(...configs);\n            });\n        });\n        return layerConfig;\n    }\n\n    getAggregationFns (groupByFns) {\n        return groupByFns;\n    }\n}\n\n","import { mergeRecursive } from 'muze-utils';\nimport { AxisOrientation } from '@chartshq/muze-axis';\nimport { scaleMaps } from '../enums/scale-maps';\nimport { getAxisType, getAxisKey } from '../group-helper';\nimport { dataTypeScaleMap } from '../data-type-scale-map';\nimport { CATEGORICAL, TEMPORAL, BAR, LINE, POINT, BOTH, Y } from '../enums/constants';\n\n/**\n *\n *\n * @param {*} axisInfo\n * @param {*} field\n * @param {*} axesCreators\n * @return\n */\nconst getAxisConfig = (axisInfo, field, axesCreators) => {\n    let axisOrientation;\n    const { index, axisIndex, axisType } = axisInfo;\n    const { config, position } = axesCreators;\n    const userAxisConfig = config.axes ? (config.axes[axisType] || {}) : {};\n    const {\n        LEFT,\n        RIGHT,\n        TOP,\n        BOTTOM\n    } = AxisOrientation;\n    const allOrientations = axisType === Y ? [LEFT, RIGHT] : [TOP, BOTTOM];\n\n    if (position === BOTH) {\n        axisOrientation = allOrientations[axisIndex];\n    } else {\n        axisOrientation = position;\n    }\n    const axisConfig = {\n        id: `${axisType}-${index}-${axisIndex}`,\n        name: field.toString(),\n        field: field.toString(),\n        labels: { rotation: 0 },\n        numberFormat: field.numberFormat(),\n        orientation: axisOrientation,\n        type: dataTypeScaleMap[field.subtype()]\n    };\n    return mergeRecursive(axisConfig, userAxisConfig);\n};\n\n/**\n *\n *\n * @param {*} axisInfo\n * @param {*} field\n * @param {*} axesCreators\n * @return\n */\nconst createSimpleAxis = (axisConfig, field, axesCreators) => {\n    const { labelManager } = axesCreators;\n    const Cls = scaleMaps[dataTypeScaleMap[field.subtype()]];\n    const simpleAxis = new Cls(axisConfig, { labelManager });\n    return simpleAxis;\n};\n\n/**\n *\n *\n * @param {*} axisType\n * @param {*} fieldInfo\n * @param {*} axesCreators\n * @param {*} groupAxes\n * @return\n */\nexport const generateAxisFromMap = (axisType, fieldInfo, axesCreators, groupAxes) => {\n    let axisKey;\n    const currentAxes = [];\n    const { fields, index } = fieldInfo;\n    const { cacheMaps } = axesCreators;\n    const map = cacheMaps[`${axisType}AxesMap`];\n\n    fields.forEach((field, axisIndex) => {\n        axisKey = getAxisKey(axisType, index, dataTypeScaleMap[field.subtype()]);\n        const axisConfig = getAxisConfig({ index, axisIndex, axisType }, field, axesCreators);\n\n        if (!map.has(axisKey)) {\n            const xAxis = createSimpleAxis(axisConfig, field, axesCreators);\n            currentAxes.push(xAxis);\n        } else {\n            const axes = map.get(axisKey);\n            axes[axisIndex]._rotationLock = false;\n            axes[axisIndex] && axes[axisIndex].config(axisConfig).domain(axisConfig.domain || []);\n        }\n    });\n\n    if (currentAxes.length) {\n        map.set(axisKey, currentAxes);\n    }\n\n    for (const [key] of map.entries()) {\n        if (key === axisKey) {\n            groupAxes.add(axisKey);\n        }\n    }\n    return map.get(axisKey);\n};\n\n/**\n *\n *\n * @memberof MatrixResolver\n */\nexport const mutateAxesFromMap = (cacheMaps, axes) => {\n    const {\n        xAxesMap,\n        yAxesMap\n    } = cacheMaps;\n    const {\n        x: xAxisSet,\n        y: yAxisSet\n    } = axes;\n    const xAxes = [];\n    const yAxes = [];\n\n    xAxisSet.forEach((axisId) => {\n        const xAxis = xAxesMap.get(axisId);\n        xAxes.push(xAxis);\n    });\n    yAxisSet.forEach((axisId) => {\n        const yAxis = yAxesMap.get(axisId);\n        yAxes.push(yAxis);\n    });\n    return {\n        xAxes, yAxes\n    };\n};\n\n/**\n * return a default mark based on predefined set of rules of type and subtype of the fields\n *\n * @param {string} colFieldType dimension/measure - temporal/ordinal/nominal\n * @param {string} rowFieldType dimension/measure - temporal/ordinal/nominal\n * @return {Object} return mark type\n */\nexport const getDefaultMark = (colFieldType, rowFieldType) => {\n    let mark;\n\n    if (colFieldType === CATEGORICAL || rowFieldType === CATEGORICAL) {\n        mark = BAR;\n    } else if (colFieldType === TEMPORAL || rowFieldType === TEMPORAL) {\n        mark = LINE;\n    } else {\n        mark = POINT;\n    }\n\n    return mark;\n};\n\n/**\n *\n *\n * @param {*} axesCreators\n * @param {*} [fieldInfo=[]]\n * @return\n */\nexport const createRetinalAxis = (axesCreators, fieldProps = {}) => {\n    const { axisType, fieldsConfig } = axesCreators;\n    const field = fieldProps.field;\n    const axis = [];\n    const Cls = scaleMaps[axisType];\n\n    fieldProps.type = fieldProps.type ? fieldProps.type : getAxisType(fieldsConfig, field || null);\n    axis.push(new Cls(fieldProps));\n    return axis;\n};\n\n/**\n *\n *\n * @param {*} arr\n * @param {*} val\n * @return\n */\nexport const getIndex = (arr, val) => {\n    let i = 0;\n    let arrIndex = -1;\n\n    while (arrIndex === -1 && i < arr.length) {\n        if (arr[i].toString() === val.toString()) {\n            arrIndex = i;\n        }\n        i++;\n    }\n    return arrIndex;\n};\n\n/**\n *\n *\n * @param {*} colFields\n * @param {*} rowFields\n * @param {*} userLayerConfig\n * @return\n * @memberof CartesianEncoder\n */\nexport const getLayerConfFromFields = (colFields, rowFields, userLayerConfig) => userLayerConfig.filter((conf) => {\n    const userConf = conf instanceof Array ? conf : [conf];\n    const encodingArr = [].concat(...userConf.map((d) => {\n        if (d.def instanceof Array) {\n            return d.def.map(def => (def.axis ? {\n                y: { field: def.axis.y },\n                x: { field: def.axis.x }\n            } : def.encoding));\n        }\n        return d.def.encoding;\n    })).filter(d => d !== undefined);\n\n    if (!encodingArr.length) {\n        return true;\n    }\n\n    const xFields = [].concat(...encodingArr.map(d => [d.x && d.x.field, d.x0 && d.x0.field]))\n                .filter(d => d !== undefined && d !== null);\n    const yFields = [].concat(...encodingArr.map(d => [d.y && d.y.field, d.y0 && d.y0.field]))\n                .filter(d => d !== undefined && d !== null);\n\n    if (!xFields.length && !yFields.length) {\n        return true;\n    }\n\n    const colFieldExist = xFields.length ? xFields.every(d => colFields.indexOf(d) !== -1) : false;\n    const rowFieldExist = yFields.length ? yFields.every(d => rowFields.indexOf(d) !== -1) : false;\n    if (xFields.length && yFields.length) {\n        return colFieldExist && rowFieldExist;\n    }\n    return colFieldExist || rowFieldExist;\n});\n","import { ComposedVars, SimpleVariable } from '../variable';\nimport { DIMENSION, COLUMNS, ROWS, TEMPORAL } from '../enums/constants';\n\n/**\n * Gets the list of fields in a sorted order by measurement and dimension\n *\n * @param {Array} fieldList List of fields in the view\n * @param {Object} fieldMap Mapping of fields in the datamodel\n * @return {Array} fields sorted by measurement and dimensions\n */\nconst orderFields = (fieldArray, type) => {\n    const dimensionArr = [[], []];\n    const measureArr = [[], []];\n    const temporalArr = [[], []];\n    const categoricalArr = [[], []];\n\n    fieldArray.forEach((fieldList, index) => {\n        fieldList.forEach((field) => {\n            if (field.type() === DIMENSION) {\n                dimensionArr[index].push(field);\n                field.subtype() === TEMPORAL ? temporalArr[index].push(field) : categoricalArr[index].push(field);\n            } else {\n                measureArr[index].push(field);\n            }\n        });\n    });\n\n    const numOfMeasures = measureArr[0].length + (measureArr[1] ? measureArr[1].length : 0);\n\n    // Single array of fields\n    if (!fieldArray[1]) {\n        // Push measures to bottom\n        measureArr[1] = type === COLUMNS ? measureArr[0] : [];\n        // Push measures to left\n        measureArr[0] = type !== COLUMNS ? measureArr[0] : [];\n        // Bottom and right dimensions empty\n        dimensionArr[1] = [];\n        // Left and top filled with dimensions\n        dimensionArr[0] = dimensionArr[0];\n        if (numOfMeasures === 0) {\n            const allDimensions = [...dimensionArr[0], ...dimensionArr[1]];\n            if (type === COLUMNS) {\n                dimensionArr[1] = allDimensions[allDimensions.length - 1] ? [allDimensions[allDimensions.length - 1]]\n                        : [];\n                allDimensions.splice(-1, 1);\n            } else {\n                dimensionArr[1] = [];\n            }\n            dimensionArr[0] = [...allDimensions];\n        }\n    }\n\n    if (dimensionArr[0].length && dimensionArr[1].length && numOfMeasures > 0) {\n        dimensionArr[0] = [...dimensionArr[0], ...dimensionArr[1]];\n        dimensionArr[1] = [];\n    }\n    return {\n        fields: dimensionArr.map((list, i) => (i === 1 ?\n            measureArr[i].concat(dimensionArr[i]) : dimensionArr[i].concat(measureArr[i]))),\n        dimensions: [...dimensionArr[0], ...dimensionArr[1]],\n        measures: [...measureArr[0], ...measureArr[1]],\n        temporal: [...temporalArr[0], ...temporalArr[1]],\n        categorical: [...categoricalArr[0], ...categoricalArr[1]]\n    };\n};\n\n/**\n * Gets the list of normalized fields\n *\n * @param {Array} fields List of fields in the view\n * @param {Object} fieldMap Mapping of fields in the datamodel\n * @return {Array} fields normalized by measurement and dimensions\n */\nconst normalizeFields = (config, type) => {\n    const fieldsArr = [];\n    const fields = config[type];\n\n    if (!(fields[0] instanceof Array)) {\n        fieldsArr[0] = fields;\n    } else {\n        fieldsArr[0] = fields[0] || [];\n        fieldsArr[1] = fields[1] || [];\n    }\n    return fieldsArr;\n};\n\n/**\n *\n *\n * @param {*} fields\n * @param {*} datamodel\n * @return\n */\nconst convertToVar = (datamodel, fields) => {\n    const vars = [];\n\n    fields && fields.forEach((field) => {\n        if (field instanceof ComposedVars) {\n            vars.push(field);\n            field.data(datamodel);\n        } else {\n            vars.push(new SimpleVariable(field).data(datamodel));\n        }\n    });\n    return vars;\n};\n\n/**\n *\n *\n * @param {*} rows\n * @param {*} columns\n * @param {*} datamodel\n * @return\n */\nexport const transformFields = (datamodel, config) => {\n    const [rowsInfo, columnsInfo] = [ROWS, COLUMNS].map((fields) => {\n        const normalizedFields = normalizeFields(config, fields);\n        const norFields = [convertToVar(datamodel, normalizedFields[0])];\n\n        if (normalizedFields[1]) {\n            norFields[1] = convertToVar(datamodel, normalizedFields[1]);\n        }\n        return orderFields(norFields, fields);\n    });\n    const {\n        fields: rows,\n        dimensions: rowDimensions,\n        measures: rowMeasures,\n        temporal: rowTemporalFields,\n        categorical: rowCategoricalFields\n    } = rowsInfo;\n    const {\n        fields: columns,\n        dimensions: columnDimensions,\n        measures: columnMeasures,\n        temporal: columnTemporalFields,\n        categorical: columnCategoricalFields\n    } = columnsInfo;\n    return {\n        rows,\n        rowDimensions,\n        rowMeasures,\n        rowTemporalFields,\n        rowCategoricalFields,\n        columns,\n        columnTemporalFields,\n        columnCategoricalFields,\n        columnDimensions,\n        columnMeasures\n    };\n};\n","export { default as VisualEncoder } from './visual-encoder';\nexport { default as CartesianEncoder } from './cartesian-encoder';\nexport { default as PolarEncoder } from './polar-encoder';\nexport { default as RetinalEncoder } from './retinal-encoder';\n","import { layerFactory } from '@chartshq/visual-layer';\nimport { mergeRecursive } from 'muze-utils';\nimport VisualEncoder from './visual-encoder';\nimport { RADIUS, ANGLE, SIZE, MEASURE, ARC, POLAR, COLOR } from '../enums/constants';\n/**\n *\n *\n * @export\n * @class PolarEncoder\n * @extends {VisualEncoder}\n */\nexport default class PolarEncoder extends VisualEncoder {\n\n    /**\n     *\n     *\n     * @param {*} axesCreators\n     * @param {*} fieldInfo\n     * @return\n     * @memberof PolarEncoder\n     */\n    createAxis (axesCreators, fieldInfo) {\n        const {\n            axes\n        } = axesCreators;\n        const geomCellAxes = axes;\n        const {\n            indices\n        } = fieldInfo;\n        const {\n            rowIndex,\n            columnIndex\n        } = indices;\n        // Dummy axes for polar, to create blank cells\n        const pieAxes = geomCellAxes.pie || [];\n\n        pieAxes[rowIndex] = pieAxes[rowIndex] || [];\n        pieAxes[rowIndex][columnIndex] = [];\n\n        geomCellAxes.pie = pieAxes;\n        geomCellAxes.x = null;\n        geomCellAxes.y = null;\n\n        return geomCellAxes;\n    }\n\n    /**\n     *\n     *\n     * @param {*} fields\n     * @return\n     * @memberof CartesianEncoder\n     */\n    getFacetsAndProjections (fields) {\n        let counter = 0;\n        const facets = [];\n        const projections = [];\n        const primaryFields = fields[0];\n        const secondaryFields = fields[1];\n        const primaryLen = primaryFields.length;\n        const secondaryLen = secondaryFields.length;\n\n        for (let i = 0; i < primaryLen; i++) {\n            const primaryField = primaryFields[i];\n            if (primaryField.type() === MEASURE) {\n                const secondaryField = secondaryFields[counter++];\n                const projArr = secondaryField ? [primaryField, secondaryField] : [primaryField];\n                projections.push(projArr);\n            } else {\n                facets.push(primaryField);\n            }\n        }\n        if (secondaryLen > counter) {\n            for (let i = counter; i < secondaryLen; i++) {\n                const secondaryField = secondaryFields[i];\n                const projArr = [secondaryField];\n                if (secondaryField.type() === MEASURE) {\n                    projections.push(projArr);\n                } else {\n                    facets.push(secondaryField);\n                }\n            }\n        }\n        return {\n            facets,\n            projections\n        };\n    }\n\n    /**\n     *\n     *\n     * @return\n     * @memberof PolarEncoder\n     */\n    setCommonDomain () {\n        // No domain to be set\n        return this;\n    }\n\n    /**\n     *\n     *\n     * @return\n     * @memberof PolarEncoder\n     */\n    static type () {\n        return POLAR;\n    }\n\n    layers (...layers) {\n        if (layers.length) {\n            this._layers = layers[0];\n            return this;\n        }\n        return this._layers;\n    }\n\n    /**\n     *\n     *\n     * @param {*} datamodel\n     * @param {*} config\n     * @memberof PolarEncoder\n     */\n    fieldSanitizer (datamodel, config) {\n        let sanitizedRows = [[], []];\n        let sanitizedColumns = [[], []];\n        const fields = super.fieldSanitizer(datamodel, config);\n        const {\n            layers\n        } = config;\n        const {\n            rows,\n            columns\n        } = fields;\n        const layer = layers[0];\n        const encoding = layer.encoding;\n        const radius = encoding && encoding.radius ? encoding.radius.field : null;\n        const angle = encoding && encoding.angle ? encoding.angle.field : null;\n        const sanitizedFields = [sanitizedRows, sanitizedColumns];\n\n        [rows, columns].forEach((fieldType, typeIndex) => {\n            fieldType.forEach((fieldSet, i) => fieldSet.forEach((field) => {\n                if (field.toString() !== radius && field.toString() !== angle && field.type() !== MEASURE) {\n                    sanitizedFields[typeIndex][i].push(field);\n                }\n            }));\n        });\n        sanitizedColumns = [...new Set(sanitizedColumns)];\n        sanitizedRows = [...new Set(sanitizedRows)];\n        this.fieldInfo({ rows: sanitizedRows, columns: sanitizedColumns });\n        return this.fieldInfo();\n    }\n\n    getRetinalFieldsDomain (dataModels, encoding, facetFields, groupBy) {\n        let sizeField;\n        let colorField;\n        const fields = [];\n        const layers = this.layers();\n        const dataModel = dataModels.parentModel;\n        const fieldsConfig = dataModel.getFieldsConfig();\n        const domains = {};\n        if (layers && layers[0]) {\n            const layer = layers[0];\n            const layerEncoding = layer.def.encoding || {};\n\n            [RADIUS, ANGLE, SIZE, COLOR].forEach((encType) => {\n                const field = layerEncoding[encType] ? layerEncoding[encType].field : '';\n                const measureField = fieldsConfig[field] && fieldsConfig[field].def.type === MEASURE;\n                if (encType === SIZE && measureField) {\n                    sizeField = field;\n                }\n                if (encType === COLOR) {\n                    colorField = field;\n                }\n                fieldsConfig[field] && !measureField && fields.push(field);\n            });\n        }\n\n        if (sizeField) {\n            domains[sizeField] = dataModel.groupBy(facetFields, {\n                [sizeField]: 'sum'\n            }).getFieldspace().fieldsObj()[sizeField].domain();\n        }\n\n        if (colorField) {\n            const dm = dataModel.groupBy([...facetFields, ...fields], groupBy.measures);\n            domains[colorField] = dm.getFieldspace().fieldsObj()[colorField].domain();\n        }\n        return domains;\n    }\n    /**\n     *\n     *\n     * @param {*} fields\n     * @param {*} userLayerConfig\n     * @return\n     * @memberof PolarEncoder\n     */\n    getLayerConfig (fields, userLayerConfig) {\n        let layerConfig = [];\n        const {\n                columnFields,\n                rowFields\n            } = fields;\n        const allFields = [...columnFields, ...rowFields];\n\n        allFields.forEach(() => {\n            const encoding = {};\n            let config = {\n                mark: ARC,\n                def: {\n                    encoding\n                }\n            };\n            if (userLayerConfig && userLayerConfig.length > 0) {\n                config = mergeRecursive(config, userLayerConfig[0]);\n            }\n            layerConfig.push(config);\n        });\n        if (layerConfig.length === 0) {\n            layerConfig = userLayerConfig;\n        }\n\n        this.layers(layerConfig);\n        return layerConfig;\n    }\n\n    /**\n     *\n     *\n     * @param {*} layerArray\n     * @returns\n     * @memberof PolarEncoder\n     */\n    serializeLayerConfig (layerArray) {\n        const serializedLayers = [];\n\n        layerArray.length && layerArray.forEach((layer) => {\n            const def = layerFactory.getSerializedConf(layer.mark, layer);\n            serializedLayers.push({\n                mark: layer.mark,\n                def\n            });\n        });\n        return serializedLayers;\n    }\n\n    getAggregationFns (groupByFns) {\n        return groupByFns;\n    }\n}\n","import { createRetinalAxis } from './encoder-helper';\nimport { COLOR, SHAPE, SIZE } from '../enums/constants';\nimport VisualEncoder from './visual-encoder';\n\n/**\n *\n *\n * @export\n * @class RetinalEncoder\n * @extends {VisualEncoder}\n */\nexport default class RetinalEncoder extends VisualEncoder {\n\n    /**\n     *\n     *\n     * @param {*} axesCreators\n     * @return\n     * @memberof RetinalEncoder\n     */\n    createAxis (axesCreators) {\n        const { fieldsConfig, config } = axesCreators;\n        const newAxes = {};\n\n        [COLOR, SHAPE, SIZE].forEach((axisType) => {\n            newAxes[`${axisType}`] = createRetinalAxis({ axisType, fieldsConfig }, config[axisType]);\n        });\n        return newAxes;\n    }\n\n    /**\n     *\n     *\n     * @static\n     * @return\n     * @memberof RetinalEncoder\n     */\n    static type () {\n        return 'retinal';\n    }\n\n    /**\n     *\n     *\n     * @param {*} fields\n     * @param {*} userLayerConfig\n     * @return\n     * @memberof RetinalEncoder\n     */\n    getLayerConfig (encodingConfigs, userLayerConfig) {\n        const layerConfig = [];\n        userLayerConfig.forEach((e) => {\n            const config = e;\n            [COLOR, SHAPE, SIZE].forEach((axis) => {\n                if (encodingConfigs[axis] && encodingConfigs[axis].field) {\n                    const def = config.def;\n                    if (config.def instanceof Array) {\n                        def.forEach((conf) => {\n                            conf.encoding = conf.encoding || {};\n                            conf.encoding[axis] = conf.encoding[axis] || {};\n                            conf.encoding[axis].field = encodingConfigs[axis].field;\n                        });\n                    } else {\n                        def.encoding = def.encoding || {};\n                        def.encoding[axis] = encodingConfigs[axis] || {};\n                        def.encoding[axis].field = encodingConfigs[axis].field;\n                    }\n                }\n            });\n            layerConfig.push(config);\n        });\n        return layerConfig;\n    }\n\n    /**\n     *\n     *\n     * @param {*} context\n     * @return\n     * @memberof RetinalEncoder\n     */\n    setCommonDomain (context) {\n        const { domains, axes, encoding } = context;\n\n        Object.entries(encoding).forEach((enc) => {\n            if (enc[1] && enc[1].field) {\n                const field = enc[1].field;\n                if (field && (!field[1] || (field[1] && !field[1].domain))) {\n                    axes[enc[0]].forEach((axis) => {\n                        const domain = domains[field];\n                        axis.updateDomain(domain);\n                    });\n                }\n            }\n        });\n        return axes;\n    }\n}\n","import { ERROR_MSG, mergeRecursive } from 'muze-utils';\nimport { transformFields } from './field-sanitizer';\nimport { getHeaderAxisFrom } from '../group-helper/group-utils';\nimport { ROW, COLUMN } from '../enums/constants';\n\n/**\n *\n *\n * @export\n * @class VisualEncoder\n */\nexport default class VisualEncoder {\n\n    /**\n     *\n     *\n     * @memberof VisualEncoder\n     */\n    createAxis () {\n        throw new Error(ERROR_MSG.INTERFACE_IMPL);\n    }\n\n    /**\n     *\n     *\n     * @memberof VisualEncoder\n     */\n    setCommonDomain () {\n        throw new Error(ERROR_MSG.INTERFACE_IMPL);\n    }\n\n    /**\n     *\n     *\n     * @memberof VisualEncoder\n     */\n    getLayerConfig () {\n        throw new Error(ERROR_MSG.INTERFACE_IMPL);\n    }\n\n    fieldInfo (...info) {\n        if (info.length) {\n            this._fieldInfo = mergeRecursive(this._fieldInfo || {}, info[0]);\n            return this;\n        }\n        return this._fieldInfo;\n    }\n\n    /**\n     *\n     *\n     * @param {*} datamodel\n     * @param {*} config\n     * @return\n     * @memberof VisualEncoder\n     */\n    fieldSanitizer (datamodel, config) {\n        this.fieldInfo(transformFields(datamodel, config));\n        return this.fieldInfo();\n    }\n\n    /**\n     *\n     *\n     * @param {*} params\n     * @return\n     * @memberof VisualEncoder\n     */\n    axisFrom (...params) {\n        if (params.length) {\n            this._axisFrom = params[0];\n            return this;\n        }\n        return this._axisFrom;\n    }\n\n    /**\n     *\n     *\n     * @param {*} params\n     * @return\n     * @memberof VisualEncoder\n     */\n    headerFrom (...params) {\n        if (params.length) {\n            this._headerFrom = params[0];\n            return this;\n        }\n        return this.__headerFrom;\n    }\n\n    /**\n     *\n     *\n     * @param {*} axisFrom\n     * @return\n     * @memberof CartesianEncoder\n     */\n    setAxisAndHeaders (axisFrom = {}, fields) {\n        const [rowHeader, rowAxis] = getHeaderAxisFrom(ROW, fields.rows, axisFrom);\n        const [colHeader, colAxis] = getHeaderAxisFrom(COLUMN, fields.columns, axisFrom);\n\n        this.axisFrom({\n            row: rowAxis,\n            column: colAxis\n        });\n        this.headerFrom({\n            row: rowHeader,\n            column: colHeader\n        });\n        return this;\n    }\n}\n","/**\n * This file exports constants that are used as enums in the\n *  crosstab group implementation.\n */\n/**\n * Width of the crosstab.\n */\nexport const X = 'x';\n/**\n * Width of the crosstab.\n */\nexport const Y = 'y';\n/**\n * Width of the crosstab.\n */\nexport const WIDTH = 'width';\n\n/**\n * Height of the crosstab.\n */\nexport const HEIGHT = 'height';\n\n/**\n * Field referring to object storing measurement configuration.\n */\nexport const MEASUREMENT = 'measurement';\n\n/**\n * Field referring to object storing configuration properties.\n */\nexport const CONFIG = 'config';\n\n/**\n * Width of visual unit in crosstab.\n */\nexport const MIN_UNIT_WIDTH = 'minUnitWidth';\n\n/**\n * Height of visual unit.\n */\nexport const MIN_UNIT_HEIGHT = 'minUnitHeight';\n\n/**\n * Field to store the array of dimensions to facet by.\n */\nexport const DIMENSIONS = 'dimensions';\n\n/**\n * Field to store array of measures to use as x axis.\n */\nexport const MEASURES = 'measures';\n\n/**\n * Field to store the array of dimensions to facet by.\n */\nexport const DIMENSION = 'dimension';\n\n/**\n * Field to store array of measures to use as x axis.\n */\nexport const MEASURE = 'measure';\n\n/**\n * Flag to specify if model should be pivoted.\n */\nexport const PIVOT = 'pivot';\n\n/**\n * Flag to specify format\n */\nexport const FORMAT = 'format';\n\n/**\n * Mount point where the variable will be hosted\n */\nexport const MOUNT = 'mount';\n\n/**\n * Data update flag\n */\nexport const HAS_DATA_UPDATED = 'hasDataUpdated';\n\n/**\n * Field referring to object storing set of rows\n */\nexport const ROWS = 'rows';\n\n/**\n * Field referring to object storing set of columns\n */\nexport const COLUMNS = 'columns';\n\n/**\n * Field referring to object storing set of columns\n */\nexport const COL = 'col';\n\n/**\n * Field referring to object storing set of rows\n */\nexport const ROW = 'row';\n\n/**\n * Field referring to object storing set of columns\n */\nexport const COLUMN = 'column';\n\n/**\n * Field referring to object storing color field\n */\nexport const COLOR = 'color';\n\n/**\n * Field referring to object storing shape field\n */\nexport const SHAPE = 'shape';\n\n/**\n * Field referring to object storing size field\n */\nexport const SIZE = 'size';\n\n/**\n * Field referring to object storing detail field\n */\nexport const DETAIL = 'detail';\n\n/**\n * Field referring to object storing set of layers\n */\nexport const LAYERS = 'layers';\n\n/**\n * Field referring to object storing the transforms\n */\nexport const TRANSFORM = 'transform';\n\n/**\n * Field referring to object storing the transforms\n */\nexport const ORDINAL = 'ordinal';\n\n/**\n * Field referring to object storing the transforms\n */\nexport const LINEAR = 'linear';\n/**\n * Field referring to object storing the transforms\n */\nexport const LEFT = 'left';\n/**\n * Field referring to object storing the transforms\n */\nexport const RIGHT = 'right';\n/**\n * Field referring to object storing the transforms\n */\nexport const TOP = 'top';\n/**\n * Field referring to object storing the transforms\n */\nexport const BOTTOM = 'bottom';\n\n/**\n * Field referring to object storing the transforms\n */\nexport const RETINAL = 'retinal';\n/**\n * Field referring to object storing the transforms\n */\nexport const CELL = 'cell';\n/**\n * Field referring to object storing the transforms\n */\nexport const X_AXES = 'xAxes';\n/**\n * Field referring to object storing the transforms\n */\nexport const Y_AXES = 'yAxes';\n/**\n * Field referring to object storing the transforms\n */\nexport const ENTRY_CELLS = 'entryCell';\n/**\n * Field referring to object storing the transforms\n */\nexport const INITIALIZED = 'initialized';\n/**\n * Field referring to object storing the transforms\n */\nexport const EXIT_CELLS = 'exitCell';\n/**\n * Field referring to object storing the transforms\n */\nexport const AXIS = 'axis';\n/**\n * Field referring to object storing the transforms\n */\nexport const UNIT = 'unit';\n/**\n * Field referring to object storing the transforms\n */\nexport const UPDATED = 'updated';\n/**\n * Field referring to object storing the transforms\n */\nexport const BEFORE_UPDATE = 'beforeupdate';\n/**\n * Field referring to object storing the transforms\n */\nexport const VALUE_MATRIX = 'valueMatrix';\n/**\n * Field referring to object storing the transforms\n */\nexport const FACET_HEADERS = 'facet-headers';\n/**\n * Field referring to object storing the transforms\n */\nexport const RADIUS = 'radius';\n/**\n * Field referring to object storing the transforms\n */\nexport const ANGLE = 'angle';\n/**\n * Field referring to object storing the transforms\n */\nexport const ARC = 'arc';\n/**\n * Field referring to object storing the transforms\n */\nexport const CARTESIAN = 'cartesian';\n/**\n * Field referring to object storing the transforms\n */\nexport const POLAR = 'polar';\n/**\n * Field referring to object storing the transforms\n */\nexport const CATEGORICAL = 'categorical';\n/**\n * Field referring to object storing the transforms\n */\nexport const TEMPORAL = 'temporal';\n/**\n * Field referring to object storing the transforms\n */\nexport const BAR = 'bar';\n/**\n * Field referring to object storing the transforms\n */\nexport const LINE = 'line';\n/**\n * Field referring to object storing the transforms\n */\nexport const POINT = 'point';\n/**\n * Field referring to object storing the transforms\n */\nexport const PRIMARY = 'Primary';\n/**\n * Field referring to object storing the transforms\n */\nexport const SECONDARY = 'Secondary';\n/**\n * Field referring to object storing the transforms\n */\nexport const BOTH = 'both';\n/**\n * Field referring to object storing the transforms\n */\nexport const INTERACTION = 'interaction';\n/**\n * Field referring to object storing the transforms\n */\nexport const GRID_LINES = 'gridLines';\n/**\n * Field referring to object storing the transforms\n */\nexport const GRID_BANDS = 'gridBands';\n/**\n * Field referring to object storing the transforms\n */\nexport const HEADER = 'header';\n/**\n * Field referring to object storing the transforms\n */\nexport const FACET = 'facet';\n\n","/**\n * This file exports variables that are used as defaults for the crosstab group.\n */\nexport const DATA_UPDATE_COUNTER = 0;\n\nexport const DEFAULT_LAYER_TYPE = 'cartesian';\n\n","import { ContinousAxis, BandAxis, TimeAxis, ColorAxis, SizeAxis, ShapeAxis } from '@chartshq/muze-axis';\n\nexport const scaleMaps = {\n    linear: ContinousAxis,\n    band: BandAxis,\n    temporal: TimeAxis,\n    size: SizeAxis,\n    color: ColorAxis,\n    shape: ShapeAxis\n};\n","import { AxisOrientation } from '@chartshq/muze-axis';\nimport { getObjProp, FieldType } from 'muze-utils';\nimport { getMatrixModel } from './matrix-model';\nimport {\n    getCellKey,\n    isDistributionEqual,\n    mutateAxesFromMap,\n    createSelection,\n    getFieldsFromSuppliedLayers,\n    extractFields\n} from './group-utils';\nimport { ROW, ROWS, COLUMNS, COL, LEFT, RIGHT, TOP, BOTTOM, PRIMARY, SECONDARY, X, Y } from '../enums/constants';\n\n/**\n * Updates row and column cells with the geom cell corresponding to the facet keys\n *\n * @param {*} resolver\n * @param {*} facets\n */\nconst updateCells = (resolver, facets, geomCell) => {\n    [ROW, COL].forEach((field) => {\n        const cells = resolver[`${field}Cells`]();\n        const facetKey = facets[`${field}Facets`][1].join();\n\n        !cells[facetKey] && (cells[facetKey] = []);\n        cells[facetKey].push(geomCell);\n        resolver[`${field}Cells`](cells);\n    });\n};\n\n/**\n *\n *\n * @param {*} context\n * @param {*} datamodel\n * @param {*} fieldInfo\n * @param {*} facets\n * @return\n */\nexport const createValueCells = (context, datamodel, fieldInfo, facets) => {\n    const {\n        projections,\n        indices\n    } = fieldInfo;\n    const {\n        rowFields,\n        columnFields\n    } = projections;\n    const {\n         rowIndex,\n         columnIndex\n    } = indices;\n    const {\n        suppliedLayers,\n        cell: GeomCell,\n        resolver,\n        config,\n        encoder\n    } = context;\n    const axes = resolver.axes();\n    const cacheMaps = resolver.cacheMaps();\n    const matrixLayers = resolver.matrixLayers();\n    const labelManager = resolver.dependencies().smartlabel;\n    const horizontalAxis = resolver.horizontalAxis();\n    const verticalAxis = resolver.verticalAxis();\n    const datamodelTransform = resolver.datamodelTransform();\n    const {\n        entryCellMap,\n        exitCellMap\n    } = cacheMaps;\n    const layerConfigArr = encoder.getLayerConfig({ columnFields, rowFields }, suppliedLayers || []);\n    const axesCreators = { config, labelManager, axes, cacheMaps };\n\n    fieldInfo.normalizedColumns = verticalAxis.fields;\n    fieldInfo.normalizedRows = horizontalAxis.fields;\n\n    const groupAxes = encoder.createAxis(axesCreators, fieldInfo);\n\n    matrixLayers[rowIndex] = matrixLayers[rowIndex] ? matrixLayers[rowIndex] : [];\n    matrixLayers[rowIndex][columnIndex] = layerConfigArr;\n\n    // return from map if already there otherwise create and put in map\n    const geomCellKey = getCellKey(rowIndex, columnIndex);\n    const fields = {\n        y: rowFields,\n        x: columnFields\n    };\n    const allFacets = [\n        [...facets.rowFacets[0], ...facets.colFacets[0]],\n        [...facets.rowFacets[1], ...facets.colFacets[1]]\n    ];\n    const geomCell = !exitCellMap.has(geomCellKey) ? new GeomCell() : exitCellMap.get(geomCellKey);\n\n    geomCell.data(datamodel)\n                    .axes(groupAxes)\n                    .fields(fields)\n                    .transform(datamodelTransform)\n                    .facetByFields(allFacets);\n    entryCellMap.set(geomCellKey, geomCell);\n    exitCellMap.delete(geomCellKey);\n\n    updateCells(resolver, facets, geomCell);\n\n    return entryCellMap.get(geomCellKey);\n};\n\n/**\n * Creates axis cells based on the set of axes\n *\n * @param {Selection} selection Contains a selection of the axis units\n * @param {Array} axes Actual axis units\n * @param {number} axisIndex 0-> primary axis, 1-> secondary axis(when dual axis is made)\n * @param {Object} cells Contains a collection of the cells\n * @return {Object} return either set of axis/blank cells depending on the config\n */\n\nconst createAxisCells = (selection, axes, axisIndex, cells) =>\n    createSelection(selection, axis => axis, axes, (item, i) => i + item.reduce((e, n) => {\n        const id = n.id + axisIndex;\n        return e + id;\n    }, '')).map((axis) => {\n        if (axis && axis[axisIndex]) {\n            const axisInst = axis[axisIndex];\n            const { orientation } = axisInst.config();\n\n            return new cells.AxisCell().source(axisInst).config({\n                isOffset: orientation === AxisOrientation.LEFT || orientation === AxisOrientation.TOP\n            });\n        }\n        return new cells.BlankCell();\n    });\n\n/**\n *\n *\n * @param {*} context\n * @param {*} selectionObj\n * @param {*} cells\n * @retur\n */\nconst axisPlaceholderGn = (context, selObj, cells) => {\n    const {\n        matrices\n    } = context;\n    const {\n        axesMatrix\n    } = matrices;\n\n    return (type, axisFrom) => {\n        const axes = axesMatrix[`${type}`];\n\n        if (axes && axes.length) {\n            if (type === X || type === Y) {\n                const fieldNames = type === Y ? ROWS : COLUMNS;\n\n                [PRIMARY, SECONDARY].forEach((fieldType, index) => {\n                    const selObjProp = `${fieldNames}${fieldType}`;\n                    let axisIndex = index;\n                    let axesForDraw = axes;\n                    if (axisFrom === RIGHT || axisFrom === BOTTOM) {\n                        axisIndex = 1 - axisIndex;\n                    }\n                    if (!getObjProp(axes, 0, axisIndex)) {\n                        axesForDraw = [];\n                    }\n                    selObj[selObjProp] = createAxisCells(selObj[selObjProp], axesForDraw, axisIndex, cells);\n                });\n            } else {\n                selObj.rowsPrimary = createAxisCells(selObj.rowPrime, axes.map(() => []), 0, cells);\n                selObj.columnsPrimary = createAxisCells(selObj.colPrime, axes[0], 0, cells);\n            }\n        }\n        return selObj;\n    };\n};\n\n/**\n * Creates header cells based on the set of headers\n *\n * @param {Object} selection Contains a selection of the header units\n * @param {string} headers Contains a list of the headers\n * @param {Object} cells Contains a collection of the cells\n * @param {Object} labelManager smart label instance\n * @return {Object} return either set of header cells depending on the config\n */\nconst createTextCells = (selection, headers, cells, labelManager) => createSelection(selection,\n    label => new cells.TextCell({}, { labelManager }).source(label), headers, (key, i) => key + i);\n\n/**\n *\n *\n * @param {*} context\n * @param {*} selectionObj\n * @param {*} cells\n * @param {*} labelManager\n * @return\n */\nconst headerPlaceholderGn = (context, selectionObj, cells, labelManager) => {\n    const {\n        axis,\n        keys,\n        type,\n        facetConfig\n    } = context;\n    const counter = axis.length / keys.length;\n    const selectionKeys = keys.length ? axis.map((d, i) => keys[Math.floor(i / counter)]) : [];\n    return createSelection(selectionObj[`${type}Headers`], keySet => keySet, selectionKeys, (keySet, i) =>\n        `${keySet.join(',')}-${i}`).map(keySet => createTextCells(null, keySet, cells, labelManager)\n                        .map((cell, k, i) => cell.source(keySet[i]).config(facetConfig || {})));\n};\n\n/**\n * Creates a set of placeholders as a part of selection object\n *\n * @param {Array} normalizedOptions contains normalized rows and columns\n * @param {Array} matrices contains axis and value matrices\n * @param {aArrayny} projections contains set of row and column projections\n * @param {Object} cells Contains a collection of the cells\n * @param {Object} labelManager smart label instance\n * @return {Object} Creates a set of placeholders as a part of selections\n */\nconst generatePlaceholders = (context, cells, labelManager) => {\n    let selectionObj;\n    const {\n        matrices,\n        fields,\n        facetsAndProjections,\n        selection,\n        facetConfig,\n        encoders\n    } = context;\n    const {\n        rows,\n        columns\n    } = fields;\n    const {\n        valuesMatrix\n    } = matrices;\n    const {\n        rowProjections,\n        colProjections\n    } = facetsAndProjections;\n    const {\n        rowKeys,\n        columnKeys\n    } = valuesMatrix;\n    const takeAxisFrom = encoders.simpleEncoder._axisFrom;\n    const takeHeaderFrom = encoders.simpleEncoder._headerFrom;\n\n    selectionObj = selection || {};\n\n    ['pie', X, Y].forEach((axis) => {\n        const axisFrom = axis === X ? takeAxisFrom.column : takeAxisFrom.row;\n        selectionObj = axisPlaceholderGn(context, selectionObj, cells)(axis, axisFrom);\n    });\n\n    const {\n        rowsPrimary,\n        rowsSecondary,\n        columnsPrimary,\n        columnsSecondary\n    } = selectionObj;\n\n    const rowAxis = rowsPrimary && rowsPrimary.getObjects().length ? rowsPrimary.getObjects() :\n        (rowsSecondary && rowsSecondary.getObjects().length ? rowsSecondary.getObjects() : []);\n    const colAxis = columnsPrimary && columnsPrimary.getObjects().length ? columnsPrimary.getObjects() :\n        (columnsSecondary && columnsSecondary.getObjects().length ? columnsSecondary.getObjects() : []);\n\n    const headerConfig = [\n        { type: LEFT, section: rows[0], axis: rowAxis, headerFrom: takeHeaderFrom.row },\n        { type: RIGHT, section: rows[1], axis: rowAxis, headerFrom: takeHeaderFrom.row },\n        { type: TOP, section: columns[0], axis: colAxis, headerFrom: takeHeaderFrom.column },\n        { type: BOTTOM, section: columns[1], axis: colAxis, headerFrom: takeHeaderFrom.column }\n    ];\n\n    headerConfig.forEach((config, index) => {\n        let keys;\n        let length;\n        const {\n            type,\n            section,\n            axis,\n            headerFrom\n        } = config;\n\n        if (index < 2) {\n            keys = rowKeys;\n            length = rowProjections.length > 0 ? rowProjections.length : 1;\n        } else {\n            keys = columnKeys;\n            length = colProjections.length > 0 ? colProjections.length : 1;\n        }\n\n        if (section.length && headerFrom === type && axis && keys.length) {\n            const hContext = { axis, length, type };\n            let headers = [];\n            if (index < 2) {\n                hContext.keys = keys;\n                hContext.facetConfig = facetConfig.rows;\n                headers = headerPlaceholderGn(hContext, selectionObj, cells, labelManager);\n            } else {\n                hContext.facetConfig = facetConfig.columns;\n                hContext.keys = keys[0].map((key, i) => keys.map(e => e[i]));\n                headers = headerPlaceholderGn(hContext, selectionObj, cells, labelManager);\n            }\n            selectionObj[`${type}Headers`] = headers;\n        } else {\n            selectionObj[`${type}Headers`] = null;\n        }\n    });\n    return selectionObj;\n};\n\n/**\n * Generates matrices\n *\n * @param {Object} config Configuration to generate matrices\n * @param {Array} matrices Matrices containing the set of visual units and axes units\n * @param {Object} cells Contains a collection of the cells\n * @param {Object} labelManager smart label instance\n * @return {Object} contains a collection of matrices\n */\nexport const generateMatrices = (context, matrices, cells, labelManager) => {\n    const {\n        unitHeight,\n        unitWidth,\n        facetsAndProjections,\n        normalizedRows,\n        normalizedColumns,\n        selection,\n        axisFrom,\n        facetConfig,\n        encoders\n     } = context;\n    const placeholderContext = {\n        fields: {\n            rows: normalizedRows,\n            columns: normalizedColumns\n        },\n        matrices,\n        facetsAndProjections,\n        selection,\n        axisFrom,\n        facetConfig,\n        encoders\n    };\n    // Generate placeholders for all matrices\n    const selectionObj = generatePlaceholders(placeholderContext, cells, labelManager);\n    const {\n        columnsPrimary,\n        columnsSecondary,\n        rowsPrimary,\n        rowsSecondary,\n        leftHeaders,\n        topHeaders,\n        bottomHeaders,\n        rightHeaders\n    } = selectionObj;\n    const [rowPrime, rowSec, colPrime, colSec] = [rowsPrimary, rowsSecondary, columnsPrimary, columnsSecondary]\n        .map(d => (d ? d.getObjects() : []));\n    const [leftFacets, rightFacets] = [leftHeaders, rightHeaders].map(e => (e ? e.getObjects()\n                    .map(f => f.getObjects()) : []));\n\n    // Compute left matrix using left headers and the axes on the rows\n    let leftMatrix = leftFacets.length ? leftFacets.map((d, i) => {\n        rowPrime[i] = rowPrime[i] ? [rowPrime[i]] : [];\n        return [...d, ...rowPrime[i]];\n    }) : (rowPrime ? rowPrime.map(d => [d]) : []);\n\n    // Compute right matrix using right headers and the axes on the rows\n    const rightMatrix = rowSec.length ? rowSec.map((d, i) => [d, ...(rightFacets[i] || [])]) : (rightFacets.length ?\n        rightFacets.map(d => [...d]) : []);\n\n    const topMatrix = [];\n    if (topHeaders) {\n        const headers = topHeaders.getObjects();\n        headers.forEach((e) => {\n            const innerHeaders = e.getObjects();\n            innerHeaders.forEach((x, i) => {\n                topMatrix[i] = topMatrix[i] || [];\n                topMatrix[i].push(x);\n            });\n        });\n    }\n    // Compute top matrix using the top headers and axes on the columns\n    if (colPrime.length) {\n        topMatrix.push(colPrime);\n    }\n\n    // Bottom and right matrices are prepared using the user config.\n    let bottomMatrix = [];\n    if (colSec.length) {\n        bottomMatrix.push(colSec);\n    }\n    const currentBottomLength = bottomMatrix.length;\n    if (bottomHeaders) {\n        const headers = bottomHeaders.getObjects();\n        headers.forEach((e) => {\n            const innerHeaders = e.getObjects();\n            innerHeaders.forEach((x, i) => {\n                bottomMatrix[i + currentBottomLength] = bottomMatrix[i + currentBottomLength] || [];\n                bottomMatrix[i + currentBottomLength].push(x);\n            });\n        });\n    }\n\n    if (!leftMatrix.length && !rightMatrix.length) {\n        const cell = new cells.BlankCell();\n        cell.setAvailableSpace(unitWidth, unitHeight);\n        leftMatrix = [[cell]];\n    }\n\n    if (!topMatrix.length && (!bottomMatrix.length || !bottomMatrix[0].length)) {\n        const cell = new cells.BlankCell();\n        cell.setAvailableSpace(unitWidth, unitHeight);\n        bottomMatrix = [[cell]];\n    }\n\n    return {\n        rows: [leftMatrix, rightMatrix],\n        columns: [topMatrix, bottomMatrix],\n        selectionObj\n    };\n};\n\n/**\n * Computes matrices for a group\n *\n * @param {Object} datamodel on which the matrices are to be computed\n * @param {Object} config configuration of the matrices\n * @param {Object} layerRegistry contains the registered layers\n * @return {Object} conputed matrices\n * @memberof MatrixResolver\n */\nexport const computeMatrices = (context, config) => {\n    const {\n        resolver,\n        datamodel,\n        componentRegistry,\n        encoders\n    } = context;\n    const {\n            globalConfig,\n            selection,\n            transform\n        } = config;\n    const groupBy = globalConfig.groupBy;\n    const { smartlabel: labelManager } = resolver.dependencies();\n    const fieldMap = datamodel.getFieldsConfig();\n    const layerConfig = resolver.layerConfig();\n    const registry = resolver.registry();\n    const { fields: normalizedRows } = resolver.horizontalAxis();\n    const { fields: normalizedColumns } = resolver.verticalAxis();\n    const otherEncodings = resolver.optionalProjections(config, layerConfig);\n    const facetsAndProjections = resolver.getAllFields();\n    const matrixGnContext = {\n        // Configuration to be passed to generate the  different matrices.\n        // A common config is used for both value matrices and other matrices\n        normalizedColumns,\n        normalizedRows,\n        facetsAndProjections,\n        layers: layerConfig,\n        fieldMap,\n        otherEncodings,\n        encoders,\n        facetConfig: globalConfig.facetConfig || {},\n        axisFrom: globalConfig.axisFrom || {},\n        selection\n    };\n    const cells = {\n        GeomCell: resolver.getCellDef(registry.GeomCell),\n        AxisCell: resolver.getCellDef(registry.AxisCell),\n        BlankCell: resolver.getCellDef(registry.BlankCell),\n        TextCell: resolver.getCellDef(registry.TextCell)\n    };\n    const isRowSizeEqual = isDistributionEqual(normalizedRows);\n    const isColumnSizeEqual = isDistributionEqual(normalizedColumns);\n\n    resolver.colCells({});\n    resolver.rowCells({});\n    resolver.datamodelTransform(transform || {});\n\n    // Cell creation begins here\n    resolver.resetSimpleAxes();\n\n    const {\n            entryCellMap\n        } = resolver.cacheMaps();\n    const newCacheMap = {\n        exitCellMap: entryCellMap,\n        entryCellMap: new Map()\n    };\n\n    resolver.cacheMaps(newCacheMap);\n\n    const valueCellContext = {\n        config: globalConfig,\n        suppliedLayers: encoders.simpleEncoder.serializeLayerConfig(resolver.layerConfig()),\n        resolver,\n        cell: cells.GeomCell,\n        encoder: encoders.simpleEncoder,\n        newCacheMap\n    };\n    const fieldsConfig = datamodel.getFieldsConfig();\n    let groupedModel = datamodel;\n    if (!groupBy.disabled) {\n        const fields = getFieldsFromSuppliedLayers(valueCellContext.suppliedLayers,\n            datamodel.getFieldsConfig());\n        const allFields = extractFields(facetsAndProjections, fields).filter(field =>\n            fieldsConfig[field] && fieldsConfig[field].def.type === FieldType.DIMENSION);\n\n        const aggregationFns = encoders.simpleEncoder.getAggregationFns(groupBy.measures);\n        groupedModel = datamodel.groupBy(allFields, aggregationFns);\n    }\n\n    // return a callback function to create the cells from the matrix\n    const cellCreator = resolver.valueCellsCreator(valueCellContext);\n    // Creates value matrices from the datamodel and configs\n    const valueMatrixInfo = getMatrixModel(groupedModel, facetsAndProjections, cellCreator);\n\n    resolver.cacheMaps().exitCellMap.forEach((placeholder) => {\n        placeholder.remove();\n    });\n    resolver.cacheMaps().exitCellMap.clear();\n    resolver.valueMatrix(valueMatrixInfo.matrix);\n    resolver.createUnits(componentRegistry, config);\n\n    const { xAxes, yAxes } = mutateAxesFromMap(resolver.cacheMaps(), resolver.axes());\n\n    resolver.axes({\n        x: xAxes,\n        y: yAxes\n    });\n\n    const matrices = {\n        valuesMatrix: valueMatrixInfo,\n        axesMatrix: resolver.axes()\n    };\n    // Create all matrices\n    const { rows, columns, selectionObj } = generateMatrices(matrixGnContext, matrices, cells, labelManager);\n\n    resolver.rowMatrix(rows);\n    resolver.columnMatrix(columns);\n\n    return {\n        rows: resolver.rowMatrix(),\n        columns: resolver.columnMatrix(),\n        values: resolver.valueMatrix(),\n        isColumnSizeEqual,\n        isRowSizeEqual,\n        selection: selectionObj,\n        dataModels: {\n            groupedModel,\n            parentModel: datamodel\n        }\n    };\n};\n","import { Store, dataSelect, FieldType } from 'muze-utils';\nimport { DATA_UPDATE_COUNTER } from '../enums/defaults';\nimport { Variable } from '../variable';\nimport { PolarEncoder, CartesianEncoder } from '../encoder';\nimport {\n    DIMENSION,\n    MEASURE,\n    ORDINAL,\n    LINEAR,\n    ROW,\n    COLUMN,\n    COL,\n    LEFT,\n    RIGHT,\n    TOP,\n    BOTTOM,\n    COLOR,\n    SIZE,\n    TEMPORAL,\n    SHAPE,\n    INTERACTION,\n    GRID_LINES,\n    GRID_BANDS,\n    HEADER,\n    FACET,\n    X,\n    Y,\n    POLAR\n} from '../enums/constants';\n\n/**\n * Creates an instance of a store which contains the arguments to make the class reactive\n *\n * @return {Object} instance of store\n * @memberof VisualGroup\n */\nexport const initStore = () => new Store({\n    [DATA_UPDATE_COUNTER]: DATA_UPDATE_COUNTER\n});\n\n/**\n *\n *\n * @param {*} arr\n */\nexport const isDistributionEqual = arr => [...arr[0], ...arr[1]].reduce((isEqual, row) => {\n    const rowType = row.type();\n\n    if (rowType === MEASURE || rowType === TEMPORAL) {\n        isEqual = true;\n    }\n    return isEqual;\n}, false);\n\n/**\n *\n *\n */\nexport const initializeCacheMaps = () => ({\n    cellMap: new Map(),\n    xAxesMap: new Map(),\n    yAxesMap: new Map(),\n    entryCellMap: new Map(),\n    exitCellMap: new Map()\n});\n\n/**\n *\n *\n * @param {*} axisName\n * @param {*} id\n */\nexport const getAxisKey = (axisName, id, scaleType) => `${axisName}-axis-${id}-${scaleType}`;\n\n/**\n *\n *\n * @param {*} rowId\n * @param {*} columnId\n */\nexport const getCellKey = (rowId, columnId) => `cell-${rowId}-${columnId}`;\n\n/**\n *\n *\n * @param {*} config\n * @return\n */\nexport const extractUnitConfig = (config) => {\n    const unitConfig = {};\n    const attrNames = [INTERACTION, GRID_LINES, GRID_BANDS];\n\n    attrNames.forEach((attr) => {\n        if (config[attr] !== undefined) {\n            unitConfig[attr] = config[attr];\n        }\n    });\n    return unitConfig;\n};\n\n/**\n *\n *\n * @param {*} headers\n * @param {*} index\n * @param {*} rowLength\n * @return\n * @memberof MatrixResolver\n */\nexport const getHeaderText = (headers, index, rowLength) => {\n    let header = '';\n\n    if (index === rowLength - 1 && headers.length > rowLength) {\n        for (let i = index; i < headers.length - 1; i++) {\n            header += `${headers[i].toString()} / `;\n        }\n        header += headers[headers.length - 1].toString();\n        return header;\n    } else if (headers[index]) {\n        return headers[index].toString();\n    }\n    return '';\n};\n\n/**\n *\n *\n * @param {*} fields\n * @param {*} fieldHeaders\n * @param {*} TextCell\n * @param {*} labelManager\n * @return\n */\nexport const headerCreator = (fields, fieldHeaders, TextCell, labelManager) => {\n    const headers = fields.length > 0 ? fields[0].map((label, i) => new TextCell({ type: HEADER }, { labelManager })\n                    .source(getHeaderText(fieldHeaders, i, fields[0].length))) : [];\n    return headers;\n};\n\n/**\n *\n *\n * @param {*} variable\n * @param {*} allFields\n * @return\n */\nexport const findInGroup = (variable, allFields) => {\n    let channel = null;\n\n    [COLOR, SIZE, SHAPE].forEach((e) => {\n        if (this.store.get(e) && variable === this.store.get(e)[0]) {\n            channel = e;\n        }\n    });\n\n    if (channel) {\n        return { channel };\n    }\n    [ROW, COL].forEach((facetType) => {\n        allFields[`${facetType}Facets`].forEach((e) => {\n            if (e.toString() === variable) {\n                channel = { channel: FACET, type: facetType === COL ? COLUMN : ROW };\n            }\n        });\n    });\n\n    if (channel) {\n        return channel;\n    }\n\n    [ROW, COL].forEach((projType) => {\n        allFields[`${projType}Projections`].forEach((e) => {\n            e.forEach((m) => {\n                if (m.toString() === variable) {\n                    channel = projType === COL ? X : Y;\n                }\n            });\n        });\n    });\n\n    if (channel) {\n        return { channel };\n    }\n    return null;\n};\n\n/**\n *\n *\n * @param {*} datamodel\n * @param {*} field\n */\nexport const getAxisType = (fieldsConfig, field) => {\n    let fieldType = ORDINAL;\n\n    if (field && fieldsConfig[field].def.type !== DIMENSION) {\n        fieldType = LINEAR;\n    }\n    return fieldType;\n};\n\n/**\n *\n *\n * @param {*} datamodel\n * @param {*} fieldName\n * @return\n */\nexport const retriveDomainFromData = (datamodel, fieldName) => {\n    const field = datamodel.getFieldspace().fields.find(d => d._ref.name === fieldName.toString());\n    return field.domain();\n};\n\n/**\n *\n *\n * @memberof MatrixResolver\n */\nexport const mutateAxesFromMap = (cacheMaps, axes) => {\n    let xAxes = null;\n    let yAxes = null;\n    const {\n        xAxesMap,\n        yAxesMap\n    } = cacheMaps;\n    const {\n        x: xAxisSet,\n        y: yAxisSet\n    } = axes;\n\n    xAxisSet && xAxisSet.forEach((axisId) => {\n        const xAxis = xAxesMap.get(axisId);\n        xAxes = xAxes || [];\n        xAxes.push(xAxis);\n    });\n\n    yAxisSet && yAxisSet.forEach((axisId) => {\n        const yAxis = yAxesMap.get(axisId);\n        yAxes = yAxes || [];\n        yAxes.push(yAxis);\n    });\n\n    return {\n        xAxes, yAxes\n    };\n};\n\n/**\n *\n *\n * @param {*} layers\n * @return\n */\nexport const getEncoder = (layers) => {\n    let encoder = new CartesianEncoder();\n\n    if (layers) {\n        // Figuring out the kind of layers the group will have\n        encoder = layers.every(e => e.mark === 'arc') ? new PolarEncoder() : encoder;\n    }\n    return encoder;\n};\n\n /**\n *\n *\n * @param {*} type\n * @param {*} fields\n * @param {*} userAxisFromConfig\n * @return\n */\nexport const getHeaderAxisFrom = (type, fields, userAxisFromConfig) => {\n    let axisFrom = userAxisFromConfig[type];\n    let headerFrom = '';\n    const options = type === ROW ? [LEFT, RIGHT] : [BOTTOM, TOP];\n    const [firstField, secondField] = fields;\n    const firstFieldType = i => (firstField.length ? firstField[i].type() : null);\n    const secondFieldType = i => (secondField.length ? secondField[i].type() : null);\n\n    if (firstFieldType(firstField.length - 1) === DIMENSION && secondFieldType(0) === DIMENSION) {\n        headerFrom = axisFrom ? options[1 - options.indexOf(axisFrom)] : options[1];\n\n        if (type === COLUMN && (firstField[firstField.length - 1].toString() === secondField[0].toString())) {\n            axisFrom = TOP;\n        } else {\n            axisFrom = axisFrom || options[0];\n        }\n    } else if (secondFieldType(secondField.length - 1) === DIMENSION) {\n        headerFrom = type === ROW ? RIGHT : BOTTOM;\n        axisFrom = type === ROW ? RIGHT : BOTTOM;\n    } else {\n        headerFrom = type === ROW ? LEFT : TOP;\n        axisFrom = type === ROW ? LEFT : TOP;\n    }\n    if (firstFieldType(firstField.length - 1) === MEASURE && secondFieldType(0) === MEASURE) {\n        axisFrom = type === ROW ? LEFT : TOP;\n    } else if (secondFieldType(0) === MEASURE) {\n        axisFrom = type === ROW ? RIGHT : BOTTOM;\n    }\n    return [headerFrom, axisFrom];\n};\n\n/**\n *\n *\n * @param {*} type\n * @param {*} fields\n * @param {*} layers\n * @return\n * @memberof MatrixResolver\n */\nexport const setFacetsAndProjections = (context, fieldInfo, encoder) => {\n    const {\n        fields,\n        type\n    } = fieldInfo;\n    const { facets, projections } = encoder.simpleEncoder.getFacetsAndProjections(fields, type);\n\n    context.facets({ [`${type}Facets`]: facets });\n    context.projections({ [`${type}Projections`]: projections });\n\n    return { facets, projections, fields };\n};\n\n/**\n * Creates a selection set from a data set with corresponding attributes\n *\n * @export\n * @param {Selection} sel contains previous selection\n * @param {Object} appendObj Object to be appended\n * @param {Array} data Data based on which the selection is entered/updated/removed\n * @param {Object} [attrs={}] Attributes to be set on the data\n * @return {Selection} Merged selection\n */\nexport const createSelection = (sel, appendObj, data, idFn) => {\n    let selection = sel || dataSelect([]);\n\n    selection = selection.data(data, idFn);\n\n    const enter = selection.enter().append(appendObj);\n    const mergedSelection = enter.merge(selection);\n\n    selection.exit() && selection.exit().remove();\n    return mergedSelection;\n};\n\nconst getRowBorders = (left, right) => {\n    const borders = {};\n    borders.top = false;\n    borders.bottom = false;\n    if (left.length > 1 || right.length > 1) {\n        borders.top = true;\n        borders.bottom = true;\n    }\n    return borders;\n};\n\nconst getColumnsBorders = (top, bottom) => {\n    const borders = {};\n    borders.left = false;\n    borders.right = false;\n    if (top.length || bottom.length) {\n        if ((top[0] && top[0].length > 1) || (bottom[0] && bottom[0].length > 1)) {\n            borders.left = true;\n            borders.right = true;\n        }\n    }\n    return borders;\n};\n\nconst getValueBorders = (rows, columns) => {\n    const borders = { top: true, left: true, bottom: true, right: true };\n    const borderTypeRow = [LEFT, RIGHT];\n    const borderTypeCol = [TOP, BOTTOM];\n    rows.forEach((e, i) => {\n        if (e[0] && e[0].length) {\n            borders[borderTypeRow[i]] = true;\n        } else {\n            borders[borderTypeRow[i]] = false;\n        }\n    });\n    columns.forEach((e, i) => {\n        if (e.length) {\n            borders[borderTypeCol[i]] = true;\n        } else {\n            borders[borderTypeCol[i]] = false;\n        }\n    });\n\n    return borders;\n};\n\nexport const getBorders = (matrices, encoder) => {\n    let showRowBorders = { top: false, bottom: false };\n    let showColBorders = { left: false, right: false };\n    let showValueBorders = { top: false, bottom: false, left: false, right: false };\n    const {\n        rows,\n        columns,\n        values: valueMatrix\n    } = matrices;\n    const [leftRows, rightRows] = rows;\n    const [topColumns, bottomColumns] = columns;\n    const {\n        rowDimensions,\n        columnDimensions,\n        rowTemporalFields,\n        columnTemporalFields,\n        columnMeasures,\n        rowMeasures\n    } = encoder.fieldInfo();\n    const allDimensionLength = rowDimensions.length + columnDimensions.length;\n    const allMeasuresLength = rowMeasures.length + columnMeasures.length;\n    const allTemporalFieldsLength = rowTemporalFields.length + columnTemporalFields.length;\n\n    if (encoder.constructor.type() === POLAR) {\n        if (!allDimensionLength) {\n            return { showRowBorders, showColBorders, showValueBorders };\n        }\n    } else if (!allMeasuresLength && !allTemporalFieldsLength && allDimensionLength <= 2) {\n        return { showRowBorders, showColBorders, showValueBorders };\n    }\n\n    showRowBorders = getRowBorders(leftRows, rightRows);\n    showColBorders = getColumnsBorders(topColumns, bottomColumns);\n    showValueBorders = getValueBorders([leftRows, rightRows], [topColumns, bottomColumns]);\n\n    if (valueMatrix.length > 1) {\n        showValueBorders.top = true;\n        showValueBorders.bottom = true;\n    }\n    if (valueMatrix.length && valueMatrix[0].length > 1) {\n        showValueBorders.left = true;\n        showValueBorders.right = true;\n    }\n    return { showRowBorders, showColBorders, showValueBorders };\n};\n\nexport const getFieldsFromSuppliedLayers = (suppliedLayerConfig, fieldsConfig) => {\n    let fields = [];\n    const encodingArr = suppliedLayerConfig.map((conf) => {\n        if (conf.def instanceof Array) {\n            return conf.def.map(def => def.encoding);\n        }\n        return conf.def.encoding || {};\n    });\n    fields = [...fields, [].concat(...encodingArr.map(enc => Object.values(enc).map(d => d.field)))];\n    fields = fields.filter(field => fieldsConfig[field] && fieldsConfig[field].def.type === FieldType.DIMENSION);\n    return fields;\n};\n\nexport const extractFields = (facetsAndProjections, layerFields) => {\n    const fields = Object.values(facetsAndProjections).map((arr) => {\n        const flattenArray = [].concat(...arr);\n        return [].concat(...flattenArray.map((field) => {\n            if (field instanceof Variable) {\n                return field.getMembers();\n            }\n            return field;\n        }));\n    });\n    return [].concat(...fields, ...layerFields);\n};\n","export {\n    initStore, findInGroup, getEncoder, getAxisType, getAxisKey, retriveDomainFromData, getBorders\n} from './group-utils';\nexport { default as MatrixResolver } from './matrix-resolver';\n","import { retriveDomainFromData } from './group-utils';\n\n/**\n * Gets name of fields form the variables\n *\n * @param {*} fields1\n * @param {*} [fields2=[]]\n * @return\n */\nconst getFieldNames = (fields1, fields2 = []) => [fields1, fields2].map(fields => fields.reduce((acc, d) => {\n    acc = [...acc, ...d.getMembers()];\n    return acc;\n}, []));\n\n/**\n * Creates a selected datamodel from a parent datamodel and a set of field names\n *\n * @param {Object} datamodel provided as input\n * @param {Array} fieldNames schema  names\n * @param {Array} fieldValues values of those schema names to be selected\n * @return {Object} creates a new selected datamodel\n */\nconst createSelectedDataModel = (datamodel, fieldNames, fieldValues) =>\n    datamodel.select(fields => fieldNames.every((field, k) => fields[field].value === fieldValues[k]));\n\n/**\n *\n *\n * @param {*} facets\n * @param {*} keyArray\n * @return\n */\nconst uniqueKeyGenerator = (keyArray, context, depth = 0, val = []) => {\n    const {\n        facets,\n        dataModel,\n        uniqueValues\n    } = context;\n\n    // Get unique keys for the next depth recursively if required\n    if (facets[depth + 1]) {\n        const field = facets[depth];\n        uniqueValues.forEach((value) => {\n            const newDm = dataModel.select(fields => fields[field].value === value);\n            const nextDepthUniqueValues = retriveDomainFromData(newDm, facets[depth + 1]);\n            const newContext = {\n                facets,\n                dataModel: newDm,\n                uniqueValues: nextDepthUniqueValues\n            };\n\n            uniqueKeyGenerator(keyArray, newContext, depth + 1, [...val, value]);\n        });\n    } else {\n        uniqueValues.forEach((value) => {\n            keyArray.push([...val, value]);\n        });\n    }\n};\n\n/**\n * projects row model based on the set of row and/or column and other projection fields\n *\n * @param {Object} datamodel provided as input\n * @return {Object} Projected datamodel\n */\nconst projectRows = (datamodel, projections) => {\n    const {\n        allColumnProjections,\n        rowProjections,\n        optionalProjections\n    } = projections;\n\n    if (rowProjections.length > 0) {\n        return rowProjections.map((projectFields) => {\n            const [projFieldNames, colProjFieldNames] = getFieldNames(projectFields, allColumnProjections);\n            return datamodel.project([...projFieldNames, ...colProjFieldNames, ...optionalProjections]);\n        });\n    }\n    return [datamodel];\n};\n\n/**\n * Adds the datamodels to current row index based on column fields\n *\n * @param {Array} context current context\n * @param {Array} callback List of facets applied to the current datamodel\n */\nconst pushToMatrix = (context, callback) => {\n    let cells = [];\n    const {\n        matrix,\n        datamodel,\n        facetInfo,\n        fieldInfo\n    } = context;\n    // Get projected fields for current row\n    const {\n        rowProjections,\n        colProjections,\n        optionalProjections\n    } = fieldInfo;\n    const {\n        rowIndex,\n        columnIndex\n    } = facetInfo;\n    const rowProj = rowProjections[(rowIndex) % rowProjections.length] || [];\n\n    // Get the cells for the matrix from the return function of the callback on the datamodel.\n    // callback function -> (datamodel, {projections, indices}, facets)\n    if (colProjections.length > 0) {\n        cells = colProjections.map((projectFields, projIdx) => {\n            const [colProjFieldNames, rowProjFieldNames] = getFieldNames(projectFields, rowProj);\n            const projectedDm = datamodel.project([...colProjFieldNames, ...rowProjFieldNames, ...optionalProjections]);\n            const projections = { rowFields: rowProj, columnFields: projectFields };\n            const indices = { rowIndex, columnIndex: columnIndex * colProjections.length + projIdx };\n\n            return callback(projectedDm, { projections, indices }, facetInfo);\n        });\n    } else {\n        const projections = { rowFields: rowProj, columnFields: [] };\n        const indices = { rowIndex, columnIndex };\n\n        cells = [callback(datamodel, { projections, indices }, facetInfo)];\n    }\n\n    matrix[rowIndex] = matrix[rowIndex] || [];\n    matrix[rowIndex].push(...cells);\n};\n\n/**\n * Gets Matrixes for corresponding datamodel, facets and projections\n *\n * @param {Object} dataModel input datamodel\n * @param {Object} fieldMap corresponding fieldmap\n * @param {Array} facetsAndProjections contains the set of facets and projections for the matrices\n * @param {Function} callback Callback executed after datamodels are prepared after sel/proj\n * @return {Object} set of matrices with the corresponding row and column keys\n */\nexport const getMatrixModel = (dataModel, fieldInfo, callback) => {\n    let rowDataModels = [];\n    const rowKeys = [];\n    const columnKeys = [];\n    const allColumnProjections = [];\n    const matrix = [];\n    const facetInfo = [];\n    const {\n        rowFacets,\n        colFacets,\n        colProjections\n    } = fieldInfo;\n\n    colProjections.forEach((colProj) => {\n        allColumnProjections.push(...colProj);\n    });\n    fieldInfo.allColumnProjections = allColumnProjections;\n\n    // Performing row selection and projection\n    if (rowFacets.length > 0) {\n        // Get unique values for the root level of facet\n        const field = rowFacets[0].toString();\n        const firstLevelRowKeys = retriveDomainFromData(dataModel, field);\n\n        // Get unique keys in the form of an array of arrays for each row\n        uniqueKeyGenerator(rowKeys, { facets: rowFacets, dataModel, uniqueValues: firstLevelRowKeys });\n\n        // Apply selection -> projection -> row datamodels\n        rowKeys.forEach((val) => {\n            // Create faceted datamodel\n            const [rowFacetFieldNames] = getFieldNames(rowFacets);\n            const selectedDataModel = createSelectedDataModel(dataModel, rowFacetFieldNames, val);\n\n            // Project the datamodel based on the number of projections (based on last levels)\n            facetInfo.push([rowFacetFieldNames, val]);\n            rowDataModels.push(...projectRows(selectedDataModel, fieldInfo));\n        });\n    } else {\n        // No row facets, hence only row projection\n        rowDataModels.push(...projectRows(dataModel, fieldInfo));\n    }\n\n    // Maintaining set of row datamodels for column resolution\n    rowDataModels = rowDataModels.length > 0 ? rowDataModels : [[]];\n\n    // Performing column selection and projection\n    if (colFacets.length > 0) {\n        const colFacetNames = colFacets.map(d => `${d}`);\n        // Get unique values for the root level of facet\n        const field = colFacetNames[0];\n        const firstLevelColumnKeys = retriveDomainFromData(dataModel, field);\n\n        // Get unique keys to create faceted datamodels: this time for columns\n        uniqueKeyGenerator(columnKeys, {\n            facets: colFacetNames,\n            dataModel,\n            uniqueValues: firstLevelColumnKeys\n        });\n\n        // For each row in the datamodel, apply selection -> projection -> push the projection to matri\n        rowDataModels.forEach((dme, rIndex) => {\n            facetInfo[rIndex] = facetInfo[rIndex] || [[], []];\n            columnKeys.forEach((val, cIndex) => {\n                matrix[rIndex] = matrix[rIndex] || [];\n\n                // If datamodel is not present in current row, choose parent datamodel\n                const datamodel = (dme.constructor && dme.constructor.name === 'DataModel') ? dme : dataModel;\n\n                // Selection is made on the datamodel for the current row\n                const selectedDataModel = createSelectedDataModel(datamodel, colFacetNames, val);\n                const context = {\n                    matrix,\n                    datamodel: selectedDataModel,\n                    facetInfo: {\n                        rowFacets: facetInfo[rIndex],\n                        colFacets: [colFacets, val],\n                        rowIndex: rIndex,\n                        columnIndex: cIndex\n                    },\n                    fieldInfo\n                };\n                pushToMatrix(context, callback);\n            });\n        });\n    } else {\n        // No column facets, hence only row projection\n        rowDataModels.forEach((dme, rIndex) => {\n            facetInfo[rIndex] = facetInfo[rIndex] || [[], []];\n            const context = {\n                matrix,\n                datamodel: dme || dataModel,\n                facetInfo: {\n                    rowFacets: facetInfo[rIndex],\n                    colFacets: [[], []],\n                    rowIndex: rIndex,\n                    columnIndex: 0\n                },\n                fieldInfo\n            };\n\n            pushToMatrix(context, callback);\n        });\n    }\n\n    // Getting column keys\n    const transposedColKeys = columnKeys.length > 0 ? columnKeys[0].map((col, i) =>\n                    columnKeys.map(row => row[i])) : columnKeys;\n\n    return { matrix, rowKeys, columnKeys: transposedColKeys };\n};\n","import { VisualUnit } from '@chartshq/visual-unit';\nimport {\n     initializeCacheMaps,\n     headerCreator,\n     extractUnitConfig,\n     setFacetsAndProjections\n} from './group-utils';\nimport {\n     ROW, COL, LEFT, RIGHT, COLOR, SIZE, SHAPE, DETAIL, CELL, X_AXES, Y_AXES, ENTRY_CELLS, EXIT_CELLS, INITIALIZED,\n     AXIS, UNIT, BEFORE_UPDATE, UPDATED, VALUE_MATRIX, FACET_HEADERS\n} from '../enums/constants';\nimport { createValueCells, computeMatrices } from './cell-creator';\n/**\n * Resolves the matrices from configuration provided\n *\n * @export\n * @class MatrixResolver\n */\nexport default class MatrixResolver {\n\n    /**\n     * Creates an instance of MatrixResolver.\n     * @param {Object} dependencies needed to run the resolver\n     * @memberof MatrixResolver\n     */\n    constructor (dependencies) {\n        this._registry = {};\n        this._layerConfig = [];\n        this._matrixLayers = [];\n        this._dependencies = dependencies;\n        this._rowMatrix = [];\n        this._columnMatrix = [];\n        this._valueMatrix = [];\n        this._facets = {};\n        this._projections = {};\n        this._datamodelTransform = {};\n        this._units = [];\n        this._cacheMaps = {};\n        this._axes = {\n            x: {},\n            y: {},\n            color: [],\n            size: [],\n            shape: []\n        };\n\n        this.cacheMaps(initializeCacheMaps());\n    }\n\n    /**\n     * Set:  Registers placeholders, Get: return {Object} those placeholders\n     *\n     * @param {Object} placeholders cells that will construct the group\n     * @return {Object} Either current instance or the set of placeholders\n     * @memberof MatrixResolver\n     */\n    registry (...placeholders) {\n        if (placeholders.length) {\n            Object.entries(placeholders[0]).forEach((val) => {\n                this._registry[val[0]] = val[1];\n            });\n            return this;\n        }\n        return this._registry;\n    }\n\n    /**\n     * Used to set the layer config from outside or get current layer info\n     *\n     * @param {Object} type configuration of layer provided externally\n     * @return {Object} either the layer or current instance\n     * @memberof MatrixResolver\n     */\n    dependencies (...dep) {\n        if (dep.length) {\n            this._dependencies = dep[0];\n            return this;\n        }\n        return this._dependencies;\n    }\n\n    /**\n     * Used to set the layer config from outside or get current layer info\n     *\n     * @param {Object} type configuration of layer provided externally\n     * @return {Object} either the layer or current instance\n     * @memberof MatrixResolver\n     */\n    units (...unitArr) {\n        if (unitArr.length) {\n            this._units = unitArr[0];\n            return this;\n        }\n        return this._units;\n    }\n\n    /**\n     * Used to set the layer config from outside or get current layer info\n     *\n     * @param {Object} layer configuration of layer provided externally\n     * @return {Object} either the layer or current instance\n     * @memberof MatrixResolver\n     */\n    layerConfig (...config) {\n        if (config.length) {\n            this._layerConfig = config[0];\n            return this;\n        }\n        return this._layerConfig;\n    }\n\n    /**\n     * Used to set the layer config from outside or get current layer info\n     *\n     * @param {Object} type configuration of layer provided externally\n     * @return {Object} either the layer or current instance\n     * @memberof MatrixResolver\n     */\n    matrixLayers (...layers) {\n        if (layers.length) {\n            this._matrixLayers = layers[0];\n            return this;\n        }\n        return this._matrixLayers;\n    }\n\n    /**\n     * Used to set the layer config from outside or get current layer info\n     *\n     * @param {Object} type configuration of layer provided externally\n     * @return {Object} either the layer or current instance\n     * @memberof MatrixResolver\n     */\n    datamodelTransform (...transform) {\n        if (transform.length) {\n            this._datamodelTransform = transform[0];\n            return this;\n        }\n        return this._datamodelTransform;\n    }\n\n    /**\n     * Used to set the layer config from outside or get current layer info\n     *\n     * @param {Object} type configuration of layer provided externally\n     * @return {Object} either the layer or current instance\n     * @memberof MatrixResolver\n     */\n    cacheMaps (...maps) {\n        if (maps.length) {\n            [CELL, X_AXES, Y_AXES, ENTRY_CELLS, EXIT_CELLS].forEach((e) => {\n                this._cacheMaps[`${e}Map`] = maps[0][`${e}Map`] || this._cacheMaps[`${e}Map`];\n            });\n            return this;\n        }\n        return this._cacheMaps;\n    }\n\n    /**\n     * Used to set the layer config from outside or get current layer info\n     *\n     * @param {Object} type configuration of layer provided externally\n     * @return {Object} either the layer or current instance\n     * @memberof MatrixResolver\n     */\n    rowCells (...cells) {\n        if (cells.length) {\n            this._rowCells = cells[0];\n            return this;\n        }\n        return this._rowCells;\n    }\n\n    /**\n     * Used to set the layer config from outside or get current layer info\n     *\n     * @param {Object} type configuration of layer provided externally\n     * @return {Object} either the layer or current instance\n     * @memberof MatrixResolver\n     */\n    colCells (...cells) {\n        if (cells.length) {\n            this._colCells = cells[0];\n            return this;\n        }\n        return this._colCells;\n    }\n\n    /**\n     * Used to set the layer config from outside or get current layer info\n     *\n     * @param {Object} type configuration of layer provided externally\n     * @return {Object} either the layer or current instance\n     * @memberof MatrixResolver\n     */\n    axes (...axes) {\n        if (axes.length) {\n            this._axes = Object.assign({}, this._axes, axes[0]);\n            return this;\n        }\n        return this._axes;\n    }\n\n    /**\n     * Used to set the layer config from outside or get current layer info\n     *\n     * @param {Object} type configuration of layer provided externally\n     * @return {Object} either the layer or current instance\n     * @memberof MatrixResolver\n     */\n    rowMatrix (...rowMat) {\n        if (rowMat.length) {\n            this._rowMatrix = rowMat[0];\n            return this;\n        }\n        return this._rowMatrix;\n    }\n\n    /**\n     * Used to set the layer config from outside or get current layer info\n     *\n     * @param {Object} type configuration of layer provided externally\n     * @return {Object} either the layer or current instance\n     * @memberof MatrixResolver\n     */\n    columnMatrix (...colMat) {\n        if (colMat.length) {\n            this._columnMatrix = colMat[0];\n            return this;\n        }\n        return this._columnMatrix;\n    }\n\n    /**\n     * Used to set the layer config from outside or get current layer info\n     *\n     * @param {Object} type configuration of layer provided externally\n     * @return {Object} either the layer or current instance\n     * @memberof MatrixResolver\n     */\n    valueMatrix (...valMat) {\n        if (valMat.length) {\n            this._valueMatrix = valMat[0];\n            return this;\n        }\n        return this._valueMatrix;\n    }\n\n    /**\n     *\n     *\n     * @param {*} facets\n     * @return\n     * @memberof MatrixResolver\n     */\n    facets (...facets) {\n        if (facets.length) {\n            Object.entries(facets[0]).forEach((e) => {\n                this._facets[e[0]] = e[1];\n            });\n            return this;\n        }\n        return this._facets;\n    }\n\n    /**\n     *\n     *\n     * @param {*} projections\n     * @return\n     * @memberof MatrixResolver\n     */\n    projections (...projections) {\n        if (projections.length) {\n            Object.entries(projections[0]).forEach((e) => {\n                this._projections[e[0]] = e[1];\n            });\n            return this;\n        }\n        return this._projections;\n    }\n\n    /**\n     *\n     *\n     * @param {*} config\n     * @param {*} layerConfig\n     * @return\n     * @memberof MatrixResolver\n     */\n    optionalProjections (config, layerConfig) {\n        const otherEncodings = {};\n        const optionalProjections = [];\n        const otherEncodingTypes = [SIZE, COLOR, SHAPE];\n\n        otherEncodingTypes.forEach((type) => {\n            if (config[type] && config[type].field) {\n                const enc = config[type];\n                otherEncodings[type] = enc.field;\n                optionalProjections.push(enc.field);\n            }\n        });\n\n        if (config[DETAIL]) {\n            optionalProjections.push(...config.detail);\n        }\n\n        if (layerConfig.length) {\n            layerConfig.forEach((layer) => {\n                if (layer.encoding) {\n                    Object.values(layer.encoding).forEach((enc) => {\n                        if (enc && optionalProjections.indexOf(enc.field) === -1) {\n                            optionalProjections.push(enc.field ? enc.field : enc);\n                        }\n                    });\n                }\n            });\n        }\n        this.projections({ optionalProjections });\n        return otherEncodings;\n    }\n\n    /**\n     * return the normalized set of rows and facets and projections\n     *\n     * @param {Object} rows parameters needed to set horizontal axis consisiting of rows\n     * @return {Object} facets, projections and normalized rows\n     * @memberof MatrixResolver\n     */\n    horizontalAxis (rows, encoder) {\n        if (rows) {\n            this._horizontalAxis = setFacetsAndProjections(this, { type: ROW, fields: rows }, encoder);\n            return this;\n        }\n        return this._horizontalAxis;\n    }\n\n    /**\n     * return the normalized set of columns and facets and projections\n     *\n     * @param {Object} columns parameters needed to set vertical axis consisiting of columns\n     * @return {Object} facets, projections and normalized columns\n     * @memberof MatrixResolver\n     */\n    verticalAxis (columns, encoder) {\n        if (columns) {\n            this._verticalAxis = setFacetsAndProjections(this, { type: COL, fields: columns }, encoder);\n            return this;\n        }\n        return this._verticalAxis;\n    }\n\n    /**\n     * Gets the class definition of a particular cell type(if the particular type has been extended, that particular\n     * definition is returned)\n     *\n     * @param {Object} cell cell whose class definition is to be retrieved\n     * @return {Object} cell definition\n     * @memberof MatrixResolver\n     */\n    getCellDef (cell) {\n        const registry = this.registry();\n\n        Object.values(registry).forEach((e) => {\n            if (e.prototype instanceof cell) {\n                cell = e;\n            }\n        });\n        return cell;\n    }\n\n    /**\n     * return a visual cell creator along with its axis information to be injected to the datamodel creation\n     * function\n     *\n     * @param {Object} GeomCell Type of cell to be created\n     * @return {Object} Created cell\n     * @memberof MatrixResolver\n     */\n    valueCellsCreator (context) {\n        // reset matrix layers\n        this.matrixLayers([]);\n\n        return (datamodel, fieldInfo, facets) => createValueCells(context, datamodel, fieldInfo, facets);\n    }\n\n    /**\n     * Callback to be applied on each cell of a matrix of a particular type\n     *\n     * @param {string} matrixType type of matrix on which callback is to be applied\n     * @param {Function} callback function to be applied to each cell\n     * @memberof MatrixResolver\n     */\n    forEach (matrixType, callback) {\n        this[matrixType]().forEach((row, rIndex) => {\n            row.forEach((col, cIndex) => {\n                callback(rIndex, cIndex, col);\n            });\n        });\n    }\n\n    /**\n     *\n     *\n     * @return\n     * @memberof MatrixResolver\n     */\n    getAllFields () {\n        const retObj = this.projections();\n\n        Object.entries(this.facets()).forEach((e) => {\n            retObj[e[0]] = e[1];\n        });\n        return retObj;\n    }\n\n    /**\n     *\n     *\n     * @memberof MatrixResolver\n     */\n    resetSimpleAxes () {\n        return this.axes({\n            x: new Set(),\n            y: new Set()\n        });\n    }\n\n    /**\n     *\n     *\n     * @param {*} componentRegistry\n     * @param {*} config\n     * @memberof MatrixResolver\n     */\n    createUnits (componentRegistry, config) {\n        const {\n            globalConfig,\n            alias\n        } = config;\n        const {\n            layerRegistry,\n            sideEffectRegistry\n        } = componentRegistry;\n        const {\n            smartlabel: smartLabel,\n            lifeCycleManager\n        } = this.dependencies();\n        // Provide the source for the matrix\n        const units = [];\n        // Setting unit configuration\n        const unitConfig = extractUnitConfig(globalConfig || {});\n\n        this.forEach(VALUE_MATRIX, (i, j, el) => {\n            let unit = el.source();\n            if (!unit) {\n                unit = VisualUnit.create({\n                    layerRegistry,\n                    sideEffectRegistry\n                }, {\n                    smartLabel,\n                    lifeCycleManager\n                });\n                el.source(unit);\n                units.push(unit);\n            }\n            unit.parentAlias(alias);\n            el.config(unitConfig);\n        });\n\n        lifeCycleManager.notify({ client: units, action: INITIALIZED, formalName: UNIT });\n        return this.units(units);\n    }\n\n    /**\n     *\n     *\n     * @param {*} config\n     * @memberof MatrixResolver\n     */\n    setDomains (config, datamodel, encoders) {\n        const {\n            color,\n            shape,\n            size,\n            globalConfig\n        } = config;\n        const groupBy = globalConfig.groupBy;\n        const {\n            rowFacets,\n            colFacets\n        } = this.getAllFields();\n        const encoding = {\n            color,\n            shape,\n            size\n        };\n        const facetFields = [...rowFacets.map(e => e.toString()), ...colFacets.map(e => e.toString())];\n        const retContext = {\n            domains: encoders.simpleEncoder.getRetinalFieldsDomain(datamodel, encoding, facetFields, groupBy),\n            axes: this.axes(),\n            encoding\n        };\n        encoders.retinalEncoder.setCommonDomain(retContext);\n        return this;\n    }\n\n    /**\n     *\n     *\n     * @return\n     * @memberof MatrixResolver\n     */\n    getRetinalAxes () {\n        const {\n            color,\n            shape,\n            size\n        } = this.axes();\n\n        return {\n            color: [...color],\n            shape: [...shape],\n            size: [...size]\n        };\n    }\n\n    /**\n     *\n     *\n     * @param {*} type\n     * @return\n     * @memberof MatrixResolver\n     */\n    getSimpleAxes (type) {\n        return this.axes()[`${type}`];\n    }\n\n    /**\n     *\n     *\n     * @param {*} datamodel\n     * @param {*} config\n     * @memberof MatrixResolver\n     */\n    createRetinalAxes (fieldsConfig, config, encoders) {\n        const layerConfig = this.layerConfig();\n        this.optionalProjections(config, layerConfig);\n        const retinalAxes = encoders.retinalEncoder.createAxis({\n            fieldsConfig,\n            config,\n            axes: this.axes()\n        });\n        const {\n            lifeCycleManager\n        } = this.dependencies();\n\n        [COLOR, SHAPE, SIZE].forEach((e) => {\n            this.axes()[e] = retinalAxes[e];\n        });\n\n        lifeCycleManager.notify({ client: this.axes(), action: INITIALIZED, formalName: AXIS });\n        lifeCycleManager.notify({ client: this.units(), action: BEFORE_UPDATE, formalName: UNIT });\n\n        const units = [];\n        const matrixLayers = this.matrixLayers();\n\n        this.forEach(VALUE_MATRIX, (i, j, el) => {\n            el.axes(retinalAxes);\n            el.source() && el.source().retinalFields(config);\n            el.layerDef(encoders.retinalEncoder.getLayerConfig(config, matrixLayers[i][j]));\n            el.updateModel();\n\n            units.push(el.source());\n        });\n\n        lifeCycleManager.notify({ client: units, action: UPDATED, formalName: UNIT });\n        return this;\n    }\n\n    /**\n     *\n     *\n     * @param {*} placeholders\n     * @param {*} fieldNames\n     * @return\n     * @memberof MatrixResolver\n     */\n    createHeaders (placeholders, fieldNames) {\n        let bottomLeft = [];\n        let bottomRight = [];\n        const {\n            rows,\n            columns\n        } = placeholders;\n        const {\n            smartlabel: labelManager,\n            lifeCycleManager\n        } = this.dependencies();\n        const TextCell = this.getCellDef(this.registry().TextCell);\n        const BlankCell = this.getCellDef(this.registry().BlankCell);\n        const [leftRows, rightRows] = rows;\n        const [topCols, bottomCols] = columns;\n        const rowHeaders = fieldNames.rows;\n        // Headers and footers are created based on the rows. Thereafter, using the column information\n        // they are tabularized into the current structure\n        const headers = {\n            left: headerCreator(leftRows, rowHeaders[0], TextCell, labelManager),\n            right: headerCreator(rightRows, rowHeaders[1], TextCell, labelManager)\n        };\n        const footers = {\n            left: leftRows.length > 0 ? leftRows[0].map(() => new BlankCell()) : [],\n            right: rightRows.length > 0 ? rightRows[0].map(() => new BlankCell()) : []\n        };\n        const [topLeft, topRight] = [LEFT, RIGHT].map(type => topCols.map((col, i) => {\n            if (i === topCols.length - 1) {\n                return headers[type];\n            }\n            return footers[type];\n        }));\n\n        // Creating only bottom matrices if there is no information on the top\n        if (topCols.length === 0) {\n            [bottomLeft, bottomRight] = [LEFT, RIGHT].map(type => bottomCols.map((col, i) => {\n                if (i === 0) {\n                    return headers[type];\n                }\n                return footers[type];\n            }));\n        } else {\n            bottomLeft = bottomCols.map(() => (leftRows.length > 0 ? leftRows[0].map(() => new BlankCell()) : []));\n            bottomRight = bottomCols.map(() => (rightRows.length > 0 ? rightRows[0].map(() => new BlankCell()) : []));\n        }\n\n        lifeCycleManager.notify({\n            client: [topLeft, topRight, bottomLeft, bottomRight],\n            action: INITIALIZED,\n            formalName: FACET_HEADERS\n        });\n\n        return { topLeft, topRight, bottomLeft, bottomRight };\n    }\n\n    /**\n     *\n     *\n     * @param {*} datamodel\n     * @param {*} config\n     * @param {*} componentRegistry\n     * @param {*} encoders\n     * @return\n     * @memberof MatrixResolver\n     */\n    getMatrices (datamodel, config, componentRegistry, encoders) {\n        const context = {\n            datamodel,\n            componentRegistry,\n            encoders,\n            resolver: this\n        };\n\n        return computeMatrices(context, config);\n    }\n}\n","export { VisualGroup } from './visual-group';\nexport { SimpleGroup } from './simple-group';\nexport { ComposedVars, SimpleVariable } from './variable';\nexport { default as ValueMatrix } from './visual-group/value-matrix';\n","import { ERROR_MSG } from 'muze-utils';\n\n/**\n * Interfaces for VisualGroup. Any new VisualGroup has to implement this class.\n * @class  SimpleGroup\n */\nclass SimpleGroup {\n\n    /**\n     * This method is used to set or get the DataModel instance.\n     *\n     * @param {DataModel | undefined} dataModel Instance of datamodel.\n\n     * @memberof  SimpleGroup\n     */\n    data () {\n        throw new Error(ERROR_MSG.INTERFACE_IMPL);\n    }\n\n    /**\n     * This method is used to set or get the group specific configuration\n     * properties\n     *\n     * @param {Object | undefined} configObj The input configuration.\n     *                                or instance of visual group.\n     * @memberof  SimpleGroup\n     */\n    config () {\n        throw new Error(ERROR_MSG.INTERFACE_IMPL);\n    }\n\n    /**\n     * This method is used to return a serialized representation of the\n     * instance's properties.\n     *\n     * @memberof  SimpleGroup\n     */\n    serialize () {\n        throw new Error(ERROR_MSG.INTERFACE_IMPL);\n    }\n\n    /**\n     * This method is used to get or set the measurement object which houses\n     * layout properties like width and height.\n     *\n     * @param {Object  | undefined} mObj The measurement properties.\n     * @memberof  SimpleGroup\n     */\n    measurement () {\n        throw new Error(ERROR_MSG.INTERFACE_IMPL);\n    }\n}\n\nexport default SimpleGroup;\n","import Variable from './variable';\n\n/**\n *\n *\n * @class ComposeVars\n * @extends {Variable}\n */\nclass ComposedVars extends Variable {\n\n    /**\n     *Creates an instance of ComposeVars.\n     * @param {*} texts\n     * @memberof ComposeVars\n     */\n    constructor (...texts) {\n        super(...texts);\n        this.vars(texts);\n    }\n\n    /**\n     *\n     *\n     * @param {*} params\n     * @returns\n     * @memberof ComposeVars\n     */\n    vars (...params) {\n        if (params.length) {\n            this._vars = params[0];\n            return this;\n        }\n        return this._vars;\n    }\n\n    /**\n     *\n     *\n     * @param {*} dm\n     * @returns\n     * @memberof ComposeVars\n     */\n    data (...dm) {\n        if (dm.length) {\n            this.vars().forEach(d => d.data(dm[0]));\n            return this;\n        }\n        return this._data;\n    }\n\n    /**\n     *\n     *\n     * @returns\n     * @memberof ComposeVars\n     */\n    getMembers () {\n        const vars = this.vars();\n        return vars.map(member => member.getMembers()[0]);\n    }\n\n    /**\n     *\n     *\n     * @returns\n     * @memberof ComposeVars\n     */\n    type () {\n        return this.vars()[0].type();\n    }\n\n    /**\n     *\n     *\n     * @returns\n     * @memberof ComposeVars\n     */\n    toString () {\n        return this.vars().map(d => d.toString()).join(',');\n    }\n\n    /**\n     *\n     *\n     * @returns\n     * @memberof ComposeVars\n     */\n    numberFormat () {\n        return this.vars()[0].numberFormat();\n    }\n\n    /**\n     *\n     *\n     * @returns\n     * @memberof ComposedVars\n     */\n    subtype () {\n        return this.vars()[0].subtype();\n    }\n\n    /**\n     *\n     *\n     * @returns\n     * @memberof ComposedVars\n     */\n    getMinDiff () {\n        return this.vars()[0].getMinDiff();\n    }\n}\n\nexport default ComposedVars;\n","export { default as ComposedVars } from './composed-vars';\nexport { default as SimpleVariable } from './simple-var';\nexport { default as Variable } from './variable';\n","import Variable from './variable';\n\n/**\n *\n *\n * @export\n * @class Vars\n * @extends {Variable}\n */\nexport default class SimpleVariable extends Variable {\n\n    /**\n     *Creates an instance of Vars.\n     * @param {*} text\n     * @memberof Vars\n     */\n    constructor (text) {\n        super();\n        this.oneVar(text);\n    }\n\n    /**\n     *\n     *\n     * @param {*} params\n     * @returns\n     * @memberof Vars\n     */\n    oneVar (...oneV) {\n        if (oneV.length) {\n            this._oneVar = oneV[0];\n            return this;\n        }\n        return this._oneVar;\n    }\n\n    /**\n     *\n     *\n     * @param {*} dm\n     * @returns\n     * @memberof Vars\n     */\n    data (...dm) {\n        if (dm.length) {\n            this._data = dm[0];\n            return this;\n        }\n        return this._data;\n    }\n\n    /**\n     *\n     *\n     * @returns\n     * @memberof Vars\n     */\n    toString () {\n        return this.oneVar();\n    }\n\n    /**\n     *\n     *\n     * @memberof SimpleVariable\n     */\n    numberFormat () {\n        const uid = this.data().getFieldsConfig()[this.oneVar()].index;\n        const formatter = this.data().getFieldspace().fields[uid]._ref;\n\n        return this.type() === 'measure' ? formatter.numberFormat() : val => val;\n    }\n\n    /**\n     *\n     *\n     * @returns\n     * @memberof Vars\n     */\n    getMembers () {\n        return [this.oneVar()];\n    }\n\n    /**\n     *\n     *\n     * @returns\n     * @memberof Vars\n     */\n    type () {\n        const fieldDef = this.data().getFieldsConfig()[this.oneVar()].def;\n        return fieldDef.type;\n    }\n\n    /**\n     *\n     *\n     * @returns\n     * @memberof Vars\n     */\n    subtype () {\n        const fieldDef = this.data().getFieldsConfig()[this.oneVar()].def;\n        return fieldDef.subtype || fieldDef.type;\n    }\n\n    /**\n     *\n     *\n     * @returns\n     * @memberof SimpleVariable\n     */\n    getMinDiff () {\n        const fieldSpace = this.data().getFieldspace();\n        return fieldSpace.fieldsObj()[this.oneVar()].getMinDiff();\n    }\n}\n","import { ERROR_MSG } from 'muze-utils';\n\n/**\n *\n *\n * @export\n * @class Variable\n */\nexport default class Variable {\n\n    /**\n     *\n     *\n     * @memberof Variable\n     */\n    type () {\n        throw new Error(ERROR_MSG.INTERFACE_IMPL);\n    }\n\n    /**\n     *\n     *\n     * @memberof Variable\n     */\n    toString () {\n        throw new Error(ERROR_MSG.INTERFACE_IMPL);\n    }\n\n}\n","import { RetinalEncoder } from '../encoder';\nimport { DATA_UPDATE_COUNTER } from '../enums/defaults';\nimport { getEncoder, getBorders } from '../group-helper';\nimport ValueMatrix from './value-matrix';\nimport localOptions from './local-options';\n\n/**\n *\n *\n * @param {*} placeholder\n * @memberof VisualGroup\n */\nconst setMatrixInstances = (context, placeholder) => context.matrixInstance({\n    value: new ValueMatrix(placeholder.values),\n    left: new ValueMatrix(placeholder.rows[0]),\n    right: new ValueMatrix(placeholder.rows[1]),\n    top: new ValueMatrix(placeholder.columns[0]),\n    bottom: new ValueMatrix(placeholder.columns[1])\n});\n\n/**\n *\n *\n * @param {*} context\n * @returns\n */\nexport const setupChangeListeners = (context) => {\n    context.store().registerImmediateListener([...Object.keys(localOptions), DATA_UPDATE_COUNTER], (...params) => {\n        const datamodel = context.data();\n        const [config, rows, columns, color, shape, size, detail, layers, transform] = params;\n\n        if (datamodel && rows[1] && columns[1]) {\n            // Get the resolver for the matrices\n            const resolver = context.resolver();\n            // Prepare configuration for matrix preparation\n            const matrixConfig = {\n                selection: context.selection(),\n                alias: context.alias(),\n                globalConfig: config[1] || {},\n                rows: rows[1],\n                columns: columns[1],\n                color: color[1],\n                shape: shape[1],\n                size: size[1],\n                detail: detail[1],\n                layers: layers[1],\n                transform: transform[1]\n            };\n            // Prepare configuration for retinal configs\n            const retinalConfig = {\n                color: color[1],\n                shape: shape[1],\n                size: size[1]\n            };\n            // Create the encoders for the group\n            const encoders = {};\n            encoders.retinalEncoder = new RetinalEncoder();\n            encoders.simpleEncoder = getEncoder(layers[1]);\n\n            // Set the group type\n            context.groupType(encoders.simpleEncoder.constructor.type());\n\n            // Get sanitized fields as instances of the Vars Class\n            const fields = encoders.simpleEncoder.fieldSanitizer(datamodel, matrixConfig);\n            encoders.simpleEncoder.setAxisAndHeaders(config[1] ? config[1].axisFrom : {}, fields);\n            // Setting layers for the code\n            layers[1] && resolver.layerConfig(layers[1]);\n            // Set the row and column axes\n            resolver.horizontalAxis(fields.rows, encoders).verticalAxis(fields.columns, encoders);\n            // Getting the placeholders\n            const placeholderInfo = resolver.getMatrices(datamodel, matrixConfig, context.registry(), encoders);\n            context._groupedModel = placeholderInfo.dataModels.groupedModel;\n            // Set the selection object\n            context.selection(placeholderInfo.selection);\n\n            // Create retinal axes\n            resolver.createRetinalAxes(placeholderInfo.dataModels.parentModel.getFieldsConfig(), retinalConfig,\n                encoders);\n\n            // Domains are evaluated for each of the axes for commonality\n            resolver.setDomains(matrixConfig, placeholderInfo.dataModels, encoders);\n\n            // Create matrix instances\n            setMatrixInstances(context, placeholderInfo);\n\n            // Prepare corner matrices\n            context.cornerMatrices(resolver.createHeaders(placeholderInfo, fields));\n\n             // Set placeholder information\n            context.placeholderInfo(placeholderInfo);\n\n            context.metaData({\n                border: getBorders(placeholderInfo, encoders.simpleEncoder)\n            });\n        }\n        return context;\n    });\n    return context;\n};\n","import { ROWS, COLUMNS, COLOR, SHAPE, SIZE, DETAIL, LAYERS, TRANSFORM, CONFIG } from '../enums/constants';\n\n/**\n * @module\n * This is the local options semantics based on which setters getters are created and reactivity is initiated.\n * This local object is only valid for Artboard.\n * Artboard merges global and local object both to the model\n *\n * Format\n *  PROPERTRY_NAME: {\n *      value: // default value of the property,\n *      meta: {\n *          typeCheck: // The setter value will be checked using this. If the value is function then the setter value\n *                     // is passed as args.\n *          typeExpected: // The output of typecheck action will be tested against this. Truthy value will set the\n *                       // value to the setter\n *          sanitizaiton: // Need for sanitization before type is checked\n *      }\n *  }\n */\n\nexport default {\n    [CONFIG]: {},\n    [ROWS]: [],\n    [COLUMNS]: [],\n    [COLOR]: '',\n    [SHAPE]: '',\n    [SIZE]: '',\n    [DETAIL]: '',\n    [LAYERS]: '',\n    [TRANSFORM]: []\n};\n","import { DATA_UPDATE_COUNTER } from '../enums/defaults';\n\nexport const PROPS = {\n    alias: {},\n    data: {\n        sanitization: (context, value) => {\n            if (context._data !== value) {\n                const store = context.store();\n                let hasDataUpdated = store.get(DATA_UPDATE_COUNTER);\n                store.commit(DATA_UPDATE_COUNTER, ++hasDataUpdated);\n            }\n            return value;\n        }\n    },\n    cornerMatrices: {},\n    groupType: {},\n    matrixInstance: {},\n    metaData: {},\n    placeholderInfo: {},\n    resolver: {},\n    registry: {\n        sanitization: (context, value) => {\n            if (context.resolver) {\n                context.resolver().registry(value.cellRegistry);\n            }\n            return value;\n        }\n    },\n    selection: {},\n    store: {}\n};\n","/**\n *\n *\n * @export\n * @class ValueMatrix\n */\nclass ValueMatrix {\n\n    /**\n     *Creates an instance of ValueMatrix.\n     * @param {*} matrixArr\n     * @memberof ValueMatrix\n     */\n    constructor (matrixArr) {\n        const instancesById = {};\n\n        this.matrix(matrixArr);\n        this.filter(() => true);\n\n        this.each((el) => {\n            const cellValue = el.valueOf();\n            if (cellValue && cellValue.id) {\n                const id = cellValue.id();\n                instancesById[id] = cellValue;\n            }\n        });\n\n        this.instancesById(instancesById);\n    }\n\n    /**\n     *\n     *\n     * @param {*} id\n     * @return\n     * @memberof ValueMatrix\n     */\n    instancesById (...id) {\n        if (id.length) {\n            this._instancesById = id[0];\n            return this;\n        }\n        return this._instancesById;\n    }\n\n    /**\n     *\n     *\n     * @param {*} m\n     * @return\n     * @memberof ValueMatrix\n     */\n    matrix (...matrix) {\n        if (matrix.length) {\n            this._matrix = matrix[0];\n            return this;\n        }\n        return this._matrix;\n    }\n\n    /**\n     *\n     *\n     * @param {*} fn\n     * @return\n     * @memberof ValueMatrix\n     */\n    filter (...fn) {\n        if (fn.length) {\n            this._filterFn = fn[0];\n            return this;\n        }\n        return this._filterFn;\n    }\n\n    /**\n     *\n     *\n     * @return\n     * @memberof ValueMatrix\n     */\n    width () {\n        let rowWidth = 0;\n\n        this.matrix().forEach((row) => {\n            let currentRowWidth = 0;\n            row.forEach((cell) => {\n                currentRowWidth += cell.getLogicalSpace().width;\n            });\n            rowWidth = Math.max(rowWidth, currentRowWidth);\n        });\n        return rowWidth;\n    }\n\n    /**\n     *\n     *\n     * @return\n     * @memberof ValueMatrix\n     */\n    height () {\n        let rowHeight = 0;\n\n        this.matrix().forEach((row) => {\n            let currentRowHeight = 0;\n            row.forEach((cell) => {\n                currentRowHeight = Math.max(currentRowHeight, cell.getLogicalSpace().height);\n            });\n            rowHeight += currentRowHeight;\n        });\n        return rowHeight;\n    }\n\n    /**\n     *\n     *\n     * @param {*} fn\n     * @return\n     * @memberof ValueMatrix\n     */\n    each (fn) {\n        const matrix = this.matrix();\n        const filterFn = this.filter();\n\n        matrix.forEach((row, rIndex) => {\n            row.forEach((col, cIndex) => {\n                if (filterFn(col)) {\n                    fn(col, rIndex, cIndex, matrix);\n                }\n            });\n        });\n        return this;\n    }\n\n    /**\n     *\n     *\n     * @param {*} id\n     * @return\n     * @memberof ValueMatrix\n     */\n    findPlaceHolderById (id) {\n        return this.instancesById()[id];\n    }\n\n    /**\n     *\n     *\n     * @return\n     * @memberof ValueMatrix\n     */\n    getMatrixArray () {\n        return this.matrix();\n    }\n}\n\nexport default ValueMatrix;\n","import { transactor, FieldType, generateGetterSetters } from 'muze-utils';\nimport localOptions from './local-options';\nimport { SimpleGroup } from '../simple-group';\nimport {\n    MatrixResolver,\n    initStore,\n    findInGroup\n} from '../group-helper';\nimport { setupChangeListeners } from './change-listener';\nimport { PROPS } from './props';\nimport {\n    CONFIG,\n    MOUNT,\n    RETINAL,\n    Y\n} from '../enums/constants';\n\n/**\n * This class is used to create an instance of a visual group.\n * It extends the SimpleGroup (which is an interface). The visual group takes in a datamodel,\n * and a set of rows and columns, alongwith optional paramters (like color, size, shape).\n *\n * @class VisualGroup\n */\nclass VisualGroup extends SimpleGroup {\n\n    /**\n     * Creates an instance of VisualGroup. Requires dependencies and other registry options for placeholders\n     * and layers that create individual units\n     * @param {Object} registry Key value pair of compostions for the group\n     * @param {Object} dependencies Dependencies needed to run the group\n     * @memberof VisualGroup\n     */\n    constructor (registry, dependencies) {\n        super();\n\n        const {\n            componentSubRegistry\n        } = registry;\n\n        this._dependencies = dependencies;\n        // Generate getter/setter methods for all properties of the class\n        // One can get each property by calling the method and can set it\n        // by passing paramaters for the same. Thus, one can chain setter\n        // getter methods.\n        generateGetterSetters(this, PROPS);\n        // Populate the store with default values\n        this.store(initStore());\n\n        // store reference to data\n        this._data = [];\n        // matrix instance store each of the matrices\n        this._matrixInstance = {};\n        // store reference to mountpoint\n        this._mount = null;\n        // selection object that takes care of updating of components\n        this._selection = {};\n        // stores info about the placeholders generated after creation of matrices\n        this._placeholderInfo = {};\n        // corner matrices are the headers/footers for the application\n        this._cornerMatrices = {};\n        // Create instance of matrix resolver\n        this.resolver(new MatrixResolver(this._dependencies));\n\n         // Getting indiviual registered items\n        this.registry({\n            layerRegistry: componentSubRegistry.layerRegistry.get(),\n            cellRegistry: componentSubRegistry.cellRegistry.get()\n        });\n        // Add local options to the store\n        transactor(this, localOptions, this.store().model);\n        // Register listeners\n        setupChangeListeners(this);\n    }\n\n    /**\n     * Locks the model to prevent change listeners to be triggered until unlocked\n     *\n     * @return {Object} Instance of class VisualGroup\n     * @memberof VisualGroup\n     */\n    lockModel () {\n        this.store().model.lock();\n        return this;\n    }\n\n    /**\n     * Unlocks the model so that all change listeners can be triggered\n     *\n     * @return {Object} Instance of class VisualGroup\n     * @memberof VisualGroup\n     */\n    unlockModel () {\n        this.store().model.unlock();\n        return this;\n    }\n\n    /**\n     *\n     *\n     * @param {*} variable\n     * @return\n     * @memberof VisualGroup\n     */\n    where (variable) {\n        return findInGroup(variable, this.resolver().getAllFields());\n    }\n\n    /**\n     *\n     *\n     * @param {*} type\n     * @return\n     * @memberof VisualGroup\n     */\n    getAxes (type) {\n        if (type === RETINAL) {\n            return this.resolver().getRetinalAxes();\n        }\n        return this.resolver().getSimpleAxes(type);\n    }\n\n    /**\n     *\n     *\n     * @return\n     * @memberof VisualGroup\n     */\n    getCells (type) {\n        return this.resolver()[`${type}Cells`]();\n    }\n\n    /**\n     *\n     *\n     * @param {*} channel\n     * @return\n     * @memberof VisualGroup\n     */\n    getFieldsFromChannel (channel) {\n        const {\n            rowProjections,\n            colProjections\n        } = this.resolver().getAllFields();\n\n        return channel === Y ? rowProjections : colProjections;\n    }\n\n    /**\n     *\n     *\n     * @param {*} facetKey\n     * @return\n     * @memberof VisualGroup\n     */\n    getCellsByFacetKey (facetKey) {\n        const resolver = this.resolver();\n        const cells = resolver.rowCells()[facetKey] || resolver.colCells()[facetKey] || [];\n        return cells;\n    }\n\n    /**\n     *\n     *\n     * @param {*} facetKey\n     * @return\n     * @memberof VisualGroup\n     */\n    getAxesByFacetKey (axisType, facetKey) {\n        const resolver = this.resolver();\n        const cells = resolver.rowCells()[facetKey] || resolver.colCells()[facetKey];\n        const axes = cells[0].valueOf().axes()[axisType] || [];\n\n        return axes;\n    }\n\n    /**\n     * This method is used to return a serialized representation of the instance's properties.\n     *\n     * @return {Object} Object with config proprties.\n     * @memberof VisualGroup\n     */\n    serialize () {\n        const store = this.store();\n\n        return {\n            [CONFIG]: store.get(CONFIG),\n            [MOUNT]: store.get(MOUNT)\n        };\n    }\n\n    /**\n     *\n     *\n     * @param {*} facetKey\n     * @return\n     * @memberof VisualGroup\n     */\n    getDimensionMeasureMap (facetKey) {\n        const fields = this.resolver().projections();\n        const rowFacets = fields.rowFacets.map(d => `${d}`);\n        const colFacets = fields.colFacets.map(d => `${d}`);\n        const rowProjections = (fields.rowProjections && fields.rowProjections[0]) || [];\n        const colProjections = (fields.colProjections && fields.colProjections[0]) || [];\n        const dimensionMeasureMap = {};\n        const rowMeasures = rowProjections.filter(d => d.type() === FieldType.MEASURE);\n        const colMeasures = colProjections.filter(d => d.type() === FieldType.MEASURE);\n        const units = this.getCellsByFacetKey(facetKey).map(d => d.valueOf());\n\n        units.forEach((unit) => {\n            const fieldsMeasures = unit._dimensionMeasureMap;\n            for (const key in fieldsMeasures) {\n                if ({}.hasOwnProperty.call(fieldsMeasures, key)) {\n                    !dimensionMeasureMap[key] && (dimensionMeasureMap[key] = []);\n                    dimensionMeasureMap[key] = [...new Set([...dimensionMeasureMap[key], ...fieldsMeasures[key]])];\n                }\n            }\n        });\n        rowFacets.forEach((e) => { dimensionMeasureMap[e] = rowMeasures.map(d => `${d}`); });\n        colFacets.forEach((e) => { dimensionMeasureMap[e] = colMeasures.map(d => `${d}`); });\n        return dimensionMeasureMap;\n    }\n\n    /**\n     *\n     *\n     * @param {*} id\n     * @return\n     * @memberof VisualGroup\n     */\n    findUnitById (id) {\n        return this.matrixInstance().value.findPlaceHolderById(id);\n    }\n\n    getGroupByData () {\n        return this._groupedModel;\n    }\n}\n\nexport default VisualGroup;\n","import {\n    getUniqueId,\n    mergeRecursive,\n    Store,\n    FieldType,\n    selectElement,\n    ReservedFields,\n    registerListeners,\n    transactor\n} from 'muze-utils';\nimport { SimpleLayer } from '../simple-layer';\nimport * as PROPS from '../enums/props';\nimport {\n    transformData, calculateDomainFromData, getNormalizedData, fadeUnfadeSelection, focusUnfocusSelection\n} from '../helpers';\nimport { listenerMap } from './listener-map';\nimport { defaultOptions } from './default-options';\n\n/**\n * An abstract class which gives defination of common layer functionality like\n * - transfromation data for various {@link mode}\n * - calculating data domain\n * - linking dependent layers\n * - merging policy of configuration\n * - interaction sideffect helpers\n * - retrieving dom elements from data using id\n * - retrieving the physical dimensions of marks\n * - disposing layer\n *\n * Every layer has to extend base layer and give concrete definition.\n * This layer does not have any default visual. A new layer has to define the logic of `render` for rendering the\n * visuals\n *\n * @public\n * @class\n * @namespace Muze\n */\nexport default class BaseLayer extends SimpleLayer {\n\n    /**\n     * Creates a layer using a configuration and data.\n     *\n     * @public\n     *\n     * @param {DataModel} data Instance of DataModel to be used. This DataModel instance serves as the data for a layer.\n     * @param {Object} axes Axes instances to be used for rendering the layer. Axes are used for mapping data from\n     *      value to px.\n     * @param {SimpleAxis} axes.x X axis of the layer. Based on the type of variable it gets instance of BandAxis,\n     *      TimeAxis, ContinuousAxis\n     * @param {SimpleAxis} axes.y X axis of the layer. Based on the type of variable it gets instance of BandAxis,\n     *      TimeAxis, ContinuousAxis\n     * @param {ColorAxis} axes.color Axis for coloring a layer using color interpolators\n     * @param {ShapeAxis} axes.shape Axis for providing a shape\n     * @param {SizeAxis} axes.shape Axis for determining size of a mark using size interpolator\n     * @param {LayerConfig} config Configuration of the layer\n     * @param {Object} dependencies Dependencies of the layer\n     * @param {SmartLabel} smartLabel Smartlabel singleton instance\n     */\n    constructor (data, axes, config, dependencies) {\n        super();\n        this.store(new Store({\n            DATA: null\n        }));\n        transactor(this, defaultOptions, this.store().model);\n        this.data(data);\n        this.axes(axes);\n        this.config(config);\n        this.dependencies(dependencies);\n        this._points = [];\n        this._cachedData = [];\n        this._id = getUniqueId();\n        this._measurement = {};\n        registerListeners(this, listenerMap);\n    }\n\n    /**\n     * Creates a layer instance\n     * @return {BaseLayer} Instance of a layer\n     */\n    static create (...params) {\n        return new this(...params);\n    }\n\n    /**\n     * Default configuration of the layer. This configuration gets merged to the user passed configuration using a\n     * plolicy. Base layer only returns part of configuraion, any layer overridding base layer should return its own\n     * configuration.\n     *\n     * @public\n     * @static\n     *\n     * @return {Object} Default configuration\n     */\n    static defaultConfig () {\n        return {\n            transform: {\n                type: 'identity'\n            }\n        };\n    }\n\n    /**\n     * Policy defines how user config gets merged to default config. The default policy here does a deep copy\n     * operation.\n     * Any policy which does more than deep copying should define the policy as a static member.\n     *\n     * @static\n     * @public\n     *\n     * @param {LayerConfig} conf Configuration with which the user config will be merged\n     * @param {LayerConfig} userConf Configuration given by the user\n     *\n     * @return {LayerConfig} Merged layer configuration\n     */\n    static defaultPolicy (conf, userConf) {\n        return mergeRecursive(conf, userConf);\n    }\n\n    /**\n     * Determines a name for a layer. This name of the layer is used in the input data to refer to this layer.\n     * ```\n     *  .layer([\n     *      mark: 'bar',\n     *      encoding: { ... }\n     *  ])\n     * ```\n     *\n     * @static\n     * @public\n     *\n     * @returns {string} name of layer\n     */\n    static formalName () {\n        return 'base';\n    }\n\n    store (...store) {\n        if (store.length) {\n            this._store = store[0];\n            return this;\n        }\n        return this._store;\n    }\n\n    encodingFieldsInf (...fieldsInf) {\n        if (fieldsInf.length) {\n            this._encodingFieldsInf = fieldsInf[0];\n            return this;\n        }\n        return this._encodingFieldsInf;\n    }\n\n    encodingTransform (...encodingTransform) {\n        if (encodingTransform.length) {\n            this._encodingTransform = encodingTransform[0];\n            return this;\n        }\n        return this._encodingTransform;\n    }\n\n    /**\n     * Provides a alias for a layer. Like it's possible to have same layer (like bar) multiple times, but among multiple\n     * layers of same type if one layer has to be referred, alias is used. If no alias is given then `formalName` is set\n     * as the alias name.\n     *\n     * @public\n     *\n     * If used as setter\n     * @param  {string} alias Name of the alias\n     * @return {BaseLayer} Instance of current base layer\n     *\n     * If used as getter\n     * @return {string} Alias of the current layer\n     */\n    alias (...params) {\n        if (params.length) {\n            this._alias = params[0];\n            return this;\n        }\n        return this._alias || this.constructor.formalName();\n    }\n\n    dependencies (...params) {\n        if (params.length) {\n            this._dependencies = params[0];\n            return this;\n        }\n        return this._dependencies;\n    }\n\n    enableCaching () {\n        this._cacheEnabled = true;\n        return this;\n    }\n\n    clearCaching () {\n        this._cacheEnabled = false;\n        return this.data(this._cachedData[0]);\n    }\n\n    /**\n     * Serialize the schema. Merge config is used for serialization.\n     *\n     * @public\n     *\n     * @return {LayerConfig} Serialized schema\n     */\n    serialize () {\n        return this.config();\n    }\n\n    /**\n     * Returns the unique identifier of this layer. Id is auto generated during the creation proceess of a schema.\n     *\n     * @return {string} id of the layer\n     */\n    id () {\n        return this._id;\n    }\n\n    /**\n     * Gets the transform method from transform factory based on type of transform. It then calls the\n     * transform method with the data and passes the configuration parameters of transform such as\n     * groupBy, value field, etc.\n     *\n     * @public\n     *\n     * @param {DataModel} dataModel Instance of DataModel\n     * @param {Object} config Configuration for transforming data\n     * @return {Array.<Array>} Transformed data.\n     */\n    getTransformedData (dataModel, config, transformType, encodingFieldsInf) {\n        return transformData(dataModel, config, transformType, encodingFieldsInf);\n    }\n\n    /**\n     * Calculates the domain from the data.\n     * It checks the type of field and calculates the domain based on that. For example, if it\n     * is a quantitative or temporal field, then it calculates the min and max from the data or\n     * if it is a nominal field then it gets all the values from the data of that field.\n     * @param {Array} data DataArray\n     * @param {Object} fieldsConfig Configuration of fields\n     * @return {Array} Domain values array.\n     */\n    calculateDomainFromData (data) {\n        let domains = {};\n        const isEmpty = this.data().isEmpty();\n\n        if (!isEmpty) {\n            domains = calculateDomainFromData(data, this.encodingFieldsInf(), this.transformType());\n        }\n        return domains;\n    }\n\n    shouldDrawAnchors () {\n        return false;\n    }\n\n    /**\n     * Returns the domain for the axis.\n     *\n     * @param {string} encodingType type of encoding x, y, etc.\n     * @return {Object} Axis domains\n     */\n    getDataDomain (encodingType) {\n        const domains = this.store().get(PROPS.DOMAIN);\n        return encodingType !== undefined ? domains[encodingType] || [] : domains;\n    }\n\n    /**\n     * Returns the domain for the axis.\n     *\n     * @param {string} encodingType type of encoding x, y, etc.\n     * @return {Object} Axis domains\n     */\n    getNormalizedData (transformedData, fieldsConfig) {\n        return getNormalizedData(transformedData, fieldsConfig, this.encodingFieldsInf(), this.transformType());\n    }\n\n    /**\n     * Abstract method for getting nearest point\n     * @return {BaseLayer} Instance of base layer\n     */\n    getNearestPoint () {\n        return null;\n    }\n\n    /**\n     * Applies selection styles to the elements that fall within the selection set.\n     * @param {Array} selectionSet Array of tuple ids.\n     * @param {Object} config Configuration for selection.\n     * @return {BarLayer} Instance of bar layer.\n     */\n    highlightPoint (selectionSet, config = {}) {\n        const elements = this.getPlotElementsFromSet(selectionSet);\n        const axes = this.axes();\n        const colorAxis = axes.color;\n        const highlightStyles = config.interaction ? config.interaction.highlight : this.config().interaction.highlight;\n        highlightStyles.forEach((highlight) => {\n            const styleType = highlight.type;\n            elements.style(styleType, (d) => {\n                const { colorTransform, stateColor, originalColor } = d.meta;\n                colorTransform.highlight = colorTransform.highlight || {};\n                stateColor[styleType] = stateColor[styleType] || originalColor;\n                const fillColorInfo = colorAxis.transformColor(stateColor[styleType], highlight.intensity);\n                colorTransform.highlight[styleType] = highlight.intensity;\n                stateColor[styleType] = fillColorInfo.hsla;\n                return fillColorInfo.color;\n            });\n        });\n        return this;\n    }\n\n    /**\n     * Removes selection styles to the elements that fall within the selection set.\n     * @param {Array} selectionSet Array of tuple ids.\n     * @param {Object} config Configuration for selection.\n     * @return {BarLayer} Instance of bar layer.\n     */\n    dehighlightPoint (selectionSet, config = {}) {\n        const elements = this.getPlotElementsFromSet(selectionSet);\n        const axes = this.axes();\n        const colorAxis = axes.color;\n        const highlightStyles = config.interaction ? config.interaction.highlight : this.config().interaction.highlight;\n        highlightStyles.forEach((highlight) => {\n            const styleType = highlight.type;\n            elements.style(styleType, (d) => {\n                const { colorTransform, stateColor, originalColor } = d.meta;\n                colorTransform.highlight = colorTransform.highlight || {};\n                if (colorTransform.highlight && colorTransform.highlight[styleType]) {\n                    stateColor[styleType] = stateColor[styleType] || originalColor;\n                    const fillColorInfo = colorAxis.transformColor(stateColor[styleType],\n                        highlight.intensity.map(e => -e));\n                    stateColor[styleType] = fillColorInfo.hsla;\n                    colorTransform.highlight[styleType] = null;\n                    return fillColorInfo.color;\n                }\n                colorTransform.highlight = null;\n                const [h, s, l] = stateColor[styleType] ? stateColor[styleType] : originalColor;\n                return `hsl(${h * 360},${s * 100}%,${l * 100}%)`;\n            });\n        });\n        return this;\n    }\n\n    /**\n     * Removes selection styles to the elements that fall within the selection set.\n     * @param {Array} selectionSet Array of tuple ids.\n     * @param {Object} config Configuration for selection.\n     * @return {BarLayer} Instance of bar layer.\n     */\n    focusOutSelection (selectionSet, config = {}) {\n        const interaction = config.interaction || this.config().interaction;\n        focusUnfocusSelection(this, selectionSet, true, interaction);\n        return this;\n    }\n\n    /**\n     * Removes selection styles to the elements that fall within the selection set.\n     * @param {Array} selectionSet Array of tuple ids.\n     * @param {Object} config Configuration for selection.\n     * @return {BarLayer} Instance of bar layer.\n     */\n    focusSelection (selectionSet, config = {}) {\n        const interaction = config.interaction || this.config().interaction;\n        focusUnfocusSelection(this, selectionSet, false, interaction);\n        return this;\n    }\n\n    /**\n     *\n     *\n     * @param {*} selectionSet\n     * @param {*} [config={}]\n     * @returns\n     * @memberof BaseLayer\n     */\n    fadeOutSelection (selectionSet, config = {}) {\n        const interaction = config.interaction || this.config().interaction;\n        fadeUnfadeSelection(this, selectionSet, true, interaction);\n        return this;\n    }\n\n    /**\n     *\n     *\n     * @param {*} selectionSet\n     * @param {*} [config={}]\n     * @returns\n     * @memberof BaseLayer\n     */\n    unfadeSelection (selectionSet, config = {}) {\n        const interaction = config.interaction || this.config().interaction;\n        fadeUnfadeSelection(this, selectionSet, false, interaction);\n        return this;\n    }\n\n    /**\n     *\n     *\n     * @param {*} params\n     * @returns\n     * @memberof BaseLayer\n     */\n    linkLayerStore (...params) {\n        if (params.length) {\n            this._linkedLayerStore = params[0];\n            return this;\n        }\n        return this._linkedLayerStore;\n    }\n\n    /**\n     *\n     *\n     * @returns\n     * @memberof BaseLayer\n     */\n    transformType (...transformType) {\n        if (transformType.length) {\n            this._transformType = transformType[0];\n            return this;\n        }\n        return this._transformType;\n    }\n\n    /**\n     * Renders the layer\n     * @return {BaseLayer} Instance of the layer.\n     */\n    render () {\n        return this;\n    }\n\n    /**\n     *\n     *\n     * @returns\n     * @memberof BaseLayer\n     */\n    elemType () {\n        return 'g';\n    }\n\n    /**\n     * Disposes the entire layer\n     * @return {BaseLayer} Instance of layer.\n     */\n    remove () {\n        this.store().unsubscribeAll();\n        selectElement(this.mount()).remove();\n        return this;\n    }\n\n    /**\n     * Stores point in an object with key as the categorical value or temporal value\n     *\n     * @param {string} key categorical value or temporal value\n     * @param {Object} data Information of the data point\n     * @return {BarLayer} Instance of bar layer\n     */\n    cachePoint (key, data) {\n        if (key === null) {\n            return this;\n        }\n        const pointMap = this._pointMap;\n        !pointMap[key] && (pointMap[key] = []);\n        pointMap[key].push(data);\n        return this;\n    }\n\n    /**\n     *\n     *\n     * @param {*} dataProps\n     * @returns\n     * @memberof BaseLayer\n     */\n    dataProps (...dataProps) {\n        if (dataProps.length) {\n            this._dataProps = dataProps[0];\n            return this;\n        }\n        return this._dataProps;\n    }\n\n    /**\n     *\n     *\n     * @param {*} data\n     * @param {*} id\n     * @returns\n     * @memberof BaseLayer\n     */\n    getIdentifiersFromData (data) {\n        const schema = this.data().getData().schema;\n        const fieldsConfig = this.data().getFieldsConfig();\n        const identifiers = [[], []];\n        const {\n                xFieldType,\n                yFieldType,\n                xField,\n                yField\n            } = this.encodingFieldsInf();\n\n        const [xMeasure, yMeasure] = [xFieldType, yFieldType].map(type => type === FieldType.MEASURE);\n        schema.forEach((d, i) => {\n            const name = d.name;\n            if (fieldsConfig[name].def.type === FieldType.DIMENSION) {\n                identifiers[0].push(name);\n                identifiers[1].push(data[i]);\n            }\n        });\n\n        if (xMeasure && yMeasure) {\n            const xMeasureIndex = fieldsConfig[xField].index;\n            const yMeasureIndex = fieldsConfig[yField].index;\n            identifiers[0].push(...[xField, yField]);\n            identifiers[1].push(...[data[xMeasureIndex], data[yMeasureIndex]]);\n        }\n        return identifiers;\n    }\n\n    getPlotSpan () {\n        return {\n            x: 0,\n            y: 0\n        };\n    }\n\n    getPlotPadding () {\n        return {\n            x: 0,\n            y: 0\n        };\n    }\n\n    /**\n     *\n     *\n     * @param {*} identifiers\n     * @returns\n     * @memberof BaseLayer\n     */\n    getPointsFromIdentifiers (identifiers, getAllAttrs) {\n        if (!this.data()) {\n            return [];\n        }\n        const fieldNames = identifiers[0];\n        const values = identifiers.slice(1, identifiers.length);\n        const points = this._points;\n        const fieldsConfig = this.data().getFieldsConfig();\n\n        const filteredPoints = [].concat(...points).filter((point) => {\n            const { _data, _id } = point;\n\n            return fieldNames.every((field, idx) => {\n                if (field in fieldsConfig) {\n                    return values.findIndex(d => d[idx] === _data[fieldsConfig[field].index]) !== -1;\n                } else if (field === ReservedFields.ROW_ID) {\n                    return values.findIndex(d => d[idx] === _id) !== -1;\n                } return false;\n            });\n        });\n        return getAllAttrs ? filteredPoints : filteredPoints.map((d) => {\n            const attrs = d.update || d;\n            if (!attrs.width) {\n                attrs.width = 2;\n            }\n            if (!attrs.height) {\n                attrs.height = 2;\n            }\n            return attrs;\n        }).sort((a, b) => a.y - b.y);\n    }\n\n    /**\n     *\n     *\n     * @param {*} set\n     * @returns\n     * @memberof BaseLayer\n     */\n    getPlotElementsFromSet (set) {\n        return selectElement(this.mount()).selectAll(this.elemType()).filter(data => set.indexOf(data._id) !== -1);\n    }\n}\n","import { mergeRecursive } from 'muze-utils';\nimport * as PROPS from '../enums/props';\n\nexport const defaultOptions = {\n    [PROPS.CONFIG]: {\n        value: null,\n        meta: {\n            sanitization: (config, oldConfig, context) => {\n                const constructor = context.constructor;\n                const newConf = mergeRecursive({}, constructor.defaultConfig());\n                return constructor.defaultPolicy(newConf, config);\n            }\n        }\n    },\n    [PROPS.DATA]: {\n        value: null,\n        meta: {\n            preset: (data, context) => {\n                if (context._cacheEnabled) {\n                    context._cachedData.push(data);\n                } else {\n                    context._cachedData = [data];\n                }\n            }\n        }\n    },\n    [PROPS.MOUNT]: {\n        value: null\n    },\n    [PROPS.AXES]: {\n        value: null\n    },\n    [PROPS.MEASUREMENT]: {\n        value: null\n    }\n};\n","import { getValidTransform, getEncodingFieldInf } from '../helpers';\nimport * as PROPS from '../enums/props';\n\nexport const listenerMap = context => [\n    {\n        props: [PROPS.TRANSFORMED_DATA],\n        listener: fetch => fetch(PROPS.DATA, PROPS.CONFIG, (dataModel, config) => {\n            const dataModelValue = dataModel.value;\n            const configValue = config.value;\n            const encodingValue = configValue && configValue.encoding;\n            if (dataModelValue && encodingValue) {\n                const fieldsConfig = dataModelValue.getFieldsConfig();\n                const encodingFieldsInf = getEncodingFieldInf(encodingValue, fieldsConfig);\n                context.encodingFieldsInf(encodingFieldsInf);\n                context.transformType(getValidTransform(configValue, fieldsConfig, encodingFieldsInf));\n                return context.getTransformedData(dataModelValue, configValue, context.transformType(),\n                    encodingFieldsInf);\n            }\n            return null;\n        }),\n        type: 'computed'\n    },\n    {\n        props: [PROPS.NORMALIZED_DATA],\n        listener: fetch => fetch(PROPS.TRANSFORMED_DATA, (transformedData) => {\n            const transformedDataValue = transformedData.value;\n            if (transformedDataValue) {\n                const fieldsConfig = context.data().getFieldsConfig();\n                return context.getNormalizedData(transformedDataValue, fieldsConfig);\n            }\n            return null;\n        }),\n        type: 'computed'\n    },\n    {\n        props: [PROPS.DOMAIN],\n        listener: fetch => fetch(PROPS.NORMALIZED_DATA, (normalizedData) => {\n            const normalizedDataValue = normalizedData.value;\n            if (normalizedDataValue) {\n                return context.calculateDomainFromData(normalizedDataValue, context.encodingFieldsInf(),\n                    context.data().getFieldsConfig());\n            }\n            return null;\n        }),\n        type: 'computed'\n    },\n    {\n        props: [PROPS.MOUNT, PROPS.DATA, PROPS.AXES, PROPS.CONFIG],\n        listener: (mountPoint, dataModel, axes, config) => {\n            if (mountPoint[1] && dataModel[1] && config[1] && axes[1]) {\n                context.render(mountPoint[1]);\n                context.dependencies().throwback.commit('onlayerdraw', true);\n            }\n        },\n        type: 'registerChangeListener'\n    }\n];\n\n","import { AreaLayer } from './layers/area';\nimport { ArcLayer } from './layers/arc';\nimport { LineLayer } from './layers/line';\nimport { TextLayer } from './layers/text';\nimport { PointLayer } from './layers/point';\nimport { BarLayer } from './layers/bar';\nimport { BaseLayer } from './base-layer';\nimport * as CONSTANTS from './enums/constants';\nimport { TickLayer } from './layers/tick';\n\nexport const DEFAULT_LAYERS = {\n    [CONSTANTS.AREA_LAYER]: AreaLayer,\n    [CONSTANTS.ARC_LAYER]: ArcLayer,\n    [CONSTANTS.LINE_LAYER]: LineLayer,\n    [CONSTANTS.TEXT_LAYER]: TextLayer,\n    [CONSTANTS.POINT_LAYER]: PointLayer,\n    [CONSTANTS.TICK_LAYER]: TickLayer,\n    [CONSTANTS.BAR_LAYER]: BarLayer,\n    [CONSTANTS.BASE_LAYER]: BaseLayer\n};\n","export const CLASSPREFIX = 'muze';\nexport const STACK = 'stack';\nexport const GROUP = 'group';\nexport const IDENTITY = 'identity';\nexport const ANGLE = 'angle';\nexport const RADIUS = 'radius';\nexport const SIZE = 'size';\nexport const COLOR = 'color';\nexport const SHAPE = 'shape';\nexport const OUTER_RADIUS_VALUE = 'outerRadiusValue';\nexport const TEXT_ANCHOR_MIDDLE = 'middle';\nexport const ENCODING = {\n    X: 'x',\n    Y: 'y',\n    X0: 'x0',\n    Y0: 'y0'\n};\n\nexport const ASCENDING = 'asc';\n\nexport const AREA_LAYER = 'area';\nexport const ARC_LAYER = 'arc';\nexport const LINE_LAYER = 'line';\nexport const TEXT_LAYER = 'text';\nexport const POINT_LAYER = 'point';\nexport const BAR_LAYER = 'bar';\nexport const TICK_LAYER = 'tick';\nexport const SIMPLE_LAYER = 'simple';\nexport const BASE_LAYER = 'base';\n","export const DATA = 'data';\nexport const CONFIG = 'config';\nexport const MEASUREMENT = 'measurement';\nexport const AXES = 'axes';\nexport const NORMALIZED_DATA = 'normalizedData';\nexport const TRANSFORMED_DATA = 'transformedData';\nexport const DOMAIN = 'domain';\nexport const MOUNT = 'mount';\nexport const FIELDMAP = 'fieldMap';\n","import { FieldType, getDomainFromData, setStyles, easeFns, selectElement } from 'muze-utils';\nimport { transformFactory } from '@chartshq/transform';\nimport { IDENTITY, STACK, GROUP, COLOR, SHAPE, SIZE, ENCODING } from '../enums/constants';\n\nexport const getLayerColor = ({ datum, index }, { colorEncoding, colorAxis, colorFieldIndex }) => {\n    let rawColor = '';\n    let color = '';\n    if (colorEncoding && colorEncoding.value instanceof Function) {\n        color = colorEncoding.value(datum, index);\n        rawColor = colorEncoding.value(datum, index);\n    } else {\n        rawColor = colorAxis.getRawColor(datum._data[colorFieldIndex]);\n        color = colorAxis.getHslString(rawColor);\n    }\n    return { color, rawColor };\n};\n\nconst transfromColor = (colorAxis, datum, styleType, intensity) => {\n    datum.meta.stateColor[styleType] = datum.meta.stateColor[styleType] || datum.meta.originalColor;\n    const fillColorInfo = colorAxis.transformColor(datum.meta.stateColor[styleType], intensity);\n    datum.meta.stateColor[styleType] = fillColorInfo.hsla;\n\n    return fillColorInfo;\n};\n\nconst applyInteractionStyle = (context, selectionSet, interactionType, config) => {\n    const elements = context.getPlotElementsFromSet(selectionSet);\n    const axes = context.axes();\n    const colorAxis = axes.color;\n    const { apply, interaction } = config;\n    const interactionStyles = interaction[interactionType];\n\n    interactionStyles.forEach((style) => {\n        const styleType = style.type;\n        elements.style(styleType, ((d) => {\n            const { colorTransform, stateColor, originalColor } = d.meta;\n            colorTransform[interactionType] = colorTransform[interactionType] || {};\n            if (apply && !colorTransform[interactionType][styleType]) {\n                // fade selections\n                colorTransform[interactionType][styleType] = style.intensity;\n                return transfromColor(colorAxis, d, styleType, style.intensity).color;\n            }\n            if (!apply && colorTransform[interactionType][styleType]) {\n                 // unfade selections\n                colorTransform[interactionType][styleType] = null;\n                return transfromColor(colorAxis, d, styleType, style.intensity.map(e => -e)).color;\n            }\n            const [h, s, l, a] = stateColor[styleType] ? stateColor[styleType] : originalColor;\n            return `hsla(${h * 360},${s * 100}%,${l * 100}%, ${a || 1})`;\n        }));\n    });\n};\n\n/**\n *\n *\n * @param {*} selectionSet\n * @param {*} className\n * @param {*} hasFaded\n */\nexport const fadeUnfadeSelection = (context, selectionSet, hasFaded, interaction) => {\n    const interactionConfig = { interaction, apply: hasFaded };\n    applyInteractionStyle(context, selectionSet, 'fade', interactionConfig);\n};\n\n/**\n *\n *\n * @param {*} selectionSet\n * @param {*} className\n * @param {*} hasFaded\n */\nexport const focusUnfocusSelection = (context, selectionSet, isFocussed, interaction) => {\n    const interactionConfig = { interaction, apply: isFocussed };\n    applyInteractionStyle(context, selectionSet, 'focus', interactionConfig);\n};\n\n/**\n *\n *\n * @param {*} axes\n * @returns\n */\nexport const getAxesScales = (axes) => {\n    const [xAxis, yAxis] = [ENCODING.X, ENCODING.Y].map(e => axes[e]);\n    const [xScale, yScale] = [xAxis, yAxis].map(e => e && e.scale());\n    return {\n        xAxis,\n        yAxis,\n        xScale,\n        yScale\n    };\n};\n\n/**\n *\n *\n * @param {*} encoding\n * @param {*} fieldsConfig\n * @returns\n */\nexport const getEncodingFieldInf = (encoding, fieldsConfig) => {\n    const [xField, yField, x0Field, y0Field, colorField, shapeField, sizeField] =\n        [ENCODING.X, ENCODING.Y, ENCODING.X0, ENCODING.Y0, COLOR, SHAPE, SIZE].map(e => encoding[e] &&\n            encoding[e].field);\n\n    const [xFieldType, yFieldType] = [xField, yField, x0Field, y0Field].map(e => fieldsConfig[e] &&\n        fieldsConfig[e].def.type);\n\n    const [xFieldSubType, yFieldSubType] = [xField, yField].map(e => fieldsConfig[e] && (fieldsConfig[e].def.subtype ||\n        fieldsConfig[e].def.type));\n\n    const [xFieldIndex, yFieldIndex, x0FieldIndex, y0FieldIndex] = [xField, yField, x0Field, y0Field]\n        .map(e => fieldsConfig[e] && fieldsConfig[e].index);\n\n    return {\n        xField,\n        yField,\n        colorField,\n        shapeField,\n        sizeField,\n        x0Field,\n        y0Field,\n        xFieldType,\n        yFieldType,\n        xFieldSubType,\n        yFieldSubType,\n        xFieldIndex,\n        yFieldIndex,\n        x0FieldIndex,\n        y0FieldIndex\n    };\n};\n\n/**\n *\n *\n * @param {*} layerConfig\n * @param {*} fieldsConfig\n * @returns\n */\nexport const getValidTransform = (layerConfig, fieldsConfig, encodingFieldInf) => {\n    let transformType;\n    const {\n        transform\n    } = layerConfig;\n    const {\n        xField,\n        yField,\n        xFieldType,\n        yFieldType\n    } = encodingFieldInf;\n    const groupByField = transform.groupBy;\n    const groupByFieldMeasure = fieldsConfig[groupByField] && fieldsConfig[groupByField].def.type === FieldType.MEASURE;\n    transformType = transform.type;\n    if (!xField || !yField || groupByFieldMeasure || !groupByField || xFieldType === FieldType.DIMENSION &&\n        yFieldType === FieldType.DIMENSION) {\n        transformType = IDENTITY;\n    }\n    return transformType;\n};\n\n/**\n *\n *\n * @param {*} dataModel\n * @param {*} config\n * @param {*} transformType\n * @returns\n */\nexport const transformData = (dataModel, config, transformType, encodingFieldInf) => {\n    const data = dataModel.getData({ withUid: true });\n    const schema = data.schema;\n    const transform = config.transform;\n    const {\n        xField,\n        yField,\n        xFieldType,\n        yFieldType\n    } = encodingFieldInf;\n    const uniqueField = xFieldType === FieldType.MEASURE ? yField : xField;\n\n    return transformFactory(transformType)(schema, data.data, {\n        groupBy: transform.groupBy,\n        uniqueField,\n        sort: transform.sort,\n        offset: transform.offset,\n        value: yFieldType === FieldType.MEASURE ? yField : xField\n    }, data.uids);\n};\n\n/*\n * This method resolves the x, y, x0 and y0 values from the transformed data.\n * It also checks the type of transformed data for example, if it is a stacked data\n * then it fetches the y and y0 values from the stacked data.\n * @param {Array.<Array>} transformedData transformed data\n * @param {Object} fieldsConfig field definitions\n * @param {string} transformType type of transformed data - stack, group or identity.\n * @return {Array.<Object>} Normalized data\n*/\nexport const getNormalizedData = (transformedData, fieldsConfig, encodingFieldInf, transformType) => {\n    const transformedDataArr = transformType === IDENTITY ? [transformedData] : transformedData;\n    const {\n        xFieldType,\n        xFieldIndex,\n        yFieldIndex,\n        x0FieldIndex,\n        y0FieldIndex\n    } = encodingFieldInf;\n    const fieldsLen = Object.keys(fieldsConfig).length;\n    /**\n     * Returns normalized data from transformed data. It recursively traverses through\n     * the transformed data if there it is nested.\n     */\n    return transformedDataArr.map((data) => {\n        const values = transformType === GROUP ? data.values : data;\n        return values.map((d) => {\n            let pointObj = {};\n            let tuple;\n            if (transformType === STACK) {\n                tuple = d.data || [];\n                let y;\n                let y0;\n                let x;\n                let x0;\n                if (d[1] >= d[0]) {\n                    y = x0 = d[1];\n                    x = y0 = d[0];\n                } else {\n                    y = x0 = d[0];\n                    x = y0 = d[1];\n                }\n\n                pointObj = xFieldType === FieldType.MEASURE ? {\n                    x,\n                    x0,\n                    y: tuple[yFieldIndex],\n                    y0: tuple[yFieldIndex]\n                } : {\n                    x: tuple[xFieldIndex],\n                    x0: tuple[xFieldIndex],\n                    y,\n                    y0\n                };\n                pointObj._data = tuple;\n                pointObj._id = tuple[fieldsLen];\n            } else {\n                pointObj = {\n                    x: d[xFieldIndex],\n                    y: d[yFieldIndex],\n                    x0: d[x0FieldIndex],\n                    y0: d[y0FieldIndex]\n                };\n                pointObj._data = d;\n                pointObj._id = d[fieldsLen];\n            }\n            return pointObj;\n        });\n    });\n};\n\nexport const calculateDomainFromData = (data, encodingFieldInf, transformType) => {\n    const {\n        xFieldSubType,\n        yFieldSubType,\n        xField,\n        yField,\n        x0Field,\n        y0Field\n    } = encodingFieldInf;\n    const domains = {};\n    const yEnc = ENCODING.Y;\n    const xEnc = ENCODING.X;\n    if (xField) {\n        domains.x = getDomainFromData(data, x0Field || transformType === STACK ? [xEnc, ENCODING.X0] : [xEnc, xEnc],\n            xFieldSubType);\n    }\n    if (yField) {\n        domains.y = getDomainFromData(data, y0Field || transformType === STACK ? [ENCODING.Y0, ENCODING.Y] :\n            [yEnc, yEnc], yFieldSubType);\n    }\n\n    return domains;\n};\n\nexport const attachDataToVoronoi = (voronoi, points) => {\n    voronoi.data([].concat(...points).filter(d => d._id !== undefined).map((d) => {\n        const point = d.update;\n        return {\n            x: point.x,\n            y: point.y,\n            data: d\n        };\n    }));\n};\n\n/**\n *\n *\n * @param {*} target\n * @param {*} styles\n * @param {*} remove\n */\nexport const updateStyle = (target, styles, remove) => {\n    for (const key in styles) {\n        if ({}.hasOwnProperty.call(styles, key)) {\n            target.style(key, remove ? null : styles[key]);\n        }\n    }\n};\n\n/**\n *\n *\n * @param {*} mount\n * @param {*} context\n */\nexport const animateGroup = (mount, context) => {\n    let groupTransition;\n    let update;\n    const { transition, groupAnimateStyle } = context;\n    const { duration, effect, disabled } = transition;\n    if (groupAnimateStyle) {\n        setStyles(mount.node(), groupAnimateStyle.enter);\n        update = groupAnimateStyle.update;\n        if (!disabled) {\n            groupTransition = mount.transition()\n                .ease(easeFns[effect])\n                .duration(duration)\n                .on('end', function () {\n                    updateStyle(selectElement(this), update, true);\n                });\n        } else {\n            groupTransition = mount;\n        }\n        updateStyle(groupTransition, update);\n    }\n};\n\nexport const positionPoints = (context, points) => {\n    const positioner = context.encodingTransform();\n    if (positioner) {\n        return positioner(points, { smartLabel: context._dependencies.smartLabel });\n    }\n    return points;\n};\n"," import { AreaLayer } from './layers/area';\n import { ArcLayer } from './layers/arc';\n import { LineLayer } from './layers/line';\n import { TextLayer } from './layers/text';\n import { PointLayer } from './layers/point';\n import { BarLayer } from './layers/bar';\n import { TickLayer } from './layers/tick';\n import { SimpleLayer } from './simple-layer';\n import { BaseLayer } from './base-layer';\n import layerFactory from './layer-factory';\n import layerRegistry from './layer-registry';\n\n export {\n    BaseLayer,\n    BarLayer,\n    LineLayer,\n    AreaLayer,\n    PointLayer,\n    ArcLayer,\n    TextLayer,\n    TickLayer,\n    layerFactory,\n    SimpleLayer,\n    layerRegistry\n};\n","import { isSimpleObject, mergeRecursive, getObjProp } from 'muze-utils';\n\nconst parseLayerDefinition = (sink, definition, layerDef, layerType) => {\n    for (const key in definition) {\n        if (Object.hasOwnProperty.call(definition, key)) {\n            let strs;\n            let propValue;\n            const def = definition[key];\n            if (isSimpleObject(def)) {\n                sink[key] = {};\n                parseLayerDefinition(sink[key], def, layerDef, layerType);\n            } else if (typeof def === 'string' && (strs = def.split('.')) && strs[0] === layerType) {\n                propValue = getObjProp(layerDef, ...strs.slice(1, strs.length));\n                if (propValue !== undefined) {\n                    sink[key] = propValue;\n                }\n            } else {\n                sink[key] = def;\n            }\n        }\n    }\n};\n\nconst sanitizeEncoding = (encoding) => {\n    // Create object for each encoding value if encoding value is a string\n    for (const key in encoding) {\n        if (typeof encoding[key] === 'string') {\n            encoding[key] = {\n                field: encoding[key]\n            };\n        }\n    }\n};\n\n/**\n * Layer Factory creates layers based on the layer type. All types of layers needs to register in\n * the layer factory. For getting a layer instance, getLayer method needs to invoked with the\n * layerType and other arguments.\n */\nconst layerFactory = (() => {\n    const compositeLayers = {};\n    const factoryObj = {\n        setLayerRegistry: (reg) => {\n            factoryObj._layerRegistry = reg;\n        },\n        getSerializedConf: (mark, layerDef) => {\n            let serializedDefs;\n            const defs = compositeLayers[mark];\n            const newConf = mergeRecursive({}, layerDef);\n\n                // If it is a composite layer then resolve all the definitions of each unit layer\n            if (defs) {\n                serializedDefs = defs.map((unitLayerDef) => {\n                    const sDef = {};\n                    parseLayerDefinition(sDef, unitLayerDef, newConf, mark);\n                    sanitizeEncoding(sDef.encoding);\n                    return sDef;\n                });\n            } else {\n                const encoding = newConf.encoding;\n                // Create object for each encoding value if encoding value is a string\n                sanitizeEncoding(encoding);\n                serializedDefs = newConf;\n            }\n\n            return serializedDefs;\n        },\n        getLayerInstance: (layerDef) => {\n            const layerRegistry = factoryObj._layerRegistry;\n            layerDef = !(layerDef instanceof Array) ? [layerDef] : layerDef;\n            const instances = layerDef.map((layerObj) => {\n                const layerConstructor = layerRegistry[layerObj.mark];\n                return layerConstructor.create();\n            });\n            return instances.length === 1 ? instances[0] : instances;\n        },\n        composeLayers: (layerType, layerDefs) => {\n            compositeLayers[layerType] = layerDefs;\n        }\n    };\n    return factoryObj;\n})();\n\nexport default layerFactory;\n","import { DEFAULT_LAYERS } from './defaults';\n\nexport default () => {\n    const reg = DEFAULT_LAYERS;\n    const regObj = {\n        set: (key, def) => {\n            reg[key] = def;\n            return regObj;\n        },\n        get: () => reg\n    };\n    return regObj;\n};\n","import { getObjProp, interpolator, FieldType } from 'muze-utils';\nimport { ANGLE, RADIUS, SIZE, COLOR } from '../../enums/constants';\n\n/**\n * Returns the range value from a value inside the domain\n *\n * @param {Object} domainValue Value whose range has to be returned\n * @return {number} range value\n * @memberof ArcLayer\n */\nexport const getRangeValue = (datum, range, domain, defaultRadius, sizeAxis) => {\n    let domainMultiplier = 1;\n    const {\n        outerRadiusValue,\n        sizeVal\n    } = datum;\n    const sizeAxisDomain = sizeAxis.domain();\n    const sizeMultiplier = sizeAxis.getSize(sizeVal) / (sizeAxisDomain ? sizeAxis.range()[1] : sizeAxis.config().value);\n\n    domainMultiplier *= (range[1] - range[0]) / (domain[1] - domain[0]);\n    const rangeVal = (range[0] + (outerRadiusValue - domain[0]) * domainMultiplier);\n    return (rangeVal || defaultRadius) * sizeMultiplier;\n};\n\n/**\n *\n *\n * @memberof ArcLayer\n */\nexport const getRadiusRange = (width, height, config) => {\n    const {\n        minOuterRadius,\n        innerRadius,\n        outerRadius,\n        innerRadiusFixer\n    } = config;\n\n    return [Math.max((innerRadius + innerRadiusFixer || 0), minOuterRadius), outerRadius || Math.min(height,\n        width) / 2];\n};\n\nconst getIndexedPoint = (prevData, currIndex) => {\n    if (!prevData[currIndex]) {\n        const prevArc = prevData[currIndex - 1];\n        const nextArc = prevData[currIndex + 1];\n        if (prevArc && nextArc) {\n            return {\n                startAngle: prevArc[0].endAngle,\n                endAngle: nextArc[0].startAngle\n            };\n        } else if (!nextArc) {\n            return {\n                startAngle: Math.PI * 2,\n                endAngle: Math.PI * 2\n            };\n        }\n    }\n    return { startAngle: 0, endAngle: 0 };\n};\n\n/**\n *\n *\n * @param {*} path\n * @param {*} b\n * @returns\n * @memberof ArcLayer\n */\nexport const tweenPie = (path, b, prevData) => {\n    const { datum } = b[0];\n    const uid = datum.uid;\n    const prevDatum = getObjProp(prevData, uid, 0) || getIndexedPoint(prevData, uid);\n    const prevObject = { startAngle: prevDatum.startAngle, endAngle: prevDatum.endAngle };\n\n    return function (t) {\n        return path(interpolator()(prevObject, datum)(t));\n    };\n};\n\nexport const getFieldIndices = (encoding, fieldsConfig) => {\n    const [angleField, radiusField, colorField, sizeField] = [ANGLE, RADIUS, COLOR, SIZE]\n            .map(e => encoding[e].field);\n    const [angleIndex, sizeIndex, radiusIndex] = [angleField, sizeField, radiusField]\n        .map((e) => {\n            const conf = fieldsConfig[e];\n            if (conf && conf.def.type === FieldType.MEASURE) {\n                return conf.index;\n            }\n            return null;\n        });\n    const colorIndex = getObjProp(fieldsConfig, colorField, 'index');\n    return {\n        angleIndex,\n        sizeIndex,\n        radiusIndex,\n        colorIndex\n    };\n};\n","import {\n    makeElement,\n    selectElement,\n    getQualifiedClassName,\n    isSimpleObject,\n    getDomainFromData,\n    Symbols\n} from 'muze-utils';\nimport { defaultConfig } from './default-config';\nimport { BaseLayer } from '../../base-layer';\nimport * as PROPS from '../../enums/props';\nimport { ASCENDING, OUTER_RADIUS_VALUE } from '../../enums/constants';\nimport { getRangeValue, getRadiusRange, tweenPie, getFieldIndices } from './arc-helper';\nimport './styles.scss';\n\nconst pie = Symbols.pie;\nconst arc = Symbols.arc;\n\n/**\n * Arc Layer creates a plot with polar coordinates\n * Example :-\n * const config = {\n *  height: 100,\n *  width: 100,\n *  startAngle: 0,\n * endAngle: Math.PI,\n * cornerRadius: 10,\n * minOuterRadius: 10,\n * outerRadius: 10,\n * innerRadius: 5,\n * padAngle: 2,\n * padRadius: 2,\n * colors: []\n * padding: {top: 10, bottom: 10, left: 10, right: 10},\n *  encoding = {\n *      angle: {\n *          field: 'date' //Maps to angle of arc\n *      },\n *      radius: {\n *          field: 'sales' // Maps to radius of arc\n *      }\n *  }\n * };\n * @class\n */\nexport default class ArcLayer extends BaseLayer {\n\n    constructor (data, axes, config, dependencies) {\n        super(data, axes, config, dependencies);\n        this._prevPieData = {};\n    }\n\n    /**\n     * returns the default configuration of the layer\n     *\n     * @static\n     * @return {Object} Default configuration for arc layer\n     * @memberof ArcLayer\n     */\n    static defaultConfig () {\n        return defaultConfig;\n    }\n\n    /**\n     *\n     *\n     * @static\n     * @returns\n     * @memberof ArcLayer\n     */\n    static formalName () {\n        return 'arc';\n    }\n\n    /**\n     *\n     *\n     * @returns\n     * @memberof ArcLayer\n     */\n    elemType () {\n        return 'path';\n    }\n\n    /**\n     * Transforms data in the appropriate data structure to be consumed by the layer for rendering\n     *\n     * @param {Object} data data model associated with the layer\n     * @param {Object} config configuration of the layer that contains encoding and other parameters\n     * @return {Object} Transformed pie data\n     * @memberof ArcLayer\n     */\n    getTransformedData (dataModel, config) {\n        let pieData = [];\n\n        const {\n            startAngle,\n            endAngle,\n            encoding,\n            sort,\n            minOuterRadius\n        } = config;\n        const prevData = this._store.get(PROPS.TRANSFORMED_DATA) || [];\n        const fieldsConfig = this.data().getFieldsConfig();\n        const {\n            angleIndex,\n            sizeIndex,\n            radiusIndex,\n            colorIndex\n        } = getFieldIndices(encoding, fieldsConfig);\n        const dataVal = dataModel.getData();\n        const data = dataVal.data;\n        const uids = dataVal.uids;\n\n        this._prevPieData = {};\n        prevData.forEach((e, index) => {\n            this._prevPieData[e.uid] = [e, index];\n        });\n        // Creating pie data using angle field provided. If the angle field is a dimension,\n        // all the angles will be equal(360/number of dimensions)\n        pieData = pie()\n            .startAngle((startAngle / 180) * Math.PI)\n            .endAngle(Math.PI * endAngle / 180)\n            .value(d => d[angleIndex] || 1);\n\n        sort.length && pieData.sort((a, b) => {\n            if (sort === ASCENDING) {\n                return a[radiusIndex] - b[radiusIndex];\n            } return b[radiusIndex] - a[radiusIndex];\n        });\n\n        const sizeVal = data.reduce((acc, d) => acc + (d[sizeIndex] || 0), 1);\n        // Adding the radius field values to each data point in pie data\n        pieData = pieData(data).map((d, i) => {\n            d.outerRadiusValue = data[i][radiusIndex] || minOuterRadius;\n            d.colorVal = data[i][colorIndex];\n            d.angleVal = data[i][angleIndex];\n            d.sizeVal = sizeVal;\n            d.uid = uids[i];\n            return d;\n        });\n        return pieData;\n    }\n\n    /**\n     * Returns normalized data after transformation (it is the same in the case of pie layer)\n     *\n     * @param {Object} data transformed data\n     * @return {Object} normalized data\n     * @memberof ArcLayer\n     */\n    getNormalizedData (data) {\n        return data;\n    }\n\n    /**\n     *\n     *\n     * @param {Object} data\n     * @return {}\n     * @memberof ArcLayer\n     */\n    calculateDomainFromData (data) {\n        const domainKey = OUTER_RADIUS_VALUE;\n        return {\n            radius: getDomainFromData([data], [domainKey, domainKey])\n        };\n    }\n\n    /**\n     *\n     *\n     * @param {Object} x\n     * @param {Object} y\n     * @return {}\n     * @memberof ArcLayer\n     */\n    getNearestPoint (x, y, config = {}) {\n        const dataPoint = config.data;\n        if (isSimpleObject(dataPoint)) {\n            const { data, uid } = dataPoint.datum;\n            return {\n                id: this.getIdentifiersFromData(data, uid),\n                layerId: this.id(),\n                showInPosition: true\n            };\n        }\n        return null;\n    }\n\n    /**\n     *\n     *\n     * @param {*} set\n     * @returns\n     * @memberof ArcLayer\n     */\n    getPlotElementsFromSet (set) {\n        return selectElement(this.mount()).selectAll(this.elemType()).filter(d => set.indexOf(d.datum.uid) !== -1);\n    }\n\n    /**\n     *\n     *\n     * @param {Object} container\n     * @return {}\n     * @memberof ArcLayer\n     */\n    render (container) {\n        const {\n            height,\n            width\n        } = this.measurement();\n        const {\n            classPrefix,\n            defClassName,\n            minOuterRadius,\n            innerRadius,\n            outerRadius,\n            cornerRadius,\n            padAngle,\n            padRadius,\n            padding,\n            transition,\n            innerRadiusFixer\n       } = this.config();\n        const sizeAxis = this.axes().size;\n        const store = this._store;\n        const chartHeight = height - padding.top - padding.bottom;\n        const chartWidth = width - padding.left - padding.right;\n        const qualClassName = getQualifiedClassName(defClassName, this.id(), classPrefix);\n        // Sets range for radius\n        const range = getRadiusRange(chartWidth, chartHeight, {\n            minOuterRadius,\n            innerRadius,\n            outerRadius,\n            innerRadiusFixer\n        });\n        const colorAxis = this.axes().color;\n        const defaultRadius = outerRadius || Math.min(chartHeight, chartWidth) / 2;\n        const radiusDomain = store.get(PROPS.DOMAIN).radius;\n        // This returns a function that generates the arc path based on the datum provided\n        const path = arc()\n                .outerRadius(d => getRangeValue(d, range, radiusDomain, defaultRadius, sizeAxis))\n                .innerRadius(innerRadius ? Math.min(chartHeight / 2, chartWidth / 2, innerRadius) : 0)\n                .cornerRadius(cornerRadius)\n                .padAngle(padAngle)\n                .padRadius(padRadius);\n        // Creating the group that holds all the arcs\n        const g = makeElement(selectElement(container), 'g', [1], `${qualClassName[0]}-group`)\n                .classed(`${qualClassName[1]}-group`, true)\n                .attr('transform', `translate(${chartWidth / 2},${chartHeight / 2})`);\n        const tween = (elem) => {\n            makeElement(elem, 'path', (d, i) => [{\n                datum: d,\n                index: i,\n                meta: {\n                    originalColor: colorAxis.getRawColor(d.colorVal),\n                    stateColor: {},\n                    colorTransform: {}\n                }\n            }], `${qualClassName[0]}-path`)\n                            .attr('fill', d => colorAxis.getColor(d.datum.colorVal))\n                            .transition()\n                            .duration(transition.duration)\n                            .attrTween('d', (...params) => tweenPie(path, params, this._prevPieData))\n                            .attr('class', d => `${qualClassName[0]}-path ${qualClassName[1]}-path-${d.index}`);\n        };\n        // Creating groups for all the arcs present individually\n        makeElement(g, 'g', store.get(PROPS.TRANSFORMED_DATA), `${qualClassName[0]}`,\n            { update: tween }, d => d.uid)\n                        .attr('class', (d, i) => `${qualClassName[0]} ${qualClassName[1]}-${i}`)\n                        .call(tween);\n        return this;\n    }\n}\n\n","import { CLASSPREFIX } from '../../enums/constants';\n\nexport const defaultConfig = {\n    classPrefix: CLASSPREFIX,\n    defClassName: 'layer-arc',\n    padding: { top: 1, bottom: 1, left: 1, right: 1 },\n    className: '',\n    minOuterRadius: 10,\n    interaction: {\n        highlight: [{\n            type: 'fill',\n            intensity: [0, 0, -20, 0]\n        }],\n        fade: [{\n            type: 'fill',\n            intensity: [0, 0, +20, 0]\n        }],\n        focus: [{\n            type: 'fill',\n            intensity: [0, 0, +20, 0]\n        }]\n    },\n    height: 100,\n    width: 100,\n    sort: '',\n    cornerRadius: 0,\n    padAngle: 0,\n    padRadius: 0,\n    startAngle: 0,\n    endAngle: 360,\n    colors: ['#F44336', 'blue', 'green', 'yellow', 'orange', 'purple'],\n    transform: {\n        type: 'identity'\n    },\n    encoding: {\n        'stroke-width': {\n            value: '2px'\n        },\n        'stroke-linejoin': {\n            value: 'round'\n        },\n        angle: {\n            value: '1'\n        },\n        radius: {\n            value: '1'\n        },\n        opacity: {\n            value: '1'\n        },\n        color: {\n            value: '1'\n        },\n        shape: {\n            value: '1'\n        },\n        size: {\n            value: '1'\n        }\n    },\n    innerRadiusFixer: 10,\n    transition: {\n        effect: 'cubic',\n        duration: 1000\n    },\n    states: {\n        highlight: {\n            className: `${CLASSPREFIX}-layer-arc-highlight`\n        },\n        fadeout: {\n            className: `${CLASSPREFIX}-layer-arc-fadeout`\n        },\n        selected: {\n            className: `${CLASSPREFIX}-layer-arc-selected`\n        }\n    }\n};\n\n","// extracted by mini-css-extract-plugin","import { FieldType } from 'muze-utils';\nimport { defaultConfig } from './default-config';\nimport { LineLayer } from '../line';\nimport drawArea from './renderer';\nimport './styles.scss';\nimport { STACK, ENCODING } from '../../enums/constants';\nimport { getAxesScales, positionPoints, getLayerColor } from '../../helpers';\n\n/**\n * Area Layer creates a area plot.\n * @example\n * const config = {\n *  encoding = {\n *      x: {\n *          field: 'date'\n *      },\n *      // Top y value\n *      y: {\n *          field: 'maxTemp'\n *      },\n *      // Base y value\n *      y0: {\n *          field: 'minTemp\n *      }\n *  }\n * };\n * const areaLayer = layerFactory.getLayer('area', [dataModel, axes, config]);\n * areaLayer.render(container);\n * @class\n */\nexport default class AreaLayer extends LineLayer {\n    /** oation of line layer\n     * @return {Object} Default configuration of layer\n     */\n    static defaultConfig () {\n        return defaultConfig;\n    }\n\n    /**\n     *\n     *\n     * @static\n     * @returns\n     * @memberof AreaLayer\n     */\n    static formalName () {\n        return 'area';\n    }\n\n    /**\n     * Calculates the domain from data. It calls its parent class's method which is line layer\n     * to get the domain and overwrites the domain according to its need.\n     * @return {Array} Domain values\n     */\n    calculateDomainFromData (data, encodingFieldsInf, fieldsConfig) {\n        const domains = super.calculateDomainFromData(data, fieldsConfig);\n        [ENCODING.X, ENCODING.Y].forEach((type) => {\n            const { [`${type}FieldType`]: fieldType } = encodingFieldsInf;\n            if (fieldType === FieldType.MEASURE) {\n                domains[type][0] = Math.min(domains[type][0], 0);\n            }\n        });\n        return domains;\n    }\n\n    /**\n     * Returns the drawing method of this layer\n     * @return {Function} Draw method\n     */\n    getDrawFn () {\n        return drawArea;\n    }\n\n    /**\n     * Generates the x and y positions for each point\n     * @param {Array} data Data Array\n     * @param {Object} encoding Visual Encodings of the layer\n     * @param {Object} axes Contains the axis\n     * @return {Array} Array of points\n     */\n    translatePoints (data, encodingFieldsInf, axes) {\n        let points = [];\n        const transformType = this.transformType();\n        const colorAxis = axes.color;\n        const encoding = this.config().encoding;\n        const colorEncoding = encoding.color;\n        const colorField = colorEncoding.field;\n        const fieldsConfig = this.data().getFieldsConfig();\n        const colorFieldIndex = colorField && fieldsConfig[colorField].index;\n        const { xField, yField, y0Field } = encodingFieldsInf;\n        const {\n            xAxis,\n            yAxis\n       } = getAxesScales(axes);\n\n        const isXDim = fieldsConfig[xField] && fieldsConfig[xField].def.type === FieldType.DIMENSION;\n        const isYDim = fieldsConfig[yField] && fieldsConfig[yField].def.type === FieldType.DIMENSION;\n        const key = isXDim ? 'x' : (isYDim ? 'y' : null);\n        points = data.map((d, i) => {\n            const xPx = xAxis.getScaleValue(d.x) + xAxis.getUnitWidth() / 2;\n            const yPx = yAxis.getScaleValue(d.y);\n            const y0Px = (y0Field || transformType === STACK) ? yAxis.getScaleValue(d.y0) : yAxis.getScaleValue(0);\n            const { color, rawColor } = getLayerColor({ datum: d, index: i }, {\n                colorEncoding, colorAxis, colorFieldIndex });\n            const style = {};\n            const meta = {};\n            style.fill = color;\n            // style['fill-opacity'] = 0;\n            meta.stateColor = {};\n            meta.originalColor = rawColor;\n            meta.colorTransform = {};\n            const point = {\n                enter: {\n                    x: xPx,\n                    y: d.y === null ? d.y : yAxis.getScaleValue(0),\n                    y0: d.y0 === null ? d.y0 : yAxis.getScaleValue(0)\n                },\n                update: {\n                    x: xPx,\n                    y: d.y === null ? d.y : yPx,\n                    y0: d.y0 === null ? d.y0 : y0Px\n                },\n                _id: d._id,\n                _data: d._data,\n                style,\n                meta\n            };\n            this.cachePoint(d[key], point);\n            return point;\n        });\n        points = positionPoints(this, points);\n        return points;\n    }\n\n    /**\n     * Get the css styles need to be applied on the line path\n     * @param {string} color Color value\n     * @return {Object} Path styles\n     */\n    getPathStyle (color) {\n        return {\n            fill: color\n        };\n    }\n}\n\n","import { CLASSPREFIX, STACK } from '../../enums/constants';\n\nexport const defaultConfig = {\n    classPrefix: CLASSPREFIX,\n    defClassName: 'layer-area',\n    className: '',\n    interpolate: 'linear',\n    transform: {\n        type: STACK\n    },\n    nearestPointThreshold: 10,\n    encoding: {\n        color: {},\n        x: {},\n        y: {},\n        y0: {},\n        strokeOpacity: {\n            value: 1\n        }\n    },\n    transition: {\n        effect: 'cubic',\n        duration: 1000\n    },\n    connectNullData: false,\n    states: {\n        highlight: {\n            className: 'layer-area-highlight'\n        },\n        fadeout: {\n            className: 'layer-area-fadeout'\n        },\n        selected: {\n            className: 'layer-area-selected'\n        }\n    }\n};\n","import {\n    easeFns,\n    selectElement,\n    pathInterpolators,\n    Symbols\n} from 'muze-utils';\n\nconst area = Symbols.area;\n/**\n * Draws a line from the points\n * Generates a svg path string\n * @param {Object} params Contains container, points and interpolate attribute.\n */\nconst /* istanbul ignore next */ drawArea = (params) => {\n    let filteredPoints;\n    const { container, points, style, transition, className, connectNullData, interpolate } = params;\n\n    const { effect: easeEffect, duration } = transition;\n    const mount = selectElement(container);\n    const curveInterpolatorFn = pathInterpolators[interpolate];\n    const selection = mount.selectAll('path').data([1]);\n    const [enterAreaPath, updateAreaPath] = ['enter', 'update'].map(e => area().curve(curveInterpolatorFn)\n                    .x(d => d[e].x)\n                    .y1(d => d[e].y)\n                    .y0(d => d[e].y0)\n                    .defined(d => d[e].y !== null\n            ));\n\n    filteredPoints = points;\n    mount.attr('class', className);\n    if (connectNullData) {\n        filteredPoints = points.filter(d => d.update.y !== null);\n    }\n    const selectionEnter = selection.enter().append('path').attr('d', enterAreaPath(filteredPoints));\n    selection.merge(selectionEnter).transition().ease(easeFns[easeEffect])\n                    .duration(duration)\n                    .attr('d', updateAreaPath(filteredPoints))\n                    .each(function () {\n                        const element = selectElement(this);\n                        Object.keys(style).forEach(key => element.style(key, style[key]));\n                    });\n};\n\nexport default drawArea;\n","// extracted by mini-css-extract-plugin","import { FieldType, DimensionSubtype } from 'muze-utils';\nimport { ScaleType } from '@chartshq/muze-axis';\nimport * as PROPS from '../../enums/props';\nimport { STACK } from '../../enums/constants';\nimport { getLayerColor, positionPoints } from '../../helpers/';\n\nconst BAND = ScaleType.BAND;\n\n/**\n *\n *\n * @param {*} type\n * @param {*} fieldInfo\n * @param {*} config\n * @param {*} data\n * @returns\n */\nconst resolveDimByField = (type, axesInfo, config, data) => {\n    const spaceType = type === 'x' ? 'width' : 'height';\n    const [fieldType, axis] = [config[`${type}FieldType`], axesInfo[`${type}Axis`]];\n    const {\n        transformType,\n        sizeEncoding,\n        sizeConfig,\n        measurement\n    } = config;\n\n    const sizeValue = sizeEncoding.value;\n    let enter = 0;\n    let pos;\n    let space = 0;\n    let enterSpace = 0;\n    if (fieldType !== undefined) {\n        if (config[`${type}0Field`]) {\n            const minVal = data[type];\n            const maxVal = data[`${type}0`];\n            let min;\n            let max;\n            if (minVal === null || maxVal === null) {\n                return {\n                    enterSpace: undefined,\n                    enter: undefined,\n                    pos: undefined,\n                    space: undefined\n                };\n            } else if (fieldType === FieldType.MEASURE || fieldType === DimensionSubtype.TEMPORAL) {\n                min = Math.min(minVal, maxVal);\n                max = Math.max(minVal, maxVal);\n            } else {\n                min = minVal;\n                max = maxVal;\n            }\n            const scales = type === 'x' ? [min, max] : [max, min];\n            pos = axis.getScaleValue(scales[0]) + axis.getUnitWidth() / 2;\n            space = Math.abs(axis.getScaleValue(scales[1]) - pos) + axis.getUnitWidth() / 2;\n\n            enter = pos;\n            enterSpace = 0;\n        } else if (fieldType === DimensionSubtype.CATEGORICAL || fieldType === DimensionSubtype.TEMPORAL) {\n            pos = axis.getScaleValue(data[type]) +\n                (sizeConfig[type === 'x' ? 'barWidthOffset' : 'barHeightOffset'] || 0);\n\n            space = sizeConfig[type === 'x' ? 'barWidth' : 'barHeight'];\n            if (sizeValue !== undefined) {\n                const diffPx = sizeValue * space;\n                space -= diffPx;\n                pos += diffPx / 2;\n            }\n            enter = pos;\n            enterSpace = space;\n        } else {\n            const zeroPos = axis.getScaleValue(0);\n            const axisType = axis.getScaleValue(data[type]);\n            const axisType0 = axis.getScaleValue(data[`${type}0`]);\n\n            enterSpace = 0;\n            if (type === 'x') {\n                pos = data[type] < 0 || transformType === STACK ? axisType : zeroPos;\n                space = Math.abs(pos - (transformType === STACK ? axisType0 : (data[type] >= 0 ? axisType : zeroPos)));\n            } else {\n                pos = transformType === STACK || data[type] >= 0 ? axisType : zeroPos;\n                space = Math.abs(pos - (transformType === STACK ? axisType0 : (data[type] >= 0 ? zeroPos : axisType)));\n            }\n            enter = zeroPos;\n        }\n    } else {\n        pos = 0;\n        space = measurement[spaceType];\n    }\n\n    return {\n        enterSpace,\n        enter,\n        pos,\n        space\n    };\n};\n\n/**\n *\n *\n * @param {*} data\n * @param {*} config\n * @param {*} axes\n * @returns\n */\nconst resolveDimensions = (data, config, axes) => {\n    const axesInfo = {\n        xAxis: axes.x,\n        yAxis: axes.y\n    };\n    const {\n        enterSpace: enterWidth,\n        enter: enterX,\n        pos: xPos,\n        space: width\n    } = resolveDimByField('x', axesInfo, config, data);\n\n    const {\n        enterSpace: enterHeight,\n        enter: enterY,\n        pos: yPos,\n        space: height\n    } = resolveDimByField('y', axesInfo, config, data);\n    return {\n        enter: {\n            x: enterX,\n            y: enterY,\n            width: enterWidth,\n            height: enterHeight\n        },\n        update: {\n            x: xPos,\n            y: yPos,\n            width,\n            height\n        }\n    };\n};\n\n/**\n  * Gets the width of each bar. It gets the width from axis if it is available for\n  * example when the scale is nominal else it calculates the width from the\n  * range of the axis and number of data points.\n  * @param {SimpleAxis} axis instance of axis\n  * @param {number} minDiff Minimum difference between data points\n  * @return {number} width of each bar\n  * @private\n*/\nconst getGroupWidth = (axis, minDiff) => {\n    let barWidth;\n    const width = axis.getUnitWidth();\n    const scale = axis.scale();\n    const range = scale.range();\n    const domain = scale.domain();\n    !width ? barWidth = (Math.abs(range[1] - range[0])\n        / Math.abs(domain[1] - domain[0])) * minDiff :\n        (barWidth = width);\n\n    return barWidth;\n};\n\n/**\n * Gets the width and offset values of the bar.\n * Bar layer can be grouped or stacked based on which the width and offsetValues are\n * calculated.\n * @param { Axis } axis Axis instance needed for calculating the group width\n * @param { number } dataLen Number of data points\n * @param { string} transformType type of transform - group, stack\n * @param { number } innerPadding padding between bars.\n * @param {number} keys Series values\n * @return { Object } Width and offset of bars.\n */\nexport const getBarMeasurement = (axis, bandScale, config) => {\n    let width;\n    let offsetValues;\n    let actualGroupWidth;\n    let padding;\n    const scale = axis.scale();\n    const {\n        timeDiff,\n        transformType,\n        keys,\n        pad,\n        innerPadding\n    } = config;\n    const groupWidth = getGroupWidth(axis, timeDiff);\n    const isAxisBandScale = axis.constructor.type() === BAND;\n    const axisPadding = axis.config().padding;\n    // If it is a grouped bar then the width of each bar in a grouping is retrieved from\n    // a band scale. The band scale will have range equal to width of one group of bars and\n    // the domain is set to series keys.\n    if (transformType === 'group') {\n        const groupPadding = isAxisBandScale ? 0 : axisPadding * groupWidth / 2;\n        bandScale.range([groupPadding, groupWidth - groupPadding])\n                        .domain(keys);\n        isAxisBandScale ? bandScale.paddingInner(innerPadding) : bandScale.paddingInner(innerPadding);\n        width = bandScale.bandwidth();\n        actualGroupWidth = groupWidth - (isAxisBandScale ? 0 : innerPadding * groupWidth);\n        offsetValues = keys.map(key => bandScale(key) - (isAxisBandScale ? 0 : (groupWidth / 2)));\n    } else if (pad !== undefined) {\n        let offset;\n        if (isAxisBandScale) {\n            const step = scale.step();\n            offset = scale.padding() * step;\n            width = scale.bandwidth() + offset;\n        } else {\n            width = groupWidth;\n        }\n        offsetValues = keys.map(() => (isAxisBandScale ? -(offset / 2) : -(width / 2)));\n    } else {\n        padding = isAxisBandScale ? 0 : axisPadding * groupWidth;\n        width = groupWidth - padding;\n        actualGroupWidth = width;\n        offsetValues = keys.map(() => (isAxisBandScale ? 0 : -(width / 2)));\n    }\n\n    return {\n        width,\n        offsetValues,\n        groupWidth: actualGroupWidth,\n        padding: isAxisBandScale ? axisPadding * axis.scale().step() : axisPadding * groupWidth\n    };\n};\n\n/**\n * Generates an array of objects containing x, y, width and height of the bars from the data\n * @param  {Array.<Array>} data Data Array\n * @param  {Object} encoding  Config\n * @param  {Object} axes     Axes object\n * @param {Object} conf config object for point generation\n * @return {Array.<Object>}  Array of points\n */\nexport const getTranslatedPoints = (context, data, sizeConfig) => {\n    let points = [];\n    const encoding = context.config().encoding;\n    const axes = context.axes();\n    const colorAxis = axes.color;\n    const fieldsConfig = context.data().getFieldsConfig();\n    const colorEncoding = encoding.color;\n    const colorField = colorEncoding.field;\n    const sizeEncoding = encoding.size || {};\n    const {\n            x0Field,\n            y0Field,\n            xFieldSubType,\n            yFieldSubType\n        } = context.encodingFieldsInf();\n    const measurement = context._store.get(PROPS.MEASUREMENT);\n    const isXDim = xFieldSubType === DimensionSubtype.CATEGORICAL || xFieldSubType === DimensionSubtype.TEMPORAL;\n    const isYDim = yFieldSubType === DimensionSubtype.CATEGORICAL || yFieldSubType === DimensionSubtype.TEMPORAL;\n    const key = isXDim ? 'x' : (isYDim ? 'y' : null);\n    const transformType = context.transformType();\n    const colorFieldIndex = colorField && fieldsConfig[colorField] && fieldsConfig[colorField].index;\n\n    for (let i = 0, len = data.length; i < len; i++) {\n        const d = data[i];\n        const style = {};\n        const meta = {};\n        const dimensions = resolveDimensions(d, {\n            xFieldType: xFieldSubType,\n            yFieldType: yFieldSubType,\n            x0Field,\n            y0Field,\n            transformType,\n            measurement,\n            sizeConfig,\n            sizeEncoding\n        }, axes);\n\n        const { color, rawColor } = getLayerColor({ datum: d, index: i },\n            { colorEncoding, colorAxis, colorFieldIndex });\n\n        style.fill = color;\n        meta.stateColor = {};\n        meta.originalColor = rawColor;\n        meta.colorTransform = {};\n\n        const update = dimensions.update;\n\n        if (!isNaN(update.x) && !isNaN(update.y) && d._id !== undefined) {\n            let point = null;\n            point = {\n                enter: dimensions.enter,\n                update,\n                style,\n                _data: d._data,\n                _id: d._id,\n                meta\n            };\n            points.push(point);\n            // Store each point in a hashmap with key as the dimensional or temporal field value\n            context.cachePoint(d[key], point);\n        }\n    }\n\n    points = positionPoints(context, points);\n    return points;\n};\n","import {\n    getClosestIndexOf,\n    getQualifiedClassName,\n    selectElement,\n    createElements,\n    clipElement,\n    DimensionSubtype,\n    FieldType,\n    Scales\n} from 'muze-utils';\nimport { BaseLayer } from '../../base-layer';\nimport { drawRects } from './renderer';\nimport { defaultConfig } from './default-config';\nimport * as PROPS from '../../enums/props';\nimport './styles.scss';\nimport { getTranslatedPoints, getBarMeasurement } from './bar-helper';\n\nconst MEASURE = FieldType.MEASURE;\nconst scaleBand = Scales.band;\n/**\n * Bar Layer creates a bar plot. It needs to be passed a data table, axes and configuration of the layer.\n *\n * @example\n * const BarLayer = layerFactory.getLayer('bar');\n * BarLayer.create()\n *  .config(config)\n *  .data(dt)\n *  .mountPoint(container);\n * @class\n */\nexport default class BarLayer extends BaseLayer {\n    /**\n     * Creates an instance of bar layer\n     */\n    constructor (...params) {\n        super(...params);\n        this._bandScale = scaleBand();\n        this._pointMap = {};\n    }\n\n    /**\n     *\n     *\n     * @returns\n     * @memberof BarLayer\n     */\n    elemType () {\n        return 'rect';\n    }\n\n    /**\n     *\n     *\n     * @static\n     * @returns\n     * @memberof BarLayer\n     */\n    static formalName () {\n        return 'bar';\n    }\n\n    /**\n     * Returns the default configuration of the bar layer\n     * @return {Object} Default configuration of the bar layer\n     */\n    static defaultConfig () {\n        return defaultConfig;\n    }\n\n    /**\n     *\n     *\n     * @static\n     * @param {*} conf\n     * @param {*} userConf\n     * @returns\n     * @memberof BarLayer\n     */\n    static defaultPolicy (conf, userConf) {\n        const config = BaseLayer.defaultPolicy(conf, userConf);\n        const encoding = config.encoding;\n        const colorField = encoding.color.field;\n        const transform = config.transform;\n\n        if (colorField) {\n            transform.groupBy = colorField;\n        }\n        return config;\n    }\n\n    /**\n     *\n     *\n     * @param {*} data\n     * @param {*} fieldsConfig\n     * @returns\n     * @memberof BarLayer\n     */\n    calculateDomainFromData (data, encodingFieldInf, fieldsConfig) {\n        const domain = super.calculateDomainFromData(data, encodingFieldInf, fieldsConfig);\n        ['x', 'y'].forEach((d) => {\n            if (encodingFieldInf[`${d}FieldType`] === MEASURE && domain[d]) {\n                encodingFieldInf[`${d}0Field}`] ? domain[d] = domain[d].sort((a, b) => a - b) :\n                    (domain[d][0] = Math.min(domain[d][0], 0));\n            }\n        });\n        return domain;\n    }\n\n    /**\n     * Generates an array of objects containing x, y, width and height of the bars from the data\n     * @param  {Array.<Array>} data Data Array\n     * @param  {Object} encoding  Config\n     * @param  {Object} axes     Axes object\n     * @param {Object} conf config object for point generation\n     * @return {Array.<Object>}  Array of points\n     */\n    translatePoints (data, sizeConfig) {\n        return getTranslatedPoints(this, data, sizeConfig);\n    }\n\n    /**\n     * Renders the plot in the given container\n     * @param  {SVGGroup} container SVGGroup where plot will be rendered.\n     * @return {BarLayer} Instance of bar layer.\n     */\n    render (container) {\n        const config = this.config();\n        const transition = config.transition;\n        const store = this._store;\n        const normalizedDataArr = store.get(PROPS.NORMALIZED_DATA);\n        const transformedData = store.get(PROPS.TRANSFORMED_DATA);\n        const keys = transformedData.map(d => d.key);\n        const fieldsConfig = this.data().getFieldsConfig();\n        const axes = this.axes();\n        const height = axes.y && axes.y.scale().range()[0];\n        const width = axes.x && axes.x.scale().range()[1];\n        const defClassName = config.defClassName;\n        const qualifiedClassName = getQualifiedClassName(defClassName, this.id(), config.classPrefix);\n        const className = config.className;\n        const containerSelection = selectElement(container);\n        const dimensions = Object.values(fieldsConfig).filter(e => e.def.type === FieldType.DIMENSION)\n            .map(e => e.index);\n\n        containerSelection.classed(qualifiedClassName.join(' '), true);\n        containerSelection.classed(className, true);\n        clipElement(container, {\n            x: 0,\n            y: 0,\n            width,\n            height\n        }, `id-${this.id()}`);\n\n        this._points = this.generateDataPoints(normalizedDataArr, keys);\n\n        createElements({\n            data: this._points,\n            container,\n            selector: 'g',\n            append: 'g',\n            each: (points, group, i) => {\n                const seriesClassName = `${qualifiedClassName[0]}-${keys[i] || i}`.toLowerCase();\n                group.style('display', 'block');\n                drawRects({\n                    container: group.node(),\n                    points,\n                    className: seriesClassName,\n                    transition,\n                    style: {},\n                    keyFn: d => dimensions.map(key => d._data[key]).join('-'),\n                    classnameFn: config.individualClassName\n                });\n            }\n        });\n        return this;\n    }\n\n    /**\n     *\n     *\n     * @param {*} normalizedData\n     * @param {*} keys\n     * @returns\n     * @memberof BarLayer\n     */\n    generateDataPoints (normalizedData, keys) {\n        const config = this.config();\n        const axes = this.axes();\n        const transformType = this.transformType();\n        const fieldInfo = this.encodingFieldsInf();\n        const [barWidthMetrics, barHeightMetrics] = ['x', 'y'].map((type) => {\n            if (fieldInfo[`${type}FieldType`] === FieldType.DIMENSION) {\n                const isTemporal = fieldInfo[`${type}FieldSubType`] === DimensionSubtype.TEMPORAL;\n                const timeDiff = isTemporal ? this.dataProps().timeDiffs[type] : 0;\n                return getBarMeasurement(axes[type], this._bandScale, {\n                    timeDiff,\n                    transformType,\n                    keys,\n                    pad: config[`pad${type.toUpperCase()}`],\n                    innerPadding: config.innerPadding\n                });\n            } return {};\n        });\n        const barWidthOffsets = barWidthMetrics.offsetValues || [];\n        const barHeightOffsets = barHeightMetrics.offsetValues || [];\n        this._plotSpan = {\n            x: barWidthMetrics.groupWidth || 0,\n            y: barHeightMetrics.groupWidth || 0\n        };\n        this._plotPadding = {\n            x: barWidthMetrics.padding || 0,\n            y: barHeightMetrics.padding || 0\n        };\n\n        this._pointMap = {};\n        return normalizedData.map((data, i) => this.translatePoints(data,\n            {\n                barWidth: barWidthMetrics.width,\n                barWidthOffset: barWidthOffsets[i] || 0,\n                barHeight: barHeightMetrics.width,\n                barHeightOffset: barHeightOffsets[i] || 0\n            }));\n    }\n\n    getPlotPadding () {\n        return this._plotPadding;\n    }\n    /**\n     * Gets the nearest point of the position passed.\n     * @param {number} x x position\n     * @param {number} y y position\n     * @return {Object} Nearest point.\n     */\n    getNearestPoint (x, y) {\n        if (!this.data()) {\n            return null;\n        }\n        let axis;\n        let value;\n        let index;\n        let points;\n        let uniqueFieldType;\n        let uniqueFieldIndex;\n        let filterData;\n        let identifiers;\n        let pointFound = null;\n        const dataModel = this.data();\n        const dataObj = dataModel.getData();\n        const fieldsConfig = dataModel.getFieldsConfig();\n        const axes = this.axes();\n        const data = dataObj.data;\n        const pointMap = this._pointMap;\n        const {\n                xField,\n                yField,\n                xFieldSubType,\n                yFieldSubType\n            } = this.encodingFieldsInf();\n\n        if (xFieldSubType === FieldType.MEASURE) {\n            axis = axes.y;\n            value = axis.invert(y);\n            uniqueFieldIndex = fieldsConfig[yField].index;\n            uniqueFieldType = yFieldSubType;\n        } else {\n            axis = axes.x;\n            value = axis.invert(x);\n            uniqueFieldIndex = fieldsConfig[xField].index;\n            uniqueFieldType = xFieldSubType;\n        }\n\n        if (uniqueFieldType === DimensionSubtype.CATEGORICAL) {\n            points = pointMap[value];\n        }\n\n        if (uniqueFieldType === DimensionSubtype.TEMPORAL) {\n            filterData = [...new Set(data.map(d => d[uniqueFieldIndex]))];\n            index = getClosestIndexOf(filterData, value);\n            value = filterData[index];\n            points = pointMap[value];\n        }\n        const len = points && points.length;\n        points && points.sort((p1, p2) => p1.update.y - p2.update.y);\n        for (let i = 0; i < len; i++) {\n            const point = points[i];\n            const update = point.update;\n            if (x >= update.x && x <= (update.width + update.x) && y >= update.y && y <= (update.height + update.y)) {\n                pointFound = point;\n                break;\n            }\n            pointFound = null;\n        }\n\n        const values = pointFound && pointFound._data;\n        if (values) {\n            identifiers = this.getIdentifiersFromData(values, pointFound._id);\n        }\n        return pointFound ? {\n            dimensions: [pointFound.update],\n            id: identifiers,\n            layerId: this.id()\n        } : pointFound;\n    }\n\n    getPlotSpan () {\n        return this._plotSpan;\n    }\n}\n","import { CLASSPREFIX } from '../../enums/constants';\n\nexport const defaultConfig = {\n    classPrefix: CLASSPREFIX,\n    defClassName: 'layer-bar',\n    className: '',\n    interaction: {\n        highlight: [{\n            type: 'fill',\n            intensity: [0, 0, -20, 0]\n        }],\n        fade: [{\n            type: 'fill',\n            intensity: [0, 0, +20, 0]\n        }],\n        focus: [{\n            type: 'fill',\n            intensity: [0, 0, +20, 0]\n        }]\n    },\n    transform: {\n        type: 'stack'\n    },\n    transition: {\n        effect: 'cubic',\n        duration: 1000\n    },\n    innerPadding: 0.1,\n    encoding: {\n        color: {},\n        x: {},\n        y: {},\n        x0: {},\n        y0: {}\n    },\n    states: {\n        highlight: {\n            className: `${CLASSPREFIX}-layer-bar-highlight`\n        },\n        fadeout: {\n            className: `${CLASSPREFIX}-layer-bar-fadeout`\n        },\n        selected: {\n            className: `${CLASSPREFIX}-layer-bar-selected`\n        }\n    }\n};\n\n","import { makeElement, easeFns } from 'muze-utils';\n\n/**\n *\n *\n * @param {*} elem\n * @param {*} datum\n * @param {*} index\n * @param {*} context\n */\nconst transitionBars = (elem, datum, index, context) => {\n    const { transition, classnameFn } = context;\n    const { duration, disabled, effect } = transition;\n    const selection = elem;\n    const selTransition = disabled ? selection : selection.transition().duration(duration).ease(easeFns[effect]);\n    const update = datum.update || datum;\n    const updateStyle = datum.style || {};\n    classnameFn && selection.classed(classnameFn(datum, index), true);\n    Object.entries(update).forEach(attr => (!isNaN(attr[1]) && selTransition.attr(attr[0], attr[1])));\n    Object.entries(updateStyle).forEach(styleObj => selection.style(styleObj[0], styleObj[1]));\n};\n\n/**\n *\n *\n * @param {*} elem\n * @param {*} d\n */\nconst barEnterFn = (elem, d) => {\n    const selection = elem;\n    const enter = d.enter || {};\n    Object.entries(enter).forEach(attr => (!isNaN(attr[1]) && selection.attr(attr[0], attr[1])));\n};\n\n/**\n * Draws rectangles by using d3 selection\n * @param  {Object} params Contains container element and points\n * @return {Selection} Bar Selection\n */\n/* istanbul ignore next */ export const drawRects = (params) => {\n    const { points, container, keyFn } = params;\n    const updateFns = {\n        enter (elem, d) { barEnterFn(elem, d); },\n        update (elem, d, i) { transitionBars(elem, d, i, params); }\n    };\n    return makeElement(container, 'rect', points, null, updateFns, keyFn);\n};\n","// extracted by mini-css-extract-plugin","import { CLASSPREFIX } from '../../enums/constants';\n\nexport const defaultConfig = {\n    classPrefix: CLASSPREFIX,\n    defClassName: 'layer-line',\n    className: '',\n    interpolate: 'linear',\n    transform: {\n        type: 'group'\n    },\n    interaction: {\n        highlight: [{\n            type: 'stroke',\n            intensity: [0, -10, -10, 0]\n        }],\n        fade: [{\n            type: 'stroke',\n            intensity: [0, -30, +30, 0]\n        }],\n        focus: [{\n            type: 'stroke',\n            intensity: [0, -30, +30, 0]\n        }]\n    },\n    nearestPointThreshold: 10,\n    encoding: {\n        color: {},\n        x: {},\n        y: {},\n        strokeOpacity: {\n            value: 1\n        }\n    },\n    transition: {\n        effect: 'cubic',\n        duration: 1000\n    },\n    connectNullData: false\n};\n\n","import {\n    Voronoi,\n    getQualifiedClassName,\n    selectElement,\n    makeElement,\n    FieldType,\n    getObjProp\n} from 'muze-utils';\nimport { BaseLayer } from '../../base-layer';\nimport { drawLine } from './renderer';\nimport { defaultConfig } from './default-config';\nimport { ENCODING } from '../../enums/constants';\nimport * as PROPS from '../../enums/props';\nimport { attachDataToVoronoi, animateGroup, getLayerColor, positionPoints } from '../../helpers';\n\nimport './styles.scss';\n\n/**\n * Line Layer creates a line plot.\n * Example :-\n * const config = {\n *  encoding = {\n *      x: {\n *          field: 'date'\n *      },\n *      y: {\n *          field: 'sales'\n *      }\n *  }\n * };\n * const linelayer = layerFactory.getLayer('line', [dataModel, axes, config]);\n * linelayer.render(container);\n * @class\n */\nexport default class LineLayer extends BaseLayer {\n\n    /**\n     *Creates an instance of LineLayer.\n     * @param {*} args\n     * @memberof LineLayer\n     */\n    constructor (...args) {\n        super(...args);\n        this._voronoi = new Voronoi();\n    }\n\n    /**\n     *\n     *\n     * @static\n     * @returns\n     * @memberof LineLayer\n     */\n    static formalName () {\n        return 'line';\n    }\n\n    /**\n     *\n     *\n     * @returns\n     * @memberof LineLayer\n     */\n    elemType () {\n        return 'path';\n    }\n\n    /**\n     * Default configuration of line layer\n     * @return {Object} Default configuration of layer\n     */\n    static defaultConfig () {\n        return defaultConfig;\n    }\n\n    /**\n     *\n     *\n     * @static\n     * @param {*} conf\n     * @param {*} userConf\n     * @returns\n     * @memberof LineLayer\n     */\n    static defaultPolicy (conf, userConf) {\n        const config = BaseLayer.defaultPolicy(conf, userConf);\n        const encoding = config.encoding;\n        const transform = config.transform;\n        const colorField = encoding.color && encoding.color.field;\n\n        if (colorField) {\n            transform.groupBy = colorField;\n        }\n        return config;\n    }\n\n    /**\n     * Returns the draw method for line\n     * @return {Function} Draw method of line layer\n     */\n    getDrawFn () {\n        return drawLine;\n    }\n\n    /**\n     * Applies selection styles to the elements that fall within the selection set.\n     * @param {Array} selectionSet Array of tuple ids.\n     * @param {Object} config Configuration for selection.\n     * @return {BarLayer} Instance of bar layer.\n     */\n    highlightPoint () {\n        return this;\n    }\n\n    /**\n     * Removes selection styles to the elements that fall within the selection set.\n     * @param {Array} selectionSet Array of tuple ids.\n     * @param {Object} config Configuration for selection.\n     * @return {BarLayer} Instance of bar layer.\n     */\n    dehighlightPoint () {\n        return this;\n    }\n\n    focusSelection () {\n        return this;\n    }\n\n    focusOutSelection () {\n        return this;\n    }\n\n    fadeOutSelection () {\n        return this;\n    }\n\n    unfadeSelection () {\n        return this;\n    }\n\n    shouldDrawAnchors () {\n        return true;\n    }\n\n    /**\n     * Generates the x and y positions for each point\n     * @param {Array} data Data Array\n     * @param {Object} encoding Visual Encodings of the layer\n     * @param {Object} axes Contains the axis\n     * @param {number} seriesIndex index of series\n     * @return {Array} Array of points\n     */\n    translatePoints (data, encodingFieldsInf, axes) {\n        let points = [];\n        const xAxis = axes.x;\n        const yAxis = axes.y;\n        const colorAxis = axes.color;\n        const encoding = this.config().encoding;\n        const { xFieldType, yFieldType } = encodingFieldsInf;\n        const isXDim = xFieldType === FieldType.DIMENSION;\n        const isYDim = yFieldType === FieldType.DIMENSION;\n        const key = isXDim ? ENCODING.X : (isYDim ? ENCODING.Y : null);\n        const colorEncoding = encoding.color;\n        const colorField = colorEncoding.field;\n        const fieldsConfig = this.data().getFieldsConfig();\n        const colorFieldIndex = colorField && fieldsConfig[colorField].index;\n        const style = {};\n        const meta = {};\n\n        points = data.map((d, i) => {\n            const xPx = xAxis.getScaleValue(d.x) + xAxis.getUnitWidth() / 2;\n            const yPx = yAxis.getScaleValue(d.y);\n            const { color, rawColor } = getLayerColor({ datum: d, index: i }, {\n                colorEncoding, colorAxis, colorFieldIndex });\n\n            style.stroke = color;\n            style['fill-opacity'] = 0;\n            meta.stateColor = {};\n            meta.originalColor = rawColor;\n            meta.colorTransform = {};\n\n            const point = {\n                enter: {},\n                update: {\n                    x: xPx,\n                    y: d.y === null ? null : yPx\n                },\n                style,\n                _data: d._data,\n                _id: d._id,\n                meta\n            };\n            this.cachePoint(d[key], point);\n            return point;\n        });\n        points = positionPoints(this, points);\n        return points;\n    }\n\n    /**\n     * Renders the line plot\n     * @param {SVGElement} container svg element\n     * @return {LineLayer} instance of line layer\n     */\n    render (container) {\n        let points;\n        let seriesClassName;\n        let style;\n\n        const config = this.config();\n        const {\n            encoding,\n            interpolate,\n            className,\n            defClassName,\n            transition\n        } = config;\n        const store = this._store;\n        const normalizedData = store.get(PROPS.NORMALIZED_DATA);\n        const transformedData = store.get(PROPS.TRANSFORMED_DATA);\n        const fieldsConfig = this.data().getFieldsConfig();\n        const axes = this.axes();\n        const keys = transformedData.map(d => d.key);\n        const qualifiedClassName = getQualifiedClassName(defClassName, this.id(), config.classPrefix);\n        const containerSelection = selectElement(container);\n        const colorField = encoding.color.field;\n        const colorFieldMeasure = fieldsConfig[colorField] && fieldsConfig[colorField].def.type === FieldType.MEASURE;\n\n        this._points = [];\n        this._pointMap = {};\n        containerSelection.classed(qualifiedClassName.join(' '), true);\n        containerSelection.classed(className, true);\n        makeElement(container, 'g', normalizedData, null, {\n            enter: (group) => {\n                animateGroup(group, {\n                    transition,\n                    groupAnimateStyle: {\n                        enter: {\n                            'stroke-opacity': 0,\n                            'fill-opacity': this.getPathStyle()['fill-opacity']\n                        },\n                        update: {\n                            'stroke-opacity': encoding.strokeOpacity.value\n                        }\n                    }\n                });\n            },\n            update: (group, dataArr, i) => {\n                points = this.translatePoints(dataArr, this.encodingFieldsInf(), axes, i);\n                this._points.push(points);\n                seriesClassName = `${qualifiedClassName[0]}-${keys[i] || i}`.toLowerCase();\n\n                if (!colorFieldMeasure) {\n                    style = points[i].style;\n                }\n                this.getDrawFn()({\n                    container: group.node(),\n                    interpolate,\n                    points,\n                    className: seriesClassName,\n                    transition,\n                    style: style || {},\n                    connectNullData: config.connectNullData\n                });\n            }\n        });\n\n        attachDataToVoronoi(this._voronoi, this._points);\n        return this;\n    }\n\n    /**\n     * Get the css styles need to be applied on the line path\n     * @param {string} color Color value\n     * @return {Object} Path styles\n     */\n    getPathStyle (color) {\n        return {\n            stroke: color,\n            'fill-opacity': '0'\n        };\n    }\n\n    /**\n     * Gets the nearest point closest to the given position\n     * @param {number} x x position\n     * @param {number} y y position\n     * @return {Object} Nearest point information\n     */\n    getNearestPoint (x, y, config) {\n        let searchRadius = config.searchRadius;\n        const data = this.data();\n\n        if (!data || (data && data.isEmpty())) {\n            return null;\n        }\n\n        searchRadius = searchRadius !== undefined ? searchRadius : this.config().nearestPointThreshold;\n        const point = this._voronoi.find(x, y, searchRadius);\n        const dimensions = getObjProp(point, 'data', 'data', 'update');\n\n        if (point) {\n            const { _data, _id } = point.data.data;\n            const identifiers = this.getIdentifiersFromData(_data, _id);\n            return {\n                id: identifiers,\n                dimensions: [{\n                    x: dimensions.x,\n                    y: dimensions.y,\n                    width: 2,\n                    height: 2\n                }],\n                layerId: this.id()\n            };\n        }\n        return null;\n    }\n}\n","import {\n    selectElement,\n    makeElement,\n    pathInterpolators,\n    Symbols\n} from 'muze-utils';\nimport { updateStyle } from '../../helpers';\n\nconst line = Symbols.line;\n\n/**\n * Draws a line from the points\n * Generates a svg path string\n * @param {Object} params Contains container, points and interpolate attribute.\n */\nexport const drawLine = (context) => {\n    let filteredPoints;\n    const { container, points, interpolate, connectNullData, className, style } = context;\n    const mount = selectElement(container).attr('class', className);\n    const curveInterpolatorFn = pathInterpolators[interpolate];\n    const linepath = line()\n                .curve(curveInterpolatorFn)\n                .x(d => d.update.x)\n                .y(d => d.update.y)\n                .defined(d => d.update.y !== null);\n\n    filteredPoints = points;\n    if (connectNullData) {\n        filteredPoints = points.filter(d => d.update.y !== null);\n    }\n\n    updateStyle(mount, style);\n    return makeElement(mount, 'path', [1])\n                    .transition()\n                    .duration(1000)\n                    .attr('d', linepath(filteredPoints))\n                    .style('fill-opacity', 0);\n};\n","// extracted by mini-css-extract-plugin","import { CLASSPREFIX } from '../../enums/constants';\n\nexport const defaultConfig = {\n    defClassName: 'layer-point',\n    className: '',\n    classPrefix: CLASSPREFIX,\n    defColorStyle: 'stroke',\n    interaction: {\n        highlight: [{\n            type: 'fill',\n            intensity: [0, 0, -20, 0]\n        }],\n        fade: [{\n            type: 'fill',\n            intensity: [-20, -80, +20, 0]\n        }],\n        focus: [{\n            type: 'fill',\n            intensity: [0, 0, +50, 0]\n        }\n        ]\n    },\n    transform: {\n        type: 'identity'\n    },\n    transition: {\n        effect: 'cubic',\n        duration: 1000\n    },\n    encoding: {\n        size: {\n            value: 30\n        },\n        color: { },\n        shape: {\n            value: 'circle'\n        },\n        x: {},\n        y: {},\n        strokeOpacity: {\n            value: 0.5\n        },\n        fillOpacity: {\n            value: 0.5\n        }\n    },\n    shapes: ['circle', 'cross', 'diamond', 'square', 'star', 'wye', 'triangle'],\n    sizes: [20, 30, 40, 50, 60, 70]\n};\n","import {\n    Voronoi,\n    selectElement,\n    getQualifiedClassName,\n    makeElement,\n    FieldType\n} from 'muze-utils';\nimport { BaseLayer } from '../../base-layer';\nimport drawSymbols from './renderer';\nimport { defaultConfig } from './default-config';\nimport { ENCODING } from '../../enums/constants';\nimport * as PROPS from '../../enums/props';\nimport { attachDataToVoronoi, getLayerColor, positionPoints } from '../../helpers';\n\nimport './styles.scss';\n\n/**\n * Point Layer creates point. Itt needs to be passed a data table, axes and configuration\n * of the layer.\n * Example :-\n * const pointLayer = layerFactory.getLayer('point', [data, axes, config]);\n * pointLayer.render(container);\n * @class\n */\nexport default class PointLayer extends BaseLayer {\n\n    /**\n     *Creates an instance of PointLayer.\n     * @param {*} args\n     * @memberof PointLayer\n     */\n    constructor (...args) {\n        super(...args);\n        this._voronoi = new Voronoi();\n    }\n\n    /**\n     *\n     *\n     * @returns\n     * @memberof PointLayer\n     */\n    elemType () {\n        return 'g';\n    }\n\n    /**\n     * Returns the default configuration of the point layer\n     * @return {Object} Default configuration of the point layer\n     */\n    static defaultConfig () {\n        return defaultConfig;\n    }\n\n    /**\n     *\n     *\n     * @static\n     * @returns\n     * @memberof PointLayer\n     */\n    static formalName () {\n        return 'point';\n    }\n\n    /**\n     *\n     *\n     * @static\n     * @returns\n     * @memberof PointLayer\n     */\n    static drawFn () {\n        return drawSymbols;\n    }\n\n    /**\n     * Generates an array of objects containing x, y, width and height of the points from the data\n     * @param  {Array.<Array>} data Data Array\n     * @param  {Object} encoding  Config\n     * @param  {Object} axes     Axes object\n     * @return {Array.<Object>}  Array of points\n     */\n    translatePoints (data, encoding, axes) {\n        let points = [];\n        const {\n            size: sizeEncoding,\n            shape: shapeEncoding,\n            color: colorEncoding,\n            x,\n            y\n        } = encoding;\n        const sizeField = sizeEncoding.field;\n        const shapeField = shapeEncoding.field;\n        const xField = x.field;\n        const yField = y.field;\n        const { size: sizeAxis, shape: shapeAxis } = axes;\n        const fieldsConfig = this.data().getFieldsConfig();\n        const isXDim = fieldsConfig[xField] && fieldsConfig[xField].def.type === FieldType.DIMENSION;\n        const isYDim = fieldsConfig[yField] && fieldsConfig[yField].def.type === FieldType.DIMENSION;\n        const key = isXDim ? ENCODING.X : (isYDim ? ENCODING.Y : null);\n        const colorField = colorEncoding && colorEncoding.field;\n        const colorFieldIndex = fieldsConfig[colorField] && fieldsConfig[colorField].index;\n        const measurement = this._store.get(PROPS.MEASUREMENT);\n        const shapeFieldIndex = fieldsConfig[shapeField] && fieldsConfig[shapeField].index;\n        const sizeFieldIndex = fieldsConfig[sizeField] && fieldsConfig[sizeField].index;\n        const colorAxis = axes.color;\n\n        for (let i = 0, len = data.length; i < len; i++) {\n            const d = data[i];\n            const row = d._data;\n            const size = sizeAxis.getSize(row[sizeFieldIndex]);\n            const shape = shapeAxis.getShape(row[shapeFieldIndex]);\n\n            const [xPx, yPx] = [ENCODING.X, ENCODING.Y].map((type) => {\n                const bandwidth = axes[type].getUnitWidth() / 2;\n                const value = d[type] === null ? undefined : d[type];\n                const measure = type === ENCODING.X ? measurement.width : measurement.height;\n                return !encoding[type].field ? measure / 2 : axes[type].getScaleValue(value) + bandwidth;\n            });\n\n            const { color, rawColor } = getLayerColor({ datum: d, index: i },\n                { colorEncoding, colorAxis, colorFieldIndex });\n\n            const style = {\n                fill: color,\n                stroke: color\n            };\n            if (!isNaN(xPx) && !isNaN(yPx)) {\n                const point = {\n                    enter: {\n                        x: xPx,\n                        y: yPx\n                    },\n                    update: {\n                        x: xPx,\n                        y: yPx\n                    },\n                    shape,\n                    size: Math.abs(size),\n                    meta: {\n                        stateColor: {},\n                        originalColor: rawColor,\n                        colorTransform: {}\n                    },\n                    style,\n                    _data: row,\n                    _id: d._id\n                };\n                points.push(point);\n                this.cachePoint(d[key], point);\n            }\n        }\n        points = positionPoints(this, points);\n        return points;\n    }\n\n    /**\n     * Renders the plot in the given container\n     * @param  {SVGElement} container SVGElement which will hold the plot\n     * @return {BarLayer} Instance of bar layer\n     */\n    render (container) {\n        let points;\n        let maxSize = 0;\n        let seriesClassName;\n        const config = this.config();\n        const { transition, encoding, className, defClassName, classPrefix } = config;\n        const axes = this.axes();\n        const normalizedData = this._store.get(PROPS.NORMALIZED_DATA);\n        const containerSelection = selectElement(container);\n        const qualifiedClassName = getQualifiedClassName(defClassName, this.id(), classPrefix);\n        this._points = [];\n        this._pointMap = {};\n\n        containerSelection.classed(qualifiedClassName.join(' '), true).classed(className, true);\n        makeElement(container, 'g', normalizedData, null, {\n            update: (group, dataArr, i) => {\n                points = this.translatePoints(dataArr, encoding, axes, i);\n                this._points.push(points);\n                maxSize = Math.max(maxSize, ...points.map(d => d.size));\n                seriesClassName = `${qualifiedClassName[0]}`;\n                this.constructor.drawFn()({\n                    container: group.node(),\n                    points,\n                    className: seriesClassName,\n                    transition,\n                    keyFn: d => d._id\n                });\n            }\n        });\n        this._maxSize = Math.sqrt(maxSize / Math.PI) * 2;\n        attachDataToVoronoi(this._voronoi, this._points);\n        return this;\n    }\n\n    /**\n     * Gets the nearest point from a position.\n     * @param {number} x x position\n     * @param {number} y y position\n     * @return {Object} Point details\n     */\n    getNearestPoint (x, y) {\n        const distanceLimit = this._maxSize;\n\n        if (!this.data()) {\n            return null;\n        }\n\n        const point = this._voronoi.find(x, y, distanceLimit);\n        const dimensions = point && point.data.data.update;\n        const radius = point ? Math.sqrt(point.data.data.size / Math.PI) : 0;\n\n        if (point) {\n            const { _data, _id } = point.data.data;\n            const identifiers = this.getIdentifiersFromData(_data, _id);\n            return {\n                id: identifiers,\n                dimensions: [{\n                    x: dimensions.x,\n                    y: dimensions.y,\n                    width: radius,\n                    height: radius\n                }],\n                layerId: this.id()\n            };\n        }\n        return null;\n    }\n}\n","/* global Element, document  */\nimport {\n    makeElement,\n    selectElement,\n    easeFns,\n    objectIterator,\n    getSymbol\n} from 'muze-utils';\n\n/**\n *\n *\n * @param {*} str\n * @returns\n */\nconst checkPath = (str) => {\n    if (/^[mzlhvcsqta]\\s*[-+.0-9][^mlhvzcsqta]+/i.test(str) && /[\\dz]$/i.test(str) && str.length > 4) {\n        return true;\n    }\n    return false;\n};\n\n/**\n *\n *\n * @param {*} d\n * @param {*} elem\n */\nconst createShape = function (d, elem) {\n    const groupElement = selectElement(elem);\n    const { shape, size, update } = d;\n\n    if (shape instanceof Promise) {\n        shape.then((res) => {\n            d.shape = res;\n            createShape(d, elem);\n        });\n    } else if (shape instanceof Element) {\n        let newShape = shape.cloneNode(true);\n\n        if (newShape.nodeName.toLowerCase() === 'img') {\n            const src = newShape.src || newShape.href;\n            newShape = document.createElementNS('http://www.w3.org/2000/svg', 'image');\n            newShape.setAttribute('href', src);\n        }\n        const shapeElement = selectElement(newShape);\n        if (newShape.nodeName === 'path' || newShape.nodeName === 'image') {\n            shapeElement.attr('transform', `scale(${size / 100})`);\n        } else {\n            shapeElement.attr('height', size);\n            shapeElement.attr('width', size);\n        }\n        shapeElement.attr('x', -size / 2);\n        shapeElement.attr('y', -size / 2);\n        selectElement(groupElement.node().appendChild(newShape));\n    } else if (typeof shape === 'string') {\n        let pathStr;\n        if (checkPath(shape)) {\n            pathStr = shape;\n        } else {\n            pathStr = getSymbol(shape).size(size)(update);\n        }\n        makeElement(groupElement, 'path', data => [data]).attr('d', pathStr);\n    } else {\n        d.shape = 'circle';\n        createShape(d, elem);\n    }\n};\n\n/**\n * Draws symbols using d3 symbol api\n * @param {Object} params Contains the svg container, points and other symbol related attributes.\n */\n/* istanbul ignore next */ const drawSymbols = (params) => {\n    let mergedGroups;\n    const { container, points, transition, className } = params;\n    const { duration, effect, disabled } = transition;\n    const mount = selectElement(container);\n\n    mount.attr('class', className);\n    const symbolGroups = mount.selectAll('g').data(points, params.keyFn);\n    const symbolEnter = symbolGroups.enter().append('g').attr('transform', d => `translate(${d.enter.x},${d.enter.y})`);\n    mergedGroups = symbolGroups.merge(symbolEnter)\n                    .each(function (d) {\n                        createShape(d, this);\n                    });\n    mergedGroups = disabled ? mergedGroups : mergedGroups.transition().duration(disabled ? 0 : transition.duration);\n    mergedGroups.attr('transform', d => `translate(${d.update.x},${d.update.y})`)\n                    .each(function (d) {\n                        const style = d.style;\n                        const element = selectElement(this);\n                        objectIterator(style, key => element.style(key, style[key]));\n                        element.attr('class', `${className}`);\n                        element.classed(d.className, true);\n                    });\n\n    const exitGroups = symbolGroups.exit();\n    if (!disabled) {\n        exitGroups.transition().ease(easeFns[effect])\n                        .duration(duration)\n                        .on('end', function () {\n                            selectElement(this).remove();\n                        })\n                        .style('fill-opacity', 0)\n                        .style('stroke-opacity', 0);\n    } else {\n        exitGroups.remove();\n    }\n};\n\nexport default drawSymbols;\n","// extracted by mini-css-extract-plugin","import { CLASSPREFIX } from '../../enums/constants';\n\nexport const defaultConfig = {\n    defClassName: 'layer-text',\n    classPrefix: CLASSPREFIX,\n    className: '',\n    transform: {\n        type: 'identity'\n    },\n    interaction: {\n        highlight: [{\n            type: 'fill',\n            intensity: [0, -10, -10, 0]\n        }],\n        fade: [{\n            type: 'fill',\n            intensity: [0, -30, +30, 0]\n        }],\n        focus: [{\n            type: 'fill',\n            intensity: [0, -30, +30, 0]\n        }]\n    },\n    transition: {\n        effect: 'cubic',\n        duration: 1000\n    },\n    encoding: {\n        color: {},\n        text: {\n            value: ''\n        },\n        background: {\n            padding: 10,\n            enabled: false\n        }\n    },\n    states: {\n        highlight: {\n            className: `${CLASSPREFIX}-layer-text-highlight`\n        },\n        fadeout: {\n            className: `${CLASSPREFIX}-layer-text-fadeout`\n        },\n        selected: {\n            className: `${CLASSPREFIX}-layer-text-selected`\n        }\n    }\n};\n","import {\n    setAttrs,\n    setStyles,\n    selectElement,\n    makeElement,\n    getSmartComputedStyle\n} from 'muze-utils';\n\n/**\n * Draws svg text in the specified container.\n * @param {SVGElement} container Container where labels will be appended.\n * @param {Array.<Object>} data Data of the elements.\n * @return {Selection} d3 selection of the elements.\n */\nconst drawText = (container, data, config, smartLabel) => {\n    const { backgroundPadding } = config;\n\n    const selection = selectElement(container).selectAll('g').data(data);\n\n    const selectionMerge = selection.enter().append('g')\n        .each(function (dataObj) {\n            setAttrs(this, dataObj.enter);\n        })\n        .merge(selection);\n    const style = getSmartComputedStyle(selectElement(container), config.className);\n    const fontSize = parseInt(style.fontSize, 10);\n\n    smartLabel.setStyle(style);\n    selectionMerge.each(function (dataObj) {\n        const element = selectElement(this);\n        const { update, background, text, color, textanchor } = dataObj;\n        if (config.backgroundEnabled) {\n            let diff;\n            const { width, height } = smartLabel.getOriSize(dataObj.text);\n            const backgroundEl = makeElement(element, 'rect', [1]);\n\n            if (textanchor === 'end') {\n                diff = width;\n            } else if (textanchor === 'start') {\n                diff = 0;\n            } else {\n                diff = width / 2;\n            }\n\n            setAttrs(backgroundEl.node(), {\n                x: update.x - diff - backgroundPadding / 2,\n                y: update.y - fontSize - backgroundPadding / 2,\n                width: width + backgroundPadding,\n                height: height + backgroundPadding\n            });\n            background && setStyles(backgroundEl, {\n                background\n            });\n        }\n        const textEl = makeElement(element, 'text', d => [d]).text(text);\n        const textNode = textEl.node();\n        color && setStyles(textNode, {\n            fill: color\n        });\n        setAttrs(textNode, update);\n        textEl.attr('text-anchor', textanchor);\n    });\n    selection.exit().remove();\n    return selection;\n};\n\nexport default drawText;\n","// extracted by mini-css-extract-plugin","import {\n    getQualifiedClassName,\n    selectElement,\n    setStyles,\n    createElements\n} from 'muze-utils';\nimport { BaseLayer } from '../../base-layer';\nimport drawText from './renderer';\nimport { defaultConfig } from './default-config';\nimport { getLayerColor, positionPoints } from '../../helpers';\nimport { TEXT_ANCHOR_MIDDLE, ENCODING } from '../../enums/constants';\nimport * as PROPS from '../../enums/props';\n\nimport './styles.scss';\n\n/**\n * Text Layer creates labels. It needs to be passed a data table, axes and configuration\n * of the layer.\n * Example :-\n * const textLayer = layerFactory.getLayer('text', [dataModel, axes, config]);\n * textLayer.render(container);\n * @class\n */\nexport default class TextLayer extends BaseLayer {\n    /**\n     * Returns the default configuration of the text layer\n     * @return {Object} Default configuration of the text layer\n     */\n    static defaultConfig () {\n        return defaultConfig;\n    }\n\n    static formalName () {\n        return 'text';\n    }\n\n    elemType () {\n        return 'text';\n    }\n\n    /**\n     * Generates an array of objects containing x, y, width and height of the points from the data\n     * @param  {Array.<Array>} data Data Array\n     * @param  {Object} encoding  Config\n     * @param  {Object} axes     Axes object\n     * @return {Array.<Object>}  Array of points\n     */\n    translatePoints (data, encoding, axes) {\n        let points;\n        const colorAxis = axes.color;\n        const textEncoding = encoding.text;\n        const { field: textField, value, formatter: textFormatter } = textEncoding;\n        const colorEncoding = encoding.color;\n        const colorField = colorEncoding && colorEncoding.field;\n        const fieldsConfig = this.data().getFieldsConfig();\n        const backgroundField = encoding.background.field;\n        const backgroundFieldIndex = backgroundField ? fieldsConfig[backgroundField].index : -1;\n        const colorFieldIndex = colorField ? fieldsConfig[colorField].index : -1;\n        const textFieldIndex = textField ? fieldsConfig[textField] && fieldsConfig[textField].index : -1;\n        const xEnc = ENCODING.X;\n        const yEnc = ENCODING.Y;\n\n        points = data.map((d, i) => {\n            const row = d._data;\n            const textValue = textField ? row[textFieldIndex] : value;\n\n            const [xPx, yPx] = [xEnc, yEnc].map(type => (axes[type] ? axes[type].getScaleValue(d[type]) +\n                    axes[type].getUnitWidth() / 2 : 0));\n\n            const { color, rawColor } = getLayerColor({ datum: d, index: i },\n                { colorEncoding, colorAxis, colorFieldIndex });\n\n            return {\n                enter: {},\n                update: {\n                    x: xPx,\n                    y: yPx\n                },\n                text: textFormatter ? textFormatter(textValue) : textValue,\n                color,\n                background: colorAxis.getColor(d._data[backgroundFieldIndex]),\n                meta: {\n                    stateColor: {},\n                    originalColor: rawColor,\n                    colorTransform: {}\n                },\n                _data: row,\n                _id: d._id\n            };\n        });\n        points = positionPoints(this, points);\n\n        return points;\n    }\n\n    /**\n     * Renders the plot in the given container\n     * @param  {SVGElement} container SVGElement which will hold the plot\n     * @return {textLayer} Instance of text layer\n     */\n    render (container) {\n        let points;\n        const config = this.config();\n        const encoding = config.encoding;\n        const normalizedData = this._store.get(PROPS.NORMALIZED_DATA);\n        const className = config.className;\n        const backgroundPadding = encoding.background.padding;\n        const backgroundEnabled = encoding.background.enabled || encoding.background.field;\n        const qualifiedClassName = getQualifiedClassName(config.defClassName, this.id(), config.classPrefix);\n        const axes = this.axes();\n        const containerSelection = selectElement(container);\n\n        containerSelection.classed(`${qualifiedClassName.join(' ')} ${className}`, true);\n        createElements({\n            data: normalizedData,\n            append: 'g',\n            selector: 'g',\n            container,\n            each: (dataArr, group, i) => {\n                const node = group.node();\n                points = this.translatePoints(dataArr, encoding, axes, i);\n                setStyles(node, {\n                    'text-anchor': TEXT_ANCHOR_MIDDLE\n                });\n                drawText(node, points, {\n                    className: qualifiedClassName[0],\n                    backgroundPadding,\n                    backgroundEnabled\n                }, this._dependencies.smartLabel);\n            }\n        });\n        return this;\n    }\n}\n","import { CLASSPREFIX } from '../../enums/constants';\n\nexport const defaultConfig = {\n    defClassName: 'layer-tick',\n    className: '',\n    classPrefix: CLASSPREFIX,\n    interaction: {\n        highlight: [{\n            type: 'stroke',\n            intensity: [0, +20, -20, 0]\n        }],\n        fade: [{\n            type: 'stroke',\n            intensity: [0, -0, +30, 0]\n        }],\n        focus: [{\n            type: 'stroke',\n            intensity: [0, -30, +30, 0]\n        }]\n    },\n    transform: {\n        type: 'identity'\n    },\n    transition: {\n        effect: 'cubic',\n        duration: 1000\n    },\n    encoding: {\n        color: { },\n        x: {},\n        y: {},\n        x0: {},\n        y0: {},\n        strokeOpacity: {\n            value: 0.5\n        },\n        fillOpacity: {\n            value: 0.5\n        }\n    },\n    states: {\n        highlight: {\n            className: `${CLASSPREFIX}-layer-tick-highlight`\n        },\n        fadeout: {\n            className: `${CLASSPREFIX}-layer-tick-fadeout`\n        },\n        selected: {\n            className: `${CLASSPREFIX}-layer-tick-selected`\n        }\n    }\n};\n","import { selectElement } from 'muze-utils';\n\n/**\n * Draws ticks by using d3 selection\n * @param  {Object} params Contains container element and points\n * @return {Selection} Ticks Selection\n */\nexport default /* istanbul ignore next */ (params) => {\n    const { points, container, keyFn, className } = params;\n    const mount = selectElement(container);\n    const ticks = mount.selectAll('path').data(points, keyFn);\n    const ticksEnter = ticks.enter().append('path');\n\n    mount.attr('class', className || '');\n    ticksEnter.each(function (d) {\n        const selection = selectElement(this);\n        const enter = d.enter || {};\n        Object.entries(enter).forEach(attr => (!isNaN(attr[1]) && selection.attr(attr[0], attr[1])));\n    });\n\n    ticks.exit().remove();\n    return ticks.merge(ticksEnter)\n                    .each(function (d) {\n                        const selection = selectElement(this);\n                        const update = d.update;\n                        const updateStyle = d.style || {};\n                        const x0 = update.x0 !== undefined ? update.x0 : update.x;\n                        const y0 = update.y0 !== undefined ? update.y0 : update.y;\n                        const path = `M ${update.x} ${update.y} L ${x0} ${y0}`;\n                        d.className && selection.classed(d.className, true);\n                        selection.attr('d', path);\n                        Object.entries(updateStyle).forEach(styleObj => selection.style(styleObj[0], styleObj[1]));\n                    });\n};\n\n","// extracted by mini-css-extract-plugin","import { FieldType } from 'muze-utils';\nimport { PointLayer } from '../point';\nimport { defaultConfig } from './default-config';\nimport * as PROPS from '../../enums/props';\nimport { ENCODING } from '../../enums/constants';\nimport drawTicks from './renderer';\nimport './styles.scss';\nimport { getAxesScales, getLayerColor, positionPoints } from '../../helpers';\n\nexport default class TickLayer extends PointLayer {\n\n    /**\n     *\n     *\n     * @static\n     * @returns\n     * @memberof TickLayer\n     */\n    static defaultConfig () {\n        return defaultConfig;\n    }\n\n    /**\n     *\n     *\n     * @static\n     * @returns\n     * @memberof TickLayer\n     */\n    static formalName () {\n        return 'tick';\n    }\n\n    /**\n     *\n     *\n     * @static\n     * @returns\n     * @memberof TickLayer\n     */\n    static drawFn () {\n        return drawTicks;\n    }\n\n    /**\n     *\n     *\n     * @returns\n     * @memberof TickLayer\n     */\n    elemType () {\n        return 'path';\n    }\n\n    /**\n     * Generates an array of objects containing x, y, width and height of the points from the data\n     * @param  {Array.<Array>} data Data Array\n     * @param  {Object} encoding  Config\n     * @param  {Object} axes     Axes object\n     * @return {Array.<Object>}  Array of points\n     */\n    translatePoints (data, encoding, axes) {\n        let points = [];\n        const {\n                xAxis,\n                yAxis\n            } = getAxesScales(axes);\n        const fieldsConfig = this.data().getFieldsConfig();\n        const individualClassName = this.config().individualClassName;\n        const {\n                xField,\n                yField,\n                x0Field,\n                y0Field,\n                xFieldType,\n                yFieldType\n            } = this.encodingFieldsInf();\n        const isXDim = xFieldType === FieldType.DIMENSION;\n        const isYDim = yFieldType === FieldType.DIMENSION;\n        const key = isXDim ? ENCODING.X : (isYDim ? ENCODING.Y : null);\n        const colorEncoding = encoding.color;\n        const colorField = colorEncoding && colorEncoding.field;\n        const colorFieldIndex = fieldsConfig[colorField] && fieldsConfig[colorField].index;\n        const measurement = this._store.get(PROPS.MEASUREMENT);\n        const colorAxis = axes.color;\n        const xbandwidth = xAxis ? xAxis.getUnitWidth() : 0;\n        const ybandwidth = yAxis ? yAxis.getUnitWidth() : 0;\n\n        for (let i = 0, len = data.length; i < len; i++) {\n            let xPx;\n            let x0Px;\n            let y0Px;\n            let yPx;\n            const d = data[i];\n            const row = d._data;\n            if (xField) {\n                xPx = xAxis.getScaleValue(d.x);\n                x0Px = xPx + xbandwidth;\n            }\n\n            if (yField) {\n                yPx = yAxis.getScaleValue(d.y);\n                y0Px = yPx !== null ? yPx + ybandwidth : null;\n            }\n\n            if (!xField) {\n                xPx = 0;\n                x0Px = measurement.width;\n                if (!isNaN(yPx)) {\n                    yPx += ybandwidth / 2;\n                    y0Px = yPx;\n                }\n            }\n\n            if (!yField) {\n                yPx = 0;\n                y0Px = measurement.height;\n                x0Px = xPx += xbandwidth / 2;\n            }\n\n            if (x0Field) {\n                x0Px = xAxis.getScaleValue(d.x0) + xbandwidth;\n                yPx += ybandwidth / 2;\n                y0Px -= ybandwidth / 2;\n            }\n\n            if (y0Field) {\n                y0Px = yAxis.getScaleValue(d.y0) + ybandwidth;\n                xPx += xbandwidth / 2;\n                x0Px -= xbandwidth / 2;\n            }\n            const style = {};\n            const meta = {};\n            const { color, rawColor } = getLayerColor({ datum: d, index: i },\n                { colorEncoding, colorAxis, colorFieldIndex });\n\n            style.stroke = color;\n            meta.stateColor = {};\n            meta.originalColor = rawColor;\n            meta.colorTransform = {};\n            if (!isNaN(xPx) && !isNaN(yPx)) {\n                const point = {\n                    enter: {},\n                    update: {\n                        x: xPx,\n                        y: yPx,\n                        x0: x0Px,\n                        y0: y0Px\n                    },\n                    style,\n                    _data: row,\n                    _id: d._id,\n                    meta\n                };\n                if (individualClassName instanceof Function) {\n                    point.className = individualClassName(d, i);\n                }\n\n                points.push(point);\n                this.cachePoint(d[key], point);\n            }\n        }\n        points = positionPoints(this, points);\n        return points;\n    }\n}\n","import { ERROR_MSG } from 'muze-utils';\n\n/**\n * This is an interface class which any new layer class has to extend.\n *\n * @example\n * class BarLayer extends BaseLayer {\n *   update (params) {\n *       // super.update(params);\n *       // Update the bar layer\n *   }\n * }\n * @class\n */\nexport default class SimpleLayer {\n\n    formalName () {\n        throw new Error(ERROR_MSG.INTERFACE_IMPL);\n    }\n\n    /**\n     * Sets or gets the dependencies.\n     * @param {Object} dependencies Dependencies needed by layer\n     * @return {BaseLayer} Instance of base layer.\n     */\n    dependencies () {\n        throw new Error(ERROR_MSG.INTERFACE_IMPL);\n    }\n\n    /**\n     * Returns the config of the layer\n     *\n     * @param {Object} config Configuration of layer\n     * @return {Object} configuration of layer\n     */\n    config () {\n        throw new Error(ERROR_MSG.INTERFACE_IMPL);\n    }\n\n    /**\n     * Acts as a getter or setter function\n     * When setter\n     * Returns the datamodel of the layer\n     * @param { DataModel } dataModel instance of DataModel\n     * @return { DataModel } DataModel instance of the layer\n     */\n    data () {\n        throw new Error(ERROR_MSG.INTERFACE_IMPL);\n    }\n\n    /**\n     * Returns a serialized schema of the layer\n     * @return {Object} Serialized schema\n     */\n    serialize () {\n        throw new Error(ERROR_MSG.INTERFACE_IMPL);\n    }\n\n    /**\n     * Returns the unique identifier of this layer\n     * @return {string} id of the layer\n     */\n    id () {\n        throw new Error(ERROR_MSG.INTERFACE_IMPL);\n    }\n    /*\n     * This method resolves the x, y, x0 and y0 values from the transformed data.\n     * It also checks the type of transformed data for example, if it is a stacked data\n     * then it fetches the y and y0 values from the stacked data.\n     * @param {Array.<Array>} transformedData transformed data\n     * @param {Object} fieldMap field definitions\n     * @param {string} transformType type of transformed data - stack, group or identity.\n     * @return {Array.<Object>} Normalized data\n     * @private\n     */\n    normalizeTransformedData () {\n        throw new Error(ERROR_MSG.INTERFACE_IMPL);\n    }\n\n    /**\n     * Gets the transform method from transform factory based on type of transform. It then calls the\n     * transform method with the data and passes the configuration parameters of transform such as\n     * groupBy, value field, etc.\n     *\n     * @param {DataModel} dataModel Instance of dataModel\n     * @param {Object} config configuration for transforming data\n     * @return {Array.<Array>} Transformed data.\n     * @private\n     */\n    getTransformedData () {\n        throw new Error(ERROR_MSG.INTERFACE_IMPL);\n    }\n\n    /**\n     * Calculates the domain from the data.\n     * It checks the type of field and calculates the domain based on that. For example, if it\n     * is a quantitative or temporal field, then it calculates the min and max from the data or\n     * if it is a nominal field then it gets all the values from the data of that field.\n     * @param {Array} data DataArray\n     * @return {Array} Domain values array.\n     */\n    _calculateDomainFromData () {\n        throw new Error(ERROR_MSG.INTERFACE_IMPL);\n    }\n\n    /**\n     * Returns the domain for the axis.\n     *\n     * @param {string} encodingType type of encoding x, y, color, etc.\n     * @return {Object} Axis domains\n     */\n    getDomain () {\n        throw new Error(ERROR_MSG.INTERFACE_IMPL);\n    }\n\n    /**\n     * Abstract method for getting nearest point\n     * @return {BaseLayer} Instance of base layer\n     */\n    getNearestPoint () {\n        throw new Error(ERROR_MSG.INTERFACE_IMPL);\n    }\n\n    /**\n     * Abstract method for highlighting points\n     * @return {BaseLayer} Instance of base layer\n     */\n    highlightPoint () {\n        throw new Error(ERROR_MSG.INTERFACE_IMPL);\n    }\n\n    /**\n     * Abstract method for deselecting points\n     * @return {BaseLayer} Instance of base layer\n     */\n    dehighlightPoint () {\n        return this;\n    }\n\n    linkLayerStore () {\n        throw new Error(ERROR_MSG.INTERFACE_IMPL);\n    }\n\n    /**\n     * Sets the container element for the layer to be renderered.\n     * @param {SVGElement} mountPoint SVG element or group element.\n     */\n    mount () {\n        throw new Error(ERROR_MSG.INTERFACE_IMPL);\n    }\n\n    render () {\n        throw new Error(ERROR_MSG.INTERFACE_IMPL);\n    }\n}\n","import { CLASSPREFIX, CONSOLIDATED } from './enums/constants';\n\n/**\n * Returns the default configuration of the visual unit\n * @return {Object} Default configuration of visual unit\n */\nexport const defaultConfig = {\n    classPrefix: CLASSPREFIX,\n    defClassName: 'visual-unit',\n    className: '',\n    trackerClassName: 'visual-unit-tracker',\n    gridLines: {\n        defClassName: 'axis-grid-lines',\n        className: '',\n        show: true,\n        color: '#efefef',\n        zeroLineColor: '#b6b6b6'\n    },\n    gridBands: {\n        defClassName: 'axis-grid-bands',\n        className: '',\n        show: false,\n        y: {\n            color: ['#fff', '#fbfbfb']\n        },\n        x: {\n            color: ['#fff', '#f9f9f9']\n        }\n    },\n    arcLayerClassName: 'layer-arc',\n    interaction: {\n        tooltip: {\n            mode: CONSOLIDATED\n        }\n    },\n    sideEffectClassName: 'side-effect-container'\n};\n","export const CLASSPREFIX = 'muze';\nexport const IDFIELD = '__id__';\nexport const GRIDLINEPARENTGROUPCLASS = 'grid-lines';\nexport const GRIDBANDPARENTGROUPCLASS = 'grid-bands';\nexport const CONSOLIDATED = 'consolidated';\nexport const FRAGMENTED = 'fragmented';\nexport const FACET_BY_FIELDS = 'facetByFields';\nexport const RETINAL_FIELDS = 'retinalFields';\nexport const PARENT_ALIAS = 'parentAlias';\nexport const LAYERS = 'layers';\nexport const CACHED_DATA = 'cachedData';\nexport const STORE = 'store';\n\n","export const CONFIG = 'config';\nexport const DATA = 'data';\nexport const AXES = 'axes';\nexport const LAYERDEFS = 'layerDef';\nexport const WIDTH = 'width';\nexport const HEIGHT = 'height';\nexport const MOUNT = 'mount';\nexport const primaryXAxisUpdated = 'primaryXAxisUpdated';\nexport const primaryYAxisUpdated = 'primaryYAxisUpdated';\nexport const secondaryXAxisUpdated = 'secondaryXAxisUpdated';\nexport const secondaryYAxisUpdated = 'secondaryYAxisUpdated';\nexport const TRANSFORM = 'transform';\nexport const DATADOMAIN = 'dataDomain';\nexport const LAYERSCREATED = 'layersCreated';\nexport const FIELDS = 'fields';\nexport const TIMEDIFFS = 'timeDiffs';\nexport const LAYERAXISINDEX = 'layerAxisIndex';\n\n","import { BEHAVIOURS, ACTIONS } from '@chartshq/muze-firebolt';\n\nexport const actionBehaviourMap = {\n    [ACTIONS.DRAG]: {\n        behaviours: [BEHAVIOURS.BRUSH],\n        touch: false\n    },\n    [ACTIONS.HOVER]: {\n        behaviours: [BEHAVIOURS.HIGHLIGHT]\n    },\n    [ACTIONS.LONGTOUCH]: {\n        behaviours: [BEHAVIOURS.SELECT],\n        touch: true\n    },\n    [ACTIONS.TOUCHDRAG]: {\n        behaviours: [BEHAVIOURS.BRUSH],\n        touch: true\n    },\n    [ACTIONS.CLICK]: {\n        behaviours: [BEHAVIOURS.SELECT],\n        touch: false\n    }\n};\n\n","import { isSimpleObject } from 'muze-utils';\n\nexport const propagateValues = (instance, action, config = {}) => {\n    let propagationData;\n    const payload = config.payload;\n    const selectionSet = config.selectionSet;\n    const propagationFields = config.propagationFields[action] || [];\n    const criteria = payload.criteria;\n    const context = instance.context;\n    const dataModel = context.cachedData()[0];\n    const sourceId = context.id();\n    const sideEffects = config.sideEffects;\n    const mutableEffect = sideEffects.find(sideEffect =>\n        instance._sideEffects[sideEffect.name || sideEffect].constructor.mutates(true));\n    const mergedModel = selectionSet.mergedEnter.model;\n\n    payload.sourceUnit = sourceId;\n    payload.action = action;\n    payload.sourceCanvas = context.parentAlias();\n\n    if (criteria === null) {\n        propagationData = null;\n    } else if (isSimpleObject(criteria)) {\n        const fields = Object.keys(criteria || {});\n        propagationData = mergedModel ? mergedModel.project(fields) : null;\n    } else {\n        const criteriaFields = criteria[0];\n        propagationData = mergedModel ? mergedModel.project(criteriaFields) : null;\n    }\n\n    dataModel.addToPropNamespace(sourceId, {\n        payload,\n        criteria: propagationData,\n        isMutableAction: mutableEffect,\n        actionName: mutableEffect ? (mutableEffect.name || mutableEffect) : action\n    });\n\n    propagationFields.length && propagationData && (propagationData = propagationData.project(propagationFields));\n    dataModel.propagate(propagationData, payload, {\n        isMutableAction: mutableEffect,\n        sourceId\n    });\n};\n","import { CommonProps } from 'muze-utils';\nimport { DATA, MOUNT } from '../enums/reactive-props';\n\nexport const registerListeners = (firebolt) => {\n    const context = firebolt.context;\n    const store = context.store();\n\n    store.registerImmediateListener([DATA, MOUNT], (dataModel, mount) => {\n        const dm = dataModel[1];\n\n        if (dm && mount[1]) {\n            const originalData = firebolt.context.cachedData()[0];\n            firebolt.createSelectionSet(firebolt.context.data().getData().uids);\n            firebolt.attachPropagationListener(originalData);\n        }\n    }, true);\n\n    context._layerDeps.throwback.registerChangeListener([CommonProps.ON_LAYER_DRAW],\n        ([, onlayerdraw]) => {\n            if (onlayerdraw) {\n                firebolt.initializeSideEffects();\n                firebolt.config(context.config().interaction);\n                firebolt.mapActionsAndBehaviour();\n            }\n        });\n};\n\nexport const getApplicableSideEffects = (firebolt, payload, sideEffects, propagationInf = {}) => {\n    let applicableSideEffects;\n    const context = firebolt.context;\n    const unitId = context.id();\n    const aliasName = context.parentAlias();\n    const propagationSourceCanvas = propagationInf.propPayload && propagationInf.propPayload.sourceCanvas;\n    const sourceUnitId = propagationInf.propPayload && propagationInf.propPayload.sourceUnit;\n    const sourceSideEffects = firebolt._sourceSideEffects;\n    const actionOnSource = sourceUnitId === unitId;\n\n    applicableSideEffects = payload.sideEffects ? payload.sideEffects : sideEffects;\n\n    applicableSideEffects = applicableSideEffects.filter((d) => {\n        if (!actionOnSource && payload.criteria !== null) {\n            return !sourceSideEffects[d.name || d];\n        }\n        if (propagationSourceCanvas === aliasName) {\n            return d.applyOnSource !== false;\n        }\n        return true;\n    });\n\n    return applicableSideEffects;\n};\n","import { FieldType } from 'muze-utils';\nimport { Firebolt, SpawnableSideEffect } from '@chartshq/muze-firebolt';\nimport { registerListeners, getApplicableSideEffects } from './helper';\nimport { payloadGenerator } from './payload-generator';\nimport { propagateValues } from './data-propagator';\n\n/**\n * This class manages the interactions of visual unit. It associates physical actions with\n * behavioural actions. It also propagates the behavioural actions to other datamodels.\n */\nexport default class UnitFireBolt extends Firebolt {\n    constructor (...params) {\n        super(...params);\n        this._entryExitSet = {};\n        registerListeners(this);\n    }\n\n     /**\n     * Dispatches the behaviour with a given payload.\n     * @param {string | Array} behaviourList Name of a single behaviour or multiple behaviours\n     * @param {Object} payload Configuration parameters for action.\n     * @return {VisualUnit} Instance of visual unit.\n     */\n    dispatchBehaviour (behaviour, payload, propagationInfo = {}) {\n        const propagate = propagationInfo.propagate !== undefined ? propagationInfo.propagate : true;\n        const behaviouralActions = this._actions.behavioural;\n        const action = behaviouralActions[behaviour];\n        const behaviourEffectMap = this._behaviourEffectMap;\n        const sideEffects = behaviourEffectMap[behaviour] && behaviourEffectMap[behaviour];\n        this._propagationInf = propagationInfo;\n        const selectionSet = action.dispatch(payload);\n        const propagationSelectionSet = selectionSet.find(d => !d.sourceSelectionSet);\n        this._entryExitSet[behaviour] = propagationSelectionSet;\n\n        if (propagate) {\n            propagateValues(this, behaviour, {\n                payload,\n                selectionSet: selectionSet.find(d => d.sourceSelectionSet),\n                sideEffects,\n                propagationFields: this._propagationFields\n            });\n        } else {\n            const applicableSideEffects = getApplicableSideEffects(this, payload, sideEffects, propagationInfo);\n            this.applySideEffects(applicableSideEffects, propagationSelectionSet, payload);\n        }\n\n        return this;\n    }\n\n    enableSideEffectOnPropagation (sideEffect) {\n        this._sourceSideEffects[sideEffect] = false;\n        return this;\n    }\n\n    disableSideEffectOnPropagation (sideEffect) {\n        this._sourceSideEffects[sideEffect] = true;\n        return this;\n    }\n\n    onDataModelPropagation () {\n        return (propValue) => {\n            let isSourceFieldPresent = true;\n            const data = propValue.data;\n            const propPayload = propValue.payload;\n            const sourceIdentifiers = propValue.sourceIdentifiers;\n            const action = propPayload.action;\n            const payloadFn = payloadGenerator[action] || payloadGenerator.__default;\n\n            if (sourceIdentifiers) {\n                const fieldsConfig = sourceIdentifiers.getFieldsConfig();\n                const sourceIdentifierFields = Object.keys(fieldsConfig);\n                const propFields = Object.keys(data[0].getFieldsConfig());\n                if (!Object.values(fieldsConfig).some(d => d.def.type === FieldType.MEASURE)) {\n                    isSourceFieldPresent = sourceIdentifierFields.some(d => propFields.indexOf(d) !== -1);\n                }\n            }\n\n            const payload = payloadFn(this.context, data, propValue);\n            this.dispatchBehaviour(action, payload, {\n                propagate: false,\n                data,\n                propPayload,\n                sourceIdentifiers,\n                persistent: false,\n                isSourceFieldPresent,\n                sourceId: propValue.sourceId\n            });\n        };\n    }\n\n    initializeSideEffects () {\n        super.initializeSideEffects();\n        const sideEffects = this.sideEffects();\n        for (const key in sideEffects) {\n            if ({}.hasOwnProperty.call(sideEffects, key)) {\n                sideEffects[key] instanceof SpawnableSideEffect && sideEffects[key].drawingContext(() => {\n                    const context = this.context;\n                    return context.getDrawingContext();\n                });\n            }\n        }\n    }\n\n    remove () {\n        this.context.cachedData()[0].unsubscribe('propagation');\n        return this;\n    }\n}\n","import { DimensionSubtype } from 'muze-utils';\n\nconst getRangeFromData = (instance, selectionDataModel, propConfig) => {\n    let criteria;\n    const dataObj = selectionDataModel[0].getData();\n    const propCriteria = propConfig.payload.criteria;\n    const sourceIdentifiers = propConfig.sourceIdentifiers;\n    const schema = dataObj.schema;\n    const fieldMap = instance.data().getFieldsConfig();\n    const data = dataObj.data;\n    const isActionSourceSame = instance.id() === propConfig.sourceId;\n\n    if (isActionSourceSame) {\n        criteria = propCriteria;\n    } else {\n        criteria = (sourceIdentifiers !== null) ? schema.reduce((acc, obj, index) => {\n            let range;\n            const field = obj.name;\n            const fieldObj = fieldMap[field];\n            const type = fieldObj && (fieldObj.def.subtype ? fieldObj.def.subtype : fieldObj.def.type);\n            const isDimension = type === DimensionSubtype.CATEGORICAL;\n\n            if (!fieldObj) {\n                return acc;\n            }\n\n            if (!isDimension) {\n                range = [Math.min(...data.map(d => d[index])), Math.max(...data.map(d => d[index]))];\n            } else {\n                range = data.map(d => d[index]);\n            }\n            acc[field] = range;\n            return acc;\n        }, {}) : null;\n    }\n    return criteria;\n};\n\nexport const payloadGenerator = {\n    brush: (instance, selectionDataModel, propConfig) => {\n        const propPayload = propConfig.payload;\n        const criteria = getRangeFromData(instance, selectionDataModel, propConfig);\n        const payload = Object.assign({}, propPayload);\n        payload.criteria = criteria;\n        return payload;\n    },\n\n    __default: (instance, selectionDataModel, propConfig) => {\n        const propPayload = propConfig.payload;\n        const sourceIdentifiers = propConfig.sourceIdentifiers;\n        const dataObj = selectionDataModel[0].getData();\n        let schema = dataObj.schema;\n        const payload = Object.assign({}, propPayload);\n        schema = dataObj.schema;\n        const data = dataObj.data;\n        payload.criteria = !sourceIdentifiers ? null : [schema.map(d => d.name), ...data];\n        return payload;\n    }\n};\n\n","import { getObjProp, defaultValue, makeElement, DimensionSubtype, DataModel } from 'muze-utils';\nimport { ScaleType } from '@chartshq/muze-axis';\nimport { layerFactory } from '@chartshq/visual-layer';\nimport { GRIDLINEPARENTGROUPCLASS, GRIDBANDPARENTGROUPCLASS } from '../enums/constants';\nimport { TIMEDIFFS } from '../enums/reactive-props';\n\nconst LINEAR = ScaleType.LINEAR;\n\nconst getLayerDefinition = (context, axes, type, orientation) => {\n    let encoding;\n    const config = context.config();\n    const { classPrefix, gridLines, gridBands } = config;\n    const gridLineColor = gridLines.color;\n    const zeroLineColor = gridLines.zeroLineColor;\n    const defClassName = type === 'band' ? gridBands.defClassName : gridLines.defClassName;\n    const gridBandColor = gridBands[orientation].color;\n    const axis = axes[orientation][0];\n    const isLinearScale = axis.constructor.type() === LINEAR;\n\n    if (type === 'band' && isLinearScale) {\n        encoding = {\n            [orientation]: `${orientation}value`,\n            [`${orientation}0`]: `${orientation}value0`\n        };\n    } else {\n        encoding = {\n            [orientation]: isLinearScale ? `${orientation}value` : `${orientation}dim`\n        };\n    }\n    encoding.color = {\n        value: (data, i) => {\n            const isNegativeDomain = isLinearScale && axis.domain()[0] < 0;\n            if (type === 'band') {\n                return gridBandColor[i % 2];\n            }\n            return isNegativeDomain && data[orientation] === 0 ? zeroLineColor : gridLineColor;\n        }\n    };\n\n    return {\n        definition: {\n            defClassName: `${defClassName}-${orientation}`,\n            className: config.className,\n            individualClassName: (data, i) => {\n                let className;\n                const isNegativeDomain = isLinearScale && axis.domain()[0] < 0;\n                if (isNegativeDomain && data.y === 0 && type !== 'band') {\n                    className = `${classPrefix}-axis-zero-line`;\n                } else {\n                    className = `${classPrefix}-grid-${type}-${orientation}-${i % 2}`;\n                }\n                return className;\n            },\n            [`pad${orientation.toUpperCase()}`]: type === 'band' ? 0 : undefined,\n            encoding\n        },\n        axes: {\n            [orientation]: axis\n        },\n        interactive: false\n    };\n};\n\nconst getDefaultVisibilty = (show, axis) => {\n    if (axis.constructor.type() === LINEAR) {\n        return show;\n    }\n    return false;\n};\n\nexport const getGridLayerDefinitions = (context, config, type) => ['x', 'y'].map((axisType) => {\n    const show = defaultValue(config[axisType] && config[axisType].show,\n        getDefaultVisibilty(config.show, context.axes()[axisType][0]));\n\n    return show ? getLayerDefinition(context, context.axes(), type, axisType) : undefined;\n}).filter(d => d !== undefined);\n\nexport const getGridLayerData = (axes, fields, fieldsConfig) => {\n    const gridData = {};\n    ['x', 'y'].forEach((type) => {\n        let ticks = axes[type][0].getTickValues();\n        const subtype = getObjProp(fieldsConfig, getObjProp(fields, type, 0).getMembers()[0], 'def', 'subtype');\n        const jsonData = [];\n        const schema = [\n            {\n                name: 'yvalue',\n                type: 'measure'\n            }, {\n                name: 'xvalue',\n                type: 'measure'\n            },\n            {\n                name: 'yvalue0',\n                type: 'measure'\n            }, {\n                name: 'xvalue0',\n                type: 'measure'\n            }, {\n                name: 'xdim',\n                type: 'dimension',\n                subtype\n            }, {\n                name: 'ydim',\n                type: 'dimension',\n                subtype\n            }\n        ];\n        const len = Math.max(ticks.length);\n        ticks = subtype === DimensionSubtype.TEMPORAL ? ticks.map(d => d.getTime()) : ticks;\n        for (let i = 0; i < len; i += 1) {\n            jsonData.push({\n                [`${type}value`]: ticks[i],\n                [`${type}value0`]: ticks[i + 1],\n                [`${type}dim`]: ticks[i],\n                [`${type}dim`]: ticks[i]\n            });\n        }\n        gridData[type] = new DataModel(jsonData, schema);\n    });\n    return gridData;\n};\n\nexport const createGridLineLayer = (context, data) => {\n    const vuConf = context.config();\n    const dependencies = context._layerDeps;\n    const measurement = {\n        width: context.width(),\n        height: context.height()\n    };\n\n    ['band', 'line'].forEach((type) => {\n        let mark;\n        let config;\n        let instances;\n        if (type === 'band') {\n            mark = 'bar';\n            config = vuConf.gridBands;\n            instances = context._gridbands;\n        } else {\n            mark = 'tick';\n            config = vuConf.gridLines;\n            instances = context._gridlines;\n        }\n        const definitions = getGridLayerDefinitions(context, config, type);\n\n        definitions.forEach((atomicDef, i) => {\n            let layer;\n            const definition = atomicDef.definition;\n            const axesObj = atomicDef.axes;\n            const sConf = layerFactory.getSerializedConf(mark, definition);\n            sConf.mark = mark;\n            if (!instances[i]) {\n                layer = layerFactory.getLayerInstance(sConf);\n                layer.dependencies(dependencies);\n            } else {\n                layer = instances[i];\n            }\n\n            layer.config(sConf)\n                            .measurement(measurement)\n                            .data(axesObj.y ? data.y : data.x)\n                            .dataProps({\n                                timeDiffs: context.store().get(TIMEDIFFS)\n                            })\n                            .axes(axesObj);\n            instances[i] = layer;\n        });\n    });\n};\n\nexport const renderGridLineLayers = (context, container) => {\n    const axes = context.axes();\n    const config = context.config();\n    const classPrefix = config.classPrefix;\n\n    if (axes && ((axes.x && axes.x.length) || (axes.y && axes.y.length))) {\n        const gridBandData = getGridLayerData(axes, context.fields(), context.data().getFieldsConfig());\n        createGridLineLayer(context, gridBandData);\n        [[context._gridlines, `${classPrefix}-${GRIDLINEPARENTGROUPCLASS}`],\n            [context._gridbands, `${classPrefix}-${GRIDBANDPARENTGROUPCLASS}`]].forEach((entry) => {\n                const [instances, parentGroupClass] = entry;\n                const mountPoint = makeElement(container, 'g', [1], `.${parentGroupClass}`);\n                const className = `${parentGroupClass}-group`;\n                makeElement(mountPoint, 'g', instances, `.${className}`, {\n                    update: (group, instance) => {\n                        instance.mount(group.node());\n                    }\n                });\n            });\n    }\n};\n","import { FieldType, getDependencyOrder, getObjProp,\n    defaultValue, objectIterator, unionDomain, makeElement,\n    DimensionSubtype, getClosestIndexOf, toArray } from 'muze-utils';\nimport { layerFactory } from '@chartshq/visual-layer';\nimport { TIMEDIFFS } from '../enums/reactive-props';\n\nexport const getDimensionMeasureMap = (layers, fieldsConfig) => {\n    const retinalEncodingsAndMeasures = {};\n\n    layers.forEach((layer) => {\n        const {\n            colorField,\n            sizeField,\n            shapeField,\n            xField,\n            yField\n        } = layer.encodingFieldsInf();\n        const measures = [xField, yField].filter(field => fieldsConfig[field] && fieldsConfig[field].def.type ===\n            FieldType.MEASURE);\n        [colorField, sizeField, shapeField].forEach((field) => {\n            if (fieldsConfig[field] && fieldsConfig[field].def.type === FieldType.DIMENSION) {\n                !retinalEncodingsAndMeasures[field] && (retinalEncodingsAndMeasures[field] = []);\n                retinalEncodingsAndMeasures[field].push(...measures);\n            }\n        });\n    });\n\n    for (const key in retinalEncodingsAndMeasures) {\n        if ({}.hasOwnProperty.call(retinalEncodingsAndMeasures, key)) {\n            retinalEncodingsAndMeasures[key] = [...new Set(retinalEncodingsAndMeasures[key])];\n        }\n    }\n    return retinalEncodingsAndMeasures;\n};\n\nexport const transformDataModels = (transform, dataModel) => {\n    const dataModels = {};\n    for (const key in transform) {\n        if ({}.hasOwnProperty.call(transform, key)) {\n            const transformVal = transform[key];\n            dataModels[key] = transformVal(dataModel);\n        }\n    }\n\n    return dataModels;\n};\n\nexport const getLayerFromDef = (context, definition, existingLayer) => {\n    let instances = existingLayer;\n    const dependencies = context._layerDeps;\n    if (!existingLayer) {\n        instances = layerFactory.getLayerInstance(definition);\n    }\n    const layers = {};\n    const instanceArr = toArray(instances);\n    definition = toArray(definition);\n    definition.reduce((acc, def, idx) => {\n        const instance = instanceArr[idx];\n        instance.config(def);\n        instance.dependencies(dependencies);\n        if (def.name) {\n            instance.alias(def.name);\n        }\n        layers[instance.alias()] = instance;\n        return acc;\n    }, {});\n    return layers;\n};\n\nexport const createLayers = (context, layerDefinitions) => {\n    const layersMap = context._layersMap;\n    const markSet = {};\n    const store = {\n        layers: {},\n        components: {\n            unit: context\n        }\n    };\n    let layers = layerDefinitions.reduce((layersArr, layerDef, i) => {\n        const mark = layerDef.mark;\n        const definition = layerDef.def;\n        const markId = `${mark}-${i}`;\n        const instances = getLayerFromDef(context, definition, layersMap[markId]);\n        store.layers = Object.assign(store.layers, instances);\n        layersArr = layersArr.concat(...Object.values(instances));\n        layersMap[markId] = instances;\n        markSet[markId] = markId;\n        return layersArr;\n    }, []);\n    store.unit = context;\n    const layerdeps = {};\n    layers.forEach((layer) => {\n        const encodingTransform = layer.config().encodingTransform || {};\n        const resolvable = encodingTransform.resolvable;\n\n        layerdeps[layer.alias()] = [];\n        if (resolvable) {\n            const resolved = resolvable(store);\n            const depArr = resolved.depArr;\n            layerdeps[layer.alias()] = depArr;\n            layer.encodingTransform(resolved.fn);\n        } else if (encodingTransform instanceof Function) {\n            layer.encodingTransform(encodingTransform);\n        }\n    });\n\n    const order = getDependencyOrder(layerdeps);\n    layers = order.map(name => store.layers[name]);\n    for (const key in layersMap) {\n        if (!(key in markSet)) {\n            layersMap[key].forEach(layer => layer.remove());\n            delete layersMap[key];\n        }\n    }\n    return layers;\n};\n\nexport const attachDataToLayers = (layers, dm, transformedDataModels) => {\n    layers.forEach((layer) => {\n        const dataSource = layer.config().source;\n        const dataModel = dataSource instanceof Function ? dataSource(dm) : (transformedDataModels[dataSource] || dm);\n        layer.data(dataModel);\n    });\n};\n\nexport const attachAxisToLayers = (axes, layers, layerAxisIndex) => {\n    layers.forEach((layer) => {\n        const layerId = layer.id();\n        const axesObj = {};\n\n        objectIterator(axes, (key) => {\n            const axisInf = layerAxisIndex[layerId];\n            if (axisInf) {\n                axes[key] && (axesObj[key] = axes[key][axisInf[key] || 0]);\n            }\n        });\n        Object.keys(axesObj).length && layer.axes(axesObj);\n    });\n};\n\nexport const getLayerAxisIndex = (layers, fields) => {\n    const layerAxisIndex = {};\n    layers.forEach((layer) => {\n        const { axis, encoding } = layer.config();\n        const id = layer.id();\n        ['x', 'y'].forEach((type) => {\n            let index;\n            const field = defaultValue(getObjProp(axis, type), encoding[type] && encoding[type].field);\n            if (fields[type]) {\n                index = fields[type].findIndex(fieldInst => fieldInst.getMembers().indexOf(field) !== -1);\n            } else {\n                index = 0;\n            }\n            !layerAxisIndex[id] && (layerAxisIndex[id] = {});\n            layerAxisIndex[id][type] = index;\n        });\n    });\n    return layerAxisIndex;\n};\n\nexport const unionDomainFromLayers = (layers, axisFields, layerAxisIndex, fieldsConfig) => {\n    let domains = {};\n    layers = layers.filter(layer => layer.getDataDomain() !== null);\n    layers.forEach((layer) => {\n        let domainValues = {};\n        const config = layer.config();\n        const encoding = config.encoding;\n        const layerDomain = layer.getDataDomain();\n        const layerId = layer.id();\n\n        if (layerDomain !== null && config.calculateDomain !== false) {\n            domainValues = Object.entries(layerDomain);\n            if (layerDomain.x || layerDomain.y) {\n                domains = domainValues.reduce((fieldDomain, domain) => {\n                    const encodingType = domain[0];\n                    const field = encoding[encodingType].field;\n                    const axisIndex = layerAxisIndex[layerId][encodingType];\n                    const fieldStr = `${axisFields[encodingType][axisIndex]}`;\n                    fieldDomain[fieldStr] = fieldDomain[fieldStr] || [];\n                    fieldDomain[fieldStr] = unionDomain(([fieldDomain[fieldStr], domain[1]]),\n                        fieldsConfig[field].def.subtype ? fieldsConfig[field].def.subtype :\n                                fieldsConfig[field].def.type);\n\n                    return fieldDomain;\n                }, domains);\n            } else { domains = domainValues; }\n        }\n    });\n    return domains;\n};\n\nexport const renderLayers = (context, container, layers, measurement) => {\n    context._lifeCycleManager.notify({ client: layers, action: 'beforedraw', formalName: 'layer' });\n    const config = context.config();\n    const classPrefix = config.classPrefix;\n    const orderedLayers = context.layers().sort((a, b) => a.config().order - b.config().order);\n    const layerParentGroup = makeElement(container, 'g', [1], `${classPrefix}-layer-group`);\n    makeElement(layerParentGroup, 'g', orderedLayers, null, {\n        update: (group, layer) => {\n            layer.measurement(measurement);\n            layer.dataProps({\n                timeDiffs: context.store().get(TIMEDIFFS)\n            });\n            layer.config().render !== false && layer.mount(group.node());\n        }\n    });\n    return this;\n};\n\nexport const getNearestDimensionalValue = (context, position) => {\n    const fields = context.fields();\n    if (!fields.x.length || !fields.y.length) {\n        return null;\n    }\n    const data = context.data();\n    const axes = context.axes();\n    const fieldsConfig = data.getFieldsConfig();\n    const xField = getObjProp(fields, 'x', 0).getMembers()[0];\n    const yField = getObjProp(fields, 'y', 0).getMembers()[0];\n    const xFieldType = fieldsConfig[xField] && (fieldsConfig[xField].def.subtype ? fieldsConfig[xField].def.subtype :\n        fieldsConfig[xField].def.type);\n    const yFieldType = fieldsConfig[yField] && (fieldsConfig[yField].def.subtype ? fieldsConfig[yField].def.subtype :\n                fieldsConfig[yField].def.type);\n\n    const entryVal = [['x', xFieldType, xField], ['y', yFieldType, yField]].find(entry =>\n        entry[1] === DimensionSubtype.CATEGORICAL || entry[1] === DimensionSubtype.TEMPORAL);\n\n    if (!entryVal || (xFieldType !== FieldType.MEASURE && yFieldType !== FieldType.MEASURE)) {\n        return null;\n    }\n    const field = entryVal[2];\n    const index = fieldsConfig[field].index;\n    let key = axes[entryVal[0]][0].invert(position[entryVal[0]]);\n    if (entryVal[1] === DimensionSubtype.TEMPORAL) {\n        const filterData = [...new Set(data.getData().data.map(d => d[index]))];\n        key = filterData[getClosestIndexOf(filterData, key)];\n    }\n\n    return key !== undefined ? [[field], [key]] : null;\n};\n\nexport const getLayersBy = (layers, searchBy, value) => layers.filter((layer) => {\n    const name = searchBy === 'type' ? layer.constructor.formalName() : layer.alias();\n    return name === value;\n});\n\nexport const removeLayersBy = (layers, searchBy, value) => {\n    layers.filter((inst) => {\n        const name = searchBy === 'type' ? inst.config().mark : inst.alias();\n        if (name === value) {\n            inst.remove();\n            return false;\n        }\n        return true;\n    });\n};\n\nexport const createSideEffectGroup = (container, className) => makeElement(container, 'g', [1], className).node();\n\nexport const getAdjustedDomain = (max, min) => {\n    const y1ratio = max[0] / (max[0] - min[0]);\n    const y2ratio = max[1] / (max[1] - min[1]);\n\n    // adjust min/max values for positive negative values zero line etc\n    let allSameSign = false;\n\n    // if all numbers are positive set floor to zero\n    if (min[0] > 0 && min[1] > 0 && min[1] > 0 && max[1] > 0) {\n        allSameSign = true;\n        min[0] = 0;\n        min[1] = 0;\n    }\n\n    // if all numbers are negative set ceiling to zero\n    if (min[0] < 0 && min[1] < 0 && min[1] < 0 && max[1] < 0) {\n        allSameSign = true;\n        max[0] = 0;\n        max[1] = 0;\n    }\n\n    // align zero line if necessary\n    if (!allSameSign && y1ratio !== y2ratio) {\n        if (y1ratio < y2ratio) {\n                    // adjust min[1]\n            min[1] = min[0] / max[0] * max[1];\n        } else {\n                    // adjust min[0]\n            min[0] = min[1] / max[1] * max[0];\n        }\n    }\n    return {\n        max,\n        min\n    };\n};\n","import { DimensionSubtype } from 'muze-utils';\nimport * as PROPS from './enums/reactive-props';\nimport {\n    transformDataModels,\n    getDimensionMeasureMap,\n    createLayers,\n    attachDataToLayers,\n    attachAxisToLayers,\n    unionDomainFromLayers,\n    getLayerAxisIndex\n} from './helper';\n\nconst axisMap = {\n    0: 'primary',\n    1: 'secondary'\n};\nconst axisProps = [PROPS.primaryXAxisUpdated, PROPS.secondaryXAxisUpdated, PROPS.primaryYAxisUpdated,\n    PROPS.secondaryYAxisUpdated];\n\nexport const listenerMap = context => ([\n    {\n        type: 'registerImmediateListener',\n        props: [PROPS.AXES],\n        listener: ([, axes]) => {\n            ['x', 'y'].forEach((type) => {\n                const axesArr = axes[type] || [];\n                axesArr.forEach((axis, i) => {\n                    axis.on('update', () => {\n                        context.store().commit(PROPS[`${axisMap[i]}${axis.isReverse() ? 'Y' : 'X'}AxisUpdated`], true);\n                    });\n                });\n            });\n        }\n    },\n    {\n        type: 'registerImmediateListener',\n        props: [PROPS.CONFIG],\n        listener: ([, config]) => {\n            config && context.firebolt().config(config.interaction);\n        }\n    },\n    {\n        type: 'computed',\n        props: [PROPS.LAYERSCREATED],\n        listener: fetch => fetch(PROPS.LAYERDEFS, PROPS.FIELDS, (layerDefs, fields) => {\n            const layerDefsValue = layerDefs.value;\n            const fieldsVal = fields.value;\n            if (layerDefsValue && fieldsVal) {\n                const layers = createLayers(context, layerDefs.value);\n                context.layers(layers);\n                context._layerAxisIndex = getLayerAxisIndex(context.layers(), fieldsVal);\n                context._lifeCycleManager.notify({ client: layers, action: 'initialized', formalName: 'layer' });\n                return true;\n            }\n            return null;\n        })\n    },\n    {\n        type: 'computed',\n        props: [PROPS.TIMEDIFFS],\n        listener: fetch => fetch(PROPS.DATA, PROPS.FIELDS, PROPS.AXES, (data, fields, axes) => {\n            const dataModel = data.value;\n            const axisFields = fields.value;\n            const axesObj = axes.value;\n            if (dataModel && axisFields && axesObj) {\n                const timeDiffs = {};\n                ['x', 'y'].forEach((type) => {\n                    const field = axisFields[type][0];\n                    if (field && field.subtype() === DimensionSubtype.TEMPORAL) {\n                        timeDiffs[type] = field.getMinDiff();\n                        axesObj[type][0].minDiff(timeDiffs[type]);\n                    }\n                });\n                return timeDiffs;\n            }\n            return null;\n        })\n    },\n    {\n        type: 'computed',\n        props: [PROPS.DATADOMAIN],\n        listener: fetch => fetch(PROPS.DATA, PROPS.LAYERSCREATED, PROPS.AXES, PROPS.TRANSFORM,\n            (dataModel, layersCreated, axes, transform) => {\n                const dataModelVal = dataModel.value;\n                const layerAxisIndexVal = context._layerAxisIndex;\n                const axesVal = axes.value;\n                if (dataModelVal && layersCreated.value && axesVal && layerAxisIndexVal) {\n                    const layers = context.layers();\n                    const dataModels = transformDataModels(transform.value, dataModelVal);\n                    context._transformedDataModels = dataModels;\n                    context._lifeCycleManager.notify({ client: layers, action: 'beforeupdate', formalName: 'layer' });\n                    attachDataToLayers(layers, dataModelVal, context._transformedDataModels);\n                    context._dimensionMeasureMap = getDimensionMeasureMap(layers,\n                        dataModelVal.getFieldsConfig(), context.retinalFields());\n                    attachAxisToLayers(axesVal, layers, layerAxisIndexVal);\n                    context._lifeCycleManager.notify({ client: layers, action: 'updated', formalName: 'layer' });\n                    return unionDomainFromLayers(layers, context.fields(),\n                        layerAxisIndexVal, dataModelVal.getFieldsConfig());\n                }\n                return null;\n            })\n    },\n    {\n        type: 'registerImmediateListener',\n        props: [PROPS.DATADOMAIN],\n        listener: ([, dataDomain]) => {\n            dataDomain !== null && context.updateAxisDomain(dataDomain);\n        }\n    },\n    {\n        type: 'registerImmediateListener',\n        props: [PROPS.MOUNT, PROPS.CONFIG, PROPS.WIDTH, PROPS.HEIGHT, ...axisProps],\n        listener: ([, container], [, config], [, width], [, height]) => {\n            if (container && width && height && config) {\n                context.render(container);\n            }\n        }\n    }\n]);\n","import { mergeRecursive } from 'muze-utils';\nimport { defaultConfig } from './default-config';\nimport { CONFIG, LAYERDEFS, AXES, WIDTH, HEIGHT, MOUNT, TRANSFORM, FIELDS, DATA } from './enums/reactive-props';\n\nexport default {\n    [CONFIG]: {\n        value: null,\n        meta: {\n            sanitization: (config, oldConfig) => (\n                mergeRecursive(oldConfig || mergeRecursive({}, defaultConfig), config)\n            )\n        }\n    },\n    [LAYERDEFS]: {\n        value: null\n    },\n    [AXES]: {\n        value: null,\n        meta: {\n            sanitization: (axes, prevAxes) => Object.assign(prevAxes || {}, axes)\n        }\n    },\n    [WIDTH]: {\n        value: null\n    },\n    [HEIGHT]: {\n        value: null\n    },\n    [MOUNT]: {\n        value: null\n    },\n    [TRANSFORM]: {\n        value: null\n    },\n    [FIELDS]: {\n        value: null\n    },\n    [DATA]: {\n        value: null,\n        meta: {\n            preset: (data, context) => {\n                if (context._cache) {\n                    const cachedData = context.cachedData();\n                    context.cachedData([...cachedData, data]);\n                } else {\n                    context.cachedData([data]);\n                }\n            }\n        }\n    }\n};\n","import { FACET_BY_FIELDS, RETINAL_FIELDS, PARENT_ALIAS, LAYERS, STORE, CACHED_DATA } from './enums/constants';\n\nexport const PROPS = {\n    [FACET_BY_FIELDS]: {},\n    [RETINAL_FIELDS]: {},\n    [PARENT_ALIAS]: {},\n    [LAYERS]: {},\n    [STORE]: {},\n    [CACHED_DATA]: {}\n};\n","// extracted by mini-css-extract-plugin","import { layerFactory } from '@chartshq/visual-layer';\nimport {\n    setAttrs,\n    CommonProps,\n    getUniqueId,\n    getQualifiedClassName,\n    selectElement,\n    transactor,\n    Store,\n    makeElement,\n    registerListeners,\n    generateGetterSetters,\n    getDataModelFromIdentifiers,\n    isSimpleObject,\n    transposeArray,\n    FieldType\n} from 'muze-utils';\nimport { physicalActions, sideEffects, behaviouralActions, behaviourEffectMap } from '@chartshq/muze-firebolt';\nimport { actionBehaviourMap } from './firebolt/action-behaviour-map';\nimport {\n    renderLayers,\n    getNearestDimensionalValue,\n    removeLayersBy,\n    getLayersBy,\n    getLayerFromDef,\n    attachAxisToLayers,\n    getLayerAxisIndex,\n    createSideEffectGroup,\n    getAdjustedDomain\n} from './helper';\nimport { renderGridLineLayers } from './helper/grid-lines';\nimport localOptions from './local-options';\nimport { listenerMap } from './listener-map';\nimport {\n    primaryYAxisUpdated,\n    primaryXAxisUpdated,\n    secondaryXAxisUpdated,\n    secondaryYAxisUpdated,\n    DATADOMAIN,\n    TIMEDIFFS\n} from './enums/reactive-props';\nimport { PROPS } from './props';\nimport UnitFireBolt from './firebolt';\nimport './styles.scss';\n\nconst FORMAL_NAME = 'unit';\n\n/**\n * @module VisualUnit\n * A hierarchical component of renderer which manages multiple layers. This logical\n * module is responsible for layouting layers, attach axis with them, resolving conflicts of layers.\n */\n\n/**\n * Basic unit implementaiton\n * @class VisualUnit\n */\nexport default class VisualUnit {\n\n    /**\n     * Creates instance of visualization unit\n     * @param registry {Object} Component registry\n     * @param dependencies {Object} Dependencies required by visual unit.\n     */\n    constructor (registry, dependencies) {\n        this._id = getUniqueId();\n        this._dependencies = dependencies;\n        this._layerDeps = {\n            throwback: new Store({\n                onlayerdraw: false\n            }),\n            smartLabel: dependencies.smartLabel\n        };\n        this._renderedResolve = null;\n        this._renderedPromise = new Promise((resolve) => {\n            this._renderedResolve = resolve;\n        });\n        this._layerDeps.throwback.registerChangeListener([CommonProps.ON_LAYER_DRAW], () => {\n            this._renderedResolve();\n        });\n\n        this._lifeCycleManager = dependencies.lifeCycleManager;\n        this._layersMap = {};\n        this._gridlines = [];\n        this._gridbands = [];\n        this._layerAxisIndex = {};\n        this._transformedDataModels = {};\n\n        layerFactory.setLayerRegistry(registry.layerRegistry);\n        generateGetterSetters(this, PROPS);\n        this.cachedData([]);\n        this.store(new Store({\n            [primaryXAxisUpdated]: null,\n            [primaryYAxisUpdated]: null,\n            [secondaryXAxisUpdated]: null,\n            [secondaryYAxisUpdated]: null\n        }));\n        transactor(this, localOptions, this.store().model);\n        this.firebolt(new UnitFireBolt(this, {\n            physical: physicalActions,\n            behavioural: behaviouralActions,\n            physicalBehaviouralMap: actionBehaviourMap\n        }, sideEffects, behaviourEffectMap));\n        registerListeners(this, listenerMap);\n    }\n\n    /**\n     *\n     *\n     * @static\n     * @returns\n     * @memberof VisualUnit\n     */\n    static formalName () {\n        return FORMAL_NAME;\n    }\n\n    /**\n     * Static helper for creates a unit instance\n     *\n     * @param {Object} [id] optional unique identifier for a unit; , id is calculated internally\n     * @param {DataModel} data instance of datamodel\n     * @param {Array.<Layer>} layers layer configuration\n     * @param {Object} config configurtion for the visual unit\n     * @return {VisualUnit} Instance of a unit\n     */\n    static create (...params) {\n        return new this(...params);\n    }\n\n    /**\n     *\n     *\n     * @readonly\n     * @memberof VisualUnit\n     */\n    firebolt (...firebolt) {\n        if (firebolt.length) {\n            this._firebolt = firebolt[0];\n            return this;\n        }\n        return this._firebolt;\n    }\n\n    /**\n     * Gets the domain for all axes of this visual unit.\n     * @return {Object} Domains of each data field.\n     */\n    getDataDomain () {\n        return this.store().get(DATADOMAIN);\n    }\n\n    /**\n     * Retrieves the id created for this instance of visual unit\n     * @return {string} id associated with the instance\n     */\n    id () {\n        return this._id;\n    }\n\n    /**\n     *\n     *\n     * @returns\n     * @memberof VisualUnit\n     */\n    lockModel () {\n        this._store.model.lock();\n        return this;\n    }\n\n    /**\n     *\n     *\n     * @returns\n     * @memberof VisualUnit\n     */\n    unlockModel () {\n        this._store.model.unlock();\n        return this;\n    }\n\n    /**\n     * Renders the visual unit. It creates the layout and renders the axes and layers.\n     * @return {VisualUnit} Instance of visual unit.\n     */\n    render (container) {\n        const config = this.config();\n        const { className, defClassName, sideEffectClassName, classPrefix } = config;\n        const qualifiedClassName = getQualifiedClassName(defClassName, this.id(), config.classPrefix);\n        const width = this.width();\n        const height = this.height();\n        const containerSelection = selectElement(container).style('position', 'relative');\n\n        this._rootSvg = makeElement(containerSelection, 'svg', [null], className)\n                        .style('width', `${width}px`).style('height', `${height}px`);\n\n        const node = this._rootSvg.node();\n        setAttrs(node, {\n            width,\n            height,\n            class: qualifiedClassName.join(' ')\n        });\n        renderGridLineLayers(this, node);\n        renderLayers(this, node, this.layers(), {\n            width,\n            height\n        });\n        this._sideEffectGroup = createSideEffectGroup(node, `${classPrefix}-${sideEffectClassName}`);\n        return this;\n    }\n\n    done () {\n        return this._renderedPromise;\n    }\n    /**\n     *\n     *\n     * @returns\n     * @memberof VisualUnit\n     */\n    enableCaching () {\n        this._cache = true;\n        return this;\n    }\n\n    /**\n     *\n     *\n     * @returns\n     * @memberof VisualUnit\n     */\n    clearCaching () {\n        this._cache = false;\n        this.cachedData([this.cachedData()[0]]);\n        return this;\n    }\n\n    /**\n     *\n     *\n     * @returns\n     * @memberof VisualUnit\n     */\n    getDrawingContext () {\n        const rootSvg = this._rootSvg && this._rootSvg.node();\n        const width = this.width();\n        const height = this.height();\n        return {\n            htmlContainer: this.mount(),\n            svgContainer: rootSvg,\n            width,\n            height,\n            boundWidth: width,\n            boundHeight: height,\n            sideEffectGroup: this._sideEffectGroup,\n            xOffset: 0,\n            yOffset: 0\n        };\n    }\n\n    /**\n     * Returns the serialized configuration of visual unit.\n     * @return {Object} serialized configuration\n     */\n    serialize () {\n        return {\n            layers: this.layers().map(layer => layer.serialize()),\n            config: this.config(),\n            axes: this.store().get('axes').map(axis => axis.serialize())\n        };\n    }\n\n    /**\n     *\n     *\n     * @param {*} layerDef\n     * @returns\n     * @memberof VisualUnit\n     */\n    addLayer (layerDef) {\n        const layerName = layerDef.name;\n        const layer = this.getLayerByName(layerName);\n        const measurement = {\n            width: this.width(),\n            height: this.height()\n        };\n\n        if (layer) {\n            return [layer];\n        }\n        const serializedDef = layerFactory.getSerializedConf(layerDef.mark, layerDef);\n        const instances = Object.values(getLayerFromDef(this, serializedDef));\n        this.layers().push(...instances);\n        const layerAxisIndex = getLayerAxisIndex(instances, this.fields());\n        this._layerAxisIndex = Object.assign(this._layerAxisIndex, layerAxisIndex);\n        attachAxisToLayers(this.axes(), instances, layerAxisIndex);\n        this.layers().forEach((lyr) => {\n            lyr.measurement(measurement);\n            lyr.dataProps({\n                timeDiffs: this.store().get(TIMEDIFFS)\n            });\n        });\n        return instances;\n    }\n\n    /**\n     *\n     *\n     * @returns\n     * @memberof VisualUnit\n     */\n    remove () {\n        const lifeCycleManager = this._dependencies.lifeCycleManager;\n        lifeCycleManager.notify({ client: this, action: 'beforeremove', formalName: 'unit' });\n        this.store().unsubscribeAll();\n        selectElement(this.mount()).remove();\n        this.firebolt().remove();\n        // Remove layers\n        lifeCycleManager.notify({ client: this.layers(), action: 'beforeremove', formalName: 'layer' });\n        this.layers().forEach(layer => layer.remove());\n        lifeCycleManager.notify({ client: this.layers(), action: 'removed', formalName: 'layer' });\n        lifeCycleManager.notify({ client: this, action: 'removed', formalName: 'unit' });\n        return this;\n    }\n\n    /**\n     *\n     *\n     * @param {*} identifiers\n     * @returns\n     * @memberof VisualUnit\n     */\n    getDataModelFromIdentifiers (identifiers, mode) {\n        if (identifiers === null) {\n            return null;\n        }\n        const dataModel = this.data();\n        return getDataModelFromIdentifiers(dataModel, identifiers, mode);\n    }\n\n    /**\n     *\n     *\n     * @returns\n     * @memberof VisualUnit\n     */\n    resetData () {\n        this.data(this.cachedData()[0]);\n        return this;\n    }\n\n    /**\n     *\n     *\n     * @returns\n     * @memberof VisualUnit\n     */\n    getSourceInfo () {\n        return {\n            dimensionMeasureMap: this._dimensionMeasureMap,\n            fields: this.fields(),\n            data: this.data(),\n            axes: this.axes()\n        };\n    }\n\n    /**\n     *\n     *\n     * @returns\n     * @memberof VisualUnit\n     */\n    getDefaultTargetContainer () {\n        const { classPrefix, defClassName, arcLayerClassName } = this.config();\n        return [`.${classPrefix}-${defClassName}`, `.${classPrefix}-${arcLayerClassName} path`];\n    }\n\n    /**\n     * Applies the selection styles to the elements of the corresponding data tuples.\n     * @param {Array} selectionSet Array of selected tuple ids.\n     * @param {Object} config Configuration for highlighting elments.\n     * @return {VisualUnit} Instance of visual unit.\n     */\n    highlightPoint (selectionSet, config = {}) {\n        this._layers.forEach(layer => layer.config().interactive !== false &&\n            layer.highlightPoint(selectionSet.uids, config));\n        return this;\n    }\n\n    /**\n     * Removes the selection styles from the elements of the corresponding data tuples.\n     * @param {Array} selectionSet Array of selected tuple ids.\n     * @param {Object} config Configuration for highlighting elments.\n     * @return {VisualUnit} Instance of visual unit.\n     */\n    dehighlightPoint (selectionSet, config = {}) {\n        this._layers.forEach(layer => layer.config().interactive !== false &&\n            layer.dehighlightPoint(selectionSet.uids, config));\n        return this;\n    }\n\n    /**\n     *\n     *\n     * @param {*} set\n     * @param {*} [config={}]\n     * @returns\n     * @memberof VisualUnit\n     */\n    fadeOutSelection (set, config = {}) {\n        const layers = this.layers();\n        layers.forEach(layer => layer.config().interactive !== false && layer.fadeOutSelection(set.uids, config));\n        return this;\n    }\n\n    /**\n     *\n     *\n     * @param {*} set\n     * @param {*} [config={}]\n     * @returns\n     * @memberof VisualUnit\n     */\n    unfadeSelection (set, config = {}) {\n        const layers = this.layers();\n        layers.forEach(layer => layer.config().interactive !== false && layer.unfadeSelection(set.uids, config));\n        return this;\n    }\n\n    /**\n     *\n     *\n     * @param {*} set\n     * @param {*} [config={}]\n     * @returns\n     * @memberof VisualUnit\n     */\n    focusSelection (set, config = {}) {\n        const layers = this.layers();\n        layers.forEach(layer => layer.config().interactive !== false && layer.focusSelection(set.uids, config));\n        return this;\n    }\n\n    /**\n     *\n     *\n     * @param {*} set\n     * @param {*} [config={}]\n     * @returns\n     * @memberof VisualUnit\n     */\n    focusOutSelection (set, config = {}) {\n        const layers = this.layers();\n        layers.forEach(layer => layer.config().interactive !== false && layer.focusOutSelection(set.uids, config));\n        return this;\n    }\n\n    /**\n     *\n     *\n     * @param {*} type\n     * @returns\n     * @memberof VisualUnit\n     */\n    getLayersByType (type) {\n        const layers = getLayersBy(this.layers(), 'type', type);\n        return layers;\n    }\n\n    /**\n     *\n     *\n     * @param {*} name\n     * @returns\n     * @memberof VisualUnit\n     */\n    getLayerByName (name) {\n        const layers = getLayersBy(this.layers(), 'name', name);\n        return layers[0];\n    }\n\n    /**\n     *\n     *\n     * @param {*} domain\n     * @returns\n     * @memberof VisualUnit\n     */\n    updateAxisDomain (domain) {\n        ['x', 'y'].forEach((type) => {\n            const axes = this.axes()[type];\n            let min = [];\n            let max = [];\n            let dom;\n            axes && axes.forEach((axis, i) => {\n                const field = this.fields()[type][i];\n                dom = domain[`${this.fields()[type][i]}`];\n                if (field.type() !== FieldType.DIMENSION && dom) {\n                    min[i] = dom[0];\n                    max[i] = dom[1];\n                }\n            });\n            if (axes) {\n                if (axes.length > 1) {\n                    const axisConf = axes[0].config();\n                    if (axisConf.alignZeroLine) {\n                        axes.forEach(axis => axis.config({\n                            nice: false\n                        }));\n                        const adjustedDomain = getAdjustedDomain(max, min);\n                        min = adjustedDomain.min;\n                        max = adjustedDomain.max;\n                    }\n\n                    axes[0].updateDomainCache([min[0], max[0]]);\n                    axes[1].updateDomainCache([min[1], max[1]]);\n                } else {\n                    axes[0].updateDomainCache(dom);\n                }\n            }\n        });\n        return this;\n    }\n\n    /**\n     * Finds the nearest point closest to the x and y position.\n     * @param {number} x x position.\n     * @param {number} y y position.\n     * @return {Object} Nearest point.\n     */\n    getNearestPoint (x, y, args) {\n        const pointObj = {\n            dimensions: [],\n            id: null\n        };\n        const dimValue = getNearestDimensionalValue(this, {\n            x,\n            y\n        });\n\n        if (dimValue !== null && args.getAllPoints) {\n            pointObj.id = dimValue;\n            const pointInf = this.getMarkInfFromLayers(x, y, args);\n            pointObj.target = pointInf && pointInf.id ? pointInf.id : pointObj.id;\n            return pointObj;\n        }\n\n        const markInf = this.getMarkInfFromLayers(x, y, args) || { id: null };\n        pointObj.id = markInf.id;\n        pointObj.target = markInf.id;\n        return pointObj;\n    }\n\n    getMarkInfFromLayers (x, y, args) {\n        const layers = this.layers();\n        const len = layers.length;\n        let point = null;\n        // Iterate through the layers array and fetch the nearest point from each layer. If a valid\n        // nearest point is found from any layer, then return that point.\n        for (let i = 0; i < len; i++) {\n            const layer = layers[i];\n            const config = layer.config();\n            if (config.interactive !== false) {\n                point = layer.getNearestPoint(x, y, args);\n            }\n            if (point) {\n                return point;\n            }\n        }\n        return point;\n    }\n\n    /**\n     *\n     *\n     * @param {*} identifiers\n     * @returns\n     * @memberof VisualUnit\n     */\n    getPlotPointsFromIdentifiers (identifiers) {\n        let points = [];\n        let parsedIdentifiers = identifiers;\n        if (identifiers === null) {\n            return [];\n        }\n        const layers = this.layers();\n        const len = layers.length;\n        if (isSimpleObject(identifiers)) {\n            parsedIdentifiers = [Object.keys(identifiers)];\n            parsedIdentifiers = [...parsedIdentifiers, ...transposeArray(Object.values(identifiers))];\n        }\n        for (let i = 0; i < len; i++) {\n            const layer = layers[i];\n            if (layer.config().interactive !== false) {\n                points = [...points, ...layer.getPointsFromIdentifiers(parsedIdentifiers)];\n            }\n        }\n        return points;\n    }\n\n    /**\n     *\n     *\n     * @param {*} name\n     * @returns\n     * @memberof VisualUnit\n     */\n    removeLayerByName (name) {\n        removeLayersBy('name', name);\n        return this;\n    }\n\n    /**\n     *\n     *\n     * @param {*} type\n     * @returns\n     * @memberof VisualUnit\n     */\n    removeLayersByType (type) {\n        removeLayersBy('type', type);\n        return this;\n    }\n}\n"],"sourceRoot":""}