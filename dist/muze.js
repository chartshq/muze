!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("muze",[],e):"object"==typeof exports?exports.muze=e():t.muze=e()}(window,(function(){return function(t){function e(e){for(var n,i,a=e[0],o=e[1],c=0,u=[];c<a.length;c++)i=a[c],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&u.push(r[i][0]),r[i]=0;for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n]);for(l&&l(e);u.length;)u.shift()()}var n={},r={0:0};var i={};var a={115:function(){return{"./datamodel_wasm.js":{__wbindgen_json_serialize:function(t,e){return n[114].exports.c(t,e)},__wbindgen_object_drop_ref:function(t){return n[114].exports.d(t)},__wbindgen_throw:function(t,e){return n[114].exports.e(t,e)}}}}};function o(e){if(n[e])return n[e].exports;var r=n[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.e=function(t){var e=[],n=r[t];if(0!==n)if(n)e.push(n[2]);else{var c=new Promise((function(e,i){n=r[t]=[e,i]}));e.push(n[2]=c);var u,s=document.createElement("script");s.charset="utf-8",s.timeout=120,o.nc&&s.setAttribute("nonce",o.nc),s.src=function(t){return o.p+""+t+".muze.js"}(t);var l=new Error;u=function(e){s.onerror=s.onload=null,clearTimeout(f);var n=r[t];if(0!==n){if(n){var i=e&&("load"===e.type?"missing":e.type),a=e&&e.target&&e.target.src;l.message="Loading chunk "+t+" failed.\n("+i+": "+a+")",l.name="ChunkLoadError",l.type=i,l.request=a,n[1](l)}r[t]=void 0}};var f=setTimeout((function(){u({type:"timeout",target:s})}),12e4);s.onerror=s.onload=u,document.head.appendChild(s)}return({1:[115]}[t]||[]).forEach((function(t){var n=i[t];if(n)e.push(n);else{var r,c=a[t](),u=fetch(o.p+""+{115:"7760bc80fcd10857455b"}[t]+".module.wasm");if(c instanceof Promise&&"function"==typeof WebAssembly.compileStreaming)r=Promise.all([WebAssembly.compileStreaming(u),c]).then((function(t){return WebAssembly.instantiate(t[0],t[1])}));else if("function"==typeof WebAssembly.instantiateStreaming)r=WebAssembly.instantiateStreaming(u,c);else{r=u.then((function(t){return t.arrayBuffer()})).then((function(t){return WebAssembly.instantiate(t,c)}))}e.push(i[t]=r.then((function(e){return o.w[t]=(e.instance||e).exports})))}})),Promise.all(e)},o.m=t,o.c=n,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)o.d(n,r,function(e){return t[e]}.bind(null,r));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o.oe=function(t){throw console.error(t),t},o.w={};var c=window.webpackJsonpmuze=window.webpackJsonpmuze||[],u=c.push.bind(c);c.push=e,c=c.slice();for(var s=0;s<c.length;s++)e(c[s]);var l=u;return o(o.s=110)}([function(t,e){t.exports=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}},function(t,e,n){var r=n(76),i=n(77),a=n(44),o=n(78);t.exports=function(t){return r(t)||i(t)||a(t)||o()}},function(t,e){function n(e){return t.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},n(e)}t.exports=n},function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e){function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}t.exports=function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}},function(t,e,n){var r=n(45);t.exports=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&r(t,e)}},function(t,e,n){var r=n(34),i=n(16);t.exports=function(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?i(t):e}},function(t,e,n){var r=n(80),i=n(81),a=n(44),o=n(82);t.exports=function(t,e){return r(t)||i(t,e)||a(t,e)||o()}},function(t,e){t.exports=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}},function(t,e,n){var r=n(84);function i(e,n,a){return"undefined"!=typeof Reflect&&Reflect.get?t.exports=i=Reflect.get:t.exports=i=function(t,e,n){var i=r(t,e);if(i){var a=Object.getOwnPropertyDescriptor(i,e);return a.get?a.get.call(n):a.value}},i(e,n,a||e)}t.exports=i},function(t,e){function n(e){return t.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},n(e)}t.exports=n},function(t,e,n){var r=n(69),i=n(70),a=n(42),o=n(71);t.exports=function(t){return r(t)||i(t)||a(t)||o()}},function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e){function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}t.exports=function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}},function(t,e,n){var r=n(47);t.exports=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&r(t,e)}},function(t,e,n){var r=n(30),i=n(27);t.exports=function(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?i(t):e}},function(t,e){t.exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}},function(t,e,n){var r=n(100),i=n(101),a=n(38),o=n(102);t.exports=function(t){return r(t)||i(t)||a(t)||o()}},function(t,e,n){var r=n(64),i=n(65),a=n(38),o=n(66);t.exports=function(t,e){return r(t)||i(t,e)||a(t,e)||o()}},function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e){function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}t.exports=function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}},function(t,e,n){var r=n(72),i=n(73),a=n(42),o=n(74);t.exports=function(t,e){return r(t)||i(t,e)||a(t,e)||o()}},,,function(t,e){function n(e){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?t.exports=n=function(t){return typeof t}:t.exports=n=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(e)}t.exports=n},function(t,e){t.exports=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}},,function(t,e){t.exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}},function(t,e,n){var r=n(45),i=n(79);function a(e,n,o){return i()?t.exports=a=Reflect.construct:t.exports=a=function(t,e,n){var i=[null];i.push.apply(i,e);var a=new(Function.bind.apply(t,i));return n&&r(a,n.prototype),a},a.apply(null,arguments)}t.exports=a},function(t,e,n){},function(t,e){function n(e){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?t.exports=n=function(t){return typeof t}:t.exports=n=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(e)}t.exports=n},function(t,e,n){var r=n(106);function i(e,n,a){return"undefined"!=typeof Reflect&&Reflect.get?t.exports=i=Reflect.get:t.exports=i=function(t,e,n){var i=r(t,e);if(i){var a=Object.getOwnPropertyDescriptor(i,e);return a.get?a.get.call(n):a.value}},i(e,n,a||e)}t.exports=i},,,function(t,e){function n(e){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?t.exports=n=function(t){return typeof t}:t.exports=n=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(e)}t.exports=n},function(t,e,n){t.exports=n(63)},function(t,e,n){t.exports=n(67)},function(t,e){function n(e){return t.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},n(e)}t.exports=n},function(t,e,n){var r=n(39);t.exports=function(t,e){if(t){if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}}},function(t,e){t.exports=function(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}},function(t,e){function n(e,r){return t.exports=n=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},n(e,r)}t.exports=n},function(t,e){t.exports=function(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}},function(t,e,n){var r=n(41);t.exports=function(t,e){if(t){if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}}},function(t,e){t.exports=function(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}},function(t,e,n){var r=n(43);t.exports=function(t,e){if(t){if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}}},function(t,e){function n(e,r){return t.exports=n=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},n(e,r)}t.exports=n},function(t,e,n){},function(t,e){function n(e,r){return t.exports=n=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},n(e,r)}t.exports=n},function(t,e){function n(t,e,n,r,i,a,o){try{var c=t[a](o),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(r,i)}t.exports=function(t){return function(){var e=this,r=arguments;return new Promise((function(i,a){var o=t.apply(e,r);function c(t){n(o,i,a,c,u,"next",t)}function u(t){n(o,i,a,c,u,"throw",t)}c(void 0)}))}}},function(t,e){function n(t,e,n,r,i,a,o){try{var c=t[a](o),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(r,i)}t.exports=function(t){return function(){var e=this,r=arguments;return new Promise((function(i,a){var o=t.apply(e,r);function c(t){n(o,i,a,c,u,"next",t)}function u(t){n(o,i,a,c,u,"throw",t)}c(void 0)}))}}},function(t,e,n){var r=n(40),i=n(68);function a(e,n,o){return i()?t.exports=a=Reflect.construct:t.exports=a=function(t,e,n){var i=[null];i.push.apply(i,e);var a=new(Function.bind.apply(t,i));return n&&r(a,n.prototype),a},a.apply(null,arguments)}t.exports=a},function(t,e,n){var r=n(40);t.exports=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&r(t,e)}},function(t,e,n){var r=n(24),i=n(75);t.exports=function(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?i(t):e}},function(t,e,n){window,t.exports=function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";n.r(e);var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=function(t,e){t.forEach((function(t){null!=t&&(e[t]=1)}))},a=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._set={},i(e,this._set)}return r(t,[{key:"append",value:function(t){return i(t,this._set),this}},{key:"toArray",value:function(){return Object.keys(this._set)}}],[{key:"difference",value:function(e,n){var r=void 0,i=[],a=e._set,o=n._set;for(r in a)({}).hasOwnProperty.call(a,r)&&(r in o||i.push(r));return new t(i)}}]),t}(),o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function u(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}var s=function(t){if("object"===(void 0===t?"undefined":c(t))){if(null===t)return!1;if("[object Object]"===Object.prototype.toString.call(t))return"Object"===(t.constructor.toString().match(/^function (.*)\(\)/m)||[])[1]}return!1},l="undefined"==typeof window?{}:window,f=l.requestAnimationFrame||l.webkitRequestAnimationFrame||l.mozRequestAnimationFrame||l.oRequestAnimationFrame||l.msRequestAnimationFrame||function(t){setTimeout(t,16)},h=function t(){return t.__lastTime===(new Date).getTime()?t.__lastTime.toString()+(t.__id++).toString():(t.__id=0,(t.__lastTime=(new Date).getTime()).toString()+(t.__id++).toString())},d=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=[];return e.forEach((function(t){return r.push.apply(r,u(t))})),r},p=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return{dependencies:e.slice(0,e.length-1),fn:e[e.length-1]}},g=function(t){var e=[],n={};return t.forEach((function(t){return n[t.qualifiedName]=-1})),function t(r){r.forEach((function(r){var i,a=void 0,o=void 0,c=void 0;(i=r.qualifiedName)in n?-1!==(a=n[i])&&a!==e.length-1&&(o=e.slice(0,a),c=e.slice(a+1),e=o.concat(c),c.forEach((function(t,e){return n[t.qualifiedName]=e+o.length})),n[i]=e.push(r)-1):n[i]=e.push(r)-1,t(r.outgoingEdges)}))}(t),e},v=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];var r={};return e.forEach((function(t){Object.assign(r,function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}({},t.name,t.value))})),r},y=function(t){return t.value},m=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.fn=e,this.dep=[]}return o(t,[{key:"addDependencies",value:function(){var t;return(t=this.dep).push.apply(t,arguments),this}},{key:"getDependencies",value:function(){return this.dep}},{key:"get",value:function(){return this.fn}}]),t}(),b=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();function x(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}var w=function(){function t(e,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),r=r||{},this.name=e,this.qualifiedName=n,this.edges=[],this.outgoingEdges=[],this._seed=null,this.requireResolve=!0,this.retriever=r.retriever,this.history=[],this.resolver=null,this.electricEdges=[]}return b(t,[{key:"addDependencies",value:function(){for(var t,e=this,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=this.edges).push.apply(t,r),r.forEach((function(t){return t.outgoingEdges.push(e)})),this}},{key:"addElectricNode",value:function(t){return this.electricEdges.push(t),this}},{key:"resolve",value:function(){return this.seed=this.resolver.apply(this,x(this.retrieveDetails())),this.history.push(this.seed),this.requireResolve=!1,this}},{key:"retrieveDetails",value:function(){return 0===this.edges.length?[{name:this.name,qualifiedName:this.qualifiedName,value:this.seed}]:this.retriever.apply(this,x(this.edges.map((function(t){return t.qualifiedName}))))}},{key:"repeatHead",value:function(){var t=this.history,e=t[t.length-1];return 0===t.length||t.push(e),this}},{key:"flush",value:function(){var t=this.history,e=t[t.length-1];return t.length=0,t.push(e),this}},{key:"isRoot",value:function(){return null===this.name}},{key:"seed",get:function(){return this._seed},set:function(t){return this._seed=t,this.requireResolve=!0,this}}]),t}(),_=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),k=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.edges=[],this.listeners={nextFrame:[],currentFrame:[]}}return _(t,[{key:"addEdges",value:function(){var t;return(t=this.edges).push.apply(t,arguments),this}},{key:"regListenerForCurrFrame",value:function(t){var e=this,n=this.listeners.currentFrame,r=n.push(function(t,e){var n=function(){e.apply(void 0,u(t.map((function(t){var e=t.history,n=e.length-1;return[e[n-1<0?0:n-1],e[n]]}))))};return n.__id=h(),n}(this.edges,t))-1;return function(){e.listeners.currentFrame=n.filter((function(t,e){return e!==r}))}}},{key:"regListenerForNextFrame",value:function(t){var e=this,n=this.listeners.nextFrame,r=n.push(function(t,e){var n=function(){e.apply(void 0,u(t.map((function(t){var e=t.history;return[e[0],e[e.length-1]]}))))};return n.__id=h(),n}(this.edges,t))-1;return function(){e.listeners.nextFrame=n.filter((function(t,e){return e!==r}))}}},{key:"hasNextFrameListener",value:function(){return!!this.listeners.nextFrame.length}}]),t}(),S=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();function M(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}var E=function(){function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.qualifiedNodeMap={},this.retriever=function(t){return function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];return n.map((function(e){var n=t[e];return{name:n.name,qualifiedName:n.qualifiedName,value:n.seed}}))}}(this.qualifiedNodeMap),this.root=new w(null,null,{retriever:this.retriever}),this.root.resolver=v,this._wholeSet=null,this._propagate=!0,this.propagationOverride={currentFrameListeners:!1,nextFrameListeners:!1},this._schedule=function(t){var e=[],n=null;return t=t&&"function"==typeof t&&t||function(){},function(r,i){[].push.apply(e,r),null===n&&(n=f((function(){var r=e.slice(0);e.length=0,n=null,function(t){return t.reduce((function(t,e){return e.__id in t.map||(t.map[e.__id]=1,t.unique.push(e)),t}),{map:{},unique:[]}).unique}(r).forEach((function(t){return t()})),t(i)})))}}((function(t){var n=void 0;for(n in t.flushTarget){if(!{}.hasOwnProperty.call(e.qualifiedNodeMap,n))return;e.qualifiedNodeMap[n].flush()}}))}return S(t,[{key:"createNodesFrom",value:function(t,e){var n=void 0,r=void 0,i=this.qualifiedNodeMap,o=this.root,c=this.retriever;return function t(e,r,a){var u=void 0,l=void 0,f=void 0,h=void 0;for(u in e)if({}.hasOwnProperty.call(e,u))if(h=new w(u,l=""+r+u,{retriever:c}),i[l]=h,void 0!==(f=a.perv)?f.addDependencies(h):o.addDependencies(h),s(n=e[u]))t(n,""+r+u+".",{perv:h}),h.resolver=v;else if(n instanceof m){var d;h.resolver=n.get(),(d=h).addDependencies.apply(d,M(n.getDependencies().map((function(t){return i[t]}))))}else h.resolver=y,h.seed=n}(t,null===e?"":e+".",{perv:i[e]}),this._wholeSet=new a(Object.keys(this.qualifiedNodeMap)),(r=this.constructor.getResolvedList(o).concat(o).filter((function(t){return t.requireResolve}))).forEach((function(t){return t.resolve()})),g(r).forEach((function(t){return t.resolve()})),this}},{key:"getNodeValue",value:function(t){if(t in this.qualifiedNodeMap)return this.qualifiedNodeMap[t].seed}},{key:"createElectricNodeOf",value:function(t,e){var n,r=this,i=t.map((function(t){return r.qualifiedNodeMap[t]})),a=(n=new k).addEdges.apply(n,M(i));return i.forEach((function(t){return t.addElectricNode(a)})),a["regListenerFor"+e.type](e.fn)}},{key:"update",value:function(){for(var t=void 0,e=void 0,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];var o=[],c=r.map((function(t){return t[0].seed=t[1],t[0]}));return c.forEach((function(t){return t.resolve()})),o.push.apply(o,M(d.apply(void 0,M(c.map((function(t){return t.electricEdges})))))),t=new a(c.map((function(t){return t.qualifiedName}))),this._propagate?((e=g(c)).forEach((function(t){return t.resolve()})),t.append(e.map((function(t){return t.qualifiedName}))),o.push.apply(o,M(d.apply(void 0,M(e.map((function(t){return t.electricEdges})))))),this.__execUniqueElectricEdges(Array.from(new Set(o)),t),this):(this.__execUniqueElectricEdges(o),this._propagate=!0,this)}},{key:"__execUniqueElectricEdges",value:function(t,e){var n=this,r=[],i=[];return e&&a.difference(this._wholeSet,e).toArray().forEach((function(t){return n.qualifiedNodeMap[t].repeatHead()})),t.forEach((function(t){r.push.apply(r,M(t.listeners.currentFrame))})),t.forEach((function(t){i.push.apply(i,M(t.listeners.nextFrame))})),!this.propagationOverride.currentFrameListeners&&r.forEach((function(t){return t()})),!this.propagationOverride.nextFrameListeners&&this._schedule(i,{flushTarget:e}),this.resetPropagationOverride(),this}},{key:"resetNodeValue",value:function(){for(var t=this,e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n.map((function(e){return t.qualifiedNodeMap[e]})).map((function(t){return[t,t.seed]}));return this.update.apply(this,M(i)),this}},{key:"stopPropagation",value:function(){return this._propagate=!1,this}},{key:"resetPropagationOverride",value:function(){return this.propagationOverride.currentFrameListeners=!1,this.propagationOverride.nextFrameListeners=!1,this}},{key:"setPropagationOverride",value:function(t){return this.propagationOverride[t+"Listeners"]=!0,this}},{key:"getNodeFromQualifiedName",value:function(t){return this.qualifiedNodeMap[t]}}],[{key:"getResolvedList",value:function(t){var e=[];return function t(e,n,r){var i=void 0;e.edges.forEach((function(e){t(e,n,r)})),e.isRoot()||(i=e.qualifiedName)in r||(n.push(e),r[i]=1)}(t,e,{}),e}}]),t}(),C=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();function A(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}var P=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._graph=new E,this._lockFlag=!1,this._reqQ=[]}return C(t,[{key:"append",value:function(){var t=void 0,e=void 0;return 1===arguments.length?(t=null,e=arguments.length<=0?void 0:arguments[0]):(t=arguments.length<=0?void 0:arguments[0],e=arguments.length<=1?void 0:arguments[1]),this._addPropInModel(t,e),this}},{key:"calculatedProp",value:function(){var t,e,n,r=void 0,i=void 0,a=void 0;return arguments.length>2?(i=arguments.length<=0?void 0:arguments[0],r=arguments.length<=1?void 0:arguments[1],a=arguments.length<=2?void 0:arguments[2]):(i=null,r=arguments.length<=0?void 0:arguments[0],a=arguments.length<=1?void 0:arguments[1]),e=a(p),(t=n=new m(e.fn)).addDependencies.apply(t,A(e.dependencies)),this._addPropInModel(i,function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}({},r,n)),this}},{key:"_addPropInModel",value:function(t,e){return this._graph.createNodesFrom(e,t),this}},{key:"on",value:function(t,e,n){var r,i=t instanceof Array?t:[t],a=this._graph.createElectricNodeOf(i,{type:"CurrFrame",fn:e});return n&&(r=this._graph.stopPropagation().setPropagationOverride("nextFrame")).resetNodeValue.apply(r,A(t)),a}},{key:"next",value:function(t,e,n){var r,i=t instanceof Array?t:[t],a=this._graph.createElectricNodeOf(i,{type:"NextFrame",fn:e});return n&&(r=this._graph.stopPropagation().setPropagationOverride("currentFrame")).resetNodeValue.apply(r,A(t)),a}},{key:"lock",value:function(){return this._lockFlag=!0,this._reqQ.length=0,this}},{key:"unlock",value:function(){return this._lockFlag=!1,this.setProp.apply(this,A(this._reqQ)),this._reqQ.length=0,this}},{key:"prop",value:function(){var t,e=void 0,n=void 0;switch(t=arguments.length){case 1:e=arguments.length<=0?void 0:arguments[0];break;case 2:e=arguments.length<=0?void 0:arguments[0],n=arguments.length<=1?void 0:arguments[1];break;default:return this}return 2===t?(this._lockFlag?this._reqQ.push([e,n]):this.setProp([e,n]),this):this._graph.getNodeValue(e)}},{key:"setProp",value:function(){for(var t,e=this,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];return 0===r.length||(t=this._graph).update.apply(t,A(r.map((function(t){return[e._graph.getNodeFromQualifiedName(t[0]),t[1]]})))),this}},{key:"graph",value:function(){return this._graph}},{key:"serialize",value:function(){return this._graph.root.seed}}],[{key:"create",value:function(e){return(new t)._addPropInModel(null,e)}}]),t}();e.default=P}])},function(t,e,n){var r=n(97);t.exports=function(t,e){if(null==t)return{};var n,i,a=r(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}},function(t){t.exports=JSON.parse('{"name":"muze","private":true,"version":"2.0.0","description":"Composable visualisation library for web with a data-first approach","homepage":"https://muzejs.org","author":"Muzejs.org (https://muzejs.org/)","license":"MIT","contributors":[{"name":"Akash Ghoswami","email":"akashgoswami90s@gmail.com"},{"name":"Ranajit Banerjee","email":"ranajit.113124@gmail.com","url":"https://github.com/ranajitbanerjee"},{"name":"Mridul Meharia","email":"mehariamridul@gmail.com","url":"https://github.com/mridulmeh"},{"name":"Subhash Haldar"},{"name":"Sandeep Acharya"},{"name":"Rousan Ali","email":"rousanali786@gmail.com","url":"https://rousan.io"},{"name":"Ujjal Kumar Dutta","email":"duttaujjal143@gmail.com"}],"main":"src/index.js","keywords":["muze","svg","vector","graphics","data-visualization","visualization","renderer","fusioncharts","relational","algebra","relation"],"repository":{"type":"git","url":"https://github.com/chartshq/muze"},"dependencies":{"@babel/runtime":"^7.10.2","@chartshq/layout":"^1.0.0","@chartshq/muze-firebolt":"^1.0.0","@chartshq/muze-legend":"^1.0.0","@chartshq/visual-cell":"^1.0.0","@chartshq/visual-group":"^1.0.0","@chartshq/visual-layer":"^1.0.0","@chartshq/visual-unit":"^1.0.0","muze-utils":"^1.0.0"}}')},function(t,e,n){var r=n(47),i=n(99);function a(e,n,o){return i()?t.exports=a=Reflect.construct:t.exports=a=function(t,e,n){var i=[null];i.push.apply(i,e);var a=new(Function.bind.apply(t,i));return n&&r(a,n.prototype),a},a.apply(null,arguments)}t.exports=a},,,,,,function(t,e,n){var r=/(^|[/\\])(muze\.js)([?#].*)?$/gi;""===n.p&&(n.p=function(){var t,e,n=window.document.getElementsByTagName("script"),i=n.length;for(e=0;e<i;e+=1)if(null!=(t=n[e].getAttribute("src"))&&null!==t.match(r))return t.replace(r,"$1");return""}())},function(t,e,n){var r=function(t){"use strict";var e=Object.prototype,n=e.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",o=r.toStringTag||"@@toStringTag";function c(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,n){return t[e]=n}}function u(t,e,n,r){var i=e&&e.prototype instanceof f?e:f,a=Object.create(i.prototype),o=new k(r||[]);return a._invoke=function(t,e,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return M()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var c=x(o,n);if(c){if(c===l)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=s(t,e,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(t,n,o),a}function s(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function h(){}function d(){}var p={};p[i]=function(){return this};var g=Object.getPrototypeOf,v=g&&g(g(S([])));v&&v!==e&&n.call(v,i)&&(p=v);var y=d.prototype=f.prototype=Object.create(p);function m(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){var r;this._invoke=function(i,a){function o(){return new e((function(r,o){!function r(i,a,o,c){var u=s(t[i],t,a);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==typeof f&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){r("next",t,o,c)}),(function(t){r("throw",t,o,c)})):e.resolve(f).then((function(t){l.value=t,o(l)}),(function(t){return r("throw",t,o,c)}))}c(u.arg)}(i,a,r,o)}))}return r=r?r.then(o,o):o()}}function x(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,x(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var r=s(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,l;var i=r.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function w(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function _(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(w,this),this.reset(!0)}function S(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,a=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return a.next=a}}return{next:M}}function M(){return{value:void 0,done:!0}}return h.prototype=y.constructor=d,d.constructor=h,h.displayName=c(d,o,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,c(t,o,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},m(b.prototype),b.prototype[a]=function(){return this},t.AsyncIterator=b,t.async=function(e,n,r,i,a){void 0===a&&(a=Promise);var o=new b(u(e,n,r,i),a);return t.isGeneratorFunction(n)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},m(y),c(y,o,"Generator"),y[i]=function(){return this},y.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=S,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return o.type="throw",o.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=t,o.arg=e,a?(this.method="next",this.next=a.finallyLoc,l):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),_(n),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;_(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:S(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),l}},t}(t.exports);try{regeneratorRuntime=r}catch(t){Function("r","regeneratorRuntime = r")(r)}},function(t,e){t.exports=function(t){if(Array.isArray(t))return t}},function(t,e){t.exports=function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,i=!1,a=void 0;try{for(var o,c=t[Symbol.iterator]();!(r=(o=c.next()).done)&&(n.push(o.value),!e||n.length!==e);r=!0);}catch(t){i=!0,a=t}finally{try{r||null==c.return||c.return()}finally{if(i)throw a}}return n}}},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(t,e,n){var r=function(t){"use strict";var e=Object.prototype,n=e.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",o=r.toStringTag||"@@toStringTag";function c(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,n){return t[e]=n}}function u(t,e,n,r){var i=e&&e.prototype instanceof f?e:f,a=Object.create(i.prototype),o=new k(r||[]);return a._invoke=function(t,e,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return M()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var c=x(o,n);if(c){if(c===l)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=s(t,e,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(t,n,o),a}function s(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function h(){}function d(){}var p={};p[i]=function(){return this};var g=Object.getPrototypeOf,v=g&&g(g(S([])));v&&v!==e&&n.call(v,i)&&(p=v);var y=d.prototype=f.prototype=Object.create(p);function m(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){var r;this._invoke=function(i,a){function o(){return new e((function(r,o){!function r(i,a,o,c){var u=s(t[i],t,a);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==typeof f&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){r("next",t,o,c)}),(function(t){r("throw",t,o,c)})):e.resolve(f).then((function(t){l.value=t,o(l)}),(function(t){return r("throw",t,o,c)}))}c(u.arg)}(i,a,r,o)}))}return r=r?r.then(o,o):o()}}function x(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,x(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var r=s(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,l;var i=r.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function w(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function _(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(w,this),this.reset(!0)}function S(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,a=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return a.next=a}}return{next:M}}function M(){return{value:void 0,done:!0}}return h.prototype=y.constructor=d,d.constructor=h,h.displayName=c(d,o,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,c(t,o,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},m(b.prototype),b.prototype[a]=function(){return this},t.AsyncIterator=b,t.async=function(e,n,r,i,a){void 0===a&&(a=Promise);var o=new b(u(e,n,r,i),a);return t.isGeneratorFunction(n)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},m(y),c(y,o,"Generator"),y[i]=function(){return this},y.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=S,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return o.type="throw",o.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=t,o.arg=e,a?(this.method="next",this.next=a.finallyLoc,l):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),_(n),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;_(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:S(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),l}},t}(t.exports);try{regeneratorRuntime=r}catch(t){Function("r","regeneratorRuntime = r")(r)}},function(t,e){t.exports=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}},function(t,e,n){var r=n(41);t.exports=function(t){if(Array.isArray(t))return r(t)}},function(t,e){t.exports=function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(t,e){t.exports=function(t){if(Array.isArray(t))return t}},function(t,e){t.exports=function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,i=!1,a=void 0;try{for(var o,c=t[Symbol.iterator]();!(r=(o=c.next()).done)&&(n.push(o.value),!e||n.length!==e);r=!0);}catch(t){i=!0,a=t}finally{try{r||null==c.return||c.return()}finally{if(i)throw a}}return n}}},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(t,e){t.exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}},function(t,e,n){var r=n(43);t.exports=function(t){if(Array.isArray(t))return r(t)}},function(t,e){t.exports=function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(t,e){t.exports=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}},function(t,e){t.exports=function(t){if(Array.isArray(t))return t}},function(t,e){t.exports=function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,i=!1,a=void 0;try{for(var o,c=t[Symbol.iterator]();!(r=(o=c.next()).done)&&(n.push(o.value),!e||n.length!==e);r=!0);}catch(t){i=!0,a=t}finally{try{r||null==c.return||c.return()}finally{if(i)throw a}}return n}}},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(t,e,n){},function(t,e,n){var r=n(2);t.exports=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=r(t)););return t}},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e){t.exports=function(t,e){if(null==t)return{};var n,r,i={},a=Object.keys(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}},function(t,e,n){},function(t,e){t.exports=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}},function(t,e,n){var r=n(39);t.exports=function(t){if(Array.isArray(t))return r(t)}},function(t,e){t.exports=function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){var r=n(10);t.exports=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=r(t)););return t}},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){"use strict";n.r(e);var r={};n.r(r),n.d(r,"scaleLinear",(function(){return yn})),n.d(r,"scaleThreshold",(function(){return In})),n.d(r,"scaleLog",(function(){return En})),n.d(r,"scalePow",(function(){return An})),n.d(r,"scaleIdentity",(function(){return mn})),n.d(r,"scaleOrdinal",(function(){return Yt})),n.d(r,"scaleSequential",(function(){return ra})),n.d(r,"scaleQuantize",(function(){return Dn})),n.d(r,"scaleQuantile",(function(){return Pn})),n.d(r,"schemeCategory10",(function(){return Bi})),n.d(r,"schemeCategory20",(function(){return Hi})),n.d(r,"schemeCategory20b",(function(){return zi})),n.d(r,"scaleBand",(function(){return Xt})),n.d(r,"scaleTime",(function(){return Ni}));var i={};n.r(i),n.d(i,"schemeDark2",(function(){return aa})),n.d(i,"schemePaired",(function(){return oa})),n.d(i,"schemeAccent",(function(){return ca})),n.d(i,"schemePastel1",(function(){return ua})),n.d(i,"schemePastel2",(function(){return sa})),n.d(i,"schemeSet1",(function(){return la})),n.d(i,"schemeSet2",(function(){return fa})),n.d(i,"schemeSet3",(function(){return ha})),n.d(i,"schemeBlues",(function(){return pa})),n.d(i,"schemeBrBG",(function(){return va})),n.d(i,"schemePRGn",(function(){return ma})),n.d(i,"schemePiYG",(function(){return xa})),n.d(i,"interpolateBrBG",(function(){return ya})),n.d(i,"interpolatePRGn",(function(){return ba})),n.d(i,"interpolatePiYG",(function(){return wa})),n.d(i,"interpolatePuOr",(function(){return _a})),n.d(i,"interpolateRdBu",(function(){return ka})),n.d(i,"interpolateRdGy",(function(){return Sa})),n.d(i,"interpolateRdYlBu",(function(){return Ma})),n.d(i,"interpolateRdYlGn",(function(){return Ea})),n.d(i,"interpolateSpectral",(function(){return Ca})),n.d(i,"interpolateBlues",(function(){return ga})),n.d(i,"interpolateGreens",(function(){return Aa})),n.d(i,"interpolateGreys",(function(){return Pa})),n.d(i,"interpolateOranges",(function(){return Da})),n.d(i,"interpolatePurples",(function(){return Ia})),n.d(i,"interpolateReds",(function(){return Ta})),n.d(i,"interpolateViridis",(function(){return Na})),n.d(i,"interpolateInferno",(function(){return Fa})),n.d(i,"interpolateMagma",(function(){return Oa})),n.d(i,"interpolatePlasma",(function(){return La})),n.d(i,"interpolateWarm",(function(){return ja})),n.d(i,"interpolateCool",(function(){return Ba})),n.d(i,"interpolateCubehelixDefault",(function(){return Wa})),n.d(i,"interpolateBuGn",(function(){return Va})),n.d(i,"interpolateBuPu",(function(){return Ua})),n.d(i,"interpolateGnBu",(function(){return Ga})),n.d(i,"interpolateOrRd",(function(){return qa})),n.d(i,"interpolatePuBuGn",(function(){return Ya})),n.d(i,"interpolatePuBu",(function(){return Xa})),n.d(i,"interpolatePuRd",(function(){return Ka})),n.d(i,"interpolateRdPu",(function(){return $a})),n.d(i,"interpolateYlGnBu",(function(){return Qa})),n.d(i,"interpolateYlGn",(function(){return Za})),n.d(i,"interpolateYlOrBr",(function(){return Ja})),n.d(i,"interpolateYlOrRd",(function(){return to})),n.d(i,"interpolateRainbow",(function(){return Ha}));var a={};n.r(a),n.d(a,"UNIT_GLOBAL_NAMESPACE",(function(){return eo})),n.d(a,"UNIT_LOCAL_NAMESPACE",(function(){return no})),n.d(a,"LAYER_LOCAL_NAMESPACE",(function(){return ro})),n.d(a,"LAYER_GLOBAL_NAMESPACE",(function(){return io})),n.d(a,"GROUP_GLOBAL_NAMESPACE",(function(){return ao})),n.d(a,"GROUP_LOCAL_NAMESPACE",(function(){return oo})),n.d(a,"CANVAS_LOCAL_NAMESPACE",(function(){return co})),n.d(a,"CANVAS_GLOBAL_NAMESPACE",(function(){return uo}));var o={};n.r(o),n.d(o,"getDataStore",(function(){return vt})),n.d(o,"DataStore",(function(){return gt})),n.d(o,"DataModel",(function(){return at})),n.d(o,"ReservedFields",(function(){return ot})),n.d(o,"CommonProps",(function(){return ct})),n.d(o,"COORD_TYPES",(function(){return ut})),n.d(o,"STATE_NAMESPACES",(function(){return a})),n.d(o,"scales",(function(){return r})),n.d(o,"colorSchemes",(function(){return i})),n.d(o,"deepEquals",(function(){return Wl})),n.d(o,"getNearestValue",(function(){return gs})),n.d(o,"getValueParser",(function(){return El})),n.d(o,"transformColor",(function(){return jl})),n.d(o,"transformColors",(function(){return qs})),n.d(o,"detectColor",(function(){return tl})),n.d(o,"hslToRgb",(function(){return Ks})),n.d(o,"rgbToHsv",(function(){return $s})),n.d(o,"hexToHsv",(function(){return Zs})),n.d(o,"hsvToRgb",(function(){return Qs})),n.d(o,"hslaToRgb",(function(){return Js})),n.d(o,"escapeHTML",(function(){return cl})),n.d(o,"angleToRadian",(function(){return zs})),n.d(o,"generateGetterSetters",(function(){return Ps})),n.d(o,"getArraySum",(function(){return Ds})),n.d(o,"ERROR_MSG",(function(){return Os})),n.d(o,"interpolator",(function(){return Ws})),n.d(o,"colorInterpolator",(function(){return Us})),n.d(o,"numberInterpolator",(function(){return Vs})),n.d(o,"piecewiseInterpolator",(function(){return Ys})),n.d(o,"reqAnimFrame",(function(){return ys})),n.d(o,"cancelAnimFrame",(function(){return ms})),n.d(o,"nextAnimFrame",(function(){return Ml})),n.d(o,"getMax",(function(){return is})),n.d(o,"getMin",(function(){return as})),n.d(o,"getDomainFromData",(function(){return os})),n.d(o,"getUniqueId",(function(){return ts})),n.d(o,"mergeRecursive",(function(){return Fs})),n.d(o,"unionDomain",(function(){return us})),n.d(o,"replaceCSSPrefix",(function(){return Hs})),n.d(o,"symbolFns",(function(){return ss})),n.d(o,"defaultValue",(function(){return ks})),n.d(o,"easeFns",(function(){return ls})),n.d(o,"clone",(function(){return es})),n.d(o,"interpolateArray",(function(){return js})),n.d(o,"getMinPoint",(function(){return hs})),n.d(o,"getMaxPoint",(function(){return ds})),n.d(o,"getClosestIndexOf",(function(){return ps})),n.d(o,"registerListeners",(function(){return al})),n.d(o,"Voronoi",(function(){return Es})),n.d(o,"checkExistence",(function(){return ns})),n.d(o,"sanitizeIP",(function(){return rs})),n.d(o,"getMinDiff",(function(){return ws})),n.d(o,"capitalizeFirst",(function(){return bs})),n.d(o,"getWindow",(function(){return vs})),n.d(o,"getQualifiedClassName",(function(){return _s})),n.d(o,"getDependencyOrder",(function(){return Ss})),n.d(o,"objectIterator",(function(){return Ms})),n.d(o,"intSanitizer",(function(){return As})),n.d(o,"enableChainedTransaction",(function(){return Rs})),n.d(o,"isHTMLElem",(function(){return Ns})),n.d(o,"isEqual",(function(){return Ts})),n.d(o,"isSimpleObject",(function(){return Ju})),n.d(o,"nextFrame",(function(){return Bs})),n.d(o,"getObjProp",(function(){return Cs})),n.d(o,"getDataModelFromIdentifiers",(function(){return il})),n.d(o,"getDataModelFromRange",(function(){return nl})),n.d(o,"transposeArray",(function(){return ul})),n.d(o,"toArray",(function(){return sl})),n.d(o,"extendsClass",(function(){return ll})),n.d(o,"assembleModelFromIdentifiers",(function(){return el})),n.d(o,"isValidValue",(function(){return ol})),n.d(o,"nestCollection",(function(){return gl})),n.d(o,"stack",(function(){return pl})),n.d(o,"getSymbol",(function(){return fl})),n.d(o,"Scales",(function(){return bl})),n.d(o,"Symbols",(function(){return ml})),n.d(o,"pathInterpolators",(function(){return yl})),n.d(o,"hslInterpolator",(function(){return Gs})),n.d(o,"getSmallestDiff",(function(){return xl})),n.d(o,"require",(function(){return Sl})),n.d(o,"formatTemporal",(function(){return kl})),n.d(o,"createSelection",(function(){return Ls})),n.d(o,"retrieveNearestGroupByReducers",(function(){return Cl})),n.d(o,"retrieveFieldDisplayName",(function(){return Al})),n.d(o,"sanitizeDomainWhenEqual",(function(){return cs})),n.d(o,"sortCategoricalData",(function(){return Pl})),n.d(o,"sortCategoricalField",(function(){return Il})),n.d(o,"intersect",(function(){return Tl})),n.d(o,"partition",(function(){return Nl})),n.d(o,"mix",(function(){return Ol})),n.d(o,"componentRegistry",(function(){return Fl})),n.d(o,"getArrayDiff",(function(){return vl})),n.d(o,"difference",(function(){return Rl})),n.d(o,"getArrayIndexMap",(function(){return rl})),n.d(o,"arraysEqual",(function(){return Is})),n.d(o,"getReadableTicks",(function(){return Ll})),n.d(o,"unique",(function(){return xs})),n.d(o,"getQueryFromTarget",(function(){return zl})),n.d(o,"pointWithinCircle",(function(){return Bl})),n.d(o,"getIndexMap",(function(){return Hl})),n.d(o,"d3Hsl",(function(){return Se})),n.d(o,"selectElement",(function(){return Od})),n.d(o,"makeElement",(function(){return Fd})),n.d(o,"applyStyle",(function(){return Ld})),n.d(o,"addClass",(function(){return Hd})),n.d(o,"removeClass",(function(){return Wd})),n.d(o,"appendElement",(function(){return jd})),n.d(o,"setAttrs",(function(){return zd})),n.d(o,"setStyles",(function(){return Vd})),n.d(o,"createElement",(function(){return Kd})),n.d(o,"createElements",(function(){return Ud})),n.d(o,"clipElement",(function(){return Gd})),n.d(o,"getElementsByClassName",(function(){return qd})),n.d(o,"getMousePos",(function(){return Yd})),n.d(o,"getEvent",(function(){return $d})),n.d(o,"getD3Drag",(function(){return Qd})),n.d(o,"getSmartComputedStyle",(function(){return Zd})),n.d(o,"getClientPoint",(function(){return Xd})),n.d(o,"hasTouch",(function(){return Jd})),n.d(o,"Store",(function(){return dp})),n.d(o,"transactor",(function(){return pp})),n.d(o,"timeMillisecond",(function(){return nr})),n.d(o,"timeSecond",(function(){return tr})),n.d(o,"timeMinute",(function(){return Zn})),n.d(o,"timeHour",(function(){return $n})),n.d(o,"timeDay",(function(){return Xn})),n.d(o,"timeWeek",(function(){return zn})),n.d(o,"timeMonth",(function(){return jn})),n.d(o,"timeYear",(function(){return Fn})),n.d(o,"Smartlabel",(function(){return Np})),n.d(o,"dataSelect",(function(){return qu})),n.d(o,"LifeCycleManager",(function(){return Vp})),n.d(o,"RTree",(function(){return Ao}));var c={};n.r(c),n.d(c,"CLASSPREFIX",(function(){return ng})),n.d(c,"STACK",(function(){return rg})),n.d(c,"GROUP",(function(){return ig})),n.d(c,"IDENTITY",(function(){return ag})),n.d(c,"ANGLE",(function(){return og})),n.d(c,"RADIUS",(function(){return cg})),n.d(c,"SIZE",(function(){return ug})),n.d(c,"COLOR",(function(){return sg})),n.d(c,"SHAPE",(function(){return lg})),n.d(c,"TEXT",(function(){return fg})),n.d(c,"OUTER_RADIUS_VALUE",(function(){return hg})),n.d(c,"TEXT_ANCHOR_MIDDLE",(function(){return dg})),n.d(c,"ENCODING",(function(){return pg})),n.d(c,"STROKE_DASHARRAY",(function(){return gg})),n.d(c,"ASCENDING",(function(){return vg})),n.d(c,"AGG_FN_SUM",(function(){return yg})),n.d(c,"AREA_LAYER",(function(){return mg})),n.d(c,"ARC_LAYER",(function(){return bg})),n.d(c,"LINE_LAYER",(function(){return xg})),n.d(c,"TEXT_LAYER",(function(){return wg})),n.d(c,"POINT_LAYER",(function(){return _g})),n.d(c,"BAR_LAYER",(function(){return kg})),n.d(c,"TICK_LAYER",(function(){return Sg})),n.d(c,"SIMPLE_LAYER",(function(){return Mg})),n.d(c,"BASE_LAYER",(function(){return Eg}));var u={};n.r(u),n.d(u,"DATA",(function(){return Fg})),n.d(u,"CONFIG",(function(){return Lg})),n.d(u,"MEASUREMENT",(function(){return jg})),n.d(u,"DOMAIN",(function(){return Bg})),n.d(u,"MOUNT",(function(){return zg}));var s={};n.r(s),n.d(s,"BOTTOM",(function(){return Wg})),n.d(s,"TOP",(function(){return Vg})),n.d(s,"LEFT",(function(){return Ug})),n.d(s,"RIGHT",(function(){return Gg})),n.d(s,"axisOrientationMap",(function(){return qg}));var l={};n.r(l),n.d(l,"LINEAR",(function(){return Yg})),n.d(l,"BAND",(function(){return Xg})),n.d(l,"TIME",(function(){return Kg})),n.d(l,"COLOR",(function(){return $g})),n.d(l,"ORDINAL",(function(){return Qg})),n.d(l,"QUANTIZE",(function(){return Zg})),n.d(l,"QUANTILE",(function(){return Jg})),n.d(l,"LOG",(function(){return tv})),n.d(l,"POW",(function(){return ev})),n.d(l,"IDENTITY",(function(){return nv})),n.d(l,"SEQUENTIAL",(function(){return rv})),n.d(l,"THRESHOLD",(function(){return iv}));var f={};n.r(f),n.d(f,"X",(function(){return Uy})),n.d(f,"Y",(function(){return Gy})),n.d(f,"WIDTH",(function(){return qy})),n.d(f,"HEIGHT",(function(){return Yy})),n.d(f,"MEASUREMENT",(function(){return Xy})),n.d(f,"CONFIG",(function(){return Ky})),n.d(f,"MIN_UNIT_WIDTH",(function(){return $y})),n.d(f,"MIN_UNIT_HEIGHT",(function(){return Qy})),n.d(f,"DIMENSIONS",(function(){return Zy})),n.d(f,"MEASURES",(function(){return Jy})),n.d(f,"DIMENSION",(function(){return tm})),n.d(f,"MEASURE",(function(){return em})),n.d(f,"CONTINUOUS",(function(){return nm})),n.d(f,"BINNED",(function(){return rm})),n.d(f,"PIVOT",(function(){return im})),n.d(f,"FORMAT",(function(){return am})),n.d(f,"MOUNT",(function(){return om})),n.d(f,"HAS_DATA_UPDATED",(function(){return cm})),n.d(f,"ROWS",(function(){return um})),n.d(f,"COLUMNS",(function(){return sm})),n.d(f,"DATA",(function(){return lm})),n.d(f,"COL",(function(){return fm})),n.d(f,"ROW",(function(){return hm})),n.d(f,"COLUMN",(function(){return dm})),n.d(f,"COLOR",(function(){return pm})),n.d(f,"SHAPE",(function(){return gm})),n.d(f,"SIZE",(function(){return vm})),n.d(f,"DETAIL",(function(){return ym})),n.d(f,"LAYERS",(function(){return mm})),n.d(f,"TRANSFORM",(function(){return bm})),n.d(f,"ORDINAL",(function(){return xm})),n.d(f,"LINEAR",(function(){return wm})),n.d(f,"LEFT",(function(){return _m})),n.d(f,"RIGHT",(function(){return km})),n.d(f,"TOP",(function(){return Sm})),n.d(f,"BOTTOM",(function(){return Mm})),n.d(f,"RETINAL",(function(){return Em})),n.d(f,"CELL",(function(){return Cm})),n.d(f,"X_AXES",(function(){return Am})),n.d(f,"Y_AXES",(function(){return Pm})),n.d(f,"ENTRY_CELLS",(function(){return Dm})),n.d(f,"INITIALIZED",(function(){return Im})),n.d(f,"EXIT_CELLS",(function(){return Tm})),n.d(f,"AXIS",(function(){return Rm})),n.d(f,"UNIT",(function(){return Nm})),n.d(f,"UPDATED",(function(){return Om})),n.d(f,"BEFORE_UPDATE",(function(){return Fm})),n.d(f,"VALUE_MATRIX",(function(){return Lm})),n.d(f,"FACET_HEADERS",(function(){return jm})),n.d(f,"RADIUS",(function(){return Bm})),n.d(f,"ANGLE",(function(){return zm})),n.d(f,"ANGLE0",(function(){return Hm})),n.d(f,"ARC",(function(){return Wm})),n.d(f,"CATEGORICAL",(function(){return Vm})),n.d(f,"TEMPORAL",(function(){return Um})),n.d(f,"BAR",(function(){return Gm})),n.d(f,"LINE",(function(){return qm})),n.d(f,"POINT",(function(){return Ym})),n.d(f,"PRIMARY",(function(){return Xm})),n.d(f,"SECONDARY",(function(){return Km})),n.d(f,"BOTH",(function(){return $m})),n.d(f,"INTERACTION",(function(){return Qm})),n.d(f,"GRID_LINES",(function(){return Zm})),n.d(f,"GRID_BANDS",(function(){return Jm})),n.d(f,"HEADER",(function(){return tb})),n.d(f,"FACET",(function(){return eb})),n.d(f,"DEFAULT",(function(){return nb})),n.d(f,"ASCENDING",(function(){return rb})),n.d(f,"DESCENDING",(function(){return ib})),n.d(f,"DARK",(function(){return ab})),n.d(f,"NONE",(function(){return ob})),n.d(f,"NORMAL",(function(){return cb})),n.d(f,"DARKER",(function(){return ub}));var h={};n.r(h),n.d(h,"transformColor",(function(){return Db})),n.d(h,"retrieveEncodingInf",(function(){return Ib})),n.d(h,"encodingFieldInfRetriever",(function(){return Tb})),n.d(h,"transformData",(function(){return Rb})),n.d(h,"getIndividualClassName",(function(){return Nb})),n.d(h,"dataNormalizers",(function(){return Ob})),n.d(h,"getNormalizedData",(function(){return Fb})),n.d(h,"domainCalculator",(function(){return Lb})),n.d(h,"attachDataToVoronoi",(function(){return Bb})),n.d(h,"updateStyle",(function(){return zb})),n.d(h,"animateGroup",(function(){return Hb})),n.d(h,"positionPoints",(function(){return Wb})),n.d(h,"getGroupSpan",(function(){return Vb})),n.d(h,"getPlotMeasurement",(function(){return Ub})),n.d(h,"renderLayer",(function(){return Gb})),n.d(h,"resolveInvalidTransformType",(function(){return qb})),n.d(h,"getValidTransform",(function(){return Yb})),n.d(h,"getValidTransformForAggFn",(function(){return Xb})),n.d(h,"getMarkId",(function(){return Kb})),n.d(h,"resolveEncodingValues",(function(){return $b})),n.d(h,"getColorMetaInf",(function(){return Qb})),n.d(h,"toCartesianCoordinates",(function(){return tx})),n.d(h,"sortData",(function(){return ex})),n.d(h,"getBoundBoxes",(function(){return nx})),n.d(h,"getDataFromEvent",(function(){return rx}));var d={};n.r(d),n.d(d,"prepareDrawingInf",(function(){return dw})),n.d(d,"pointTranslators",(function(){return pw})),n.d(d,"CENTER",(function(){return gw})),n.d(d,"INSIDE",(function(){return vw})),n.d(d,"OUTSIDE",(function(){return yw})),n.d(d,"getStrokeWidthByPosition",(function(){return mw}));var p={};n.r(p),n.d(p,"AREA_LAYER",(function(){return Xw})),n.d(p,"ARC_LAYER",(function(){return Kw})),n.d(p,"LINE_LAYER",(function(){return $w})),n.d(p,"TEXT_LAYER",(function(){return Qw})),n.d(p,"POINT_LAYER",(function(){return Zw})),n.d(p,"BAR_LAYER",(function(){return Jw})),n.d(p,"TICK_LAYER",(function(){return t_})),n.d(p,"SIMPLE_LAYER",(function(){return e_})),n.d(p,"BASE_LAYER",(function(){return n_}));var g={};n.r(g),n.d(g,"PROPS",(function(){return u})),n.d(g,"LAYER_TYPES",(function(){return p})),n.d(g,"CONSTANTS",(function(){return c}));var v={};n.r(v),n.d(v,"getDimensionMeasureMap",(function(){return s_})),n.d(v,"transformDataModels",(function(){return l_})),n.d(v,"getLayerFromDef",(function(){return f_})),n.d(v,"resolveEncodingTransform",(function(){return h_})),n.d(v,"sanitizeLayerDef",(function(){return d_})),n.d(v,"attachDataToLayers",(function(){return p_})),n.d(v,"attachAxisToLayers",(function(){return g_})),n.d(v,"getLayerAxisIndex",(function(){return __})),n.d(v,"unionDomainFromLayers",(function(){return k_})),n.d(v,"renderLayers",(function(){return S_})),n.d(v,"getNearestDimensionalValue",(function(){return M_})),n.d(v,"getLayersBy",(function(){return E_})),n.d(v,"removeLayersBy",(function(){return C_})),n.d(v,"createSideEffectGroup",(function(){return A_})),n.d(v,"createRenderPromise",(function(){return P_})),n.d(v,"getRadiusRange",(function(){return D_})),n.d(v,"setAxisRange",(function(){return I_})),n.d(v,"createRTree",(function(){return T_})),n.d(v,"createTrackerElement",(function(){return R_}));var y={};n.r(y),n.d(y,"CONFIG",(function(){return N_})),n.d(y,"DATA",(function(){return O_})),n.d(y,"AXES",(function(){return F_})),n.d(y,"LAYERDEFS",(function(){return L_})),n.d(y,"WIDTH",(function(){return j_})),n.d(y,"HEIGHT",(function(){return B_})),n.d(y,"MOUNT",(function(){return z_})),n.d(y,"TRANSFORM",(function(){return H_})),n.d(y,"TRANSFORMEDDATA",(function(){return W_})),n.d(y,"DATADOMAIN",(function(){return V_})),n.d(y,"FIELDS",(function(){return U_})),n.d(y,"LAYERAXISINDEX",(function(){return G_})),n.d(y,"LAYERS",(function(){return q_})),n.d(y,"DOMAIN",(function(){return Y_}));var m={};n.r(m),n.d(m,"CLASSPREFIX",(function(){return X_})),n.d(m,"IDFIELD",(function(){return K_})),n.d(m,"GRID_LINE_PARENT_GROUP_CLASS",(function(){return $_})),n.d(m,"GRID_BAND_PARENT_GROUP_CLASS",(function(){return Q_})),n.d(m,"GRID_PARENT_GROUP",(function(){return Z_})),n.d(m,"BAND",(function(){return J_})),n.d(m,"TICK",(function(){return tk})),n.d(m,"GRID_BAND",(function(){return ek})),n.d(m,"GRID_LINE",(function(){return nk})),n.d(m,"CONSOLIDATED",(function(){return rk})),n.d(m,"FRAGMENTED",(function(){return ik})),n.d(m,"FACET_BY_FIELDS",(function(){return ak})),n.d(m,"RETINAL_FIELDS",(function(){return ok})),n.d(m,"PARENT_ALIAS",(function(){return ck})),n.d(m,"LAYERS",(function(){return uk})),n.d(m,"CACHED_DATA",(function(){return sk})),n.d(m,"STORE",(function(){return lk}));var b={};n.r(b),n.d(b,"REACTIVE_PROPS",(function(){return y})),n.d(b,"CONSTANTS",(function(){return m}));var x={};n.r(x),n.d(x,"DRAG",(function(){return fk})),n.d(x,"HOVER",(function(){return hk})),n.d(x,"SELECTIONDRAG",(function(){return dk})),n.d(x,"CLICK",(function(){return pk})),n.d(x,"LONGTOUCH",(function(){return gk})),n.d(x,"TOUCHDRAG",(function(){return vk})),n.d(x,"ALL_ACTIONS",(function(){return yk}));var w={};n.r(w),n.d(w,"BRUSH",(function(){return Ok})),n.d(w,"HIGHLIGHT",(function(){return Fk})),n.d(w,"TOOLTIP",(function(){return Lk})),n.d(w,"FILTER",(function(){return jk})),n.d(w,"SELECT",(function(){return Bk}));var _={};n.r(_),n.d(_,"HighlightBeahviour",(function(){return Hk})),n.d(_,"BrushBehaviour",(function(){return Vk})),n.d(_,"FilterBehaviour",(function(){return Gk})),n.d(_,"SelectBehaviour",(function(){return $k}));var k={};n.r(k),n.d(k,"ANCHORS",(function(){return iS})),n.d(k,"BRUSH_ANCHORS",(function(){return oS})),n.d(k,"PERSISTENT_ANCHORS",(function(){return cS})),n.d(k,"FILTER",(function(){return uS})),n.d(k,"HIGHLIGHTER",(function(){return sS})),n.d(k,"CROSSLINE",(function(){return lS})),n.d(k,"TOOLTIP",(function(){return aS})),n.d(k,"FRAGMENTED_TOOLTIP",(function(){return fS})),n.d(k,"AXIS_LABEL_HIGHLIGHTER",(function(){return hS}));var S={};n.r(S),n.d(S,"SelectionBox",(function(){return _S})),n.d(S,"Tooltip",(function(){return GS})),n.d(S,"FragmentedTooltip",(function(){return YS})),n.d(S,"Crossline",(function(){return KS})),n.d(S,"PlotHighlighter",(function(){return tM})),n.d(S,"FilterEffect",(function(){return nM})),n.d(S,"PersistentAnchors",(function(){return oM})),n.d(S,"BrushAnchors",(function(){return uM})),n.d(S,"AnchorEffect",(function(){return iM})),n.d(S,"AxisLabelHighLighter",(function(){return dM}));var M={};n.r(M),n.d(M,"initStore",(function(){return dE})),n.d(M,"isDistributionEqual",(function(){return pE})),n.d(M,"initializeCacheMaps",(function(){return gE})),n.d(M,"getAxisKey",(function(){return vE})),n.d(M,"getCellKey",(function(){return yE})),n.d(M,"extractUnitConfig",(function(){return mE})),n.d(M,"hasOneField",(function(){return bE})),n.d(M,"getHeaderText",(function(){return xE})),n.d(M,"headerCreator",(function(){return wE})),n.d(M,"sanitizeCheck",(function(){return _E})),n.d(M,"findInGroup",(function(){return kE})),n.d(M,"getAxisType",(function(){return SE})),n.d(M,"retriveDomainFromData",(function(){return ME})),n.d(M,"mutateAxesFromMap",(function(){return EE})),n.d(M,"getEncoder",(function(){return CE})),n.d(M,"getHeaderAxisFrom",(function(){return AE})),n.d(M,"setFacetsAndProjections",(function(){return PE})),n.d(M,"getBorders",(function(){return DE})),n.d(M,"getFieldsFromSuppliedLayers",(function(){return IE})),n.d(M,"extractFields",(function(){return TE})),n.d(M,"sortFacetFields",(function(){return RE})),n.d(M,"removeExitCells",(function(){return NE}));var E={};n.r(E),n.d(E,"getAdjustedDomain",(function(){return aC})),n.d(E,"generateAxisFromMap",(function(){return oC})),n.d(E,"sanitizeIndividualLayerConfig",(function(){return cC})),n.d(E,"mutateAxesFromMap",(function(){return uC})),n.d(E,"getDefaultMark",(function(){return sC})),n.d(E,"createRetinalAxis",(function(){return lC})),n.d(E,"getIndex",(function(){return fC})),n.d(E,"getLayerConfFromFields",(function(){return hC})),n.d(E,"resolveAxisConfig",(function(){return dC})),n.d(E,"getSortingConfig",(function(){return pC}));var C={};n.r(C),n.d(C,"VisualEncoder",(function(){return FE})),n.d(C,"CartesianEncoder",(function(){return mC})),n.d(C,"PolarEncoder",(function(){return MC})),n.d(C,"RetinalEncoder",(function(){return PC}));var A={};n.r(A),n.d(A,"SelectBehaviour",(function(){return nA}));var P={};n.r(P),n.d(P,"SelectionBox",(function(){return LA})),n.d(P,"LegendHighlighter",(function(){return zA})),n.d(P,"LegendMarker",(function(){return YA}));var D={};n.r(D),n.d(D,"share",(function(){return CP})),n.d(D,"html",(function(){return PP}));n(62);var I=n(35),T=n.n(I),R=n(18),N=n.n(R),O=n(48),F=n.n(O),L=n(36),j=n.n(L),B=n(49),z=n.n(B),H=n(50),W=n.n(H),V=n(11),U=n.n(V),G=n(21),q=n.n(G),Y=n(19),X=n.n(Y),K=n(20),$=n.n(K),Q=n(51),Z=n.n(Q),J=n(52),tt=n.n(J),et=n(37),nt=n.n(et),rt=function(t,e,n,r){return new(n||(n=Promise))((function(i,a){function o(t){try{u(r.next(t))}catch(t){a(t)}}function c(t){try{u(r.throw(t))}catch(t){a(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,c)}u((r=r.apply(t,e||[])).next())}))},it=function(t,e){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=e.call(t,o)}catch(t){a=[6,t],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}},at={onReady:function(){return rt(void 0,void 0,void 0,(function(){return it(this,(function(t){switch(t.label){case 0:return"undefined"!=typeof window&&void 0!==n.p&&""===n.p&&(n.p=function(){var t,e,n=/(^|[\/\\])(datamodel\.js)([\?#].*)?$/gi,r=window.document.getElementsByTagName("script"),i=r.length;for(e=0;e<i;e+=1)if(null!=(t=r[e].getAttribute("src"))&&null!==t.match(n))return t.replace(n,"$1");return""}()),[4,n.e(1).then(n.bind(null,124))];case 1:return[2,t.sent().default]}}))}))}},ot={ROW_ID:"__id__",MEASURE_NAMES:"__measure_names__"},ct={ACTION_INF:"actionInf",ON_LAYER_DRAW:"onLayerDraw",MATRIX_CREATED:"matrixCreated"},ut={POLAR:"polar",CARTESIAN:"cartesian"},st="function",lt="string",ft=function(t){return function(t){for(;t;){var e=t.getParent();if(!e)break;t=e}return t}(t.model).getPropagationCriterias()};function ht(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return dt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return dt(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,c=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return o=t.done,t},e:function(t){c=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(c)throw a}}}}function dt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function pt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=nt()(t);if(e){var i=nt()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return tt()(this,n)}}var gt=function(t){Z()(n,t);var e=pt(n);function n(t){var r;X()(this,n);var i=(r=e.call(this)).constructor.DataModel();return r._model=t instanceof i?t:new i(t),r._fieldsConfig=null,r.propagationState=new Map,r._id=r.model.id(),r}return $()(n,[{key:"getField",value:function(t){return this.model.getField(t)}},{key:"getFieldData",value:function(t){return this.model.getField(t).data()}},{key:"select",value:function(){var t,e=this,n=(t=this.model).select.apply(t,arguments);return n instanceof Array?n.map((function(t){return e.clone(t)})):this.clone(n)}},{key:"groupBy",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=this.model.groupBy(t,e);return this.clone(n)}},{key:"sort",value:function(t){var e=this.model._context._fieldMap,n=t.reduce((function(t,n){var r=q()(n,2),i=r[0],a=r[1],o=void 0===a?"asc":a;return void 0===e.get(i)?t:[].concat(U()(t),[[i,o]])}),[]);if(!n.length)return this;var r=this.model.sort(n);return this.clone(r)}},{key:"getData",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.start,n=t.end,r=n?this.model.getData(e,n):this.model.getData(),i=r.data,a=r.schema;if(t.excludeFields){var o=i,c=a;return t.excludeFields.forEach((function(t){var e=c.findIndex((function(e){return e.name===t}));o=o.map((function(t){return t.filter((function(t,n){return n!==e}))})),c=c.filter((function(t,n){return n!==e}))})),{data:o,schema:c}}return{data:i,schema:a}}},{key:"isEmpty",value:function(){return!this.model.getDataMeta().rows}},{key:"isDimension",value:function(t){var e=this.getField(t);return e&&"dimension"===e.type()}},{key:"isMeasure",value:function(t){var e=this.getField(t);return e&&"measure"===e.type()}},{key:"isTemporal",value:function(t){var e=this.getField(t);return e&&"temporal"===e.subtype()}},{key:"isFieldPresent",value:function(t){return!!this.getField(t)}},{key:"removeChild",value:function(t){this.model.removeChild(t.model)}},{key:"getSchema",value:function(){return this.model.getSchema()}},{key:"getValueAtIndex",value:function(t,e){return this.getField(t).data()[e]}},{key:"getFormattedValueAtIndex",value:function(t,e){return this.getField(t).data()[e]}},{key:"getFieldNames",value:function(){return this.getSchema().map((function(t){return t.name}))}},{key:"getFieldIndex",value:function(t){return t&&this.isFieldPresent(t)?this.model._context._fieldMap.get(t).index:null}},{key:"getRowsCount",value:function(){return this.model.getDataMeta().rows}},{key:"getDimensions",value:function(){return this.getSchema().filter((function(t){return"dimension"===t.type})).map((function(t){return t.name}))}},{key:"hasOneValue",value:function(){for(var t=this,e=!1,r=this.getFieldNames(),i=function(i,a){if(e=r.some((function(e){var r=t.getValueAtIndex(e,i);return!(!r||n.isInvalid(r))&&r})),e)return"break"},a=0,o=this.getRowsCount();a<o&&!e;a++){if("break"===i(a))break}return e}},{key:"dispose",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.removeCriteria({dm:this}),this.model.dispose(t)}},{key:"project",value:function(t){var e=this,n=t.filter((function(t){return e.getField(t)})),r=this.model.project(n);return this.clone(r)}},{key:"calculateVariable",value:function(){var t,e=(t=this.model).calculateVariable.apply(t,arguments);return this.clone(e)}},{key:"clone",value:function(t){return new this.constructor(t)}},{key:"getSubtype",value:function(t){var e=this.getField(t);return e?e.subtype():null}},{key:"getMeasures",value:function(){return this.getSchema().filter((function(t){return"measure"===t.type&&t.name!==ot.ROW_ID})).map((function(t){return t.name}))}},{key:"splitByRow",value:function(t){var e=this;return this.model.splitByRow(t).map((function(t){return e.clone(t)}))}},{key:"splitByColumn",value:function(t,e){var n=this,r=[];return(t=t.length?t:[[]]).forEach((function(t){r.push(n.project(W()(Array,U()(new Set([].concat(U()(t),U()(e)))))))})),r}},{key:"getQueryFromIds",value:function(t,e){var r=this,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=this.getUidMap(),o=[],c={},u=this.isTemporal(e[0]);if(1===e.length&&i&&!u){var s=t.map((function(t){var i=r.getFormattedValueAtIndex(e[0],a[t]);return n.isInvalid(i)&&(i=void 0),i}));return{operator:"in",field:e[0],value:s}}return t.forEach((function(t){var u=[];if(i){var s="";if(e.forEach((function(e){var i=r.getFormattedValueAtIndex(e,a[t]);n.isInvalid(i)&&(i=void 0),u.push({field:e,operator:"eq",value:i}),s+=i})),c[s])return;c[s]=!0}else u.push({field:e[0],operator:"eq",value:t});o.push({conditions:u,operator:"and"})})),{conditions:o,operator:"or"}}},{key:"saveCriteria",value:function(t){var e=t.propQuery,n=t.payload,r=n.propagationSourceId,i=n.sourceAction,a="".concat(i,"-").concat(r);return ft(this).set(a,{propQuery:e,payload:n,targetDms:t.targetDms,dm:this}),this}},{key:"removeCriteria",value:function(t){var e,n=ft(this),r=Object.keys(t),i=ht(n);try{var a=function(){var i=q()(e.value,2),a=i[0],o=i[1];r.every((function(e){return o.payload[e]===t[e]}))&&n.delete(a)};for(i.s();!(e=i.n()).done;)a()}catch(t){i.e(t)}finally{i.f()}}},{key:"getAllQueriesExcept",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0,n=[],r=Object.keys(t),i=[];return e.forEach((function(e){r.length&&r.every((function(n){return e.payload[n]===t[n]}))||(n.push({criteria:e.propQuery,dm:e.dm.model,fields:e.payload.fields}),i.push.apply(i,U()(e.targetDms)))})),{propInf:n,targetDms:i}}},{key:"getCombinedQuery",value:function(t,e){var n=this,r=!1,i=t.payload,a=t.propQuery,o=t.save,c=[];if(o)a?(this.saveCriteria(t),r=!0):(this.removeCriteria({propagationSourceId:i.propagationSourceId,sourceAction:i.sourceAction}),r=!1);else if(!a)return[{propInf:[{criteria:null,fields:[]}]}];var u={criteria:t.propQuery,dm:this.model,fields:t.payload.fields},s=[],l=[];if(e.forEach((function(t){if(t.payload.propagationSourceId!==i.propagationSourceId){var a=n.getAllQueriesExcept({propagationSourceId:t.payload.propagationSourceId},e);a.targetDms=new Set(t.targetDms),a.exclude=!1,!r&&a.propInf.push(u),c.push(a),s.push({criteria:t.propQuery,dm:t.dm.model,fields:t.payload.fields}),l.push(a.targetDms)}})),r||!e.size)c.push({propInf:[].concat(s,[u]),targetDms:new Set(l.map((function(t){return U()(t)})).flat()),exclude:!0});else{var f=this.getAllQueriesExcept({},e),h=t.targetDms;f.propInf.push(u),f.targetDms=new Set([].concat(U()(h),U()(f.targetDms))),f.exclude=!0,c.push({propInf:[u].concat(s),targetDms:new Set(h),exclude:!1},f)}return c}},{key:"propagate",value:function(t,e){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};e.fields||(e.fields=this.getDimensions());var i=ft(this),a=e.fields,o=e.interpolated,c={propQuery:t?r.isQuery?t:o?this.getFilterRangeQuery(t):this.getQueryFromIds(t,a,r.resolveId):null,payload:e,targetDms:r.targetDms,save:r.save},u=this.getCombinedQuery(c,i);return u.forEach((function(t){var r=t.propInf,i=t.targetDms,a=void 0===i?new Set:i,o=t.exclude,u=Object.assign({},c,{targetDms:a,exclude:o,propagationId:e.sourceAction});r.length&&n.model.propagate(r,u)})),this}},{key:"getFilterRangeQuery",value:function(t){var e=this;return{operator:"and",conditions:Object.keys(t).map((function(n){var r,i=e.isMeasure(n),a=e.isTemporal(n);i||a?r=(t[n][0]instanceof Array?t[n]:[t[n]]).map((function(t){return{conditions:[{field:n,operator:"gte",value:t[0]},{field:n,operator:"lte",value:t[1]}],operator:"and"}})):r=[{field:n,value:t[n],operator:"in"}];return{conditions:r,operator:"or"}}))}}},{key:"on",value:function(t,e,n){var r=this;return this.model.onPropagation((function(t,n){var i;t?(i=r.clone(t),r.removeChild(i)):i=null,e(i,n)}),n),this}},{key:"unsubscribe",value:function(){return this.model.unsubscribePropagationListeners(),this}},{key:"getDerivations",value:function(){return this.model.getDerivations()}},{key:"getAncestorDerivations",value:function(){var t=this.model.getParent();return t?t.getDerivations():null}},{key:"getUids",value:function(){return this.model.getField("__id__").data()}},{key:"getTemporalFields",value:function(){return this.getSchema().filter((function(t){return"temporal"===t.subtype})).map((function(t){return t.name}))}},{key:"getUidMap",value:function(){if(this._uidMap)return this._uidMap;var t=this.getUids();return this._uidMap=t.reduce((function(t,e,n){return t[e]=n,t}),{}),this._uidMap}},{key:"getDomain",value:function(t){if(this.isEmpty())return null;var e=this.getField(t);if(!e)return null;if("categorical"===e.subtype()){var r=new Set;return new Set(e.data()).forEach((function(t){var e=n.isInvalid(t)?t.value():t;r.add(e)})),U()(r)}return e.domain()}},{key:"id",value:function(){return this._id}},{key:"breakLink",value:function(t){return t.removeChild(this),this.detachParent(t)}},{key:"detachParent",value:function(t){return this._parent=null,this.model.detachParent(t),this}},{key:"replica",value:function(){var t=this.getFieldNames();return this.project(t.filter((function(t){return t!==ot.ROW_ID})))}},{key:"createEmptyDm",value:function(){return this.select({field:"__id__",value:Number.MAX_SAFE_INTEGER,operator:"eq"})}},{key:"model",get:function(){return this._model}}],[{key:"Invalid",value:function(t){return new(this.DataModel().Invalid)(t)}},{key:"DataModel",value:function(){return arguments.length?(this._dataModelCls=arguments.length<=0?void 0:arguments[0],this):this._dataModelCls}},{key:"loadData",value:function(t,e,n){return this.DataModel().loadData(t,e,n)}},{key:"isInvalid",value:function(t){return t instanceof this.DataModel().Invalid}},{key:"getActualValue",value:function(t){return this.isInvalid(t)?t.value():t}},{key:"ComparisonOperators",get:function(){return this.DataModel().ComparisonOperators}},{key:"FilteringModes",get:function(){return this.DataModel().FilteringModes}},{key:"LogicalOperators",get:function(){return this.DataModel().LogicalOperators}},{key:"SortOrder",get:function(){return this.DataModel().SortOrder}},{key:"DateTimeFormatter",get:function(){return this.DataModel().DateTimeFormatter}},{key:"FieldType",get:function(){return this.DataModel().FieldType}},{key:"FieldSubtype",get:function(){return this.DataModel().FieldSubtype}},{key:"DerivationOperations",get:function(){return this.DataModel().DerivationOperations}},{key:"AggregationFunctions",get:function(){return this.DataModel().AggregationFunctions}}]),n}(function(){function t(){X()(this,t)}return $()(t,[{key:"getData",value:function(){throw new Error("Method not implemented")}},{key:"getSchema",value:function(){throw new Error("Method not implemented")}},{key:"select",value:function(){throw new Error("Method not implemented")}},{key:"groupBy",value:function(){throw new Error("Method not implemented")}},{key:"project",value:function(){throw new Error("Method not implemented")}},{key:"sort",value:function(){throw new Error("Method not implemented")}},{key:"splitByRow",value:function(){throw new Error("Method not implemented")}},{key:"splitByColumn",value:function(){throw new Error("Method not implemented")}}],[{key:"loadData",value:function(){throw new Error("Method not implemented")}}]),t}()),vt=z()(j.a.mark((function t(){var e;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,at.onReady();case 2:return e=t.sent,gt.DataModel(e),t.abrupt("return",gt);case 5:case"end":return t.stop()}}),t)})))(),yt=function(t,e){return t<e?-1:t>e?1:t>=e?0:NaN},mt=function(t){var e;return 1===t.length&&(e=t,t=function(t,n){return yt(e(t),n)}),{left:function(e,n,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var a=r+i>>>1;t(e[a],n)<0?r=a+1:i=a}return r},right:function(e,n,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var a=r+i>>>1;t(e[a],n)>0?i=a:r=a+1}return r}}};var bt=mt(yt),xt=bt.right,wt=(bt.left,xt);var _t=function(t){return null===t?NaN:+t},kt=Array.prototype,St=(kt.slice,kt.map,function(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=0|Math.max(0,Math.ceil((e-t)/n)),a=new Array(i);++r<i;)a[r]=t+r*n;return a}),Mt=Math.sqrt(50),Et=Math.sqrt(10),Ct=Math.sqrt(2),At=function(t,e,n){var r,i,a,o,c=-1;if(n=+n,(t=+t)===(e=+e)&&n>0)return[t];if((r=e<t)&&(i=t,t=e,e=i),0===(o=Pt(t,e,n))||!isFinite(o))return[];if(o>0)for(t=Math.ceil(t/o),e=Math.floor(e/o),a=new Array(i=Math.ceil(e-t+1));++c<i;)a[c]=(t+c)*o;else for(t=Math.floor(t*o),e=Math.ceil(e*o),a=new Array(i=Math.ceil(t-e+1));++c<i;)a[c]=(t-c)/o;return r&&a.reverse(),a};function Pt(t,e,n){var r=(e-t)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),a=r/Math.pow(10,i);return i>=0?(a>=Mt?10:a>=Et?5:a>=Ct?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(a>=Mt?10:a>=Et?5:a>=Ct?2:1)}function Dt(t,e,n){var r=Math.abs(e-t)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),a=r/i;return a>=Mt?i*=10:a>=Et?i*=5:a>=Ct&&(i*=2),e<t?-i:i}var It=function(t,e,n){if(null==n&&(n=_t),r=t.length){if((e=+e)<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,a=Math.floor(i),o=+n(t[a],a,t);return o+(+n(t[a+1],a+1,t)-o)*(i-a)}};function Tt(){}function Rt(t,e){var n=new Tt;if(t instanceof Tt)t.each((function(t,e){n.set(e,t)}));else if(Array.isArray(t)){var r,i=-1,a=t.length;if(null==e)for(;++i<a;)n.set(i,t[i]);else for(;++i<a;)n.set(e(r=t[i],i,t),r)}else if(t)for(var o in t)n.set(o,t[o]);return n}Tt.prototype=Rt.prototype={constructor:Tt,has:function(t){return"$"+t in this},get:function(t){return this["$"+t]},set:function(t,e){return this["$"+t]=e,this},remove:function(t){var e="$"+t;return e in this&&delete this[e]},clear:function(){for(var t in this)"$"===t[0]&&delete this[t]},keys:function(){var t=[];for(var e in this)"$"===e[0]&&t.push(e.slice(1));return t},values:function(){var t=[];for(var e in this)"$"===e[0]&&t.push(this[e]);return t},entries:function(){var t=[];for(var e in this)"$"===e[0]&&t.push({key:e.slice(1),value:this[e]});return t},size:function(){var t=0;for(var e in this)"$"===e[0]&&++t;return t},empty:function(){for(var t in this)if("$"===t[0])return!1;return!0},each:function(t){for(var e in this)"$"===e[0]&&t(this[e],e.slice(1),this)}};var Nt=Rt,Ot=function(){var t,e,n,r=[],i=[];function a(n,i,o,c){if(i>=r.length)return null!=t&&n.sort(t),null!=e?e(n):n;for(var u,s,l,f=-1,h=n.length,d=r[i++],p=Nt(),g=o();++f<h;)(l=p.get(u=d(s=n[f])+""))?l.push(s):p.set(u,[s]);return p.each((function(t,e){c(g,e,a(t,i,o,c))})),g}return n={object:function(t){return a(t,0,Ft,Lt)},map:function(t){return a(t,0,jt,Bt)},entries:function(t){return function t(n,a){if(++a>r.length)return n;var o,c=i[a-1];return null!=e&&a>=r.length?o=n.entries():(o=[],n.each((function(e,n){o.push({key:n,values:t(e,a)})}))),null!=c?o.sort((function(t,e){return c(t.key,e.key)})):o}(a(t,0,jt,Bt),0)},key:function(t){return r.push(t),n},sortKeys:function(t){return i[r.length-1]=t,n},sortValues:function(e){return t=e,n},rollup:function(t){return e=t,n}}};function Ft(){return{}}function Lt(t,e,n){t[e]=n}function jt(){return Nt()}function Bt(t,e,n){t.set(e,n)}function zt(){}var Ht=Nt.prototype;function Wt(t,e){var n=new zt;if(t instanceof zt)t.each((function(t){n.add(t)}));else if(t){var r=-1,i=t.length;if(null==e)for(;++r<i;)n.add(t[r]);else for(;++r<i;)n.add(e(t[r],r,t))}return n}zt.prototype=Wt.prototype={constructor:zt,has:Ht.has,add:function(t){return this["$"+(t+="")]=t,this},remove:Ht.remove,clear:Ht.clear,values:Ht.keys,size:Ht.size,empty:Ht.empty,each:Ht.each};var Vt=Array.prototype,Ut=Vt.map,Gt=Vt.slice,qt={name:"implicit"};function Yt(t){var e=Nt(),n=[],r=qt;function i(i){var a=i+"",o=e.get(a);if(!o){if(r!==qt)return r;e.set(a,o=n.push(i))}return t[(o-1)%t.length]}return t=null==t?[]:Gt.call(t),i.domain=function(t){if(!arguments.length)return n.slice();n=[],e=Nt();for(var r,a,o=-1,c=t.length;++o<c;)e.has(a=(r=t[o])+"")||e.set(a,n.push(r));return i},i.range=function(e){return arguments.length?(t=Gt.call(e),i):t.slice()},i.unknown=function(t){return arguments.length?(r=t,i):r},i.copy=function(){return Yt().domain(n).range(t).unknown(r)},i}function Xt(){var t,e,n=Yt().unknown(void 0),r=n.domain,i=n.range,a=[0,1],o=!1,c=0,u=0,s=.5;function l(){var n=r().length,l=a[1]<a[0],f=a[l-0],h=a[1-l];t=(h-f)/Math.max(1,n-c+2*u),o&&(t=Math.floor(t)),f+=(h-f-t*(n-c))*s,e=t*(1-c),o&&(f=Math.round(f),e=Math.round(e));var d=St(n).map((function(e){return f+t*e}));return i(l?d.reverse():d)}return delete n.unknown,n.domain=function(t){return arguments.length?(r(t),l()):r()},n.range=function(t){return arguments.length?(a=[+t[0],+t[1]],l()):a.slice()},n.rangeRound=function(t){return a=[+t[0],+t[1]],o=!0,l()},n.bandwidth=function(){return e},n.step=function(){return t},n.round=function(t){return arguments.length?(o=!!t,l()):o},n.padding=function(t){return arguments.length?(c=u=Math.max(0,Math.min(1,t)),l()):c},n.paddingInner=function(t){return arguments.length?(c=Math.max(0,Math.min(1,t)),l()):c},n.paddingOuter=function(t){return arguments.length?(u=Math.max(0,Math.min(1,t)),l()):u},n.align=function(t){return arguments.length?(s=Math.max(0,Math.min(1,t)),l()):s},n.copy=function(){return Xt().domain(r()).range(a).round(o).paddingInner(c).paddingOuter(u).align(s)},n.invertExtent=function(t,e){var n,o,c,u,s=+t,l=arguments.length>1?+e:s,f=a[1]<a[0],h=f?i().reverse():i(),d=h.length-1;if(h.push(h[d]+this.step()),l<s&&(c=s,s=l,l=c),!(l<h[0]||s>a[1-f]))return n=Math.max(0,Kt(h,s)),u=Kt(h,l),o=s===l?n:Math.max(n,u-1),f&&(c=n,n=d-o,o=d-c),n>o?void 0:r().slice(n,o+1)},n.invert=function(t,e){var n,o,c=+t,u=arguments.length>1?+e:c,s=a[1]<a[0],l=s?i().reverse():i(),f=l.length-1;if(u<c&&(o=c,c=u,u=o),!(u<l[0]||c>a[1-s]))return n=Math.max(0,Kt(l,c,"left")),r()[s?f-n:n]},l()}function Kt(t,e,n){for(var r,i,a,o=0,c=t.length-1;o<c;)i=Math.floor((o+c)/2),a=Math.abs(t[i]-e),Math.abs(t[i+1]-e)<=a?o=i+1:c=i;return n?(r=t[c])===e?c:r>e?0===c?c:"left"===n?c-1:c:c===t.length-1||"left"===n?c:c+1:c}var $t=function(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}},Qt=function(t,e,n){t.prototype=e.prototype=n,n.constructor=t};function Zt(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Jt(){}var te="\\s*([+-]?\\d+)\\s*",ee="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",ne="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",re=/^#([0-9a-f]{3,8})$/,ie=new RegExp("^rgb\\("+[te,te,te]+"\\)$"),ae=new RegExp("^rgb\\("+[ne,ne,ne]+"\\)$"),oe=new RegExp("^rgba\\("+[te,te,te,ee]+"\\)$"),ce=new RegExp("^rgba\\("+[ne,ne,ne,ee]+"\\)$"),ue=new RegExp("^hsl\\("+[ee,ne,ne]+"\\)$"),se=new RegExp("^hsla\\("+[ee,ne,ne,ee]+"\\)$"),le={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function fe(){return this.rgb().formatHex()}function he(){return this.rgb().formatRgb()}function de(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=re.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?pe(e):3===n?new me(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?ge(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?ge(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=ie.exec(t))?new me(e[1],e[2],e[3],1):(e=ae.exec(t))?new me(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=oe.exec(t))?ge(e[1],e[2],e[3],e[4]):(e=ce.exec(t))?ge(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=ue.exec(t))?_e(e[1],e[2]/100,e[3]/100,1):(e=se.exec(t))?_e(e[1],e[2]/100,e[3]/100,e[4]):le.hasOwnProperty(t)?pe(le[t]):"transparent"===t?new me(NaN,NaN,NaN,0):null}function pe(t){return new me(t>>16&255,t>>8&255,255&t,1)}function ge(t,e,n,r){return r<=0&&(t=e=n=NaN),new me(t,e,n,r)}function ve(t){return t instanceof Jt||(t=de(t)),t?new me((t=t.rgb()).r,t.g,t.b,t.opacity):new me}function ye(t,e,n,r){return 1===arguments.length?ve(t):new me(t,e,n,null==r?1:r)}function me(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function be(){return"#"+we(this.r)+we(this.g)+we(this.b)}function xe(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}function we(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function _e(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Me(t,e,n,r)}function ke(t){if(t instanceof Me)return new Me(t.h,t.s,t.l,t.opacity);if(t instanceof Jt||(t=de(t)),!t)return new Me;if(t instanceof Me)return t;var e=(t=t.rgb()).r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),a=Math.max(e,n,r),o=NaN,c=a-i,u=(a+i)/2;return c?(o=e===a?(n-r)/c+6*(n<r):n===a?(r-e)/c+2:(e-n)/c+4,c/=u<.5?a+i:2-a-i,o*=60):c=u>0&&u<1?0:o,new Me(o,c,u,t.opacity)}function Se(t,e,n,r){return 1===arguments.length?ke(t):new Me(t,e,n,null==r?1:r)}function Me(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function Ee(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}function Ce(t,e,n,r,i){var a=t*t,o=a*t;return((1-3*t+3*a-o)*e+(4-6*a+3*o)*n+(1+3*t+3*a-3*o)*r+o*i)/6}Qt(Jt,de,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:fe,formatHex:fe,formatHsl:function(){return ke(this).formatHsl()},formatRgb:he,toString:he}),Qt(me,ye,Zt(Jt,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new me(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new me(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:be,formatHex:be,formatRgb:xe,toString:xe})),Qt(Me,Se,Zt(Jt,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new Me(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new Me(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new me(Ee(t>=240?t-240:t+120,i,r),Ee(t,i,r),Ee(t<120?t+240:t-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===t?")":", "+t+")")}}));var Ae=function(t){return function(){return t}};function Pe(t,e){return function(n){return t+n*e}}function De(t,e){var n=e-t;return n?Pe(t,n>180||n<-180?n-360*Math.round(n/360):n):Ae(isNaN(t)?e:t)}function Ie(t){return 1==(t=+t)?Te:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}(e,n,t):Ae(isNaN(e)?n:e)}}function Te(t,e){var n=e-t;return n?Pe(t,n):Ae(isNaN(t)?e:t)}var Re=function t(e){var n=Ie(e);function r(t,e){var r=n((t=ye(t)).r,(e=ye(e)).r),i=n(t.g,e.g),a=n(t.b,e.b),o=Te(t.opacity,e.opacity);return function(e){return t.r=r(e),t.g=i(e),t.b=a(e),t.opacity=o(e),t+""}}return r.gamma=t,r}(1);function Ne(t){return function(e){var n,r,i=e.length,a=new Array(i),o=new Array(i),c=new Array(i);for(n=0;n<i;++n)r=ye(e[n]),a[n]=r.r||0,o[n]=r.g||0,c[n]=r.b||0;return a=t(a),o=t(o),c=t(c),r.opacity=1,function(t){return r.r=a(t),r.g=o(t),r.b=c(t),r+""}}}var Oe=Ne((function(t){var e=t.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),i=t[r],a=t[r+1],o=r>0?t[r-1]:2*i-a,c=r<e-1?t[r+2]:2*a-i;return Ce((n-r/e)*e,o,i,a,c)}})),Fe=(Ne((function(t){var e=t.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*e),i=t[(r+e-1)%e],a=t[r%e],o=t[(r+1)%e],c=t[(r+2)%e];return Ce((n-r/e)*e,i,a,o,c)}})),function(t,e){e||(e=[]);var n,r=t?Math.min(e.length,t.length):0,i=e.slice();return function(a){for(n=0;n<r;++n)i[n]=t[n]*(1-a)+e[n]*a;return i}});function Le(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function je(t,e){var n,r=e?e.length:0,i=t?Math.min(r,t.length):0,a=new Array(i),o=new Array(r);for(n=0;n<i;++n)a[n]=Ue(t[n],e[n]);for(;n<r;++n)o[n]=e[n];return function(t){for(n=0;n<i;++n)o[n]=a[n](t);return o}}var Be=function(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}},ze=function(t,e){var n,r={},i={};for(n in null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={}),e)n in t?r[n]=Ue(t[n],e[n]):i[n]=e[n];return function(t){for(n in r)i[n]=r[n](t);return i}},He=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,We=new RegExp(He.source,"g");var Ve=function(t,e){var n,r,i,a=He.lastIndex=We.lastIndex=0,o=-1,c=[],u=[];for(t+="",e+="";(n=He.exec(t))&&(r=We.exec(e));)(i=r.index)>a&&(i=e.slice(a,i),c[o]?c[o]+=i:c[++o]=i),(n=n[0])===(r=r[0])?c[o]?c[o]+=r:c[++o]=r:(c[++o]=null,u.push({i:o,x:$t(n,r)})),a=We.lastIndex;return a<e.length&&(i=e.slice(a),c[o]?c[o]+=i:c[++o]=i),c.length<2?u[0]?function(t){return function(e){return t(e)+""}}(u[0].x):function(t){return function(){return t}}(e):(e=u.length,function(t){for(var n,r=0;r<e;++r)c[(n=u[r]).i]=n.x(t);return c.join("")})},Ue=function(t,e){var n,r=typeof e;return null==e||"boolean"===r?Ae(e):("number"===r?$t:"string"===r?(n=de(e))?(e=n,Re):Ve:e instanceof de?Re:e instanceof Date?Be:Le(e)?Fe:Array.isArray(e)?je:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?ze:$t)(t,e)},Ge=function(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}},qe=function(t){return function(){return t}},Ye=function(t){return+t},Xe=[0,1];function Ke(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:qe(e)}function $e(t,e,n,r){var i=t[0],a=t[1],o=e[0],c=e[1];return a<i?(i=n(a,i),o=r(c,o)):(i=n(i,a),o=r(o,c)),function(t){return o(i(t))}}function Qe(t,e,n,r){var i=Math.min(t.length,e.length)-1,a=new Array(i),o=new Array(i),c=-1;for(t[i]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++c<i;)a[c]=n(t[c],t[c+1]),o[c]=r(e[c],e[c+1]);return function(e){var n=wt(t,e,1,i)-1;return o[n](a[n](e))}}function Ze(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp())}function Je(t,e){var n,r,i,a=Xe,o=Xe,c=Ue,u=!1;function s(){return n=Math.min(a.length,o.length)>2?Qe:$e,r=i=null,l}function l(e){return(r||(r=n(a,o,u?function(t){return function(e,n){var r=t(e=+e,n=+n);return function(t){return t<=e?0:t>=n?1:r(t)}}}(t):t,c)))(+e)}return l.invert=function(t){return(i||(i=n(o,a,Ke,u?function(t){return function(e,n){var r=t(e=+e,n=+n);return function(t){return t<=0?e:t>=1?n:r(t)}}}(e):e)))(+t)},l.domain=function(t){return arguments.length?(a=Ut.call(t,Ye),s()):a.slice()},l.range=function(t){return arguments.length?(o=Gt.call(t),s()):o.slice()},l.rangeRound=function(t){return o=Gt.call(t),c=Ge,s()},l.clamp=function(t){return arguments.length?(u=!!t,s()):u},l.interpolate=function(t){return arguments.length?(c=t,s()):c},s()}var tn=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function en(t){if(!(e=tn.exec(t)))throw new Error("invalid format: "+t);var e;return new nn({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}function nn(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}en.prototype=nn.prototype,nn.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var rn,an,on,cn,un=function(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]},sn=function(t){return(t=un(Math.abs(t)))?t[1]:NaN},ln=function(t,e){var n=un(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")},fn={"%":function(t,e){return(100*t).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.round(t).toString(10)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return ln(100*t,e)},r:ln,s:function(t,e){var n=un(t,e);if(!n)return t+"";var r=n[0],i=n[1],a=i-(rn=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,o=r.length;return a===o?r:a>o?r+new Array(a-o+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+un(t,Math.max(0,e+a-1))[0]},X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}},hn=function(t){return t},dn=Array.prototype.map,pn=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];an=function(t){var e,n,r=void 0===t.grouping||void 0===t.thousands?hn:(e=dn.call(t.grouping,Number),n=t.thousands+"",function(t,r){for(var i=t.length,a=[],o=0,c=e[0],u=0;i>0&&c>0&&(u+c+1>r&&(c=Math.max(1,r-u)),a.push(t.substring(i-=c,i+c)),!((u+=c+1)>r));)c=e[o=(o+1)%e.length];return a.reverse().join(n)}),i=void 0===t.currency?"":t.currency[0]+"",a=void 0===t.currency?"":t.currency[1]+"",o=void 0===t.decimal?".":t.decimal+"",c=void 0===t.numerals?hn:function(t){return function(e){return e.replace(/[0-9]/g,(function(e){return t[+e]}))}}(dn.call(t.numerals,String)),u=void 0===t.percent?"%":t.percent+"",s=void 0===t.minus?"-":t.minus+"",l=void 0===t.nan?"NaN":t.nan+"";function f(t){var e=(t=en(t)).fill,n=t.align,f=t.sign,h=t.symbol,d=t.zero,p=t.width,g=t.comma,v=t.precision,y=t.trim,m=t.type;"n"===m?(g=!0,m="g"):fn[m]||(void 0===v&&(v=12),y=!0,m="g"),(d||"0"===e&&"="===n)&&(d=!0,e="0",n="=");var b="$"===h?i:"#"===h&&/[boxX]/.test(m)?"0"+m.toLowerCase():"",x="$"===h?a:/[%p]/.test(m)?u:"",w=fn[m],_=/[defgprs%]/.test(m);function k(t){var i,a,u,h=b,k=x;if("c"===m)k=w(t)+k,t="";else{var S=(t=+t)<0||1/t<0;if(t=isNaN(t)?l:w(Math.abs(t),v),y&&(t=function(t){t:for(var e,n=t.length,r=1,i=-1;r<n;++r)switch(t[r]){case".":i=e=r;break;case"0":0===i&&(i=r),e=r;break;default:if(!+t[r])break t;i>0&&(i=0)}return i>0?t.slice(0,i)+t.slice(e+1):t}(t)),S&&0==+t&&"+"!==f&&(S=!1),h=(S?"("===f?f:s:"-"===f||"("===f?"":f)+h,k=("s"===m?pn[8+rn/3]:"")+k+(S&&"("===f?")":""),_)for(i=-1,a=t.length;++i<a;)if(48>(u=t.charCodeAt(i))||u>57){k=(46===u?o+t.slice(i+1):t.slice(i))+k,t=t.slice(0,i);break}}g&&!d&&(t=r(t,1/0));var M=h.length+t.length+k.length,E=M<p?new Array(p-M+1).join(e):"";switch(g&&d&&(t=r(E+t,E.length?p-k.length:1/0),E=""),n){case"<":t=h+t+k+E;break;case"=":t=h+E+t+k;break;case"^":t=E.slice(0,M=E.length>>1)+h+t+k+E.slice(M);break;default:t=E+h+t+k}return c(t)}return v=void 0===v?6:/[gprs]/.test(m)?Math.max(1,Math.min(21,v)):Math.max(0,Math.min(20,v)),k.toString=function(){return t+""},k}return{format:f,formatPrefix:function(t,e){var n=f(((t=en(t)).type="f",t)),r=3*Math.max(-8,Math.min(8,Math.floor(sn(e)/3))),i=Math.pow(10,-r),a=pn[8+r/3];return function(t){return n(i*t)+a}}}}({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"}),on=an.format,cn=an.formatPrefix;var gn=function(t,e,n){var r,i=t[0],a=t[t.length-1],o=Dt(i,a,null==e?10:e);switch((n=en(null==n?",f":n)).type){case"s":var c=Math.max(Math.abs(i),Math.abs(a));return null!=n.precision||isNaN(r=function(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(sn(e)/3)))-sn(Math.abs(t)))}(o,c))||(n.precision=r),cn(n,c);case"":case"e":case"g":case"p":case"r":null!=n.precision||isNaN(r=function(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,sn(e)-sn(t))+1}(o,Math.max(Math.abs(i),Math.abs(a))))||(n.precision=r-("e"===n.type));break;case"f":case"%":null!=n.precision||isNaN(r=function(t){return Math.max(0,-sn(Math.abs(t)))}(o))||(n.precision=r-2*("%"===n.type))}return on(n)};function vn(t){var e=t.domain;return t.ticks=function(t){var n=e();return At(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=function(t,n){return gn(e(),t,n)},t.nice=function(n){null==n&&(n=10);var r,i=e(),a=0,o=i.length-1,c=i[a],u=i[o];return u<c&&(r=c,c=u,u=r,r=a,a=o,o=r),(r=Pt(c,u,n))>0?r=Pt(c=Math.floor(c/r)*r,u=Math.ceil(u/r)*r,n):r<0&&(r=Pt(c=Math.ceil(c*r)/r,u=Math.floor(u*r)/r,n)),r>0?(i[a]=Math.floor(c/r)*r,i[o]=Math.ceil(u/r)*r,e(i)):r<0&&(i[a]=Math.ceil(c*r)/r,i[o]=Math.floor(u*r)/r,e(i)),t},t}function yn(){var t=Je(Ke,$t);return t.copy=function(){return Ze(t,yn())},vn(t)}function mn(){var t=[0,1];function e(t){return+t}return e.invert=e,e.domain=e.range=function(n){return arguments.length?(t=Ut.call(n,Ye),e):t.slice()},e.copy=function(){return mn().domain(t)},vn(e)}var bn=function(t,e){var n,r=0,i=(t=t.slice()).length-1,a=t[r],o=t[i];return o<a&&(n=r,r=i,i=n,n=a,a=o,o=n),t[r]=e.floor(a),t[i]=e.ceil(o),t};function xn(t,e){return(e=Math.log(e/t))?function(n){return Math.log(n/t)/e}:qe(e)}function wn(t,e){return t<0?function(n){return-Math.pow(-e,n)*Math.pow(-t,1-n)}:function(n){return Math.pow(e,n)*Math.pow(t,1-n)}}function _n(t){return isFinite(t)?+("1e"+t):t<0?0:t}function kn(t){return 10===t?_n:t===Math.E?Math.exp:function(e){return Math.pow(t,e)}}function Sn(t){return t===Math.E?Math.log:10===t&&Math.log10||2===t&&Math.log2||(t=Math.log(t),function(e){return Math.log(e)/t})}function Mn(t){return function(e){return-t(-e)}}function En(){var t=Je(xn,wn).domain([1,10]),e=t.domain,n=10,r=Sn(10),i=kn(10);function a(){return r=Sn(n),i=kn(n),e()[0]<0&&(r=Mn(r),i=Mn(i)),t}return t.base=function(t){return arguments.length?(n=+t,a()):n},t.domain=function(t){return arguments.length?(e(t),a()):e()},t.ticks=function(t){var a,o=e(),c=o[0],u=o[o.length-1];(a=u<c)&&(h=c,c=u,u=h);var s,l,f,h=r(c),d=r(u),p=null==t?10:+t,g=[];if(!(n%1)&&d-h<p){if(h=Math.round(h)-1,d=Math.round(d)+1,c>0){for(;h<d;++h)for(l=1,s=i(h);l<n;++l)if(!((f=s*l)<c)){if(f>u)break;g.push(f)}}else for(;h<d;++h)for(l=n-1,s=i(h);l>=1;--l)if(!((f=s*l)<c)){if(f>u)break;g.push(f)}}else g=At(h,d,Math.min(d-h,p)).map(i);return a?g.reverse():g},t.tickFormat=function(e,a){if(null==a&&(a=10===n?".0e":","),"function"!=typeof a&&(a=on(a)),e===1/0)return a;null==e&&(e=10);var o=Math.max(1,n*e/t.ticks().length);return function(t){var e=t/i(Math.round(r(t)));return e*n<n-.5&&(e*=n),e<=o?a(t):""}},t.nice=function(){return e(bn(e(),{floor:function(t){return i(Math.floor(r(t)))},ceil:function(t){return i(Math.ceil(r(t)))}}))},t.copy=function(){return Ze(t,En().base(n))},t}function Cn(t,e){return t<0?-Math.pow(-t,e):Math.pow(t,e)}function An(){var t=1,e=Je((function(e,n){return(n=Cn(n,t)-(e=Cn(e,t)))?function(r){return(Cn(r,t)-e)/n}:qe(n)}),(function(e,n){return n=Cn(n,t)-(e=Cn(e,t)),function(r){return Cn(e+n*r,1/t)}})),n=e.domain;return e.exponent=function(e){return arguments.length?(t=+e,n(n())):t},e.copy=function(){return Ze(e,An().exponent(t))},vn(e)}function Pn(){var t=[],e=[],n=[];function r(){var r=0,a=Math.max(1,e.length);for(n=new Array(a-1);++r<a;)n[r-1]=It(t,r/a);return i}function i(t){if(!isNaN(t=+t))return e[wt(n,t)]}return i.invertExtent=function(r){var i=e.indexOf(r);return i<0?[NaN,NaN]:[i>0?n[i-1]:t[0],i<n.length?n[i]:t[t.length-1]]},i.domain=function(e){if(!arguments.length)return t.slice();t=[];for(var n,i=0,a=e.length;i<a;++i)null==(n=e[i])||isNaN(n=+n)||t.push(n);return t.sort(yt),r()},i.range=function(t){return arguments.length?(e=Gt.call(t),r()):e.slice()},i.quantiles=function(){return n.slice()},i.copy=function(){return Pn().domain(t).range(e)},i}function Dn(){var t=0,e=1,n=1,r=[.5],i=[0,1];function a(t){if(t<=t)return i[wt(r,t,0,n)]}function o(){var i=-1;for(r=new Array(n);++i<n;)r[i]=((i+1)*e-(i-n)*t)/(n+1);return a}return a.domain=function(n){return arguments.length?(t=+n[0],e=+n[1],o()):[t,e]},a.range=function(t){return arguments.length?(n=(i=Gt.call(t)).length-1,o()):i.slice()},a.invertExtent=function(a){var o=i.indexOf(a);return o<0?[NaN,NaN]:o<1?[t,r[0]]:o>=n?[r[n-1],e]:[r[o-1],r[o]]},a.copy=function(){return Dn().domain([t,e]).range(i)},vn(a)}function In(){var t=[.5],e=[0,1],n=1;function r(r){if(r<=r)return e[wt(t,r,0,n)]}return r.domain=function(i){return arguments.length?(t=Gt.call(i),n=Math.min(t.length,e.length-1),r):t.slice()},r.range=function(i){return arguments.length?(e=Gt.call(i),n=Math.min(t.length,e.length-1),r):e.slice()},r.invertExtent=function(n){var r=e.indexOf(n);return[t[r-1],t[r]]},r.copy=function(){return In().domain(t).range(e)},r}var Tn=new Date,Rn=new Date;function Nn(t,e,n,r){function i(e){return t(e=0===arguments.length?new Date:new Date(+e)),e}return i.floor=function(e){return t(e=new Date(+e)),e},i.ceil=function(n){return t(n=new Date(n-1)),e(n,1),t(n),n},i.round=function(t){var e=i(t),n=i.ceil(t);return t-e<n-t?e:n},i.offset=function(t,n){return e(t=new Date(+t),null==n?1:Math.floor(n)),t},i.range=function(n,r,a){var o,c=[];if(n=i.ceil(n),a=null==a?1:Math.floor(a),!(n<r&&a>0))return c;do{c.push(o=new Date(+n)),e(n,a),t(n)}while(o<n&&n<r);return c},i.filter=function(n){return Nn((function(e){if(e>=e)for(;t(e),!n(e);)e.setTime(e-1)}),(function(t,r){if(t>=t)if(r<0)for(;++r<=0;)for(;e(t,-1),!n(t););else for(;--r>=0;)for(;e(t,1),!n(t););}))},n&&(i.count=function(e,r){return Tn.setTime(+e),Rn.setTime(+r),t(Tn),t(Rn),Math.floor(n(Tn,Rn))},i.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?i.filter(r?function(e){return r(e)%t==0}:function(e){return i.count(0,e)%t==0}):i:null}),i}var On=Nn((function(t){t.setMonth(0,1),t.setHours(0,0,0,0)}),(function(t,e){t.setFullYear(t.getFullYear()+e)}),(function(t,e){return e.getFullYear()-t.getFullYear()}),(function(t){return t.getFullYear()}));On.every=function(t){return isFinite(t=Math.floor(t))&&t>0?Nn((function(e){e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)}),(function(e,n){e.setFullYear(e.getFullYear()+n*t)})):null};var Fn=On,Ln=(On.range,Nn((function(t){t.setDate(1),t.setHours(0,0,0,0)}),(function(t,e){t.setMonth(t.getMonth()+e)}),(function(t,e){return e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear())}),(function(t){return t.getMonth()}))),jn=Ln;Ln.range;function Bn(t){return Nn((function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)}),(function(t,e){t.setDate(t.getDate()+7*e)}),(function(t,e){return(e-t-6e4*(e.getTimezoneOffset()-t.getTimezoneOffset()))/6048e5}))}var zn=Bn(0),Hn=Bn(1),Wn=Bn(2),Vn=Bn(3),Un=Bn(4),Gn=Bn(5),qn=Bn(6),Yn=(zn.range,Hn.range,Wn.range,Vn.range,Un.range,Gn.range,qn.range,Nn((function(t){t.setHours(0,0,0,0)}),(function(t,e){t.setDate(t.getDate()+e)}),(function(t,e){return(e-t-6e4*(e.getTimezoneOffset()-t.getTimezoneOffset()))/864e5}),(function(t){return t.getDate()-1}))),Xn=Yn,Kn=(Yn.range,Nn((function(t){t.setTime(t-t.getMilliseconds()-1e3*t.getSeconds()-6e4*t.getMinutes())}),(function(t,e){t.setTime(+t+36e5*e)}),(function(t,e){return(e-t)/36e5}),(function(t){return t.getHours()}))),$n=Kn,Qn=(Kn.range,Nn((function(t){t.setTime(t-t.getMilliseconds()-1e3*t.getSeconds())}),(function(t,e){t.setTime(+t+6e4*e)}),(function(t,e){return(e-t)/6e4}),(function(t){return t.getMinutes()}))),Zn=Qn,Jn=(Qn.range,Nn((function(t){t.setTime(t-t.getMilliseconds())}),(function(t,e){t.setTime(+t+1e3*e)}),(function(t,e){return(e-t)/1e3}),(function(t){return t.getUTCSeconds()}))),tr=Jn,er=(Jn.range,Nn((function(){}),(function(t,e){t.setTime(+t+e)}),(function(t,e){return e-t})));er.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?Nn((function(e){e.setTime(Math.floor(e/t)*t)}),(function(e,n){e.setTime(+e+n*t)}),(function(e,n){return(n-e)/t})):er:null};var nr=er;er.range;function rr(t){return Nn((function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCDate(t.getUTCDate()+7*e)}),(function(t,e){return(e-t)/6048e5}))}var ir=rr(0),ar=rr(1),or=rr(2),cr=rr(3),ur=rr(4),sr=rr(5),lr=rr(6),fr=(ir.range,ar.range,or.range,cr.range,ur.range,sr.range,lr.range,Nn((function(t){t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCDate(t.getUTCDate()+e)}),(function(t,e){return(e-t)/864e5}),(function(t){return t.getUTCDate()-1}))),hr=fr,dr=(fr.range,Nn((function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)}),(function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()}),(function(t){return t.getUTCFullYear()})));dr.every=function(t){return isFinite(t=Math.floor(t))&&t>0?Nn((function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),(function(e,n){e.setUTCFullYear(e.getUTCFullYear()+n*t)})):null};var pr=dr;dr.range;function gr(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function vr(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function yr(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}var mr,br,xr={"-":"",_:" ",0:"0"},wr=/^\s*\d+/,_r=/^%/,kr=/[\\^$*+?|[\]().{}]/g;function Sr(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(e)+i:i)}function Mr(t){return t.replace(kr,"\\$&")}function Er(t){return new RegExp("^(?:"+t.map(Mr).join("|")+")","i")}function Cr(t){for(var e={},n=-1,r=t.length;++n<r;)e[t[n].toLowerCase()]=n;return e}function Ar(t,e,n){var r=wr.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function Pr(t,e,n){var r=wr.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function Dr(t,e,n){var r=wr.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function Ir(t,e,n){var r=wr.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function Tr(t,e,n){var r=wr.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function Rr(t,e,n){var r=wr.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function Nr(t,e,n){var r=wr.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function Or(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function Fr(t,e,n){var r=wr.exec(e.slice(n,n+1));return r?(t.q=3*r[0]-3,n+r[0].length):-1}function Lr(t,e,n){var r=wr.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function jr(t,e,n){var r=wr.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function Br(t,e,n){var r=wr.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function zr(t,e,n){var r=wr.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function Hr(t,e,n){var r=wr.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function Wr(t,e,n){var r=wr.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function Vr(t,e,n){var r=wr.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function Ur(t,e,n){var r=wr.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function Gr(t,e,n){var r=_r.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function qr(t,e,n){var r=wr.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function Yr(t,e,n){var r=wr.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function Xr(t,e){return Sr(t.getDate(),e,2)}function Kr(t,e){return Sr(t.getHours(),e,2)}function $r(t,e){return Sr(t.getHours()%12||12,e,2)}function Qr(t,e){return Sr(1+Xn.count(Fn(t),t),e,3)}function Zr(t,e){return Sr(t.getMilliseconds(),e,3)}function Jr(t,e){return Zr(t,e)+"000"}function ti(t,e){return Sr(t.getMonth()+1,e,2)}function ei(t,e){return Sr(t.getMinutes(),e,2)}function ni(t,e){return Sr(t.getSeconds(),e,2)}function ri(t){var e=t.getDay();return 0===e?7:e}function ii(t,e){return Sr(zn.count(Fn(t)-1,t),e,2)}function ai(t,e){var n=t.getDay();return t=n>=4||0===n?Un(t):Un.ceil(t),Sr(Un.count(Fn(t),t)+(4===Fn(t).getDay()),e,2)}function oi(t){return t.getDay()}function ci(t,e){return Sr(Hn.count(Fn(t)-1,t),e,2)}function ui(t,e){return Sr(t.getFullYear()%100,e,2)}function si(t,e){return Sr(t.getFullYear()%1e4,e,4)}function li(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Sr(e/60|0,"0",2)+Sr(e%60,"0",2)}function fi(t,e){return Sr(t.getUTCDate(),e,2)}function hi(t,e){return Sr(t.getUTCHours(),e,2)}function di(t,e){return Sr(t.getUTCHours()%12||12,e,2)}function pi(t,e){return Sr(1+hr.count(pr(t),t),e,3)}function gi(t,e){return Sr(t.getUTCMilliseconds(),e,3)}function vi(t,e){return gi(t,e)+"000"}function yi(t,e){return Sr(t.getUTCMonth()+1,e,2)}function mi(t,e){return Sr(t.getUTCMinutes(),e,2)}function bi(t,e){return Sr(t.getUTCSeconds(),e,2)}function xi(t){var e=t.getUTCDay();return 0===e?7:e}function wi(t,e){return Sr(ir.count(pr(t)-1,t),e,2)}function _i(t,e){var n=t.getUTCDay();return t=n>=4||0===n?ur(t):ur.ceil(t),Sr(ur.count(pr(t),t)+(4===pr(t).getUTCDay()),e,2)}function ki(t){return t.getUTCDay()}function Si(t,e){return Sr(ar.count(pr(t)-1,t),e,2)}function Mi(t,e){return Sr(t.getUTCFullYear()%100,e,2)}function Ei(t,e){return Sr(t.getUTCFullYear()%1e4,e,4)}function Ci(){return"+0000"}function Ai(){return"%"}function Pi(t){return+t}function Di(t){return Math.floor(+t/1e3)}!function(t){mr=function(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,a=t.days,o=t.shortDays,c=t.months,u=t.shortMonths,s=Er(i),l=Cr(i),f=Er(a),h=Cr(a),d=Er(o),p=Cr(o),g=Er(c),v=Cr(c),y=Er(u),m=Cr(u),b={a:function(t){return o[t.getDay()]},A:function(t){return a[t.getDay()]},b:function(t){return u[t.getMonth()]},B:function(t){return c[t.getMonth()]},c:null,d:Xr,e:Xr,f:Jr,H:Kr,I:$r,j:Qr,L:Zr,m:ti,M:ei,p:function(t){return i[+(t.getHours()>=12)]},q:function(t){return 1+~~(t.getMonth()/3)},Q:Pi,s:Di,S:ni,u:ri,U:ii,V:ai,w:oi,W:ci,x:null,X:null,y:ui,Y:si,Z:li,"%":Ai},x={a:function(t){return o[t.getUTCDay()]},A:function(t){return a[t.getUTCDay()]},b:function(t){return u[t.getUTCMonth()]},B:function(t){return c[t.getUTCMonth()]},c:null,d:fi,e:fi,f:vi,H:hi,I:di,j:pi,L:gi,m:yi,M:mi,p:function(t){return i[+(t.getUTCHours()>=12)]},q:function(t){return 1+~~(t.getUTCMonth()/3)},Q:Pi,s:Di,S:bi,u:xi,U:wi,V:_i,w:ki,W:Si,x:null,X:null,y:Mi,Y:Ei,Z:Ci,"%":Ai},w={a:function(t,e,n){var r=d.exec(e.slice(n));return r?(t.w=p[r[0].toLowerCase()],n+r[0].length):-1},A:function(t,e,n){var r=f.exec(e.slice(n));return r?(t.w=h[r[0].toLowerCase()],n+r[0].length):-1},b:function(t,e,n){var r=y.exec(e.slice(n));return r?(t.m=m[r[0].toLowerCase()],n+r[0].length):-1},B:function(t,e,n){var r=g.exec(e.slice(n));return r?(t.m=v[r[0].toLowerCase()],n+r[0].length):-1},c:function(t,n,r){return S(t,e,n,r)},d:jr,e:jr,f:Ur,H:zr,I:zr,j:Br,L:Vr,m:Lr,M:Hr,p:function(t,e,n){var r=s.exec(e.slice(n));return r?(t.p=l[r[0].toLowerCase()],n+r[0].length):-1},q:Fr,Q:qr,s:Yr,S:Wr,u:Pr,U:Dr,V:Ir,w:Ar,W:Tr,x:function(t,e,r){return S(t,n,e,r)},X:function(t,e,n){return S(t,r,e,n)},y:Nr,Y:Rr,Z:Or,"%":Gr};function _(t,e){return function(n){var r,i,a,o=[],c=-1,u=0,s=t.length;for(n instanceof Date||(n=new Date(+n));++c<s;)37===t.charCodeAt(c)&&(o.push(t.slice(u,c)),null!=(i=xr[r=t.charAt(++c)])?r=t.charAt(++c):i="e"===r?" ":"0",(a=e[r])&&(r=a(n,i)),o.push(r),u=c+1);return o.push(t.slice(u,c)),o.join("")}}function k(t,e){return function(n){var r,i,a=yr(1900,void 0,1);if(S(a,t,n+="",0)!=n.length)return null;if("Q"in a)return new Date(a.Q);if("s"in a)return new Date(1e3*a.s+("L"in a?a.L:0));if(e&&!("Z"in a)&&(a.Z=0),"p"in a&&(a.H=a.H%12+12*a.p),void 0===a.m&&(a.m="q"in a?a.q:0),"V"in a){if(a.V<1||a.V>53)return null;"w"in a||(a.w=1),"Z"in a?(i=(r=vr(yr(a.y,0,1))).getUTCDay(),r=i>4||0===i?ar.ceil(r):ar(r),r=hr.offset(r,7*(a.V-1)),a.y=r.getUTCFullYear(),a.m=r.getUTCMonth(),a.d=r.getUTCDate()+(a.w+6)%7):(i=(r=gr(yr(a.y,0,1))).getDay(),r=i>4||0===i?Hn.ceil(r):Hn(r),r=Xn.offset(r,7*(a.V-1)),a.y=r.getFullYear(),a.m=r.getMonth(),a.d=r.getDate()+(a.w+6)%7)}else("W"in a||"U"in a)&&("w"in a||(a.w="u"in a?a.u%7:"W"in a?1:0),i="Z"in a?vr(yr(a.y,0,1)).getUTCDay():gr(yr(a.y,0,1)).getDay(),a.m=0,a.d="W"in a?(a.w+6)%7+7*a.W-(i+5)%7:a.w+7*a.U-(i+6)%7);return"Z"in a?(a.H+=a.Z/100|0,a.M+=a.Z%100,vr(a)):gr(a)}}function S(t,e,n,r){for(var i,a,o=0,c=e.length,u=n.length;o<c;){if(r>=u)return-1;if(37===(i=e.charCodeAt(o++))){if(i=e.charAt(o++),!(a=w[i in xr?e.charAt(o++):i])||(r=a(t,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}return b.x=_(n,b),b.X=_(r,b),b.c=_(e,b),x.x=_(n,x),x.X=_(r,x),x.c=_(e,x),{format:function(t){var e=_(t+="",b);return e.toString=function(){return t},e},parse:function(t){var e=k(t+="",!1);return e.toString=function(){return t},e},utcFormat:function(t){var e=_(t+="",x);return e.toString=function(){return t},e},utcParse:function(t){var e=k(t+="",!0);return e.toString=function(){return t},e}}}(t),br=mr.format,mr.parse,mr.utcFormat,mr.utcParse}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Ii(t){return new Date(t)}function Ti(t){return t instanceof Date?+t:+new Date(+t)}function Ri(t,e,n,r,i,a,o,c,u){var s=Je(Ke,$t),l=s.invert,f=s.domain,h=u(".%L"),d=u(":%S"),p=u("%I:%M"),g=u("%I %p"),v=u("%a %d"),y=u("%b %d"),m=u("%B"),b=u("%Y"),x=[[o,1,1e3],[o,5,5e3],[o,15,15e3],[o,30,3e4],[a,1,6e4],[a,5,3e5],[a,15,9e5],[a,30,18e5],[i,1,36e5],[i,3,108e5],[i,6,216e5],[i,12,432e5],[r,1,864e5],[r,2,1728e5],[n,1,6048e5],[e,1,2592e6],[e,3,7776e6],[t,1,31536e6]];function w(c){return(o(c)<c?h:a(c)<c?d:i(c)<c?p:r(c)<c?g:e(c)<c?n(c)<c?v:y:t(c)<c?m:b)(c)}function _(e,n,r,i){if(null==e&&(e=10),"number"==typeof e){var a=Math.abs(r-n)/e,o=mt((function(t){return t[2]})).right(x,a);o===x.length?(i=Dt(n/31536e6,r/31536e6,e),e=t):o?(i=(o=x[a/x[o-1][2]<x[o][2]/a?o-1:o])[1],e=o[0]):(i=Math.max(Dt(n,r,e),1),e=c)}return null==i?e:e.every(i)}return s.invert=function(t){return new Date(l(t))},s.domain=function(t){return arguments.length?f(Ut.call(t,Ti)):f().map(Ii)},s.ticks=function(t,e){var n,r=f(),i=r[0],a=r[r.length-1],o=a<i;return o&&(n=i,i=a,a=n),n=(n=_(t,i,a,e))?n.range(i,a+1):[],o?n.reverse():n},s.tickFormat=function(t,e){return null==e?w:u(e)},s.nice=function(t,e){var n=f();return(t=_(t,n[0],n[n.length-1],e))?f(bn(n,t)):s},s.copy=function(){return Ze(s,Ri(t,e,n,r,i,a,o,c,u))},s}var Ni=function(){return Ri(Fn,jn,zn,Xn,$n,Zn,tr,nr,br).domain([new Date(2e3,0,1),new Date(2e3,0,2)])},Oi=Nn((function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCMonth(t.getUTCMonth()+e)}),(function(t,e){return e.getUTCMonth()-t.getUTCMonth()+12*(e.getUTCFullYear()-t.getUTCFullYear())}),(function(t){return t.getUTCMonth()})),Fi=(Oi.range,Nn((function(t){t.setUTCMinutes(0,0,0)}),(function(t,e){t.setTime(+t+36e5*e)}),(function(t,e){return(e-t)/36e5}),(function(t){return t.getUTCHours()}))),Li=(Fi.range,Nn((function(t){t.setUTCSeconds(0,0)}),(function(t,e){t.setTime(+t+6e4*e)}),(function(t,e){return(e-t)/6e4}),(function(t){return t.getUTCMinutes()}))),ji=(Li.range,function(t){return t.match(/.{6}/g).map((function(t){return"#"+t}))}),Bi=ji("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),zi=ji("393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6"),Hi=(ji("3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9"),ji("1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5")),Wi=Math.PI/180,Vi=180/Math.PI,Ui=-.14861,Gi=1.78277,qi=-.29227,Yi=1.97294,Xi=-.90649*Yi,Ki=Yi*Gi,$i=Gi*qi- -.90649*Ui;function Qi(t){if(t instanceof Ji)return new Ji(t.h,t.s,t.l,t.opacity);t instanceof me||(t=ve(t));var e=t.r/255,n=t.g/255,r=t.b/255,i=($i*r+Xi*e-Ki*n)/($i+Xi-Ki),a=r-i,o=(Yi*(n-i)-qi*a)/-.90649,c=Math.sqrt(o*o+a*a)/(Yi*i*(1-i)),u=c?Math.atan2(o,a)*Vi-120:NaN;return new Ji(u<0?u+360:u,c,i,t.opacity)}function Zi(t,e,n,r){return 1===arguments.length?Qi(t):new Ji(t,e,n,null==r?1:r)}function Ji(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function ta(t){return function e(n){function r(e,r){var i=t((e=Zi(e)).h,(r=Zi(r)).h),a=Te(e.s,r.s),o=Te(e.l,r.l),c=Te(e.opacity,r.opacity);return function(t){return e.h=i(t),e.s=a(t),e.l=o(Math.pow(t,n)),e.opacity=c(t),e+""}}return n=+n,r.gamma=e,r}(1)}Qt(Ji,Zi,Zt(Jt,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new Ji(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new Ji(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*Wi,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),r=Math.cos(t),i=Math.sin(t);return new me(255*(e+n*(Ui*r+Gi*i)),255*(e+n*(qi*r+-.90649*i)),255*(e+n*(Yi*r)),this.opacity)}}));ta(De);var ea=ta(Te);ea(Zi(300,.5,0),Zi(-240,.5,1)),ea(Zi(-100,.75,.35),Zi(80,1.5,.8)),ea(Zi(260,.75,.35),Zi(80,1.5,.8)),Zi();function na(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}}na(ji("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),na(ji("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),na(ji("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),na(ji("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function ra(t){var e=0,n=1,r=!1;function i(i){var a=(i-e)/(n-e);return t(r?Math.max(0,Math.min(1,a)):a)}return i.domain=function(t){return arguments.length?(e=+t[0],n=+t[1],i):[e,n]},i.clamp=function(t){return arguments.length?(r=!!t,i):r},i.interpolator=function(e){return arguments.length?(t=e,i):t},i.copy=function(){return ra(t).domain([e,n]).clamp(r)},vn(i)}var ia=function(t){for(var e=t.length/6|0,n=new Array(e),r=0;r<e;)n[r]="#"+t.slice(6*r,6*++r);return n},aa=ia("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),oa=ia("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),ca=ia("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),ua=ia("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),sa=ia("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),la=ia("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),fa=ia("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),ha=ia("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),da=function(t){return Oe(t[t.length-1])},pa=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(ia),ga=da(pa),va=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(ia),ya=da(va),ma=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(ia),ba=da(ma),xa=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(ia),wa=da(xa),_a=da(new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(ia)),ka=da(new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(ia)),Sa=da(new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(ia)),Ma=da(new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(ia)),Ea=da(new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(ia)),Ca=da(new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(ia)),Aa=da(new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(ia)),Pa=da(new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(ia)),Da=da(new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(ia)),Ia=da(new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(ia)),Ta=da(new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(ia));function Ra(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}}var Na=Ra(ia("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),Oa=Ra(ia("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),Fa=Ra(ia("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),La=Ra(ia("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921")),ja=ea(Zi(-100,.75,.35),Zi(80,1.5,.8)),Ba=ea(Zi(260,.75,.35),Zi(80,1.5,.8)),za=Zi(),Ha=function(t){(t<0||t>1)&&(t-=Math.floor(t));var e=Math.abs(t-.5);return za.h=360*t-100,za.s=1.5-1.5*e,za.l=.8-.9*e,za+""},Wa=ea(Zi(300,.5,0),Zi(-240,.5,1)),Va=da(new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(ia)),Ua=da(new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(ia)),Ga=da(new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(ia)),qa=da(new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(ia)),Ya=da(new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(ia)),Xa=da(new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(ia)),Ka=da(new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(ia)),$a=da(new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(ia)),Qa=da(new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(ia)),Za=da(new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(ia)),Ja=da(new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(ia)),to=da(new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(ia)),eo="app.units",no="local.units",ro="local.layers",io="app.layers",ao="app.group",oo="local.group",co="local.canvas",uo="app.canvas",so=function(t,e,n){var r=t[e];t[e]=t[n],t[n]=r},lo=function(t,e){return t>e?-1:t>e?1:0},fo=function(t,e,n,r,i){!function t(e,n,r,i,a){for(;i>r;){if(i-r>600){var o=i-r+1,c=n-r+1,u=Math.log(o),s=.5*Math.exp(2*u/3),l=.5*Math.sqrt(u*s*(o-s)/o)*(c-o/2<0?-1:1);t(e,n,Math.max(r,Math.floor(n-c*s/o+l)),Math.min(i,Math.floor(n+(o-c)*s/o+l)),a)}var f=e[n],h=r,d=i;for(so(e,r,n),a(e[i],f)>0&&so(e,r,i);h<d;){for(so(e,h,d),h++,d--;a(e[h],f)<0;)h++;for(;a(e[d],f)>0;)d--}0===a(e[r],f)?so(e,r,d):(d++,so(e,d,i)),d<=n&&(r=d+1),n<=d&&(i=d-1)}}(t,e,n||0,r||t.length-1,i||lo)};function ho(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return po(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return po(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,c=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return o=t.done,t},e:function(t){c=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(c)throw a}}}}function po(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var go=function(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}},vo=function(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t},yo=function(t,e,n,r,i){i||(i=go(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(var a=e;a<n;a++){var o=t.children[a];vo(i,t.leaf?r(o):o)}return i},mo=function(t,e){yo(t,0,t.children.length,e,t)},bo=function(t,e){return t.minX-e.minX},xo=function(t,e){return t.minY-e.minY},wo=function(t){return(t.maxX-t.minX)*(t.maxY-t.minY)},_o=function(t){return t.maxX-t.minX+(t.maxY-t.minY)},ko=function(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY},So=function(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY},Mo=function(t,e,n){if(!n)return e.indexOf(t);for(var r=0;r<e.length;r++)if(n(t,e[r]))return r;return-1},Eo=function(t,e,n,r,i){for(var a=[e,n];a.length;)if(!((n=a.pop())-(e=a.pop())<=r)){var o=e+Math.ceil((n-e)/r/2)*r;fo(t,o,e,n,i),a.push(e,o,o,n)}},Co=function(t,e){for(var n=[];t;)t.leaf?e.push.apply(e,U()(t.children)):n.push.apply(n,U()(t.children)),t=n.pop();return e},Ao=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:9;X()(this,t),this._maxEntries=Math.max(4,e),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()}return $()(t,[{key:"all",value:function(){return Co(this.data,[])}},{key:"search",value:function(t){var e=this.data,n=[];if(!So(t,e))return n;for(var r=this.toBBox,i=[];e;){var a,o=ho(e.children);try{for(o.s();!(a=o.n()).done;){var c=a.value,u=e.leaf?r(c):c;So(t,u)&&(e.leaf?n.push(c):ko(t,u)?Co(c,n):i.push(c))}}catch(t){o.e(t)}finally{o.f()}e=i.pop()}return n}},{key:"load",value:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0;e<t.length;e++)this.insert(t[e]);return this}var n=this.build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===n.height)this.splitRoot(this.data,n);else{if(this.data.height<n.height){var r=this.data;this.data=n,n=r}this.insertSingleItem(n,this.data.height-n.height-1,!0)}else this.data=n;return this}},{key:"insert",value:function(t){return t&&this.insertSingleItem(t,this.data.height-1),this}},{key:"clear",value:function(){return this.data=go([]),this}},{key:"remove",value:function(t,e){if(!t)return this;for(var n,r,i,a=this.data,o=this.toBBox(t),c=[],u=[];a||c.length;){if(a||(a=c.pop(),r=c[c.length-1],n=u.pop(),i=!0),a.leaf){var s=Mo(t,a.children,e);if(-1!==s)return a.children.splice(s,1),c.push(a),this.condense(c),this}i||a.leaf||!ko(a,o)?r?(n++,a=r.children[n],i=!1):a=null:(c.push(a),u.push(n),n=0,r=a,a=a.children[0])}return this}},{key:"toJSON",value:function(){return this.data}},{key:"fromJSON",value:function(t){return this.data=t,this}},{key:"toBBox",value:function(t){return t}},{key:"compareMinX",value:function(t,e){return t.minX-e.minX}},{key:"compareMinY",value:function(t,e){return t.minY-e.minY}},{key:"build",value:function(t,e,n,r){var i,a=n-e+1,o=this._maxEntries;if(a<=o)return i=go(t.slice(e,n+1)),mo(i,this.toBBox),i;r||(r=Math.ceil(Math.log(a)/Math.log(o)),o=Math.ceil(a/Math.pow(o,r-1))),(i=go([])).leaf=!1,i.height=r;var c=Math.ceil(a/o),u=c*Math.ceil(Math.sqrt(o));Eo(t,e,n,u,this.compareMinX);for(var s=e;s<=n;s+=u){var l=Math.min(s+u-1,n);Eo(t,s,l,c,this.compareMinY);for(var f=s;f<=l;f+=c){var h=Math.min(f+c-1,l);i.children.push(this.build(t,f,h,r-1))}}return mo(i,this.toBBox),i}},{key:"chooseSubtree",value:function(t,e,n,r){for(;r.push(e),!e.leaf&&r.length-1!==n;){var i,a=1/0,o=1/0,c=void 0,u=ho(e.children);try{for(u.s();!(i=u.n()).done;){var s=i.value,l=wo(s),f=(h=t,d=s,(Math.max(d.maxX,h.maxX)-Math.min(d.minX,h.minX))*(Math.max(d.maxY,h.maxY)-Math.min(d.minY,h.minY))-l);f<o?(o=f,a=l<a?l:a,c=s):f===o&&l<a&&(a=l,c=s)}}catch(t){u.e(t)}finally{u.f()}e=c||e.children[0]}var h,d;return e}},{key:"insertSingleItem",value:function(t,e,n){var r=n?t:this.toBBox(t),i=[],a=this.chooseSubtree(r,this.data,e,i);for(a.children.push(t),vo(a,r);e>=0&&i[e].children.length>this._maxEntries;)this.split(i,e),e--;this.adjustParentBoxes(r,i,e)}},{key:"split",value:function(t,e){var n=t[e],r=n.children.length,i=this._minEntries;this.chooseSplitAxis(n,i,r);var a=this.chooseSplitIndex(n,i,r),o=go(n.children.splice(a,n.children.length-a));o.height=n.height,o.leaf=n.leaf,mo(n,this.toBBox),mo(o,this.toBBox),e?t[e-1].children.push(o):this.splitRoot(n,o)}},{key:"splitRoot",value:function(t,e){this.data=go([t,e]),this.data.height=t.height+1,this.data.leaf=!1,mo(this.data,this.toBBox)}},{key:"chooseSplitIndex",value:function(t,e,n){for(var r,i,a,o,c,u,s,l=1/0,f=1/0,h=e;h<=n-e;h++){var d=yo(t,0,h,this.toBBox),p=yo(t,h,n,this.toBBox),g=(i=d,a=p,o=void 0,c=void 0,u=void 0,s=void 0,o=Math.max(i.minX,a.minX),c=Math.max(i.minY,a.minY),u=Math.min(i.maxX,a.maxX),s=Math.min(i.maxY,a.maxY),Math.max(0,u-o)*Math.max(0,s-c)),v=wo(d)+wo(p);g<l?(l=g,r=h,f=v<f?v:f):g===l&&v<f&&(f=v,r=h)}return r||n-e}},{key:"chooseSplitAxis",value:function(t,e,n){var r=t.leaf?this.compareMinX:bo,i=t.leaf?this.compareMinY:xo;this.allDistMargin(t,e,n,r)<this.allDistMargin(t,e,n,i)&&t.children.sort(r)}},{key:"allDistMargin",value:function(t,e,n,r){t.children.sort(r);for(var i=this.toBBox,a=yo(t,0,e,i),o=yo(t,n-e,n,i),c=_o(a)+_o(o),u=e;u<n-e;u++){var s=t.children[u];vo(a,t.leaf?i(s):s),c+=_o(a)}for(var l=n-e-1;l>=e;l--){var f=t.children[l];vo(o,t.leaf?i(f):f),c+=_o(o)}return c}},{key:"adjustParentBoxes",value:function(t,e,n){for(var r=n;r>=0;r--)vo(e[r],t)}},{key:"condense",value:function(t){for(var e,n=t.length-1;n>=0;n--)0===t[n].children.length?n>0?(e=t[n-1].children).splice(e.indexOf(t[n]),1):this.clear():mo(t[n],this.toBBox)}}]),t}(),Po=n(25),Do=n.n(Po),Io=n(24),To=n.n(Io),Ro=Array.prototype.slice,No=function(t){return t};function Oo(t){return"translate("+(t+.5)+",0)"}function Fo(t){return"translate(0,"+(t+.5)+")"}function Lo(t){return function(e){return+t(e)}}function jo(t){var e=Math.max(0,t.bandwidth()-1)/2;return t.round()&&(e=Math.round(e)),function(n){return+t(n)+e}}function Bo(){return!this.__axis}function zo(t,e){var n=[],r=null,i=null,a=null,o=6,c=6,u=3,s=1===t||4===t?-1:1,l=4===t||2===t?"x":"y",f=1===t||3===t?Oo:Fo;function h(h){var d=null==r?e.ticks?e.ticks.apply(e,n):e.domain():r,p=null==i?e.tickFormat?e.tickFormat.apply(e,n):No:i,g=Math.max(o,0)+u,v=e.range(),y=+v[0]+.5,m=+v[v.length-1]+.5,b=(e.bandwidth?jo:Lo)(e.copy()),x=h.selection?h.selection():h,w=x.selectAll(".domain").data([null]),_=x.selectAll(".tick").data(d,e).order(),k=_.exit(),S=_.enter().append("g").attr("class","tick"),M=_.select("line"),E=_.select("text");w=w.merge(w.enter().insert("path",".tick").attr("class","domain").attr("stroke","#000")),_=_.merge(S),M=M.merge(S.append("line").attr("stroke","#000").attr(l+"2",s*o)),E=E.merge(S.append("text").attr("fill","#000").attr(l,s*g).attr("dy",1===t?"0em":3===t?"0.71em":"0.32em")).style("transform",a),h!==x&&(w=w.transition(h),_=_.transition(h),M=M.transition(h),E=E.transition(h),k=k.transition(h).attr("opacity",1e-6).attr("transform",(function(t){return isFinite(t=b(t))?f(t):this.getAttribute("transform")})),S.attr("opacity",1e-6).attr("transform",(function(t){var e=this.parentNode.__axis;return f(e&&isFinite(e=e(t))?e:b(t))}))),k.remove(),w.attr("d",4===t||2==t?"M"+s*c+","+y+"H0.5V"+m+"H"+s*c:"M"+y+","+s*c+"V0.5H"+m+"V"+s*c),_.attr("opacity",1).attr("transform",(function(t){return f(b(t))})),M.attr(l+"2",s*o),E.attr(l,s*g).text(p),x.filter(Bo).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",2===t?"start":4===t?"end":"middle"),x.each((function(){this.__axis=b}))}return h.scale=function(t){return arguments.length?(e=t,h):e},h.tickTransform=function(t){return arguments.length?(a=t,h):a},h.ticks=function(){return n=Ro.call(arguments),h},h.tickArguments=function(t){return arguments.length?(n=null==t?[]:Ro.call(t),h):n.slice()},h.tickValues=function(t){return arguments.length?(r=null==t?null:Ro.call(t),h):r&&r.slice()},h.tickFormat=function(t){return arguments.length?(i=t,h):i},h.tickSize=function(t){return arguments.length?(o=c=+t,h):o},h.tickSizeInner=function(t){return arguments.length?(o=+t,h):o},h.tickSizeOuter=function(t){return arguments.length?(c=+t,h):c},h.tickPadding=function(t){return arguments.length?(u=+t,h):u},h}var Ho=Math.abs,Wo=Math.atan2,Vo=Math.cos,Uo=Math.max,Go=Math.min,qo=Math.sin,Yo=Math.sqrt,Xo=Math.PI,Ko=Xo/2,$o=2*Xo;function Qo(t){return t>1?0:t<-1?Xo:Math.acos(t)}function Zo(t){return t>=1?Ko:t<=-1?-Ko:Math.asin(t)}var Jo={draw:function(t,e){var n=Math.sqrt(e/Xo);t.moveTo(n,0),t.arc(0,0,n,0,$o)}},tc={draw:function(t,e){var n=Math.sqrt(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},ec=Math.sqrt(1/3),nc=2*ec,rc={draw:function(t,e){var n=Math.sqrt(e/nc),r=n*ec;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},ic={draw:function(t,e){var n=Math.sqrt(e),r=-n/2;t.rect(r,r,n,n)}},ac=Math.sin(Xo/10)/Math.sin(7*Xo/10),oc=Math.sin($o/10)*ac,cc=-Math.cos($o/10)*ac,uc={draw:function(t,e){var n=Math.sqrt(.8908130915292852*e),r=oc*n,i=cc*n;t.moveTo(0,-n),t.lineTo(r,i);for(var a=1;a<5;++a){var o=$o*a/5,c=Math.cos(o),u=Math.sin(o);t.lineTo(u*n,-c*n),t.lineTo(c*r-u*i,u*r+c*i)}t.closePath()}},sc=Math.sqrt(3)/2,lc=1/Math.sqrt(12),fc=3*(lc/2+1),hc={draw:function(t,e){var n=Math.sqrt(e/fc),r=n/2,i=n*lc,a=r,o=n*lc+n,c=-a,u=o;t.moveTo(r,i),t.lineTo(a,o),t.lineTo(c,u),t.lineTo(-.5*r-sc*i,sc*r+-.5*i),t.lineTo(-.5*a-sc*o,sc*a+-.5*o),t.lineTo(-.5*c-sc*u,sc*c+-.5*u),t.lineTo(-.5*r+sc*i,-.5*i-sc*r),t.lineTo(-.5*a+sc*o,-.5*o-sc*a),t.lineTo(-.5*c+sc*u,-.5*u-sc*c),t.closePath()}},dc=Math.sqrt(3),pc={draw:function(t,e){var n=-Math.sqrt(e/(3*dc));t.moveTo(0,2*n),t.lineTo(-dc*n,-n),t.lineTo(dc*n,-n),t.closePath()}},gc=Math.PI,vc=2*gc,yc=vc-1e-6;function mc(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function bc(){return new mc}mc.prototype=bc.prototype={constructor:mc,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,r){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(t,e,n,r,i,a){this._+="C"+ +t+","+ +e+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+a)},arcTo:function(t,e,n,r,i){t=+t,e=+e,n=+n,r=+r,i=+i;var a=this._x1,o=this._y1,c=n-t,u=r-e,s=a-t,l=o-e,f=s*s+l*l;if(i<0)throw new Error("negative radius: "+i);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(f>1e-6)if(Math.abs(l*c-u*s)>1e-6&&i){var h=n-a,d=r-o,p=c*c+u*u,g=h*h+d*d,v=Math.sqrt(p),y=Math.sqrt(f),m=i*Math.tan((gc-Math.acos((p+f-g)/(2*v*y)))/2),b=m/y,x=m/v;Math.abs(b-1)>1e-6&&(this._+="L"+(t+b*s)+","+(e+b*l)),this._+="A"+i+","+i+",0,0,"+ +(l*h>s*d)+","+(this._x1=t+x*c)+","+(this._y1=e+x*u)}else this._+="L"+(this._x1=t)+","+(this._y1=e);else;},arc:function(t,e,n,r,i,a){t=+t,e=+e,a=!!a;var o=(n=+n)*Math.cos(r),c=n*Math.sin(r),u=t+o,s=e+c,l=1^a,f=a?r-i:i-r;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+u+","+s:(Math.abs(this._x1-u)>1e-6||Math.abs(this._y1-s)>1e-6)&&(this._+="L"+u+","+s),n&&(f<0&&(f=f%vc+vc),f>yc?this._+="A"+n+","+n+",0,1,"+l+","+(t-o)+","+(e-c)+"A"+n+","+n+",0,1,"+l+","+(this._x1=u)+","+(this._y1=s):f>1e-6&&(this._+="A"+n+","+n+",0,"+ +(f>=gc)+","+l+","+(this._x1=t+n*Math.cos(i))+","+(this._y1=e+n*Math.sin(i))))},rect:function(t,e,n,r){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};var xc=bc,wc=function(t){return function(){return t}},_c=function(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n},kc=function(t){var e=t.map(Sc);return _c(t).sort((function(t,n){return e[t]-e[n]}))};function Sc(t){for(var e,n=0,r=-1,i=t.length;++r<i;)(e=+t[r][1])&&(n+=e);return n}var Mc=function(t,e){if((i=t.length)>1)for(var n,r,i,a=1,o=t[e[0]],c=o.length;a<i;++a)for(r=o,o=t[e[a]],n=0;n<c;++n)o[n][1]+=o[n][0]=isNaN(r[n][1])?r[n][0]:r[n][1]},Ec=Array.prototype.slice;function Cc(t,e){return t[e]}function Ac(t){this._context=t}Ac.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}};var Pc=function(t){return new Ac(t)};function Dc(t,e){this._context=t,this._t=e}Dc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}}this._x=t,this._y=e}};var Ic=function(t){return new Dc(t,.5)};function Tc(t){return new Dc(t,0)}function Rc(t){return new Dc(t,1)}function Nc(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function Oc(t,e){this._context=t,this._k=(1-e)/6}Oc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Nc(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:Nc(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};(function t(e){function n(t){return new Oc(t,e)}return n.tension=function(e){return t(+e)},n})(0);function Fc(t,e){this._context=t,this._alpha=e}Fc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:!function(t,e,n){var r=t._x1,i=t._y1,a=t._x2,o=t._y2;if(t._l01_a>1e-12){var c=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,u=3*t._l01_a*(t._l01_a+t._l12_a);r=(r*c-t._x0*t._l12_2a+t._x2*t._l01_2a)/u,i=(i*c-t._y0*t._l12_2a+t._y2*t._l01_2a)/u}if(t._l23_a>1e-12){var s=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,l=3*t._l23_a*(t._l23_a+t._l12_a);a=(a*s+t._x1*t._l23_2a-e*t._l12_2a)/l,o=(o*s+t._y1*t._l23_2a-n*t._l12_2a)/l}t._context.bezierCurveTo(r,i,a,o,t._x2,t._y2)}(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Lc=function t(e){function n(t){return e?new Fc(t,e):new Oc(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function jc(t){return t[0]}function Bc(t){return t[1]}var zc=function(){var t=jc,e=Bc,n=wc(!0),r=null,i=Pc,a=null;function o(o){var c,u,s,l=o.length,f=!1;for(null==r&&(a=i(s=xc())),c=0;c<=l;++c)!(c<l&&n(u=o[c],c,o))===f&&((f=!f)?a.lineStart():a.lineEnd()),f&&a.point(+t(u,c,o),+e(u,c,o));if(s)return a=null,s+""||null}return o.x=function(e){return arguments.length?(t="function"==typeof e?e:wc(+e),o):t},o.y=function(t){return arguments.length?(e="function"==typeof t?t:wc(+t),o):e},o.defined=function(t){return arguments.length?(n="function"==typeof t?t:wc(!!t),o):n},o.curve=function(t){return arguments.length?(i=t,null!=r&&(a=i(r)),o):i},o.context=function(t){return arguments.length?(null==t?r=a=null:a=i(r=t),o):r},o},Hc=function(t,e){return e<t?-1:e>t?1:e>=t?0:NaN},Wc=function(t){return t};function Vc(t){return t.innerRadius}function Uc(t){return t.outerRadius}function Gc(t){return t.startAngle}function qc(t){return t.endAngle}function Yc(t){return t&&t.padAngle}function Xc(t,e,n,r,i,a,o,c){var u=n-t,s=r-e,l=o-i,f=c-a,h=f*u-l*s;if(!(h*h<1e-12))return[t+(h=(l*(e-a)-f*(t-i))/h)*u,e+h*s]}function Kc(t,e,n,r,i,a,o){var c=t-n,u=e-r,s=(o?a:-a)/Yo(c*c+u*u),l=s*u,f=-s*c,h=t+l,d=e+f,p=n+l,g=r+f,v=(h+p)/2,y=(d+g)/2,m=p-h,b=g-d,x=m*m+b*b,w=i-a,_=h*g-p*d,k=(b<0?-1:1)*Yo(Uo(0,w*w*x-_*_)),S=(_*b-m*k)/x,M=(-_*m-b*k)/x,E=(_*b+m*k)/x,C=(-_*m+b*k)/x,A=S-v,P=M-y,D=E-v,I=C-y;return A*A+P*P>D*D+I*I&&(S=E,M=C),{cx:S,cy:M,x01:-l,y01:-f,x11:S*(i/w-1),y11:M*(i/w-1)}}function $c(t){return function(e,n){var r=t((e=Se(e)).h,(n=Se(n)).h),i=Te(e.s,n.s),a=Te(e.l,n.l),o=Te(e.opacity,n.opacity);return function(t){return e.h=r(t),e.s=i(t),e.l=a(t),e.opacity=o(t),e+""}}}$c(De);var Qc=$c(Te);function Zc(t,e){for(var n=0,r=e.length-1,i=e[0],a=new Array(r<0?0:r);n<r;)a[n]=t(i,i=e[++n]);return function(t){var e=Math.max(0,Math.min(r-1,Math.floor(t*=r)));return a[e](t-e)}}function Jc(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var tu=7.5625;function eu(t){return(t=+t)<4/11?tu*t*t:t<8/11?tu*(t-=6/11)*t+3/4:t<10/11?tu*(t-=9/11)*t+15/16:tu*(t-=21/22)*t+63/64}var nu=2*Math.PI,ru=(function t(e,n){var r=Math.asin(1/(e=Math.max(1,e)))*(n/=nu);function i(t){return e*Math.pow(2,10*--t)*Math.sin((r-t)/n)}return i.amplitude=function(e){return t(e,n*nu)},i.period=function(n){return t(e,n)},i}(1,.3),function t(e,n){var r=Math.asin(1/(e=Math.max(1,e)))*(n/=nu);function i(t){return 1-e*Math.pow(2,-10*(t=+t))*Math.sin((t+r)/n)}return i.amplitude=function(e){return t(e,n*nu)},i.period=function(n){return t(e,n)},i}(1,.3)),iu=(function t(e,n){var r=Math.asin(1/(e=Math.max(1,e)))*(n/=nu);function i(t){return((t=2*t-1)<0?e*Math.pow(2,10*t)*Math.sin((r-t)/n):2-e*Math.pow(2,-10*t)*Math.sin((r+t)/n))/2}return i.amplitude=function(e){return t(e,n*nu)},i.period=function(n){return t(e,n)},i}(1,.3),function t(e){function n(t){return t*t*((e+1)*t-e)}return e=+e,n.overshoot=t,n}(1.70158),function t(e){function n(t){return--t*t*((e+1)*t+e)+1}return e=+e,n.overshoot=t,n}(1.70158),function t(e){function n(t){return((t*=2)<1?t*t*((e+1)*t-e):(t-=2)*t*((e+1)*t+e)+2)/2}return e=+e,n.overshoot=t,n}(1.70158)),au=(function t(e){function n(t){return Math.pow(t,e)}return e=+e,n.exponent=t,n}(3),function t(e){function n(t){return 1-Math.pow(1-t,e)}return e=+e,n.exponent=t,n}(3),function t(e){function n(t){return((t*=2)<=1?Math.pow(t,e):2-Math.pow(2-t,e))/2}return e=+e,n.exponent=t,n}(3));var ou=function(t){return function(){return t}};function cu(t){return t[0]}function uu(t){return t[1]}function su(){this._=null}function lu(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function fu(t,e){var n=e,r=e.R,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function hu(t,e){var n=e,r=e.L,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function du(t){for(;t.L;)t=t.L;return t}su.prototype={constructor:su,insert:function(t,e){var n,r,i;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else this._?(t=du(this._),e.P=null,e.N=t,t.P=t.L=e,n=t):(e.P=e.N=null,this._=e,n=null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)n===(r=n.U).L?(i=r.R)&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.R&&(fu(this,n),n=(t=n).U),n.C=!1,r.C=!0,hu(this,r)):(i=r.L)&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.L&&(hu(this,n),n=(t=n).U),n.C=!1,r.C=!0,fu(this,r)),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,n,r,i=t.U,a=t.L,o=t.R;if(n=a?o?du(o):a:o,i?i.L===t?i.L=n:i.R=n:this._=n,a&&o?(r=n.C,n.C=t.C,n.L=a,a.U=n,n!==o?(i=n.U,n.U=t.U,t=n.R,i.L=t,n.R=o,o.U=n):(n.U=i,i=n,t=n.R)):(r=t.C,t=n),t&&(t.U=i),!r)if(t&&t.C)t.C=!1;else{do{if(t===this._)break;if(t===i.L){if((e=i.R).C&&(e.C=!1,i.C=!0,fu(this,i),e=i.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,hu(this,e),e=i.R),e.C=i.C,i.C=e.R.C=!1,fu(this,i),t=this._;break}}else if((e=i.L).C&&(e.C=!1,i.C=!0,hu(this,i),e=i.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,fu(this,e),e=i.L),e.C=i.C,i.C=e.L.C=!1,hu(this,i),t=this._;break}e.C=!0,t=i,i=i.U}while(!t.C);t&&(t.C=!1)}}};var pu=su;function gu(t,e,n,r){var i=[null,null],a=Bu.push(i)-1;return i.left=t,i.right=e,n&&yu(i,t,e,n),r&&yu(i,e,t,r),Lu[t.index].halfedges.push(a),Lu[e.index].halfedges.push(a),i}function vu(t,e,n){var r=[e,n];return r.left=t,r}function yu(t,e,n,r){t[0]||t[1]?t.left===n?t[1]=r:t[0]=r:(t[0]=r,t.left=e,t.right=n)}function mu(t,e,n,r,i){var a,o=t[0],c=t[1],u=o[0],s=o[1],l=0,f=1,h=c[0]-u,d=c[1]-s;if(a=e-u,h||!(a>0)){if(a/=h,h<0){if(a<l)return;a<f&&(f=a)}else if(h>0){if(a>f)return;a>l&&(l=a)}if(a=r-u,h||!(a<0)){if(a/=h,h<0){if(a>f)return;a>l&&(l=a)}else if(h>0){if(a<l)return;a<f&&(f=a)}if(a=n-s,d||!(a>0)){if(a/=d,d<0){if(a<l)return;a<f&&(f=a)}else if(d>0){if(a>f)return;a>l&&(l=a)}if(a=i-s,d||!(a<0)){if(a/=d,d<0){if(a>f)return;a>l&&(l=a)}else if(d>0){if(a<l)return;a<f&&(f=a)}return!(l>0||f<1)||(l>0&&(t[0]=[u+l*h,s+l*d]),f<1&&(t[1]=[u+f*h,s+f*d]),!0)}}}}}function bu(t,e,n,r,i){var a=t[1];if(a)return!0;var o,c,u=t[0],s=t.left,l=t.right,f=s[0],h=s[1],d=l[0],p=l[1],g=(f+d)/2,v=(h+p)/2;if(p===h){if(g<e||g>=r)return;if(f>d){if(u){if(u[1]>=i)return}else u=[g,n];a=[g,i]}else{if(u){if(u[1]<n)return}else u=[g,i];a=[g,n]}}else if(c=v-(o=(f-d)/(p-h))*g,o<-1||o>1)if(f>d){if(u){if(u[1]>=i)return}else u=[(n-c)/o,n];a=[(i-c)/o,i]}else{if(u){if(u[1]<n)return}else u=[(i-c)/o,i];a=[(n-c)/o,n]}else if(h<p){if(u){if(u[0]>=r)return}else u=[e,o*e+c];a=[r,o*r+c]}else{if(u){if(u[0]<e)return}else u=[r,o*r+c];a=[e,o*e+c]}return t[0]=u,t[1]=a,!0}function xu(t,e){var n=t.site,r=e.left,i=e.right;return n===i&&(i=r,r=n),i?Math.atan2(i[1]-r[1],i[0]-r[0]):(n===r?(r=e[1],i=e[0]):(r=e[0],i=e[1]),Math.atan2(r[0]-i[0],i[1]-r[1]))}function wu(t,e){return e[+(e.left!==t.site)]}function _u(t,e){return e[+(e.left===t.site)]}var ku,Su=[];function Mu(){lu(this),this.x=this.y=this.arc=this.site=this.cy=null}function Eu(t){var e=t.P,n=t.N;if(e&&n){var r=e.site,i=t.site,a=n.site;if(r!==a){var o=i[0],c=i[1],u=r[0]-o,s=r[1]-c,l=a[0]-o,f=a[1]-c,h=2*(u*f-s*l);if(!(h>=-Hu)){var d=u*u+s*s,p=l*l+f*f,g=(f*d-s*p)/h,v=(u*p-l*d)/h,y=Su.pop()||new Mu;y.arc=t,y.site=i,y.x=g+o,y.y=(y.cy=v+c)+Math.sqrt(g*g+v*v),t.circle=y;for(var m=null,b=ju._;b;)if(y.y<b.y||y.y===b.y&&y.x<=b.x){if(!b.L){m=b.P;break}b=b.L}else{if(!b.R){m=b;break}b=b.R}ju.insert(m,y),m||(ku=y)}}}}function Cu(t){var e=t.circle;e&&(e.P||(ku=e.N),ju.remove(e),Su.push(e),lu(e),t.circle=null)}var Au=[];function Pu(){lu(this),this.edge=this.site=this.circle=null}function Du(t){var e=Au.pop()||new Pu;return e.site=t,e}function Iu(t){Cu(t),Fu.remove(t),Au.push(t),lu(t)}function Tu(t){var e=t.circle,n=e.x,r=e.cy,i=[n,r],a=t.P,o=t.N,c=[t];Iu(t);for(var u=a;u.circle&&Math.abs(n-u.circle.x)<zu&&Math.abs(r-u.circle.cy)<zu;)a=u.P,c.unshift(u),Iu(u),u=a;c.unshift(u),Cu(u);for(var s=o;s.circle&&Math.abs(n-s.circle.x)<zu&&Math.abs(r-s.circle.cy)<zu;)o=s.N,c.push(s),Iu(s),s=o;c.push(s),Cu(s);var l,f=c.length;for(l=1;l<f;++l)s=c[l],u=c[l-1],yu(s.edge,u.site,s.site,i);u=c[0],(s=c[f-1]).edge=gu(u.site,s.site,null,i),Eu(u),Eu(s)}function Ru(t){for(var e,n,r,i,a=t[0],o=t[1],c=Fu._;c;)if((r=Nu(c,o)-a)>zu)c=c.L;else{if(!((i=a-Ou(c,o))>zu)){r>-zu?(e=c.P,n=c):i>-zu?(e=c,n=c.N):e=n=c;break}if(!c.R){e=c;break}c=c.R}!function(t){Lu[t.index]={site:t,halfedges:[]}}(t);var u=Du(t);if(Fu.insert(e,u),e||n){if(e===n)return Cu(e),n=Du(e.site),Fu.insert(u,n),u.edge=n.edge=gu(e.site,u.site),Eu(e),void Eu(n);if(n){Cu(e),Cu(n);var s=e.site,l=s[0],f=s[1],h=t[0]-l,d=t[1]-f,p=n.site,g=p[0]-l,v=p[1]-f,y=2*(h*v-d*g),m=h*h+d*d,b=g*g+v*v,x=[(v*m-d*b)/y+l,(h*b-g*m)/y+f];yu(n.edge,s,p,x),u.edge=gu(s,t,null,x),n.edge=gu(t,p,null,x),Eu(e),Eu(n)}else u.edge=gu(e.site,u.site)}}function Nu(t,e){var n=t.site,r=n[0],i=n[1],a=i-e;if(!a)return r;var o=t.P;if(!o)return-1/0;var c=(n=o.site)[0],u=n[1],s=u-e;if(!s)return c;var l=c-r,f=1/a-1/s,h=l/s;return f?(-h+Math.sqrt(h*h-2*f*(l*l/(-2*s)-u+s/2+i-a/2)))/f+r:(r+c)/2}function Ou(t,e){var n=t.N;if(n)return Nu(n,e);var r=t.site;return r[1]===e?r[0]:1/0}var Fu,Lu,ju,Bu,zu=1e-6,Hu=1e-12;function Wu(t,e){return e[1]-t[1]||e[0]-t[0]}function Vu(t,e){var n,r,i,a=t.sort(Wu).pop();for(Bu=[],Lu=new Array(t.length),Fu=new pu,ju=new pu;;)if(i=ku,a&&(!i||a[1]<i.y||a[1]===i.y&&a[0]<i.x))a[0]===n&&a[1]===r||(Ru(a),n=a[0],r=a[1]),a=t.pop();else{if(!i)break;Tu(i.arc)}if(function(){for(var t,e,n,r,i=0,a=Lu.length;i<a;++i)if((t=Lu[i])&&(r=(e=t.halfedges).length)){var o=new Array(r),c=new Array(r);for(n=0;n<r;++n)o[n]=n,c[n]=xu(t,Bu[e[n]]);for(o.sort((function(t,e){return c[e]-c[t]})),n=0;n<r;++n)c[n]=e[o[n]];for(n=0;n<r;++n)e[n]=c[n]}}(),e){var o=+e[0][0],c=+e[0][1],u=+e[1][0],s=+e[1][1];!function(t,e,n,r){for(var i,a=Bu.length;a--;)bu(i=Bu[a],t,e,n,r)&&mu(i,t,e,n,r)&&(Math.abs(i[0][0]-i[1][0])>zu||Math.abs(i[0][1]-i[1][1])>zu)||delete Bu[a]}(o,c,u,s),function(t,e,n,r){var i,a,o,c,u,s,l,f,h,d,p,g,v=Lu.length,y=!0;for(i=0;i<v;++i)if(a=Lu[i]){for(o=a.site,c=(u=a.halfedges).length;c--;)Bu[u[c]]||u.splice(c,1);for(c=0,s=u.length;c<s;)p=(d=_u(a,Bu[u[c]]))[0],g=d[1],f=(l=wu(a,Bu[u[++c%s]]))[0],h=l[1],(Math.abs(p-f)>zu||Math.abs(g-h)>zu)&&(u.splice(c,0,Bu.push(vu(o,d,Math.abs(p-t)<zu&&r-g>zu?[t,Math.abs(f-t)<zu?h:r]:Math.abs(g-r)<zu&&n-p>zu?[Math.abs(h-r)<zu?f:n,r]:Math.abs(p-n)<zu&&g-e>zu?[n,Math.abs(f-n)<zu?h:e]:Math.abs(g-e)<zu&&p-t>zu?[Math.abs(h-e)<zu?f:t,e]:null))-1),++s);s&&(y=!1)}if(y){var m,b,x,w=1/0;for(i=0,y=null;i<v;++i)(a=Lu[i])&&(x=(m=(o=a.site)[0]-t)*m+(b=o[1]-e)*b)<w&&(w=x,y=a);if(y){var _=[t,e],k=[t,r],S=[n,r],M=[n,e];y.halfedges.push(Bu.push(vu(o=y.site,_,k))-1,Bu.push(vu(o,k,S))-1,Bu.push(vu(o,S,M))-1,Bu.push(vu(o,M,_))-1)}}for(i=0;i<v;++i)(a=Lu[i])&&(a.halfedges.length||delete Lu[i])}(o,c,u,s)}this.edges=Bu,this.cells=Lu,Fu=ju=Bu=Lu=null}Vu.prototype={constructor:Vu,polygons:function(){var t=this.edges;return this.cells.map((function(e){var n=e.halfedges.map((function(n){return wu(e,t[n])}));return n.data=e.site.data,n}))},triangles:function(){var t=[],e=this.edges;return this.cells.forEach((function(n,r){if(a=(i=n.halfedges).length)for(var i,a,o,c,u,s,l=n.site,f=-1,h=e[i[a-1]],d=h.left===l?h.right:h.left;++f<a;)o=d,d=(h=e[i[f]]).left===l?h.right:h.left,o&&d&&r<o.index&&r<d.index&&(u=o,s=d,((c=l)[0]-s[0])*(u[1]-c[1])-(c[0]-u[0])*(s[1]-c[1])<0)&&t.push([l.data,o.data,d.data])})),t},links:function(){return this.edges.filter((function(t){return t.right})).map((function(t){return{source:t.left.data,target:t.right.data}}))},find:function(t,e,n){for(var r,i,a=this,o=a._found||0,c=a.cells.length;!(i=a.cells[o]);)if(++o>=c)return null;var u=t-i.site[0],s=e-i.site[1],l=u*u+s*s;do{i=a.cells[r=o],o=null,i.halfedges.forEach((function(n){var r=a.edges[n],c=r.left;if(c!==i.site&&c||(c=r.right)){var u=t-c[0],s=e-c[1],f=u*u+s*s;f<l&&(l=f,o=c.index)}}))}while(null!==o);return a._found=r,null==n||l<=n*n?i.site:null}};var Uu=function(){var t=cu,e=uu,n=null;function r(r){return new Vu(r.map((function(n,i){var a=[Math.round(t(n,i,r)/zu)*zu,Math.round(e(n,i,r)/zu)*zu];return a.index=i,a.data=n,a})),n)}return r.polygons=function(t){return r(t).polygons()},r.links=function(t){return r(t).links()},r.triangles=function(t){return r(t).triangles()},r.x=function(e){return arguments.length?(t="function"==typeof e?e:ou(+e),r):t},r.y=function(t){return arguments.length?(e="function"==typeof t?t:ou(+t),r):e},r.extent=function(t){return arguments.length?(n=null==t?null:[[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]],r):n&&[[n[0][0],n[0][1]],[n[1][0],n[1][1]]]},r.size=function(t){return arguments.length?(n=null==t?null:[[0,0],[+t[0],+t[1]]],r):n&&[n[1][0]-n[0][0],n[1][1]-n[0][1]]},r},Gu=function(){function t(e){X()(this,t),this._dataObjects=new Map,this._updateData=new Map,this._enterData=new Map,this._exitData=new Map,this._idGetter=e}return $()(t,[{key:"data",value:function(e){var n,r=new Map,i=new Map,a=new Map,o=new Map,c=this._updateData,u=this._idGetter;e.forEach((function(){var t=u?u.apply(void 0,arguments):arguments.length<=1?void 0:arguments[1];a.has(t)?o.push(t,arguments.length<=0?void 0:arguments[0]):a.set(t,arguments.length<=0?void 0:arguments[0])}));for(var s=a.entries();n=s.next().value;)c.has(n[0])?c.set(n[0],n[1]):r.set(n[0],n[1]);for(s=c.entries();n=s.next().value;)a.has(n[0])||i.set(n[0],n[1]);for(s=o.entries();n=s.next().value;)i.set(n[0],n[1]);var l=new t(this._idGetter);return l._updateData=c,l._dataObjects=this._dataObjects,l._enterData=r,l._exitData=i,l}},{key:"append",value:function(e){for(var n,r=new Map,i=new Map,a=ks(this._mode,"update"),o=this["_".concat(a,"Data")].entries();n=o.next().value;)r.set(n[0],e(n[1])),i.set(n[0],n[1]);var c=new t(this._idGetter);return c._updateData=i,c._dataObjects=r,c}},{key:"enter",value:function(){return this._mode="enter",this}},{key:"exit",value:function(){return this._mode="exit",this}},{key:"merge",value:function(e){var n,r,i=new Map,a=new Map;for(r=this._updateData.entries();n=r.next().value;)this._exitData.has(n[0])||(a.set(n[0],n[1]),i.set(n[0],this._dataObjects.get(n[0])));for(r=e._updateData.entries();n=r.next().value;)a.has(n[0])||e._exitData.has(n[0])||(a.set(n[0],n[1]),i.set(n[0],e._dataObjects.get(n[0])));var o=new t(this._idGetter);return o._updateData=a,o._dataObjects=i,o}},{key:"each",value:function(t){for(var e,n=this._dataObjects.entries();e=n.next().value;)t(e[1],this._updateData.get(e[0]),e[0])}},{key:"map",value:function(e){for(var n,r=new Map,i=this._dataObjects.entries();n=i.next().value;)r.set(n[0],e(n[1],this._updateData.get(n[0]),n[0]));var a=new t(this._idGetter);return a._updateData=this._updateData,a._dataObjects=r,a}},{key:"remove",value:function(){var t=ks(this._mode,"update");return this["_".concat(t,"Data")].clear(),this}},{key:"sort",value:function(t){var e=this._updateData,n=this._dataObjects,r=function(t,e,n){return function(r,i){var a=r[0],o=i[0];return n([r[0],t.get(a),e.get(a)],[o,t.get(o),e.get(o)])}}(n,e,t);return this._updateData=new Map(U()(e.entries()).sort(r)),this._dataObjects=new Map(U()(n.entries()).sort(r)),this}},{key:"getObjects",value:function(){for(var t,e=[],n=this._dataObjects,r=ks(this._mode,"update"),i=this["_".concat(r,"Data")].entries();t=i.next().value;)n.has(t[0])&&e.push(n.get(t[0]));return e}}]),t}();function qu(t){return new Gu(t)}var Yu,Xu,Ku,$u=lt,Qu=st,Zu=window.HTMLElement,Ju=function(t){if("object"===To()(t)){if(null===t)return!1;if("[object Object]"===Object.prototype.toString.call(t))return"Object"===(t.constructor.toString().match(/^function (.*)\(\)/m)||[])[1]}return!1},ts=function(){return"id-".concat((new Date).getTime()).concat(Math.round(1e4*Math.random()))},es=function t(e){var n,r={};for(var i in e)({}).hasOwnProperty.call(e,i)&&(n=e[i],r[i]=Ju(n)?t(n):n);return r},ns=function(t,e){var n=[];return t.forEach((function(t){t in e||n.push(t)})),n},rs={typeObj:function(t,e){if("object"!==To()(e))return Error("Argument type object expected");var n=ns(t,e);return n.length?Error("Missing keys from parameter ".concat(n.join(", "))):e},htmlElem:function(t){return t instanceof Zu?t:Error("HTMLElement required")}},is=function(t,e){for(var n=-1/0,r=0;r<t.length;r++)n=Math.max(e?t[r][e]:t[r],n);return n},as=function(t,e){for(var n=1/0,r=0;r<t.length;r++)n=Math.min(e?t[r][e]:t[r],n);return n},os=function(t,e,n){var r,i,a=[];switch(t=t[0]instanceof Array?t:[t],n){case"categorical":i=(r=[]).concat.apply(r,U()(t.map((function(t){return t.map((function(t){return t[e[0]]})).filter((function(t){return void 0!==t}))}))));break;default:for(var o=function(n,r){var i=t[n],o=q()(e,2),c=o[0],u=o[1],s=i.filter((function(t){return!isNaN(t[c])})),l=i.filter((function(t){return!isNaN(t[u])}));if(s.length||l.length){var f=as(s,c),h=as(l,u),d=is(s,c),p=is(l,u);a.push([Math.min(f,h),Math.max(d,p)])}},c=0,u=t.length;c<u;c++)o(c);i=a.length?[Math.min.apply(Math,U()(a.map((function(t){return t[0]})))),Math.max.apply(Math,U()(a.map((function(t){return t[1]}))))]:[]}return i},cs=function(t){return t[0]===t[1]&&(t[0]=t[0]>0?0:t[0],t[1]=t[1]>0?t[1]:0),t},us=function(t,e){var n=[],r=gt.FieldSubtype.CATEGORICAL;return(t=t.filter((function(t){return t&&t.length}))).length&&(n=e===r?U()(new Set(t.flat())):[Math.min.apply(Math,U()(t.map((function(t){return t[0]})))),Math.max.apply(Math,U()(t.map((function(t){return t[1]}))))]),n},ss={circle:Jo,cross:tc,diamond:rc,square:ic,star:uc,wye:hc,triangle:pc},ls={cubic:Jc,bounce:eu,linear:function(t){return+t},elastic:ru,back:iu,poly:au,circle:function(t){return((t*=2)<=1?1-Math.sqrt(1-t*t):Math.sqrt(1-(t-=2)*t)+1)/2}},fs=function(t,e,n){for(var r,i,a,o=t.length,c="max"===n?-1/0:1/0,u=0;u<o;u++)a=(i=t[u])[e],("min"===n?a<c:a>c)&&(c=a,r=i);return r},hs=function(t,e){return fs(t,e,"min")},ds=function(t,e){return fs(t,e,"max")},ps=function(t,e,n){for(var r,i,a=0,o=t.length-1;a<o;)r=Math.floor((a+o)/2),i=Math.abs(t[r]-e),Math.abs(t[r+1]-e)<=i?a=r+1:o=r;if(!n)return o;var c=t[o];return c===e?o:c>e?0===o?o:"left"===n?o-1:o:o===t.length-1||"left"===n?o:o+1},gs=function(t,e){var n=t.filter((function(t){return"number"==typeof t}));return n[ps(n,e)]},vs=function(){return window},ys=requestAnimationFrame,ms=cancelAnimationFrame,bs=function(t){return(t=t.toLowerCase()).replace(/\w\S*/g,(function(t){return t.charAt(0).toUpperCase()+t.substr(1)}))},xs=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(t){return t},n=t.reduce((function(t,n){return t[e(n)]=n,t}),{});return Object.values(n)},ws=function(t,e){var n,r;if((r=xs(void 0!==e?t.map((function(t){return t[e]})):t)).length>1){n=Math.abs(r[1]-r[0]);for(var i=2,a=r.length;i<a;i++)n=Math.min(n,Math.abs(r[i]-r[i-1]))}else n=r[0];return n},_s=function(t,e,n){return t=t.replace(/^\.*/,""),["".concat(n,"-").concat(t),"".concat(n,"-").concat(t,"-").concat(e)]},ks=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.find((function(t){return!(void 0===t||"object"===To()(t)&&!t)}))},Ss=function(t){for(var e=[],n={},r=Object.keys(t),i=function i(a){if(e.length===r.length)return!0;n[a]=!0;for(var o=t[a],c=0;c<o.length;c++){var u=o[c];n[u]||i(u)}return e.push(a),!1},a=0;a<r.length&&!i(r[a]);a++);return e},Ms=function(t,e){for(var n in t)Object.hasOwnProperty.call(t,n)&&e(n,t)},Es=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];X()(this,t),this._voronoi=Uu().x((function(t){return t.x})).y((function(t){return t.y})),this.data(e)}return $()(t,[{key:"data",value:function(t){return t&&(this._voronoiFn=this._voronoi(t)),this}},{key:"find",value:function(t,e,n){return this._voronoiFn.find(t,e,n)}}]),t}(),Cs=function(t){if(null==t)return t;for(var e=t,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(var a=0,o=r.length;a<o&&null!=(e=e[r[a]]);a++);return e},As=function(t){var e=t.toString().match(/(\d+)(px)*/g);return e?parseInt(e[0],10):null},Ps=function(t,e){Object.entries(e).forEach((function(e){var n=e[0],r=e[1],i=r.sanitization,a=r.preset,o=r.onset,c=r.typeChecker,u=r.defaultValue,s=t.constructor.prototype;Object.hasOwnProperty.call(s,n)||(u&&(t["_".concat(n)]=u),t[n]=function(){if(arguments.length){var e=arguments.length<=0?void 0:arguments[0];return i&&(e=i(t,arguments.length<=0?void 0:arguments[0],t["_".concat(n)])),a&&a(t,e),c&&!c(e)?t["_".concat(n)]:(t["_".concat(n)]=e,o&&o(t,e),t)}return t["_".concat(n)]})}))},Ds=function(t,e){return t.reduce((function(t,n){return t+=e?n[e]:n}),0)},Is=function(t,e){if(t.length!==e.length)return!1;for(var n=t.length;n>=0;n--)if(t[n]!==e[n])return!1;return!0},Ts=function(t){return function(e,n){return"Array"===t?!!e&&Is(e,n):"Object"===t?Object.is(e,n):e===n}},Rs=function(t,e,n){return n.forEach((function(n){return t.registerImmediateListener(n,(function(t){var r=q()(t,2)[1];return e[n](r)}))}))},Ns=function(t){return t instanceof Zu},Os={INTERFACE_IMPL:"Method not implemented"},Fs=function t(e,n){for(var r in n)Ju(e[r])&&Ju(n[r])?t(e[r],n[r]):n[r]instanceof Object&&n[r].constructor===Object?(e[r]={},t(e[r],n[r])):e[r]=n[r];return e},Ls=function(t,e,n,r){var i=t||qu(r),a=(i=i.data(n)).enter().append(e).merge(i),o=i.exit();return o.getObjects().forEach((function(t){return t.remove()})),o.remove(),a},js=function(t,e){var n=function(t,e,n){return t+(e-t)*n},r=[],i=(t.length-1)/(e-1);r[0]=t[0];for(var a=1;a<e-1;a++){var o=a*i,c=Math.floor(o).toFixed(),u=Math.ceil(o).toFixed(),s=o-c;r[a]=n(t[c],t[u],s)}return r[e-1]=t[t.length-1],r},Bs=function(t){setTimeout((function(){t()}),0)},zs=function(t){return t*Math.PI/180},Hs=function(){},Ws=function(){return Ue},Vs=function(){return $t},Us=function(){return Re},Gs=function(){return Qc},qs=function(){return{color:de,rgb:ye,hsl:Se}},Ys=function(){return Zc};function Xs(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t}var Ks=function(t,e,n){var r,i,a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;if(0===e)r=i=a=n;else{var c=n<.5?n*(1+e):n+e-n*e,u=2*n-c;r=Xs(u,c,t+1/3),i=Xs(u,c,t),a=Xs(u,c,t-1/3)}return[255*r,255*i,255*a,o]},$s=function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;t=+t,e=+e,n=+n,r=+r,t/=255,e/=255,n/=255;var i,a,o=Math.max(t,e,n),c=Math.min(t,e,n),u=(o+c)/2;if(o===c)i=a=0;else{var s=o-c;switch(a=u>.5?s/(2-o-c):s/(o+c),o){case t:i=(e-n)/s+(e<n?6:0);break;case e:i=(n-t)/s+2;break;case n:i=(t-e)/s+4}i/=6}return[i,a,u,r]},Qs=function(t,e,n){var r,i,a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,c=Math.floor(6*t),u=6*t-c,s=n*(1-e),l=n*(1-u*e),f=n*(1-(1-u)*e);switch(c%6){case 0:r=n,i=f,a=s;break;case 1:r=l,i=n,a=s;break;case 2:r=s,i=n,a=f;break;case 3:r=s,i=l,a=n;break;case 4:r=f,i=s,a=n;break;case 5:r=n,i=s,a=l}return[255*r,255*i,255*a,o]},Zs=function(t){t=t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(function(t,e,n,r){return e+e+n+n+r+r}));var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?$s(parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)):""},Js=function(t,e,n,r){var i=Ks(t,e,n,r),a=q()(i,4);return function(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:255,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:255,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:255,c=Math.round((1-r)*i+r*t),u=Math.round((1-r)*a+r*e),s=Math.round((1-r)*o+r*n);return"rgb(".concat(c,",").concat(u,",").concat(s,")")}(a[0],a[1],a[2],a[3])},tl=function(t){return/rgb\((\d{1,3}), (\d{1,3}), (\d{1,3})\)/.test(t)||/rgba?\(((25[0-5]|2[0-4]\d|1\d{1,2}|\d\d?)\s*,\s*?){2}(25[0-5]|2[0-4]\d|1\d{1,2}|\d\d?)\s*,?\s*([01]\.?\d*?)?\)/.test(t)?"rgb":/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(t)||/^hsla\(([\d.]+),\s*([\d.]+)%,\s*([\d.]+)%,\s*(\d*(?:\.\d+)?)\)$/.test(t)?"hsl":/^#([0-9a-f]{3}){1,2}$/i.test(t)?"hex":t};var el=function(t,e){var n,r=[];return e.length?function(){for(var i=e[0],a=i.length,o=0;o<a;o++){var c=i[o],u=c&&Object.assign({},t.getField(c).getSchema());u&&r.push(Object.assign(u))}n=[];for(var s=e[0],l=function(t){var r=e[t],i={};r.forEach((function(t,e){i[s[e]]=t})),n.push(i)},f=1;f<e.length;f+=1)l(f)}():(n=[],r=[]),new t.constructor(n,r)},nl=function(t,e,n,r){if(null===e)return null;var i=r||Object.keys(e).filter((function(e){return t.isFieldPresent(e)}));return t.select((function(t){return i.every((function(n){var r=t[n].internalValue,i=e[n][0]instanceof Array?e[n][0]:e[n];return To()(i[0])===$u?void 0!==i.find((function(t){return t===r})):!!i&&(r>=i[0]&&r<=i[1])}))}),{saveChild:!1,mode:n})},rl=function(t){return t.reduce((function(t,e,n){return t[e]=n,t}),{})},il=function(t,e,n,r){var i;if(e instanceof Array){var a=e.slice(1,e.length);if(e instanceof Function)i=e(t,{},!1);else if(e instanceof Array&&e[0].length){var o=e[0].filter((function(e){return t.isFieldPresent(e)||e===ot.ROW_ID}));i=t.select((function(t,e){var n=!0;return o.forEach((function(r,i){var o=r===ot.ROW_ID?e:t[r].internalValue,c=a.findIndex((function(t){return t[i]===o}));n=n&&-1!==c})),n}),{saveChild:!1,mode:n})}else i=t.select((function(){return!1}),{saveChild:!1,mode:n})}else i=nl(t,e,n,r);return i},al=function(t,e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];var a=e.apply(void 0,[t].concat(r));for(var o in a)if({}.hasOwnProperty.call(a,o)){var c=r[1].namespace,u=null;c&&(u=c);var s=a[o],l=s.type,f=s.props,h=s.listener;t.store()[l](f,h,!1,{namespace:u})}},ol=function(t){return!isNaN(t)&&t!==-1/0&&t!==1/0},cl=function(t){var e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"};return"".concat(t).replace(/[&<>"'/]/g,(function(t){return e[t]}))},ul=function(t){return t[0].map((function(e,n){return t.map((function(t){return t[n]}))}))},sl=function(t){return t instanceof Array?t:[t]},ll=function t(e,n,r){if(!e)return!1;var i=e.prototype;return r=i instanceof n||t(i,n,r)},fl=function(t){return function(){var t=wc(Jo),e=wc(64),n=null;function r(){var r;if(n||(n=r=xc()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),r)return n=null,r+""||null}return r.type=function(e){return arguments.length?(t="function"==typeof e?e:wc(e),r):t},r.size=function(t){return arguments.length?(e="function"==typeof t?t:wc(+t),r):e},r.context=function(t){return arguments.length?(n=null==t?null:t,r):n},r}().type(ss[t])},hl=(Yu={},Do()(Yu,"none",_c),Do()(Yu,"ascending",kc),Do()(Yu,"descending",(function(t){return kc(t).reverse()})),Yu),dl=(Xu={},Do()(Xu,"diverging",(function(t,e){if((c=t.length)>0)for(var n,r,i,a,o,c,u=0,s=t[e[0]].length;u<s;++u)for(a=o=0,n=0;n<c;++n)(i=(r=t[e[n]][u])[1]-r[0])>0?(r[0]=a,r[1]=a+=i):i<0?(r[1]=o,r[0]=o+=i):(r[0]=0,r[1]=i)})),Do()(Xu,"none",Mc),Do()(Xu,"expand",(function(t,e){if((r=t.length)>0){for(var n,r,i,a=0,o=t[0].length;a<o;++a){for(i=n=0;n<r;++n)i+=t[n][a][1]||0;if(i)for(n=0;n<r;++n)t[n][a][1]/=i}Mc(t,e)}})),Do()(Xu,"wiggle",(function(t,e){if((i=t.length)>0&&(r=(n=t[e[0]]).length)>0){for(var n,r,i,a=0,o=1;o<r;++o){for(var c=0,u=0,s=0;c<i;++c){for(var l=t[e[c]],f=l[o][1]||0,h=(f-(l[o-1][1]||0))/2,d=0;d<c;++d){var p=t[e[d]];h+=(p[o][1]||0)-(p[o-1][1]||0)}u+=f,s+=h*f}n[o-1][1]+=n[o-1][0]=a,u&&(a-=s/u)}n[o-1][1]+=n[o-1][0]=a,Mc(t,e)}})),Xu),pl=function(t){return function(){var t=wc([]),e=_c,n=Mc,r=Cc;function i(i){var a,o,c=t.apply(this,arguments),u=i.length,s=c.length,l=new Array(s);for(a=0;a<s;++a){for(var f,h=c[a],d=l[a]=new Array(u),p=0;p<u;++p)d[p]=f=[0,+r(i[p],h,p,i)],f.data=i[p];d.key=h}for(a=0,o=e(l);a<s;++a)l[o[a]].index=a;return n(l,o),l}return i.keys=function(e){return arguments.length?(t="function"==typeof e?e:wc(Ec.call(e)),i):t},i.value=function(t){return arguments.length?(r="function"==typeof t?t:wc(+t),i):r},i.order=function(t){return arguments.length?(e=null==t?_c:"function"==typeof t?t:wc(Ec.call(t)),i):e},i.offset=function(t){return arguments.length?(n=null==t?Mc:t,i):n},i}().keys(t.keys).offset(dl[t.offset]).order(hl[t.order])(t.data)},gl=function(t){var e=Ot();return t.keys.forEach((function(t){return e.key((function(e){return e[t]}))})),e.entries(t.data)},vl=function(t,e){return t.filter((function(t){return e.indexOf(t)<0}))},yl={curveLinear:Pc,curveStepAfter:Rc,curveStepBefore:Tc,curveStep:Ic,curveCatmullRom:Lc,stepAfter:Rc,catmullRom:Lc,step:Ic,stepBefore:Tc,linear:Pc},ml={axisLeft:function(t){return zo(4,t)},axisRight:function(t){return zo(2,t)},axisTop:function(t){return zo(1,t)},axisBottom:function(t){return zo(3,t)},line:zc,area:function(){var t=jc,e=null,n=wc(0),r=Bc,i=wc(!0),a=null,o=Pc,c=null;function u(u){var s,l,f,h,d,p=u.length,g=!1,v=new Array(p),y=new Array(p);for(null==a&&(c=o(d=xc())),s=0;s<=p;++s){if(!(s<p&&i(h=u[s],s,u))===g)if(g=!g)l=s,c.areaStart(),c.lineStart();else{for(c.lineEnd(),c.lineStart(),f=s-1;f>=l;--f)c.point(v[f],y[f]);c.lineEnd(),c.areaEnd()}g&&(v[s]=+t(h,s,u),y[s]=+n(h,s,u),c.point(e?+e(h,s,u):v[s],r?+r(h,s,u):y[s]))}if(d)return c=null,d+""||null}function s(){return zc().defined(i).curve(o).context(a)}return u.x=function(n){return arguments.length?(t="function"==typeof n?n:wc(+n),e=null,u):t},u.x0=function(e){return arguments.length?(t="function"==typeof e?e:wc(+e),u):t},u.x1=function(t){return arguments.length?(e=null==t?null:"function"==typeof t?t:wc(+t),u):e},u.y=function(t){return arguments.length?(n="function"==typeof t?t:wc(+t),r=null,u):n},u.y0=function(t){return arguments.length?(n="function"==typeof t?t:wc(+t),u):n},u.y1=function(t){return arguments.length?(r=null==t?null:"function"==typeof t?t:wc(+t),u):r},u.lineX0=u.lineY0=function(){return s().x(t).y(n)},u.lineY1=function(){return s().x(t).y(r)},u.lineX1=function(){return s().x(e).y(n)},u.defined=function(t){return arguments.length?(i="function"==typeof t?t:wc(!!t),u):i},u.curve=function(t){return arguments.length?(o=t,null!=a&&(c=o(a)),u):o},u.context=function(t){return arguments.length?(null==t?a=c=null:c=o(a=t),u):a},u},pie:function(){var t=Wc,e=Hc,n=null,r=wc(0),i=wc($o),a=wc(0);function o(o){var c,u,s,l,f,h=o.length,d=0,p=new Array(h),g=new Array(h),v=+r.apply(this,arguments),y=Math.min($o,Math.max(-$o,i.apply(this,arguments)-v)),m=Math.min(Math.abs(y)/h,a.apply(this,arguments)),b=m*(y<0?-1:1);for(c=0;c<h;++c)(f=g[p[c]=c]=+t(o[c],c,o))>0&&(d+=f);for(null!=e?p.sort((function(t,n){return e(g[t],g[n])})):null!=n&&p.sort((function(t,e){return n(o[t],o[e])})),c=0,s=d?(y-h*b)/d:0;c<h;++c,v=l)u=p[c],l=v+((f=g[u])>0?f*s:0)+b,g[u]={data:o[u],index:c,value:f,startAngle:v,endAngle:l,padAngle:m};return g}return o.value=function(e){return arguments.length?(t="function"==typeof e?e:wc(+e),o):t},o.sortValues=function(t){return arguments.length?(e=t,n=null,o):e},o.sort=function(t){return arguments.length?(n=t,e=null,o):n},o.startAngle=function(t){return arguments.length?(r="function"==typeof t?t:wc(+t),o):r},o.endAngle=function(t){return arguments.length?(i="function"==typeof t?t:wc(+t),o):i},o.padAngle=function(t){return arguments.length?(a="function"==typeof t?t:wc(+t),o):a},o},arc:function(){var t=Vc,e=Uc,n=wc(0),r=null,i=Gc,a=qc,o=Yc,c=null;function u(){var u,s,l=+t.apply(this,arguments),f=+e.apply(this,arguments),h=i.apply(this,arguments)-Ko,d=a.apply(this,arguments)-Ko,p=Ho(d-h),g=d>h;if(c||(c=u=xc()),f<l&&(s=f,f=l,l=s),f>1e-12)if(p>$o-1e-12)c.moveTo(f*Vo(h),f*qo(h)),c.arc(0,0,f,h,d,!g),l>1e-12&&(c.moveTo(l*Vo(d),l*qo(d)),c.arc(0,0,l,d,h,g));else{var v,y,m=h,b=d,x=h,w=d,_=p,k=p,S=o.apply(this,arguments)/2,M=S>1e-12&&(r?+r.apply(this,arguments):Yo(l*l+f*f)),E=Go(Ho(f-l)/2,+n.apply(this,arguments)),C=E,A=E;if(M>1e-12){var P=Zo(M/l*qo(S)),D=Zo(M/f*qo(S));(_-=2*P)>1e-12?(x+=P*=g?1:-1,w-=P):(_=0,x=w=(h+d)/2),(k-=2*D)>1e-12?(m+=D*=g?1:-1,b-=D):(k=0,m=b=(h+d)/2)}var I=f*Vo(m),T=f*qo(m),R=l*Vo(w),N=l*qo(w);if(E>1e-12){var O,F=f*Vo(b),L=f*qo(b),j=l*Vo(x),B=l*qo(x);if(p<Xo&&(O=Xc(I,T,j,B,F,L,R,N))){var z=I-O[0],H=T-O[1],W=F-O[0],V=L-O[1],U=1/qo(Qo((z*W+H*V)/(Yo(z*z+H*H)*Yo(W*W+V*V)))/2),G=Yo(O[0]*O[0]+O[1]*O[1]);C=Go(E,(l-G)/(U-1)),A=Go(E,(f-G)/(U+1))}}k>1e-12?A>1e-12?(v=Kc(j,B,I,T,f,A,g),y=Kc(F,L,R,N,f,A,g),c.moveTo(v.cx+v.x01,v.cy+v.y01),A<E?c.arc(v.cx,v.cy,A,Wo(v.y01,v.x01),Wo(y.y01,y.x01),!g):(c.arc(v.cx,v.cy,A,Wo(v.y01,v.x01),Wo(v.y11,v.x11),!g),c.arc(0,0,f,Wo(v.cy+v.y11,v.cx+v.x11),Wo(y.cy+y.y11,y.cx+y.x11),!g),c.arc(y.cx,y.cy,A,Wo(y.y11,y.x11),Wo(y.y01,y.x01),!g))):(c.moveTo(I,T),c.arc(0,0,f,m,b,!g)):c.moveTo(I,T),l>1e-12&&_>1e-12?C>1e-12?(v=Kc(R,N,F,L,l,-C,g),y=Kc(I,T,j,B,l,-C,g),c.lineTo(v.cx+v.x01,v.cy+v.y01),C<E?c.arc(v.cx,v.cy,C,Wo(v.y01,v.x01),Wo(y.y01,y.x01),!g):(c.arc(v.cx,v.cy,C,Wo(v.y01,v.x01),Wo(v.y11,v.x11),!g),c.arc(0,0,l,Wo(v.cy+v.y11,v.cx+v.x11),Wo(y.cy+y.y11,y.cx+y.x11),g),c.arc(y.cx,y.cy,C,Wo(y.y11,y.x11),Wo(y.y01,y.x01),!g))):c.arc(0,0,l,w,x,g):c.lineTo(R,N)}else c.moveTo(0,0);if(c.closePath(),u)return c=null,u+""||null}return u.centroid=function(){var n=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,r=(+i.apply(this,arguments)+ +a.apply(this,arguments))/2-Xo/2;return[Vo(r)*n,qo(r)*n]},u.innerRadius=function(e){return arguments.length?(t="function"==typeof e?e:wc(+e),u):t},u.outerRadius=function(t){return arguments.length?(e="function"==typeof t?t:wc(+t),u):e},u.cornerRadius=function(t){return arguments.length?(n="function"==typeof t?t:wc(+t),u):n},u.padRadius=function(t){return arguments.length?(r=null==t?null:"function"==typeof t?t:wc(+t),u):r},u.startAngle=function(t){return arguments.length?(i="function"==typeof t?t:wc(+t),u):i},u.endAngle=function(t){return arguments.length?(a="function"==typeof t?t:wc(+t),u):a},u.padAngle=function(t){return arguments.length?(o="function"==typeof t?t:wc(+t),u):o},u.context=function(t){return arguments.length?(c=null==t?null:t,u):c},u},nest:Ot},bl={band:Xt},xl=function(t){for(var e=(t=t.sort((function(t,e){return t-e})))[1]-t[0],n=2;n<t.length;n++)e=Math.min(e,t[n]-t[n-1]);return e},wl={millisecond:"%A, %b %e, %H:%M:%S.%L",second:"%A, %b %e, %H:%M:%S",minute:"%A, %b %e, %H:%M",hour:"%A, %b %e, %H:%M",day:"%A, %b %e, %Y",month:"%B %Y",year:"%Y"},_l=[["millisecond","second","minute","hour","day","month","year"],[1,1e3,6e4,36e5,864e5,2592e6,31536e6]],kl=function(t,e){var n=function(t){var e=ps(_l[1],t);return _l[0][e]}(e);return gt.DateTimeFormatter.formatAs(t,wl[n])},Sl=function(t,e){return{resolvable:function(n){var r=n[t],i=e.slice(0,e.length-1),a=e[e.length-1],o=i.map((function(t){return r[t]}));return{fn:a.apply(void 0,U()(o)),depArr:i}}}},Ml=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){setTimeout(t,16)},El=function(t){return function(e){return gt.isInvalid(e)&&e in t?t[e]:e}},Cl=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];var i={};if(t instanceof gt){var a=[].concat(U()(t.getDerivations().reverse()),U()(t.getAncestorDerivations().reverse())),o=ks(Cs(a.find((function(t){return t.op===gt.DerivationOperations.GROUPBY})),"criteria"),{}),c=t.getMeasures();(n=n.length?n:c).forEach((function(e){if(o[e])i[e]=o[e];else{var n=t.getField(e);n&&(i[e]=n.schema().defAggFn)}}))}return i},Al=function(t,e){return t.getField(e).displayName()},Pl=function(t,e){var n=1;return gt.isInvalid(t)||gt.isInvalid(e)||(n=t.localeCompare(e)),n},Dl=(Ku={},Do()(Ku,"asc",(function(t,e){return Pl(t,e)})),Do()(Ku,"desc",(function(t,e){return Pl(e,t)})),Ku),Il=function(t,e,n){var r=To()(t);return r===Qu?t(e,n):r===$u&&Dl[t]?Dl[t](e,n):null},Tl=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[function(t){return t},function(t){return t}],r=q()(n,2),i=r[0],a=r[1],o=new Set(e.map((function(t){return a(t)})));return t.filter((function(t){return o.has(i(t))}))},Rl=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[function(t){return t},function(t){return t}],r=q()(n,2),i=r[0],a=r[1],o=new Set(e.map((function(t){return a(t)})));return t.filter((function(t){return!o.has(i(t))}))},Nl=function(t,e){return t.reduce((function(n,r,i){return e(r,i,t)?n[0].push(r):n[1].push(r),n}),[[],[]])},Ol=function(t){return{with:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return n.reduce((function(t,e){return e(t)}),t)}}},Fl=function(t){var e=Object.assign({},t),n={register:function(t,r){var i=r||t.formalName();return e[i]=t,n},get:function(){return e}};return n},Ll=function(t,e){var n=[Math.min.apply(Math,U()(t)),Math.max.apply(Math,U()(t))];if(e<3)return n;var r=Dn().domain(n).nice(),i=null;return i=ml.axisBottom().scale(r).scale().ticks(e),Math.max.apply(Math,U()(i))<n[1]&&i.push(n[1]),Math.min.apply(Math,U()(i))>n[0]&&i.unshift(n[0]),i},jl=function(t,e,n,r){var i=t.h,a=t.s,o=t.l,c=t.a,u=e.h,s=void 0===u?0:u,l=e.s,f=void 0===l?0:l,h=e.l,d=void 0===h?0:h,p=e.a,g=i+","+a+","+o+","+c+","+s+","+f+","+d+","+p,v=r.get(g);if(v)return v;var y=parseFloat(p||c,10),m=i+s,b=a+f,x=o+d,w=y+1;n||(w=y-1),b=+(100*b).toFixed(1),x=+(100*x).toFixed(1);var _="hsla(".concat(m,",").concat(b,"%,").concat(x,"%,").concat(w,")");return r.set(g,_),_},Bl=function(t,e){var n=t.x,r=t.y,i=t.r,a=e.x,o=e.y;return Math.sqrt(Math.pow(n-a,2)+Math.pow(r-o,2))<=i},zl=function(t,e){var n=e.getFieldNames(),r=Tl(t[0],n);return r.length?{conditions:r.map((function(e,n){return{field:e,value:gt.isInvalid(t[1][n])?null:t[1][n],operator:"eq"}})),operator:"and"}:{field:n[0],value:[],operator:"in"}},Hl=function(t,e){return t.reduce((function(t,n,r){return t[e?n[e]:n]=r,t}),{})},Wl=function t(e,n){function r(t){return"object"===To()(t)&&null!=t}if(e===n)return!0;if(r(e)&&r(n)){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(var i in e)if(!t(e[i],n[i]))return!1;return!0}return!1};function Vl(){}var Ul=function(t){return null==t?Vl:function(){return this.querySelector(t)}};function Gl(){return[]}var ql=function(t){return null==t?Gl:function(){return this.querySelectorAll(t)}},Yl=function(t){return function(){return this.matches(t)}},Xl=function(t){return new Array(t.length)};function Kl(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}Kl.prototype={constructor:Kl,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function $l(t,e,n,r,i,a){for(var o,c=0,u=e.length,s=a.length;c<s;++c)(o=e[c])?(o.__data__=a[c],r[c]=o):n[c]=new Kl(t,a[c]);for(;c<u;++c)(o=e[c])&&(i[c]=o)}function Ql(t,e,n,r,i,a,o){var c,u,s,l={},f=e.length,h=a.length,d=new Array(f);for(c=0;c<f;++c)(u=e[c])&&(d[c]=s="$"+o.call(u,u.__data__,c,e),s in l?i[c]=u:l[s]=u);for(c=0;c<h;++c)(u=l[s="$"+o.call(t,a[c],c,a)])?(r[c]=u,u.__data__=a[c],l[s]=null):n[c]=new Kl(t,a[c]);for(c=0;c<f;++c)(u=e[c])&&l[d[c]]===u&&(i[c]=u)}function Zl(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}var Jl="http://www.w3.org/1999/xhtml",tf={svg:"http://www.w3.org/2000/svg",xhtml:Jl,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},ef=function(t){var e=t+="",n=e.indexOf(":");return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),tf.hasOwnProperty(e)?{space:tf[e],local:t}:t};function nf(t){return function(){this.removeAttribute(t)}}function rf(t){return function(){this.removeAttributeNS(t.space,t.local)}}function af(t,e){return function(){this.setAttribute(t,e)}}function of(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function cf(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}function uf(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}var sf=function(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView};function lf(t){return function(){this.style.removeProperty(t)}}function ff(t,e,n){return function(){this.style.setProperty(t,e,n)}}function hf(t,e,n){return function(){var r=e.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function df(t,e){return t.style.getPropertyValue(e)||sf(t).getComputedStyle(t,null).getPropertyValue(e)}function pf(t){return function(){delete this[t]}}function gf(t,e){return function(){this[t]=e}}function vf(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}function yf(t){return t.trim().split(/^|\s+/)}function mf(t){return t.classList||new bf(t)}function bf(t){this._node=t,this._names=yf(t.getAttribute("class")||"")}function xf(t,e){for(var n=mf(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function wf(t,e){for(var n=mf(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function _f(t){return function(){xf(this,t)}}function kf(t){return function(){wf(this,t)}}function Sf(t,e){return function(){(e.apply(this,arguments)?xf:wf)(this,t)}}bf.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function Mf(){this.textContent=""}function Ef(t){return function(){this.textContent=t}}function Cf(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}function Af(){this.innerHTML=""}function Pf(t){return function(){this.innerHTML=t}}function Df(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}function If(){this.nextSibling&&this.parentNode.appendChild(this)}function Tf(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Rf(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===Jl&&e.documentElement.namespaceURI===Jl?e.createElement(t):e.createElementNS(n,t)}}function Nf(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}var Of=function(t){var e=ef(t);return(e.local?Nf:Rf)(e)};function Ff(){return null}function Lf(){var t=this.parentNode;t&&t.removeChild(this)}function jf(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Bf(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}var zf={},Hf=null;"undefined"!=typeof document&&("onmouseenter"in document.documentElement||(zf={mouseenter:"mouseover",mouseleave:"mouseout"}));function Wf(t,e,n){return t=Vf(t,e,n),function(e){var n=e.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||t.call(this,e)}}function Vf(t,e,n){return function(r){var i=Hf;Hf=r;try{t.call(this,this.__data__,e,n)}finally{Hf=i}}}function Uf(t){return t.trim().split(/^|\s+/).map((function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}}))}function Gf(t){return function(){var e=this.__on;if(e){for(var n,r=0,i=-1,a=e.length;r<a;++r)n=e[r],t.type&&n.type!==t.type||n.name!==t.name?e[++i]=n:this.removeEventListener(n.type,n.listener,n.capture);++i?e.length=i:delete this.__on}}}function qf(t,e,n){var r=zf.hasOwnProperty(t.type)?Wf:Vf;return function(i,a,o){var c,u=this.__on,s=r(e,a,o);if(u)for(var l=0,f=u.length;l<f;++l)if((c=u[l]).type===t.type&&c.name===t.name)return this.removeEventListener(c.type,c.listener,c.capture),this.addEventListener(c.type,c.listener=s,c.capture=n),void(c.value=e);this.addEventListener(t.type,s,n),c={type:t.type,name:t.name,value:e,listener:s,capture:n},u?u.push(c):this.__on=[c]}}function Yf(t,e,n,r){var i=Hf;t.sourceEvent=Hf,Hf=t;try{return e.apply(n,r)}finally{Hf=i}}function Xf(t,e,n){var r=sf(t),i=r.CustomEvent;"function"==typeof i?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function Kf(t,e){return function(){return Xf(this,t,e)}}function $f(t,e){return function(){return Xf(this,t,e.apply(this,arguments))}}var Qf=[null];function Zf(t,e){this._groups=t,this._parents=e}function Jf(){return new Zf([[document.documentElement]],Qf)}Zf.prototype=Jf.prototype={constructor:Zf,select:function(t){"function"!=typeof t&&(t=Ul(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a,o,c=e[i],u=c.length,s=r[i]=new Array(u),l=0;l<u;++l)(a=c[l])&&(o=t.call(a,a.__data__,l,c))&&("__data__"in a&&(o.__data__=a.__data__),s[l]=o);return new Zf(r,this._parents)},selectAll:function(t){"function"!=typeof t&&(t=ql(t));for(var e=this._groups,n=e.length,r=[],i=[],a=0;a<n;++a)for(var o,c=e[a],u=c.length,s=0;s<u;++s)(o=c[s])&&(r.push(t.call(o,o.__data__,s,c)),i.push(o));return new Zf(r,i)},filter:function(t){"function"!=typeof t&&(t=Yl(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a,o=e[i],c=o.length,u=r[i]=[],s=0;s<c;++s)(a=o[s])&&t.call(a,a.__data__,s,o)&&u.push(a);return new Zf(r,this._parents)},data:function(t,e){if(!t)return p=new Array(this.size()),l=-1,this.each((function(t){p[++l]=t})),p;var n,r=e?Ql:$l,i=this._parents,a=this._groups;"function"!=typeof t&&(n=t,t=function(){return n});for(var o=a.length,c=new Array(o),u=new Array(o),s=new Array(o),l=0;l<o;++l){var f=i[l],h=a[l],d=h.length,p=t.call(f,f&&f.__data__,l,i),g=p.length,v=u[l]=new Array(g),y=c[l]=new Array(g);r(f,h,v,y,s[l]=new Array(d),p,e);for(var m,b,x=0,w=0;x<g;++x)if(m=v[x]){for(x>=w&&(w=x+1);!(b=y[w])&&++w<g;);m._next=b||null}}return(c=new Zf(c,i))._enter=u,c._exit=s,c},enter:function(){return new Zf(this._enter||this._groups.map(Xl),this._parents)},exit:function(){return new Zf(this._exit||this._groups.map(Xl),this._parents)},join:function(t,e,n){var r=this.enter(),i=this,a=this.exit();return r="function"==typeof t?t(r):r.append(t+""),null!=e&&(i=e(i)),null==n?a.remove():n(a),r&&i?r.merge(i).order():i},merge:function(t){for(var e=this._groups,n=t._groups,r=e.length,i=n.length,a=Math.min(r,i),o=new Array(r),c=0;c<a;++c)for(var u,s=e[c],l=n[c],f=s.length,h=o[c]=new Array(f),d=0;d<f;++d)(u=s[d]||l[d])&&(h[d]=u);for(;c<r;++c)o[c]=e[c];return new Zf(o,this._parents)},order:function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r,i=t[e],a=i.length-1,o=i[a];--a>=0;)(r=i[a])&&(o&&4^r.compareDocumentPosition(o)&&o.parentNode.insertBefore(r,o),o=r);return this},sort:function(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=Zl);for(var n=this._groups,r=n.length,i=new Array(r),a=0;a<r;++a){for(var o,c=n[a],u=c.length,s=i[a]=new Array(u),l=0;l<u;++l)(o=c[l])&&(s[l]=o);s.sort(e)}return new Zf(i,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){var t=new Array(this.size()),e=-1;return this.each((function(){t[++e]=this})),t},node:function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,a=r.length;i<a;++i){var o=r[i];if(o)return o}return null},size:function(){var t=0;return this.each((function(){++t})),t},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i,a=e[n],o=0,c=a.length;o<c;++o)(i=a[o])&&t.call(i,i.__data__,o,a);return this},attr:function(t,e){var n=ef(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==e?n.local?rf:nf:"function"==typeof e?n.local?uf:cf:n.local?of:af)(n,e))},style:function(t,e,n){return arguments.length>1?this.each((null==e?lf:"function"==typeof e?hf:ff)(t,e,null==n?"":n)):df(this.node(),t)},property:function(t,e){return arguments.length>1?this.each((null==e?pf:"function"==typeof e?vf:gf)(t,e)):this.node()[t]},classed:function(t,e){var n=yf(t+"");if(arguments.length<2){for(var r=mf(this.node()),i=-1,a=n.length;++i<a;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"==typeof e?Sf:e?_f:kf)(n,e))},text:function(t){return arguments.length?this.each(null==t?Mf:("function"==typeof t?Cf:Ef)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?Af:("function"==typeof t?Df:Pf)(t)):this.node().innerHTML},raise:function(){return this.each(If)},lower:function(){return this.each(Tf)},append:function(t){var e="function"==typeof t?t:Of(t);return this.select((function(){return this.appendChild(e.apply(this,arguments))}))},insert:function(t,e){var n="function"==typeof t?t:Of(t),r=null==e?Ff:"function"==typeof e?e:Ul(e);return this.select((function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)}))},remove:function(){return this.each(Lf)},clone:function(t){return this.select(t?Bf:jf)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,n){var r,i,a=Uf(t+""),o=a.length;if(!(arguments.length<2)){for(c=e?qf:Gf,null==n&&(n=!1),r=0;r<o;++r)this.each(c(a[r],e,n));return this}var c=this.node().__on;if(c)for(var u,s=0,l=c.length;s<l;++s)for(r=0,u=c[s];r<o;++r)if((i=a[r]).type===u.type&&i.name===u.name)return u.value},dispatch:function(t,e){return this.each(("function"==typeof e?$f:Kf)(t,e))}};var th=Jf,eh=function(t){return"string"==typeof t?new Zf([[document.querySelector(t)]],[document.documentElement]):new Zf([[t]],Qf)},nh=function(t,e){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,[(r=r.matrixTransform(t.getScreenCTM().inverse())).x,r.y]}var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]},rh={value:function(){}};function ih(){for(var t,e=0,n=arguments.length,r={};e<n;++e){if(!(t=arguments[e]+"")||t in r||/[\s.]/.test(t))throw new Error("illegal type: "+t);r[t]=[]}return new ah(r)}function ah(t){this._=t}function oh(t,e){return t.trim().split(/^|\s+/).map((function(t){var n="",r=t.indexOf(".");if(r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}}))}function ch(t,e){for(var n,r=0,i=t.length;r<i;++r)if((n=t[r]).name===e)return n.value}function uh(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=rh,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=n&&t.push({name:e,value:n}),t}ah.prototype=ih.prototype={constructor:ah,on:function(t,e){var n,r=this._,i=oh(t+"",r),a=-1,o=i.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++a<o;)if(n=(t=i[a]).type)r[n]=uh(r[n],t.name,e);else if(null==e)for(n in r)r[n]=uh(r[n],t.name,null);return this}for(;++a<o;)if((n=(t=i[a]).type)&&(n=ch(r[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new ah(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),a=0;a<n;++a)i[a]=arguments[a+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(a=0,n=(r=this._[t]).length;a<n;++a)r[a].value.apply(e,i)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,a=r.length;i<a;++i)r[i].value.apply(e,n)}};var sh=ih,lh=function(){for(var t,e=Hf;t=e.sourceEvent;)e=t;return e},fh=function(t){var e=lh();return e.changedTouches&&(e=e.changedTouches[0]),nh(t,e)},hh=function(t,e,n){arguments.length<3&&(n=e,e=lh().changedTouches);for(var r,i=0,a=e?e.length:0;i<a;++i)if((r=e[i]).identifier===n)return nh(t,r);return null};function dh(){Hf.stopImmediatePropagation()}var ph=function(){Hf.preventDefault(),Hf.stopImmediatePropagation()},gh=function(t){var e=t.document.documentElement,n=eh(t).on("dragstart.drag",ph,!0);"onselectstart"in e?n.on("selectstart.drag",ph,!0):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")};var vh=function(t){return function(){return t}};function yh(t,e,n,r,i,a,o,c,u,s){this.target=t,this.type=e,this.subject=n,this.identifier=r,this.active=i,this.x=a,this.y=o,this.dx=c,this.dy=u,this._=s}function mh(){return!Hf.ctrlKey&&!Hf.button}function bh(){return this.parentNode}function xh(t){return null==t?{x:Hf.x,y:Hf.y}:t}function wh(){return navigator.maxTouchPoints||"ontouchstart"in this}yh.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};var _h,kh,Sh=function(){var t,e,n,r,i=mh,a=bh,o=xh,c=wh,u={},s=sh("start","drag","end"),l=0,f=0;function h(t){t.on("mousedown.drag",d).filter(c).on("touchstart.drag",v).on("touchmove.drag",y).on("touchend.drag touchcancel.drag",m).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function d(){if(!r&&i.apply(this,arguments)){var o=b("mouse",a.apply(this,arguments),fh,this,arguments);o&&(eh(Hf.view).on("mousemove.drag",p,!0).on("mouseup.drag",g,!0),gh(Hf.view),dh(),n=!1,t=Hf.clientX,e=Hf.clientY,o("start"))}}function p(){if(ph(),!n){var r=Hf.clientX-t,i=Hf.clientY-e;n=r*r+i*i>f}u.mouse("drag")}function g(){var t,e,r,i;eh(Hf.view).on("mousemove.drag mouseup.drag",null),t=Hf.view,e=n,r=t.document.documentElement,i=eh(t).on("dragstart.drag",null),e&&(i.on("click.drag",ph,!0),setTimeout((function(){i.on("click.drag",null)}),0)),"onselectstart"in r?i.on("selectstart.drag",null):(r.style.MozUserSelect=r.__noselect,delete r.__noselect),ph(),u.mouse("end")}function v(){if(i.apply(this,arguments)){var t,e,n=Hf.changedTouches,r=a.apply(this,arguments),o=n.length;for(t=0;t<o;++t)(e=b(n[t].identifier,r,hh,this,arguments))&&(dh(),e("start"))}}function y(){var t,e,n=Hf.changedTouches,r=n.length;for(t=0;t<r;++t)(e=u[n[t].identifier])&&(ph(),e("drag"))}function m(){var t,e,n=Hf.changedTouches,i=n.length;for(r&&clearTimeout(r),r=setTimeout((function(){r=null}),500),t=0;t<i;++t)(e=u[n[t].identifier])&&(dh(),e("end"))}function b(t,e,n,r,i){var a,c,f,d=n(e,t),p=s.copy();if(Yf(new yh(h,"beforestart",a,t,l,d[0],d[1],0,0,p),(function(){return null!=(Hf.subject=a=o.apply(r,i))&&(c=a.x-d[0]||0,f=a.y-d[1]||0,!0)})))return function o(s){var g,v=d;switch(s){case"start":u[t]=o,g=l++;break;case"end":delete u[t],--l;case"drag":d=n(e,t),g=l}Yf(new yh(h,s,a,t,g,d[0]+c,d[1]+f,d[0]-v[0],d[1]-v[1],p),p.apply,p,[s,r,i])}}return h.filter=function(t){return arguments.length?(i="function"==typeof t?t:vh(!!t),h):i},h.container=function(t){return arguments.length?(a="function"==typeof t?t:vh(t),h):a},h.subject=function(t){return arguments.length?(o="function"==typeof t?t:vh(t),h):o},h.touchable=function(t){return arguments.length?(c="function"==typeof t?t:vh(!!t),h):c},h.on=function(){var t=s.on.apply(s,arguments);return t===s?h:t},h.clickDistance=function(t){return arguments.length?(f=(t=+t)*t,h):Math.sqrt(f)},h},Mh=0,Eh=0,Ch=0,Ah=0,Ph=0,Dh=0,Ih="object"==typeof performance&&performance.now?performance:Date,Th="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Rh(){return Ph||(Th(Nh),Ph=Ih.now()+Dh)}function Nh(){Ph=0}function Oh(){this._call=this._time=this._next=null}function Fh(t,e,n){var r=new Oh;return r.restart(t,e,n),r}function Lh(){Ph=(Ah=Ih.now())+Dh,Mh=Eh=0;try{!function(){Rh(),++Mh;for(var t,e=_h;e;)(t=Ph-e._time)>=0&&e._call.call(null,t),e=e._next;--Mh}()}finally{Mh=0,function(){var t,e,n=_h,r=1/0;for(;n;)n._call?(r>n._time&&(r=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:_h=e);kh=t,Bh(r)}(),Ph=0}}function jh(){var t=Ih.now(),e=t-Ah;e>1e3&&(Dh-=e,Ah=t)}function Bh(t){Mh||(Eh&&(Eh=clearTimeout(Eh)),t-Ph>24?(t<1/0&&(Eh=setTimeout(Lh,t-Ih.now()-Dh)),Ch&&(Ch=clearInterval(Ch))):(Ch||(Ah=Ih.now(),Ch=setInterval(jh,1e3)),Mh=1,Th(Lh)))}Oh.prototype=Fh.prototype={constructor:Oh,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?Rh():+n)+(null==e?0:+e),this._next||kh===this||(kh?kh._next=this:_h=this,kh=this),this._call=t,this._time=n,Bh()},stop:function(){this._call&&(this._call=null,this._time=1/0,Bh())}};var zh=function(t,e,n){var r=new Oh;return e=null==e?0:+e,r.restart((function(n){r.stop(),t(n+e)}),e,n),r},Hh=sh("start","end","cancel","interrupt"),Wh=[],Vh=function(t,e,n,r,i,a){var o=t.__transition;if(o){if(n in o)return}else t.__transition={};!function(t,e,n){var r,i=t.__transition;function a(u){var s,l,f,h;if(1!==n.state)return c();for(s in i)if((h=i[s]).name===n.name){if(3===h.state)return zh(a);4===h.state?(h.state=6,h.timer.stop(),h.on.call("interrupt",t,t.__data__,h.index,h.group),delete i[s]):+s<e&&(h.state=6,h.timer.stop(),h.on.call("cancel",t,t.__data__,h.index,h.group),delete i[s])}if(zh((function(){3===n.state&&(n.state=4,n.timer.restart(o,n.delay,n.time),o(u))})),n.state=2,n.on.call("start",t,t.__data__,n.index,n.group),2===n.state){for(n.state=3,r=new Array(f=n.tween.length),s=0,l=-1;s<f;++s)(h=n.tween[s].value.call(t,t.__data__,n.index,n.group))&&(r[++l]=h);r.length=l+1}}function o(e){for(var i=e<n.duration?n.ease.call(null,e/n.duration):(n.timer.restart(c),n.state=5,1),a=-1,o=r.length;++a<o;)r[a].call(t,i);5===n.state&&(n.on.call("end",t,t.__data__,n.index,n.group),c())}function c(){for(var r in n.state=6,n.timer.stop(),delete i[e],i)return;delete t.__transition}i[e]=n,n.timer=Fh((function(t){n.state=1,n.timer.restart(a,n.delay,n.time),n.delay<=t&&a(t-n.delay)}),0,n.time)}(t,n,{name:e,index:r,group:i,on:Hh,tween:Wh,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:0})};function Uh(t,e){var n=qh(t,e);if(n.state>0)throw new Error("too late; already scheduled");return n}function Gh(t,e){var n=qh(t,e);if(n.state>3)throw new Error("too late; already running");return n}function qh(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}var Yh,Xh,Kh,$h,Qh=180/Math.PI,Zh={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},Jh=function(t,e,n,r,i,a){var o,c,u;return(o=Math.sqrt(t*t+e*e))&&(t/=o,e/=o),(u=t*n+e*r)&&(n-=t*u,r-=e*u),(c=Math.sqrt(n*n+r*r))&&(n/=c,r/=c,u/=c),t*r<e*n&&(t=-t,e=-e,u=-u,o=-o),{translateX:i,translateY:a,rotate:Math.atan2(e,t)*Qh,skewX:Math.atan(u)*Qh,scaleX:o,scaleY:c}};function td(t,e,n,r){function i(t){return t.length?t.pop()+" ":""}return function(a,o){var c=[],u=[];return a=t(a),o=t(o),function(t,r,i,a,o,c){if(t!==i||r!==a){var u=o.push("translate(",null,e,null,n);c.push({i:u-4,x:$t(t,i)},{i:u-2,x:$t(r,a)})}else(i||a)&&o.push("translate("+i+e+a+n)}(a.translateX,a.translateY,o.translateX,o.translateY,c,u),function(t,e,n,a){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),a.push({i:n.push(i(n)+"rotate(",null,r)-2,x:$t(t,e)})):e&&n.push(i(n)+"rotate("+e+r)}(a.rotate,o.rotate,c,u),function(t,e,n,a){t!==e?a.push({i:n.push(i(n)+"skewX(",null,r)-2,x:$t(t,e)}):e&&n.push(i(n)+"skewX("+e+r)}(a.skewX,o.skewX,c,u),function(t,e,n,r,a,o){if(t!==n||e!==r){var c=a.push(i(a)+"scale(",null,",",null,")");o.push({i:c-4,x:$t(t,n)},{i:c-2,x:$t(e,r)})}else 1===n&&1===r||a.push(i(a)+"scale("+n+","+r+")")}(a.scaleX,a.scaleY,o.scaleX,o.scaleY,c,u),a=o=null,function(t){for(var e,n=-1,r=u.length;++n<r;)c[(e=u[n]).i]=e.x(t);return c.join("")}}}var ed=td((function(t){return"none"===t?Zh:(Yh||(Yh=document.createElement("DIV"),Xh=document.documentElement,Kh=document.defaultView),Yh.style.transform=t,t=Kh.getComputedStyle(Xh.appendChild(Yh),null).getPropertyValue("transform"),Xh.removeChild(Yh),t=t.slice(7,-1).split(","),Jh(+t[0],+t[1],+t[2],+t[3],+t[4],+t[5]))}),"px, ","px)","deg)"),nd=td((function(t){return null==t?Zh:($h||($h=document.createElementNS("http://www.w3.org/2000/svg","g")),$h.setAttribute("transform",t),(t=$h.transform.baseVal.consolidate())?(t=t.matrix,Jh(t.a,t.b,t.c,t.d,t.e,t.f)):Zh)}),", ",")",")");function rd(t,e){var n,r;return function(){var i=Gh(this,t),a=i.tween;if(a!==n)for(var o=0,c=(r=n=a).length;o<c;++o)if(r[o].name===e){(r=r.slice()).splice(o,1);break}i.tween=r}}function id(t,e,n){var r,i;if("function"!=typeof n)throw new Error;return function(){var a=Gh(this,t),o=a.tween;if(o!==r){i=(r=o).slice();for(var c={name:e,value:n},u=0,s=i.length;u<s;++u)if(i[u].name===e){i[u]=c;break}u===s&&i.push(c)}a.tween=i}}function ad(t,e,n){var r=t._id;return t.each((function(){var t=Gh(this,r);(t.value||(t.value={}))[e]=n.apply(this,arguments)})),function(t){return qh(t,r).value[e]}}var od=function(t,e){var n;return("number"==typeof e?$t:e instanceof de?Re:(n=de(e))?(e=n,Re):Ve)(t,e)};function cd(t){return function(){this.removeAttribute(t)}}function ud(t){return function(){this.removeAttributeNS(t.space,t.local)}}function sd(t,e,n){var r,i,a=n+"";return function(){var o=this.getAttribute(t);return o===a?null:o===r?i:i=e(r=o,n)}}function ld(t,e,n){var r,i,a=n+"";return function(){var o=this.getAttributeNS(t.space,t.local);return o===a?null:o===r?i:i=e(r=o,n)}}function fd(t,e,n){var r,i,a;return function(){var o,c,u=n(this);if(null!=u)return(o=this.getAttribute(t))===(c=u+"")?null:o===r&&c===i?a:(i=c,a=e(r=o,u));this.removeAttribute(t)}}function hd(t,e,n){var r,i,a;return function(){var o,c,u=n(this);if(null!=u)return(o=this.getAttributeNS(t.space,t.local))===(c=u+"")?null:o===r&&c===i?a:(i=c,a=e(r=o,u));this.removeAttributeNS(t.space,t.local)}}function dd(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function pd(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function gd(t,e){var n,r;function i(){var i=e.apply(this,arguments);return i!==r&&(n=(r=i)&&pd(t,i)),n}return i._value=e,i}function vd(t,e){var n,r;function i(){var i=e.apply(this,arguments);return i!==r&&(n=(r=i)&&dd(t,i)),n}return i._value=e,i}function yd(t,e){return function(){Uh(this,t).delay=+e.apply(this,arguments)}}function md(t,e){return e=+e,function(){Uh(this,t).delay=e}}function bd(t,e){return function(){Gh(this,t).duration=+e.apply(this,arguments)}}function xd(t,e){return e=+e,function(){Gh(this,t).duration=e}}function wd(t,e){if("function"!=typeof e)throw new Error;return function(){Gh(this,t).ease=e}}function _d(t,e,n){var r,i,a=function(t){return(t+"").trim().split(/^|\s+/).every((function(t){var e=t.indexOf(".");return e>=0&&(t=t.slice(0,e)),!t||"start"===t}))}(e)?Uh:Gh;return function(){var o=a(this,t),c=o.on;c!==r&&(i=(r=c).copy()).on(e,n),o.on=i}}var kd=th.prototype.constructor;function Sd(t){return function(){this.style.removeProperty(t)}}function Md(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function Ed(t,e,n){var r,i;function a(){var a=e.apply(this,arguments);return a!==i&&(r=(i=a)&&Md(t,a,n)),r}return a._value=e,a}function Cd(t){return function(e){this.textContent=t.call(this,e)}}function Ad(t){var e,n;function r(){var r=t.apply(this,arguments);return r!==n&&(e=(n=r)&&Cd(r)),e}return r._value=t,r}var Pd=0;function Dd(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function Id(){return++Pd}var Td=th.prototype;Dd.prototype=function(t){return th().transition(t)}.prototype={constructor:Dd,select:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=Ul(t));for(var r=this._groups,i=r.length,a=new Array(i),o=0;o<i;++o)for(var c,u,s=r[o],l=s.length,f=a[o]=new Array(l),h=0;h<l;++h)(c=s[h])&&(u=t.call(c,c.__data__,h,s))&&("__data__"in c&&(u.__data__=c.__data__),f[h]=u,Vh(f[h],e,n,h,f,qh(c,n)));return new Dd(a,this._parents,e,n)},selectAll:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=ql(t));for(var r=this._groups,i=r.length,a=[],o=[],c=0;c<i;++c)for(var u,s=r[c],l=s.length,f=0;f<l;++f)if(u=s[f]){for(var h,d=t.call(u,u.__data__,f,s),p=qh(u,n),g=0,v=d.length;g<v;++g)(h=d[g])&&Vh(h,e,n,g,d,p);a.push(d),o.push(u)}return new Dd(a,o,e,n)},filter:function(t){"function"!=typeof t&&(t=Yl(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a,o=e[i],c=o.length,u=r[i]=[],s=0;s<c;++s)(a=o[s])&&t.call(a,a.__data__,s,o)&&u.push(a);return new Dd(r,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,a=Math.min(r,i),o=new Array(r),c=0;c<a;++c)for(var u,s=e[c],l=n[c],f=s.length,h=o[c]=new Array(f),d=0;d<f;++d)(u=s[d]||l[d])&&(h[d]=u);for(;c<r;++c)o[c]=e[c];return new Dd(o,this._parents,this._name,this._id)},selection:function(){return new kd(this._groups,this._parents)},transition:function(){for(var t=this._name,e=this._id,n=Id(),r=this._groups,i=r.length,a=0;a<i;++a)for(var o,c=r[a],u=c.length,s=0;s<u;++s)if(o=c[s]){var l=qh(o,e);Vh(o,t,n,s,c,{time:l.time+l.delay+l.duration,delay:0,duration:l.duration,ease:l.ease})}return new Dd(r,this._parents,t,n)},call:Td.call,nodes:Td.nodes,node:Td.node,size:Td.size,empty:Td.empty,each:Td.each,on:function(t,e){var n=this._id;return arguments.length<2?qh(this.node(),n).on.on(t):this.each(_d(n,t,e))},attr:function(t,e){var n=ef(t),r="transform"===n?nd:od;return this.attrTween(t,"function"==typeof e?(n.local?hd:fd)(n,r,ad(this,"attr."+t,e)):null==e?(n.local?ud:cd)(n):(n.local?ld:sd)(n,r,e))},attrTween:function(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==e)return this.tween(n,null);if("function"!=typeof e)throw new Error;var r=ef(t);return this.tween(n,(r.local?gd:vd)(r,e))},style:function(t,e,n){var r="transform"==(t+="")?ed:od;return null==e?this.styleTween(t,function(t,e){var n,r,i;return function(){var a=df(this,t),o=(this.style.removeProperty(t),df(this,t));return a===o?null:a===n&&o===r?i:i=e(n=a,r=o)}}(t,r)).on("end.style."+t,Sd(t)):"function"==typeof e?this.styleTween(t,function(t,e,n){var r,i,a;return function(){var o=df(this,t),c=n(this),u=c+"";return null==c&&(this.style.removeProperty(t),u=c=df(this,t)),o===u?null:o===r&&u===i?a:(i=u,a=e(r=o,c))}}(t,r,ad(this,"style."+t,e))).each(function(t,e){var n,r,i,a,o="style."+e,c="end."+o;return function(){var u=Gh(this,t),s=u.on,l=null==u.value[o]?a||(a=Sd(e)):void 0;s===n&&i===l||(r=(n=s).copy()).on(c,i=l),u.on=r}}(this._id,t)):this.styleTween(t,function(t,e,n){var r,i,a=n+"";return function(){var o=df(this,t);return o===a?null:o===r?i:i=e(r=o,n)}}(t,r,e),n).on("end.style."+t,null)},styleTween:function(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==e)return this.tween(r,null);if("function"!=typeof e)throw new Error;return this.tween(r,Ed(t,e,null==n?"":n))},text:function(t){return this.tween("text","function"==typeof t?function(t){return function(){var e=t(this);this.textContent=null==e?"":e}}(ad(this,"text",t)):function(t){return function(){this.textContent=t}}(null==t?"":t+""))},textTween:function(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(null==t)return this.tween(e,null);if("function"!=typeof t)throw new Error;return this.tween(e,Ad(t))},remove:function(){return this.on("end.remove",(t=this._id,function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}));var t},tween:function(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r,i=qh(this.node(),n).tween,a=0,o=i.length;a<o;++a)if((r=i[a]).name===t)return r.value;return null}return this.each((null==e?rd:id)(n,t,e))},delay:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?yd:md)(e,t)):qh(this.node(),e).delay},duration:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?bd:xd)(e,t)):qh(this.node(),e).duration},ease:function(t){var e=this._id;return arguments.length?this.each(wd(e,t)):qh(this.node(),e).ease},end:function(){var t,e,n=this,r=n._id,i=n.size();return new Promise((function(a,o){var c={value:o},u={value:function(){0==--i&&a()}};n.each((function(){var n=Gh(this,r),i=n.on;i!==t&&((e=(t=i).copy())._.cancel.push(c),e._.interrupt.push(c),e._.end.push(u)),n.on=e}))}))}};var Rd={time:null,delay:0,duration:250,ease:Jc};function Nd(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))return Rd.time=Rh(),Rd;return n}th.prototype.interrupt=function(t){return this.each((function(){!function(t,e){var n,r,i,a=t.__transition,o=!0;if(a){for(i in e=null==e?null:e+"",a)(n=a[i]).name===e?(r=n.state>2&&n.state<5,n.state=6,n.timer.stop(),n.on.call(r?"interrupt":"cancel",t,t.__data__,n.index,n.group),delete a[i]):o=!1;o&&delete t.__transition}}(this,t)}))},th.prototype.transition=function(t){var e,n;t instanceof Dd?(e=t._id,t=t._name):(e=Id(),(n=Rd).time=Rh(),t=null==t?null:t+"");for(var r=this._groups,i=r.length,a=0;a<i;++a)for(var o,c=r[a],u=c.length,s=0;s<u;++s)(o=c[s])&&Vh(o,t,e,s,c,n||Nd(o,e));return new Dd(r,this._parents,t,e)};var Od=function(t){return eh(t)},Fd=function(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},a=arguments.length>5?arguments[5]:void 0;(t instanceof HTMLElement||t instanceof SVGElement)&&(t=Od(t));var o,c=r?r[0]:null,u=null,s=null,l=null,f=null,h=null;c?"#"===c?(u="id",s=r):(u="class",s="."===r[0]?r:".".concat(r)):(s=e,o=!0),l=t.selectAll(s),o&&(l=l.filter((function(){return this.parentNode===t.node()}))),f=(l=l.data(n,a)).enter().append(e||"div"),i.enter&&f.each((function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];i.enter.apply(i,[Od(this)].concat(e))})),h=f.merge(l),i.update&&h.each((function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];i.update.apply(i,[Od(this)].concat(e))})),"class"===u?h.classed("."===c?r.substring(1,r.length):r,!0):"id"===u&&h.attr("id",r.substring(1,r.length));var d=l.exit();return i.exit?d.each((function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];i.exit.apply(i,[Od(this)].concat(e))})):d.remove(),h},Ld=function(t,e){return Object.entries(e).forEach((function(e){t.style(e[0],e[1])}),void 0),t},jd=function(t,e){t.appendChild(e)},Bd=function(t,e){for(var n in e)({}).hasOwnProperty.call(e,n)&&t.attr(n,e[n])},zd=function(t,e,n){return t instanceof th||(t=Od(t)),void 0!==n?t.selectAll(".".concat(n)).each((function(){Bd(eh(this),e)})):Bd(t,e),t},Hd=function(t,e,n,r){eh(t).selectAll(n).each((function(t){var n=eh(this);r?r(t)&&n.classed(e,!0):n.classed(e,!0)}))},Wd=function(t,e,n,r){eh(t).selectAll(n).each((function(t){var n=eh(this);r?r(t)&&n.classed(e,!1):n.classed(e,!1)}))},Vd=function(t,e){for(var n in t instanceof th||(t=Od(t)),e)({}).hasOwnProperty.call(e,n)&&t.style(n,e[n]);return t},Ud=function(t){var e,n=eh(t.container);"number"==typeof(e=t.data)&&(e=Array(e).fill().map((function(t,e){return e})));var r=n.selectAll(t.selector).filter((function(){return this.parentNode===n.node()})).data(e);r.enter().append(t.append).merge(r).each((function(e,n){t.each(e,eh(this),n)})).attr("class",t.className||""),r.exit().remove()},Gd=function(t,e,n){var r=Fd(eh(t),"clipPath",[1],"#".concat(n));Fd(r,"rect",[1]).attr("x",e.x).attr("y",e.x).attr("width",e.width).attr("height",e.height),r.attr("clip-path","url(#".concat(n,")"))},qd=function(t,e){return eh(t).selectAll(e).nodes()},Yd=function(t,e){var n=t.getBoundingClientRect();return{x:e.x-n.x,y:e.y-n.y}},Xd=function(t,e){var n=nh(t,e);return{x:n[0],y:n[1]}},Kd=function(t,e){return eh(e).append(t)},$d=function(){return Hf},Qd=function(){return Sh},Zd=function(t,e){var n,r={"fill-opacity":0},i="string"==typeof e?e:e instanceof Array?e.join(" "):void 0;n=t.node()instanceof HTMLElement?t.append("div").html("W"):t.append("text").text("W"),i?n.attr("class",i):"object"===To()(e)&&(delete e["fill-opacity"],Fs(r,e)),n.style(r);var a=window.getComputedStyle(n.node()),o={fontSize:a.fontSize,fontFamily:a.fontFamily,fontWeight:a.fontWeight,fontStyle:a.fontStyle};return n.remove(),o},Jd=function(){return"ontouchstart"in document.documentElement},tp=n(53),ep=n.n(tp);function np(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return rp(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return rp(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,c=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return o=t.done,t},e:function(t){c=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(c)throw a}}}}function rp(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var ip=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){return{}};return e.forEach((function(e){t[e]||(t[e]=n()),t=t[e]})),t},ap=function(t,e,n){return e.map((function(e,r){var i=t[r];return e.map((function(t){return null==t?t:t[n[i]]}))}))},op=function(t,e,n){var r=t.key,i=t.id,a=n._listeners;if(i){!a.get(i)&&a.set(i,new Map);var o=a.get(i);r||(r=o.size),o.set(r,e)}else r=r||a.size,a.set(r,e)},cp=function(t,e,n){var r,i=np(e.keys());try{for(i.s();!(r=i.n()).done;){var a=r.value;t[a]={context:n[a],deps:e.get(a).depProps}}}catch(t){i.e(t)}finally{i.f()}return t},up=function(t,e,n,r){var i=t._registeredListeners,a=t._propListenerMap,o=n.subNamespace,c=n.namespace;ip(i,[c]),e.forEach((function(t){var n=ks(Cs(i,c,t,"subNamespace"),[]),u=ks(Cs(a,t,r,"fns"),0);u++,o&&n.push(o),i[c][t]={subNamespace:n,allProps:e,subNamespaces:{}},ip(a,[t,r]),a[t][r]={fns:u,_fnCount:u}}))},sp=function(t,e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];var a=r[0],o=r[1],c=r[2],u=r[3],s=void 0===u?{}:u,l=a;Array.isArray(a)||(l=[a]);var f,h,d=s.namespace,p=(f=l,h=d,function(){var n=t._savedCommits,r=t._propListenerMap;if(!f.some((function(t){return Cs(r,t,"disabled")}))){for(var i=arguments.length,a=new Array(i),c=0;c<i;c++)a[c]=arguments[c];if(h){var u=t._registeredListeners[h],s=t._contextMap[h],l={};for(var d in f.forEach((function(t){var i=ks(Cs(n,t,e),{}),a=u[t].subNamespaces,o=r[t][e];for(var c in i){var f=ks(o[c],{fns:0}),h=f.fns;h>0&&(cp(l,a[c],s),h--),h<=0&&delete i[c],f.fns=h}})),l){var p=l[d];o.apply(void 0,[p.context].concat(U()(ap(f,a,p.deps))))}}else o.apply(void 0,a)}}),g=t.model[e](l,p,c);d&&up(t,l,s,e),op(s,g,t)},lp=function(){return new Map},fp=["next","on"],hp=function(t,e,n){var r=n.subNamespace,i=n.prop,a=n.propListenerMap[i];if(fp.forEach((function(t){t in a&&delete a[t][r]})),e.has(r)){var o=t.get(i);o instanceof Object&&r in o&&delete o[r],e.delete(r)}},dp=function(){function t(e){X()(this,t),this.model=ep.a.create(e),this._listeners=new Map,this._registeredListeners={},this._contextMap={},this._commits={},this._savedCommits={},this._queuedProps={},this._propListenerMap={},this._locked=!1}return $()(t,[{key:"lockModel",value:function(){return this.model.lock(),this._locked=!0,this}},{key:"unlockModel",value:function(){return this._locked=!1,this.model.unlock(),this}},{key:"serialize",value:function(){return this.model.serialize()}},{key:"lockCommits",value:function(t){var e=this;return t.forEach((function(t){e._commits[t]={locked:!0,queue:[]}})),this}},{key:"unlockCommits",value:function(t){var e=this,n=this._commits;return this.lockModel(),t.forEach((function(t){n[t].locked=!1;var r={},i=n[t].queue;i.forEach((function(t){var e=q()(t,3),n=e[0],i=e[1],a=e[2];if(a){var o=ip(r,[n,a]);Object.assign(o,i)}})),i.forEach((function(t){var n=q()(t,3),i=n[0],a=n[1],o=n[2];e.commit(i,i in r?r[i][o]:a,o)})),delete n[t]})),this.unlockModel(),this}},{key:"addSubNamespace",value:function(t,e,n){var r=this._registeredListeners[e],i=this._propListenerMap;ip(this._contextMap,[e]),this._contextMap[e][t]=n;var a=function(e){var a=r[e],o=i[e],c=fp.reduce((function(t,e){var n=ks(Cs(o,e,"fns"),0);return n&&(t[e]=n),t}),{}),u=a.allProps,s=a.subNamespaces,l=a.subNamespace;(l.length?l:[t]).forEach((function(r){var i=r instanceof Function?r(n):r,a=function(t,e){return t instanceof Object?[t[e]]:t instanceof Array?t:[t]}(i,e),l=u.reduce((function(t,e){return t[e]=r instanceof Function?i[e]:r,t}),{});a.forEach((function(e){for(var n in ip(s,[e],lp).set(t,{depProps:l}),c){ip(o,[n,e]);var r=c[n];o[n][e]={fns:r,_fnCount:r}}}))}))};for(var o in r)a(o);return this}},{key:"commit",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=e,a=this._commits,o=this._savedCommits,c=Cs(a,t,"locked"),u=this._propListenerMap[t]||{};if(u.disabled=r,c)return a[t].queue.push([t,e,n]),this;if(n){if(this._locked){var s=ip(this._queuedProps,[t]);s[n]=e,i=s}else(i=ks(this.get(t),{}))[n]=e;fp.forEach((function(e){ip(o,[t,e]),o[t][e][n]=!0,Cs(u,e,n)&&(u[e][n].fns=u[e][n]._fnCount)}))}return this.model.prop(t,i),this}},{key:"registerChangeListener",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return sp.apply(void 0,[this,"next"].concat(e)),this}},{key:"registerImmediateListener",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];sp.apply(void 0,[this,"on"].concat(e))}},{key:"get",value:function(t,e){var n=this.model.prop(t);return e?n&&n[e]:n}},{key:"computed",value:function(t,e){return this.model.calculatedProp(t,e)}},{key:"append",value:function(){var t;return(t=this.model).append.apply(t,arguments),this}},{key:"unsubscribeAll",value:function(){return Object.values(this._listeners).forEach((function(t){return t()})),this}},{key:"unsubscribe",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.id,n=t.key,r=this._listeners,i=r.get(e);if(n){var a=r.get(n);a&&a()}else{var o,c=np(i.values());try{for(c.s();!(o=c.n()).done;){var u=o.value;u()}}catch(t){c.e(t)}finally{c.f()}r.set(e,[])}return this}},{key:"removeSubNamespace",value:function(t,e){var n=this._registeredListeners,r=this._contextMap,i=this._propListenerMap,a=n[e];for(var o in a){var c=a[o].subNamespaces,u={subNamespace:t,prop:o,propListenerMap:i};if(c[t])hp(this,c[t],u),delete c[t];else for(var s in c){var l=c[s];hp(this,l,u),l.size||delete c[s]}}return delete r[e][t],this}}]),t}(),pp=function(t,e,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=n instanceof dp?n:new dp({}),o={},c=i.namespace,u=i.subNamespace;for(var s in e)if({}.hasOwnProperty.call(e,s)){r=e[s];var l=c?"".concat(c,".").concat(s):s;if(u){var f=ks(a.get(l),{});f[u]=r.value,o[l]=f}else o[s]=r.value;t[s]=function(e,n,r){return function(){for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];var c=a.length;if(c){var s=n||{},l=s.takesMultipleParams,f=void 0!==l&&l,h=f?a:a[0];if(n){var d,p=e.get(r,u),g=n.sanitization,v=n.typeCheck,y=n.typeExpected;if("function"==typeof g&&(h=g(h,p,t)),"function"==typeof v){var m=v(h);m&&(d=h)}else"string"==typeof v&&"constructor"===v?h&&h.constructor.name===y&&(d=h):d=h;var b=n.preset,x=sl(e.get(r,u));b&&b(d,t),f&&x.forEach((function(t,e){void 0===d[e]&&(d[e]=t)})),d&&e.commit(r,d,u)}else e.commit(r,h,u);return t}return e.get(r,u)}}(a,r.meta,l,Array.isArray(r.value))}if(u)for(var h in o)a.commit(h,o[h][u],u);else void 0===c?a.append(o):a.append(c,o);return[t,a]},gp={init:function(t){var e=t.document,n=t.navigator.userAgent,r=Math.ceil,i=Math.floor,a="fusioncharts-smartlabel-",o=a+"container",c=a+"tag";return gp={win:t,containerClass:o,classNameWithTag:c,classNameWithTagBR:"fusioncharts-smartlabel-br",maxDefaultCacheLimit:1e3,classNameReg:/\bfusioncharts-smartlabel-tag\b/,classNameBrReg:/\bfusioncharts-smartlabel-br\b/,spanAdditionRegx:/(<[^<\>]+?\>)|(&(?:[a-z]+|#[0-9]+);|.)/gi,spanAdditionReplacer:'$1<span class="'+c+'">$2</span>',spanRemovalRegx:new RegExp("\\<span[^\\>]+?"+c+"[^\\>]{0,}\\>(.*?)\\<\\/span\\>","ig"),xmlTagRegEx:new RegExp("<[^>][^<]*[^>]+>","i"),brRegex:new RegExp("({br[ ]*})|(<br[ ]*>)|(<br[ ]*/>)|(<BR[ ]*/>)|(<br\\>)","g"),ltgtRegex:/&lt;|&gt;/g,nbspRegex:/&nbsp;|&#160;|&#xA0;/g,htmlSpecialEntityRegex:/&amp;|&quot;|&lt;|&gt;/g,brReplaceRegex:/<br\/>/gi,testStrAvg:"WgI",parentContainerStyle:{position:"absolute",top:"-9999em",whiteSpace:"nowrap",padding:"0px",width:"1px",height:"1px",overflow:"hidden"},supportedStyle:{font:"font",fontFamily:"font-family","font-family":"font-family",fontWeight:"font-weight","font-weight":"font-weight",fontSize:"font-size","font-size":"font-size",lineHeight:"line-height","line-height":"line-height",fontStyle:"font-style","font-style":"font-style"},getDocumentSupport:function(){var r,i,a;return e.getElementsByClassName?(r="getElementsByClassName",i=c,a=!0):(r="getElementsByTagName",i="span",a=!1),{isIE:/msie/i.test(n)&&!t.opera,hasSVG:Boolean(t.SVGAngle||e.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")),isHeadLess:new RegExp(" HtmlUnit").test(n),isWebKit:new RegExp(" AppleWebKit/").test(n),childRetriverFn:r,childRetriverString:i,noClassTesting:a}},createContainer:function(t){var n,r;if(t&&(t.offsetWidth||t.offsetHeight)){if(t.appendChild)return t.appendChild(r=e.createElement("DIV")),r.className=o,r.setAttribute("aria-hidden","true"),r.setAttribute("role","presentation"),r}else if((n=e.getElementsByTagName("body")[0])&&n.appendChild)return(r=e.createElement("DIV")).className=o,r.setAttribute("aria-hidden","true"),r.setAttribute("role","presentation"),n.appendChild(r),r},getNearestBreakIndex:function(t,e,n){if(!t||!t.length)return 0;var a,o=n._getWidthFn(),c=0,u=0,s=o(t),l=s/t.length;if(a=e,c=r(e/l),s<e)return t.length-1;for(c>t.length&&(a=e-s,c=t.length);a>0;){if(a=e-o(t.substr(0,c)),!(u=i(a/l)))return c;c+=u}for(;a<0;){if(a=e-o(t.substr(0,c)),!(u=i(a/l)))return c;c+=u}return c},parseStyle:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e={};return e.fontSize=(t.fontSize||t["font-size"]||"12px")+"",e.fontVariant=t.fontVariant||t["font-variant"]||"normal",e.fontWeight=t.fontWeight||t["font-weight"]||"normal",e.fontStyle=t.fontStyle||t["font-style"]||"normal",e.fontFamily=t.fontFamily||t["font-family"]||"Verdana,sans",e},setLineHeight:function(t){var e=t.fontSize;return t.lineHeight=t.lineHeight||t["line-height"]||1.2*parseInt(e,10)+"px",t},_getCleanHeight:function(t){return t=t.replace(/px/g,""),Number(t)},_getDimentionUsingDiv:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1?arguments[1]:void 0,n=e._container;return t instanceof Array&&(t=t.join("")),n.innerHTML=t,{width:n.offsetWidth,height:n.offsetHeight}},_getDimentionUsingCanvas:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1?arguments[1]:void 0,n=e.ctx,r=e.style,i=gp._getCleanHeight(r.lineHeight);return t=t instanceof Array?(t=t.join("")).replace(/<br \/>/g,""):t.replace(/<br \/>/g,""),{width:n.measureText(t).width,height:i}},_hasOnlyBRTag:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return!gp.xmlTagRegEx.test(t)&&gp.brRegex.test(t)},_getDimentionOfMultiLineText:function(){var t,e,n,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",i=arguments.length>1?arguments[1]:void 0,a=r.replace(gp.brRegex,"<br />"),o=gp._getTextArray(a),c=0,u=0,s=i._getWidthFn(),l=gp._getCleanHeight(i.style.lineHeight),f=l,h={};for(t=0,e=o.length;t<e;t++)"<br />"===o[t]?(u=Math.max(u,c),c=0,f+=l):(c+=n=s(o[t]),h[o[t]]=n);return{height:f,width:u=Math.max(u,c),detailObj:h}},_getTextArray:function(){var t,e,n,r,i,a,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",c=[];for(n=(i=o.split("<br />")).length,t=0;t<n;t++){for(r=(a=i[t].split("")).length,e=0;e<r;e++)c.push(a[e]);t!==n-1&&c.push("<br />")}return c},_findLastIndex:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0,r=e.length;for(t=r-1;t>=0;t--)if(e[t]===n)return t;return-1}}}},vp=gp,yp=vp.init(window),mp=yp.win.document,bp=yp.getDocumentSupport(),xp=bp.isWebKit?0:4.5;function wp(t,e,n){var r;n=(n=n>5?n:5)<20?n:20,this.maxContainers=n,this.first=null,this.last=null,this.containers={},this.length=0,this.rootNode=t,e&&((r=mp.createElementNS("http://www.w3.org/2000/svg","svg")).setAttributeNS("http://www.w3.org/2000/svg","xlink","http://www.w3.org/1999/xlink"),r.setAttributeNS("http://www.w3.org/2000/svg","height","0"),r.setAttributeNS("http://www.w3.org/2000/svg","width","0"),this.svgRoot=r,this.rootNode.appendChild(r))}wp.prototype.get=function(t){var e,n,r,i=this.containers,a=this.length,o=this.maxContainers,c="";for(n in yp.supportedStyle)void 0!==t[n]&&(c+=yp.supportedStyle[n]+":"+t[n]+";");if(!c)return!1;if(r=i[c])this.first!==r&&(r.prev&&(r.prev.next=r.next),r.next&&(r.next.prev=r.prev),r.next=this.first,r.next.prev=r,this.last===r&&(this.last=r.prev),r.prev=null,this.first=r);else{if(a>=o)for(e=a-o+1;e--;)this.removeContainer(this.last);r=this.addContainer(c)}return r},wp.prototype._makeDivNode=function(t){var e,n=t.keyStr;t.node||(t.node=mp.createElement("div"),t.node.className="fusioncharts-div",this.rootNode.appendChild(t.node)),e=t.node,bp.isIE&&!bp.hasSVG?e.style.setAttribute("cssText",n):e.setAttribute("style",n),e.setAttribute("aria-hidden","true"),e.setAttribute("role","presentation"),e.style.display="inline-block",e.innerHTML=yp.testStrAvg,t.lineHeight=e.offsetHeight,t.avgCharWidth=e.offsetWidth/3,bp.isBrowserLess?(t.svgText||(t.svgText=mp.createElementNS("http://www.w3.org/2000/svg","text"),this.svgRoot.appendChild(e)),(e=t.svgText).setAttribute("style",n),e.textContent=yp.testStrAvg,t.lineHeight=e.getBBox().height,t.avgCharWidth=(e.getBBox().width-xp)/3,e.textContent="...",t.ellipsesWidth=e.getBBox().width-xp,e.textContent=".",t.dotWidth=e.getBBox().width-xp):(e.innerHTML="...",t.ellipsesWidth=e.offsetWidth,e.innerHTML=".",t.dotWidth=e.offsetWidth,e.innerHTML="")},wp.prototype.addContainer=function(t){var e;return this.containers[t]=e={next:null,prev:null,node:null,ellipsesWidth:0,lineHeight:0,dotWidth:0,avgCharWidth:4,keyStr:t,charCache:{}},e.next=this.first,e.next&&(e.next.prev=e),this.first=e,this.last||(this.last=e),this.length+=1,e},wp.prototype.removeContainer=function(t){var e=t.keyStr;e&&this.length&&t&&(this.length-=1,t.prev&&(t.prev.next=t.next),t.next&&(t.next.prev=t.prev),this.first===t&&(this.first=t.next),this.last===t&&(this.last=t.prev),t.node&&t.node.parentNode.removeChild(t.node),delete this.containers[e])},wp.prototype.dispose=function(){var t,e=this.containers;for(t in this.maxContainers=null,e)this.removeContainer(e[t]);this.rootNode.parentNode.removeChild(this.rootNode),this.rootNode=null,this.first=null,this.last=null};var _p=wp;function kp(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),r.forEach((function(e){Sp(t,e,n[e])}))}return t}function Sp(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Mp=vp.init(window),Ep=Mp.win.document,Cp=Mp.win.Math,Ap=Cp.max,Pp=Cp.round,Dp={" ":"&nbsp;"},Ip=Mp.getDocumentSupport(),Tp=Ip.isWebKit?0:4.5;function Rp(t,e,n){var r,i,a,o=!1,c=window.document.createElement("canvas");for(i in(n=n||{}).maxCacheLimit=isFinite(a=n.maxCacheLimit)?a:Mp.maxDefaultCacheLimit,"string"==typeof t&&(t=Ep.getElementById(t)),(r=Mp.createContainer(t)).innerHTML=Mp.testStrAvg,!Ip.isHeadLess&&(Ip.isIE||r.offsetHeight||r.offsetWidth)||(o=!0),r.innerHTML="",Mp.parentContainerStyle)r.style[i]=Mp.parentContainerStyle[i];this.parentContainer=r,this.ctx=c&&c.getContext&&c.getContext("2d"),this._containerManager=new _p(r,o,10),this._showNoEllipses=!e,this._init=!0,this.style={},this.oldStyle={},this.options=n,this.setStyle()}Rp.textToLines=function(t){return(t=t||{}).text?"string"!=typeof t.text&&(t.text=t.text.toString()):t.text="",t.lines=t.text.split(/\n|<br\s*?\/?>/gi),t},Rp.prototype._calCharDimWithCache=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;if(!this._init)return!1;var r,i,a,o,c,u,s,l,f,h=this.options.maxCacheLimit,d=this.style||{};return u=this._advancedCache=this._advancedCache||(this._advancedCache={}),s=this._advancedCacheKey||(this._advancedCacheKey=[]),l=t+d.fontSize+d.fontFamily+d.fontWeight+d.fontStyle,f=t+"init"+d.fontSize+d.fontFamily+d.fontWeight+d.fontStyle,!this.ctx&&Dp[t]&&(t=Dp[t]),e?void 0===(c=u[f])&&(i=this._getDimention(t.repeat?t.repeat(n):Array(n+1).join(t)).width,a=this._getDimention(t).width,c=u[f]=(i-n*a)/(n+1),s.push(f),s.length>h&&delete u[s.shift()]):c=0,(o=u[l])?{width:o.width,height:o.height}:((r=this._getDimention(t)).width+=c,u[l]={width:r.width,height:r.height},s.push(l),s.length>h&&delete u[s.shift()],r)},Rp.prototype._getDimention=function(t){return this.requireDiv||!this.ctx?Mp._getDimentionUsingDiv(t,this):Mp._getDimentionUsingCanvas(t,this)},Rp.prototype._getWidthFn=function(){var t=this,e=t._containerObj.svgText;return e?function(t){var n,r;return e.textContent=t,(r=(n=e.getBBox()).width-Tp)<1&&(r=n.width),r}:function(e){return t.requireDiv||!t.ctx?Mp._getDimentionUsingDiv(e,t).width:Mp._getDimentionUsingCanvas(e,t).width}},Rp.prototype._isSameStyle=function(){var t=this.oldStyle||{},e=this.style;return e.fontSize===t.fontSize&&e.fontFamily===t.fontFamily&&e.fontStyle===t.fontStyle&&e.fontWeight===t.fontWeight&&e.fontVariant===t.fontVariant},Rp.prototype._setStyleOfCanvas=function(){if(!this._isSameStyle()){var t,e,n=this.style,r=n.fontStyle,i=n.fontVariant,a=n.fontWeight,o=n.fontSize,c=n.fontFamily;t=r+" "+i+" "+a+" "+(o+=-1===o.indexOf("px")?"px":"")+" "+c,this.ctx.font=t,e=this._containerObj=this._containerManager.get(n),this._containerObj?(this._container=e.node,this._context=e.context,this._cache=e.charCache,this._lineHeight=e.lineHeight,this._styleNotSet=!1):this._styleNotSet=!0,e.ellipsesWidth=this._calCharDimWithCache("...",!1).width,e.dotWidth=this._calCharDimWithCache(".",!1).width,e.lineHeight=this._lineHeight=e.lineHeight||Mp._getCleanHeight(n.lineHeight),this.oldStyle=n}},Rp.prototype._setStyleOfDiv=function(){var t,e=this.style;this._containerObj=t=this._containerManager.get(e),t.node||this._containerManager._makeDivNode(this._containerObj),this._containerObj?(this._container=t.node,this._context=t.context,this._cache=t.charCache,this._lineHeight=t.lineHeight,this._styleNotSet=!1):this._styleNotSet=!0},Rp.prototype._updateStyle=function(){return this.requireDiv||!this.ctx?this._setStyleOfDiv():this._setStyleOfCanvas()},Rp.prototype.setStyle=function(t){return this.style=Mp.parseStyle(t),Mp.setLineHeight(this.style),this},Rp.prototype.useEllipsesOnOverflow=function(t){return this._init?(this._showNoEllipses=!t,this):this},Rp.prototype.getSmartText=function(t,e,n,r){if(!this._init)return!1;null==t?t="":"string"!=typeof t&&(t=t.toString());var i,a,o,c,u,s,l,f,h,d,p,g,v,y,m,b,x,w,_,k,S,M,E,C,A,P,D,I,T,R,N,O,F,L,j,B=0,z=-1,H=-1,W=-1,V=0,U=0,G=[],q=0,Y=this._showNoEllipses?"":"...",X=this.ctx,K=[],$=-1,Q=-1,Z=-1,J=function(t){for(var e=/\s/,n=(t=t.replace(/^\s\s*/,"")).length;e.test(t.charAt(n-=1)););return t.slice(0,n+1)},tt={text:t,maxWidth:e,maxHeight:n,width:null,height:null,oriTextWidth:null,oriTextHeight:null,oriText:t,isTruncated:!1};if(D=Mp.xmlTagRegEx.test(t)||Mp.nbspRegex.test(t),L=Mp._hasOnlyBRTag(t),this.requireDiv=D&&!L,this._updateStyle(),I=this._lineHeight,T=this._context,R=this._container,O=(N=this._containerObj).ellipsesWidth,F=N.dotWidth,s=t.replace(Mp.spanAdditionRegx,"$2"),g=this._getWidthFn(),I-n<=1&&I-n>=0&&(n*=1.2),X||R){if(!Ip.isBrowserLess){if(D?L?(t=t.replace(Mp.brRegex,"<br />"),j=Mp._getDimentionOfMultiLineText(t,this),tt.oriTextWidth=l=j.width,tt.oriTextHeight=f=j.height):(R.innerHTML=t,tt.oriTextWidth=l=R.offsetWidth,tt.oriTextHeight=f=R.offsetHeight):(c=t=t.replace(Mp.ltgtRegex,(function(t){return"&lt;"===t?"<":">"})),m=this.getSize(c,!0,{hasHTMLTag:D,hasOnlyBrTag:L,cleanText:!0}),tt.oriTextWidth=l=m.width,tt.oriTextHeight=f=m.height),f<=n&&l<=e)return tt.width=tt.oriTextWidth=l,tt.height=tt.oriTextHeight=f,tt;if(I>n)return tt.text="",tt.width=tt.oriTextWidth=0,tt.height=tt.oriTextHeight=0,tt}if(t=J(t).replace(/(\s+)/g," "),u=this._showNoEllipses?e:e-O,!D||L){if(i=(G=Mp._getTextArray(t)).length,a="",o=[],p=G[0],this._cache[p]?_=this._cache[p].width:(_=g(p),this._cache[p]={width:_}),u>_&&!L)o=t.substr(0,Mp.getNearestBreakIndex(t,u,this)).split("");else{if(_>e)return tt.text="",tt.width=tt.oriTextWidth=tt.height=tt.oriTextHeight=0,tt;Y&&((u=e-2*F)>_?Y="..":(u=e-F)>_?Y=".":(u=0,Y=""))}if(q=o.length,V=g(o.join("")),U=this._lineHeight,r){for(;q<i;q+=1)if(p=o[q]=G[q],"<br />"!==o[q]){if(this._cache[p]?_=this._cache[p].width:(m&&(_=m.detailObj[p])||(_=g(p)),this._cache[p]={width:_}),(V+=_)>u&&(a||(a=o.slice(0,-1).join("")),V>e))return tt.text=J(a)+Y,tt.tooltext=tt.oriText,tt.width=Ap(B,V),tt.height=U,tt.isTruncated=!0,tt}else U+=this._lineHeight,W=q,B=Ap(B,V),V=0,a=null;return tt.text=o.join(""),tt.width=Ap(B,V),tt.height=U,tt}for(;q<i;q+=1){if(" "!==(p=o[q]=G[q])||T||(p=this.ctx?" ":"&nbsp;"),"<br />"===o[q]){if(B=Ap(B,V),(U+=this._lineHeight)<=n){W=q,V=0,a=null;continue}if(U>n)return a=o.slice(0,-1).join(""),tt.text=J(a)+Y,tt.tooltext=s,tt.width=B,tt.height=U-this._lineHeight,tt.isTruncated=!0,tt}if(this._cache[p]?_=this._cache[p].width:(m&&(_=m.detailObj[p])||(_=g(p)),this._cache[p]={width:_}),(V+=_)>u&&(a||(a=o.slice(0,-1).join("")),V>e)){if("<br />"===G[q+1])continue;if(H=Mp._findLastIndex(G.slice(0,o.length)," "),z=Mp._findLastIndex(G.slice(0,o.length),"-"),H>W?(V=g(o.slice(W+1,H).join("")),o.splice(H,1,"<br />"),W=H,h=H+1):z>W?(z===o.length-1?(V=g(o.slice(W+1,H).join("")),o.splice(z,1,"<br />-")):(V=g(o.slice(W+1,H).join("")),o.splice(z,1,"-<br />")),W=z,h=z+1):(o.splice(o.length-1,1,"<br />"+G[q]),Z=o.length-2,V=g(o.slice(W+1,Z+1).join("")),W=Z,h=q),(U+=this._lineHeight)>n)return tt.text=J(a)+Y,tt.tooltext=tt.oriText,tt.width=e,tt.height=U-this._lineHeight,tt.isTruncated=!0,tt;B=Ap(B,V),a=null,L?V=Mp._getDimentionOfMultiLineText(o.slice(W+1).join(""),this).width:(d=Mp.getNearestBreakIndex(t.substr(h),u,this),V=g(t.substr(h,d||1)),o.length<h+d&&(q=(o=o.concat(t.substr(o.length,h+d-o.length).split(""))).length-1))}}return B=Ap(B,V),tt.text=o.join(""),tt.width=B,tt.height=U,tt}for(s=t.replace(Mp.spanAdditionRegx,"$2"),t=(t=t.replace(Mp.spanAdditionRegx,Mp.spanAdditionReplacer)).replace(/(<br\s*\/*\>)/g,'<span class="'+[Mp.classNameWithTag," ",Mp.classNameWithTagBR].join("")+'">$1</span>'),R.innerHTML=t,x=0,w=(b=R[Ip.childRetriverFn](Ip.childRetriverString)).length;x<w;x+=1)k=b[x],(Ip.noClassTesting||Mp.classNameReg.test(k.className))&&""!==(S=k.innerHTML)&&(" "===S?Q=K.length:"-"===S&&($=K.length),K.push({spaceIdx:Q,dashIdx:$,elem:k}),G.push(S));if(q=0,(_=(i=K.length)&&K[0].elem.offsetWidth)>e||!i)return tt.text="",tt.width=tt.oriTextWidth=tt.height=tt.oriTextHeight=0,tt;if(_>u&&!this._showNoEllipses&&((u=e-2*F)>_?Y="..":(u=e-F)>_?Y=".":(u=0,Y="")),v=K[0].elem.offsetLeft,y=K[0].elem.offsetTop,r)for(;q<i;q+=1)(M=(k=K[q].elem).offsetLeft-v+k.offsetWidth)>u&&(P||(P=q),R.offsetWidth>e&&(A=q,q=i));else for(;q<i;q+=1)E=(k=K[q].elem).offsetHeight+(k.offsetTop-y),C=null,(M=k.offsetLeft-v+k.offsetWidth)>u?(P||(P=q),M>e&&(H=K[q].spaceIdx,z=K[q].dashIdx,H>W?(K[H].elem.innerHTML="<br/>",W=H):z>W?(K[z].elem.innerHTML=z===q?"<br/>-":"-<br/>",W=z):k.parentNode.insertBefore(C=Ep.createElement("br"),k),k.offsetHeight+k.offsetTop>n?(C?C.parentNode.removeChild(C):W===z?K[z].elem.innerHTML="-":K[H].elem.innerHTML=" ",A=q,q=i):P=null)):E>n&&(A=q,q=i);if(A<i){for(tt.isTruncated=!0,P=P||A,q=i-1;q>=P;q-=1)(k=K[q].elem).parentNode.removeChild(k);for(;q>=0;q-=1)k=K[q].elem,Mp.classNameBrReg.test(k.className)?k.parentNode.removeChild(k):q=0}return tt.text=R.innerHTML.replace(Mp.spanRemovalRegx,"$1").replace(/\&amp\;/g,"&"),tt.isTruncated&&(tt.text+=Y,tt.tooltext=s),tt.height=R.offsetHeight,tt.width=R.offsetWidth,tt}return tt.error=new Error("Body Tag Missing!"),tt},Rp.prototype.getSize=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!this._init)return!1;null==t?t="":"string"!=typeof t&&(t=t.toString());var r,i,a,o,c,u,s=0,l=0,f={},h=n.hasHTMLTag,d=n.hasOnlyBrTag;if(void 0===h&&(h=Mp.xmlTagRegEx.test(t)||Mp.nbspRegex.test(t)),void 0===d&&(d=Mp._hasOnlyBRTag(t)),this.requireDiv=h&&!d,n.cleanText||(t=t.replace(Mp.ltgtRegex,(function(t){return"&lt;"===t?"<":">"}))),this._updateStyle(),u=this._container,!e)return this._calCharDimWithCache(t);for(o=0,c=(r=t.split("")).length;o<c;o++)i=r[o],a=this._calCharDimWithCache(i,!1,r.length),l=Ap(l,a.height),s+=a.width,f[i]=a.width;return d?kp({},Mp._getDimentionOfMultiLineText(t,this),{detailObj:f}):h?(u.innerHTML=t,{width:u.offsetWidth,height:u.offsetHeight,detailObj:f}):{width:Pp(s),height:l,detailObj:f}},Rp.prototype.getOriSize=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.getSize(t,e,n)},Rp.prototype.dispose=function(){return this._init?(this._containerManager&&this._containerManager.dispose&&this._containerManager.dispose(),delete this._container,delete this._context,delete this._cache,delete this._containerManager,delete this._containerObj,delete this.id,delete this.style,delete this.parentContainer,delete this._showNoEllipses,this):this};var Np=Rp,Op=["initialized","beforeupdate","updated","beforedraw","drawn","beforeremove","removed","animationend"],Fp=[];["canvas","unit","layer","axis","facet-headers","legend","caption"].forEach((function(t){Op.forEach((function(e){Fp.push("".concat(t,".").concat(e))}))}));var Lp,jp,Bp,zp=Fp,Hp=function(t){return function(e){return t(e)}},Wp=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},Vp=function(){function t(){X()(this,t),this._eventList=zp,this._promises=new Map,this._notifiers={},this._lifeCycles={},this._unreleasedLifeCycles={},this._boot()}return $()(t,[{key:"_boot",value:function(){this._notifiers=this._eventList.reduce((function(t,e){return t[e]=Hp,t}),{}),this._preparePromises()}},{key:"retrieve",value:function(t){return this._promises.get(t)}},{key:"_makeNotifierPromise",value:function(t){var e=this;return new Promise((function(n){e._notifiers[t]=Hp(n)}))}},{key:"_preparePromises",value:function(){var t=this;this._eventList.forEach((function(e){var n=t._makeNotifierPromise(e);t._promises.set(e,n),function t(e,n,r){e.then((function(){var e=r._makeNotifierPromise(n);r._promises.set(n,e),t(e,n,r)}))}(n,e,t)}))}},{key:"_resolvePromise",value:function(t,e){this._notifiers[t](e)}},{key:"notify",value:function(t){var e=t.formalName||t.client.constructor.formalName();t.formalName=e,this._releasePromisesFromCache(),this._notify(e,t)}},{key:"_notify",value:function(t,e){var n=e.action,r="".concat(t,".").concat(n);this._resolvePromise(r,e);var i=this.retrieve(r);this._lifeCycles[t]&&this._lifeCycles[t][n]?this._callLifeCycleCallback(t,n,i):this._cachePromise(t,n,i)}},{key:"_callLifeCycleCallback",value:function(t,e,n){var r="".concat(t,".").concat(e);this._lifeCycles[t][e](n),this._resetTargetPromise(r)}},{key:"_releasePromisesFromCache",value:function(){var t=this;Object.keys(this._unreleasedLifeCycles).forEach((function(e){Object.keys(t._unreleasedLifeCycles[e]).forEach((function(n){if(t._lifeCycles[e]&&t._lifeCycles[e][n]){var r=t._unreleasedLifeCycles[e][n];t._callLifeCycleCallback(e,n,r),delete t._unreleasedLifeCycles[e][n]}}))}))}},{key:"_cachePromise",value:function(t,e,n){Wp(this._unreleasedLifeCycles,t)||(this._unreleasedLifeCycles[t]={}),Wp(this._unreleasedLifeCycles[t],e)||(this._unreleasedLifeCycles[t][e]={}),this._unreleasedLifeCycles[t][e]=n}},{key:"register",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._lifeCycles=t,this._releasePromisesFromCache()}},{key:"_resetTargetPromise",value:function(t){var e=this;setTimeout((function(){e._notifiers[t]=Hp,e._promises.set(t,e._makeNotifierPromise(t))}),0)}}]),t}(),Up=n(1),Gp=n.n(Up),qp=n(3),Yp=n.n(qp),Xp=n(4),Kp=n.n(Xp),$p=n(5),Qp=n.n($p),Zp=n(6),Jp=n.n(Zp),tg=n(2),eg=n.n(tg),ng="muze",rg="stack",ig="group",ag="identity",og="angle",cg="radius",ug="size",sg="color",lg="shape",fg="text",hg="outerRadiusValue",dg="middle",pg={X:"x",Y:"y",X0:"x0",Y0:"y0",RADIUS:"radius",RADIUS0:"radius0",ANGLE:"angle",ANGLE0:"angle0",COLOR:"color",SHAPE:"shape",SIZE:"size",TEXT:"text"},gg="stroke-dasharray",vg="asc",yg="sum",mg="area",bg="arc",xg="line",wg="text",_g="point",kg="bar",Sg="tick",Mg="simple",Eg="base",Cg=function(){function t(){Yp()(this,t)}return Kp()(t,[{key:"formalName",value:function(){throw new Error(Os.INTERFACE_IMPL)}},{key:"dependencies",value:function(){throw new Error(Os.INTERFACE_IMPL)}},{key:"config",value:function(){throw new Error(Os.INTERFACE_IMPL)}},{key:"data",value:function(){throw new Error(Os.INTERFACE_IMPL)}},{key:"serialize",value:function(){throw new Error(Os.INTERFACE_IMPL)}},{key:"id",value:function(){throw new Error(Os.INTERFACE_IMPL)}},{key:"normalizeTransformedData",value:function(){throw new Error(Os.INTERFACE_IMPL)}},{key:"getTransformedData",value:function(){throw new Error(Os.INTERFACE_IMPL)}},{key:"_calculateDomainFromData",value:function(){throw new Error(Os.INTERFACE_IMPL)}},{key:"getDomain",value:function(){throw new Error(Os.INTERFACE_IMPL)}},{key:"getNearestPoint",value:function(){throw new Error(Os.INTERFACE_IMPL)}},{key:"highlightPoint",value:function(){throw new Error(Os.INTERFACE_IMPL)}},{key:"dehighlightPoint",value:function(){return this}},{key:"linkLayerStore",value:function(){throw new Error(Os.INTERFACE_IMPL)}},{key:"mount",value:function(){throw new Error(Os.INTERFACE_IMPL)}},{key:"render",value:function(){throw new Error(Os.INTERFACE_IMPL)}}]),t}(),Ag=n(28),Pg=n.n(Ag),Dg=n(7),Ig=n.n(Dg),Tg=n(0),Rg=n.n(Tg),Ng=n(16),Og=n.n(Ng),Fg="data",Lg="config",jg="measurement",Bg="domain",zg="mount",Hg=(Lp={axes:{},mount:{},measurement:{},metaInf:{},valueParser:{defaultValue:function(t){return t}},coord:{defaultValue:ut.CARTESIAN}},Rg()(Lp,Lg,{value:null,sanitization:function(t,e){t._customConfig=e;var n=t.constructor,r=Fs({},n.defaultConfig());return n.defaultPolicy(r,e)}}),Rg()(Lp,"encodingTransform",{}),Rg()(Lp,"encodingFieldsInf",{}),Rg()(Lp,"dependencies",{}),Rg()(Lp,"dataProps",{}),Lp),Wg="bottom",Vg="top",Ug="left",Gg="right",qg=(jp={},Rg()(jp,Ug,ml.axisLeft),Rg()(jp,Wg,ml.axisBottom),Rg()(jp,Gg,ml.axisRight),Rg()(jp,Vg,ml.axisTop),jp),Yg="linear",Xg="band",Kg="temporal",$g="color",Qg="ordinal",Zg="quantize",Jg="quantile",tv="log",ev="pow",nv="identity",rv="sequential",iv="threshold",av=(n(83),n(9)),ov=n.n(av),cv="continous",uv="discrete",sv=[1],lv=r.scaleLinear,fv=r.scaleThreshold,hv=r.scaleLog,dv=r.scalePow,pv=r.scaleIdentity,gv=r.scaleOrdinal,vv=r.scaleSequential,yv=r.scaleQuantize,mv=r.scaleQuantile,bv=r.scaleBand,xv=r.scaleTime,wv=(Bp={},Rg()(Bp,Yg,lv),Rg()(Bp,Xg,bv),Rg()(Bp,Zg,yv),Rg()(Bp,Jg,mv),Rg()(Bp,iv,fv),Rg()(Bp,rv,vv),Rg()(Bp,tv,hv),Rg()(Bp,ev,dv),Rg()(Bp,nv,pv),Rg()(Bp,Kg,xv),Rg()(Bp,$g,lv),Rg()(Bp,Qg,gv),Bp);function _v(t){if(!t.type||!wv[t.type])throw new Error("".concat(t.type," is not a valid scale type"));if(!Array.isArray(t.range))throw new Error("range parameter must be an array");var e=null,n=t.range;if("linear"===t.type&&t.interpolator){if(e=wv[t.interpolator],t.interpolator===ev)return e().range(n).exponent(t.exponent);if(t.interpolator===tv)return e().range(n).base([t.base])}else e=wv[t.type];return"quantize"===t.type&&e().nice(),e().range(n)}var kv={id:ts(),adjustRange:!1,axisName:{defClassName:"axis-name"},axisNamePadding:7,base:10,classPrefix:"muze",className:"".concat("muze","-axis"),exponent:1,interpolator:"linear",fixedBaseline:!0,labels:{rotation:null,smartTicks:null},orientation:"left",format:function(t){return t},padding:.3,nice:!0,numberOfTicks:null,rotate:!1,show:!0,showAxisName:!0,showInnerTicks:!0,showOuterTicks:!0,style:{},type:"linear",tickFormat:null,tickValues:null,xOffset:0,yOffset:0,defaultSort:"asc"},Sv=function(t,e,n){var r=e._smartTicks,i=e.config(),a=e.renderConfig(),o=e.dependencies().labelManager,c=i.orientation,u=i.classPrefix,s=a.labels,l=s.rotation,f=s.smartTicks,h=t.selectAll(".tick text");if(h.selectAll("tspan").remove(),!l||"top"!==c&&"bottom"!==c)if(l||f){if(h.text(""),"top"===c||"bottom"===c)h.attr("y",0).attr("x",0).attr("transform","").text(""),Fd(h,"tspan",(function(t,e){return r[e]?r[e].lines:[]}),"".concat(u,"-smart-text")).attr("dy","0").style("opacity","0").transition().duration(1e3).on("end",e.registerAnimationDoneHook()).attr("dy",(function(t,e){return"bottom"===c||0!==e?r[0].oriTextHeight:-r[0].oriTextHeight*(r[0].lines.length-1)-n})).style("opacity",1).text((function(t){return t})).attr("x",0);else Fd(h,"tspan",(function(t,e){return r[e].lines}),"".concat(u,"-smart-text")).text((function(t){return t}))}else h.attr("transform","");else!function(t,e,n){var r,i=t.axis(),a=t.config(),o=t.renderConfig(),c=t.smartTicks(),u=i.scale(),s=(u.ticks||u.quantile||u.domain)(),l=a.orientation,f=a.fixedBaseline,h=a.type,d=o.labels;r=d.rotation;var p=t.getTickSize();e.each((function(t,e){var i,a,o=c[e]?c[e].text:t;o=o.toString();var u=n.getOriSize(o),d=.5*u.width,g=.5*u.height;r<0&&(r=360+r);var v=4-Math.floor(r/90),y=(v%2==0?r:180*Math.ceil(r/180)-r)%180;i=Math.sqrt(Math.pow(g,2)+Math.pow(d,2))*Math.sin(zs(y)),3!==v&&2!==v||y>67.5&&y<=90||(i+=2*g),a=d,a=90===r?g:270===r?-g:0,l===Vg?(a=f&&s[0]===t&&"linear"===h?a+a/2:a,Od(this).attr("transform","translate(".concat(-a+p,"\n                                ").concat(-i-p,") rotate(").concat(r,")"))):(a=f&&s[0]===t&&"linear"===h?a-a/2:a,Od(this).attr("transform","translate(".concat(a-p,"\n                                ").concat(i+p,") rotate(").concat(r,")")))}))}(e,h,o);return h};function Mv(t){var e=t.renderConfig(),n=t.config(),r=e.show,i=e.xOffset,a=e.yOffset,o=e.showAxisName,c=e.labels,u=e.smartAxisName,s=t.mount(),l=n.orientation,f=n.axisNamePadding,h=n.className,d=n.id,p=n.classPrefix;if(r){var g,v,y,m=Fd(Od(s),"g",[t],"".concat(h),{},(function(t){return t.config().id}));if(m.attr("transform","translate(".concat(i,",").concat(a,")")),t.domain().length>0){var b=t.dependencies().labelManager,x=t.range(),w=t.axis(),_=t.scale(),k=t._tickLabelStyle,S=t._tickFormatter;y=t.getTickSize(),b.setStyle(k);var M=_.ticks||_.quantile||_.domain,E=w.tickValues()||M();w.tickFormat(S(E)),g=Math.abs(x[0]-x[1]),v=t.axisComponentDimensions().largestTickDimensions,function(t){var e=t.config().fixedBaseline,n=t.renderConfig().showInnerTicks,r=t.domain();e&&r.length&&n&&t.setFixedBaseline()}(t),c.rotation||!1!==c.smartTicks?(m.call(w),Sv(m,t,y)):m.transition().duration(1e3).on("end",t.registerAnimationDoneHook()).call(w),m.selectAll(".tick").classed("".concat(p,"-ticks"),!0),m.selectAll(".tick line").classed("".concat(p,"-tick-lines"),!0),m.selectAll(".tick text").classed("".concat(p,"-ticks"),!0).classed("".concat(p,"-ticks-").concat(d),!0)}var C=Fd(m,"text",[u],"".concat(p,"-axis-name")).attr("text-anchor","middle").classed("".concat(p,"-axis-name-").concat(d),!0).text((function(t){return t.text}));C.classed("hidden",!o);var A=g/2;!function(t,e,n){var r=n.axisNameHeight,i=n.availableSpace;switch(e){case Ug:t.attr("transform","translate(".concat(-(i.width-r),",").concat(i.height/2,")rotate(-90)"));break;case Gg:t.attr("transform","translate(".concat(i.width-r,",").concat(i.height/2,")rotate(90)"));break;case Vg:t.attr("transform","translate(".concat(i.width/2,",").concat(-i.height+r,")"));break;case Wg:t.attr("transform","translate(".concat(i.width/2,",").concat(i.height-r/2,")"))}}(C,l,{labelProps:v,tickSize:y,axisNamePadding:f,axisNameHeight:u.height,yOffset:a,xOffset:i,labelOffset:A,availableSpace:t.availableSpace()})}}var Ev,Cv={month:"September",quarter:"October",halfYearly:"July",year:9999,day:"September",hour:"24 AM",mintues:"60:60",seconds:":60",week:"Wed 31"},Av=[[1,1,"milliseconds",nr.every(1),"seconds"],[1,1e3,"seconds",tr.every(1),"seconds"],[5,5e3,"five seconds",tr.every(5),"seconds"],[10,1e4,"ten seconds",tr.every(10),"seconds"],[15,15e3,"fifteen seconds",tr.every(15),"seconds"],[30,3e4,"thirty seconds",tr.every(30),"seconds"],[1,6e4,"minute",Zn.every(1),"minutes"],[5,3e5,"five minutes",Zn.every(5),"minutes"],[10,6e5,"ten minutes",Zn.every(10),"minutes"],[15,9e5,"fifteen minutes",Zn.every(15),"minutes"],[30,18e5,"thirty minutes",Zn.every(30),"minutes"],[1,36e5,"hour",$n.every(1),"hour"],[3,108e5,"three hours",$n.every(3),"hour"],[6,216e5,"six hours",$n.every(6),"hour"],[12,432e5,"twelve hours",$n.every(12),"hour"],[1,864e5,"daily",Xn.every(1),"day"],[1,6048e5,"weekly",zn.every(1),"week"],[1,2592e6,"monthly",jn.every(1),"week"],[3,7776e6,"quaterly",jn.every(3),"quarter"],[6,15552e6,"half yearly",jn.every(6),"halfYearly"],[1,31536e6,"yearly",Fn.every(1),"year"],[2,63072e6,"2 year",Fn.every(2),"year"],[3,94608e6,"3 year",Fn.every(3),"year"],[5,15768e7,"5 year",Fn.every(5),"year"],[10,31536e7,"decade",Fn.every(10),"year"],[100,31536e8,"century",Fn.every(100),"year"],[1e3,31536e9,"millenium",Fn.every(1e3),"year"]],Pv=function(t,e,n){for(var r=Av.length-1,i=1,a=null,o=Av.length-1;o>=0;o--){var c=Av[o],u=Math.floor(t/c[1]);u<=e&&(r=o,i=u)}return a=Av[r],function(t,e){var n=t._minTickDistance.width,r=t.availableSpace().width;return Math.floor((r-(e-1)*n)/e)}(n,i)<function(t,e){var n=t._dependencies.labelManager,r=Cv[e];return n.getOriSize(r).width}(n,a[4])&&r<Av.length-1&&(a=Av[r+1]),a[3]},Dv=function(t){var e=t._minTickDistance,n=t._minTickSpace,r=e.width,i=n.width,a=t.availableSpace().width,o=Math.floor((a+r)/(i+r)),c=t.scale().ticks(function(t,e){var n=e,r=t.domain(),i=t._minDiff,a=r[1]-r[0],o=Math.floor(a/i);return e>=o&&(n=o),Pv(a,n,t)}(t,o));t.renderConfig({tickValues:c})},Iv=function(t,e){return t[0]+=e,t[1]-=e,t},Tv=function(t,e){return t[0]-=e,t[1]+=e,t},Rv=(Ev={},Rg()(Ev,Vg,Iv),Rg()(Ev,Wg,Iv),Rg()(Ev,Ug,Tv),Rg()(Ev,Gg,Tv),Ev),Nv=function(t,e,n,r){t.range(n),r&&t.renderConfig(Rg()({},"".concat(e,"Offset"),r))},Ov=function(t,e,n,r){var i=r.orientation,a=r.adjustRange,o=function(t,e,n){var r=Math.abs(e[1]-e[0]),i=r/(r/(n[1]-n[0])*t);return(r-r/(i+1)*i)/2}(t,e,n);return a?Rv[i](e,o):e},Fv=function(t,e){var n,r,i,a=t.config(),o=t.availableSpace(),c=o.width,u=o.height,s=o.padding,l=s.top,f=s.left,h=s.bottom,d=s.right,p=e.isOffset,g=t.renderConfig(),v=g.showAxisName,y=g.labels,m=y.rotation,b=a.fixedBaseline,x=a.axisNamePadding,w=a.tickValues,_=t.getAxisDimensions(),k=_.tickDimensions,S=_.allTickDimensions,M=_.axisNameDimensions,E=_.tickSize,C=k.height,A=k.width,P=v?x:0,D={smartTicks:!0,rotation:y.rotation},I=t._minTickDistance,T=t._minTickSpace,R=t._minDiff,N=t.domain(),O=M.height,F=I.width,L=Math.min(T.width,A),j=Math.min(T.height,C);return n={},Rg()(n,Kg,{x:function(){!w&&t.applyTickSkipping();var e=t.getTickValues().length;i=u-O-E-P,(r=(c-(e-1)*F)/e)<L&&0!==m&&(D.rotation=m,r<j&&(i=u,r=j,t.renderConfig({showInnerTicks:!1,showOuterTicks:!1}))),u<O&&t.renderConfig({show:!1});var n=Math.min(r,A);return Nv(t,"y",Ov(R,[n/2,c-f-d-n/2],N,a),p?u:null),t.maxTickSpaces({width:r,height:i,noWrap:null!==m}),D},y:function(){var e=c,n=C/2;return Nv(t,"x",Ov(R,[u-l-h-n,n],N,a),p?c:null),c-O-P<=F&&(e=0,t.renderConfig({showInnerTicks:!1,showOuterTicks:!1})),t.maxTickSpaces({width:e,height:u,noWrap:!0}),c<O&&t.renderConfig({show:!1}),D}}),Rg()(n,Xg,{x:function(){Nv(t,"y",[0,c-f-d],p?u:null);var e=t.range();if(r=(e[1]-e[0])/(w||N).length-F,i=u-O-E-P,r<L&&0!==m)D.rotation=null===m?-90:m,D.smartTicks=!1,r=Math.max(i,L),i<L&&t.renderConfig({showAxisName:!1});else if(w){c/N.length-F<L&&t.range([j/2,c-j/2])}return u<O&&t.renderConfig({show:!1}),t.maxTickSpaces({width:r,height:i,noWrap:null!==m}),D},y:function(){Nv(t,"x",[u-h,l],p?c:null);var e=c-O-E-P;return e<=F&&(e=0,t.renderConfig({showInnerTicks:!1,showOuterTicks:!1})),t.maxTickSpaces({width:e,height:u,noWrap:!0}),c<O&&t.renderConfig({show:!1}),D}}),Rg()(n,Yg,{x:function(){D.smartTicks=!1;var e=A/2;Nv(t,"y",[(b?0:e)+f,c-d-e],p?u:null);var n=t.range(),r=S.length*(A+F);return n[1]-n[0]<r&&null!==y.rotation&&(u-A-P-E>O?(D.rotation=null,t.renderConfig({showInnerTicks:!0,showAxisName:!0})):(D.rotation=-90,t.renderConfig({showInnerTicks:!0,showAxisName:!1}))),u<O&&t.renderConfig({show:!1}),D},y:function(){D.smartTicks=!1;var e=C/2;return Nv(t,"x",[u-h-(b?1:e),e+l],p?c:null),c<A+O+P&&(t.renderConfig({showInnerTicks:!1}),c<O&&t.renderConfig({show:!1})),D}}),n},Lv=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,r=n,i=e;if(t){var a=(t||0)*Math.PI/180;i=Math.abs(n*Math.sin(a))+Math.abs(e*Math.cos(a)),r=Math.abs(e*Math.sin(a))+Math.abs(n*Math.cos(a))}return{width:i,height:r}},jv=function(t){var e=0,n=0,r=t.logicalSpace(),i=t.config(),a=i.orientation,o=i.xOffset,c=i.yOffset;a===Ug&&(e=void 0===o?r.width:o),a===Vg&&(n=void 0===c?r.height:c),t.renderConfig({xOffset:e,yOffset:n})},Bv=function(t){var e,n="",r={width:0,height:0},i={},a=[],o=t.scale(),c=t.renderConfig(),u=c.tickValues,s=c.showAxisName,l=t.config().name,f=t.dependencies().labelManager,h=o.ticks||o.quantile||o.domain;return f.setStyle(t._tickLabelStyle),e=(e=u||h()).map((function(o,c){var u=t.getFormattedText(o,c,e),s=f.getOriSize(u);return a.push(s),s.width>r.width&&(n=u,i=t.smartTicks()?t.smartTicks()[c]:{},r=s,i=i||s),u})),f.setStyle(t._axisNameStyle),{axisNameDimensions:s?f.getOriSize(l):{width:0,height:0},largestTick:n,largestTickDimensions:r,allTickDimensions:a,axisTicks:e,smartTick:i,tickSize:t.getTickSize()}},zv=function(t){var e={},n=t.renderConfig().labels,r=n.smartTicks,i=n.rotation,a=Bv(t),o=a.largestTickDimensions,c=a.axisTicks,u=a.smartTick,s=a.axisNameDimensions,l=a.allTickDimensions,f=a.tickSize,h=o.height,d=o.width;return 0===t.domain().length?{allTickDimensions:l,tickSize:0,tickDimensions:{height:0,width:0},axisNameDimensions:s,largestTickDimensions:o,axisTicks:c}:(e=Lv(i,(e=r?u:{width:d,height:h}).width,e.height),0===f&&(e={width:0,height:0}),{allTickDimensions:l,tickSize:f,tickDimensions:e,axisNameDimensions:s,largestTickDimensions:o,axisTicks:c})},Hv=function(t,e,n){var r,i,a=t.domain(),o=t._minTickDistance.width,c=e.tickSize,u=e.tickDimensions,s=e.axisNameDimensions,l=t.config(),f=l.axisNamePadding,h=l.tickValues,d=t.renderConfig().showAxisName,p=s.height,g=u.height,v=u.width;if(r=n&&n.length?n[1]-n[0]:3*(v+o),i=0,h){var y=t.getMinTickDifference(),m=[Math.min.apply(Math,Gp()(h).concat(Gp()(a))),Math.max.apply(Math,Gp()(h).concat(Gp()(a)))];r=(m[1]-m[0])/Math.abs(y)*(v+t._minTickDistance.width)}return i=n&&n.length?g:Math.max(v,g),{width:r,height:i+=(d?p+f:0)+c}},Wv=function(t,e){var n,r,i=t.domain(),a=e.tickSize,o=e.tickDimensions,c=e.axisNameDimensions,u=t.config(),s=u.axisNamePadding,l=u.tickValues,f=t.renderConfig().showAxisName,h=c.height,d=o.height;if(n=0,r=o.width,l){var p=t.getMinTickDifference(),g=[Math.min.apply(Math,Gp()(l).concat(Gp()(i))),Math.max.apply(Math,Gp()(l).concat(Gp()(i)))];n=(g[1]-g[0])/Math.abs(p)*d}return{height:n,width:r+=(f?h:0)+a+(l?s:0)}},Vv=function(t){var e=t.range(),n=t.getAxisDimensions(),r=t.config().orientation,i=t.renderConfig().show,a=n.largestTickDimensions,o=n.axisTicks,c=n.allTickDimensions,u=a.height,s=t._minTickDistance.width;if(r===Vg||r===Wg){var l=Hv(t,n,e),f=l.width,h=l.height;return e&&e.length||(f=c.reduce((function(t,e){return t+Math.min(e.width,e.height)+s}),0)),!1===i&&(h=0,f=0),{width:f,height:h}}var d=Wv(t,n),p=d.width,g=d.height;return g&&0!==g||(g=o.length*(u+t._minTickDistance.height)),!1===i&&(p=0),{width:p,height:g}},Uv=function(t,e){var n=t.config().domain;return n&&(e=n),ks(e,[])},Gv=function(t,e){var n=t.config().nice,r=t.scale.bind(t);r().domain(e),n&&r().nice(),t._domain=r().domain()},qv=function(t,e){var n=t.config(),r=n.orientation,i=n.isOffset,a=t._minDiff;if(t.range().length&&(r===Vg||r===Wg)){t.applyTickSkipping();var o=t.getAxisDimensions().largestTickDimensions,c=t.getTickValues().length,u=t.availableSpace(),s=u.width,l=u.height,f=u.padding,h=f.left,d=f.right,p=Math.min(o.width,(s-(c-1)*t._minTickDistance.width)/c);t.maxTickSpaces({width:p});var g=Ov(a,[p/2,s-h-d-p/2],e,t.config());Nv(t,"y",g,i?l:null),t.setTickConfig()}},Yv=function(t,e,n){var r=n.getOriSize(t);return n.useEllipsesOnOverflow(!0),n.getSmartText(t,e,r.height,!0)},Xv={availableSpace:{},axisDimensions:{},axisComponentDimensions:{},config:{sanitization:function(t,e){var n=Object.assign({},t._config||{}),r=Fs({},n);(e=Fs(r,e)).axisNamePadding=Math.max(e.axisNamePadding,0);var i=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return!(!Object.keys(t).length||!Object.keys(e).length)&&n.some((function(n){return t[n]!==e[n]}))}(e,n,["interpolator","exponent","base","orientation"]),a=t.sanitizeTickFormatter(e);return i&&(t._scale=t.createScale(e),t._axis=t.createAxis(e)),t._tickFormatter=function(t){return a(t)},t.resetRenderConfig(e),e}},renderConfig:{sanitization:function(t,e){var n=Object.assign({},t._renderConfig||{});return e=Fs(n,e)}},logicalSpace:{},mount:{},range:{sanitization:function(t,e){return t.scale().range(e),t.logicalSpace(null),e}},smartTicks:{},tickSize:{},maxTickSpaces:{sanitization:function(t,e){var n=Object.assign({},t._maxTickSpaces||{});return e=Fs(n,e)}},valueParser:{defaultValue:function(t){return t}}};function Kv(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function $v(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Kv(Object(n),!0).forEach((function(e){Rg()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Kv(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Qv,Zv=function(){function t(e,n){Yp()(this,t),this._id=ts(),this._dependencies=n,this._mount=null,this._range=[],this._domain=[],this._domainLock=!1,this._axisDimensions={},this._smartTicks=[];var r=Fs({},this.constructor.defaultConfig()),i=Fs(r,e),a=Od("body"),o=i.classPrefix;this._tickLabelStyle=Zd(a,"".concat(o,"-ticks")),this._axisNameStyle=Zd(a,"".concat(o,"-axis-name")),n.labelManager.setStyle(this._tickLabelStyle);var c=n.labelManager.getOriSize("w");this._minTickDistance={width:3*c.width/4,height:c.height/2},this._minTickSpace=n.labelManager.getOriSize("www..."),Ps(this,Xv),this.config(i),this._scale=this.createScale(this._config),this._axis=this.createAxis(this._config),this._animationDonePromises=[]}return Kp()(t,[{key:"setFixedBaseline",value:function(){return this}},{key:"scale",value:function(){return arguments.length?(this._scale=arguments.length<=0?void 0:arguments[0],this):this._scale}},{key:"resetDomain",value:function(){return this._domain=[],this}},{key:"axis",value:function(){return arguments.length?(this._axis=arguments.length<=0?void 0:arguments[0],this):this._axis}},{key:"domain",value:function(){if(arguments.length){var t=Uv(this,arguments.length<=0?void 0:arguments[0]);return this.scale().domain(t),this._domain=this.scale().domain(),this.setAxisComponentDimensions(),this.logicalSpace(null),this}return this._domain}},{key:"setAxisComponentDimensions",value:function(){this.axisComponentDimensions(Bv(this))}},{key:"dependencies",value:function(){return this._dependencies}},{key:"createScale",value:function(t){var e=t.base;return _v({padding:t.padding,interpolator:t.interpolator,exponent:t.exponent,base:e,range:this.range(),type:this.constructor.type()})}},{key:"sanitizeTickFormatter",value:function(t){var e=t.tickFormat,n=t.format;return e?function(t){return function(r,i){return e(n(r),r,i,t)}}:function(){return function(t){return n(t)}}}},{key:"resetRenderConfig",value:function(t){var e=t.labels,n=t.show,r=t.showInnerTicks,i=t.showOuterTicks,a=t.showAxisName,o=t.xOffset,c=t.yOffset,u=t.tickValues,s=t.smartAxisName;return this.renderConfig({labels:e,show:n,showInnerTicks:r,showOuterTicks:i,showAxisName:a,xOffset:o,yOffset:c,tickValues:u,smartAxisName:s}),this}},{key:"resetLogicalSpace",value:function(){this.logicalSpace(null),this.range([]),this.resetRenderConfig(this.config())}},{key:"getFormattedText",value:function(t,e,n){return(0,this._tickFormatter)(n)(t,e)}},{key:"createAxis",value:function(t){var e=t.orientation,n=qg[e];return n?n(this.scale()):null}},{key:"setTickValues",value:function(t){var e=this.renderConfig();this.config($v($v({},e),{},{tickValues:t})),this.tickValues=t,this.axis().tickValues(t)}},{key:"setAvailableSpace",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,i={},a=this.config(),o=a.orientation;this.availableSpace({width:t,height:e,padding:n});var c=this.constructor.type();return i=o===Vg||o===Wg?Fv(this,{isOffset:r})[c].x():Fv(this,{isOffset:r})[c].y(),this.renderConfig({labels:i}),this.setTickConfig(),this.setSmartAxisName(),this}},{key:"setSmartAxisName",value:function(){var t=this.config(),e=t.orientation,n=t.name,r=e===Vg||e===Wg?"width":"height",i=this.availableSpace()[r],a=this.dependencies().labelManager;return a.setStyle(this._axisNameStyle),this.renderConfig({smartAxisName:Yv(n,i,a)}),this}},{key:"setTickConfig",value:function(){return this}},{key:"getScaleValue",value:function(t){if(null!=t)return this.scale()(t)}},{key:"getTickSize",value:function(){return this.axis().tickSize()}},{key:"getAxisDimensions",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.axisDimensions(zv.apply(void 0,[this].concat(e))),this.axisDimensions()}},{key:"getLogicalSpace",value:function(){return this.logicalSpace()||this.logicalSpace(function(t){var e=t.range(),n=t.getAxisDimensions(),r=t.config().orientation,i=t.renderConfig(),a=i.show,o=i.showAxisName,c=n.axisNameDimensions;if(!1===a)return{width:0,height:0};var u=c.width;if(r===Vg||r===Wg){var s=Hv(t,n,e),l=s.width,f=s.height;return{width:Math.max(l,u),height:f}}var h=Wv(t,n),d=h.width,p=h.height;return{width:d,height:Math.max(p,o?u:0)}}(this)),jv(this),this.logicalSpace()}},{key:"invert",value:function(t){return this.scale().invert(t)}},{key:"getNearestRange",value:function(t,e){return[t,e]}},{key:"invertExtent",value:function(t,e){return[this.invert(t),this.invert(e)]}},{key:"getMinTickDifference",value:function(){return this.domain()}},{key:"getFormattedTickValues",value:function(t){return t}},{key:"getUnitWidth",value:function(){return 0}},{key:"serialize",value:function(){return{name:this.name,type:this.type,range:this.range(),config:this.config()}}},{key:"render",value:function(){return this.mount()&&(this.setTickConfig(),Mv(this)),this}},{key:"remove",value:function(){return Od(this.mount()).remove(),this}},{key:"unsubscribe",value:function(){return this}},{key:"isReverse",value:function(){var t=this.range();return t[0]>t[1]}},{key:"getPixelToValueRatio",value:function(){var t=this.scale(),e=t.range(),n=t.domain();return Math.abs(e[1]-e[0])/(n[1]-n[0])}},{key:"animationDone",value:function(){return Promise.all(this._animationDonePromises)}},{key:"registerAnimationDoneHook",value:function(){var t,e=new Promise((function(e){t=e}));return this._animationDonePromises.push(e),function(){t()}}},{key:"_getRawTickValue",value:function(t){return t}},{key:"getTicksBasedOnData",value:function(t){var e=this,n=Od(this.mount()).selectAll(".tick"),r=null,i=null;return t&&(r=n.filter((function(n){return t===e._getRawTickValue(n)})),i=n.filter((function(n){return!(t===e._getRawTickValue(n))}))),{selectionSet:r,rejectionSet:i||n}}},{key:"id",get:function(){return this._id}}],[{key:"defaultConfig",value:function(){return kv}}]),t}(),Jv=function(){function t(){Yp()(this,t)}return Kp()(t,[{key:"createScale",value:function(t){var e=t.range,n=wv.linear;return this._scale=n().range(e),this._scale}},{key:"getScaleValue",value:function(t){return this._scale(t)+.5}},{key:"sanitizeDomain",value:function(t){return t.length&&(t=cs(t)),t}}]),t}(),ty=function(){function t(){Yp()(this,t)}return Kp()(t,[{key:"createScale",value:function(t){var e=t.range,n=t.base,r=wv.log;return this._scale=r().range(e).base(n),this._scale}},{key:"getScaleValue",value:function(t){var e=this._scale;return t<=0?e(e.domain()[0]):e(t)+.5}},{key:"sanitizeDomain",value:function(t){return t[0]<=0&&(t[0]=Math.max(1,t[0])),t[1]<=0&&(t[1]=Math.max(1,t[1])),t}}]),t}(),ey=function(){function t(){Yp()(this,t)}return Kp()(t,[{key:"createScale",value:function(t){var e=t.range,n=t.exponent,r=wv.pow;return this._scale=r().range(e).exponent(n),this._scale}},{key:"getScaleValue",value:function(t){return this._scale(t)+.5}},{key:"sanitizeDomain",value:function(t){return t}}]),t}();function ny(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=eg()(t);if(e){var i=eg()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Jp()(this,n)}}var ry=(Qv={},Rg()(Qv,tv,ty),Rg()(Qv,ev,ey),Rg()(Qv,Yg,Jv),Qv),iy=function(t){Qp()(n,t);var e=ny(n);function n(t,r){return Yp()(this,n),t.tickFormat=t.tickFormat||function(t){return t},e.call(this,t,r)}return Kp()(n,[{key:"createScale",value:function(t){var e=t.base,n=t.padding,r=t.interpolator,i=t.exponent,a=this.range(),o=ry[r];this._interpolator=new o;var c=this._interpolator.createScale({padding:n,exponent:i,base:e,range:a});return c=c.nice()}},{key:"getScaleValue",value:function(t){if(null!=t)return this._interpolator.getScaleValue(t)}},{key:"getTickSize",value:function(){var t=this.renderConfig(),e=t.showInnerTicks,n=t.showOuterTicks,r=this.axis();return r.tickSizeInner(!1===e?0:6),r.tickSizeOuter(!1===n?0:6),r.tickSize()}},{key:"domain",value:function(){if(arguments.length){var t=this._interpolator.sanitizeDomain(Uv(this,arguments.length<=0?void 0:arguments[0]));return Gv(this,t),this.setAxisComponentDimensions(),this.logicalSpace(null),this}return this._domain}},{key:"setAvailableSpace",value:function(){for(var t,e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return(t=ov()(eg()(n.prototype),"setAvailableSpace",this)).call.apply(t,[this].concat(r)),this.getTickSize(),this}},{key:"setTickConfig",value:function(){var t=this.renderConfig(),e=t.tickValues,n=t.showInnerTicks,r=this.axis();if(!n)return r.tickValues([]),this;e&&e instanceof Array&&this.axis().tickValues(e);var i=this.getTickValues();r.tickValues(i);var a=this.dependencies().labelManager;a.setStyle(this._tickLabelStyle);var o=this._tickFormatter(i),c=i.map((function(t,e){var n=o(t,e),r=a.getOriSize(n);return r.text=n,r}));return this.smartTicks(c),this}},{key:"getTickValues",value:function(){var t=this.config().orientation,e=this.renderConfig().tickValues,n=this.range(),r=this.axis(),i=Math.abs(n[0]-n[1]),a=this.axisComponentDimensions().largestTickDimensions;return e||function(t,e,n,r){var i=0,a=[],o=r.config().numberOfTicks,c=n.scale().ticks().length,u=r._minTickDistance.width;return i=c,c*(e+u)>t&&(i=Math.floor(t/(e+u))),o=o||i,i=Math.min(o,Math.max(2,i)),(a=n.scale().ticks(i)).length>i&&(a=a.filter((function(t,e){return 0===t||e%2==0}))),2===i&&(a=[(a=n.scale().ticks(10))[0],a[a.length-1]]),a}(i,a[t===Wg||t===Vg?"width":"height"],r,this)}},{key:"getMinTickDifference",value:function(){return xl(this.renderConfig().tickValues)}},{key:"setFixedBaseline",value:function(t){var e=this.config().orientation,n=this.renderConfig().labels.rotation,r=this.axis(),i=r.tickValues(),a=this.smartTicks();if(a&&a.length){var o=this.smartTicks()[0],c=o.width,u=o.height;r.tickTransform((function(t){if(t===i[0]){if(e===Ug||e===Gg)return"translate(0, -".concat(u/3,"px)");if((e===Vg||e===Wg)&&!n)return"translate(".concat(c/2,"px,  ",0,"px)")}return""}))}return t}}],[{key:"type",value:function(){return Yg}}]),n}(Zv);function ay(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=eg()(t);if(e){var i=eg()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Jp()(this,n)}}var oy=function(t){Qp()(n,t);var e=ay(n);function n(){return Yp()(this,n),e.apply(this,arguments)}return Kp()(n,[{key:"setTickConfig",value:function(){var t,e="",n=this.domain(),r=this._dependencies.labelManager,i=this.config().padding,a=this.renderConfig(),o=a.labels,c=a.tickValues,u=this.maxTickSpaces(),s=u.height,l=u.width,f=u.noWrap,h=Lv(o.rotation,l,s),d=h.width,p=h.height;if(c&&this.axis().tickValues(c),e=c||n,r.setStyle(this._tickLabelStyle),"number"==typeof i){var g=Math.min(1,Math.max(0,i));this.scale().padding(g)}if(n&&n.length){var v=c||n,y=this._tickFormatter(v);e=v.map((function(e,n){return r.useEllipsesOnOverflow(!0),t=r.getSmartText(y(e,n),d,p,f),r.constructor.textToLines(t)}))}return this.smartTicks(e),this}},{key:"getLogicalSpace",value:function(){return this.logicalSpace()||this.logicalSpace(Vv(this)),jv(this),this.logicalSpace()}},{key:"getTickValues",value:function(){return this.axis().scale().domain()}},{key:"formatTickValue",value:function(t){return this.valueParser()(t)}},{key:"sanitizeTickFormatter",value:function(t){var e=this,n=t.tickFormat;return n?function(t){return function(r,i){return n(e.formatTickValue(r),r,i,t)}}:function(){return function(t){return e.formatTickValue(t)}}}},{key:"getUnitWidth",value:function(){return this.scale().bandwidth()}},{key:"getTickSize",value:function(){var t=this.renderConfig(),e=t.showInnerTicks,n=t.showOuterTicks,r=this.axis();return r.tickSizeInner(e?6:0),r.tickSizeOuter(n?6:0),r.tickSize()}},{key:"invertExtent",value:function(t,e){return this.scale().invertExtent(t,e)}},{key:"getNearestRange",value:function(t,e){var n=this.scale(),r=n.range(),i=r[0]>r[1],a=this.invertExtent(t,e);return[n(i?a[a.length-1]:a[0]),n(i?a[0]:a[a.length-1])+n.bandwidth()]}}],[{key:"type",value:function(){return Xg}}]),n}(Zv);function cy(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=eg()(t);if(e){var i=eg()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Jp()(this,n)}}var uy,sy,ly=function(t){Qp()(n,t);var e=cy(n);function n(){var t;Yp()(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(t=e.call.apply(e,[this].concat(i)))._minDiff=1/0,t}return Kp()(n,[{key:"createScale",value:function(t){var e=ov()(eg()(n.prototype),"createScale",this).call(this,t);return e=e.nice()}},{key:"formatTickValue",value:function(t){return this.scale().tickFormat()(t)}},{key:"sanitizeTickFormatter",value:function(t){var e=this,n=t.tickFormat;return n?function(t){var r=t.map((function(t){return t.getTime()}));return function(t,i){return n(e.formatTickValue(t),t.getTime(),i,r)}}:function(){return function(t){return e.formatTickValue(t)}}}},{key:"getTickSize",value:function(){var t=this.renderConfig(),e=t.showInnerTicks,r=t.showOuterTicks,i=this.axis();return i.tickSizeInner(!1===e?0:6),i.tickSizeOuter(!1===r?0:6),ov()(eg()(n.prototype),"getTickSize",this).call(this)}},{key:"getTickValues",value:function(){return this.renderConfig().tickValues||this.scale().ticks()}},{key:"minDiff",value:function(t){return this._minDiff=Math.min(this._minDiff,t),this}},{key:"applyTickSkipping",value:function(){Dv(this)}},{key:"domain",value:function(){if(arguments.length){var t=Uv(this,arguments.length<=0?void 0:arguments[0]);return Gv(this,t),this.setAxisComponentDimensions(),this.logicalSpace(null),qv(this,t),this}return this._domain}},{key:"getLogicalSpace",value:function(){return this.logicalSpace()||this.logicalSpace(Vv(this)),jv(this),this.logicalSpace()}},{key:"getMinTickDifference",value:function(){return xl(this.config().tickValues)}},{key:"setAvailableSpace",value:function(){for(var t,e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return(t=ov()(eg()(n.prototype),"setAvailableSpace",this)).call.apply(t,[this].concat(r)),this.getTickSize(),this}},{key:"setTickConfig",value:function(){var t,e,n=this.renderConfig(),r=n.labels,i=n.tickValues,a=this.maxTickSpaces(),o=a.height,c=a.width,u=a.noWrap,s=this._dependencies.labelManager,l=this.getTickValues();i&&this.axis().tickValues(i);var f=Lv(r.rotation,c,o),h=f.width,d=f.height;if(t=i||l,s.setStyle(this._tickLabelStyle),l&&l.length){var p=i||l,g=this._tickFormatter(p);t=p.map((function(t,n){return s.useEllipsesOnOverflow(!0),e=s.getSmartText(g(t,n),h,d,u),s.constructor.textToLines(e)}))}return this.smartTicks(t),this}},{key:"_getRawTickValue",value:function(t){return new Date(t).getTime()}}],[{key:"type",value:function(){return Kg}}]),n}(Zv),fy={Pink:{hex:"ffc0cb",rgb:"255,192,203"},LightPink:{hex:"ffb6c1",rgb:"255,182,193"},HotPink:{hex:"ff69b4",rgb:"255,105,180"},DeepPink:{hex:"ff1493",rgb:"255,20,147"},PaleVioletRed:{hex:"db7093",rgb:"219,112,147"},MediumVioletRed:{hex:"c71585",rgb:"199,21,133"},LightSalmon:{hex:"ffa07a",rgb:"255,160,122"},Salmon:{hex:"fa8072",rgb:"250,128,114"},DarkSalmon:{hex:"e9967a",rgb:"233,150,122"},LightCoral:{hex:"f08080",rgb:"240,128,128"},IndianRed:{hex:"cd5c5c",rgb:"205,92,92"},Crimson:{hex:"dc143c",rgb:"220,20,60"},FireBrick:{hex:"b22222",rgb:"178,34,34"},DarkRed:{hex:"8b0000",rgb:"139,0,0"},Red:{hex:"ff0000",rgb:"255,0,0"},OrangeRed:{hex:"ff4500",rgb:"255,69,0"},Tomato:{hex:"ff6347",rgb:"255,99,71"},Coral:{hex:"ff7f50",rgb:"255,127,80"},DarkOrange:{hex:"ff8c00",rgb:"255,140,0"},Orange:{hex:"ffa500",rgb:"255,165,0"},Gold:{hex:"ffd700",rgb:"255,215,0"},Yellow:{hex:"ffff00",rgb:"255,255,0"},LightYellow:{hex:"ffffe0",rgb:"255,255,224"},LemonChiffon:{hex:"fffacd",rgb:"255,250,205"},LightGoldenrodYellow:{hex:"fafad2",rgb:"250,250,210"},PapayaWhip:{hex:"ffefd5",rgb:"255,239,213"},Moccasin:{hex:"ffe4b5",rgb:"255,228,181"},PeachPuff:{hex:"ffdab9",rgb:"255,218,185"},PaleGoldenrod:{hex:"eee8aa",rgb:"238,232,170"},Khaki:{hex:"f0e68c",rgb:"240,230,140"},DarkKhaki:{hex:"bdb76b",rgb:"189,183,107"},Cornsilk:{hex:"fff8dc",rgb:"255,248,220"},BlanchedAlmond:{hex:"ffebcd",rgb:"255,235,205"},Bisque:{hex:"ffe4c4",rgb:"255,228,196"},NavajoWhite:{hex:"ffdead",rgb:"255,222,173"},Wheat:{hex:"f5deb3",rgb:"245,222,179"},BurlyWood:{hex:"deb887",rgb:"222,184,135"},Tan:{hex:"d2b48c",rgb:"210,180,140"},RosyBrown:{hex:"bc8f8f",rgb:"188,143,143"},SandyBrown:{hex:"f4a460",rgb:"244,164,96"},Goldenrod:{hex:"daa520",rgb:"218,165,32"},DarkGoldenrod:{hex:"b8860b",rgb:"184,134,11"},Peru:{hex:"cd853f",rgb:"205,133,63"},Chocolate:{hex:"d2691e",rgb:"210,105,30"},SaddleBrown:{hex:"8b4513",rgb:"139,69,19"},Sienna:{hex:"a0522d",rgb:"160,82,45"},Brown:{hex:"a52a2a",rgb:"165,42,42"},Maroon:{hex:"800000",rgb:"128,0,0"},DarkOliveGreen:{hex:"556b2f",rgb:"85,107,47"},Olive:{hex:"808000",rgb:"128,128,0"},OliveDrab:{hex:"6b8e23",rgb:"107,142,35"},YellowGreen:{hex:"9acd32",rgb:"154,205,50"},LimeGreen:{hex:"32cd32",rgb:"50,205,50"},Lime:{hex:"00ff00",rgb:"0,255,0"},LawnGreen:{hex:"7cfc00",rgb:"124,252,0"},Chartreuse:{hex:"7fff00",rgb:"127,255,0"},GreenYellow:{hex:"adff2f",rgb:"173,255,47"},SpringGreen:{hex:"00ff7f",rgb:"0,255,127"},MediumSpringGreen:{hex:"00fa9a",rgb:"0,250,154"},LightGreen:{hex:"90ee90",rgb:"144,238,144"},PaleGreen:{hex:"98fb98",rgb:"152,251,152"},DarkSeaGreen:{hex:"8fbc8f",rgb:"143,188,143"},MediumSeaGreen:{hex:"3cb371",rgb:"60,179,113"},SeaGreen:{hex:"2e8b57",rgb:"46,139,87"},ForestGreen:{hex:"228b22",rgb:"34,139,34"},Green:{hex:"008000",rgb:"0,128,0"},DarkGreen:{hex:"006400",rgb:"0,100,0"},MediumAquamarine:{hex:"66cdaa",rgb:"102,205,170"},Aqua:{hex:"00ffff",rgb:"0,255,255"},Cyan:{hex:"00ffff",rgb:"0,255,255"},LightCyan:{hex:"e0ffff",rgb:"224,255,255"},PaleTurquoise:{hex:"afeeee",rgb:"175,238,238"},Aquamarine:{hex:"7fffd4",rgb:"127,255,212"},Turquoise:{hex:"40e0d0",rgb:"64,224,208"},MediumTurquoise:{hex:"48d1cc",rgb:"72,209,204"},DarkTurquoise:{hex:"00ced1",rgb:"0,206,209"},LightSeaGreen:{hex:"20b2aa",rgb:"32,178,170"},CadetBlue:{hex:"5f9ea0",rgb:"95,158,160"},DarkCyan:{hex:"008b8b",rgb:"0,139,139"},Teal:{hex:"008080",rgb:"0,128,128"},LightSteelBlue:{hex:"b0c4de",rgb:"176,196,222"},PowderBlue:{hex:"b0e0e6",rgb:"176,224,230"},LightBlue:{hex:"add8e6",rgb:"173,216,230"},SkyBlue:{hex:"87ceeb",rgb:"135,206,235"},LightSkyBlue:{hex:"87cefa",rgb:"135,206,250"},DeepSkyBlue:{hex:"00bfff",rgb:"0,191,255"},DodgerBlue:{hex:"1e90ff",rgb:"30,144,255"},CornflowerBlue:{hex:"6495ed",rgb:"100,149,237"},SteelBlue:{hex:"4682b4",rgb:"70,130,180"},RoyalBlue:{hex:"4169e1",rgb:"65,105,225"},Blue:{hex:"0000ff",rgb:"0,0,255"},MediumBlue:{hex:"0000cd",rgb:"0,0,205"},DarkBlue:{hex:"00008b",rgb:"0,0,139"},Navy:{hex:"000080",rgb:"0,0,128"},MidnightBlue:{hex:"191970",rgb:"25,25,112"},Lavender:{hex:"e6e6fa",rgb:"230,230,250"},Thistle:{hex:"d8bfd8",rgb:"216,191,216"},Plum:{hex:"dda0dd",rgb:"221,160,221"},Violet:{hex:"ee82ee",rgb:"238,130,238"},Orchid:{hex:"da70d6",rgb:"218,112,214"},Fuchsia:{hex:"ff00ff",rgb:"255,0,255"},Magenta:{hex:"ff00ff",rgb:"255,0,255"},MediumOrchid:{hex:"ba55d3",rgb:"186,85,211"},MediumPurple:{hex:"9370db",rgb:"147,112,219"},BlueViolet:{hex:"8a2be2",rgb:"138,43,226"},DarkViolet:{hex:"9400d3",rgb:"148,0,211"},DarkOrchid:{hex:"9932cc",rgb:"153,50,204"},DarkMagenta:{hex:"8b008b",rgb:"139,0,139"},Purple:{hex:"800080",rgb:"128,0,128"},Indigo:{hex:"4b0082",rgb:"75,0,130"},DarkSlateBlue:{hex:"483d8b",rgb:"72,61,139"},SlateBlue:{hex:"6a5acd",rgb:"106,90,205"},MediumSlateBlue:{hex:"7b68ee",rgb:"123,104,238"},White:{hex:"ffffff",rgb:"255,255,255"},Snow:{hex:"fffafa",rgb:"255,250,250"},Honeydew:{hex:"f0fff0",rgb:"240,255,240"},MintCream:{hex:"f5fffa",rgb:"245,255,250"},Azure:{hex:"f0ffff",rgb:"240,255,255"},AliceBlue:{hex:"f0f8ff",rgb:"240,248,255"},GhostWhite:{hex:"f8f8ff",rgb:"248,248,255"},WhiteSmoke:{hex:"f5f5f5",rgb:"245,245,245"},Seashell:{hex:"fff5ee",rgb:"255,245,238"},Beige:{hex:"f5f5dc",rgb:"245,245,220"},OldLace:{hex:"fdf5e6",rgb:"253,245,230"},FloralWhite:{hex:"fffaf0",rgb:"255,250,240"},Ivory:{hex:"fffff0",rgb:"255,255,240"},AntiqueWhite:{hex:"faebd7",rgb:"250,235,215"},Linen:{hex:"faf0e6",rgb:"250,240,230"},LavenderBlush:{hex:"fff0f5",rgb:"255,240,245"},MistyRose:{hex:"ffe4e1",rgb:"255,228,225"},Gainsboro:{hex:"dcdcdc",rgb:"220,220,220"},LightGray:{hex:"d3d3d3",rgb:"211,211,211"},Silver:{hex:"c0c0c0",rgb:"192,192,192"},DarkGrey:{hex:"a9a9a9",rgb:"169,169,169"},Grey:{hex:"808080",rgb:"128,128,128"},DimGrey:{hex:"696969",rgb:"105,105,105"},LightSlateGrey:{hex:"778899",rgb:"119,136,153"},SlateGrey:{hex:"708090",rgb:"112,128,144"},DarkSlateGrey:{hex:"2f4f4f",rgb:"47,79,79"},Black:{hex:"000000",rgb:"0,0,0"}},hy=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],dy="#eaeaea",py={range:hy,value:hy[0],step:!1,stops:5,type:"linear"},gy=function(t){return"hsla(".concat(360*t[0],",").concat(100*t[1],"%,").concat(100*t[2],"%,").concat(t[3]||1,")")},vy=function(t){return(t.split(" ")||[]).reduce((function(t,e){return"".concat(t).concat(e.charAt(0).toUpperCase()).concat(e.slice(1))}),"")},yy=function(t,e){var n="";if("string"==typeof t)if(t=(t=t.replace(/ /g,"")).toLowerCase(),"hsl"===tl(t)||"hsla"===tl(t))n=[(n=t.match(/(\d+(\.\d+)?)/g))[0]/360,n[1]/100,n[2]/100,ks(Number(n[3]),1)];else if("hex"===tl(t))n=Zs(t);else if("rgb"===tl(t)){var r=t.substring(t.indexOf("(")+1,t.lastIndexOf(")")).split(/,\s*/);n=$s.apply(void 0,Gp()(r))}else fy[vy(t)]&&(n=$s.apply(void 0,Gp()(fy[vy(t)].rgb.split(","))));else n=t instanceof Array?t:$s(e);return n},my={config:{sanitization:function(t,e){var n=Fs({},t.constructor.defaultConfig());"linear"===e.type&&(e.range=e.range||[n.range[0]],e.range=e.range.length>1?e.range:[dy].concat(Gp()(e.range)));var r=Fs(n,t.config()),i=Fs(r,e);return i.range instanceof Array&&(i.range=i.range.map((function(t,e){return yy(t,hy[e])})),i.stops=e.stops?e.stops:e.range&&e.range.length>2?e.range.length:py.stops),i.value=yy(i.value,i.value),i}},domain:{},scale:{},uniqueValues:{}},by=function(t,e){return e},xy=function(t,e,n){switch(Cs(t,"constructor")){case Function:return t(e,n);case Array:return t;default:return e}},wy=function(t,e){var n=[];return e instanceof Array?(n=e.slice().sort(),n=Gp()(new Set([t[0]].concat(Gp()(e),[t[1]]))).sort()):n=Ll(t,e),{domain:t,newStops:n}},_y=function(t){return{domain:t.map((function(e,n){return n/(t.length-1)})),uniqueVals:t,scaleDomain:[0,1]}},ky=function(t,e,n){return{domain:t,uniqueVals:t,scaleDomain:[0,1],range:n}},Sy=function(t,e,n){return{uniqueVals:t,domain:t,nice:!0,range:n}},My=function(t,e,n){var r=wy(t,e),i=r.domain,a=r.newStops;return{uniqueVals:i,domain:a,nice:!0,range:function(t,e){var n=[];if(t>Math.min(e.length,18))for(var r=Ys()(Gs(),e.map((function(t){return gy(t)}))),i=0;i<t;i++)n[i]=r(i/(t-1));else n=e.slice(0,t);return{newRange:n}}(a.length-1,n).newRange}},Ey=function(t,e,n){var r=wy(cs(t),n.length-1);return{uniqueVals:r.domain,domain:r.newStops,nice:!0,range:n.map((function(t){return gy(t)}))}},Cy=function(t,e,n,r){return e(n[r.indexOf(t)])},Ay=function(t,e,n){var r=(t-n[0])/(n[n.length-1]-n[0]);return by(0,e(r),e(0))},Py=function(t,e,n){return by(0,e(t),e(n[0]))},Dy=function(t,e,n){return(r={},Rg()(r,"".concat(cv,"-").concat(cv,"-").concat(rv),{scale:rv,domainRange:function(){return ky},value:function(){return Ay}}),Rg()(r,"".concat(cv,"-").concat(uv,"-").concat(rv),{scale:rv,domainRange:function(){return ky},value:function(){return Ay}}),Rg()(r,"".concat(uv,"-").concat(uv,"-").concat(rv),{scale:rv,domainRange:function(){return _y},value:function(){return Cy}}),Rg()(r,"".concat(uv,"-").concat(uv,"-").concat(Qg),{scale:Qg,domainRange:function(){return Sy},value:function(){return Py}}),Rg()(r,"".concat(cv,"-").concat(cv,"-").concat(Qg),{scale:Yg,domainRange:function(){return Ey},value:function(){return Py}}),Rg()(r,"".concat(cv,"-").concat(uv,"-").concat(Qg),{scale:Jg,domainRange:function(){return My},value:function(){return Py}}),r)["".concat(t,"-").concat(e,"-").concat(n||"")];var r},Iy=function(){function t(e){var n;Yp()(this,t),Ps(this,my),this.config(e),this._domainType="linear"===this._config.type?cv:uv,this._rangeType="linear"!==this._config.type||this._config.step?uv:cv,this._schemeType=(n=this._config.range)&&"string"==typeof n&&"i"===n[0]?"sequential":"ordinal",this._colorStrategy=this.setColorStrategy(this._domainType,this._rangeType,this._schemeType),this._scale=this.createScale(this._colorStrategy),this._id=ts(),this.updateDomain(e.domain)}return Kp()(t,[{key:"createScale",value:function(t){var e,n=this.config().range;return n&&"string"==typeof n?"i"===(e=n)[0]?vv(i[e]):gv(i[e]):_v({type:t.scale,range:n})}},{key:"setColorStrategy",value:function(t,e,n){return Dy(t,e,n)}},{key:"getHslString",value:function(t){return gy(t)}},{key:"getColor",value:function(t){return this.getHslString(this.getRawColor(t))}},{key:"getRawColor",value:function(t){if(this.domain()&&void 0!==t){var e=this.scale(),n=e.range?e.range():null,r=this._colorStrategy.value(n)(t,e,this.domain(),this.uniqueValues());if(r){if("string"==typeof r){var i=r.substring(r.indexOf("(")+1,r.lastIndexOf(")")).split(/,\s*/);return $s.apply(void 0,Gp()(i))}return Gp()(r)}}return Gp()(this.config().value)}},{key:"setRangeWithInterpolatedColors",value:function(t,e){var n=e.domain,r=e.range,i=n.length,a=r.length;if("ordinal"===t&&i>a){var o=[],c=n.map((function(t,e){return e/i}));this._linearScale=wv.linear().range(this._config.range).domain(c);for(var u=0,s=i;u<s;u++){var l=1/s*u;o.push(Gp()(this._linearScale(l)))}this.scale().range(o)}}},{key:"updateDomain",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(t.length){var e=this.scale(),n=e.range?e.range():null,r=this._colorStrategy.domainRange(),i=this._colorStrategy.scale,a=r(t,this.config().stops,n);this.domain(a.domain),a.range&&this.scale().range(a.range),this.uniqueValues(a.uniqueVals),this.scale().domain(a.scaleDomain||this.domain()),this.setRangeWithInterpolatedColors(i,a)}return this}},{key:"serialize",value:function(){return{type:this.constructor.type(),scale:this.scale(),domain:this.domain(),config:this.config()}}},{key:"transformColor",value:function(t,e){var n=360*t[0],r=100*t[1],i=100*t[2],a=Math.min(ks(t[3],0),1),o=n+e[0],c=r+e[1],u=i+e[2],s=Math.min(a+e[3]||0,1);return{color:"hsla(".concat(o,",").concat(c,"%,").concat(u,"%,").concat(s,")"),hsla:[o/360,c/100,u/100,s]}}},{key:"id",value:function(){return this._id}},{key:"getHslArray",value:function(t){return yy(t)}}],[{key:"defaultConfig",value:function(){return py}},{key:"type",value:function(){return"color"}}]),t}(),Ty={value:51,range:[51,1e3]},Ry=(uy={},Rg()(uy,"".concat(uv,"-").concat(cv),{scale:Yg,domain:function(t){var e=t;return{domain:t.map((function(e,n){return n/(t.length-1)})),uniqueVals:e,scaleDomain:[0,1]}},range:function(t,e,n,r){var i=n[r.indexOf(t)];return Ys()(Vs(),Gp()(e.range()))(i)}}),Rg()(uy,"".concat(cv,"-").concat(cv),{scale:Yg,domain:function(t){return{uniqueVals:t,domain:t}},range:function(t,e,n){return by(0,e(t),e(n[0]))}}),Rg()(uy,"".concat(cv,"-").concat(uv),{scale:iv,domain:function(t,e){var n=[];return{uniqueVals:n=e instanceof Array?e.slice().sort():Ll(t,e),domain:n,nice:!0}},range:function(t,e,n){var r=(t-n[0])/(n[n.length-1]-n[0]),i=Vs().apply(void 0,Gp()(e.range()));return by(0,i(r),i(n[0]))}}),uy),Ny={config:{sanitization:function(t,e){return t._userRange=e.range,Fs(t._config||{},e)}},domain:{sanitization:function(t,e){return t.scale().domain(e),e}},range:{},scale:{},uniqueValues:{}},Oy=function(){function t(e){Yp()(this,t),Ps(this,Ny),this._id=ts(),this.config(this.constructor.defaultConfig()),this.config(e),this._domainType="linear"===this._config.type?cv:uv,this._config.range=this._userRange?this._userRange:this._config.range,this._config.stops=this._config.stops||5,this._rangeType="linear"===this._config.type&&this._config.stops?uv:cv,this._sizeStrategy=this.setStrategy(this._domainType,this._rangeType),this._scale=this.createScale(this._sizeStrategy),this._range=this._config.range,this.updateDomain(e.domain)}return Kp()(t,[{key:"setStrategy",value:function(t,e){return function(t,e){return Ry["".concat(t,"-").concat(e)]}(t,e)}},{key:"createScale",value:function(t){var e=this.config().range;return _v({type:t.scale,range:e})}},{key:"getSize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=this.config(),n=e.value,r=this.scale(),i=this.domain()||[1,1];return r&&i[0]!==i[1]&&1!==i.length?this._sizeStrategy.range(t,r,this.domain(),this.uniqueValues()):n}},{key:"updateDomain",value:function(t){if(t){var e=(0,this._sizeStrategy.domain)(t,this.config().stops);this.domain(e.domain),this.uniqueValues(e.uniqueVals),this.scale().domain(e.scaleDomain||this.domain())}return this}},{key:"serialize",value:function(){return{type:this.constructor.type(),scale:this.scale(),domain:this.domain(),range:this.range(),config:this.config()}}},{key:"id",value:function(){return this._id}}],[{key:"defaultConfig",value:function(){return Ty}},{key:"type",value:function(){return"size"}}]),t}(),Fy={generator:null,value:"circle",range:["circle","diamond","star","cross","square","wye","triangle"]},Ly=function(t,e){var n={};return t.forEach((function(t){n[t]=e(t)})),n},jy={config:{},domain:{},scale:{},uniqueValues:{},generator:{}},By=function(){function t(e){Yp()(this,t),Ps(this,jy),this._id=ts(),this._config=Object.assign({},this.constructor.defaultConfig()),this._config=Fs(this._config,e),this._scale=_v({type:"ordinal",range:this._config.range}),this.updateDomain(e.domain)}return Kp()(t,[{key:"getShape",value:function(t){if(!this.scale()||!this.domain()||!t||gt.isInvalid(t))return this.config().value;if(this._generatedShapes)return this._generatedShapes[t];var e=this.scale()(t);return"string"===e?fl(e):e}},{key:"updateDomain",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(t.length){var e=this.config().generator;this.uniqueValues(t),this.domain(t),this.scale().domain(t),e&&(this._generatedShapes=Ly(t,e))}return this}},{key:"serialize",value:function(){return{type:this.constructor.type(),scale:this.scale(),domain:this.domain(),range:this.config().range,config:this.config()}}},{key:"id",value:function(){return this._id}}],[{key:"defaultConfig",value:function(){return Fy}},{key:"type",value:function(){return"shape"}}]),t}(),zy={config:{sanitization:function(t,e){return Fs(t.config(),e)},preset:function(t,e){var n=e.range,r=e.domain;n&&t.range(n),r&&t.domain(r)}},domain:{},range:{}},Hy=ml.pie,Wy=function(t){var e=t._angleFn(t._domain);e.forEach((function(t){t.startAngle-=Math.PI/2,t.endAngle-=Math.PI/2})),t._angleValues=e.reduce((function(t,e){var n=e.data;return!t[n]&&(t[n]=[]),t[n].push(e),t}),{})},Vy=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Yp()(this,t),this._id=ts(),Ps(this,zy),this._config=Fs({},this.constructor.defaultConfig()),this.config(e),this._range=[0,360],this._angleFn=Hy().value((function(t){return"string"==typeof t?1:t})).sortValues(null),this._angleValues={}}return Kp()(t,[{key:"createScale",value:function(t){var e=this.config().range;return _v({type:t.scale,range:e})}},{key:"getScaleValue",value:function(t){return this._angleValues[t]}},{key:"padAngle",value:function(t){this._angleFn=this._angleFn.padAngle(t)}},{key:"domain",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];if(e.length){var r=this.config(),i=r.domain,a=e[0].length?e[0]:sv;return this._domain=xy(i,a,this),Wy(this),this}return this._domain}},{key:"range",value:function(){if(arguments.length){var t=this.config(),e=t.range;this._range=xy(e,arguments.length<=0?void 0:arguments[0],this);var n=this.domain(),r=Ig()(this._range,2),i=r[0],a=r[1];return this._angleFn.startAngle(i/180*Math.PI).endAngle(Math.PI*a/180),n&&n.length&&Wy(this),this}return this._range}}],[{key:"defaultConfig",value:function(){return{}}}]),t}(),Uy="x",Gy="y",qy="width",Yy="height",Xy="measurement",Ky="config",$y="minUnitWidth",Qy="minUnitHeight",Zy="dimensions",Jy="measures",tm="dimension",em="measure",nm="continuous",rm="binned",im="pivot",am="format",om="mount",cm="hasDataUpdated",um="rows",sm="columns",lm="data",fm="col",hm="row",dm="column",pm="color",gm="shape",vm="size",ym="detail",mm="layers",bm="transform",xm="ordinal",wm="linear",_m="left",km="right",Sm="top",Mm="bottom",Em="retinal",Cm="cell",Am="xAxes",Pm="yAxes",Dm="entryCell",Im="initialized",Tm="exitCell",Rm="axis",Nm="unit",Om="updated",Fm="beforeupdate",Lm="valueMatrix",jm="facet-headers",Bm="radius",zm="angle",Hm="angle0",Wm="arc",Vm="categorical",Um="temporal",Gm="bar",qm="line",Ym="point",Xm="Primary",Km="Secondary",$m="both",Qm="interaction",Zm="gridLines",Jm="gridBands",tb="header",eb="facet",nb="default",rb="asc",ib="desc",ab="dark",ob="none",cb="normal",ub="darker",sb=function(t){var e=t.config().minOuterRadius,n=t._domain;if(t._range.length){var r=t._scale,i=r.invert(e)-r.invert(0);t._domain=[n[0]-i,n[1]],r.domain(t._domain)}},lb=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Yp()(this,t),this._id=ts(),Ps(this,zy),this._range=[],this._radiusFactor=1,this._config=Fs({},this.constructor.defaultConfig()),this.config(e),this._scale=this.createScale({scale:wm})}return Kp()(t,[{key:"config",value:function(){if(arguments.length){var t=Fs(this.config(),arguments.length<=0?void 0:arguments[0]);return this._config=t,this}return this._config}},{key:"createScale",value:function(t){return _v({type:t.scale,range:this.range()})}},{key:"domain",value:function(){if(arguments.length){var t=this.config(),e=t.domain,n=xy(e,arguments.length<=0?void 0:arguments[0],this);n=cs(n),this._scale.domain(n),this._domain=n,sb(this)}return this._domain}},{key:"getInnerRadius",value:function(t){return void 0===t?this.range()[0]:this._scale(t)}},{key:"getOuterRadius",value:function(t){return void 0===t?this.range()[1]:this._scale(t)*this._radiusFactor}},{key:"range",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];if(e.length){var r=this.config(),i=r.padding,a=r.range,o=e[0].map((function(t,e){return t+(e?-i[e]:i[e])})),c=xy(a,o,this);this._range=c,this._scale.range(c),sb(this)}return this._range}},{key:"setRadiusFactor",value:function(t){return this._radiusFactor=t,this}}],[{key:"defaultConfig",value:function(){return{padding:[0,1],minOuterRadius:10}}}]),t}(),fb="dimension",hb="measure",db="temporal",pb=(sy={},Rg()(sy,fb,Xg),Rg()(sy,hb,Yg),Rg()(sy,db,Kg),function(){function t(e,n){Yp()(this,t),this._data=null,this._sourceDm=e,this._config=n,this._domain={}}return Kp()(t,[{key:"getDomain",value:function(t,e){var n=this._sourceDm.getDomain(t);if(e){var r=this._sourceDm.getDomain(e);return[Math.min(n[0],r[0]),Math.max(n[1],r[1])]}return n}},{key:"getData",value:function(){return this._data}},{key:"getUniqueValues",value:function(){return this._data.map((function(t){return t.key}))}},{key:"isSortedDomain",value:function(){return!1}}]),t}());function gb(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=eg()(t);if(e){var i=eg()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Jp()(this,n)}}var vb=function(t){Qp()(n,t);var e=gb(n);function n(t,r){var i;Yp()(this,n),i=e.call(this,t,r);var a=r.uniqueField,o=r.groupBy,c=r.value,u=r.sort,s=void 0===u?"":u;if(t.isEmpty())i._data=[{values:[]}],i._domain[a]=[];else{var l=t.constructor.DataModel().DataWranglers;s||(t=t.sort([[a],[o,"desc"]]));var f=l.stackBy(t.model,a,o,c,s),h={},d=t.getUidMap(),p=t.getData(),g=p.data,v=p.schema,y=t.getField(o).domain(),m=new Set,b=t.isTemporal(a),x=b?new Set:t.getDomain(a);f.y0.forEach((function(e,n){var r=f.id[n],i=d[r],c=t.getValueAtIndex(o,i),u=t.getValueAtIndex(a,i);h[c]||(h[c]=[]),h[c].push({values:[f.y0[n],f.y1[n]],rowId:r,data:g[i],uniqueVal:u}),b&&x.add(u),m.add("".concat(c,"-").concat(u))})),f.id.length<x.size*y.length&&x.forEach((function(e){y.forEach((function(n){if(!m.has("".concat(n,"-").concat(e))){var r=v.reduce((function(t,r,i){var c=r.name;return t[i]=c===o?n:c===a?e:gt.Invalid(null),t}),[]);h[n].push({values:[gt.Invalid(null),gt.Invalid(null)],rowId:r[t.getFieldIndex(ot.ROW_ID)],data:r,uniqueVal:e})}}))})),i._data=y.map((function(t){return{key:t,values:h[t].sort((function(t,e){return t.uniqueVal-e.uniqueVal}))}})),i._domain[a]=t.isTemporal(a)?t.getDomain(a):Gp()(x),i._domain[c]=[Math.min(as(f.y0),as(f.y1)),Math.max(is(f.y0),is(f.y1))],s||t.dispose()}return i}return Kp()(n,[{key:"getDomain",value:function(t){return this._domain[t]}},{key:"isSortedDomain",value:function(){return!!this._config.sort}}]),n}(pb);function yb(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=eg()(t);if(e){var i=eg()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Jp()(this,n)}}var mb=function(t){Qp()(n,t);var e=yb(n);function n(t,r){var i;if(Yp()(this,n),i=e.call(this,t,r),t.isEmpty())i._data=[{values:[]}];else{var a=r.groupBy instanceof Array?r.groupBy:[r.groupBy],o=t.getSchema();if(void 0!==a.map((function(t){return o.findIndex((function(e){return e.name===t}))})).find((function(t){return-1===t})))throw new Error("Groupby field ".concat(a," not found in schema"));var c=t.splitByRow(a);i._data=c.map((function(e){var n=e.getData().data,i=e.getValueAtIndex(r.groupBy,0);return n.key=gt.getActualValue(i),t.removeChild(e),{key:e.getValueAtIndex(r.groupBy,0),values:n}}))}return i}return Kp()(n,[{key:"getDomain",value:function(t){return this._sourceDm.getField(t).domain()}}]),n}(pb);function bb(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=eg()(t);if(e){var i=eg()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Jp()(this,n)}}var xb,wb=function(t){Qp()(n,t);var e=bb(n);function n(t,r){var i;return Yp()(this,n),i=e.call(this,t,r),t.isEmpty()?i._data=[{values:[]}]:i._data=[{values:t.getData().data}],i}return Kp()(n,[{key:"getUniqueValues",value:function(){return[0]}}]),n}(pb),_b=(xb={},Rg()(xb,"identity",wb),Rg()(xb,"group",mb),Rg()(xb,"stack",vb),xb);var kb,Sb,Mb,Eb=function(t,e,n){var r=_b[t];if("function"!=typeof r)throw new Error("Invalid transform type supplied.");return new r(e,n)},Cb=l.BAND,Ab=ut.POLAR,Pb=ut.CARTESIAN,Db=function(t,e,n,r,i){var a=e.meta,o=ks(a.currentState[i][n],a.originalState[n]),c=t.transformColor(o,r);return a.currentState[i][n]=c.hsla,c},Ib=function(t,e,n){var r={};return n.forEach((function(n){var i=Cs(t,n,"field"),a=i&&e.getField(i);r["".concat(n,"Field")]=i,r["".concat(n,"FieldIndex")]=e.getFieldIndex(i),r["".concat(n,"FieldType")]=a&&a.type(),r["".concat(n,"FieldSubType")]=a&&a.subtype()})),r},Tb=(kb={},Rg()(kb,Ab,(function(t,e){var n=[pg.RADIUS,pg.RADIUS0,pg.ANGLE,pg.ANGLE0,sg,lg,ug,fg];return Ib(t,e,n)})),Rg()(kb,Pb,(function(t,e){var n=[pg.X,pg.Y,pg.X0,pg.Y0,sg,lg,ug,fg];return Ib(t,e,n)})),kb),Rb=function(t,e,n,r){var i=gt.FieldType.MEASURE,a=e.transform,o=e.connectNullData,c=r.xField,u=r.yField,s=r.xFieldType===i?u:c,l=r.yFieldType===i?u:c,f=Cs(a.sort,l);return Eb(n,t,{groupBy:a.groupBy,uniqueField:s,sort:f,offset:a.offset,orderBy:a.orderBy,value:l,connectNullData:o})},Nb=function(t,e,n,r){var i=r.config().individualClassName,a="";return i instanceof Function&&(a=i(t,e,n,r)),a},Ob=(Sb={},Rg()(Sb,Ab,(function(t,e,n){var r=e.radiusFieldIndex,i=e.angleFieldIndex,a=e.radius0FieldIndex,o=e.angle0FieldIndex,c=n.getUids(),u=n.getFieldNames();return t.getData().map((function(t){return t.values.map((function(t,s){var l={radius:t[r],angle:void 0!==i?t[i]:1,radius0:t[a],angle0:t[o]};return[sg,lg,ug,fg].forEach((function(n){var r=t[e["".concat(n,"FieldIndex")]];l[n]=r})),l.source=t,l.rowId=c[s],l.dataObj=u.reduce((function(e,r){return e[r]=t[n.getFieldIndex(r)],e}),{}),l}))})).filter((function(t){return t.length}))})),Rg()(Sb,Pb,(function(t,e,n,r){var i=e.xFieldType,a=e.xFieldIndex,o=e.yFieldIndex,c=e.x0FieldIndex,u=e.y0FieldIndex,s=gt.FieldType.MEASURE,l=n.getFieldNames();return t.getData().map((function(t){return t.values.map((function(t){var f,h={};if(r===rg){var d,p,g,v;f=t.data||[];var y=Ig()(t.values,2),m=y[0],b=y[1];b>=m?(d=v=b,g=p=m):(d=v=m,g=p=b),(h=i===s?{x:g,x0:v,y:f[o],y0:f[o]}:{x:f[a],x0:f[a],y:0===d?f[o]:d,y0:p}).source=f,h.rowId=t.rowId}else f=t,(h={x:t[a],x0:t[c],y:t[o],y0:t[u]}).source=t,h.rowId=t[t.length-1];[sg,lg,ug,fg].forEach((function(t){var n=f[e["".concat(t,"FieldIndex")]];h[t]=n}));var x=h.source;return h.dataObj=l.reduce((function(t,e){return t[e]=x[n.getFieldIndex(e)],t}),{}),h}))})).filter((function(t){return t.length}))})),Sb),Fb=function(t,e){var n=e.transformType(),r=e.encodingFieldsInf();return Ob[e.coord()](t,r,e.data(),n)},Lb=(Mb={},Rg()(Mb,Ab,(function(t,e){var n=e.config(),r=n.sort,i=e._normalizedData[0],a=Cs(n.encoding.radius0,"field"),o=Cs(n.encoding.radius,"field");return r&&(i=i.sort((function(t,e){return r===vg?t.radius-e.radius:e.radius-t.radius}))),{radius:t.getDomain(o,a),angle:i.map((function(t){return t.angle})),angle0:i.map((function(t){return t.angle0}))}})),Rg()(Mb,Pb,(function(t,e){var n=e.encodingFieldsInf(),r=n.xField,i=n.yField,a=n.x0Field,o=n.y0Field,c={};return r&&(c.x=t.getDomain(r,a)),i&&(c.y=t.getDomain(i,o)),c})),Mb),jb=function(t){var e=t.update;return{x:e.x,y:e.y}},Bb=function(t,e){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:jb;t.data((n=[]).concat.apply(n,Gp()(e)).map((function(t){var e=r(t);return{x:e.x,y:e.y,data:t}})))},zb=function(t,e,n){for(var r in e)({}).hasOwnProperty.call(e,r)&&t.style(r,n?null:e[r])},Hb=function(t,e){var n,r,i=e.transition,a=e.groupAnimateStyle,o=i.duration,c=i.effect,u=i.disabled;a&&(Vd(t.node(),a.enter),r=a.update,n=u?t:t.transition().ease(ls[c]).duration(o).on("end",(function(){zb(Od(this),r,!0)})),zb(n,r))},Wb=function(t,e){var n=t.encodingTransform();return n?n(e,t,{smartLabel:t._dependencies.smartLabel}):e},Vb=function(t,e){var n=t.getUnitWidth(),r=t.scale(),i=r.range(),a=r.domain();return n||Math.abs(i[1]-i[0])/Math.abs(a[1]-a[0])*e},Ub=function(t,e){var n=t.encodingFieldsInf(),r=t.axes(),i=t.transformType(),a=t.config(),o=t._bandScale,c=gt.FieldType.DIMENSION,u=gt.FieldSubtype.TEMPORAL;return["x","y"].map((function(s){var l=0,f=0,h=0,d=[];if(n["".concat(s,"FieldType")]===c){var p,g=n["".concat(s,"FieldSubType")]===u?t.dataProps().timeDiffs[s]:0,v=r[s],y=a["pad".concat(s.toUpperCase())],m=a.innerPadding,b=e,x=v.scale();f=Vb(v,g);var w=v.constructor.type()===Cb,_=v.config().padding;if("group"===i){var k=w?0:_*f/2;o.range([k,f-k]).domain(b).paddingInner(m),l=o.bandwidth(),p=f-(w?0:_*f),d=b.map((function(t){return o(t)-(w?0:f/2)}))}else if(void 0!==y){var S;if(w){var M=x.step();S=x.padding()*M,l=x.bandwidth()+S}else l=f;d=b.map((function(){return w?-S/2:-l/2}))}else p=l=f-(h=w?0:_*f),d=b.map((function(){return w?0:-l/2}));f=p,h=w?_*v.scale().step():_*f}return{span:l,offsetValues:d,groupSpan:f,padding:h}}))},Gb=function(t){var e=t.mount();e&&(t.render(e),t.dependencies().throwback.commit(ct.ON_LAYER_DRAW,!0,t.metaInf().parentNamespace))},qb=function(t){var e=t.encodingFieldsInf(),n=t.config().transform.groupBy;return function(t,e,n){var r=gt.FieldType.DIMENSION,i=t.xField,a=t.yField,o=t.xFieldType,c=t.yFieldType,u=["xField","yField"].find((function(e){return t["".concat(e,"Type")]===r}));return[!i,!a,!n,!(!n||!e.data().isMeasure(n)),o===r&&c===r,u&&t[u]===n]}(e,t,n).some((function(t){return t}))?ag:null},Yb=function(t){return qb(t)||t.config().transform.type},Xb=function(t){var e=qb(t);if(e)return e;var n=t.encodingFieldsInf(),r=n.xField,i=n.yField,a=n.xFieldType,o=n.yFieldType,c=gt.FieldType.MEASURE,u=t.config().transform.groupBy,s=!!Cs(t._customConfig,"transform","type"),l=t.config().transform.type;if(!s&&u&&a!==o){var f=a===c?r:i;l=Cl(t.data(),f)[f]===yg?rg:ig}return l},Kb=function(t,e){var n=gt.FieldType.DIMENSION;return t.filter((function(t,r){return e[r]&&e[r].type===n})).join()},$b=function(t,e,n,r){var i={},a=t.values,o=r.config().encoding;for(var c in a){var u=Cs(o[c],"value");i[c]=u instanceof Function?u(a,e,n,r):a[c]}return i},Qb=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return{originalStyle:Object.assign({},{styles:t},e),currentState:new Map,lastInteraction:[]}},Zb=function(t,e,n,r){return t*Math[e](n)+r},Jb=function(t,e,n,r){return{x:Zb(t,"cos",e,n),y:Zb(t,"sin",e,r)}},tx=function(t,e){for(var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=e.width/2,i=e.height/2,a=0,o=t.length;a<o;a++){var c=t[a],u=c.update,s=u.angle,l=u.radius,f=u.radius0,h=u.angle0;if(c.update=Jb(l,s,r,i),n){var d=c.update=Jb(f,h,r,i),p=Jb(l,s,r,i),g=p.x,v=p.y;d.x0=g,d.y0=v}}return t},ex=function(t,e){for(var n=[e.x,e.y],r=0,i=n.length;r<i;r++){var a=n[r];if(a.constructor.type()===Cb)if("break"===function(){var e=r?"y":"x",n=a.domain().reduce((function(t,e,n){return t[e]=n,t}),{});return t.sort((function(t,r){return n[t[e]]-n[r[e]]})),"break"}())break}return t},nx=function(t){return t.map((function(t){var e=t.update,n=e.x,r=e.y;return{minX:n,maxX:n,minY:r,maxY:r,data:t.data}}))},rx=function(t,e,n){var r=n||Od(e.target).data()[0];if(Ju(r)&&Cs(r,"meta","layerId")===t.id()){var i=r&&r.source,a=null;return i&&(a=t.getIdentifiersFromData(i,r.rowId)),{dimensions:[r],id:a,layerId:t.id()}}return null},ix=Rg()({},Fg,{value:null}),ax=[{props:["".concat(a.LAYER_LOCAL_NAMESPACE,".").concat(Fg)],type:"registerImmediateListener",listener:function(t,e){var n=Ig()(e,2),r=n[0],i=n[1];t.dataDidSet([r,i])},namespace:function(t){return t.metaInf().namespace}}];function ox(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function cx(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ox(Object(n),!0).forEach((function(e){Rg()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ox(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var ux=function(t,e,n){var r,i=e.datum,a=e.datumStyle,o=e.colorMap;if("function"==typeof t){if("number"!=typeof a){var c=Se(a),u=t(c,i,n),s=u.diff,l=u.value;r=l||jl(c,s,n,o)}else{r=r(parseFloat(a,10),i,n)}return r}return t},sx=function(t,e,n,r){var i=r.interactionType,a=r.apply,o=r.reset,c=void 0!==o&&o,u=e.data()[0],s=u.meta,l=s.currentState,f=s.originalStyle,h=s.lastInteraction,d=!0,p=l.get(i);if(a===!!p)return!1;var g={},v=n.style,y=n.strokePosition,m=y;if(c&&l.clear(),t.colorMap||(t.colorMap=new Map),a){var b={styles:{},strokePosition:y};for(var x in v){var w=ux(v[x],{datum:u,datumStyle:e.style(x),colorMap:t.colorMap},a);b.styles[x]=w}l.set(i,b),h.push(i),g=b.styles}else if(p||c){l.delete(i),h.splice(h.indexOf(i),1);var _=function(t,e,n){var r,i=t.originalStyle,a=t.currentState,o=Object.assign({},i);return a.size>0&&(e=(r=n)[r.length-1],o=a.get(e)||{}),o}(u.meta,i,h);g=cx(cx({},f.styles),_.styles),m=_.strokePosition||f.strokePosition}else d=!1;return d&&t.applyStyles({styleObj:g,elem:e,datum:u,applicableStrokePos:m},r),!0};function lx(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function fx(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?lx(Object(n),!0).forEach((function(e){Rg()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):lx(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function hx(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return dx(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return dx(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,c=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return o=t.done,t},e:function(t){c=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(c)throw a}}}}function dx(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function px(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=eg()(t);if(e){var i=eg()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Jp()(this,n)}}var gx=[a.LAYER_GLOBAL_NAMESPACE,a.LAYER_LOCAL_NAMESPACE],vx=a.GROUP_GLOBAL_NAMESPACE,yx={"stroke-width":1,stroke:1,"stroke-opacity":1},mx=function(t){return function(t){Qp()(n,t);var e=px(n);function n(){var t;return Yp()(this,n),t=e.call(this),Ps(Og()(t),t.constructor.getterSetters()),t.axes({}),t.alias(t.constructor.formalName()+ts()),t._points=[],t._pointMap={},t._cachedData=[],t._id=ts(),t._measurement={},t._animationDonePromises=[],t._graphicElems={},t._customConfig=null,t}return Kp()(n,[{key:"store",value:function(){if(arguments.length){var t=this._store=arguments.length<=0?void 0:arguments[0],e=this.metaInf(),n=e.namespace;return t.addSubNamespace(n,Eg,this),pp(this,this.constructor.localOptions(),t,{subNamespace:n,namespace:"".concat(a.LAYER_LOCAL_NAMESPACE)}),this}return this._store}},{key:"domain",value:function(){var t="".concat(a.LAYER_GLOBAL_NAMESPACE,".").concat(Bg),e=this.store();if(arguments.length){var n=this.metaInf(),r=n.parentNamespace,i=n.namespace,o=ks(e.get(t,r),{});return o[i]=arguments.length<=0?void 0:arguments[0],this.store().commit(t,o,r),this}return this.store().get(t,this.metaInf().namespace)}},{key:"alias",value:function(){return arguments.length?(this._alias=arguments.length<=0?void 0:arguments[0],this):this._alias||this.constructor.formalName()}},{key:"enableCaching",value:function(){return this._cacheEnabled=!0,this}},{key:"resetData",value:function(){return this._cacheEnabled=!1,this.data(this._cachedData[0])}},{key:"clearCaching",value:function(){this.resetData()}},{key:"serialize",value:function(){return this.config()}},{key:"id",value:function(){return this._id}},{key:"getTransformedData",value:function(t,e,n,r){return Rb(t,e,n,r)}},{key:"calculateDomainFromData",value:function(t){var e={};return this.data().isEmpty()||(e=Lb[this.coord()](t,this)),e}},{key:"getDataDomain",value:function(t){var e=this.metaInf(),n=e.parentNamespace,r=e.namespace,i=Cs(this.store().get("".concat(a.LAYER_GLOBAL_NAMESPACE,".").concat(Bg),n),r);return void 0!==t?i[t]||[]:i}},{key:"getNormalizedData",value:function(t){return Fb(t,this)}},{key:"getNearestPoint",value:function(){return null}},{key:"applyInteractionStyle",value:function(t,e){var n=this.config().interaction||{},r=this._graphicElems,i=n[t.interactionType],a=this.getOverlayPathMount();if(i){var o,c=hx(e);try{for(c.s();!(o=c.n()).done;){var u=r[o.value];u&&sx(this,u,i,fx(fx({},t),{},{mountPoint:a}))}}catch(t){c.e(t)}finally{c.f()}}}},{key:"resolveTransformType",value:function(){this._transformType=Yb(this)}},{key:"transformType",value:function(){return this._transformType}},{key:"render",value:function(){return this}},{key:"elemType",value:function(){return"g"}},{key:"remove",value:function(){var t=this.metaInf(),e=t.namespace,n=t.parentNamespace,r=this.store();r.removeSubNamespace(e,Eg);var i=r.get("".concat(a.LAYER_GLOBAL_NAMESPACE,".domain"))[n];return i&&delete i[e],Od(this.mount()).remove(),this}},{key:"cachePoint",value:function(t,e){return null===t||(this._pointMap[t]=e),this}},{key:"addOverlayPathAndStyles",value:function(){return null}},{key:"getIdentifiersFromData",value:function(t,e){var n,r,i=this.data(),a=i.getSchema(),o=[[],[]],c=i.getDimensions();(a.forEach((function(e,n){var r=e.name;i.isDimension(r)&&(o[0].push(r),o[1].push(t[n]))})),c.length)||((n=o[0]).push.apply(n,[ot.ROW_ID]),(r=o[1]).push.apply(r,[e]));return o}},{key:"hasPlotSpan",value:function(){return!1}},{key:"getPlotSpan",value:function(){return{x:0,y:0}}},{key:"getPlotPadding",value:function(){return{x:0,y:0}}},{key:"getPointsFromIdentifiers",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.getAllAttrs,r=e.getBBox,i=e.target;if(!this.data())return[];var a,o=this._pointMap,c=[],u=hx(t);try{for(u.s();!(a=u.n()).done;){var s=a.value,l=o[s];if(l){var f=function(){var t=l.data;return i?i[0].every((function(e,n){return!(e in t)||t[e]===i[1][n]}))?(c.push(l),"break"):void 0:(c.push(l),"break")}();if("break"===f)break}}}catch(t){u.e(t)}finally{u.f()}return n?c:c.map((function(t){var e=es(t);if(r){var n=e.update||e;if(void 0!==e.size){var i=2*Math.sqrt(e.size/Math.PI);n.width=i,n.height=i,n.x-=i/2,n.y-=i/2}else void 0===n.width&&(n.width=2),void 0===n.height&&(n.height=2)}return e.update||e})).sort((function(t,e){return t.y-e.y}))}},{key:"isSortedDomain",value:function(){return this._transformedData.isSortedDomain()}},{key:"getTransformedDataFromIdentifiers",value:function(t){var e,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=gt.FieldType.MEASURE,a=this.data(),o=this.encodingFieldsInf(),c=o.yField,u=o.xField,s=o.yFieldType,l=o.xFieldType;if(l===i)e=a.getFieldIndex(u),n="x";else if(s===i){var f=this.constructor.formalName();e=a.getFieldIndex(c),n="y",f===mg&&(n=r%2==0?"y":"y0")}var h=[],d=a.getFieldNames();d.forEach((function(t){var e=a.getFieldIndex(t);h[e]=[]}));var p,g=0,v=hx(t);try{for(v.s();!(p=v.n()).done;){var y=p.value,m=this._pointMap[y];m&&function(){var t=m.normalizedData,r=t[n]||0,i=t.source;d.forEach((function(t){var n=a.getFieldIndex(t);h[n][g]=n===e?r:i[n]})),g++}()}}catch(t){v.e(t)}finally{v.f()}return[h,this.data().getSchema()]}},{key:"getPlotElementsFromSet",value:function(t){var e,n=this._graphicElems,r=[],i=hx(t);try{for(i.s();!(e=i.n()).done;){var a=n[e.value];a&&r.push(a)}}catch(t){i.e(t)}finally{i.f()}return r}},{key:"animationDone",value:function(){return Promise.all(this._animationDonePromises)}},{key:"registerAnimationDoneHook",value:function(){var t,e=new Promise((function(e){t=e}));return this._animationDonePromises.push(e),function(){t()}}},{key:"dataDidSet",value:function(t){var e=Ig()(t,2)[1],n=this.config();if(e&&n){this._cacheEnabled?this._cachedData.push(e):this._cachedData=[e];var r=n.encoding;if(r){var i=this.retrieveEncodingFields(r,this.coord(),e);if(this.encodingFieldsInf(i),this.resolveTransformType(),this._transformedData=this.getTransformedData(e,n,this.transformType(),i),this._normalizedData=this.getNormalizedData(this._transformedData),!1!==n.calculateDomain){var a=this.calculateDomainFromData(this._transformedData,this.encodingFieldsInf());this.domain(a)}}}return this}},{key:"retrieveEncodingFields",value:function(t,e,n){return Tb[e](t,n)}},{key:"applyStyles",value:function(t,e){var n=this,r=t.styleObj,i=t.elem,a=t.applicableStrokePos,o=t.datum,c=Object.keys(r),u=c.filter((function(t){return!(t in yx)}));c.forEach((function(t){n.addOverlayPathAndStyles(i.node(),o,{type:t,value:r[t],strokeProps:yx},a,e)})),this.applyElementStyles(i,u,r)}},{key:"applyElementStyles",value:function(t,e,n){e.forEach((function(e){t.style(e,n[e])}))}},{key:"getBoundBoxes",value:function(){return null}},{key:"getOverlayPathMount",value:function(){return this._overlayMount||(this._overlayMount=Od(this.mount()).select(".muze-overlay-paths").node()),this._overlayMount}}],[{key:"getState",value:function(){return[{domain:null},Object.keys(this.localOptions()).reduce((function(t,e){return t[e]=ix[e].value,t}),{})]}},{key:"getListeners",value:function(){return{store:[].concat(Gp()(ax),[{type:"registerChangeListener",props:this.getRenderProps(),listener:function(t){Gb(t)},subNamespace:function(t){var e,n=t.metaInf(),r=n.unitRowIndex,i=n.unitColIndex,a=n.namespace;return e={},Rg()(e,"".concat(gx[1],".").concat(Fg),a),Rg()(e,"".concat(vx,".domain.x"),"".concat(i,"0")),Rg()(e,"".concat(vx,".domain.y"),"".concat(r,"0")),Rg()(e,"".concat(vx,".domain.radius"),"".concat(r,"-").concat(i)),e}}]),throwback:[]}}},{key:"getQualifiedStateProps",value:function(){return this.getState().map((function(t,e){return Object.keys(t).map((function(t){return"".concat(gx[e],".").concat(t)}))}))}},{key:"create",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Pg()(this,e)}},{key:"defaultConfig",value:function(){return{transform:{type:"identity"}}}},{key:"getterSetters",value:function(){return Hg}},{key:"localOptions",value:function(){return ix}},{key:"defaultPolicy",value:function(t,e){return Fs(t,e)}},{key:"shouldDrawAnchors",value:function(){return!1}},{key:"getRenderProps",value:function(){return["".concat(gx[1],".").concat(Fg)].concat(Gp()(["x","y","radius"].map((function(t){return"".concat(vx,".domain.").concat(t)}))))}}]),n}(t)};function bx(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=eg()(t);if(e){var i=eg()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Jp()(this,n)}}var xx=function(t){Qp()(n,t);var e=bx(n);function n(){return Yp()(this,n),e.apply(this,arguments)}return Kp()(n,null,[{key:"formalName",value:function(){return Eg}}]),n}(Ol(Cg).with(mx)),wx=ml.line,_x=function(t){var e=t.update;return null!==e.y&&null!==e.x},kx=function(t){var e=t?t.update:{},n=e.x,r=e.y;return null===n||null===r},Sx=function(t){var e={prevOfNull:[],nextOfNull:[]};return t.forEach((function(n,r){var i=n.update;null!==i.y&&null!==i.x||function(t,e,n){var r=kx(t[e-1]),i=kx(t[e+1]);!r&&n.prevOfNull.push(e-1),!i&&n.nextOfNull.push(e+1)}(t,r,e)})),e},Mx=function(t){var e=t.mount,n=t.data,r=t.className,i=t.layer,a=t.strokeStyle,o=t.linepath,c=t.transition,u=t.updateFns,s=Fd(e,"path",n.length?[n]:[],r,u);return s.attr("class",(function(t,e){return t[e].className})),Vd(s,a),c.disabled||(s=s.transition().duration(c.duration).on("end",i.registerAnimationDoneHook())),s.attr("d",o(n)).style("fill-opacity",0),s},Ex=function(t){var e=t.layer,n=t.container,r=t.points,i=t.interpolate,a=t.connectNullData,o=t.className,c=t.style,u=t.transition,s=Od(n),l=e.config().nullDataLineStyle,f=e.config().nullDataLineClass,h=s.attr("class",o),d=yl[i],p=wx().curve(d).x((function(t){return t.update.x})).y((function(t){return t.update.y})).defined(_x),g=e._graphicElems,v={update:function(t,e){e.forEach((function(t){g[t.rowId]=s}))}};zb(h,c);var y,m=Mx({mount:h,data:r,strokeStyle:void 0,layer:e,linepath:p,transition:u,updateFns:v});return function(t,e){var n=[],r=e.prevOfNull,i=e.nextOfNull,a=r.length;if(!a)return n;for(var o=0;o<a;o++){var c=[],u=t[r[o]],s=t[i[o]];u&&c.push(u),s&&c.push(s),n.push(c)}return n}(y=r,Sx(y)).map((function(t){return a&&t.length>1&&Mx({mount:h,data:t,strokeStyle:l,className:".".concat(o,"-").concat(f),layer:e,linepath:p,transition:u,updateFns:v}),null})),m},Cx={classPrefix:ng,defClassName:"layer-line",className:"",interpolate:"linear",transform:{type:"group"},interaction:{fade:{style:{stroke:function(){return{diff:{a:-.5}}}}},focus:{style:{stroke:function(){return{diff:{a:-.5}}}}},brushStroke:{style:{stroke:function(){return{diff:{a:-.5}}}}},brushFocus:{style:{fill:function(){return{diff:{a:-.5}}}}},selectionHighlightFocus:{style:{fill:function(){return{diff:{a:-.5}}}}}},crossline:!0,nearestPointThreshold:20,encoding:{color:{},x:{},y:{},strokeOpacity:{value:1},fillOpacity:{value:0},strokeWidth:{value:"2px"}},transition:{effect:"cubic",duration:1e3},connectNullData:!1,nullDataLineStyle:{},nullDataLineClass:"null"};n(85);function Ax(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Px(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ax(Object(n),!0).forEach((function(e){Rg()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ax(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Dx(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return Ix(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ix(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,c=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return o=t.done,t},e:function(t){c=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(c)throw a}}}}function Ix(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Tx(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=eg()(t);if(e){var i=eg()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Jp()(this,n)}}var Rx=function(t){return function(t){Qp()(n,t);var e=Tx(n);function n(){var t;Yp()(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(t=e.call.apply(e,[this].concat(i)))._voronoi=new Es,t}return Kp()(n,[{key:"elemType",value:function(){return"path"}},{key:"getDrawFn",value:function(){return Ex}},{key:"translatePoints",value:function(t){var e=this,n=[],r=this.axes(),i=this.config().encoding,a=r.x,o=r.y,c=r.color;return ex(t,r),n=t.map((function(n,r){var u=a.getScaleValue(n.x)+a.getUnitWidth()/2,s=o.getScaleValue(n.y)+o.getUnitWidth()/2,l=c.getColor(n.color),f=$b({values:{x:u,y:s,color:l},data:n},r,t,e),h={stroke:f.color,"fill-opacity":i.fillOpacity.value,"stroke-width":i.strokeWidth.value},d={enter:{},update:{x:gt.isInvalid(n.x)?null:f.x,y:gt.isInvalid(n.y)?null:f.y},style:h,rowId:n.rowId,source:n.source,data:n.dataObj,meta:Qb(h),normalizedData:n};return d.className=Nb(n,r,t,e),e.cachePoint(n.rowId,d),d})),n=(n=Wb(this,n)).filter((function(t){var e=t.update;return!isNaN(e.x)&&!isNaN(e.y)}))}},{key:"getTranslatedData",value:function(t,e,n,r){var i=this;return t.map((function(a,o){var c,u,s=n[o];e?(c=e(a,o,t),u=a[0].rowId):(s=gt.getActualValue(s),c=r.color.getColor(s),u=s);var l=i.getPathStyle(c);return{data:i.translatePoints(a),style:l,meta:Qb(l),id:u}}))}},{key:"render",value:function(t){var e=this,n=this.config(),r=n.encoding,i=n.interpolate,a=n.className,o=n.defClassName,c=n.transition,u=this._normalizedData,s=this._transformedData,l=this.axes(),f=s.getUniqueValues(),h=_s(o,this.id(),n.classPrefix),d=Od(t);this._points=[],this._pointMap={},d.attr("class","".concat(h.join(" ")," ").concat(a));var p=r.color.value,g=this.getTranslatedData(u,p,f,l);return Fd(t,"g",g,null,{enter:function(t){Hb(t,{transition:c,groupAnimateStyle:{enter:{"stroke-opacity":0,"fill-opacity":e.getPathStyle()["fill-opacity"]},update:{"stroke-opacity":r.strokeOpacity.value}}})},update:function(t,r,a){var o=r.data,u="".concat(h[0],"-").concat(f[a]||a).toLowerCase(),s=r.style;e._points.push(o),Vd(t,s),e.getDrawFn()({layer:e,container:t.node(),interpolate:i,points:o,className:u,transition:c,style:s||{},connectNullData:n.connectNullData})}},(function(t){return t.id})),Bb(this._voronoi,this._points),this}},{key:"getPathStyle",value:function(t){return{stroke:t,"fill-opacity":"0"}}},{key:"getNearestPoint",value:function(t,e,n){var r=n.searchRadius,i=this.data();if(!i||i&&i.isEmpty())return null;r=void 0!==r?r:this.config().nearestPointThreshold;var a=this._voronoi.find(t,e,r),o=Cs(a,"data","data","update");if(a){var c=a.data.data,u=c.source,s=c.rowId;return{id:this.getIdentifiersFromData(u,s),dimensions:[{x:o.x,y:o.y,width:2,height:2}],layerId:this.id()}}return null}},{key:"applyStyles",value:function(t){var e=t.styleObj,n=t.elem;for(var r in e)n.style(r,e[r])}},{key:"getBoundBoxes",value:function(){return nx(this._points.flat())}},{key:"applyInteractionStyle",value:function(t,e){var n=this.config().interaction||{},r=this._graphicElems,i=new Set,a=n[t.interactionType];if(a){var o,c=Dx(e);try{for(c.s();!(o=c.n()).done;){var u=r[o.value];if(u){var s=u.data()[0];i.has(s)||(i.add(s),sx(this,u,a,Px({},t)))}}}catch(t){c.e(t)}finally{c.f()}}}}],[{key:"formalName",value:function(){return"line"}},{key:"defaultConfig",value:function(){return Cx}},{key:"defaultPolicy",value:function(t,e){var r=ov()(eg()(n),"defaultPolicy",this).call(this,t,e),i=r.encoding,a=r.transform,o=i.color&&i.color.field;return o&&!a.groupBy&&(a.groupBy=o),r}},{key:"shouldDrawAnchors",value:function(){return!0}}]),n}(t)},Nx={classPrefix:ng,defClassName:"layer-area",className:"",interpolate:"linear",transform:{type:rg},interaction:{fade:{style:{"fill-opacity":.7}},focus:{style:{"fill-opacity":.7}},brushStroke:{style:{"fill-opacity":.7}},brushFocus:{style:{fill:function(){return{diff:{a:-.5}}}}},selectionHighlightFocus:{style:{fill:function(){return{diff:{a:-.5}}}}}},crossline:!0,nearestPointThreshold:10,encoding:{color:{},x:{},y:{},y0:{},strokeOpacity:{value:1},fillOpacity:{value:.3}},transition:{effect:"cubic",duration:1e3},connectNullData:!1},Ox=ml.area,Fx=function(t){var e=t.layer,n=t.container,r=t.points,i=t.transition,a=t.className,o=t.interpolate,c=t.connectNullData,u=e._graphicElems,s=i.effect,l=i.duration,f=Od(n),h=yl[o],d=f.selectAll("path").data(r.length?[r]:[]),p=["enter","update"].map((function(t){return Ox().curve(h).x((function(e){return e[t].x})).y1((function(e){return e[t].y})).y0((function(e){return e[t].y0})).defined((function(t){return!gt.isInvalid(t.normalizedData.y)}))})),g=Ig()(p,2),v=g[0],y=g[1];f.attr("class",a);var m=r;c&&(m=m.filter((function(t){return!gt.isInvalid(t.normalizedData.y)})));var b=d.enter().append("path").attr("d",v(m)).each((function(t){t.forEach((function(t){null!==t.rowId&&(u[t.rowId]=f)}))}));d.merge(b).transition().ease(ls[s]).duration(l).on("end",e.registerAnimationDoneHook()).attr("d",y(m))};n(86);function Lx(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=eg()(t);if(e){var i=eg()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Jp()(this,n)}}var jx=function(t){return function(t){Qp()(n,t);var e=Lx(n);function n(){var t;return Yp()(this,n),(t=e.call(this))._dimensionMap={},t}return Kp()(n,[{key:"calculateDomainFromData",value:function(t,e){var r=ov()(eg()(n.prototype),"calculateDomainFromData",this).call(this,t),i=gt.FieldType.MEASURE;return[pg.X,pg.Y].forEach((function(t){e["".concat(t,"FieldType")]===i&&Cs(r[t],"length")&&(r[t][0]=Math.min(r[t][0],0),r[t][1]=Math.max(0,r[t][1]))})),r}},{key:"getDrawFn",value:function(){return Fx}},{key:"getDimensionMap",value:function(t){var e=this;return this._dimensionMap[t]||(this._dimensionMap[t]=Object.keys(this._pointMap).reduce((function(n,r){var i=e._pointMap[r].data[t];return n[i]||(n[i]=[]),n[i].push(e._pointMap[r]),n}),{})),this._dimensionMap[t]}},{key:"getNearestPoint",value:function(t,e,n){var r=n.searchRadius,i=this.data();if(!i||i&&i.isEmpty())return null;r=void 0!==r?r:this.config().nearestPointThreshold;var a,o=this._voronoi.find(t,e,r),c=null;if(!o&&n.dimValue&&this._pointMap){for(var u=n.dimValue[1][0],s=this.getDimensionMap(n.dimValue[0][0])[u]||[],l=0,f=s.length;l<f;l++){var h=s[l].update,d=h.y,p=h.y0;if(d<e&&e<p){a=l,c=s[l];break}}void 0!==a&&(o={index:a,data:{x:t,y:e,data:c}})}var g=Cs(o,"data","data","update");if(o){var v=o.data.data,y=v.source,m=v.rowId;return{id:this.getIdentifiersFromData(y,m),dimensions:[{x:g.x,y0:g.y0,y:g.y,width:2,height:2}],layerId:this.id()}}return null}},{key:"translatePoints",value:function(t){var e=this,n=[],r=this.transformType(),i=this.axes(),a=i.color,o=this.config(),c=o.encoding,u=this.encodingFieldsInf().y0Field,s=i.x,l=i.y,f=o.individualClassName,h=l.domain()[0],d=h<0?l.getScaleValue(0):l.getScaleValue(h);return ex(t,i),n=t.map((function(n,i){var o,h=s.getScaleValue(n.x)+s.getUnitWidth()/2,p=l.getScaleValue(n.y),g=u||r===rg?l.getScaleValue(n.y0):d;o=a.getColor(gt.getActualValue(n.color));var v=gt.isInvalid(n.y),y=gt.isInvalid(n.y0),m=$b({values:{x:h,y:p,y0:g,color:o},data:n},i,t,e),b={fill:o=m.color,"fill-opacity":c.fillOpacity.value},x={enter:{x:h,y:v?null:d,y0:y?null:d},update:{x:h,y:v?null:m.y,y0:y?null:m.y0},source:n.source,rowId:n.rowId,data:n.dataObj,normalizedData:n,className:f?f(n,i,t,e):"",style:b,meta:Qb(b)};return x.className=Nb(n,i,t,e),e.cachePoint(n.rowId,x),x})),n=(n=Wb(this,n)).filter((function(t){var e=t.update;return!isNaN(e.x)}))}},{key:"resolveTransformType",value:function(){this._transformType=Xb(this)}},{key:"getPathStyle",value:function(t){return{fill:t,"fill-opacity":.3}}}],[{key:"defaultConfig",value:function(){return Nx}}]),n}(t)};function Bx(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=eg()(t);if(e){var i=eg()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Jp()(this,n)}}var zx=function(t){Qp()(n,t);var e=Bx(n);function n(){return Yp()(this,n),e.apply(this,arguments)}return Kp()(n,null,[{key:"formalName",value:function(){return mg}}]),n}(Ol(xx).with(mx,Rx,jx)),Hx={classPrefix:ng,defClassName:"layer-arc",padding:{top:1,bottom:1,left:1,right:1},className:"",interaction:{highlight:{style:{fill:function(){return{diff:{a:-.1}}}}},fade:{style:{fill:function(){return{diff:{a:-.3}}}}},focus:{style:{fill:function(){return{diff:{a:-.5}}}}},brushFocus:{style:{fill:function(){return{diff:{a:-.5}}}}},selectionHighlightFocus:{style:{fill:function(){return{diff:{a:-.5}}}}}},height:100,width:100,sort:"",colors:["#F44336","blue","green","yellow","orange","purple"],transform:{type:"identity"},encoding:{"stroke-width":{value:"2px"},"stroke-linejoin":{value:"round"},angle:{value:"1"},radius:{value:"1"},opacity:{value:"1"},color:{value:"1"},shape:{value:"1"},size:{value:"1"}},transition:{effect:"cubic",duration:500},states:{highlight:{className:"".concat(ng,"-layer-arc-highlight")},fadeout:{className:"".concat(ng,"-layer-arc-fadeout")},selected:{className:"".concat(ng,"-layer-arc-selected")}}},Wx=function(t,e,n){var r=t[e-1],i=t[e],a=n.axes().angle.range(),o=Ig()(a,2),c=o[0],u=o[1];return r&&i?{update:{angle0:Cs(r,"update","angle"),angle:Cs(i,"update","angle0")}}:i?{update:{angle0:(c-90)*Math.PI*2/360,angle:(c-90)*Math.PI*2/360}}:{update:{angle0:(u-90)*Math.PI*2/360,angle:(u-90)*Math.PI*2/360}}},Vx=function(t,e){var n=e[0];return function(e){return t(Ws()(n._previousInfo,n)(e))}};n(87);function Ux(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return Gx(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Gx(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,c=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return o=t.done,t},e:function(t){c=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(c)throw a}}}}function Gx(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function qx(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=eg()(t);if(e){var i=eg()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Jp()(this,n)}}var Yx=ml.arc,Xx=function(t){return function(t){Qp()(n,t);var e=qx(n);function n(t,r,i,a){var o;return Yp()(this,n),(o=e.call(this,t,r,i,a))._prevPieData={},o}return Kp()(n,[{key:"elemType",value:function(){return"path"}},{key:"getNearestPoint",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.getDataFromEvent(n.event)}},{key:"getDataFromEvent",value:function(t){var e=Od(t.target).data()[0];if(Ju(e)){var n=e.source,r=e.rowId;return{id:this.getIdentifiersFromData(n,r),layerId:this.id()}}return null}},{key:"translatePoints",value:function(t){var e=this,n=this.axes(),r=n.angle,i=n.color,a=n.radius,o={},c=this._points[0]||[],u=[],s={};return this._prevPieData={},c.forEach((function(t,n){e._prevPieData[t.rowId]=[t,n],o[t.index]=t})),t.forEach((function(n,c){var l=r.getScaleValue(n.angle);if(l){!s[n.angle]&&(s[n.angle]=0);var f=l[s[n.angle]++],h=f.startAngle,d=f.endAngle,p=n.rowId,g=$b({values:{radius:a.getOuterRadius(n.radius),radius0:a.getInnerRadius(n.radius0),color:i.getColor(n.color),angle0:h,angle:d,startAngle:h,endAngle:d,startAngle0:h,endAngle0:d},data:n},c,t,e),v=g.color,y={source:n.source,index:c,enter:{},update:{angle0:g.angle0,angle:g.angle,radius0:g.radius0,radius:g.radius},color:v,meta:Qb({fill:v}),rowId:p,_previousInfo:e._prevPieData[p]?e._prevPieData[p][0]:Wx(o,c,e)};u.push(y),e.cachePoint(p,y)}})),u}},{key:"render",value:function(t){var e=this,n=this.measurement(),r=this.config(),i=r.classPrefix,a=r.defClassName,o=r.cornerRadius,c=r.padAngle,u=r.padRadius,s=r.transition,l=_s(a,this.id(),i),f=this._arcFn=Yx().cornerRadius(o).startAngle((function(t){return t.update.angle0+Math.PI/2})).endAngle((function(t){return t.update.angle+Math.PI/2})).padAngle(c).padRadius(u).outerRadius((function(t){return t.update.radius})).innerRadius((function(t){return t.update.radius0}));this._points=this._normalizedData.map((function(t){return e.translatePoints(t)}));var h=this._graphicElems={},d=Fd(Od(t),"g",this._points,"".concat(l[0],"-group")).classed("".concat(l[1],"-group"),!0).attr("transform","translate(".concat(n.width/2,",\n                    ").concat(n.height/2,")")),p=[],g=0;return Fd(d,"g",(function(t){return t}),"".concat(l[0]),{update:function(t){Fd(t,"path",(function(t){return[t]}),"".concat(l[0],"-path")).style("fill",(function(t){return t.color})).each((function(t){h[t.rowId]=Od(this)})).transition().duration(s.duration).on("end",e.registerAnimationDoneHook()).attrTween("d",(function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Vx(f,e)})).attr("class",(function(t,n){var r=Nb(t,n,e._points,e);return"".concat(l[0],"-path ").concat(l[1],"-path-").concat(t.index,"\n                        ").concat(r)}))},exit:function(t,e){var n=p[g],r=g;n?n[n.length-1].datum.index===e.index-1?n.push({elem:t,datum:e}):g++:n=[{elem:t,datum:e}],p[r]=n}}).attr("class",(function(t,e){return"".concat(l[0]," ").concat(l[1],"-").concat(e)})),function(t,e,n){t.length>0&&t.forEach((function(t){var r=t[0].datum.update.angle0,i=t[t.length-1].datum.update.angle,a=2*Math.PI*r/(2*Math.PI+r-i);t.forEach((function(t){var r=t.elem,i=t.datum;r.each((function(){var t=Od(this);t.selectAll("path").transition().duration(e.duration).attrTween("d",(function(){return function(t){return n(Ws()(i,{update:{angle0:a,angle:a,radius:i.radius,radius0:i.radius0}})(t))}})).remove(),t.remove()}))}))}))}(p,s,f),this}},{key:"getPointsFromIdentifiers",value:function(t){if(!this.data())return[];var e,n=[],r=Ux(t);try{for(r.s();!(e=r.n()).done;){var i=e.value;this._pointMap[i]&&n.push(this._pointMap[i])}}catch(t){r.e(t)}finally{r.f()}var a=n[0];if(a){var o=this.measurement(),c=this._arcFn.centroid(a);return[{x:c[0]+o.width/2,y:c[1]+o.height/2,width:2,height:2}]}return[]}}],[{key:"defaultConfig",value:function(){return Hx}},{key:"formalName",value:function(){return"arc"}}]),n}(t)};function Kx(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=eg()(t);if(e){var i=eg()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Jp()(this,n)}}var $x=function(t){Qp()(n,t);var e=Kx(n);function n(){return Yp()(this,n),e.apply(this,arguments)}return Kp()(n,null,[{key:"formalName",value:function(){return"arc"}}]),n}(Ol(xx).with(mx,Xx));function Qx(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=eg()(t);if(e){var i=eg()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Jp()(this,n)}}var Zx=function(t){Qp()(n,t);var e=Qx(n);function n(){return Yp()(this,n),e.apply(this,arguments)}return Kp()(n,null,[{key:"formalName",value:function(){return xg}}]),n}(Ol(xx).with(mx,Rx)),Jx=function(t,e,n,r){var i=Od(t).selectAll("g").data(e),a=r._dependencies.smartLabel,o=r._graphicElems,c=i.enter().append("g").each((function(t){zd(this,t.enter)})).merge(i),u=Zd(Od(t),n.className),s=parseInt(u.fontSize,10);return a.setStyle(u),c.each((function(t){var e=Od(this);o[t.rowId]=e;var n,r=t.update,i=t.text,c=t.color,u=t.textanchor,l=t.style,f=t.background;if(n=f.value){var h,d=f.padding,p=a.getOriSize(t.text),g=p.width,v=p.height,y=Fd(e,"rect",[1]);h="end"===u?g:"start"===u?0:g/2,zd(y.node(),{x:r.x-h-d/2,y:r.y-s-d/2,width:g+d,height:v+d}),f&&Vd(y,{background:n})}var m=Fd(e,"text",(function(t){return[t]})).text(i),b=m.node();l&&Vd(b,l),c&&Vd(b,{fill:c}),t.className&&m.classed(t.className,!0),zd(b,r),m.attr("text-anchor",u),m.attr("alignment-baseline",t["alignment-baseline"]),m.attr("transform","rotate(".concat(t.rotation," ").concat(r.x," ").concat(r.y,")"))})),i.exit().remove(),i},tw={defClassName:"layer-text",classPrefix:ng,className:"",transform:{type:"identity"},interaction:{highlight:{style:{fill:function(){return{diff:{l:-15}}}}},fade:{style:{fill:function(){return{diff:{l:15}}}}},focus:{style:{fill:function(){return{diff:{l:15}}}}}},crossline:!1,transition:{effect:"cubic",duration:1e3},encoding:{color:{},size:{},radius:{},angle:{},text:{value:"",formatter:function(t,e,n,r){return r.valueParser()(t)},background:{padding:10}},rotation:{value:0},"alignment-baseline":{value:"middle"}},states:{highlight:{className:"".concat(ng,"-layer-text-highlight")},fadeout:{className:"".concat(ng,"-layer-text-fadeout")},selected:{className:"".concat(ng,"-layer-text-selected")}}};n(88);function ew(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=eg()(t);if(e){var i=eg()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Jp()(this,n)}}function nw(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function rw(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?nw(Object(n),!0).forEach((function(e){Rg()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):nw(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var iw=tw.encoding,aw=iw["alignment-baseline"].value,ow=iw.rotation.value,cw={polar:function(t,e,n){for(var r=[],i=n.axes(),a=n.config().encoding,o=a.text,c=i.radius,u=i.color,s=i.angle,l=o.formatter,f=a.text.background,h=f.padding,d=f.value,p={},g=0,v=t.length;g<v;g++){var y=t[g],m=y.source,b=y.text,x=u.getColor(y.color),w=c.getOuterRadius(y.radius),_=s.getScaleValue(y.angle);!p[y.angle]&&(p[y.angle]=0);var k=_[p[y.angle]++],S=k.startAngle,M=k.endAngle,E=$b({values:{angle:(S+M)/2,radius:w,color:x,text:b,startAngle:S,endAngle:M,rotation:ow,"alignment-baseline":aw},data:y},g,t,n),C={enter:{},update:{angle:E.angle,radius:E.radius},text:l?l(b,g,t,n):E.text,color:E.color,rotation:E.rotation,background:{value:d instanceof Function?d(y,g,t,n):null,padding:h},"alignment-baseline":E["alignment-baseline"],meta:rw(rw({},{layerId:n.id()}),Qb({fill:E.color})),style:{},source:m,rowId:y.rowId,data:y.dataObj};C.className=Nb(y,g,t,n),r.push(C),n.cachePoint(y.rowId,C)}return r=(r=tx(Wb(n,r),n.measurement())).filter((function(t){var e=t.update;return!isNaN(e.x)&&!isNaN(e.y)}))},cartesian:function(t,e,n){for(var r=[],i=n.axes(),a=i.color,o=n.config().encoding,c=o.text,u=c.field,s=c.value,l=c.formatter,f=o.text.background,h=f.padding,d=f.value,p=u?n.data().getFieldIndex(u):-1,g=pg.X,v=pg.Y,y=function(e,o){var c=t[e],f=c.source,y=u?f[p]:s,m=[g,v].map((function(t){return i[t]?i[t].getScaleValue(c[t])+i[t].getUnitWidth()/2:0})),b=Ig()(m,2),x=b[0],w=b[1],_=a.getColor(c.color,a),k=$b({values:{x:x,y:w,text:y,color:_,rotation:ow,"alignment-baseline":aw},data:c},e,t,n),S={enter:{},update:{x:k.x,y:k.y},text:l(k.text,e,t,n),color:k.color,background:{value:d instanceof Function?d(c,e,t,n):null,padding:h},"alignment-baseline":k["alignment-baseline"],rotation:k.rotation,meta:rw(rw({},{layerId:n.id()}),Qb({fill:k.color})),style:{},source:c.source,rowId:c.rowId,data:c.dataObj};S.className=Nb(c,e,t,n),r.push(S),n.cachePoint(c.rowId,S)},m=0,b=t.length;m<b;m++)y(m);return r=(r=Wb(n,r)).filter((function(t){var e=t.update;return!isNaN(e.x)&&!isNaN(e.y)}))}},uw=function(t){return function(t){Qp()(n,t);var e=ew(n);function n(){return Yp()(this,n),e.apply(this,arguments)}return Kp()(n,[{key:"elemType",value:function(){return"text"}},{key:"getPointTranslator",value:function(t){return cw[t]}},{key:"translatePoints",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return cw[this.coord()](t,e,this)}},{key:"render",value:function(t){var e=this,n=this.config(),r=this._normalizedData,i=n.className,a=_s(n.defClassName,this.id(),n.classPrefix);return Od(t).classed("".concat(a.join(" ")," ").concat(i),!0),this._graphicElems={},Ud({data:r,append:"g",selector:"g",container:t,each:function(t,n){var r=n.node(),i=e.translatePoints(t,{},e);Vd(r,{"text-anchor":dg}),Jx(r,i,{className:a[0]},e)}}),this}},{key:"getNearestPoint",value:function(t,e,n){var r=n.event;return this.data()?this.getDataFromEvent(r):null}},{key:"getDataFromEvent",value:function(t){return rx(this,t)}}],[{key:"defaultConfig",value:function(){return tw}},{key:"formalName",value:function(){return"text"}}]),n}(t)};function sw(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=eg()(t);if(e){var i=eg()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Jp()(this,n)}}var lw=function(t){Qp()(n,t);var e=sw(n);function n(){return Yp()(this,n),e.apply(this,arguments)}return Kp()(n,null,[{key:"formalName",value:function(){return"text"}}]),n}(Ol(xx).with(mx,uw)),fw=function(t){var e=t.layer,n=t.container,r=t.points,i=t.transition,a=t.className,o=i.duration,c=i.effect,u=i.disabled,s=Od(n),l=e._graphicElems;return s.attr("class",a),Fd(s,"g",r,null,{enter:function(t,e){var n=e.enter;t.attr("transform","translate(".concat(n.x,",").concat(n.y,")"))},update:function(t,n){!function t(e,n){var r,i=e.shape,a=e.size,o=e.update,c=e.style;if(i instanceof Promise)i.then((function(r){e.shape=r,t(e,n)}));else if(i instanceof Element){var u=i.cloneNode(!0);if("img"===u.nodeName.toLowerCase()){var s=u.src||u.href;(u=document.createElementNS("http://www.w3.org/2000/svg","image")).setAttribute("href",s)}var l=Od(u);"path"===u.nodeName||"image"===u.nodeName?l.attr("transform","scale(".concat(a/100,")")):(l.attr("height",a),l.attr("width",a)),l.attr("x",-a/2),l.attr("y",-a/2),Fd(n,(function(){return u}),[1])}else if("string"==typeof i){var f;f=/^[mzlhvcsqta]\s*[-+.0-9][^mlhvzcsqta]+/i.test(r=i)&&/[\dz]$/i.test(r)&&r.length>4?i:fl(i).size(a)(o);var h=Fd(n,"path",(function(t){return[t]})).attr("d",f);Vd(h,c)}else e.shape="circle",t(e,n)}(n,t),l[n.rowId]=t;var r=n.update,o=n.style;Ms(o,(function(e){return t.style(e,o[e])})),t.attr("class",a),t.classed(n.className,!0),u||(t=t.transition().duration(i.duration).on("end",e.registerAnimationDoneHook())),t.attr("transform","translate(".concat(r.x,",").concat(r.y,")")).style("visibility","visible")},exit:function(t){u?t.style("visibility","hidden"):t.transition().ease(ls[c]).duration(o).on("end",(function(){return t.style("visibility","hidden")})).style("fill-opacity",0).style("stroke-opacity",0)}},t.keyFn)},hw={defClassName:"layer-point",className:"",classPrefix:ng,defColorStyle:"stroke",interaction:{highlight:{className:"highlight-class",style:{stroke:"black","stroke-width":"1px"},strokePosition:"center"},focusStroke:{className:"focus-stroke-class",style:{stroke:"black","stroke-width":"1px"},strokePosition:"outside"},commonDoubleStroke:{style:{stroke:"black","stroke-width":"2px"},strokePosition:"outside"},brushStroke:{className:"brush-stroke-class",style:{stroke:"black","stroke-width":"1px"},strokePosition:"outside"},doubleStroke:{style:{stroke:"black","stroke-width":"2px"},strokePosition:"outside"},fade:{style:{fill:function(){return{diff:{a:-.8}}}}},focus:{style:{fill:function(){return{diff:{a:-.5}}}}},brushFocus:{style:{fill:function(){return{diff:{a:-.5}}}}},selectionHighlightFocus:{style:{fill:function(){return{diff:{a:-.5}}}}}},innerPadding:.1,nearestPointThreshold:5,transform:{type:"identity"},transition:{effect:"cubic",duration:1e3,disabled:!0},encoding:{size:{value:30},color:{},stroke:{value:"#000"},"stroke-width":{value:0},fill:{},shape:{value:"circle"},x:{},y:{},"stroke-opacity":{value:1},"fill-opacity":{value:.5},strokePosition:{value:"center"},interaction:{anchors:"highlight","persistent-anchors":"focusStroke","brush-anchors":"brushStroke"}},shapes:["circle","cross","diamond","square","star","wye","triangle"],sizes:[20,30,40,50,60,70]},dw=(n(89),function(t){var e=t.data,n=t.datum,r=t.i,i=t.layerInst,a=t.xPx,o=t.yPx,c=i.axes(),u=c.shape,s=c.color,l=c.size,f=u.getShape(n.shape),h=l.getSize(n.size),d=s.getColor(n.color),p=i.config().encoding,g=p.stroke.value,v=p["stroke-width"].value,y=$b({values:{x:a,y:o,color:d,stroke:g,"stroke-width":v,size:h,shape:f,data:n},data:n},r,e,i),m=n.rowId,b=n.source;f=y.shape,h=y.size;var x={fill:d=y.color,stroke:y.stroke,"stroke-width":y["stroke-width"]},w={x:y.x,y:y.y};return{enter:w,update:w,shape:f,source:b,rowId:m,style:x,data:n.dataObj,meta:Object.assign({layerId:i.id()},Qb(x,{strokePosition:p.strokePosition.value})),size:h}}),pw=Rg()({},ut.CARTESIAN,(function(t,e,n){for(var r=[],i=n.config().encoding,a=n.axes(),o=n.measurement(),c=e.offset,u=c.x,s=c.y,l=function(e,c){var l=t[e],f=[pg.X,pg.Y].map((function(t){var e=null===l[t]?void 0:l[t],n=t===pg.X?o.width:o.height;return i[t].field?a[t].getScaleValue(e):n/2})),h=Ig()(f,2),d=h[0],p=h[1];if(d+=u,p+=s,!isNaN(d)&&!isNaN(p)){var g=dw({data:t,datum:l,i:e,layerInst:n,xPx:d,yPx:p});g.className=Nb(l,e,t,n),r.push(g),n.cachePoint(l.rowId,g)}},f=0,h=t.length;f<h;f++)l(f);return r=Wb(n,r)})),gw="center",vw="inside",yw="outside",mw=function(t,e){return t===gw?-e:t===vw?-e*Math.PI:+e*Math.PI};function bw(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=eg()(t);if(e){var i=eg()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Jp()(this,n)}}var xw={},ww=function(t){return function(t){Qp()(n,t);var e=bw(n);function n(){var t;Yp()(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(t=e.call.apply(e,[this].concat(i)))._voronoi=new Es,t._bandScale=bl.band(),t._overlayPath={},t.formattedUids=[],t}return Kp()(n,[{key:"elemType",value:function(){return"g"}},{key:"translatePoints",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return pw[this.coord()](t,e,this)}},{key:"render",value:function(t){var e,n=this,r=0,i=this.config(),a=this._transformedData.getUniqueValues(),o=i.transition,c=i.className,u=i.defClassName,s=i.classPrefix,l=this._normalizedData,f=Od(t),h=_s(u,this.id(),s);this._points=[],this._pointMap={},this._overlayPath={},f.classed(h.join(" "),!0).classed(c,!0),this._points=this.generateDataPoints(l,a),this._graphicElems={};var d=this.data().getSchema();return Fd(t,"g",this._points,null,{update:function(t,a){r=Math.max.apply(Math,[r].concat(Gp()(a.map((function(t){return t.size||0}))))),e="".concat(h[0]),n.constructor.drawFn()({layer:n,container:t.node(),points:a,interpolate:i.interpolate,className:e,transition:o,keyFn:function(t){return Kb(t.source,d)}})}},(function(t){return t[0].rowId})),this._maxSize=2*Math.sqrt(r/Math.PI),this.attachDataToVoronoi(this._points),this}},{key:"attachDataToVoronoi",value:function(t){Bb(this._voronoi,t)}},{key:"generateDataPoints",value:function(t,e){var n=this,r=Ub(this,e),i=Ig()(r,2),a=i[0],o=i[1],c=a.offsetValues||[],u=o.offsetValues||[];return t.map((function(t,e){var r=n.getMeasurementConfig(c[e],u[e],a.span,o.span);return n.translatePoints(t,r)})).filter((function(t){return t.length}))}},{key:"getMeasurementConfig",value:function(t,e,n,r){return{offset:{x:(t||0)+n/2,y:(e||0)+r/2},span:{x:n,y:r}}}},{key:"getShapeRadius",value:function(t){return t?Math.sqrt(t.data.data.size/Math.PI):0}},{key:"getNearestPoint",value:function(t,e){var n=this.config().nearestPointThreshold,r=Math.max(this._maxSize,n);if(!this.data())return null;var i=this._voronoi.find(t,e,r),a=i&&i.data.data.update,o=this.getShapeRadius(i);if(i&&Bl({x:a.x,y:a.y,r:o+n},{x:t,y:e})){var c=i.data.data,u=c.source,s=c.rowId;return{id:this.getIdentifiersFromData(u,s),dimensions:[{x:a.x,y:a.y,width:o,height:o}],layerId:this.id()}}return null}},{key:"addOverlayPathAndStyles",value:function(t,e,n,r,i){if(n.strokeProps[n.type]){var a,o=t.parentElement;if(this._overlayPath[e.rowId])a=this._overlayPath[e.rowId];else{if(!i.apply)return;(a=Kd("path",o)).attr("class","muze-layer-path-highlight"),this._overlayPath[e.rowId]=a}if(i.apply&&"stroke-width"===n.type){var c=r,u=Math.sqrt(e.size/Math.PI);u=mw(c,u);var s=e.size+u;if("string"==typeof e.shape){var l="".concat(e.shape,"-").concat(Math.round(s)),f=xw[l];f||(f=xw[l]=fl(e.shape).size(s)),a.attr("d",f)}}var h=n.value;if("function"==typeof h)h=h(a.style(n.type));a.style(n.type,h),e.isPathPresent||(jd(t,a.node()),e.isPathPresent=!0)}}},{key:"getBoundBoxes",value:function(){return nx(this._points.flat())}},{key:"applyElementStyles",value:function(t,e,n){var r=t.select("path");e.forEach((function(t){r.style(t,n[t])}))}},{key:"getOverlayPathMount",value:function(){return null}}],[{key:"defaultConfig",value:function(){return hw}},{key:"defaultPolicy",value:function(t,e){var r=ov()(eg()(n),"defaultPolicy",this).call(this,t,e),i=r.encoding,a=r.transform,o=i.color&&i.color.field;return o&&(a.groupBy=o),r}},{key:"drawFn",value:function(){return fw}}]),n}(t)};function _w(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=eg()(t);if(e){var i=eg()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Jp()(this,n)}}var kw=function(t){Qp()(n,t);var e=_w(n);function n(){return Yp()(this,n),e.apply(this,arguments)}return Kp()(n,null,[{key:"formalName",value:function(){return _g}}]),n}(Ol(xx).with(ww)),Sw=function(t){var e=t.layer,n=t.points,r=t.container,i=t.keyFn,a=t.className,o=e._graphicElems,c={enter:function(t,e){!function(t,e){var n=t,r=e.enter||{};Object.entries(r).forEach((function(t){return!isNaN(t[1])&&n.attr(t[0],t[1])}))}(t,e)},update:function(n,r,i){o[r.rowId]=n,function(t,e,n,r,i){var a=i.transition,o=a.duration,c=a.disabled,u=a.effect,s=e,l=c?s:s.transition().duration(o).ease(ls[u]).on("end",t.registerAnimationDoneHook()),f=n.update||n,h=n.style||{};n.className&&s.classed(n.className,!0),Object.entries(f).forEach((function(t){return!isNaN(t[1])&&l.attr(t[0],t[1])})),Object.entries(h).forEach((function(t){return s.style(t[0],t[1])}))}(e,n,r,0,t)}};return Fd(r,"g",n,null,{update:function(t,e){Fd(t.node(),"rect",(function(t){return[t]}),null,c,i),t.attr("class","".concat(a,"-").concat(e.rowId)),t.classed(e.className,!0)}},i)},Mw={classPrefix:ng,defClassName:"layer-bar",className:"",interaction:{highlight:{style:{stroke:"black","stroke-width":"1px"},strokePosition:"center"},focusStroke:{className:"focus-stroke-class",style:{stroke:"black","stroke-width":"1px"},strokePosition:"outside"},brushStroke:{className:"brush-stroke-class",style:{stroke:"black","stroke-width":"1px"},strokePosition:"outside"},doubleStroke:{style:{stroke:"black","stroke-width":"2px"},strokePosition:"outside"},commonDoubleStroke:{style:{stroke:"black","stroke-width":"2px"},strokePosition:"outside"},fade:{style:{fill:function(){return{diff:{a:-.3}}}}},focus:{style:{fill:function(){return{diff:{a:-.5}}}}},brushFocus:{style:{fill:function(){return{diff:{a:-.5}}}}},selectionHighlightFocus:{style:{fill:function(){return{diff:{a:-.5}}}}}},transform:{type:"stack"},transition:{effect:"cubic",duration:1e3},innerPadding:.1,encoding:{color:{},x:{},y:{},x0:{},y0:{},stroke:{value:"#000"},strokeWidth:{value:"0px"},strokePosition:{value:"center"}}},Ew=(n(46),{x:function(t,e,n){return e?[t,n]:[n,t]},y:function(t,e,n){return e?[n,t]:[t,n]}}),Cw=function(t,e,n,r){var i,a=gt.FieldSubtype,o=a.CONTINUOUS,c=a.CATEGORICAL,u=a.TEMPORAL,s="x"===t?"width":"height",l=[n["".concat(t,"FieldType")],e["".concat(t,"Axis")]],f=l[0],h=l[1],d=n.transformType,p=n.sizeEncoding,g=n.sizeConfig,v=n.measurement,y=p.value,m=0,b=0,x=0;if(void 0!==f)if(n["".concat(t,"0Field")]){var w,_,k=r[t],S=r["".concat(t,"0")];if(null===k||null===S)return{enterSpace:void 0,enter:void 0,pos:void 0,space:void 0};f===o||f===u?(w=Math.min(k,S),_=Math.max(k,S)):(w=k,_=S);var M="x"===t?[w,_]:[_,w];i=h.getScaleValue(M[0])+h.getUnitWidth()/2,b=Math.abs(h.getScaleValue(M[1])-i)+h.getUnitWidth()/2,m=i,x=0}else if(f===c||f===u){if(i=h.getScaleValue(r[t])+(g["x"===t?"barWidthOffset":"barHeightOffset"]||0),b=g["x"===t?"barWidth":"barHeight"],void 0!==y){var E=y*b;b-=E,i+=E/2}m=i,x=b}else{var C=h.domain()[0],A=C<0?h.getScaleValue(0):h.getScaleValue(C);i=h.getScaleValue(r[t]);var P=h.getScaleValue(r["".concat(t,"0")]);x=0;var D=r[t]<0;if(d!==rg){var I=Ew[t](i,D,A),T=Ig()(I,2);i=T[0],P=T[1]}b=Math.abs(i-P),m=A}else i=0,b=v[s];return{enterSpace:x,enter:m,pos:i,space:b}},Aw=function(t,e,n){var r={xAxis:n.x,yAxis:n.y},i=Cw("x",r,e,t),a=i.enterSpace,o=i.enter,c=i.pos,u=i.space,s=Cw("y",r,e,t),l=s.enterSpace;return{enter:{x:o,y:s.enter,width:a,height:l},update:{x:c,y:s.pos,width:u,height:s.space}}},Pw={center:function(){return{M:{x:0,y:0},L1:{x:0,y:0},L2:{x:0,y:0},L3:{x:0,y:0}}},inside:function(t){return{M:{x:+t,y:+t},L1:{x:-t,y:+t},L2:{x:-t,y:-t},L3:{x:+t,y:-t}}},outside:function(t){return{M:{x:-t,y:-t},L1:{x:+t,y:-t},L2:{x:+t,y:+t},L3:{x:-t,y:+t}}}};function Dw(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=eg()(t);if(e){var i=eg()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Jp()(this,n)}}var Iw=function(t){return function(t){Qp()(n,t);var e=Dw(n);function n(){var t;Yp()(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(t=e.call.apply(e,[this].concat(i)))._bandScale=bl.band(),t._plotPadding={x:0,y:0},t._plotSpan={x:0,y:0},t._pointMap={},t._overlayPath={},t._rtree=new Ao,t}return Kp()(n,[{key:"elemType",value:function(){return"rect"}},{key:"calculateDomainFromData",value:function(t,e){var r=ov()(eg()(n.prototype),"calculateDomainFromData",this).call(this,t,e),i=gt.FieldType.MEASURE;return["x","y"].forEach((function(t){e["".concat(t,"FieldType")]===i&&Cs(r[t],"length")&&(e["".concat(t,"0Field")]?r[t]=r[t].sort((function(t,e){return t-e})):(r[t][0]=Math.min(r[t][0],0),r[t][1]=Math.max(0,r[t][1])))})),r}},{key:"translatePoints",value:function(t,e){return function(t,e,n){for(var r=[],i=t.config().encoding,a=t.axes(),o=a.color,c=i.size||{},u=t.encodingFieldsInf(),s=u.x0Field,l=u.y0Field,f=u.xFieldSubType,h=u.yFieldSubType,d=t.measurement(),p=t.transformType(),g=0,v=e.length;g<v;g++){var y=e[g],m=Aw(y,{xFieldType:f,yFieldType:h,x0Field:s,y0Field:l,transformType:p,measurement:d,sizeConfig:n,sizeEncoding:c},a),b=o.getColor(y.color),x=m.update,w=$b({values:{x:x.x,y:x.y,width:x.width,height:x.height,color:b},data:y},g,e,t);b=w.color;var _=w.x,k=w.y,S=w.width,M=w.height,E={fill:b,stroke:i.stroke.value,"stroke-width":i.strokeWidth.value},C={strokePosition:i.strokePosition.value};if(!isNaN(_)&&!isNaN(k)){var A=null;(A={enter:m.enter,update:{x:_,y:k,width:S,height:M},source:y.source,rowId:y.rowId,data:y.dataObj,style:E,meta:Object.assign({layerId:t.id()},Qb(E,C))}).className=Nb(y,g,e,t),r.push(A),t.cachePoint(y.rowId,A)}}return r=Wb(t,r)}(this,t,e)}},{key:"render",value:function(t){var e=this,n=this.config(),r=n.transition,i=this._normalizedData,a=this._transformedData.getUniqueValues(),o=this.axes(),c=o.y&&o.y.scale().range()[0],u=o.x&&o.x.scale().range()[1],s=n.defClassName,l=_s(s,this.id(),n.classPrefix),f=n.className,h=Od(t);h.classed(l.join(" "),!0),h.classed(f,!0),Gd(t,{x:0,y:0,width:u,height:c},"id-".concat(this.id())),this._points=this.generateDataPoints(i,a),this._graphicElems={},Object.keys(this._overlayPath).forEach((function(t){return e._overlayPath[t].remove()})),this._overlayPath={};var d=Fd(h,"g",[1],"muze-layer-bars",{},null);Fd(h,"g",[1],"muze-overlay-paths",{},null),Ud({data:this._points,container:d.node(),selector:"g",append:"g",each:function(t,n,i){var o="".concat(l[0],"-").concat(a[i]||i).toLowerCase();n.style("display","block"),Sw({layer:e,container:n.node(),points:t,className:o,transition:r,style:{},keyFn:function(t){return t.rowId}})}});var p=this.getBoundBoxes().flat().filter((function(t){return null!==t}));return this._rtree=new Ao,this._rtree.load(p),this}},{key:"generateDataPoints",value:function(t,e){var n=this,r=Ub(this,e),i=Ig()(r,2),a=i[0],o=i[1],c=a.offsetValues||[],u=o.offsetValues||[];return this._plotSpan={x:a.groupSpan||0,y:o.groupSpan||0},this._plotPadding={x:a.padding||0,y:o.padding||0},this._pointMap={},t.map((function(t,e){return n.translatePoints(t,{barWidth:a.span,barWidthOffset:c[e]||0,barHeight:o.span,barHeightOffset:u[e]||0})}))}},{key:"getPlotPadding",value:function(){return this._plotPadding}},{key:"resolveTransformType",value:function(){this._transformType=Xb(this)}},{key:"getNearestPoint",value:function(t,e){if(!this.data())return null;var n=this._rtree.search({minX:Math.max(t-1,0),minY:Math.max(e-1,0),maxX:t+1,maxY:e+1});return n.length?this.getDataFromEvent(null,n[0].point):null}},{key:"getDataFromEvent",value:function(t,e){return rx(this,t,e)}},{key:"getPlotSpan",value:function(){return this._plotSpan}},{key:"hasPlotSpan",value:function(){return!0}},{key:"addOverlayPathAndStyles",value:function(t,e,n,r,i){if(n.strokeProps[n.type]){var a,o,c,u,s;if(this._overlayPath[e.rowId])a=this._overlayPath[e.rowId];else{if(!i.apply)return;var l=Fd(i.mountPoint,"g",[1],null,{},(function(t){return"".concat(t.x," ").concat(e.rowId)}));(a=Fd(l,"path",[e],null,{},(function(t){return"".concat(t.update.x," ").concat(e.rowId)}))).style("fill","none"),a.style("fill-opacity",0),a.attr("id",e.rowId),this._overlayPath[e.rowId]=a}if("stroke-width"===n.type){var f=(o={width:parseInt(n.value,10),position:r},c=o.width,u=o.position,s=c/2,Pw[u](s)),h=f.L1,d=f.L2,p=f.L3,g=f.M;a.attr("d",(function(t){return"M ".concat(t.update.x+g.x," ").concat(t.update.y+g.y,"\n            L ").concat(t.update.x+t.update.width+h.x," ").concat(t.update.y+h.y,"\n            L ").concat(t.update.x+t.update.width+d.x," ").concat(t.update.y+t.update.height+d.y,"\n            L").concat(t.update.x+p.x," ").concat(t.update.y+t.update.height+p.y," Z")}))}var v=n.value;if("function"==typeof v)v=v(a.style(n.type));a.style(n.type,v),e.isPathPresent||(jd(i.mountPoint,a.node()),e.isPathPresent=!0)}}},{key:"getBoundBoxes",value:function(){return this._points.flat().map((function(t){var e=t.update,n=e.x,r=e.y;return{minX:n,maxX:n+e.width,minY:r,maxY:r+e.height,data:t.data,point:t}}))}}],[{key:"defaultConfig",value:function(){return Mw}},{key:"defaultPolicy",value:function(t,e){var n=xx.defaultPolicy(t,e),r=n.encoding.color.field,i=n.transform;return r&&(i.groupBy=r),n}}]),n}(t)};function Tw(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=eg()(t);if(e){var i=eg()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Jp()(this,n)}}var Rw=function(t){Qp()(n,t);var e=Tw(n);function n(){return Yp()(this,n),e.apply(this,arguments)}return Kp()(n,null,[{key:"formalName",value:function(){return kg}}]),n}(Ol(xx).with(mx,Iw)),Nw={defClassName:"layer-tick",className:"",classPrefix:ng,nearestPointThreshold:10,interaction:{fade:{style:{stroke:function(){return{diff:{a:-.8}}}}},focus:{style:{stroke:function(){return{diff:{a:-.5}}}}},highlight:{className:"highlight-class",style:{stroke:"black","stroke-width":"1px"},strokePosition:"center"},focusStroke:{className:"focus-stroke-class",style:{stroke:"black","stroke-width":"1px"},strokePosition:"outside"},commonDoubleStroke:{style:{stroke:"black","stroke-width":"2px"},strokePosition:"outside"},brushStroke:{className:"brush-stroke-class",style:{stroke:"black","stroke-width":"1px"},strokePosition:"outside"},doubleStroke:{style:{stroke:"black","stroke-width":"2px"},strokePosition:"outside"},brushFocus:{style:{fill:function(){return{diff:{a:-.5}}}}},selectionHighlightFocus:{style:{fill:function(){return{diff:{a:-.5}}}}}},innerPadding:.1,transform:{type:"identity"},transition:{effect:"cubic",duration:1e3},interpolate:"linear",encoding:{color:{},x:{},y:{},x0:{},y0:{},radius:{},radius0:{},angle:{},angle0:{},strokeOpacity:{value:.5},fillOpacity:{value:.5}},states:{highlight:{className:"".concat(ng,"-layer-tick-highlight")},fadeout:{className:"".concat(ng,"-layer-tick-fadeout")},selected:{className:"".concat(ng,"-layer-tick-selected")}}},Ow=ml.line,Fw=function(t){var e=t.points,n=t.container,r=t.keyFn,i=t.className,a=t.interpolate,o=t.layer,c=t.transition,u=c.disabled,s=Od(n),l=o._graphicElems;return s.attr("class",i),Fd(s,"g",e,null,{enter:function(t,e){var n=e.enter||{};Object.entries(n).forEach((function(e){return!isNaN(e[1])&&t.attr(e[0],e[1])}))},update:function(t,e){var n=Fd(t,"path",[1]);l[e.rowId]=t;var r=e.update,s=e.style;t.attr("class",i),t.classed(e.className,!0);var f=void 0!==r.x0?r.x0:r.x,h=void 0!==r.y0?r.y0:r.y,d=yl[a],p=Ow().curve(d).x((function(t){return t[0]})).y((function(t){return t[1]}));e.className&&t.classed(e.className,!0),n.attr("d",p([[r.x,r.y],[f,h]])),u||(t=t.transition().duration(c.duration).on("end",o.registerAnimationDoneHook())),Object.entries(s).forEach((function(e){return t.style(e[0],e[1])}))},exit:function(t){t.remove()}},r)},Lw=(n(90),{center:function(){return{M:{x:0,y:0},L:{x:0,y:0}}},inside:function(t){return{M:{x:+t,y:+t},L:{x:-t,y:+t}}},outside:function(t){return{M:{x:-t,y:-t},L:{x:+t,y:-t}}}});function jw(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=eg()(t);if(e){var i=eg()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Jp()(this,n)}}function Bw(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function zw(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Bw(Object(n),!0).forEach((function(e){Rg()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Bw(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Hw={polar:function(t){for(var e=arguments.length>2?arguments[2]:void 0,n=e.axes(),r=[],i=n.radius,a=n.angle,o=n.angle0,c=e.measurement(),u=n.color,s={},l={},f=0,h=t.length;f<h;f++){var d=t[f],p=u.getColor(d.color),g=a.getScaleValue(d.angle);!s[d.angle]&&(s[d.angle]=0);var v=g[s[d.angle]++],y=v.startAngle,m=v.endAngle,b=o.getScaleValue(d.angle0);!l[d.angle0]&&(l[d.angle0]=0);var x=b[l[d.angle0]++],w=x.startAngle,_=x.endAngle,k=i.getOuterRadius(d.radius),S=(y+m)/2,M=(w+_)/2,E=$b({values:{radius:k,radius0:i.getInnerRadius(d.radius0),color:p,angle:S,angle0:M,startAngle:y,endAngle:m,startAngle0:w,endAngle0:_},data:d},f,t,e),C={stroke:E.color},A={enter:{},update:{radius:E.radius,radius0:E.radius0,angle:E.angle,angle0:E.angle0},style:C,source:d.source,rowId:d.rowId,data:d.dataObj,meta:zw(zw({},{layerId:e.id()}),Qb(C))};e.cachePoint(d.rowId,A),A.className=Nb(d,f,t,e),r.push(A)}return r=tx(Wb(e,r),c,!0)},cartesian:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=n.axes(),i=[],a=r.x,o=r.y,c=n.encodingFieldsInf(),u=c.xField,s=c.yField,l=c.x0Field,f=c.y0Field,h=n.measurement(),d=r.color,p=e.offset,g=p.x,v=p.y,y=e.span,m=y.x,b=y.y,x=0,w=t.length;x<w;x++){var _=void 0,k=void 0,S=void 0,M=void 0,E=t[x],C=E.source;u&&(k=(_=a.getScaleValue(E.x)+g)+m),s&&(S=null!==(M=o.getScaleValue(E.y)+v)?M+b:null),u||(_=0,k=h.width,isNaN(M)||(S=M+=b/2)),s||(M=0,S=h.height,k=_+=m/2),l&&(k=a.getScaleValue(E.x0)+m,M+=b/2,S-=b/2),f&&(S=o.getScaleValue(E.y0)+b,_+=m/2,k-=m/2);var A=d.getColor(E.color),P=$b({values:{x:_,y:M,x0:k,y0:S,color:A},data:E},x,t,n),D={stroke:P.color};if(!isNaN(_)&&!isNaN(M)){var I={enter:{},update:{x:P.x,y:P.y,x0:P.x0,y0:P.y0},style:D,source:C,rowId:E.rowId,data:E.dataObj,meta:zw(zw({},{layerId:n.id()}),Qb(D))};I.className=Nb(E,x,t,n),i.push(I),n.cachePoint(E.rowId,I)}}return i=Wb(n,i)}},Ww=function(t){return function(t){Qp()(n,t);var e=jw(n);function n(){return Yp()(this,n),e.apply(this,arguments)}return Kp()(n,[{key:"elemType",value:function(){return"path"}},{key:"translatePoints",value:function(t,e){return Hw[this.coord()](t,e,this)}},{key:"attachDataToVoronoi",value:function(t){Bb(this._voronoi,t,(function(t){var e=t.update,n=e.x,r=e.x0,i=e.y;return{x:n+(r-n)/2,y:i+(e.y0-i)/2}}))}},{key:"getMeasurementConfig",value:function(t,e,n,r){return{offset:{x:t||0,y:e||0},span:{x:n,y:r}}}},{key:"addOverlayPathAndStyles",value:function(t,e,n,r){var i;this._overlayPath[e.rowId]?i=this._overlayPath[e.rowId]:((i=Fd(t,"path",[e.update],null,{},(function(t){return"".concat(t.x," ").concat(e.rowId)}))).style("fill","none"),i.style("fill-opacity",0),i.attr("id",e.rowId),this._overlayPath[e.rowId]=i);var a,o,c,u,s={x:0,y:0},l={x:0,y:0};if("stroke-width"===n.type){var f=(a={width:parseInt(n.value,10),position:r},o=a.width,c=a.position,u=o?o/2:1,Lw[void 0===c?"center":c](u)),h=f.L,d=f.M;s=d,l=h}i.attr("d",(function(t){return t.update?"M ".concat(t.update.x+s.x," ").concat(t.update.y+s.y,"\n                    L ").concat(t.update.x0+l.x," ").concat(t.update.y0+l.y):"M ".concat(t.x+s.x," ").concat(t.y+s.y,"\n                L ").concat(t.x0+l.x," ").concat(t.y0+l.y)}));var p=n.value;"function"==typeof p&&(p=p(i.style(n.type)));i.style(n.type,p),e.isPathPresent||(jd(t,i.node()),e.isPathPresent=!0)}},{key:"getShapeRadius",value:function(t){if(t){var e=t.data.data.update,n=Math.abs(e.x-e.x0),r=Math.abs(e.y-e.y0);return Math.max(n,r)/2}return 0}}],[{key:"defaultConfig",value:function(){return Nw}},{key:"formalName",value:function(){return"tick"}},{key:"drawFn",value:function(){return Fw}}]),n}(t)};function Vw(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=eg()(t);if(e){var i=eg()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Jp()(this,n)}}var Uw,Gw,qw,Yw=function(t){Qp()(n,t);var e=Vw(n);function n(){return Yp()(this,n),e.apply(this,arguments)}return Kp()(n,null,[{key:"formalName",value:function(){return"tick"}}]),n}(Ol(xx).with(mx,ww,Ww)),Xw="area",Kw="arc",$w="line",Qw="text",Zw="point",Jw="bar",t_="tick",e_="simple",n_="base",r_=function(t){for(var e in t)"string"==typeof t[e]&&(t[e]={field:t[e]})},i_=(Uw={},Gw={setLayerRegistry:function(t){Gw._layerRegistry=t},getSerializedConf:function(t,e){var n,r=Uw[t],i=Fs({},e);if(r)n=r.map((function(e){var n={};return function t(e,n,r,i){for(var a in n)if(Object.hasOwnProperty.call(n,a)){var o=void 0,c=void 0,u=n[a];Ju(u)?(e[a]={},t(e[a],u,r,i)):"string"==typeof u&&(o=u.split("."))&&o[0]===i?void 0!==(c=Cs.apply(void 0,[r].concat(Gp()(o.slice(1,o.length)))))&&(e[a]=c):e[a]=u}}(n,e,i,t),r_(n.encoding),n}));else{var a=i.encoding;r_(a),n=i}return n},getLayerInstance:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];var i=Gw._layerRegistry,a=(t=t instanceof Array?t:[t]).map((function(t){var e=i[t.mark];return e.create.apply(e,n)}));return 1===a.length?a[0]:a},getLayerClass:function(t){return Gw._layerRegistry[t]},composeLayers:function(t,e){Uw[t]=e},sanitizeLayerConfig:function(t){var e=Fs({},t);return r_(e.encoding),e}}),a_=(qw={},Rg()(qw,Xw,zx),Rg()(qw,Kw,$x),Rg()(qw,$w,Zx),Rg()(qw,Qw,lw),Rg()(qw,Zw,kw),Rg()(qw,t_,Yw),Rg()(qw,Jw,Rw),Rg()(qw,n_,xx),qw),o_=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a_,e=Object.assign({},t),n={register:function(t){var r=t.formalName();return e[r]=t,n},get:function(){return e}};return n},c_=Object.assign(h,{pointLayerHelpers:d}),u_={BarLayerMixin:Iw,BaseLayerMixin:mx,LineLayerMixin:Rx,AreaLayerMixin:jx,PointLayerMixin:ww,TextLayerMixin:uw,TickLayerMixin:Ww,ArcLayerMixin:Xx},s_=function(t,e){var n={};for(var r in t.forEach((function(t){var r=t.encodingFieldsInf(),i=r.colorField,a=r.sizeField,o=r.shapeField,c=[r.xField,r.yField].filter((function(t){return e.isMeasure(t)}));[i,a,o].forEach((function(t){var r;e.isDimension(t)&&c.length&&(!n[t]&&(n[t]=[]),(r=n[t]).push.apply(r,Gp()(c)))}))})),n)({}).hasOwnProperty.call(n,r)&&(n[r]=Gp()(new Set(n[r])));return n},l_=function(t,e){var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){var i=t[r];n[r]=i(e)}return n},f_=function(t,e,n,r){var i=n,a=t._dependencies,o=t.metaInf(),c=t.facetFieldsMap();n||(i=i_.getLayerInstance(e),sl(i).forEach((function(e,n){e.metaInf({unitRowIndex:o.rowIndex,unitColIndex:o.colIndex,namespace:r[n],parentNamespace:o.namespace}).dependencies(a).store(t.store())})));var u={},s=sl(i);return(e=sl(e)).reduce((function(e,n,r){var i=s[r];return i.coord(t.coord()),Cs(n.encoding.color,"field")in c&&(n.transform.type=ks(n.transform.type,"identity")),i.config(n),i.valueParser(t.valueParser()),i.dataProps({timeDiffs:t._timeDiffs}),n.name&&i.alias(n.name),u[i.alias()]=i,e}),{}),u},h_=function(t,e){var n=t.config().encodingTransform||{},r=n.resolvable,i=[];if(r){var a=r(e);i=a.depArr,t.encodingTransform(a.fn)}else n instanceof Function&&t.encodingTransform(n);return i},d_=function(t){var e=[];return t.forEach((function(t,n){var r=t.def,i=t.mark;if(r)r.name||(r.name="".concat(i,"-").concat(n)),e.push(t);else{var a=i_.getSerializedConf(t.mark,t);a.name||(a.name="".concat(i,"-").concat(n)),e.push({mark:t.mark,def:a})}})),e},p_=function(t,e,n){t.forEach((function(t){var r=t.config().source,i=r instanceof Function?r(e):n[r]||e;t.data(i)}))},g_=function(t,e,n){e.forEach((function(e){var r=e.id(),i={};Ms(t,(function(e){var a=n[r];if(a){var o=t[e]||[],c=a[e]>=0?a[e]:o.length-1;t[e]&&(i[e]=ks(t[e][c]))}})),Object.keys(i).length&&e.axes(i)}))},v_=pg.X,y_=pg.Y,m_=pg.RADIUS,b_=pg.ANGLE,x_=pg.ANGLE0,w_=pg.RADIUS0,__=function(t,e){var n={};return t.forEach((function(t){var r=t.config(),i=r.axis,a=r.encoding,o=t.id();[v_,y_,b_,x_,m_].forEach((function(t){var r,c=Cs(a,t,"field"),u=t===m_?ks(c,Cs(a,w_,"field")):Cs(a,t,"field"),s=ks(Cs(i,t),u);r=e[t]&&e[t].length?e[t].findIndex((function(t){return-1!==t.getMembers().indexOf(s)})):0,!n[o]&&(n[o]={}),n[o][t]=r}))})),n},k_=function(t,e,n,r){var i={};return(t=t.filter((function(t){return null!==t.getDataDomain()}))).forEach((function(t){var a={},o=t.config(),c=t.getDataDomain(),u=t.id();null!==c&&!1!==o.calculateDomain&&(a=Object.entries(c),i=a.reduce((function(t,i){var a=i[0],o=n[u][a],c=Cs(e,a,o);!t[a]&&(t[a]={});var s=t[a];if(c){var l="".concat(c);s[l]=s[l]||[],s[l]=function(t,e,n,r){return n===b_||n===x_?t.concat(e.filter((function(e){return-1===t.indexOf(e)}))):us([t,e],r)}(s[l],i[1],a,r.getSubtype(c.getMembers()[0]))}return t}),i))})),i},S_=function(t,e,n,r){t._lifeCycleManager.notify({client:n,action:"beforedraw",formalName:"layer"});var i=t.config().classPrefix,a=n.sort((function(t,e){return t.config().order-e.config().order})),o=Fd(e,"g",[1],"".concat(i,"-layer-group")),c=Ss(t._layerDepOrder),u={};Fd(o,"g",a,null,{update:function(t,e){u[e.alias()]={group:t,layer:e}}}),c.map((function(t){return u[t]})).filter((function(t){return void 0!==t})).forEach((function(e){var n=e.layer,i=e.group;n.measurement(r),n.dataProps({timeDiffs:t._timeDiffs}),!1!==n.config().render&&n.mount(i.node())}))},M_=function(t,e){var n=gt.FieldSubtype,r=n.CONTINUOUS,i=n.CATEGORICAL,a=n.TEMPORAL,o=t.fields();if(!o.x.length||!o.y.length)return null;var c=t.data(),u=t.axes(),s=Cs(o,"x",0).getMembers()[0],l=Cs(o,"y",0).getMembers()[0],f=c.getSubtype(s),h=c.getSubtype(l),d=[["x",f,s],["y",h,l]].find((function(t){return t[1]===i||t[1]===a}));if(!d||f!==r&&h!==r)return null;var p=d[2],g=u[d[0]][0].invert(e[d[0]]);if(d[1]===a){var v=Gp()(new Set(c.getFieldData(p)));g=gs(v,g)}return void 0!==g?[[p],[g]]:null},E_=function(t,e,n){return t.filter((function(t){return("type"===e?t.constructor.formalName():t.alias())===n}))},C_=function(t,e,n){t.filter((function(t){return("type"===e?t.config().mark:t.alias())!==n||(t.remove(),!1)}))},A_=function(t,e){return Fd(t,"g",[1],e).node()},P_=function t(e){e._renderedPromise.then((function(){e._renderedPromise=new Promise((function(t){e._renderedResolve=t})),t(e)}))},D_=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.innerRadius,i=n.outerRadius;return[r||0,i||Math.min(e,t)/2]},I_=function(t){var e=t.axes().radius;e&&e.forEach((function(e){e.range(D_(t.width(),t.height()))}))},T_=function(t){var e,n=(e=[]).concat.apply(e,Gp()(t.layers().filter((function(t){return!1!==t.config().interactive})).map((function(t){return t.getBoundBoxes()})))).flat().filter((function(t){return null!==t})),r=new Ao;return r.load(n),r},R_=function(t){var e=t.config().classPrefix,n=t._graphics;if(t.layers().find((function(t){return t.config().mark===bg})))n.tracker&&n.tracker.remove(),n.tracker=null;else{var r="".concat(e,"-tracker");n.trackerGroup=Fd(n.rootSvg,"g",[1],"".concat(r,"-group")),n.tracker=Fd(n.trackerGroup,"rect",[1],r),zd(n.tracker,{x:0,y:0,width:t.width(),height:t.height(),class:r})}},N_="config",O_="data",F_="axes",L_="layerDef",j_="width",B_="height",z_="mount",H_="transform",W_="transformedData",V_="dataDomain",U_="fields",G_="layerAxisIndex",q_="layers",Y_="domain",X_="muze",K_="__id__",$_="grid-lines",Q_="grid-bands",Z_="grid-parent-group",J_="band",tk="tick",ek="gridBands",nk="gridLines",rk="consolidated",ik="fragmented",ak="facetByFields",ok="retinalFields",ck="parentAlias",uk="layers",sk="cachedData",lk="store",fk="drag",hk="hover",dk="selectiondrag",pk="click",gk="longtouch",vk="touchdrag",yk="*";function mk(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return bk(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return bk(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,c=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return o=t.done,t},e:function(t){c=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(c)throw a}}}}function bk(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var xk=function(t,e){var n={};for(var r in e)({}).hasOwnProperty.call(r,e)||(n[r]=e[r](t));return n},wk=function(t,e){var n;n=e[0]instanceof Set||e[0]instanceof Array?e:[e],t=sl(t);var r=n.map((function(t){return t instanceof Set?t:new Set(t)})),i=new Set;return t.forEach((function(t){var e,n=mk(t);try{var a=function(){var t=e.value;r.every((function(e){return!e.has(t)}))&&i.add(t)};for(n.s();!(e=n.n()).done;)a()}catch(t){n.e(t)}finally{n.f()}})),i},_k=function(t,e){if(t){var n=e.data(),r=[],i=t.range,a=t.dimensions,o=t.uids;if(o)r=o;else if(i){var c=n.select(n.getFilterRangeQuery(i));r=c.getUids(),c.dispose()}else a&&(r=function(t,e,n){for(var r=t[0],i=r.reduce((function(t,e,n){return t[e]=n,t}),{}),a=[],o=r.filter((function(t){return n.isDimension(t)})),c=r.find((function(t){return t===ot.ROW_ID})),u=e(o),s=function(e,n){var r=t[e];if(c)a.push(r[i[c]]);else{var s=o.map((function(t){return r[i[t]]})),l=u[s];l&&l.forEach((function(t){a.push(t)}))}},l=1,f=t.length;l<f;l++)s(l);return a}(a,e._dimsMapGetter,n));return r}return null},kk=function(){function t(e,n,r,i){Yp()(this,t),this.context=e,this._sideEffectDefinitions={},this._sideEffects={},this._actions={behavioural:{},physical:{}},this._propagationBehaviourMap={},this._actionBehaviourMap={},this._propagationInf={},this._config={},this._behaviourEffectMap={},this._queuedSideEffects={},this._handlers={},this._payloadGenerators={},this.mapSideEffects(i),this.registerBehaviouralActions(n.behavioural),this.registerSideEffects(r),this.registerPhysicalBehaviouralMap(n.physicalBehaviouralMap),this.registerPhysicalActions(n.physical);var a={};for(var o in this._actions.behavioural)a[o]=[o];this.registerPropagationBehaviourMap(a)}return Kp()(t,[{key:"config",value:function(){return arguments.length?(this._config=Fs(this._config,arguments.length<=0?void 0:arguments[0]),this):this._config}},{key:"mapSideEffects",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this._behaviourEffectMap;for(var r in t){var i=t[r]||[];i=i.map((function(t){return Ju(t)?Fs({},t):{name:t}})),!n[r]&&(n[r]=[]),n[r]=Gp()(new Set(e?[].concat(Gp()(n[r]),Gp()(i)):i))}return this}},{key:"registerBehaviouralActions",value:function(t){var e=function(t,e){var n={};return(e=e instanceof Array?e:Object.values(e)).forEach((function(e){var r=e.formalName();n[r]=new e(t),t.registerPropagationBehaviourMap(Rg()({},r,[r]))})),n}(this,t);return Object.assign(this._actions.behavioural,e),this}},{key:"registerSideEffects",value:function(t){for(var e in t)this._sideEffectDefinitions[t[e].formalName()]=t[e];return this.initializeSideEffects(),this}},{key:"applySideEffects",value:function(t,e,n,r){var i=this;return t.forEach((function(t){var a=t.name,o=Object.assign({},t.options||{},{behaviour:r});i.dispatchSideEffect(a,e,n,o)})),this}},{key:"dispatchSideEffect",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=this.sideEffects(),a=i[t],o=r.setTransform;e=o?o(e,n,a):e,a.apply(e,n,r)}},{key:"disposeSelectionSets",value:function(){var t=this._actions.behavioural;for(var e in t)t[e].dispose()}},{key:"registerPropagationBehaviourMap",value:function(t){var e=this._propagationBehaviourMap;for(var n in t)if(n in e){var r=t[n]instanceof Array?t[n]:[t[n]];e[n]=Gp()(new Set([].concat(Gp()(e[n]),Gp()(r))))}else e[n]=t[n];return this}},{key:"dispatchBehaviour",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=void 0===n.propagate||n.propagate,i=this._actions.behavioural,a=i[t];if(this._propagationInf=n,a&&a.shouldApply(e,n)){a.dispatch(e),r&&a.propagate()&&this.propagate(t,e,a.propagationIdentifiers());var o=this._behaviourEffectMap[t],c=this.getApplicableSideEffects(o,e,n);this.applySideEffects(c,a.entryExitSet(),e,t)}return this}},{key:"propagate",value:function(){return this}},{key:"sideEffects",value:function(){return arguments.length?(this._sideEffects=arguments.length<=0?void 0:arguments[0],this):this._sideEffects}},{key:"dissociateBehaviour",value:function(t,e){var n=this._actionBehaviourMap;for(var r in n)if(r===e){var i=n[r];i.behaviours=i.behaviours.filter((function(e){return e!==t}))}return this}},{key:"dissociateSideEffect",value:function(t,e){var n=this._behaviourEffectMap;return n[e]=n[e].filter((function(e){return(e.name||e)!==t})),this}},{key:"getApplicableSideEffects",value:function(t){return t}},{key:"attachPropagationListener",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.onDataModelPropagation();return t.unsubscribe("propagation"),t.on("propagation",e),this}},{key:"onDataModelPropagation",value:function(){var t=this;return function(e){var n=e.payload,r=n.action;t.dispatchBehaviour(r,n,{propagate:!1})}}},{key:"createSelectionSet",value:function(t){var e=this._actions.behavioural;for(var n in e){e[n].createSelectionSet(t)}return this}},{key:"initializeSideEffects",value:function(){var t,e,n,r=this._sideEffectDefinitions;return this.sideEffects((e=r,n=(t=this)._sideEffects,(e=e instanceof Array?e:Object.values(e)).forEach((function(e){var r=e.formalName(),i=e.target();if(i===t.target()||"all"===i){var a=n[r];n[r]=a||new e(t)}})),n)),this}},{key:"target",value:function(){return"all"}},{key:"registerPhysicalActions",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this,n=xk(e,t);return Object.assign(this._actions.physical,n),this}},{key:"propagateWith",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=this._actions.behavioural;if(t===yk)for(var i in r)r[i].propagateWith(e,n);else r[t].propagateWith(e,n);return this}},{key:"mapActionsAndBehaviour",value:function(t){var e=this._actions.physical,n=this._actionBehaviourMap;for(var r in n)if(!{}.hasOwnProperty.call(r,n)&&r===(t||r)){var i=void 0,a=n[r];i=a.target;var o=a.touch;i||(i=this.context.getDefaultTargetContainer()),(Jd()?!0===o||void 0===o:!o)&&this.bindActionWithBehaviour(e[r],i,a.behaviours)}return this.registerPhysicalActionHandlers(),this}},{key:"registerPhysicalBehaviouralMap",value:function(t){return this._actionBehaviourMap=Fs(this._actionBehaviourMap,t),this}},{key:"bindActionWithBehaviour",value:function(t,e,n){var r=this;return"string"==typeof e&&(e=[e]),e.forEach((function(e){var i=r.context.mount(),a=e.node instanceof Function?e:Od(i).selectAll(e);a.empty()||(a instanceof Array?a.forEach((function(e){t(Od(e),n)})):t(a,n))})),this}},{key:"getPropagationInf",value:function(){return this._propagationInf}},{key:"getAddSetFromCriteria",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return{model:e.data?e.data:null,uids:t?_k(t,this):null}}},{key:"getFullData",value:function(){return this.context.data()}},{key:"data",value:function(){return this.context.data()}},{key:"currentData",value:function(){return this.data()}},{key:"triggerPhysicalAction",value:function(t,e){var n=this._handlers[t]||[],r=this._handlers["*"];return[].concat(Gp()(Object.values(n)),Gp()(Object.values(r))).forEach((function(n){n(t,e)})),this}},{key:"onPhysicalAction",value:function(t,e,n){return!this._handlers[t]&&(this._handlers[t]={}),this._handlers[t][n]=e,this}},{key:"registerPhysicalActionHandlers",value:function(){var t=this;this.onPhysicalAction("*",(function(e,n){t._actionBehaviourMap[e].behaviours.forEach((function(e){t.dispatchBehaviour(e,n)})),t._criteria=n.criteria}))}},{key:"id",value:function(){return this.context.id()}},{key:"payloadGenerators",value:function(){return arguments.length&&Object.assign(this._payloadGenerators,arguments.length<=0?void 0:arguments[0]),this._payloadGenerators}},{key:"getPayloadGeneratorFor",value:function(t){var e=this._payloadGenerators.__default,n=this._payloadGenerators[t];return ks(n,e)}},{key:"getPayload",value:function(t){return this._actions.behavioural[t].getPayload()}},{key:"actions",value:function(){return this._actions}},{key:"getBehaviouralAction",value:function(t){return this._actions.behavioural[t]}},{key:"getSideEffectInstance",value:function(t){return this._sideEffects[t]}},{key:"getEntryExitSet",value:function(t){return this.getBehaviouralAction(t).entryExitSet()}}]),t}(),Sk=function(t,e){var n=new Set;return t.length>1?(t.forEach((function(t){e(t).forEach((function(t){n.add(t)}))})),n):e(t[0])},Mk=function(t,e){return t.reduce((function(t,n){return t+e(n)}),0)},Ek={mergedEnter:function(t){return Sk(t.getEntrySet(),(function(t){return t}))},mergedExit:function(t){return Sk(t.getExitSet(),(function(t){return t}))},oldEntry:function(t){return t.getEntrySet()[0]},oldExit:function(t){return t.getExitSet()[0]},newEntry:function(t){return t.getEntrySet()[1]},newExit:function(t){return t.getExitSet()[1]},complete:function(t){return t.getCompleteSet()}},Ck=function(){function t(e){var n=e.selectionSet,r=e.data,i=e.type,a=e.filteredModel;Yp()(this,t),this._selectionSet=n instanceof Array?n:[n],this._uids=null,this._data=r,this._type=i,this._model=null,this._filteredModel=a}return Kp()(t,[{key:"uids",get:function(){if(!this._uids){var t=this._type;this._uids=Sk(this._selectionSet,Ek[t])}return this._uids}},{key:"model",get:function(){return this._model||(this._model=this._filteredModel(this._data,this.uids)),this._model}},{key:"length",get:function(){return"mergedEnter"===this._type?Mk(this._selectionSet,(function(t){return t.getEntrySetLength()})):"mergedExit"===this._type?Mk(this._selectionSet,(function(t){return t.getExitSetLength()})):Mk(this._selectionSet,(function(t){return t.getCompleteSetLength()}))}},{key:"aggFns",get:function(){return Cl(this._model)}}]),t}();function Ak(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return Pk(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Pk(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,c=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return o=t.done,t},e:function(t){c=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(c)throw a}}}}function Pk(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Dk=function(t,e){if(Array.isArray(t))t.forEach(e);else{var n,r=Ak(t);try{for(r.s();!(n=r.n()).done;){e(n.value)}}catch(t){r.e(t)}finally{r.f()}}},Ik=function(){function t(e){var n=this,r=e.keys;Yp()(this,t),this._set=new Set,r.forEach((function(t){n._set.add(t)})),this._entrySet=[new Set,new Set],this._exitSet=[new Set,new Set],this._resetted=!1}return Kp()(t,[{key:"add",value:function(t){var e=Ig()(this._entrySet,2)[1],n=Ig()(this._exitSet,2),r=n[0],i=n[1];return Dk(t,(function(t){e.add(t),i.has(t)?i.delete(t):r.delete(t)})),this}},{key:"updateEntrySet",value:function(){var t,e=Ig()(this._entrySet,2),n=e[0],r=e[1],i=Ak(r);try{for(i.s();!(t=i.n()).done;){var a=t.value;r.delete(a),n.add(a)}}catch(t){i.e(t)}finally{i.f()}}},{key:"updateExitSet",value:function(){var t,e=Ig()(this._exitSet,2),n=e[0],r=e[1],i=Ak(r);try{for(i.s();!(t=i.n()).done;){var a=t.value;n.add(a),r.delete(a)}}catch(t){i.e(t)}finally{i.f()}}},{key:"getEntrySet",value:function(){return this._entrySet}},{key:"getExitSet",value:function(){return this._exitSet}},{key:"remove",value:function(t){var e=Ig()(this._entrySet,2),n=e[0],r=e[1],i=Ig()(this._exitSet,2)[1];return Dk(t,(function(t){i.add(t),r.has(t)?r.delete(t):n.delete(t)})),this}},{key:"reset",value:function(){return this._entrySet.forEach((function(t){return t.clear()})),this._exitSet.forEach((function(t){return t.clear()})),this}},{key:"resetted",value:function(){return!this.getEntrySetLength()&&!this.getExitSetLength()}},{key:"getEntrySetLength",value:function(){return this._entrySet.reduce((function(t,e){return e.size+t}),0)}},{key:"getExitSetLength",value:function(){return this._exitSet.reduce((function(t,e){return e.size+t}),0)}},{key:"getCompleteSet",value:function(){return this._set}},{key:"getCompleteSetLength",value:function(){return this._set.size}}]),t}(),Tk=function(){function t(e){var n=this;Yp()(this,t),this.firebolt=e,this._selectionSet=null,this._cachedSets=[],this._applyChecker={},this._appendPropFields=!1,this._propagationIdentifiers=null,this.propagate(!0),this.setApplyChecker({source:function(t){if(t.sourceUnit===e.id()){var r=n._payload?n._payload.criteria:null;return!Wl(r,t.criteria)}return!0}})}return Kp()(t,[{key:"dispatch",value:function(t){var e=t.criteria,n=this.firebolt,r=this.getSelectionSet(),i=n.getPropagationInf(),a=this.getAddSetFromCriteria(e,this.firebolt.getPropagationInf()),o=a.model,c=a.uids;this._payload=t,t.uids=c||[],this.setSelectionSet(c,r,{filteredDataModel:o,payload:t}),!1!==i.propagate&&this.propagationIdentifiers(r,t),r.resetted()&&(this._propagationIdentifiers=null),this.entryExitSet(r,o,t)}},{key:"getSelectionSet",value:function(){return this._selectionSet}},{key:"getInitialSelectionSet",value:function(){return this._cachedSets[0]||this._selectionSet}},{key:"createSelectionSet",value:function(t){return this._selectionSet&&(this._cachedSets.length?this._cachedSets=[this._cachedSets[0],this._selectionSet]:this._cachedSets.push(this._selectionSet)),this._selectionSet=new Ik(t),this}},{key:"getAddSetFromCriteria",value:function(){var t;return(t=this.firebolt).getAddSetFromCriteria.apply(t,arguments)}},{key:"setSelectionSet",value:function(){return this}},{key:"entryExitSet",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];if(e.length){var r=e[0],i=e[1];if(this._entryExitSet){var a=this._entryExitSet,o=a.mergedEnter,c=a.mergedExit;c._model&&c._model.dispose(!1),o._model&&o._model.dispose(!1)}return this._entryExitSet={entrySet:[this.getSetInfo("oldEntry",r,i),this.getSetInfo("newEntry",r,i)],exitSet:[this.getSetInfo("oldExit",r,i),this.getSetInfo("newExit",r,i)],mergedEnter:this.getSetInfo("mergedEnter",r,i),mergedExit:this.getSetInfo("mergedExit",r,i),completeSet:this.getSetInfo("complete",r,i)},this}return this._entryExitSet}},{key:"getSetInfo",value:function(t,e,n){var r=Cs(this.firebolt.getPropagationInf(),"propPayload","sourceId"),i=this.firebolt.data();return new Ck({selectionSet:e,type:t,filteredModel:function(e,i){var a=null;if("complete"===t)return e;if("mergedEnter"===t&&r)a=n?n.replica():null;else{var o=Gp()(i);a=o.length?e.select({field:ot.ROW_ID,value:o,operator:"in"}):e.createEmptyDm(),e.removeChild(a)}return a},data:i})}},{key:"propagationIdentifiers",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];if(e.length){var r=null,i=e[0],a=e[1],o=this.firebolt.data().getMeasures(),c=a.criteria,u=this._propagationFields;if(null===c||i.resetted())r=null;else if(c.range)r={interpolated:!0,identifiers:c.range,fields:Object.keys(c.range).map((function(t){return{name:t}}))};else{var s=a.fields;u&&(s=this._appendPropFields?[].concat(Gp()(a.fields),Gp()(u)):u);var l=i.getEntrySet().map((function(t){return Gp()(t)})).flat();r={fields:s.map((function(t){return{name:t}})),identifiers:l,idMeasureNameMap:l.reduce((function(t,e){return t.set(e,o.join(",")),t}),new Map)}}return this._propagationIdentifiers=r,this}return this._propagationIdentifiers}},{key:"propagateWith",value:function(t,e){return this._appendPropFields=!!e,this._propagationFields=t,this}},{key:"propagate",value:function(){return arguments.length?(this._propagate=arguments.length<=0?void 0:arguments[0],this):this._propagate}},{key:"shouldApply",value:function(t,e){var n=!0,r=this._applyChecker;for(var i in r){var a=r[i];n=n&&a(t,this.firebolt,e)}return n}},{key:"setApplyChecker",value:function(t){return Object.assign(this._applyChecker,t),this}},{key:"removeApplyChecker",value:function(t){delete this._applyChecker[t]}},{key:"getPayload",value:function(){return this._payload}},{key:"reset",value:function(){return this.getSelectionSet().reset(),this._propagationIdentifiers=null,this}},{key:"dispose",value:function(){this._cachedSets.length=0,this._selectionSet.reset();var t=this._entryExitSet;if(t){var e=t.mergedEnter,n=t.mergedExit;n._model&&n._model.dispose(!1),e._model&&e._model.dispose(!1),this._entryExitSet=null}return this}},{key:"getDiffSet",value:function(t,e){return wk(t,e)}}],[{key:"mutates",value:function(){return!1}}]),t}();function Rk(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=eg()(t);if(e){var i=eg()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Jp()(this,n)}}var Nk=function(t){Qp()(n,t);var e=Rk(n);function n(){return Yp()(this,n),e.apply(this,arguments)}return Kp()(n,[{key:"setSelectionSet",value:function(t,e){var n=e.getEntrySet();if(null===t)e.reset();else if(t.length){var r=wk(n,[t]),i=t.filter((function(t){return!n[0].has(t)&&!n[1].has(t)}));e.updateExitSet(),e.remove(r),e.updateEntrySet(),e.add(i),r=wk([e.getCompleteSet()],[].concat(Gp()(e.getEntrySet()),Gp()(e.getExitSet()))),e.remove(r)}else{var a=wk([e.getCompleteSet()],Gp()(e.getExitSet()));e.remove(a)}}}]),n}(Tk),Ok="brush",Fk="highlight",Lk="tooltip",jk="filter",Bk="select";function zk(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=eg()(t);if(e){var i=eg()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Jp()(this,n)}}var Hk=function(t){Qp()(n,t);var e=zk(n);function n(){var t;Yp()(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(t=e.call.apply(e,[this].concat(i))).setApplyChecker({source:function(e,n){if("visual-group"===n.target())return!0;var r=t._payload?t._payload.criteria:null,i=t._payload?t._payload.target:null;return!(Wl(r,e.criteria)&&Wl(i,e.target))}}),t}return Kp()(n,null,[{key:"formalName",value:function(){return Fk}}]),n}(Nk);function Wk(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=eg()(t);if(e){var i=eg()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Jp()(this,n)}}var Vk=function(t){Qp()(n,t);var e=Wk(n);function n(){return Yp()(this,n),e.apply(this,arguments)}return Kp()(n,null,[{key:"formalName",value:function(){return Ok}}]),n}(Nk);function Uk(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=eg()(t);if(e){var i=eg()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Jp()(this,n)}}var Gk=function(t){Qp()(n,t);var e=Uk(n);function n(){return Yp()(this,n),e.apply(this,arguments)}return Kp()(n,null,[{key:"formalName",value:function(){return jk}},{key:"mutates",value:function(){return!0}}]),n}(Nk);function qk(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=eg()(t);if(e){var i=eg()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Jp()(this,n)}}var Yk=function(t){Qp()(n,t);var e=qk(n);function n(){return Yp()(this,n),e.apply(this,arguments)}return Kp()(n,[{key:"setSelectionSet",value:function(t,e){if(null===t)e.reset();else if(t.length){this.firebolt.getPropagationInf().sourceId?(e.reset(),e.add(t)):e.add(t)}else e.remove(e.getCompleteSet());return this}}]),n}(Tk);function Xk(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=eg()(t);if(e){var i=eg()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Jp()(this,n)}}var Kk,$k=function(t){Qp()(n,t);var e=Xk(n);function n(){var t;Yp()(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(t=e.call.apply(e,[this].concat(i)))._applyChecker=[function(){return!0}],t}return Kp()(n,[{key:"setSelectionSet",value:function(t,e){if(null===t)e.reset();else if(t.length){var n=this.firebolt.getPropagationInf(),r=Ig()(e._entrySet,2),i=r[0],a=r[1],o=t.filter((function(t){return a.has(t)||i.has(t)}));if(n.sourceId){e.reset(),e.add(t);var c=wk([e.getCompleteSet()],Gp()(e.getEntrySet()));e.remove(c)}else{if(e.updateExitSet(),e.updateEntrySet(),o.length)e.remove(o);else if(e.add(t),!e.getExitSetLength()){var u=wk([e.getCompleteSet()],[].concat(Gp()(e.getEntrySet()),Gp()(e.getExitSet())));e.remove(u)}var s=this.firebolt.groupFirebolt(),l=s.getEntryExitSet("select");l&&!l.mergedEnter.length&&s.resetAll("select")}}else e.remove(e.getCompleteSet());return this}}],[{key:"formalName",value:function(){return Bk}}]),n}(Yk),Qk=function(t,e,n,r){var i,a,o={},c={},u=Qd();t.call(u().on("start",(function(){var t=$d();o={x:t.x,y:t.y},i=n.context.getDrawingContext(),a=(new Date).getTime()})).on("drag",(function(){var t=$d();if(c={x:t.x,y:t.y},!(r&&Math.abs(o.x-c.x)<=5)){c.x=Math.max(0,Math.min(c.x,i.width)),c.y=Math.max(0,Math.min(c.y,i.height));var a=Object.assign({},o),u=Object.assign({},c);if(o.x>c.x&&(a.x=c.x,u.x=o.x),o.y>c.y){var s=o.y;a.y=c.y,u.y=s}var l=n.getPayloadFromEvent("drag",{startPos:a,endPos:u},{event:t,isDragging:!0});n.triggerPhysicalAction(e,l)}})).on("end",(function(){var t=$d();c={x:t.x,y:t.y};var u=(new Date).getTime()-a;if(!(r&&u>100&&Math.abs(o.x-c.x)<=5)){if(c.x=Math.max(0,Math.min(c.x,i.width)),c.y=Math.max(0,Math.min(c.y,i.height)),o.x>c.x){var s=o.x;o.x=c.x,c.x=s}if(o.y>c.y){var l=o.y;o.y=c.y,c.y=l}var f=n.getPayloadFromEvent("drag",{startPos:o,endPos:c},{event:t,dragEnd:!0});f.target&&0===f.dragDiff||n.triggerPhysicalAction(e,f)}})))},Zk=function(t){return function(e){Qk(e,fk,t)}},Jk=function(t){return function(e){var n=function(e){var n=$d(),r=t.context,i=Xd(r.getDrawingContext().svgContainer,n),a=t.getPayloadFromEvent(hk,i,{data:e,event:n});t.triggerPhysicalAction(hk,a),n.stopPropagation()};e.on("mouseover",n).on("mousemove",n).on("mouseout",(function(){t.triggerPhysicalAction(hk,{criteria:null})}))}},tS=function(t,e,n,r){var i=n.context,a=Xd(i.getDrawingContext().svgContainer,e.touches?e.touches[0]:e);return n.getPayloadFromEvent(r,a,{data:t,event:e})},eS=function(t){return function(e){var n,r,i=t.context,a=function(e){t.triggerPhysicalAction(x.SELECTIONDRAG,e)},o=Qd();e.call(o().on("start",(function(){var t=$d();r=i.getDrawingContext(),n=t.subject})).on("drag",(function(){var e=$d();n.x+=e.dx,n.y+=e.dy;var i=r.width,o=r.height,c=Math.min(i-n.width,Math.max(n.x,0)),u=Math.min(o-n.height,Math.max(n.y,0)),s=u+n.height,l=c+n.width;if(c>=0&&l<=i&&u>=0&&s<=o){var f=t.getPayloadFromEvent(x.SELECTIONDRAG,{startPos:{x:c,y:u},endPos:{x:l,y:s}},{event:e,isDragging:!0});a(f)}})).on("end",(function(){var e=r.width,i=r.height,o=Math.min(e-n.width,Math.max(n.x,0)),c=Math.min(i-n.height,Math.max(n.y,0)),u=c+n.height,s=o+n.width;if(o>=0&&s<=e&&c>=0&&u<=i){var l=t.getPayloadFromEvent(x.SELECTIONDRAG,{startPos:{x:o,y:c},endPos:{x:s,y:u}},{event:event,dragEnd:!0});a(l)}})))}},nS=function(t){return function(e){e.on("click",(function(e){var n=$d(),r=tS(e,n,t,pk);t.triggerPhysicalAction(pk,r),n.stopPropagation()}))}},rS=(Kk={},Rg()(Kk,fk,Zk),Rg()(Kk,hk,Jk),Rg()(Kk,pk,nS),Rg()(Kk,gk,(function(t){return function(e){var n,r;r=!1,n=$d(),e.on("touchstart",(function(e){n=$d(),r=!1,setTimeout((function(){r?t.triggerPhysicalAction(gk,{criteria:null}):function(e){var r=tS(e,n,t,gk);t.triggerPhysicalAction(gk,r),n.stopPropagation()}(e)}),100)})).on("touchend",(function(){r=!0}))}})),Rg()(Kk,vk,(function(t){return function(e,n){Qk(e,n,t,!0)}})),Rg()(Kk,dk,eS),Kk),iS="anchors",aS="tooltip",oS="brush-anchors",cS="persistent-anchors",uS="filter",sS="highlighter",lS="crossline",fS="fragmented-tooltip",hS="axis-label-highlighter",dS={valueParser:{defaultValue:function(t){return t}}},pS=function(){function t(e){Yp()(this,t),this.firebolt=e,this._strategy="default",this._config={},this._id=ts(),this._strategies={},this._enabled=!0,Ps(this,dS),this.config(this.constructor.defaultConfig()),this._applyChecker={},this.setApplyChecker({source:function(){return!0}})}return Kp()(t,[{key:"config",value:function(){return arguments.length?(this._config=Fs(this._config,arguments.length<=0?void 0:arguments[0]),this):this._config}},{key:"apply",value:function(){return this}},{key:"setStrategy",value:function(t,e){return e&&(this._strategies[t]=e),this}},{key:"enable",value:function(){this._enabled=!0}},{key:"disable",value:function(){this._enabled=!1}},{key:"sourceInfo",value:function(){return this.firebolt.getSourceInfo()}},{key:"layers",value:function(){return this.firebolt.layers()}},{key:"plotPointsFromIdentifiers",value:function(){var t;return(t=this.firebolt).getPlotPointsFromIdentifiers.apply(t,arguments)}},{key:"shouldApply",value:function(t,e){var n=!0,r=this._applyChecker;for(var i in r){var a=r[i];n=n&&a(t,this.firebolt,e)}return n&&this._enabled}},{key:"setApplyChecker",value:function(t){return Object.assign(this._applyChecker,t),this}},{key:"removeApplyChecker",value:function(t){delete this._applyChecker[t]}},{key:"setLayerData",value:function(t,e){var n=this.layers().find((function(t){return t.alias()===e}));return t?(n&&n.enableCaching().data(t),this):(this.resetLayerData(e),this)}},{key:"resetLayerData",value:function(t){var e=this.layers().find((function(e){return e.alias()===t}));e&&e.resetData()}}],[{key:"defaultConfig",value:function(){return{}}},{key:"formalName",value:function(){return"generic"}},{key:"target",value:function(){return"all"}},{key:"mutates",value:function(){return!1}}]),t}();function gS(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=eg()(t);if(e){var i=eg()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Jp()(this,n)}}var vS=function(t){Qp()(n,t);var e=gS(n);function n(){return Yp()(this,n),e.apply(this,arguments)}return Kp()(n,[{key:"applyInteractionStyle",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.firebolt.context.layers(),r=0,i=n.length;r<i;r++)!1!==n[r].config().interactive&&n[r].applyInteractionStyle(e,t.uids);return this}}]),n}(pS);function yS(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=eg()(t);if(e){var i=eg()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Jp()(this,n)}}var mS=function(t){Qp()(n,t);var e=yS(n);function n(){return Yp()(this,n),e.apply(this,arguments)}return Kp()(n,[{key:"createElement",value:function(t,e,n,r,i){return Fd(t,e,n,r,i)}},{key:"drawingContext",value:function(){return this.firebolt.getDrawingContext()}},{key:"show",value:function(){return this}},{key:"hide",value:function(){return this}}]),n}(pS),bS=(n(91),function(t,e,n){var r=t.config(),i=r.defClassName,a=r.classPrefix;Od(e).selectAll(".".concat(a,"-").concat(i)).style("display",n?"block":"none")});function xS(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=eg()(t);if(e){var i=eg()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Jp()(this,n)}}var wS,_S=function(t){Qp()(n,t);var e=xS(n);function n(){var t;Yp()(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(t=e.call.apply(e,[this].concat(i))).setApplyChecker((function(){return!0})),t}return Kp()(n,[{key:"apply",value:function(t,e){var n,r,i=0,a=0,o=this._config,c=o.box,u=this.firebolt,s=this.drawingContext(),l=s.sideEffectGroup,f=s.width,h=s.height,d=o.classPrefix,p=o.defClassName,g=o.brush,v=e.criteria;if(n=f,r=h,!Cs(v,"range")&&!Cs(v,"dimensions")||e.hideSelBox&&!o.persistent)return this.hide(s),this;var y=this.sourceInfo(),m=function(t,e,n){var r,i,a,o,c=t.criteria,u=t.dimensions||{},s=u.x,l=u.y;if(!c)return null;if(e.x&&e.y){var f,h,d="".concat(n.x[0]),p="".concat(n.y[0]),g=c.range,v=e.x[0],y=e.y[0],m="linear"===v.constructor.type(),b="linear"===y.constructor.type(),x="band"===v.constructor.type(),w="band"===v.constructor.type(),_=c.dimensions;if(_){var k=_[0].findIndex((function(t){return t===d}));-1!==k&&(f=_.slice(1,_.length).map((function(t){return t[k]}))),-1!==(k=_[0].findIndex((function(t){return t===p})))&&(h=_.slice(1,_.length).map((function(t){return t[k]})))}else f=g[d],h=g[p];if(f&&f.length){var S=v.domain(),M=f[0],E=f[f.length-1];if(x){var C=S.indexOf(f[0]),A=S.indexOf(f[f.length-1]),P=[C,A].sort((function(t,e){return t-e})),D=Ig()(P,2);C=D[0],A=D[1],M=S[C],E=S[A]}r=v.getScaleValue(M),i=v.getScaleValue(E),i+=x?v.getUnitWidth():0}if(h&&h.length){var I=y.domain(),T=h[0],R=h[h.length-1];if(w){var N=I.indexOf(h[0]),O=I.indexOf(h[h.length-1]),F=[N,O].sort((function(t,e){return e-t})),L=Ig()(F,2);N=L[0],O=L[1],T=I[N],R=I[O]}a=y.getScaleValue(T),o=y.getScaleValue(R),o+=w?y.getUnitWidth():0}if(b&&m||!t.dragEnd){if(s){var j=Ig()(s,2);r=j[0],i=j[1]}if(l){var B=Ig()(l,2);a=B[0],o=B[1]}}}return{dimension:{x1:r,x2:i,y1:a,y2:o}}}(e,y.axes,y.fields).dimension,b=e.dragEnd&&o.transition;"xy"===g?(i=Math.min(m.x1,m.x2),a=Math.min(m.y1,m.y2),n=Math.abs(m.x2-m.x1),r=Math.abs(m.y2-m.y1)):"x"===g?(i=Math.min(m.x1,m.x2),a=0,n=Math.abs(m.x2-m.x1),r=h):(i=0,a=Math.min(m.y1,m.y2),n=f,r=Math.abs(m.y2-m.y1)),this.show(s);var x=[{x:i,y:a,width:n,height:r}],_=Fd(Od(l),"g",[1],".".concat(d,"-").concat(p)),k=this,S=_.selectAll("rect").data(x),M=S.enter().append("rect").each((function(){u.registerPhysicalBehaviouralMap(Rg()({},dk,{target:[Od(this)],behaviours:[w.BRUSH]})),eS(u)(Od(this),["brush"],k)})).merge(S).each((function(t){var e=Od(this);for(var n in b&&(e=e.transition().duration(b.duration)),t)({}).hasOwnProperty.call(t,n)&&ol(t[n])&&e.attr(n,t[n])})),E=_s(c.defClassName,this._id,d);return M.classed(E.join(" "),!0),M.classed(c.className,!0),this}},{key:"hide",value:function(t){bS(this,t.sideEffectGroup,!1)}},{key:"show",value:function(t){bS(this,t.sideEffectGroup,!0)}}],[{key:"defaultConfig",value:function(){return{defClassName:"selection-box-group",className:"",classPrefix:"muze",box:{defClassName:"selection-box",className:""},transition:{duration:200},brush:"xy",persistent:!1}}},{key:"formalName",value:function(){return"selectionBox"}},{key:"target",value:function(){return"visual-unit"}}]),n}(mS),kS={classPrefix:"muze",defClassName:"tooltip-box",parentClassName:"tooltip-parent-container",connectorClassName:"tooltip-connectors",className:"",row:{margin:0},spacing:5,content:{spacing:5,iconContainerSize:10,iconScale:1,iconShape:"circle",iconColor:"#ff0000",rowMargin:"4px 0 4px 0",margin:10,separator:":",className:"tooltip-content-container",parentClassName:"tooltip-content-parent-container"},arrow:{size:10,disabled:!1,defClassName:"tooltip-arrow",className:"",color:"rgba(195,195,195,0.85)"}},SS=function(t,e){t.selectAll(e).sort((function(t,e){return t-e}))},MS=(n(92),function(){function t(){Yp()(this,t),this._model=null,this._formatter=null,this._config=this.constructor.defaultConfig()}return Kp()(t,[{key:"config",value:function(){return arguments.length>0?(this._config=Fs(this._config,arguments.length<=0?void 0:arguments[0]),this):this._config}},{key:"update",value:function(t){return this._model=t.model,this._formatter=t.formatter,this}},{key:"context",value:function(t){return this._context=t,this}},{key:"hide",value:function(){this._mount&&this._mount.style("visiblity","hidden")}},{key:"render",value:function(t){var e,n=this._config,r=n.iconContainerSize,i=this._formatter,a=n.rowMargin,o=this._model,c=n.classPrefix;if(this._mount=t,(e=o instanceof Array?o:i(this._model,this.config(),this._context))instanceof Function){Fd(t,"div",[1],"".concat(c,"-tooltip-html-container")).html(e())}else{var u=e,s="default";Ju(e)&&(u=e.content,s=e.displayFormat);var l=Fd(t,"div",[s],"".concat(c,"-tooltip-content"),{},(function(t){return t}));if("table"===s){var f=Fd(l,"table",[1],"".concat(c,"-tooltip-table")),h=Fd(f,"tbody",[1],"".concat(c,"-tooltip-table-tbody")),d=Fd(h,"tr",u,"".concat(c,"-tooltip-table-row"));d.each((function(t,e){Od(this).classed("".concat(c,"-tooltip-table-row-").concat(e),!0)})),Fd(d,"td",(function(t){return t}),"".concat(c,"-tooltip-table-cell")).each((function(t){Od(this).html(t)}))}else{var p=Fd(l,"div",u,"",{update:function(t,e){return t.attr("class",e.className)}}),g=Fd(p,"span",(function(t){return t.data}),"".concat(c,"-tooltip-content"));g.attr("class","".concat(c,"-tooltip-content")),Vd(p,{margin:a}),Vd(g,{display:"inline-block"}),g.each((function(t){var e=Od(this);if(t instanceof Object)if("icon"===t.type){var n=Fd(e,"svg",[1]),i=Fd(n,"path",[1]),a=t.shape instanceof Function?t.shape:fl(t.shape);zd(n,{x:0,y:0,width:r,height:r}),zd(i,{d:a.size(t.size)(),transform:"translate(".concat(r/2,", ").concat(r/2,")")}),Vd(i,{fill:t.color}),Vd(n,{width:"".concat(r,"px"),height:"".concat(r,"px")})}else e.node().textContent=t.value,t.className&&e.classed(t.className,!0),Vd(e,t.style);else e.node().textContent=t}))}}return this}},{key:"clear",value:function(){return this._model=null,this}},{key:"remove",value:function(){this._mount&&this._mount.remove()}}],[{key:"defaultConfig",value:function(){var t=kS.content;return t.classPrefix=kS.classPrefix,t}}]),t}()),ES=function(){function t(e,n){Yp()(this,t);var r=n;this._id=ts(),this._config={},this.config({});var i=this._config,a=i.classPrefix,o=i.content.parentClassName,c=Fd(e,"div",[1],"".concat(a,"-tooltip-container"));this._container=c,this._tooltipContainer=c.append("div").style("position","absolute"),this._tooltipContainerNode=this._tooltipContainer.node(),this._contentContainer=this._tooltipContainer.append("div").attr("class","".concat(a,"-").concat(i.defClassName," ").concat(a,"-").concat(o,"\n            ").concat(i.className)),this._contentContainerNode=this._contentContainer.node(),n||(r=e.append("svg").style("pointer-events","none")),this._contents={},this._tooltipConnectorContainer=Od(r).append("g").attr("class","".concat(i.classPrefix,"-").concat(i.connectorClassName));var u=this._id,s=i.parentClassName,l=_s(s,u,i.classPrefix);this.addClass(l.join(" ")),this.hide()}return Kp()(t,[{key:"config",value:function(){if(arguments.length>0){var t=Fs({},this.constructor.defaultConfig());return this._config=Fs(t,arguments.length<=0?void 0:arguments[0]),this}return this._config}},{key:"addClass",value:function(t){return this._tooltipContainer.classed(t,!0),this}},{key:"context",value:function(){return arguments.length?(this._context=arguments.length<=0?void 0:arguments[0],this):this._context}},{key:"content",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this.config(),i=r.classPrefix,a=r.content.className,o=r.formatter,c="".concat(i,"-").concat(a,"-").concat(t),u="".concat(i,"-").concat(n.className),s=this._contents[t]=this._contents[t]||new MS,l=Fd(this._contentContainer,"div",[n.order],c);l.attr("class","".concat(i,"-").concat(a," ").concat(c," ").concat(u)),SS(this._contentContainer,".".concat(i,"-").concat(a));var f=r.content;return n.classPrefix=this._config.classPrefix,s.config(f),null===e?(s.clear(),s.remove(),delete this._contents[t]):(s.update({model:e,formatter:n.formatter||o}),s.context(this._context),s.render(l)),Object.keys(this._contents).length||this.hide(),this}},{key:"hideContent",value:function(t){var e=this._contents[t];e&&e.hide()}},{key:"getContents",value:function(){return Object.values(this._contents)}},{key:"position",value:function(t,e){if(!Object.keys(this._contents).length)return this.hide(),this;this.show();var n=this._offset||{x:0,y:0};return this._tooltipContainer.style("transform","translate(".concat(n.x+t,"px,").concat(n.y+e,"px")),this}},{key:"positionRelativeTo",value:function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.orientation;if(!t)return this.hide(),this;var i=this._extent,a=this._contentContainerNode,o=a.offsetWidth+4,c=a.offsetHeight+4,u=this._config,s=this._offset,l=u.spacing,f=void 0===n.draw||n.draw,h=t.y,d=t.x+t.width+s.x,p=i.width-d,g=t.x+s.x-i.x,v=i.height-(t.y+t.height+s.y),y=l,m=c+y,b=o+y,x=[{position:"top",value:h-m},{position:"right",value:p-b},{position:"left",value:g-b},{position:"bottom",value:v-m}],w=function(e){var n,r=t.x+t.width,i=t.y;return"right"===e?(n="left",r+=y):"left"===e&&(r=t.x-o,n="right",r-=y),t.height<c&&(i=Math.max(0,t.y+t.height/2-c/2)),{position:n,x:r,y:i}},_=function(e){var n,r,a=t.x-o/2+t.width/2;return i.width-(t.x+s.x)<o?a=i.width-o-s.x:a+s.x<i.x&&(a=i.x),"top"===e?(r=t.y-c-y,n="bottom"):(r=t.y+t.height+y,n="top"),{position:n,x:a,y:r}};this._target=t;var k=ds(x.filter((function(t){return"left"===t.position||"right"===t.position})),"value"),S=ds(x.filter((function(t){return"top"===t.position||"bottom"===t.position})),"value");if(r)if("horizontal"===r){var M=k.position;e=w(M)}else{var E=S.position;e=_(E)}else if(k.value>0){var C=k.position;e=w(C)}else{var A=S.position;e=_(A)}return this._position={x:e.x,y:e.y},this._orientation=e.position,f&&this.position(e.x,e.y),this}},{key:"hide",value:function(){return this._tooltipContainer.style("visibility","hidden"),this}},{key:"show",value:function(){return this._tooltipContainer.style("visibility","visible"),this}},{key:"extent",value:function(t){return this._extent=t,this}},{key:"offset",value:function(t){return this._offset=t,this}},{key:"remove",value:function(){return this._tooltipContainer.remove(),this._tooltipConnectorContainer.remove(),this}}],[{key:"defaultConfig",value:function(){return kS}}]),t}();function CS(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return AS(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return AS(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,c=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return o=t.done,t},e:function(t){c=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(c)throw a}}}}function AS(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var PS,DS=function(t){return"".concat(t%t.toFixed(0)==0?t:t.toFixed(2))},IS=function(t,e,n){var r,i=gt.FieldSubtype,a=i.TEMPORAL,o=i.CONTINUOUS,c=i.CATEGORICAL;return r={},Rg()(r,a,(function(t){return gt.isInvalid(t)?n(t):kl(Number(t),e)})),Rg()(r,o,(function(e){return gt.isInvalid(e)?n(e):t(DS(e))})),Rg()(r,c,(function(t){return n(t)})),r},TS=function(t,e){var n=[],r=t.data,i=t.schema;return n.push(i.map((function(t){return e[t.name].displayName}))),r.forEach((function(t){var r=[];i.forEach((function(n,i){var a=e[n.name].fn(t[i]);r.push(a)})),n.push(r)})),n},RS=function(t,e){return 1===t&&!e},NS=function(t){var e=t.field,n=t.value,r=t.classPrefix;return{className:"".concat(r,"-tooltip-stacked-row"),data:[{value:e,className:"".concat(r,"-tooltip-stacked-row-key")},{value:"".concat(n),className:"".concat(r,"-tooltip-stacked-row-value")}]}},OS=function(t){var e=t.field,n=t.value,r=t.classPrefix,i=t.margin,a=t.isSelected,o=t.removeKey,c=t.stackedSum,u=t.isStackedBar,s=t.stackedValue;if(!o){var l={value:e,className:"".concat(r,"-tooltip-key")},f={value:n,className:"".concat(r,"-tooltip-value")};"null"!==s&&"undefined"!==s||(s=0);var h={value:c?"(".concat((100*s/c).toFixed(2)," %)"):void 0,className:"".concat(r,"-tooltip-stacked-percentage")};return void 0!==i&&(l.style={"margin-left":"".concat(i,"px")},f.style={"margin-left":"".concat(i,"px")},h.style={"margin-left":"".concat(i,"px")}),{className:a?"".concat(r,"-tooltip-row ").concat(r,"-tooltip-selected-row"):"".concat(r,"-tooltip-row"),data:c&&u?[l,h,f]:[l,f]}}return{data:[{className:"",value:n,style:{"margin-left":"10px"}}],className:"".concat(r,"-tooltip-first")}},FS=function(t,e){return t.reduce((function(t,n){return gt.isInvalid(n[e])?t:t+n[e]}),0)},LS=function(t){return t.some((function(t){return"stack"===t.transformType()}))},jS=function(t){return t.some((function(t){return"stack"===t.transformType()&&t.config().mark===Gm}))},BS=function(t,e,n,r){var i=r.dataModel,a=r.dimensionMeasureMap,o=r.axes,c=r.config,u=r.fieldInf,s=r.dataLen,l=r.target,f=r.stackedSum,h=r.isStackedBar,d=c.classPrefix,p=c.margin,g=c.separator,v=o.color[0],y=o.shape[0],m=o.size[0],b=function(e){var r=i.getFieldIndex(e),o=gt.getActualValue(t[r]),c=a[e],b={type:"icon",color:v.getColor(o),size:m.config().value,shape:y.getShape(o)},x=u[e],w=x.displayName,_=(0,x.fn)(o);if(RS(s,f))n.push(OS({field:w,value:_,classPrefix:d,margin:10}));else{var k=c.length>1;k&&n.push({data:[b,_]});var S,M=l&&l[1][l[0].indexOf(e)];M=gt.getActualValue(M),S=M===o,c.forEach((function(e){var r=i.getFieldIndex(e),a=u[e],o=a.displayName,c=a.fn,s=t[r],l=c(s),v=OS({field:k?"".concat(o).concat(g):_,value:l,classPrefix:d,margin:k?p:void 0,isSelected:S,stackedSum:f,stackedValue:s,isStackedBar:h});k||(v.data=[b].concat(Gp()(v.data))),n.push(v)}))}};for(var x in e)b(x)},zS=function(t,e,n){var r=gt.FieldSubtype,i=r.CATEGORICAL,a=r.TEMPORAL,o=n.valueParser,c=n.timeDiffs,u=IS(null,null,o)[i];return t.reduce((function(t,n){var r=n.subtype,i=n.name,s=r===a?c[i]:0,l=e.getField(i).schema().format;return t[i]={fn:ks(IS(l,s,o)[r],u),displayName:"".concat(Al(e,i))},t}),{})},HS=(wS={},Rg()(wS,"selectionSummary",(function(t,e,n){var r=n.selectionSet,i=e.classPrefix,a=n.config,o=a.showMultipleMeasures,c=n.firebolt.getPayload("select")||n.firebolt.getPayload("brush"),u=r.mergedEnter.length,s=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3?arguments[3]:void 0,i=r.showMultipleMeasures,a=r.fields,o=e.uids,c=n.measureNames||new Set,u=t.getMeasures(),s=i?u:a||u.slice(0,1),l={};return s.forEach((function(e){var n,r=[],a=CS(o);try{for(a.s();!(n=a.n()).done;){var u=n.value;i&&c&&c.has(u)?c.get(u).has(e)&&r.push(u):r.push(u)}}catch(t){a.e(t)}finally{a.f()}if(r.length){var s=t.select({field:ot.ROW_ID,value:r,operator:"in"}),f=t.getField(e).schema(),h=s.groupBy([],[{field:e,aggn:f.defAggFn}]);if(!h.isEmpty()){var d=h.getData().data[0][h.getFieldIndex(e)];l[e]=DS(d)}h.dispose(),s.dispose()}})),l}(t,r.mergedEnter,c,a),l=[{className:"".concat(i,"-tooltip-row"),data:[{value:"".concat(u),style:{"font-weight":"bold"}},"Items Selected"]}];return Object.keys(s).forEach((function(e){var n,r=t.getField(e).schema(),a=r.format,c=void 0===a?DS:a,u=r.defAggFn,f=s[e],h=["(".concat(u.toUpperCase(),")"),"".concat(Al(t,e),":"),{value:c(f),style:{"font-weight":"bold"},className:"".concat(i,"-tooltip-value")}];o?l.push({className:"".concat(i,"-tooltip-row"),data:h}):(n=l[0].data).push.apply(n,h)})),l})),Rg()(wS,"highlightSummary",(function(t,e,n){return function(t){var e,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2?arguments[2]:void 0,a=[],o=t.getData({excludeFields:[ot.ROW_ID]}),c=o.data,u=o.schema,s=gt.FieldType,l=s.MEASURE,f=s.DIMENSION,h=i.retinalFields,d=h.color,p=h.shape,g=h.size,v=i.detailFields||[],y=i.config||{},m=y.showStackSum,b=void 0===m||m,x=i.payload.selectedMeasures,w=void 0===x?[]:x,_=u.filter((function(t){return t.type===f})),k=u.filter((function(t){return t.type===l})),S=!!Tl(u,v).length,M=c.length,E=i.dimensionMeasureMap,C=i.axes,A=zS(u,t,i);if(M>1&&S)a=TS({data:c,schema:u},A),n="table";else{var P=[d.field,p.field,g.field].reduce((function(e,n){return t.isDimension(n)&&(e[n]=1),e}),{}),D=_.filter((function(t){return!P[t.name]})),I=D.map((function(e){return t.getFieldIndex(e.name)})),T=Gp()(Pg()(Set,Gp()(Object.values(E)))),R=LS(i.layers),N=jS(i.layers),O=RS(M,R)?k:k.filter((function(t){return-1===T.indexOf(t.name)}));e=gl({data:c,keys:I});var F=function e(n){for(var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],c=r.classPrefix,s=r.separator,l=0,f=n.length;l<f;l++){var h=n[l],d=h.values,p=h.key,g=Cs(u,I[a],"name"),v=1===M||0===Object.keys(P).length?10:void 0;if(g){var y=A[g],m=y.displayName,x=y.fn,_=x(p),S=!RS(M,R);o.push(OS({field:"".concat(m).concat(s),value:_,classPrefix:c,margin:v,isSelected:void 0,removeKey:S}))}if(d[0]&&d[0].key)e(d,a+1,o);else{var D=0;if(R&&b&&k.length){var T=w.length?w[0]:k[0].name;D=FS(d,t.getFieldIndex(T));var F=k[0].format;o.push(NS({field:"Total".concat(s),value:F?F(D.toFixed(2)):D.toFixed(2),classPrefix:c}))}for(var L=function(e,n){var a=d[e];BS(a,P,o,{fieldInf:A,axes:C,config:r,dataModel:t,dimensionMeasureMap:E,dataLen:M,target:i.payload.target,stackedSum:D,isStackedBar:N}),O.forEach((function(e){var n=e.name,r=A[n],i=r.displayName,u=r.fn;o.push(OS({field:"".concat(i).concat(s),isSelected:-1!==w.indexOf(n),value:u(a[t.getFieldIndex(n)]),classPrefix:c,margin:10}))}))},j=0,B=d.length;j<B;j++)L(j,B)}}};F(e=Cs(e[0],"key")?e:[{values:e}],0,a)}return{content:a,displayFormat:n}}(t,e,n)})),wS);n(93);function WS(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=eg()(t);if(e){var i=eg()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Jp()(this,n)}}var VS=(PS={},Rg()(PS,"highlightSummary",(function(t,e){return ks(t,e)})),Rg()(PS,"default",(function(t){return ks(t,{})})),PS),US=function(t,e){var n=e._strategies,r=Object.assign({},t);for(var i in n)r[i]=ks(VS[i],VS.default)(t[i],t);return r.highlightSummary=Fs(r.highlightSummary,function(t){return["formatter","dataTransform","order","fields"].reduce((function(e,n){return n in t&&(e[n]=t[n]),e}),{})}(t)),r},GS=function(t){Qp()(n,t);var e=WS(n);function n(){var t;Yp()(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(t=e.call.apply(e,[this].concat(i)))._tooltips={},t._strategies=Fs({},HS),t._strategy="highlightSummary",t}return Kp()(n,[{key:"config",value:function(){if(arguments.length){var t=this._config=Fs(this._config,US(arguments.length<=0?void 0:arguments[0],this)),e=this._strategies;for(var n in e){var r=t[n].formatter;this.setStrategy(n,r)}return this}return this._config}},{key:"apply",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=t&&t.mergedEnter.model;return null===e.criteria||r&&r.isEmpty()||null===t?(this.hide(n,null),this):(this.createTooltip(Object.assign({},{payload:e,selectionSet:t,options:n}),null,0),this)}},{key:"hide",value:function(t){var e=this._tooltips;for(var n in e)({}).hasOwnProperty.call(e,n)&&function(){var r=e[n];t.contents.forEach((function(t){var e=t.name;r.content(e,null)})),Object.keys(r._contents).length||r.hide()}()}},{key:"getPlotPointsFromIdentifiers",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=ov()(eg()(n.prototype),"plotPointsFromIdentifiers",this).call(this,t,{getBBox:!0,target:e.target});return r&&r[0]}},{key:"createTooltip",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,a=this.drawingContext(),o=this.sourceInfo(),c=this.config(),u=e.payload,s=e.selectionSet,l=e.options,f=a.parentContainer,h=a.parentContainerDimensions,d=f.getBoundingClientRect(),p=a.htmlContainer.getBoundingClientRect(),g=p.left-d.left,v=p.top-d.top,y=this._tooltips[r]=this._tooltips[r]||new ES(f,a.svgContainer),m=s.entrySet,b=s.mergedEnter,x=m[1].uids.size?m[1].uids:b.uids,w=this.getPlotPointsFromIdentifiers(x,u);n=ks(n,w,y._target);var _=c.padding,k=u.showInPosition,S=u.position,M=l.contents,E=void 0===M?[{name:"highlightSummary"}]:M;E.forEach((function(e){var n=e.name,r=e.setTransform,a=c[n],l=a.fields,f=a.dataTransform,h=r?r(s,u,t):s;if(h){var d=f(i||h.mergedEnter.model,l,t),p=Object.assign({},o,{payload:u,firebolt:t.firebolt,detailFields:[],timeDiffs:o.timeDiffs,selectionSet:h,config:c[n],valueParser:c.valueParser}),g=t._strategies[n];y.context(p),y.content(n,d,{formatter:g,order:c[n].order,className:c[n].className})}else y.content(n,null)})),y.config(this.config()).extent({x:0,y:0,width:h.width,height:h.height}).offset({x:g+(c.offset.x||0),y:v+(c.offset.y||0)}),k?y.position(S.x+_,S.y+_):n?y.positionRelativeTo({x:n.x,y:n.y,width:n.width||0,height:n.height||0},{orientation:c.orientation}):y.hide()}}],[{key:"defaultConfig",value:function(){return{padding:5,offset:{x:0,y:0},highlightSummary:{order:1,dataTransform:function(t,e){return e?t.project(e,{saveChild:!1}):t}},selectionSummary:{order:0,dataTransform:function(t){return t}},valueParser:function(t){return t}}}},{key:"formalName",value:function(){return aS}},{key:"target",value:function(){return"all"}}]),n}(mS);function qS(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=eg()(t);if(e){var i=eg()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Jp()(this,n)}}var YS=function(t){Qp()(n,t);var e=qS(n);function n(){return Yp()(this,n),e.apply(this,arguments)}return Kp()(n,[{key:"createTooltip",value:function(t){var e=0,r=0,i=this.config(),a=t.strategy,o=void 0===a?"highlightSummary":a,c=t.selectionSet,u=gt.FieldType.DIMENSION,s=c.mergedEnter.model,l=this.firebolt.context,f=this.drawingContext(),h=this._tooltips,d={width:f.width,height:f.height},p=i.padding,g=[],v=l.getSourceInfo().fields,y=!!(!!v.x[0]&&v.x[0].type()===u),m=[],b=s.getUids();g.push.apply(g,Gp()(b.map((function(t){return s.select({field:ot.ROW_ID,value:t,operator:"eq"})}))));for(var x={},w=0,_=g.length;w<_;w++){var k=g[w],S=this.getPlotPointsFromIdentifiers(new Set([b[w]]));ov()(eg()(n.prototype),"createTooltip",this).call(this,t,S,w,k);var M=this._tooltips[w];x[w]=this._tooltips[w];var E=M._position,C=M._tooltipContainer.node().getBoundingClientRect();if(e+=C.height+p,r+=C.width+p,y?e>f.height:r>f.width)break;E&&m.push({x:E.x,y:E.y,width:C.width,height:C.height,tooltip:M})}for(var A in h)if(!x[A]){var P=h[A];P.content(o,null),P.getContents().length||(P.remove(),delete h[A])}return m.length&&function(t,e,n){var r,i,a,o,c,u=t.length,s=function(t,e,c){a=t.x,o=t.width,r=t.y,i=t.height;var u=r+i,s=a+o;n?(c?r<e.y+e.height:u>e.y)&&(e.y=c?t.y-e.height-5:u+5):(c?a<e.x+e.width:s>e.x)&&(e.x=c?t.x-e.width-5:s+5)};for(t.sort((function(t,e){return n?t.y-e.y:t.x-e.x})),c=0,c=0;c<u-1;c++)s(t[c],t[c+1]);if(t[c].y+t[c].height>e.height||t[c].x+t[c].width>e.width)for(n?t[c].y-=t[c].height+t[c].y-e.height:t[c].x-=t[c].width+t[c].x-e.width,c=u-1;c>0;c--)s(t[c],t[c-1],!0)}(m,d,y),m.forEach((function(t){return t.tooltip.position(t.x,t.y,{repositionArrow:!0})})),this}},{key:"hide",value:function(t){var e=this._tooltips;for(var n in e)if({}.hasOwnProperty.call(e,n)){var r=t.strategy||this._strategy;e[n].content(r,null),e[n].hide()}}}],[{key:"formalName",value:function(){return fS}}]),n}(GS);n(94);function XS(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=eg()(t);if(e){var i=eg()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Jp()(this,n)}}var KS=function(t){Qp()(n,t);var e=XS(n);function n(){return Yp()(this,n),e.apply(this,arguments)}return Kp()(n,[{key:"apply",value:function(t,e){var n,r,i,a,o=this,c=this.config(),u=c.className,s=c.bandClass,l=c.lineClass,f=gt.FieldType.DIMENSION,h=t.mergedEnter.length,d=t.mergedEnter.model,p=this.drawingContext();if(null===e.criteria||!h)return this.hide(),this;var g=this.firebolt.context.getSourceInfo(),v=g.axes,y=g.fields,m=Tl(e.fields,d.getFieldNames()),b=p.sideEffectGroup,x=d.getRowsCount(),w=[];if(m.forEach((function(t){for(var e=[],c=0;c<x;c++)e.push(d.getValueAtIndex(t,c));var u=[["x",0],["x",1],["y",0],["y",1]].find((function(e){var n=y[e[0]][e[1]];return n&&n.type()===f&&-1!==n.getMembers().indexOf(t)}));if(void 0!==u&&e.length){var h=u[0],g=v[h][u[1]],m=e[0];r=g.getUnitWidth()||0,i=g.getScaleValue(m)+r/2+p.xOffset;var b=o.firebolt.context.layers();if((b=b.filter((function(t){return!!t.config().crossline}))).length){var _=Math.max.apply(Math,Gp()(b.map((function(t){return t.getPlotSpan()[h]})))),k=Math.max.apply(Math,Gp()(b.map((function(t){return t.getPlotPadding()[h]}))));n=p.height,a=p.width;var S=i-_/2-k/2,M=i+_/2+k/2,E={};E.d="y"===h?"M 0 ".concat(S," L 0 ").concat(M," L ").concat(a," ").concat(M," L ").concat(a," ").concat(S," Z"):"M ".concat(S," 0 L ").concat(M," 0 L ").concat(M," ").concat(n," L ").concat(S," ").concat(n," Z"),E.className=_?s:l,!isNaN(i)&&w.push(E)}}})),w.length){var _=this.createElement(b,"g",[1],u);this.createElement(_,"path",w).attr("d",(function(t){return t.d})).style("pointer-events","none").attr("class",(function(t){return t.className}))}return this}},{key:"hide",value:function(){var t=this.config().className,e=this.drawingContext();Od(e.sideEffectGroup).selectAll(".".concat(t)).remove()}}],[{key:"defaultConfig",value:function(){return{className:"".concat("muze","-crossline-group"),bandClass:"".concat("muze","-crossband"),lineClass:"".concat("muze","-crossline")}}},{key:"formalName",value:function(){return lS}},{key:"target",value:function(){return"visual-unit"}}]),n}(mS);function $S(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return QS(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return QS(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,c=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return o=t.done,t},e:function(t){c=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(c)throw a}}}}function QS(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var ZS={fade:function(t,e){var n=t.mergedEnter,r=t.mergedExit,i=t.completeSet;n.length||r.length?e.firebolt.context.layers().forEach((function(t){"area"===t.constructor.formalName()?(e.applyInteractionStyle(n,{interactionType:"fade",apply:!0},[t]),e.applyInteractionStyle(r,{interactionType:"fade",apply:!1},[t])):(e.applyInteractionStyle(r,{interactionType:"fade",apply:!0},[t]),e.applyInteractionStyle(n,{interactionType:"fade",apply:!1},[t]))})):e.applyInteractionStyle(i,{interactionType:"fade",apply:!1})},fadeOnBrush:function(t,e,n){var r=t.mergedEnter,i=t.mergedExit,a=t.completeSet,o=t.entrySet,c=n.dragEnd;r.length||i.length?e.firebolt.context.layers().forEach((function(t){"area"===t.constructor.formalName()?c&&(e.applyInteractionStyle(i,{interactionType:"fade",apply:!1},[t]),o[1].length&&e.applyInteractionStyle(r,{interactionType:"brushFocus",apply:!0},[t])):n.dragEnd?(e.applyInteractionStyle(i,{interactionType:"brushFocus",apply:!0},[t]),e.applyInteractionStyle(r,{interactionType:"doubleStroke",apply:!0}),e.applyInteractionStyle(i,{interactionType:"doubleStroke",apply:!1}),e.applyInteractionStyle(r,{interactionType:"brushFocus",apply:!1})):(e.applyInteractionStyle(r,{interactionType:"brushStroke",apply:!0},[t]),e.applyInteractionStyle(i,{interactionType:"brushStroke",apply:!1},[t]),e.applyInteractionStyle(i,{interactionType:"brushFocus",apply:!1},[t]),e.applyInteractionStyle(i,{interactionType:"doubleStroke",apply:!1}))})):(e.applyInteractionStyle(a,{interactionType:"brushStroke",apply:!1}),e.applyInteractionStyle(a,{interactionType:"doubleStroke",apply:!1}),e.applyInteractionStyle(a,{interactionType:"brushFocus",apply:!1}))},focus:function(t,e){var n=t.mergedEnter,r=t.mergedExit,i=t.completeSet,a=t.entrySet,o=t.exitSet,c=e.firebolt;if(n.length||r.length){var u=c.getEntryExitSet("selection-highlight");c.context.layers().forEach((function(t){"area"===t.constructor.formalName()?(e.applyInteractionStyle(r,{interactionType:"focus",apply:!1},[t]),e.applyInteractionStyle(n,{interactionType:"focus",apply:!0},[t])):(e.applyInteractionStyle(o[1],{interactionType:"focusStroke",apply:!1}),e.applyInteractionStyle(a[1],{interactionType:"focusStroke",apply:!0}),u?e.applyInteractionStyle({uids:wk([o[1].uids],[u.mergedEnter.uids])},{interactionType:"focus",apply:!0},[t]):e.applyInteractionStyle(o[1],{interactionType:"focus",apply:!0},[t]),e.applyInteractionStyle(a[1],{interactionType:"focus",apply:!1},[t]))}))}else e.applyInteractionStyle(i,{interactionType:"focus",apply:!1}),e.applyInteractionStyle(i,{interactionType:"focusStroke",apply:!1}),e.applyInteractionStyle(i,{interactionType:"commonDoubleStroke",apply:!1})},highlight:function(t,e,n){null===n.criteria?(e.applyInteractionStyle(t.completeSet,{interactionType:"highlight",apply:!1}),e.applyInteractionStyle(t.completeSet,{interactionType:"commonDoubleStroke",apply:!1})):e.firebolt.context.layers().forEach((function(r){var i=t.entrySet[1].uids;if(n.target){var a=t.mergedEnter.model,o=a.select(zl(n.target,a),{mode:"all"}).map((function(t){var e=new Set(t.getUids());return t.dispose(),e})),c=Ig()(o,2),u=c[0],s=c[1];i=u,e.applyInteractionStyle({uids:u},{interactionType:"highlight",apply:!0},[r]),e.applyInteractionStyle({uids:s},{interactionType:"highlight",apply:!1},[r])}else e.applyInteractionStyle({uids:i},{interactionType:"highlight",apply:!0},[r]);e.applyInteractionStyle(t.exitSet[1],{interactionType:"highlight",apply:!1},[r]);var l=e.firebolt.getEntryExitSet("select");if(l){var f=function(t,e){var n,r=new Set,i=$S(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;e.has(a)&&r.add(a)}}catch(t){i.e(t)}finally{i.f()}return r}(i,l.mergedEnter.uids),h=function(t,e){var n,r=new Set,i=$S(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;e.has(a)||r.add(a)}}catch(t){i.e(t)}finally{i.f()}return r}(l.mergedEnter.uids,i);e.applyInteractionStyle({uids:f},{interactionType:"commonDoubleStroke",apply:!0},[r]),e.applyInteractionStyle({uids:h},{interactionType:"commonDoubleStroke",apply:!1},[r])}}))},selectionHighlight:function(t,e){e.applyInteractionStyle(t.mergedEnter,{interactionType:"focus",apply:!1});var n=e.firebolt.getEntryExitSet("select");n?e.applyInteractionStyle({uids:wk([t.mergedExit.uids],[n.mergedEnter.uids])},{interactionType:"focus",apply:!0}):e.applyInteractionStyle(t.mergedExit,{interactionType:"focus",apply:!0})},brushHighlight:function(t,e){e.applyInteractionStyle(t.mergedEnter,{interactionType:"brushFocus",apply:!1});var n=e.firebolt.getEntryExitSet("brush");n?e.applyInteractionStyle({uids:wk([t.mergedExit.uids],[n.mergedEnter.uids])},{interactionType:"brushFocus",apply:!0}):e.applyInteractionStyle(t.mergedExit,{interactionType:"brushFocus",apply:!0})}};function JS(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=eg()(t);if(e){var i=eg()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Jp()(this,n)}}var tM=function(t){Qp()(n,t);var e=JS(n);function n(){var t;Yp()(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(t=e.call.apply(e,[this].concat(i)))._strategy="highlight",t._strategies=ZS,t}return Kp()(n,[{key:"getExcludeSetIds",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e instanceof Function?e(this.firebolt.getEntryExitSet):e.reduce((function(e,n){var r=((t.firebolt.getEntryExitSet(n)||{}).mergedEnter||{}).uids;return r&&e.push.apply(e,Gp()(r)),e}),[])}},{key:"apply",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this._strategies[n.strategy||this._strategy];return r(t,this,e),this}}],[{key:"formalName",value:function(){return sS}},{key:"target",value:function(){return"visual-unit"}}]),n}(vS);function eM(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=eg()(t);if(e){var i=eg()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Jp()(this,n)}}var nM=function(t){Qp()(n,t);var e=eM(n);function n(){var t;Yp()(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(t=e.call.apply(e,[this].concat(i)))._entryModel=null,t}return Kp()(n,[{key:"apply",value:function(t){var e=this.firebolt,n=t.mergedEnter.model;return this._entryModel===n||(this._entryModel=n,n?e.data(n):e.resetData()),this}}],[{key:"formalName",value:function(){return"filter"}},{key:"target",value:function(){return"all"}},{key:"mutates",value:function(){return!0}}]),n}(vS);n(95);function rM(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=eg()(t);if(e){var i=eg()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Jp()(this,n)}}var iM=function(t){Qp()(n,t);var e=rM(n);function n(){var t;Yp()(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(t=e.call.apply(e,[this].concat(i)))._layersMap={},t.addAnchorLayers(),t}return Kp()(n,[{key:"addAnchorLayers",value:function(){var t=this.firebolt.context;return function(t,e,n){e.addLayer((function(e){var r=[];return e&&e.forEach((function(e){var i=e.mark,a=t[i];if(a&&a.shouldDrawAnchors()){var o=e.def.encoding,c={x:Cs(o,"x","field"),y:Cs(o,"y","field"),color:{field:Cs(o,"color","field"),value:Cs(o,"color","value")},size:{field:Cs(o,"size","field"),value:function(){return n.defaultSizeValue()}}},u=n.constructor.formalName(),s=e.def.name,l="".concat(s,"-").concat(u),f="".concat(n.constructor.defaultConfig().className);r.push({name:"".concat(l,"-upper"),mark:"point",groupId:"".concat(u,"-upper"),className:"".concat(f,"-upper"),encoding:c,transform:{type:"identity"},calculateDomain:!1,transition:n.getTransitionConfig(),source:function(){return new gt({data:[[]],schema:[]})},interactive:!1,owner:e.def.name}),"area"===i&&r.push({name:"".concat(l,"-lower"),mark:"point",groupId:"".concat(u,"-lower"),className:"".concat(f,"-lower"),encoding:c,transform:{type:"identity"},calculateDomain:!1,transition:n.getTransitionConfig(),source:function(){return new gt({data:[[]],schema:[]})},interactive:!1,owner:e.def.name})}})),r}))}(t.registry().layerRegistry,t,this),this}},{key:"getTransitionConfig",value:function(){return{disabled:!0}}},{key:"defaultSizeValue",value:function(){return 70}},{key:"getAnchorSizeOnInteraction",value:function(t){return t.dragEnd?40:0}},{key:"apply",value:function(t,e,n){var r=this,i=t.mergedEnter.model,a=this.constructor.formalName(),o=this.firebolt.context,c=o.layers().filter((function(t){return t.config().groupId==="".concat(a,"-upper")})),u=o.layers().filter((function(t){return t.config().groupId==="".concat(a,"-lower")})),s=e.target,l=null;s&&(l=s[1].reduce((function(t,e,n){var r=s[0][n];return r!==ot.MEASURE_NAMES&&(t[r]=e),t}),{})),[].concat(Gp()(c),Gp()(u)).forEach((function(c,u){var f=c.config(),h=o.getLayerByName(f.owner),d=h.constructor.formalName(),p=f.groupId==="".concat(a,"-upper"),g=[],v=[],y=h.getTransformedDataFromIdentifiers(t.mergedEnter.uids,u),m=Ig()(y,2);if(g=m[0],v=m[1],"area"===d&&s&&n.behaviour===Fk){var b=zl(s,i),x=i.select(b);if(!p){var w=h.getTransformedDataFromIdentifiers(x.getUids(),u),_=Ig()(w,2);g=_[0],v=_[1]}}var k=new gt({data:g,schema:v}),S={encoding:{size:{value:function(){return r.defaultSizeValue()+r.getAnchorSizeOnInteraction(e)}},"stroke-width":{value:r.getAnchorStroke(e,l)}}},M=Fs(f,S);return c.data(k).config(M),r}))}},{key:"getAnchorStroke",value:function(t,e){return function(t){var n=t.data.dataObj;return!!e&&Object.keys(e).every((function(t){return n[t]===e[t]}))?"1px":"0px"}}}],[{key:"target",value:function(){return"visual-unit"}},{key:"defaultConfig",value:function(){return{className:"".concat("muze","-anchors-group")}}},{key:"formalName",value:function(){return iS}}]),n}(mS);function aM(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=eg()(t);if(e){var i=eg()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Jp()(this,n)}}var oM=function(t){Qp()(n,t);var e=aM(n);function n(){return Yp()(this,n),e.apply(this,arguments)}return Kp()(n,[{key:"getTransitionConfig",value:function(){return{disabled:!0}}},{key:"setAnchorLayerStyle",value:function(t){var e=this;t.filter((function(t){return t.config().groupId===cS})).forEach((function(t){var n=t.data().getUids(),r=e.constructor.formalName(),i=t.config().encoding.interaction;t.applyInteractionStyle(i[r],n,{apply:!0})}))}},{key:"getAnchorSizeonInteraction",value:function(){return 50}},{key:"getAnchorStroke",value:function(){return"2px"}}],[{key:"formalName",value:function(){return cS}},{key:"defaultConfig",value:function(){return{className:"".concat("muze","-persistent-anchors")}}}]),n}(iM);function cM(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=eg()(t);if(e){var i=eg()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Jp()(this,n)}}var uM=function(t){Qp()(n,t);var e=cM(n);function n(){return Yp()(this,n),e.apply(this,arguments)}return Kp()(n,[{key:"getTransitionConfig",value:function(){return{disabled:!0}}},{key:"setAnchorLayerStyle",value:function(t){var e=this;t.filter((function(t){return t.config().groupId===oS})).forEach((function(t){var n=t.data().getUids(),r=e.constructor.formalName(),i=t.config().encoding.interaction;t.applyInteractionStyle(i[r],n,{apply:!0})}))}},{key:"getAnchorStroke",value:function(t){return t.dragEnd?"2px":"1px"}}],[{key:"formalName",value:function(){return oS}},{key:"defaultConfig",value:function(){return{className:"".concat("muze","-brush-anchors")}}}]),n}(iM);n(96);function sM(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=eg()(t);if(e){var i=eg()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Jp()(this,n)}}var lM,fM,hM,dM=function(t){Qp()(n,t);var e=sM(n);function n(){return Yp()(this,n),e.apply(this,arguments)}return Kp()(n,[{key:"apply",value:function(t){var e=this.firebolt.context,n=t&&t.mergedEnter.model,r=n&&n.getData().data,i=r&&r.length?r[0]:[],a=e.axes(),o=a.x,c=void 0===o?[]:o,u=a.y,s=void 0===u?[]:u;return[].concat(Gp()(c),Gp()(s)).forEach((function(t){var e=null;n&&(e=i[n.getFieldIndex(t.config().field)]);var r=t.getTicksBasedOnData(e),a=r.selectionSet,o=r.rejectionSet;a&&a.selectAll("text").classed("muze-axis-ticks-highlight",!0),o.selectAll("text").classed("muze-axis-ticks-highlight",!1)})),this}}],[{key:"formalName",value:function(){return hS}},{key:"target",value:function(){return"visual-unit"}}]),n}(vS),pM=(lM={},Rg()(lM,Ok,["selectionBox",{name:"highlighter",options:{strategy:"fadeOnBrush"}},"brush-anchors"]),Rg()(lM,Fk,[{name:"highlighter",options:{strategy:"highlight"}},{name:"tooltip",options:{contents:[{name:"highlightSummary",setTransform:function(t,e,n){return Cs(n.firebolt.getPayload("brush"),"dragging")?null:t}},{name:"selectionSummary",setTransform:function(t,e,n){if(Cs(n.firebolt.getPayload("brush"),"dragging"))return null;var r=n.firebolt.getEntryExitSet(Bk),i=n.firebolt.getEntryExitSet(Ok);if(r||i){var a=new Set,o=null;if(Cs(r,"mergedEnter","length")?(a=r.mergedEnter.uids,o=r):Cs(i,"mergedEnter","length")&&(a=i.mergedEnter.uids,o=i),function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0,n=0;n<t.length;n++)if(e.has(t[n]))return!0;return!1}(e.uids,a))return o}return null}}]}},{name:hS,options:{setTransform:function(t,e,n){return Cs(n.firebolt.getPayload("brush"),"dragging")?null:t}}},"crossline","anchors"]),Rg()(lM,jk,["filter"]),Rg()(lM,Bk,[{name:"highlighter",options:{strategy:"focus"}},{name:"tooltip",options:{contents:[{name:"selectionSummary"}]}},"persistent-anchors"]),Rg()(lM,"selection-highlight",[{name:"highlighter",options:{strategy:"selectionHighlight"}}]),Rg()(lM,"brush-highlight",[{name:"highlighter",options:{strategy:"brushHighlight"}}]),lM),gM=function(t){var e={};for(var n in t){var r=t[n];e[r.formalName()]=r}return e},vM={behaviours:Fl(gM(_)),physicalActions:Fl(rS),sideEffects:Fl(gM(S))},yM=function(t,e,n,r){var i,a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(e&&r.sourceCanvas===n.sourceCanvas()){var o=n.data().getMeasures().join(",");i=t.filter((function(t){var n=e.get(t);if(n){var r=n.has(o);return a?!(r&&1===n.size):r}return!0}))}else i=t;return i},mM=function(t,e,n){var r=n.measureNames,i={};if(e){var a=e.getUids();i={criteria:{uids:yM(a,r,t,n,!0)}}}else i={criteria:null};return Object.assign({},n,i)},bM=(fM={brush:function(t,e,n,r){var i={};if(n.criteria&&n.criteria.range){var a=function(t,e){var n=e.getMeasures(),r=null;return null!==t&&(r=Tl(t.getMeasures(),n).reduce((function(e,n){return e[n]=t.getDomain(n),e}),{})),r}(e,t.data());i.criteria={range:a}}else i=bM.__default(t,e,n,r);return Object.assign({},n,i)},__default:function(t,e,n){var r=n.measureNames,i={};if(e){var a=e.getUids(),o=t.data().getUidMap(),c=a.filter((function(t){return t in o}));i={criteria:{uids:c=yM(c,r,t,n,!1)}}}else i={criteria:null};return Object.assign({},n,i)}},Rg()(fM,"selection-highlight",mM),Rg()(fM,"brush-highlight",mM),fM),xM=function(t,e){var n=t._cacheMap={};return function(r){if(!(n=t._cacheMap)[r]){for(var i=e.getUids(),a=e.getRowsCount(),o={},c=function(t){var n=r.map((function(n){return e.getValueAtIndex(n,t)}));!o[n]&&(o[n]=[]),o[n].push(i[t])},u=0;u<a;u++)c(u);n[r]=o}return n[r]}},wM=function(t,e,n){var r=n.groupFirebolt();if(t===w.BRUSH&&e.dragDiff>3){var i=r.getEntryExitSet(w.SELECT);i&&i.mergedEnter.length&&n.groupFirebolt().propagate(w.SELECT,{criteria:null},{sourceId:n.id(),applyOnSource:!0})}else if(t===w.SELECT){var a=r.getEntryExitSet(w.BRUSH);a&&a.mergedEnter.length&&n.groupFirebolt().propagate(w.BRUSH,{criteria:null},{sourceId:n.id(),applyOnSource:!0})}};function _M(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=eg()(t);if(e){var i=eg()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Jp()(this,n)}}var kM,SM=(hM={},Rg()(hM,ut.CARTESIAN,(function(t,e){var n=e.startPos,r=e.endPos;if(n.x===r.x&&n.y===r.y)return{criteria:null};var i=t.context.getRangeFromPositions({startPos:n,endPos:r},{brush:Cs(t.config().behaviours.brush,"mode")}),a={};return a.x=[n.x,r.x],a.y=[n.y,r.y],{criteria:i,dimensions:a}})),Rg()(hM,ut.POLAR,(function(){return{criteria:null}})),hM),MM=function(t,e){var n=t.context.coord();return SM[n](t,e)},EM=function(t){Qp()(n,t);var e=_M(n);function n(){var t;Yp()(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(t=e.call.apply(e,[this].concat(i)))._propagationDms={},t._actionPayloadMap={hover:function(t,e,n){var r=!!t.context.layers().find((function(t){var e=t.config().mark;return e===xg||e===mg})),i=t.config().behaviours.highlight.exact?{}:{getAllPoints:!0,detectEmptyArea:r},a=t.context.getNearestPoint(e.x,e.y,Object.assign(i,{data:n.data,event:n.event}));return{criteria:a.id?{dimensions:a.id}:null,target:(a||{}).target,position:e}},drag:function(t,e,n){var r=e.startPos,i=e.endPos,a=t.context.getNearestPoint(r.x,r.y,{data:n.data,event:n.event}),o=MM(t,e);return o.dragging=n.isDragging,o.dragDiff=Math.abs(r.x-i.x)+Math.abs(r.y-i.y),o.dragEnd=n.dragEnd,o.dragEnd&&(o.hideSelBox=!0),o.dragStart=n.dragStart,o.target=a.id,o},selectiondrag:function(t,e,n){var r=e.startPos,i=e.endPos,a=MM(t,e);return a.dragging=n.isDragging,a.dragDiff=Math.abs(r.x-i.x)+Math.abs(r.y-i.y),a.dragEnd=n.dragEnd,a.dragEnd&&(a.hideSelBox=!0),a}},t.payloadGenerators(bM),t}return Kp()(n,[{key:"getApplicableSideEffects",value:function(t,e,n){var r=this.sideEffects();return(e.sideEffects?e.sideEffects:t).filter((function(t){return r[t.name].shouldApply(e,n)}))}},{key:"data",value:function(){if(arguments.length){var t=arguments.length<=0?void 0:arguments[0];return this.context.enableCaching().data(t),this.disposeBehaviours({exclude:"filter"}),this}return this.context.data()}},{key:"disposeBehaviours",value:function(t){var e=t.exclude,n=this._actions.behavioural;for(var r in n){if(r!==e)n[r].dispose()}}},{key:"resetData",value:function(){return this.context.clearCaching().resetData(),this.disposeBehaviours({exclude:"filter"}),this}},{key:"onDataModelPropagation",value:function(){var t=this;return function(e,n){var r=t.context,i=t._propagationDms[n.sourceAction];i&&i.dispose(!1),t._propagationDms[n.sourceAction]=e;var a=n.sourceUnit===t.id();if(r.mount()&&(!a||n.applyOnSource)){var o=e,c=n.action;n.sourceId=n.propagationSourceId;var u=!0;c.forEach((function(i){var a={propagate:!1,data:o,propPayload:n,sourceId:n.sourceId},c=t.getBehaviouralAction(i).shouldApply(n,a);if(u=u&&c,c){t._propagationDms[n.sourceAction]=e;var s=t.getPayloadGeneratorFor(i)(t,o,n,r.facetFieldsMap());"filter"!==i&&null===n.criteria&&(s.criteria=null),t.dispatchBehaviour(i,s,Object.assign({},a,{data:null===s.criteria?null:a.data}))}}))}var s=t.context._dependencies.throwback,l=s.get("behaviourDispatched");s.commit("behaviourDispatched",l+1)}}},{key:"target",value:function(){return"visual-unit"}},{key:"createSelectionSet",value:function(){for(var t,e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return(t=ov()(eg()(n.prototype),"createSelectionSet",this)).call.apply(t,[this].concat(r)),this._dimsMapGetter=xM(this,this.data()),this}},{key:"remove",value:function(){return this.context.cachedData()[0].unsubscribe("propagation"),this}},{key:"id",value:function(){return this.context.id()}},{key:"getPropagationSource",value:function(){return this.context.cachedData()[0]}},{key:"sourceCanvas",value:function(){return this.context.parentAlias()}},{key:"propagate",value:function(t,e){this._groupFirebolt.propagate(t,e,{sourceId:this.id()})}},{key:"groupFirebolt",value:function(){return arguments.length?(this._groupFirebolt=arguments.length<=0?void 0:arguments[0],this):this._groupFirebolt}},{key:"dispatchBehaviour",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=Cs(r,"propPayload","sourceId");if(i||(e.sourceUnit=this.id(),e.sourceCanvas=this.sourceCanvas(),e.fields=e.criteria?Cs(e.criteria,"dimensions",0):[],wM(t,e,this)),ov()(eg()(n.prototype),"dispatchBehaviour",this).call(this,t,e,r),!i){var a=this.context._dependencies.throwback,o=a.get("behaviourDispatched");a.commit("behaviourDispatched",o+1)}}},{key:"getSourceInfo",value:function(){return this.context.getSourceInfo()}},{key:"layers",value:function(){return this.context.layers()}},{key:"getPlotPointsFromIdentifiers",value:function(){var t;return(t=this.context).getPlotPointsFromIdentifiers.apply(t,arguments)}},{key:"getDrawingContext",value:function(){return this.context.getDrawingContext()}},{key:"getPayloadFromEvent",value:function(t,e,n){var r=this._actionPayloadMap[t];return r?r(this,e,n):function(t,e,n){var r=t.context.getNearestPoint(e.x,e.y,{data:n.data,event:n.event});return{criteria:r.id?{dimensions:r.id}:null,fields:Object.keys(r.id||{}),target:(r||{}).target,position:e}}(this,e,n)}}]),n}(kk),CM=(kM={},Rg()(kM,x.DRAG,{behaviours:[w.BRUSH],touch:!1}),Rg()(kM,x.HOVER,{behaviours:[w.HIGHLIGHT]}),Rg()(kM,x.LONGTOUCH,{behaviours:[w.SELECT],touch:!0}),Rg()(kM,x.TOUCHDRAG,{behaviours:[w.BRUSH],touch:!0}),Rg()(kM,x.CLICK,{behaviours:[w.SELECT,"selection-highlight"],touch:!1}),kM);function AM(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=eg()(t);if(e){var i=eg()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Jp()(this,n)}}var PM,DM,IM=function(t){Qp()(n,t);var e=AM(n);function n(){var t;Yp()(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(t=e.call.apply(e,[this].concat(i))).setApplyChecker({source:function(e,n){if(e.sourceUnit===n.id()){var r=t._payload?t._payload.criteria:null;return!Wl(r,e.criteria)||0!==e.dragDiff}return!0}}),t}return Kp()(n,[{key:"dispatch",value:function(){for(var t,e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return this.active=r[0].dragging,this.start=r[0].dragStart,(t=ov()(eg()(n.prototype),"dispatch",this)).call.apply(t,[this].concat(r))}},{key:"setSelectionSet",value:function(t,e){var n=e.getEntrySet();if(null===t)e.reset();else if(t.length){if(this.firebolt.getPropagationInf().sourceId){e.reset(),e.add(t);var r=wk([e.getCompleteSet()],Gp()(e.getEntrySet()));e.remove(r)}else{var i=wk(n,[t]),a=t.filter((function(t){return!n[0].has(t)&&!n[1].has(t)}));e.updateExitSet(),e.remove(i),e.updateEntrySet(),e.add(a),i=wk([e.getCompleteSet()],[].concat(Gp()(e.getEntrySet()),Gp()(e.getExitSet()))),e.remove(i)}}else{var o=wk([e.getCompleteSet()],Gp()(e.getExitSet()));e.remove(o)}}}],[{key:"formalName",value:function(){return w.BRUSH}}]),n}(Yk),TM=n(54),RM=n.n(TM),NM=p.BAR_LAYER,OM=p.TICK_LAYER,FM=l.LINEAR,LM=function(t,e,n){return["x","y"].map((function(r){var i=t.axes();return i[r]&&ks(e[r]&&e[r].show,function(t,e){return e.constructor.type()===FM&&t}(e.show,i[r][0]))?function(t,e,n,r){var i,a,o,c,u=t.config(),s=u.classPrefix,l=u.gridLines,f=u.gridBands,h=l.color,d=l.zeroLineColor,p=n===ek?f.defClassName:l.defClassName,g=f[r].color,v=e[r][0],y=v.constructor.type()===FM;n===ek&&y?(c={},Rg()(c,r,"".concat(r,"value")),Rg()(c,"".concat(r,"0"),"".concat(r,"value0")),o=c):o=Rg()({},r,"".concat(r,y?"value":"dim"));o.color={value:function(t,e){var i=y&&v.domain()[0]<0;return n===ek?g[e%2]:i&&0===t[r]?d:h}};var m=t.axes(),b=m.color,x=m.shape,w=m.size;return{definition:(i={defClassName:"".concat(p,"-").concat(r),className:u.className,name:r,calculateDomain:!1,individualClassName:function(t,e){return y&&v.domain()[0]<0&&0===t.y&&n!==ek?"".concat(s,"-axis-zero-line"):"".concat(s,"-grid-").concat(n,"-").concat(r,"-").concat(e%2)}},Rg()(i,"pad".concat(r.toUpperCase()),n===ek?0:void 0),Rg()(i,"encoding",o),i),axes:(a={},Rg()(a,r,v),Rg()(a,"color",b[0]),Rg()(a,"shape",x[0]),Rg()(a,"size",w[0]),a),interactive:!1}}(t,i,n,r):null})).filter((function(t){return null!==t}))},jM=function(t,e,n){return n[t]?t:e.CATEGORICAL},BM=function(t){var e=t.axes(),n=t._gridLines,r=t._gridBands;if(n.length||r.length){var i,a=function(t,e){var n=e.fields(),r=e._dependencies.DataStore,i=r.FieldType,a=i.MEASURE,o=i.DIMENSION,c=r.FieldSubtype,u=(c.CONTINUOUS,RM()(c,["CONTINUOUS"])),s={};return["x","y"].forEach((function(e){var i,l=t[e][0].getTickValues(),f=n[e][0].subtype(),h=[{name:"yvalue",type:a},{name:"xvalue",type:a},{name:"yvalue0",type:a},{name:"xvalue0",type:a},{name:"xdim",type:o,subtype:jM(f,c,u)},{name:"ydim",type:o,subtype:jM(f,c,u)}],d=Math.max(l.length);l=f===c.TEMPORAL?l.map((function(t){return t.getTime()})):l;for(var p=(i={},Rg()(i,"".concat(e,"value"),[]),Rg()(i,"".concat(e,"value0"),[]),Rg()(i,"".concat(e,"dim"),[]),i),g=0;g<d;g+=1)p["".concat(e,"value")].push(l[g]),p["".concat(e,"value0")].push(l[g+1]),p["".concat(e,"dim")].push(l[g]);var v=Object.keys(p),y=h.filter((function(t){return v.includes(t.name)}));s[e]=new r({data:Object.values(p),schema:y})})),s}(e,t);(i=[]).concat.apply(i,Gp()(r).concat(Gp()(n))).forEach((function(t){t.data(t.axes().x?a.x:a.y)}))}},zM=[{type:"registerImmediateListener",props:[L_],listener:function(t,e){var n=Ig()(e,2)[1],r=t.fields();if(n&&r){!function(t,e){var n=e._layersMap,r={};for(var i in t.forEach((function(t,e){var n=ks(t.name,"".concat(t.mark,"-").concat(e));r[n]=!0})),n)i in r||(n[i].forEach((function(t){return t.remove()})),delete n[i])}(n,t);var i=t._queuedLayerDefs,a=n;i.forEach((function(t){a=[].concat(Gp()(a),Gp()(t(n)))})),t.addLayer(a);var o=t.layers().some((function(t){return t.hasPlotSpan()}));["x","y"].forEach((function(e){ks(Cs(t.axes(),e),[]).forEach((function(t){t.config({adjustRange:o})}))})),t._lifeCycleManager.notify({client:t.layers(),action:"initialized",formalName:"layer"})}}},{type:"registerImmediateListener",props:[O_],listener:function(t,e){var n=Ig()(e,2)[1];if(n){var r=t.axes(),i={},a={};n.getTemporalFields().forEach((function(t){a[t]=ws(n.getFieldData(t))})),Object.entries(t.fields()).forEach((function(t){var e=Ig()(t,2),n=e[0],o=Ig()(e[1],1)[0];if(o){var c=a["".concat(o)];c&&(i[n]=c,r[n].forEach((function(t){return t.minDiff(c)})))}}));var o=t.firebolt(),c=t.cachedData()[0],u=t.data().getUids();o.createSelectionSet({keys:u}),o.attachPropagationListener(c,o.onDataModelPropagation()),t._timeDiffsByField=a,t._timeDiffs=i}}},{type:"registerImmediateListener",props:[N_],listener:function(t,e){var n=Ig()(e,2)[1];if(n){var r=t.firebolt(),i=n.interaction;if(r.config(i),"fragmented"===i.tooltip.mode){var a=r._behaviourEffectMap,o=function(t){var e=a[t],n=e.find((function(t){return"tooltip"===t.name}));a[t]=e.filter((function(t){return!n||n.name!==t.name})),n&&a[t].push({name:fS})};for(var c in a)o(c)}!function(t){var e=t.config(),n=t.metaInf(),r=t.store(),i=t._timeDiffs;[ek,nk].forEach((function(a){var o,c;a===ek?(o=NM,c=e.gridBands):(o=OM,c=e.gridLines);var u=LM(t,c,a),s="_".concat(a,"Selection");t[s]=Ls(t[s],(function(e){var i=i_.getLayerInstance({mark:o});i.dependencies(t._dependencies);var c=e.definition.name;return i.metaInf({unitRowIndex:n.rowIndex,unitColIndex:n.colIndex,namespace:"".concat(n.namespace).concat(a).concat(c),parentNamespace:n.namespace}).store(r),i}),u,(function(t){return t.definition.name})),t[s].each((function(t,e){var n=e.definition,r=i_.getSerializedConf(o,n),a=e.axes;t.config(r).dataProps({timeDiffs:i}).axes(a)})),t["_".concat(a)]=t[s].getObjects()}))}(t)}}},{type:"registerImmediateListener",props:[O_,H_],listener:function(t,e,n){var r=Ig()(e,2)[1],i=Ig()(n,2)[1];if(r){var o=l_(i,r),c=t.metaInf();t.store().commit("".concat(a.UNIT_LOCAL_NAMESPACE,".").concat(W_),o,c.namespace)}}},{type:"registerImmediateListener",props:[W_,q_],listener:function(t,e,n){var r=Ig()(e,2)[1],i=Ig()(n,2)[1],a=t._layerAxisIndex,o=t.axes(),c=t.data();r&&i&&o&&a&&(t._lifeCycleManager.notify({client:i,action:"beforeupdate",formalName:"layer"}),p_(i,c,r),t._dimensionMeasureMap=s_(i,c,t.retinalFields()),g_(o,i,a),t._lifeCycleManager.notify({client:i,action:"updated",formalName:"layer"}))}}],HM=(PM={},Rg()(PM,ak,{onset:function(t,e){var n=e[0].reduce((function(t,n,r){return t["".concat(n)]=e[1][r],t}),{});t.facetFieldsMap(n)}}),Rg()(PM,"facetFieldsMap",{}),Rg()(PM,ok,{}),Rg()(PM,ck,{}),Rg()(PM,sk,{}),Rg()(PM,"detailFields",{}),Rg()(PM,"axes",{defaultValue:{x:[],y:[]}}),Rg()(PM,"fields",{defaultValue:{x:[],y:[]},sanitization:function(t,e){return Fs({x:[],y:[]},e)}}),Rg()(PM,"metaInf",{}),Rg()(PM,"registry",{}),Rg()(PM,"parentContainerInf",{}),Rg()(PM,"valueParser",{defaultValue:function(t){return t}}),Rg()(PM,"coord",{}),PM),WM=(n(98),{classPrefix:X_,defClassName:"visual-unit",className:"",trackerClassName:"visual-unit-tracker",minOuterRadius:10,gridLines:{defClassName:"axis-grid-lines",className:"",show:!0,color:"#efefef",zeroLineColor:"#b6b6b6"},gridBands:{defClassName:"axis-grid-bands",className:"",show:!1,y:{color:["#fff","#fbfbfb"]},x:{color:["#fff","#f9f9f9"]}},arcLayerClassName:"layer-arc",interaction:{tooltip:{mode:rk}},sideEffectClassName:"side-effect-container"}),VM=(DM={},Rg()(DM,N_,{value:null,meta:{sanitization:function(t,e){return Fs(e||Fs({},WM),t)}}}),Rg()(DM,L_,{value:null,meta:{preset:function(t){return d_(t)}}}),Rg()(DM,H_,{value:null}),Rg()(DM,q_,{value:null}),Rg()(DM,O_,{value:null,meta:{typeCheck:function(t){return t instanceof gt},preset:function(t,e){if(e._cache){var n=e.cachedData();e.cachedData([].concat(Gp()(n),[t]))}else{var r=e.cachedData()[0];r&&r.unsubscribe("propagation"),e.cachedData([t])}}}}),Rg()(DM,W_,{value:null}),Rg()(DM,"width",{value:null}),Rg()(DM,"height",{value:null}),DM);function UM(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=eg()(t);if(e){var i=eg()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Jp()(this,n)}}var GM=function(t){Qp()(n,t);var e=UM(n);function n(){var t;Yp()(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(t=e.call.apply(e,[this].concat(i))).propagate(!1),t}return Kp()(n,null,[{key:"formalName",value:function(){return"selection-highlight"}}]),n}(Nk);function qM(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=eg()(t);if(e){var i=eg()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Jp()(this,n)}}var YM=function(t){Qp()(n,t);var e=qM(n);function n(){var t;Yp()(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(t=e.call.apply(e,[this].concat(i))).propagate(!1),t}return Kp()(n,null,[{key:"formalName",value:function(){return"brush-highlight"}}]),n}(Nk);function XM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function KM(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?XM(Object(n),!0).forEach((function(e){Rg()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):XM(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var $M=[a.UNIT_GLOBAL_NAMESPACE,a.UNIT_LOCAL_NAMESPACE],QM=a.GROUP_GLOBAL_NAMESPACE,ZM=function(){function t(e,n){var r=this;Yp()(this,t),this._id=ts(),this._dependencies=n,this._renderedResolve=null,this._renderedPromise=new Promise((function(t){r._renderedResolve=t})),P_(this),this._lifeCycleManager=n.lifeCycleManager,this._layersMap={},this._gridLinesSelection=null,this._gridBandsSelection=null,this._gridLines=[],this._gridBands=[],this._layerAxisIndex={},this._queuedLayerDefs=[],this._graphics={},i_.setLayerRegistry(e.layerRegistry),Ps(this,this.constructor.getterSetters()),this.registry(e),this.cachedData([])}return Kp()(t,[{key:"store",value:function(){if(arguments.length){var t=this._store=arguments.length<=0?void 0:arguments[0],e=this._dependencies.throwback,n=this.metaInf(),r=n.namespace;return t.addSubNamespace(r,"VisualUnit",this),e.addSubNamespace(r,"VisualUnit",this),pp(this,this.constructor.localOptions(),t,{subNamespace:r,namespace:"".concat(a.UNIT_LOCAL_NAMESPACE)}),this.createFireboltInstance(),this}return this._store}},{key:"createFireboltInstance",value:function(){var t,e=this.registry().interactions,n=this._dependencies.fireboltDeps,r=this.getFireboltCls();return this.firebolt(new r(this,{physical:Object.assign({},e.physicalActions.get(),n.physicalActions),behavioural:Object.assign({},e.behaviours.get(),(t={},Rg()(t,IM.formalName(),IM),Rg()(t,"selection-highlight",GM),Rg()(t,"brush-highlight",YM),t),n.behaviouralActions),physicalBehaviouralMap:this.getActionBehaviourMap()},Object.assign({},e.sideEffects.get(),n.sideEffects),this.getBehaviourEffectMap())),this}},{key:"getFireboltCls",value:function(){return EM}},{key:"getBehaviourEffectMap",value:function(){return pM}},{key:"getActionBehaviourMap",value:function(){return CM}},{key:"firebolt",value:function(){return arguments.length?(this._firebolt=arguments.length<=0?void 0:arguments[0],this):this._firebolt}},{key:"id",value:function(){return this._id}},{key:"lockModel",value:function(){return this.store().lockModel(),this}},{key:"unlockModel",value:function(){return this.store().unlockModel(),this}},{key:"timeDiffsByField",value:function(){return arguments.length?this:this._timeDiffsByField}},{key:"render",value:function(t){this.createRootContainers(t),I_(this),this.renderLayers();var e=this._graphics.rootSvg.node(),n=this.config(),r=n.sideEffectClassName,i=n.classPrefix;return R_(this),this._sideEffectGroup=A_(e,"".concat(i,"-").concat(r)),this.firebolt().mapActionsAndBehaviour(),this}},{key:"createRootContainers",value:function(t){var e=this.config(),n=e.className,r=e.defClassName,i=_s(r,this.id(),e.classPrefix),a=this.width(),o=this.height();this._container=Od(t);var c=Od(t).style("position","relative");this._graphics.rootSvg=Fd(c,"svg",[1],n).attr("class",n).style("left","0px").style("top","0px").style("position","absolute");var u=this._graphics.rootSvg.node();return zd(u,{width:a,height:o,class:i.join(" ")}),this}},{key:"renderLayers",value:function(){var t,e,n,r,i,a,o,c=this.width(),u=this.height(),s=this._graphics.rootSvg.node();return e=s,n=(t=this).config().classPrefix,r=t._gridLines,i=t._gridBands,a={width:t.width(),height:t.height()},o=Fd(e,"g",[1],"".concat(n,"-").concat(Z_)),[[r,"".concat(n,"-").concat($_)],[i,"".concat(n,"-").concat(Q_)]].forEach((function(e){var n=Ig()(e,2),r=n[0],i=n[1],c=Fd(o,"g",[1],".".concat(i)),u="".concat(i,"-group");Fd(c,"g",r,".".concat(u),{update:function(e,n){n.dataProps({timeDiffs:t._timeDiffs}).measurement(a).mount(e.node())}})})),S_(this,s,this.layers(),{width:c,height:u}),this}},{key:"done",value:function(){return this._renderedPromise}},{key:"enableCaching",value:function(){return this._cache=!0,this}},{key:"clearCaching",value:function(){return this._cache=!1,this.cachedData([this.cachedData()[0]]),this}},{key:"getDrawingContext",value:function(){var t=this._graphics.rootSvg&&this._graphics.rootSvg.node(),e=this.width(),n=this.height(),r=this.parentContainerInf(),i=r.el,a=r.dimensions;return{htmlContainer:this.mount(),svgContainer:t,width:e,height:n,sideEffectGroup:this._sideEffectGroup,parentContainer:i,parentContainerDimensions:a,xOffset:0,yOffset:0}}},{key:"serialize",value:function(){return{layers:this.layers().map((function(t){return t.serialize()})),config:this.config(),axes:this.axes().map((function(t){return t.serialize()}))}}},{key:"mount",value:function(){return arguments.length?(this._mount=arguments.length<=0?void 0:arguments[0],this.render(arguments.length<=0?void 0:arguments[0]),this):this._mount}},{key:"addLayer",value:function(t){var e,n=this;if(t instanceof Function)return this._queuedLayerDefs.push(t),this;var r=d_(sl(t)),i=this._layersMap,a={},o={layers:{},components:{unit:this}},c=0,u=this.metaInf(),s=r.sort((function(t,e){return t.order-e.order})).reduce((function(t,e){var r,s=e.def,l=s.name,f=sl(s),h=[];f.forEach((function(t){t.order=e.order+c;var n="".concat(u.namespace,"-").concat(t.mark,"-").concat(ts());h.push(n)})),c+=f.length;var d=f_(n,s,i[l],h);o.layers=Object.assign(o.layers,d);var p=Object.values(d);return t=(r=t).concat.apply(r,Gp()(p)),i[l]=p,a[l]=l,t}),[]);o.unit=this;var l={},f=(e=[]).concat.apply(e,Gp()(Object.values(this._layersMap)));return f.forEach((function(t){var e=t.alias();o.layers[e]=t,l[e]=[]})),s.forEach((function(t){var e=h_(t,o);l[t.alias()]=e})),this._layerDepOrder=l,this._layerAxisIndex=Object.assign(this._layerAxisIndex,__(s,this.fields())),this.layers(f),s}},{key:"remove",value:function(){var t=this.constructor.formalName(),e=this._dependencies,n=e.lifeCycleManager,r=e.throwback,i=this.metaInf().namespace;n.notify({client:this,action:"beforeremove",formalName:"unit"});var a=this.layers();return this.store().removeSubNamespace(i,t),r.removeSubNamespace(i,"VisualUnit"),Od(this.mount()).remove(),this.firebolt().remove(),n.notify({client:a,action:"beforeremove",formalName:"layer"}),[].concat(Gp()(a),Gp()(this._gridLines),Gp()(this._gridBands)).forEach((function(t){return t.remove()})),n.notify({client:a,action:"removed",formalName:"layer"}),n.notify({client:this,action:"removed",formalName:"unit"}),this}},{key:"resetData",value:function(){return this.data(this.cachedData()[0]),this}},{key:"getSourceInfo",value:function(){return{dimensionMeasureMap:this._dimensionMeasureMap,fields:this.fields(),data:this.data(),axes:this.axes(),retinalFields:this.retinalFields(),layers:this.layers(),timeDiffs:this.timeDiffsByField()}}},{key:"dataDomain",value:function(){var t=this.metaInf(),e=t.namespace,n=this.store(),r="".concat(a.UNIT_GLOBAL_NAMESPACE,".").concat(y.DOMAIN);if(arguments.length){var i=arguments.length<=0?void 0:arguments[0];n.commit(r,i,e)}return n.get(r,e)}},{key:"getDefaultTargetContainer",value:function(){var t=this.config(),e=t.classPrefix,n=t.defClassName,r=t.sideEffectClassName;return this._graphics.tracker?[".".concat(e,"-tracker-group"),".".concat(e,"-").concat(r)]:[".".concat(e,"-").concat(n)]}},{key:"getLayersByType",value:function(t){return E_(this.layers(),"type",t)}},{key:"getLayerByName",value:function(t){return E_(this.layers(),"name",t)[0]}},{key:"getNearestPoint",value:function(t,e,n){var r=ks(n.getAllPoints,!1),i=ks(n.detectEmptyArea,!1),a=M_(this,{x:t,y:e}),o=this.getMarkInfFromLayers(t,e,KM(KM({},n),{},{dimValue:a}))||{id:null};if(!r)return{id:o.id,target:o.id};var c=Object.assign({},o);return i&&a?(c.id=a,o.id&&1===o.id[0].length&&(o.id[1][0]=a[1][0]),c.target=o.id):o.id?(c.id=a||o.id,c.target=o.id):c.id=c.target=null,c}},{key:"getMarkInfFromLayers",value:function(t,e,n){for(var r=this.layers(),i=null,a=0,o=r.length;a<o;a++){var c=r[a];if(!1!==c.config().interactive&&(i=c.getNearestPoint(t,e,n)),i)return i}return i}},{key:"getPlotPointsFromIdentifiers",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=[];if(null===t)return[];for(var r=this.layers(),i=0,a=r.length;i<a;i++){var o=r[i];!1!==o.config().interactive&&(n=[].concat(Gp()(n),Gp()(o.getPointsFromIdentifiers(t,e))))}return n}},{key:"removeLayerByName",value:function(t){return C_("name",t),this}},{key:"removeLayersByType",value:function(t){return C_("type",t),this}},{key:"calculateDomainFromData",value:function(){return k_(this.layers(),this.fields(),this._layerAxisIndex,this.data())}},{key:"getRangeFromIdentifiers",value:function(t){var e=t.criteria;return t.fields.reduce((function(t,n){return t[n]=e[n],t}),{})}},{key:"getRangeFromPositions",value:function(t){var e=t.startPos,n=t.endPos,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=gt.FieldType,a=i.MEASURE,o=i.DIMENSION,c=this.fields(),u=c.x,s=c.y,l=this.axes(),f=u[0],h=s[0],d=u[0].type(),p=s[0].type(),g=this.data().getDimensions(),v=r.brush;if("x"===v){var y=l.x[0].invertExtent(e.x,n.x).sort((function(t,e){return t-e}));y="temporal"===f.subtype()?y.map((function(t){return t.getTime()})):y;var m=f.getMembers(),b={};return m.forEach((function(t){b[t]=y})),{range:b}}if("y"===v){var x=l.y[0].invertExtent(e.y,n.y).sort((function(t,e){return t-e})),w=h.getMembers(),_={};return w.forEach((function(t){_[t]=x})),{range:_}}if(d===a&&p===a){var k={x:l.x[0].invertExtent(e.x,n.x).sort((function(t,e){return t-e})),y:l.y[0].invertExtent(e.y,n.y).sort((function(t,e){return t-e}))},S={};if("".concat(f)==="".concat(h)){var M=k.x,E=k.y,C=M[0]>E[0]?E:M,A=C===E?M:E;C[1]<A[0]?S[f]=[]:S[f]=[A[0],C[1]<A[1]?C[1]:A[1]]}else{var P=f.getMembers();P.forEach((function(t){S[t]=k.x}));var D=h.getMembers();D.forEach((function(t){S[t]=k.y}))}return{range:S}}if(d===o||p===o){var I=this._rtree.search({minX:e.x,minY:e.y,maxX:n.x,maxY:n.y}),T=[[]];return g.forEach((function(t){T[0].push("".concat(t))})),I.forEach((function(t){var e=t.data,n=[];g.forEach((function(t){n.push(e[t])})),T.push(n)})),{dimensions:T}}return null}},{key:"isSortedDomain",value:function(){return this.layers().some((function(t){return t.isSortedDomain()}))}}],[{key:"formalName",value:function(){return"VisualUnit"}},{key:"getState",value:function(){return[{domain:null},Object.keys(this.localOptions()).reduce((function(t,e){return t[e]=VM[e].value,t}),{})]}},{key:"getterSetters",value:function(){return HM}},{key:"localOptions",value:function(){return VM}},{key:"getQualifiedStateProps",value:function(){return t.getState().map((function(t,e){return Object.keys(t).map((function(t){return"".concat($M[e],".").concat(t)}))}))}},{key:"getListeners",value:function(){return{store:[].concat(Gp()(zM.map((function(t){var e=Object.assign({},t),n=$M[1];return e.props=e.props.map((function(t){return"".concat(n,".").concat(t)})),e}))),[{type:"registerImmediateListener",props:["".concat(a.LAYER_GLOBAL_NAMESPACE,".domain")],listener:function(t){var e=t.calculateDomainFromData();t.dataDomain(e)}},{type:"registerImmediateListener",props:["".concat($M[1],".").concat(j_),"".concat($M[1],".").concat(B_)].concat(Gp()(["x","y"].map((function(t){return"".concat(QM,".domain.").concat(t)})))),listener:function(t,e,n){var r=Ig()(e,2)[1],i=Ig()(n,2)[1];r&&i&&BM(t)},subNamespace:function(t){var e,n=t.metaInf(),r=n.rowIndex,i=n.colIndex,a=n.namespace;return e={},Rg()(e,"".concat($M[1],".").concat(j_),a),Rg()(e,"".concat($M[1],".").concat(B_),a),Rg()(e,"".concat(QM,".domain.x"),"".concat(i,"0")),Rg()(e,"".concat(QM,".domain.y"),"".concat(r,"0")),e}}]),throwback:[{type:"registerChangeListener",props:[ct.ON_LAYER_DRAW],listener:function(t,e){Ig()(e,2)[1]&&(t._rtree=T_(t)),t._renderedResolve(),t._lifeCycleManager.notify({client:t.layers(),action:"drawn",formalName:"layer"})}}]}}},{key:"create",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Pg()(this,e)}}]),t}(),JM=function(){function t(){Yp()(this,t)}return Kp()(t,[{key:"type",value:function(){throw new Error(Os.INTERFACE_IMPL)}},{key:"toString",value:function(){throw new Error(Os.INTERFACE_IMPL)}}]),t}();function tE(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=eg()(t);if(e){var i=eg()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Jp()(this,n)}}var eE=function(t){Qp()(n,t);var e=tE(n);function n(){var t;Yp()(this,n),t=e.call(this);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t.vars(i),t}return Kp()(n,[{key:"vars",value:function(){return arguments.length?(this._vars=arguments.length<=0?void 0:arguments[0],this):this._vars}},{key:"data",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.length?(this.vars().forEach((function(t){return t.data(e[0])})),this._data=e[0],this):this._data}},{key:"getMembers",value:function(){return this.vars().map((function(t){return t.getMembers()[0]}))}},{key:"type",value:function(){return this.vars()[0].type()}},{key:"toString",value:function(){return this.vars().map((function(t){return t.toString()})).join(",")}},{key:"numberFormat",value:function(){return this.vars()[0].numberFormat()}},{key:"format",value:function(t){return this.vars()[0].format(t)}},{key:"getSchemaDef",value:function(){return this.data().getField(this.vars()[0]).getSchema()}},{key:"subtype",value:function(){return this.vars()[0].subtype()}},{key:"getMinDiff",value:function(){return this.vars()[0].getMinDiff()}},{key:"displayName",value:function(){return this.vars().map((function(t){return t.displayName()})).join(",")}}]),n}(JM);function nE(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=eg()(t);if(e){var i=eg()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Jp()(this,n)}}var rE=function(t){Qp()(n,t);var e=nE(n);function n(t){var r;return Yp()(this,n),(r=e.call(this)).oneVar(t),r}return Kp()(n,[{key:"oneVar",value:function(){return arguments.length?(this._oneVar=arguments.length<=0?void 0:arguments[0],this):this._oneVar}},{key:"data",value:function(){return arguments.length?(this._data=arguments.length<=0?void 0:arguments[0],this):this._data}},{key:"toString",value:function(){return this.oneVar()}},{key:"numberFormat",value:function(){return"measure"===this.type()?this.data().getField(this.oneVar()).schema().format:function(t){return t}}},{key:"format",value:function(t){var e=gt.FieldSubtype,n=gt.DateTimeFormatter;if(t&&this.subtype()===e.TEMPORAL){var r=new n(this.data().getField(this.oneVar()).schema().format);t=t.map((function(t){return r.getNativeDate(t)}))}return t}},{key:"rawFormat",value:function(){var t=gt.FieldSubtype,e=gt.DateTimeFormatter;if(this.subtype()===t.TEMPORAL){var n=this.data().getField(this.oneVar()).schema().format;return function(t){return e.formatAs(t,n)}}return function(t){return t}}},{key:"getMembers",value:function(){return[this.oneVar()]}},{key:"type",value:function(){return this.data().getField(this.oneVar()).type()}},{key:"subtype",value:function(){var t=this.data().getField(this.oneVar());return t.subtype()||t.type()}},{key:"getMinDiff",value:function(){return this.data().getFieldspace().fieldsObj()[this.oneVar()].minimumConsecutiveDifference()}},{key:"equals",value:function(t){return this.oneVar()===t.oneVar()}},{key:"displayName",value:function(){return Al(this.data(),this.oneVar())}},{key:"getSchemaDef",value:function(){return this.data().getField(this.oneVar()).schema()}}]),n}(JM),iE=function(t,e){var n=[];return e&&e.forEach((function(e){e instanceof eE?(n.push(e),e.data(t)):n.push(new rE(e).data(t))})),n},aE=function(t,e){var n=[um,sm].map((function(n){var r=function(t,e){var n=[],r=t[e];return r[0]instanceof Array?(n[0]=r[0]||[],n[1]=r[1]||[]):n[0]=r,n}(e,n),i=[iE(t,r[0])];return r[1]&&(i[1]=iE(t,r[1])),function(t,e){var n=[[],[]],r=[[],[]],i=[[],[]],a=[[],[]];t.forEach((function(t,e){t.forEach((function(t){t.type()===tm?(n[e].push(t),t.subtype()===Um?i[e].push(t):a[e].push(t)):r[e].push(t)}))}));var o=r[0].length+(r[1]?r[1].length:0);if(!t[1]&&(r[1]=e===sm?r[0]:[],r[0]=e!==sm?r[0]:[],n[1]=[],n[0]=n[0],0===o)){var c=[].concat(Gp()(n[0]),Gp()(n[1]));e===sm?(n[1]=c[c.length-1]?[c[c.length-1]]:[],c.splice(-1,1)):n[1]=[],n[0]=Gp()(c)}return n[0].length&&n[1].length&&o>0&&(n[0]=[].concat(Gp()(n[0]),Gp()(n[1])),n[1]=[]),{fields:n.map((function(t,e){return 1===e?r[e].concat(n[e]):n[e].concat(r[e])})),dimensions:[].concat(Gp()(n[0]),Gp()(n[1])),measures:[].concat(Gp()(r[0]),Gp()(r[1])),temporal:[].concat(Gp()(i[0]),Gp()(i[1])),categorical:[].concat(Gp()(a[0]),Gp()(a[1]))}}(i,n)})),r=Ig()(n,2),i=r[0],a=r[1],o=i.fields,c=i.dimensions,u=i.measures,s=i.temporal,l=i.categorical,f=a.fields,h=a.dimensions,d=a.measures;return{rows:o,rowDimensions:c,rowMeasures:u,rowTemporalFields:s,rowCategoricalFields:l,columns:f,columnTemporalFields:a.temporal,columnCategoricalFields:a.categorical,columnDimensions:h,columnMeasures:d}},oE=n(34),cE=n.n(oE),uE={default:2,facet:1},sE=function(t,e){if(e)for(var n=0;n<t.length;n++)0!==n?t[n].config({externalClassname:["".concat(ab)]}):t[n].config({externalClassname:["".concat(ob,"-").concat(_m),"".concat(ab)]});else for(var r=0;r<t.length;r++)for(var i=0;i<t[0].length;i++)t[r][i].config({externalClassname:["".concat(ab)]})},lE=function(t,e,n){for(var r,i=e==="".concat(km)?"".concat(ab):"".concat(cb),a=t.length,o=t[0][0].source(),c=t[t.length-1][0].source(),u={},s=0;s<t.length;s++){for(var l=0;l<t[0].length;l++)t[s][l].config({externalClassname:[i]});t[s][0].source()!==o&&(u[s]=s,o=t[s][0].source())}for(var f=0;f<t.length;f++)for(var h=0;h<t[0].length;h++)0===h?(t[f][0].config().externalClassname.push("".concat(ob,"-").concat(e)),t[f][h].source()===c?t[f][h].config().externalClassname.push("".concat(ub,"-").concat(Mm)):t[f][0].config().externalClassname.push("".concat(ab,"-").concat(Mm)),t[f][h]instanceof n&&(t[f][h].config().externalClassname.push("".concat(ob,"-").concat(Sm)),t[f][h].config().externalClassname.push("".concat(ob,"-").concat(Mm)))):h!==t[f].length-1&&t[f][h].config().externalClassname.push("".concat(ab,"-").concat(e)),0===f?t[0][h].config().externalClassname.push("".concat(ub,"-").concat(Sm)):f===a-1&&t[f][h].config().externalClassname.push("".concat(ub,"-").concat(Mm)),u[f]&&t[f-1][h].config().externalClassname.push("".concat(ab,"-").concat(Mm)),t[f][h]instanceof n&&((r=t[f][h]).config().externalClassname.push("".concat(ob,"-").concat(_m)),r.config().externalClassname.push("".concat(ob,"-").concat(km)));return u},fE=void 0,hE=ut.POLAR,dE=function(){return new dp(Rg()({},0,0))},pE=function(t){return[].concat(Gp()(t[0]),Gp()(t[1])).reduce((function(t,e){var n=e.type();return n!==em&&n!==Um||(t=!0),t}),!1)},gE=function(){return{cellMap:new Map,xAxesMap:new Map,yAxesMap:new Map,entryCellMap:new Map,exitCellMap:new Map}},vE=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return"".concat(t,"-axis-").concat(n.join("-"))},yE=function(t,e){return"cell-".concat(t,"-").concat(e)},mE=function(t){var e={};return[Qm,Zm,Jm].forEach((function(n){void 0!==t[n]&&(e[n]=t[n])})),e},bE=function(t){return Object.keys(t).some((function(e){return t[e].length>0}))},xE=function(t,e,n){var r="";if(e===n-1&&t.length>n){for(var i=e;i<t.length-1;i++)r+="".concat(t[i].toString()," / ");return r+=t[t.length-1].toString()}return t[e]?t[e].toString():""},wE=function(t,e,n,r){var i=r.classPrefix,a=r.labelManager,o=r.sanitizeCheck,c=t.length>0?t[0].map((function(r,o){return new n({type:tb,className:"".concat(i,"-grid-headers")},{labelManager:a}).source(xE(e,o,t[0].length)).config({show:r.config().show})})):[];return o&&sE(c,!0),c},_E=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.isBorderPresent,n=["color","showRowBorders","showColBorders","showValueBorders"];return!e||n.every((function(t){return!e[t]}))},kE=function(t,e){var n=null;return[pm,vm,gm].forEach((function(e){fE.store.get(e)&&t===fE.store.get(e)[0]&&(n=e)})),n?{channel:n}:([hm,fm].forEach((function(r){e["".concat(r,"Facets")].forEach((function(e){e.toString()===t&&(n={channel:eb,type:r===fm?dm:hm})}))})),n||([hm,fm].forEach((function(r){e["".concat(r,"Projections")].forEach((function(e){e.forEach((function(e){e.toString()===t&&(n=r===fm?Uy:Gy)}))}))})),n?{channel:n}:null))},SE=function(t,e){var n=xm;return t.isDimension(e)||(n=wm),n},ME=function(t,e){return t.getDomain(e)},EE=function(t,e){var n=null,r=null,i=t.xAxesMap,a=t.yAxesMap,o=e.x,c=e.y;return o&&o.forEach((function(t){var e=i.get(t);(n=n||[]).push(e)})),c&&c.forEach((function(t){var e=a.get(t);(r=r||[]).push(e)})),{xAxes:n,yAxes:r}},CE=function(t){var e=new mC;return t.length&&(e=t.some((function(t){return function(t){return t.mark===Wm||[Bm,zm].some((function(e){return Cs(t.encoding,e)}))}(t)}))?new MC:e),e},AE=function(t,e,n){var r=n[t],i="",a=t===hm?[_m,km]:[Mm,Sm],o=Ig()(e,2),c=o[0],u=o[1],s=function(t){return c.length?c[t].type():null},l=function(t){return u.length?u[t].type():null};return s(c.length-1)===tm&&l(0)===tm?(i=r?a[1-a.indexOf(r)]:a[1],r=t===dm&&c[c.length-1].toString()===u[0].toString()?Sm:r||a[0]):l(u.length-1)===tm?(i=t===hm?km:Mm,r=t===hm?km:Mm):(i=t===hm?_m:Sm,r=t===hm?_m:Sm),s(c.length-1)===em&&l(0)===em?r=t===hm?_m:Sm:l(0)===em?r=t===hm?km:Mm:s(c.length-1)===em&&(r=t===hm?_m:Sm),[i,r]},PE=function(t,e,n){var r=e.fields,i=e.type,a=n.simpleEncoder.getFacetsAndProjections(r,i),o=a.facets,c=a.projections;return t.facets(Rg()({},"".concat(i,"Facets"),o)),t.projections(Rg()({},"".concat(i,"Projections"),c)),{facets:o,projections:c,fields:r}},DE=function(t,e){var n,r,i={top:!1,bottom:!1,left:!1,right:!1},a={top:!1,bottom:!1,left:!1,right:!1},o={top:!1,bottom:!1,left:!1,right:!1},c=t.rows,u=t.columns,s=t.values,l=Ig()(c,2),f=l[0],h=l[1],d=Ig()(u,2),p=d[0],g=d[1],v=e.fieldInfo(),y=v.rowDimensions,m=v.columnDimensions,b=v.rowTemporalFields,x=v.columnTemporalFields,w=v.columnMeasures,_=v.rowMeasures,k=y.length+m.length,S=_.length+w.length,M=b.length+x.length;if(e.constructor.type()===hE){if(!k)return{showRowBorders:i,showColBorders:a,showValueBorders:o}}else if(!S&&!M&&k<=2)return{showRowBorders:i,showColBorders:a,showValueBorders:o};return n=h,r={top:!1,bottom:!1,left:!1,right:!1},(f.length>1||n.length>1)&&(r.top=!0,r.bottom=!0,r.left=!0,r.right=!0),i=r,a=function(t,e){var n={top:!1,bottom:!1,left:!1,right:!1};return(t.length||e.length)&&(t[0]&&t[0].length>1||e[0]&&e[0].length>1)&&(n.top=!0,n.bottom=!0,n.left=!0,n.right=!0),n}(p,g),o=function(t,e){var n={top:!0,left:!0,bottom:!0,right:!0},r=[_m,km],i=[Sm,Mm];return t.forEach((function(t,e){t[0]&&t[0].length?n[r[e]]=!0:n[r[e]]=!1})),e.forEach((function(t,e){t.length?n[i[e]]=!0:n[i[e]]=!1})),n}([f,h],[p,g]),s.length>1&&(o.top=!0,o.bottom=!0),s.length&&s[0].length>1&&(o.left=!0,o.right=!0),{showRowBorders:i,showColBorders:a,showValueBorders:o}},IE=function(t){var e,n=t.map((function(t){return t.encoding||{}})),r=(e=[]).concat.apply(e,Gp()(n.map((function(t){return Object.values(t).map((function(t){return"object"===cE()(t)?t.field:t}))}))));return Gp()(new Set(r.filter((function(t){return t}))))},TE=function(t,e){var n,r=Object.values(t).map((function(t){var e,n,r=(e=[]).concat.apply(e,Gp()(t));return(n=[]).concat.apply(n,Gp()(r.map((function(t){return t instanceof JM?t.getMembers():t}))))}));return Gp()(new Set((n=[]).concat.apply(n,Gp()(r).concat(Gp()(e)))))},RE=function(t,e,n,r){var i=r.DataStore,a=[],o=[],c=n.sort,u=[];if(t.forEach((function(t,n){var r="".concat(t),i=c[r];i?o.push([r,i]):o.push([r,null]),a.push(t.getSchemaDef()),u.push(e.map((function(t){return t[n]})))})),!u.length)return[];var s=new i({data:u,schema:a}).sort(o),l=s.getData({excludeFields:[ot.ROW_ID]}).data;return s.dispose(),l},NE=function(t){var e,n=t.cacheMaps().exitCellMap,r=t.store(),i=(e=[]).concat.apply(e,Gp()(ZM.getQualifiedStateProps()).concat(Gp()(xx.getQualifiedStateProps())));r.lockCommits(i),n.forEach((function(t){t.remove()})),r.unlockCommits(i)},OE={layers:{},data:{},globalConfig:{}},FE=function(){function t(){Yp()(this,t),Ps(this,OE)}return Kp()(t,[{key:"createAxis",value:function(){throw new Error(Os.INTERFACE_IMPL)}},{key:"setCommonDomain",value:function(){throw new Error(Os.INTERFACE_IMPL)}},{key:"getLayerConfig",value:function(){throw new Error(Os.INTERFACE_IMPL)}},{key:"fieldInfo",value:function(){return arguments.length?(this._fieldInfo=Fs(this._fieldInfo||{},arguments.length<=0?void 0:arguments[0]),this):this._fieldInfo}},{key:"fieldSanitizer",value:function(t,e){return this.fieldInfo(aE(t,e)),this.fieldInfo()}},{key:"axisFrom",value:function(){return arguments.length?(this._axisFrom=arguments.length<=0?void 0:arguments[0],this):this._axisFrom}},{key:"headerFrom",value:function(){return arguments.length?(this._headerFrom=arguments.length<=0?void 0:arguments[0],this):this.__headerFrom}},{key:"setAxisAndHeaders",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0,n=AE(hm,e.rows,t),r=Ig()(n,2),i=r[0],a=r[1],o=AE(dm,e.columns,t),c=Ig()(o,2),u=c[0],s=c[1];return this.axisFrom({row:a,column:s}),this.headerFrom({row:i,column:u}),this}},{key:"getProjectionFields",value:function(t){return IE(t)}},{key:"hasMandatoryFields",value:function(t){return bE(t)}}]),t}(),LE={linear:iy,band:oy,temporal:ly,size:Oy,color:Iy,shape:By};function jE(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function BE(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?jE(Object(n),!0).forEach((function(e){Rg()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):jE(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var zE,HE=function(t){return t.reduce((function(t,e){return t=[].concat(Gp()(t),Gp()(e.getMembers()))}),[])},WE=function(t,e,n,r,i){var a=[];e.forEach((function(e){var n=t.getValueAtIndex(e,0);a.push(n)}));var o=a.join(",");return void 0===n[o]&&(n[o]=i++,r.push(a)),a},VE=function(t){return t.map((function(t){return{keyArr:t,joinedKey:t.join(",")}}))},UE=function(t,e){var n=[];return t.forEach((function(t,r){n[r]=[],t.forEach((function(t,i){n[r][i]=e[i](t)}))})),n},GE=function(t,e){var n={},r=e.rowFacets,i=e.colFacets,a=t.rowKeyArr,o=t.rowKey,c=t.colKeyObj,u=t.newRowIndex,s=t.splitModelsHashMap,l=t.currentColumnIndex,f=t.parentDm,h=c.keyArr,d=c.joinedKey,p=s["".concat(o,"-").concat(d)];p?n.dataModel=p:n={dataModel:f.createEmptyDm()};var g=function(t,e){var n=t.matrix,r=t.dataModel,i=t.rowIndex,a=t.colIndex,o=t.facetInfo,c=t.projectionInfo,u=t.geomCellCreator,s=c.indices,l=c.uniqueFields,f=c.projections,h=e;r.splitByColumn(l,h).forEach((function(t,e){var r=s[e],c=r.rowIndex,l=r.colIndex;l+=a,n[c+=i]=n[c]||[];var h={indices:{rowIndex:c,columnIndex:l},projections:f[e]};n[c][l]=u(t,h,o)}));var d=s[s.length-1];return{rowIndex:d.rowIndex+i,colIndex:d.colIndex+a}}(n=BE(BE(BE({},n),t),{},{facetInfo:{rowFacets:[r,a],colFacets:[i,h]},rowIndex:u,colIndex:l}),e.optionalProjections);return{columnIndex:g.colIndex+1,rowIndex:g.rowIndex}},qE=function(t,e,n,r){var i=r.globalConfig,a=r.globalDeps,o=0,c=[],u=e.rowFacets,s=e.colFacets,l=function(t){var e=t.colProjections,n=t.rowProjections,r=[],i=[],a=[];return n.forEach((function(t,n){var o=n;e.forEach((function(e,n){var c=n,u=HE(t),s=HE(e);r.push([].concat(Gp()(u),Gp()(s))),i.push({rowIndex:o,colIndex:c}),a.push({rowFields:t,columnFields:e})}))})),i=i.length?i:[{rowIndex:0,colIndex:0}],a=a.length?a:[{rowFields:[],columnFields:[]}],{uniqueFields:r,indices:i,projections:a}}(e),f=function(t){var e=t.rowFacets,n=t.colFacets,r=HE(e),i=HE(n);return{rowFacetNames:r,colFacetNames:i,allFacets:[].concat(Gp()(r),Gp()(i)),rowFacets:e,colFacets:n}}(e),h=function(t,e,n,r){var i=e.rowFacetNames,a=e.colFacetNames,o=e.rowFacets,c=e.colFacets,u={},s={},l=[],f=[],h={};return t.forEach((function(t){var e=WE(t,i,u,l,0),n=WE(t,a,s,f,1);h["".concat(e,"-").concat(n)]=t})),{splitModelsHashMap:h,rowKeys:VE(RE(o,l,n,r)),colKeys:VE(RE(c,f,n,r))}}(f.allFacets.length?t.splitByRow(f.allFacets):[t],f,i,a),d=h.splitModelsHashMap,p=h.rowKeys,g=h.colKeys,v=function(t,e,n){var r={};if(n&&(t.allFacets.length||e.indices.length>1)){var i=n.facetsUserConfig,a=void 0===i?{}:i,o=n.border,c=a.isBorderPresent,u=void 0===c?{}:c,s=a.isGridLinePresent,l=void 0===s?{}:s,f=Object.keys(l).length,h=o.width,d=o.color,p=o.style,g=o.showValueBorders,v=o.showRowBorders,y=o.showColBorders,m={},b={};0!==Object.keys(u).length&&u.width?Object.assign(b,h?{width:h}:null,d?{color:d}:null,g?{showValueBorders:g}:null,v?{showRowBorders:v}:null,y?{showColBorders:y}:null,p?{style:p}:null):b={width:uE[eb]},f<=0&&(m={x:{show:!1}}),r={border:b,gridLines:m}}return r}(f,l,i);i=Fs(i,v);var y={matrix:c,geomCellCreator:n,projectionInfo:l,splitModelsHashMap:d,colKeys:g,parentDm:t};if(p.length)p.forEach((function(t){var n=function(t,e){var n=0,r=0,i=t.colKeys,a=t.rowKeyObj,o=t.currentRowIndex,c=o,u=a.keyArr,s=a.joinedKey,l=BE(BE({},t),{},{rowKeyArr:u,rowKey:s,newRowIndex:c});if(r=o,i.length)i.forEach((function(t){l.colKeyObj=t,l.currentColumnIndex=n;var i=GE(l,e),a=i.columnIndex,o=i.rowIndex;n=a,r=o}));else{l.colKeyObj={keyArr:[],joinedKey:""},l.currentColumnIndex=n;var f=GE(l,e),h=f.columnIndex,d=f.rowIndex;n=h,r=d}return{rowIndex:++r}}(BE(BE({},y),{},{rowKeyObj:t,currentRowIndex:o}),e).rowIndex;o=n}));else if(g.length){var m=0,b=o;g.forEach((function(t){var n=BE(BE({},y),{},{rowKeyArr:[],rowKey:"",colKeyObj:t,newRowIndex:b,currentColumnIndex:m}),r=GE(n,e),i=r.columnIndex,a=r.rowIndex;o=a,m=i}))}else{var x=0,w=o,_=BE(BE({},y),{},{rowKeyArr:[],rowKey:"",colKeyObj:{keyArr:[],joinedKey:""},newRowIndex:w,currentColumnIndex:x}),k=GE(_,e),S=k.columnIndex,M=k.rowIndex;o=M,x=S}var E=UE(g.map((function(t){return t.keyArr})),s.map((function(t){return t.rawFormat()})));return{matrix:c,rowKeys:UE(p.map((function(t){return t.keyArr})),u.map((function(t){return t.rawFormat()}))),columnKeys:E.length>0?E[0].map((function(t,e){return E.map((function(t){return t[e]}))})):E}},YE=function(t,e,n,r){var i=n.projections,a=n.indices,o=i.rowFields,c=i.columnFields,u=a.rowIndex,s=a.columnIndex,l=t.suppliedLayers,f=t.cell,h=t.resolver,d=t.config,p=t.encoder,g=t.detailFields,v=h.axes(),y=h.cacheMaps(),m=h.matrixLayers(),b=h.dependencies().smartlabel,x=h.horizontalAxis(),w=h.verticalAxis(),_=h.datamodelTransform(),k=y.entryCellMap,S=y.exitCellMap,M=p.getLayerConfig({columnFields:c,rowFields:o},l||[],t.retinalConfig,t.config),E={config:d,labelManager:b,axes:v,cacheMaps:y};n.normalizedColumns=w.fields,n.normalizedRows=x.fields;var C=[[].concat(Gp()(r.rowFacets[0]),Gp()(r.colFacets[0])),[].concat(Gp()(r.rowFacets[1]),Gp()(r.colFacets[1]))],A=C.slice();A[0]=A[0].map((function(t){return t.oneVar()})),m[u]=m[u]?m[u]:[],m[u][s]=M;var P=yE(u,s),D={y:o,x:c},I=S.has(P)?S.get(P):new f;return I.data(e).fields(D).transform(_).detailFields(g).facetByFields(C),p.createAxis(E,n,Object.assign({},t,{geomCell:I,facetFields:A})),k.set(P,I),S.delete(P),function(t,e,n){[hm,fm].forEach((function(r){var i=t["".concat(r,"Cells")](),a=e["".concat(r,"Facets")][1].join();!i[a]&&(i[a]=[]),i[a].push(n),t["".concat(r,"Cells")](i)}))}(h,r,I),k.get(P)},XE=function(t){return Cs(t.match(/^[0-9]*?(?=-)/g),0)},KE=function(t,e,n,r){return Ls(t,(function(t){return t}),e,(function(t,e){return e+t.reduce((function(t,e){var r=e.id+n;return"".concat(t,"-").concat(r)}),"")})).map((function(t,e){if(e&&e[n]){var i=e[n],a=i.config(),o=a.orientation,c=a.show;return(new r.AxisCell).source(i).config({isOffset:o===s.LEFT||o===s.TOP,show:c})}return(new r.BlankCell).config({show:!1})})).sort((function(t,e){return XE(t[0])-XE(e[0])}))},$E=function(t){return t.split("-").pop()},QE=function(t,e,n,r){var i=t.axis,a=t.keys,o=t.type,c=t.facet,u=i.length/a.length,s=a.length?i.map((function(t,e){return a[Math.floor(e/u)]})):[];return Ls(e["".concat(o,"Headers")],(function(t){return t}),s,(function(t,e){return"".concat(t.join(","),"-").concat(e)})).sort((function(t,e){return $E(t[0])-$E(e[0])})).map((function(t,e){var i=function(t,e,n,r){return Ls(t,(function(t){var e=new n.TextCell({},{labelManager:r});return e.source(t),e}),e,(function(t,e){return t+e}))}(null,e,n,r);return i=i.map((function(t,e){return t.source(e).config(c)}))}))},ZE=function(t,e,n){var r,i=t.matrices,a=t.fields,o=t.facetsAndProjections,c=t.selection,u=t.facet,s=t.encoders,l=t.resolver,f=a.rows,h=a.columns,d=i.valuesMatrix,p=o.rowProjections,g=o.colProjections,v=d.rowKeys,y=d.columnKeys,m=s.simpleEncoder._axisFrom,b=s.simpleEncoder._headerFrom;r=c||{},["pie",Uy,Gy].forEach((function(n){var i=n===Uy?m.column:m.row;r=function(t,e,n){var r=t.matrices.axesMatrix;return function(t,i){var a=r["".concat(t)];if(a&&a.length)if(t===Uy||t===Gy){var o=t===Gy?um:sm;[Xm,Km].forEach((function(t,r){var c="".concat(o).concat(t),u=r,s=a;i!==km&&i!==Mm||(u=1-u),Cs(a,0,u)||(s=[]),e[c]=KE(e[c],s,u,n)}))}else e.rowsPrimary=KE(e.rowPrime,a.map((function(){return[]})),0,n),e.rowsSecondary=KE(e.rowSec,a.map((function(){return[]})),0,n),e.columnsPrimary=KE(e.colPrime,a[0],0,n),e.columnsSecondary=KE(e.colSec,a[0],0,n);return e}}(t,r,e)(n,i)}));var x=r,w=x.rowsPrimary,_=x.rowsSecondary,k=x.columnsPrimary,S=x.columnsSecondary,M=w&&w.getObjects().length?w.getObjects():_&&_.getObjects().length?_.getObjects():[],E=k&&k.getObjects().length?k.getObjects():S&&S.getObjects().length?S.getObjects():[];return[{type:_m,section:f[0],axis:M,headerFrom:b.row},{type:km,section:f[1],axis:M,headerFrom:b.row},{type:Sm,section:h[0],axis:E,headerFrom:b.column},{type:Mm,section:h[1],axis:E,headerFrom:b.column}].forEach((function(t,i){var a,o,c=t.type,s=t.section,f=t.axis,h=t.headerFrom;if(i<2?(a=v,o=p.length>0?p.length:1):(a=y,o=g.length>0?g.length:1),a=a.map((function(t){return t.map((function(t){return l.valueParser()(t)}))})),s.length&&h===c&&f&&a.length){var d={axis:f,length:o,type:c},m=[];i<2?(d.keys=a,d.facet=u.rows,m=QE(d,r,e,n)):(d.facet=u.columns,d.keys=a[0].map((function(t,e){return a.map((function(t){return t[e]}))})),m=QE(d,r,e,n)),r["".concat(c,"Headers")]=m}else r["".concat(c,"Headers")]=null})),r},JE=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return t.reduce((function(t,e){return[].concat(Gp()(t),Gp()(e.reduce((function(t,e){return e instanceof rE?[].concat(Gp()(t),[e.oneVar()]):t}),[])))}),e)},tC=function(t,e,n){var r,i=n.data(),a=e.groupBy,o=e.suppliedLayers,c=e.facetsAndProjections,u=e.globalConfig;i instanceof gt&&i.dispose();var s=t.getDimensions(),l=IE(o).filter((function(t){return s.includes(t)})),f=Array.from(new Set(TE(c,l)));if(r=t.project(f),n.data(r),!a.disabled){var h=f.filter((function(t){return s.includes(t)})),d=a.measures,p=r.getMeasures(),g=Cl.apply(void 0,[r].concat(Gp()(p))),v=Fs(g,d),y=Object.keys(v).map((function(t){return{aggn:v[t],field:t}}));r=r.groupBy(h,y)}var m,b,x=function(t,e){var n=t.projections();return JE(n.rowProjections,JE(n.colProjections)).reduce((function(t,n){return e.isTemporal(n)?[].concat(Gp()(t),[[n]]):t}),[])}(n,r);!0!==u.autoTemporalSort.disabled&&(b=r,r=(m=x).length?b.sort(m,{saveChild:!0}):b);var w=function(t,e){var n=function t(e){if(!e||!e||!e.getParent())return null;var n=e.getParent().getDerivations();return n[0]&&"sort"===n[0].operation?n[0]:t(e.getParent())}(e.model);n&&n.params.forEach((function(e){var n=Ig()(e,2),r=n[0],i=n[1];r in t||(t[r]=i)}));return Object.entries(t)}(u.sort,r);return w&&!x.length&&(r=r.sort(w)),n.transformedData(r),r},eC=function(t){var e=t.datamodel,n=t.encoders,r=t.resolver,i=t.globalConfig,a=t.selection,o=t.transform,c=t.componentRegistry,u=t.groupBy,s=t.labelManager,l=t.layerConfig,f=t.registry,h=t.normalizedRows,d=t.normalizedColumns,p=t.otherEncodings,g=t.facetsAndProjections,v=t.simpleEncoder,y=t.config,m=g.rowFacets,b=g.colFacets,x=m.length>0||b.length>0;x&&(i.isFacet=!0);var w={normalizedColumns:d,normalizedRows:h,facetsAndProjections:g,layers:l,otherEncodings:p,encoders:n,facet:i.facet||{},axisFrom:i.axisFrom||{},selection:a,resolver:r},_={GeomCell:r.getCellDef(f.cells.GeomCell),AxisCell:r.getCellDef(f.cells.AxisCell),BlankCell:r.getCellDef(f.cells.BlankCell),TextCell:r.getCellDef(f.cells.TextCell)},k=pE(h),S=pE(d);r.colCells({}),r.rowCells({}),r.datamodelTransform(o||{}),r.resetSimpleAxes();var M={exitCellMap:r.cacheMaps().entryCellMap,entryCellMap:new Map};r.cacheMaps(M);var E={config:i,suppliedLayers:v.serializeLayerConfig(r.layerConfig()),resolver:r,cell:_.GeomCell,encoder:v,newCacheMap:M,detailFields:y.detail,retinalConfig:{color:y.color,size:y.size,shape:y.shape}},C=tC(e,{facetsAndProjections:g,suppliedLayers:E.suppliedLayers,groupBy:u,globalConfig:i},r);v.data(C);var A=r.valueCellsCreator(E),P=qE(C,g,A,{globalConfig:i,globalDeps:r._dependencies});NE(r),r.cacheMaps().exitCellMap.clear(),r.valueMatrix(P.matrix);var D=EE(r.cacheMaps(),r.axes()),I=D.xAxes,T=D.yAxes;r.axes({x:I,y:T}),r.createUnits(c,y);var R=function(t,e,n,r){var i=t.unitHeight,a=t.unitWidth,o=t.facetsAndProjections,c=t.normalizedRows,u=t.normalizedColumns,s=t.selection,l=t.axisFrom,f=t.facet,h=t.encoders,d=t.resolver,p=ZE({fields:{rows:c,columns:u},matrices:e,facetsAndProjections:o,selection:s,axisFrom:l,facet:f,encoders:h,resolver:d},n,r),g=p.columnsPrimary,v=p.columnsSecondary,y=p.rowsPrimary,m=p.rowsSecondary,b=p.leftHeaders,x=p.topHeaders,w=p.bottomHeaders,_=p.rightHeaders,k=[y,m,g,v].map((function(t){return t?t.getObjects():[]})),S=Ig()(k,4),M=S[0],E=S[1],C=S[2],A=S[3],P=[b,_].map((function(t){return t?t.getObjects().map((function(t){return t.getObjects()})):[]})),D=Ig()(P,2),I=D[0],T=D[1],R=E.length?1:-1;M.length&&R++;var N=A.length?1:-1;C.length&&N++;var O=I.length?I.map((function(t,e){return M[e]=M[e]?[M[e]]:[],[].concat(Gp()(t),Gp()(M[e]))})):M?M.map((function(t){return[t]})):[],F=E.length?E.map((function(t,e){return[t].concat(Gp()(T[e]||[]))})):T.length?T.map((function(t){return Gp()(t)})):[],L=[];x&&x.getObjects().forEach((function(t){t.getObjects().forEach((function(t,e){L[e]=L[e]||[],L[e].push(t)}))}));C.length&&L.push(C);var j=[];A.length&&j.push(A);var B=j.length;w&&w.getObjects().forEach((function(t){t.getObjects().forEach((function(t,e){j[e+B]=j[e+B]||[],j[e+B].push(t)}))}));if(!O.length&&!F.length){var z=new n.BlankCell;z.setAvailableSpace(a,i),O=[[z]]}if(!(L.length||j.length&&j[0].length)){var H=new n.BlankCell;H.setAvailableSpace(a,i),j=[[H]]}return{rows:[O,F],columns:[L,j],selectionObj:p,colPriority:N,rowPriority:R}}(w,{valuesMatrix:P,axesMatrix:r.axes()},_,s),N=R.rows,O=R.columns,F=R.selectionObj,L=R.rowPriority,j=R.colPriority;if(r.rowMatrix(N),r.columnMatrix(O),x){var B=_E(i.facetsUserConfig),z=B&&function(t,e){var n=t.leftMatrix,r=t.rightMatrix,i=t.topMatrix,a=t.bottomMatrix,o={};return r.length&&(o=lE(r,"".concat(km),e)),n.length&&(o=lE(n,"".concat(_m),e)),i.length&&sE(i),a.length&&sE(a),o}({leftMatrix:N[0],rightMatrix:N[1],topMatrix:O[0],bottomMatrix:O[1]},f.cells.BlankCell);P.matrix=B&&function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=0;n<t.length;n++)for(var r=0;r<t[0].length;r++)t[n][r].config({externalClassname:["".concat(cb)]}),0===n?t[n][r].config().externalClassname.push("".concat(ub,"-").concat(Sm)):n===t.length-1&&t[n][r].config().externalClassname.push("".concat(ub,"-").concat(Mm)),r===t[n].length-1&&t[n][r].config().externalClassname.push("".concat(ab,"-").concat(km)),e[n]&&t[n-1][r].config().externalClassname.push("".concat(ab,"-").concat(Mm))}(P.matrix,z)}return{rows:r.rowMatrix(),columns:r.columnMatrix(),values:r.valueMatrix(),isColumnSizeEqual:S,isRowSizeEqual:k,priority:{row:L,col:j},selection:F,dataModels:{groupedModel:C,parentModel:e}}},nC={dependencies:{},units:{},datamodelTransform:{},layerConfig:{},matrixLayers:{},colCells:{},rowCells:{},rowMatrix:{},columnMatrix:{},valueMatrix:{},encoder:{},valueParser:{},data:{},transformedData:{},store:{}},rC=function(){function t(e){Yp()(this,t),this._registry={},this._layerConfig=[],this._matrixLayers=[],this._dependencies=e,this._rowMatrix=[],this._columnMatrix=[],this._valueMatrix=[],this._facets={rowFacets:[],colFacets:[]},this._projections={rowProjections:[],colProjections:[]},this._datamodelTransform={},this._units=[],this._cacheMaps={},this._fireboltDeps={},this._axes={x:{},y:{},color:[],size:[],shape:[],radius:[],angle:[],angle0:[]},this._placeholderInfo={},Ps(this,this.constructor.getterSetters()),this.cacheMaps(gE())}return Kp()(t,[{key:"registry",value:function(){var t=this;return arguments.length?(Object.entries(arguments.length<=0?void 0:arguments[0]).forEach((function(e){t._registry[e[0]]=e[1]})),this):this._registry}},{key:"cacheMaps",value:function(){for(var t=this,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return n.length?([Cm,Am,Pm,Dm,Tm].forEach((function(e){t._cacheMaps["".concat(e,"Map")]=n[0]["".concat(e,"Map")]||t._cacheMaps["".concat(e,"Map")]})),this):this._cacheMaps}},{key:"axes",value:function(){return arguments.length?(this._axes=Object.assign({},this._axes,arguments.length<=0?void 0:arguments[0]),this):this._axes}},{key:"facets",value:function(){var t=this;return arguments.length?(Object.entries(arguments.length<=0?void 0:arguments[0]).forEach((function(e){t._facets[e[0]]=e[1]})),this):this._facets}},{key:"projections",value:function(){var t=this;return arguments.length?(Object.entries(arguments.length<=0?void 0:arguments[0]).forEach((function(e){t._projections[e[0]]=e[1]})),this):this._projections}},{key:"optionalProjections",value:function(t,e,n){var r={},i=[];[vm,pm,gm].forEach((function(e){if(t[e]&&t[e].field){var n=t[e];r[e]=n.field,i.push(n.field)}})),t[ym]&&i.push.apply(i,Gp()(t.detail));var a=this.encoder();return i.push.apply(i,Gp()(a.getProjectionFields(e,n))),this.projections({optionalProjections:i}),r}},{key:"horizontalAxis",value:function(t,e){return t?(this._horizontalAxis=PE(this,{type:hm,fields:t},e),this):this._horizontalAxis}},{key:"verticalAxis",value:function(t,e){return t?(this._verticalAxis=PE(this,{type:fm,fields:t},e),this):this._verticalAxis}},{key:"getCellDef",value:function(t){var e=this.registry().cells;return Object.values(e).forEach((function(e){e.prototype instanceof t&&(t=e)})),t}},{key:"valueCellsCreator",value:function(t){return this.matrixLayers([]),function(e,n,r){return YE(t,e,n,r)}}},{key:"forEach",value:function(t,e){this[t]().forEach((function(t,n){t.forEach((function(t,r){e(n,r,t)}))}))}},{key:"getAllFields",value:function(){var t=this.projections();return Object.entries(this.facets()).forEach((function(e){t[e[0]]=e[1]})),t}},{key:"resetSimpleAxes",value:function(){return this.axes({x:new Set,y:new Set,radius:[],angle:[],angle0:[],pie:[]})}},{key:"setFireboltDependencies",value:function(t,e){return Object.assign(this._fireboltDeps,Rg()({},t,e)),this}},{key:"createUnits",value:function(t,e){var n=this,r=e.globalConfig,i=e.alias,a=e.coord,o=t.layerRegistry,c=t.interactions,u=this.dependencies(),s=u.smartlabel,l=u.lifeCycleManager,f=u.throwback,h=u.DataStore,d=this._fireboltDeps,p=[[]],g=mE(r||{}),v=this.store();v.lockModel();var y=this.registry().VisualUnit;return this.forEach(Lm,(function(t,e,r){var u=r.source();if(!u){var m="unit".concat(t,"-").concat(e,"-").concat(ts());(u=y.create({layerRegistry:o,interactions:c},{smartLabel:s,lifeCycleManager:l,DataStore:h,throwback:f,fireboltDeps:d})).metaInf({rowIndex:t,colIndex:e,namespace:m}),u.store(v),u.coord(a),r.source(u)}!p[t]&&(p[t]=[]),p[t][e]=u,u.parentAlias(i).valueParser(n.valueParser()).coord(a),r.config(g)})),v.unlockModel(),l.notify({client:p,action:Im,formalName:Nm}),this.units(p)}},{key:"setRetinalAxisDomain",value:function(t,e,n){var r=t.color,i=t.shape,a=t.size,o=t.globalConfig.autoGroupBy,c=this.getAllFields(),u=c.rowFacets,s=c.colFacets,l={color:r,shape:i,size:a},f=[].concat(Gp()(u.map((function(t){return t.toString()}))),Gp()(s.map((function(t){return t.toString()})))),h={domains:n.simpleEncoder.getRetinalFieldsDomain(e,l,f,o),axes:this.getRetinalAxes(),encoding:l};return n.retinalEncoder.setCommonDomain(h),this}},{key:"resetFacetsAndProjections",value:function(){return this._facets={},this._projections={},this}},{key:"getRetinalAxes",value:function(){var t=this.axes(),e=t.color,n=t.shape,r=t.size;return{color:Gp()(e),shape:Gp()(n),size:Gp()(r)}}},{key:"getSimpleAxes",value:function(t){return this.axes()["".concat(t)]}},{key:"createRetinalAxes",value:function(t,e,n){var r=n.retinalEncoder.createAxis(t,{config:e,axes:this.axes()});return this.axes(r),this.updateVisualUnit(e),this}},{key:"createHeaders",value:function(t,e,n){var r=[],i=[],a=t.rows,o=t.columns,c=this.dependencies(),u=c.smartlabel,s=c.lifeCycleManager,l=n.showHeaders,f=n.classPrefix,h=this.registry().cells,d=h.TextCell,p=h.BlankCell,g=Ig()(a,2),v=g[0],y=g[1],m=Ig()(o,2),b=m[0],x=m[1],w=e.rows,_=function(t){return(new p).config({show:t.config().show})},k=_E(n.facetsUserConfig),S={left:wE(v,w[0],l?d:p,{classPrefix:f,labelManager:u,sanitizeCheckBorder:k}),right:wE(y,w[1],l?d:p,{classPrefix:f,labelManager:u,sanitizeCheckBorder:k})},M={left:v.length>0?v[0].map(_):[],right:y.length>0?y[0].map(_):[]},E=[_m,km].map((function(t){return b.map((function(e,n){return n===b.length-1?S[t]:M[t]}))})),C=Ig()(E,2),A=C[0],P=C[1];if(0===b.length){var D=[_m,km].map((function(t){return x.map((function(e,n){return 0===n?S[t]:M[t]}))})),I=Ig()(D,2);r=I[0],i=I[1]}else r=x.map((function(){return v.length>0?v[0].map(_):[]})),i=x.map((function(){return y.length>0?y[0].map(_):[]}));return s.notify({client:[A,P,r,i],action:Im,formalName:jm}),{topLeft:A,topRight:P,bottomLeft:r,bottomRight:i}}},{key:"updateVisualUnit",value:function(t){var e=this.getRetinalAxes(),n=this.dependencies().lifeCycleManager;n.notify({client:this.axes(),action:Im,formalName:Rm}),n.notify({client:this.units(),action:Fm,formalName:Nm});var r=[],i=this.matrixLayers(),o=["".concat(a.LAYER_GLOBAL_NAMESPACE,".domain"),"".concat(a.UNIT_GLOBAL_NAMESPACE,".domain")],c=this.store();return c.lockCommits(o),c.lockModel(),this.forEach(Lm,(function(n,a,o){o.axes(Object.assign(o.axes(),e)),o.source()&&o.source().retinalFields(t),o.layerDef(i[n][a]),o.updateModel(),r.push(o.source())})),c.unlockModel().unlockCommits([o[0]]).unlockCommits([o[1]]),n.notify({client:r,action:Om,formalName:Nm}),this}},{key:"getMatrices",value:function(t){return this._placeholderInfo=eC(t),this._placeholderInfo}},{key:"clear",value:function(){var t=this._cacheMaps;for(var e in t)t[e].clear()}}],[{key:"getterSetters",value:function(){return nC}}]),t}(),iC=(zE={},Rg()(zE,tm,l.BAND),Rg()(zE,Vm,l.BAND),Rg()(zE,Um,l.TIME),Rg()(zE,em,l.LINEAR),Rg()(zE,nm,l.LINEAR),Rg()(zE,rm,l.BAND),zE),aC=function(t,e){var n=t[0]/(t[0]-e[0]),r=t[1]/(t[1]-e[1]),i=!1;return e[0]>0&&e[1]>0&&e[1]>0&&t[1]>0&&(i=!0,e[0]=0,e[1]=0),e[0]<0&&e[1]<0&&e[1]<0&&t[1]<0&&(i=!0,t[0]=0,t[1]=0),i||n===r||(n<r?e[1]=e[0]/t[0]*t[1]:e[0]=e[1]/t[1]*t[0]),[[e[0],t[0]],[e[1],t[1]]]},oC=function(t,e,n,r,i,a){var o,c=r.groupAxes,u=r.valueParser,l=[],f=e.fields,h=e.index,d=n.cacheMaps["".concat(t,"AxesMap")],p=vE(t,h);return f.forEach((function(e,r){o=vE(t,h,r,iC[e.subtype()]);var c,f=function(t,e,n,r,i){var a,o=t.index,c=t.axisIndex,u=t.axisType,l=n.config,f=n.position,h=r.rowIndex,d=r.columnIndex,p=l.axes&&l.axes[u]||{},g=("function"!=typeof p?function(){return p}:p)(h,d,{axisFields:e.getMembers(),facetFields:i});if(!g)return{};a=f===$m?(u===Gy?[s.LEFT,s.RIGHT]:[s.TOP,s.BOTTOM])[c]:f;var v={id:"".concat(u,"-").concat(o,"-").concat(c),name:e.displayName(),field:e.toString(),numberFormat:e.numberFormat(),orientation:a,showAxisName:!0,show:!0,type:iC[e.subtype()]};return g.tickValues=e.format(g.tickValues),g.domain=e.format(g.domain),Fs(v,g)}({index:h,axisIndex:r,axisType:t},e,n,i,a);d.has(o)?((c=d.get(o))._rotationLock=!1,c.config(f)):c=function(t,e,n){var r=n.labelManager;return new(0,LE[iC[e.subtype()]])(t,{labelManager:r})}(f,e,n),c.valueParser(u),l.push(c),d.set(o,c)})),l.length&&(d.set(p,l),c.add(p)),l},cC=function(t,e){[pm,gm,vm].forEach((function(n){t[n]&&t[n].field&&e.forEach((function(e){e.encoding=e.encoding||{},!e.encoding[n]&&(e.encoding[n]={}),e.encoding[n].field=t[n].field}))}))},uC=function(t,e){var n=t.xAxesMap,r=t.yAxesMap,i=e.x,a=e.y,o=[],c=[];return i.forEach((function(t){var e=n.get(t);o.push(e)})),a.forEach((function(t){var e=r.get(t);c.push(e)})),{xAxes:o,yAxes:c}},sC=function(t,e){return t===Vm||e===Vm?Gm:t===Um||e===Um?qm:Ym},lC=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=e.axisType,i=n.field,a=[],o=LE[r];return n.type=n.type?n.type:SE(t,i||null),a.push(new o(n)),a},fC=function(t,e){for(var n=0,r=-1;-1===r&&n<t.length;)t[n].toString()===e.toString()&&(r=n),n++;return r},hC=function(t,e,n){return n.filter((function(n){var r,i,a,o=n instanceof Array?n:[n],c=(r=[]).concat.apply(r,Gp()(o.map((function(t){return t.encoding})).filter((function(t){return void 0!==t}))));if(!c.length)return!0;var u=(i=[]).concat.apply(i,Gp()(c.map((function(t){return[t.x&&t.x.field,t.x0&&t.x0.field]})))).filter((function(t){return null!=t})),s=(a=[]).concat.apply(a,Gp()(c.map((function(t){return[t.y&&t.y.field,t.y0&&t.y0.field]})))).filter((function(t){return null!=t}));if(!u.length&&!s.length)return!0;var l=!!u.length&&u.every((function(e){return-1!==t.indexOf(e)})),f=!!s.length&&s.every((function(t){return-1!==e.indexOf(t)}));return u.length&&s.length?l&&f:l||f}))},dC=function(t,e,n){var r=n.rowIndex,i=n.columnIndex,a=n.axesObj,o=t.config,c=t.facetFields,u=t.resolver.axes();[pg.RADIUS,pg.ANGLE,Hm].forEach((function(t){var n=u[t];n[r]||(n[r]=[]),n[r][i]=a[t];var s=Cs(o.axes,t)||{};a[t].forEach((function(n,a){var o=s;s instanceof Function&&(o=s(r,i,{axisFields:[e[t][a]],facetFields:c})),n.config(o)}))}))},pC=function(t,e,n){var r=t.config();return 0!==Object.keys(r.sort).length?r.sort[e]:n().defaultSort};function gC(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=eg()(t);if(e){var i=eg()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Jp()(this,n)}}var vC,yC=ut.CARTESIAN,mC=function(t){Qp()(n,t);var e=gC(n);function n(){return Yp()(this,n),e.apply(this,arguments)}return Kp()(n,[{key:"createAxis",value:function(t,e,n){var r=this,i={},a=t.axes,o=e.projections,c=e.indices,u=o.rowFields,s=o.columnFields,l=[{fields:u,index:c.rowIndex},{fields:s,index:c.columnIndex}],f=n.resolver,h=n.facetFields,d=n.geomCell,p=a.x||[],g=a.y||[];return[u,s].forEach((function(e,n){var a=0===n?hm:dm,o=0===n?Gy:Uy;e.length>1?t.position=$m:t.position=r.axisFrom()[a],i[o]=oC(o,l[n],t,{groupAxes:o===Uy?p:g,valueParser:f.valueParser()},c,h)})),d.axes(i),i}},{key:"unionUnitDomains",value:function(t){for(var e=t.store(),n=t.resolver(),r=n.units(),i={0:{},1:{}},o={0:{},1:{}},c={},u=function(t,e){for(var n=r[t],a=function(e,r){var a=n[e],u=a.fields(),s=a.dataDomain(),l=a.isSortedDomain();["x","y"].forEach((function(n,r){u[n].forEach((function(a,u){var f=r?"".concat(t,"0").concat(u):"0".concat(e).concat(u),h=s[n],d=a.subtype();o[r][f]=a,h&&0!==Object.keys(h).length&&(i[r][f]=us([i[r]&&i[r][f]||[],h["".concat(a)]],d),l&&(!c[r]&&(c[r]={}),c[r][f]=h["".concat(a)]))}))}))},u=0,s=n.length;u<s;u++)a(u)},s=0,f=r.length;s<f;s++)u(s);var h=n.axes(),d=h.x,p=h.y;e.lockModel(),[d,p].forEach((function(n,r){n.forEach((function(n,u){var s,f=[],h=[],d=[],p=[],g=n[0].constructor.type();if(n.length>1&&g===l.LINEAR&&n[0].config().alignZeroLine)n.forEach((function(t,e){s=r?"".concat(u,"0").concat(e):"0".concat(u).concat(e),f=i[r][s],d[e]=f[0],p[e]=f[1]})),h=aC(p,d);else if(g===l.BAND){s=r?"".concat(u,"00"):"0".concat(u,"0");var v=o[r][s].oneVar(),y=pC(t,v,n[0].config);y&&i[r][s]instanceof Array?i[r][s].sort((function(t,e){return Il(y,t,e)})):c[r]&&c[r][s]&&(i[r][s]=Gp()(new Set([].concat(Gp()(c[r][s]),Gp()(i[r][s])))))}n.forEach((function(t,n){s=r?"".concat(u,"0").concat(n):"0".concat(u).concat(n),(f=h[n]||i[r][s])&&t.domain(f);var o=r?"y":"x";e.commit("".concat(a.GROUP_GLOBAL_NAMESPACE,".domain.").concat(o),f,"".concat(u).concat(n))}))}))})),e.unlockModel()}},{key:"getFacetsAndProjections",value:function(t,e){for(var n=[],r=[],i=0,a=[],o=[],c=t[0],u=t[1],s=c.length,l=u.length,f=this.axisFrom(),h=0;h<s;h++){var d=[c[h]],p=c[h];if(p.type()===em){var g=u[i];g&&g.type()===em&&(i++,d=[p,g]),r.push(d)}else n.push(p),a.push(p)}if(l>i)for(var v=i;v<l;v++){var y=u[v],m=[y];y.type()===em?r.push(m):(n.push(y),o.push(y))}if((a.length||o.length)&&!r.length)if(f[e=e===fm?dm:e]!==_m&&f[e]!==Sm||!a.length){var b=o[0];r=[[b]];var x=fC(a,b);x>-1&&(r=[[b,b]],a.splice(x,1)),o.splice(0,1)}else{var w=a.length-1,_=a[w];r=[[_]];var k=fC(o,_);k>-1&&(r=[[_,_]],o.splice(k,1)),a.splice(w,1)}return{facets:n=(n=[].concat(a,o)).filter((function(t,e,n){return e===n.findIndex((function(e){return e.toString()===t.toString()}))})),projections:r}}},{key:"fieldSanitizer",value:function(t,e){return ov()(eg()(n.prototype),"fieldSanitizer",this).call(this,t,e)}},{key:"getRetinalFieldsDomain",value:function(t,e){var n=t.groupedModel,r={};for(var i in e)if({}.hasOwnProperty.call(e,i)){var a=e[i],o=a.field;if(!a.domain&&o){var c=ME(n,o),u=n.getField(o);u.schema().subtype===Um&&(c=u.data()),r[o]=c}}return r}},{key:"serializeLayerConfig",value:function(t){var e=[];return t.length&&t.forEach((function(t,n){var r=i_.sanitizeLayerConfig(t);r.order=n,e.push(r)})),e}},{key:"sanitizeLayerConfig",value:function(t,e){var n=[];return e.forEach((function(e){var r=sl(e.def);cC(t,r),n.push(e)})),n}},{key:"getLayerConfig",value:function(t,e,n,r){var i=[],a=t.columnFields,o=t.rowFields,c=r.sort;return a.forEach((function(t){var n=t.toString();o.forEach((function(r){var a=[],o=r.toString(),u={x:{field:n},y:{field:o}},s=r.subtype(),l=t.subtype(),f=sC(l,s),h=[{mark:f,def:{mark:f,encoding:u,transform:Object.assign({},{sort:c})}}],d=hC(t.getMembers(),r.getMembers(),e||[]);a=d.length?d.map((function(t){var e=Fs(Fs({},h[0].def),t),n=i_.getSerializedConf(e.mark,e);return{mark:e.mark,order:e.order,def:n}})):h,i.push.apply(i,Gp()(a))}))})),this.sanitizeLayerConfig(n,i)}},{key:"hasMandatoryFields",value:function(t){var e=t.colProjections,r=t.rowProjections,i=ov()(eg()(n.prototype),"hasMandatoryFields",this).call(this,{colProjections:e}),a=ov()(eg()(n.prototype),"hasMandatoryFields",this).call(this,{rowProjections:r});return i&&a}}],[{key:"type",value:function(){return yC}}]),n}(FE);function bC(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=eg()(t);if(e){var i=eg()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Jp()(this,n)}}var xC=ut.POLAR,wC=pg.RADIUS,_C=pg.ANGLE,kC=pg.ANGLE0,SC=(vC={},Rg()(vC,wC,lb),Rg()(vC,_C,Vy),Rg()(vC,kC,Vy),vC),MC=function(t){Qp()(n,t);var e=bC(n);function n(){return Yp()(this,n),e.apply(this,arguments)}return Kp()(n,[{key:"createAxis",value:function(t,e,n){var r=t.axes,i=e.indices,a=i.rowIndex,o=i.columnIndex,c=r.pie||[];c[a]=c[a]||[],c[a][o]=[];var u={},s=n.geomCell,l=n.resolver,f=l.matrixLayers(),h=l.axes(),d=f[a][o],p={radius:{},angle:{},angle0:{}};d.forEach((function(t){var e=t.def;[_C,kC,wC].forEach((function(t){var n=Cs(e.encoding,t,"field");n&&(p[t][n]=0)}))}));var g={},v={},y=function(t){g[t]=Object.keys(p[t]),u[t]=[],v[t]=[],g[t].forEach((function(e,n){v[t][n]=new rE(e),u[t][n]=new SC[t]})),u[t][u[t].length]=new SC[t]};for(var m in p)y(m);return dC(n,g,{axesObj:u,rowIndex:a,columnIndex:o}),s.axes(u).fields(Object.assign({},v,s.fields())),h.pie=c,r}},{key:"getFacetsAndProjections",value:function(t){for(var e=0,n=[],r=[],i=t[0],a=t[1],o=i.length,c=a.length,u=0;u<o;u++){var s=i[u];if(s.type()===em){var l=a[e++],f=l?[s,l]:[s];r.push(f)}else n.push(s)}if(c>e)for(var h=e;h<c;h++){var d=a[h],p=[d];d.type()===em?r.push(p):n.push(d)}return{facets:n,projections:r}}},{key:"unionUnitDomains",value:function(t){var e=t.store();e.lockModel();var n={radius:[],angle:[],angle0:[]},r=t.resolver().axes();t.matrixInstance().value.each((function(t,e,r){var i=t.valueOf(),a=i.dataDomain(),o=i.fields();!function(t){var e=t.data(),n=t.retinalFields().size.field,r=t.axes(),i=r.radius,a=r.size;if(n&&i&&i.length){var o=e.getFieldIndex(n),c=function(t,e){var n=e.domain();return e.getSize(t)/(n?e.range()[1]:e.config().value)}(e.getData().data.reduce((function(t,e){return t+e[o]}),1),a[0]);i.forEach((function(t){return t.setRadiusFactor(c)}))}}(i),[wC,_C,kC].forEach((function(t){var i=o[t],c=a[t]||{};i.forEach((function(i,a){!n[t][e]&&(n[t][e]=[]),!n[t][e][r]&&(n[t][e][r]=[]),n[t][e][r][a]=c["".concat(i)]||[]}))}))}));var i=function(t){r[t].forEach((function(r,i){r.forEach((function(r,o){r.forEach((function(r,c){r.domain(ks(Cs(n[t],i,o,c),[])),e.commit("".concat(a.GROUP_GLOBAL_NAMESPACE,".domain.").concat(t),n[t],"".concat(i,"-").concat(o))}))}))}))};for(var o in n)i(o);e.unlockModel()}},{key:"setCommonDomain",value:function(){return this}},{key:"layers",value:function(){return arguments.length?(this._layers=arguments.length<=0?void 0:arguments[0],this):this._layers}},{key:"fieldSanitizer",value:function(t,e){var r=[[],[]],i=[[],[]],a=ov()(eg()(n.prototype),"fieldSanitizer",this).call(this,t,e),o=e.layers,c=a.rows,u=a.columns,s=o[0].encoding,l=s&&s.radius?s.radius.field:null,f=s&&s.angle?s.angle.field:null,h=[r,i];return[c,u].forEach((function(t,e){t.forEach((function(t,n){return t.forEach((function(t){t.toString()!==l&&t.toString()!==f&&t.type()!==em&&h[e][n].push(t)}))}))})),i=Gp()(new Set(i)),r=Gp()(new Set(r)),this.fieldInfo({rows:r,columns:i}),this.fieldInfo()}},{key:"getRetinalFieldsDomain",value:function(t,e,n,r){var i,a,o=[],c=this.layers(),u=t.groupedModel,s={};if(c&&c[0]){var l=c[0].def.encoding||{};[wC,_C,vm,pm].forEach((function(t){var e=l[t]?l[t].field:"",n=!!e&&u.getField(e).type()===em;t===vm&&n&&(i=e),t===pm&&(a=e),e&&!n&&o.push(e)}))}if(i){var f=u.groupBy(xs([].concat(Gp()(n),o)),r.measures);s[i]=f.getField(i).domain(),f.dispose()}if(a){var h=u.groupBy(xs([].concat(Gp()(n),o)),r.measures);s[a]=h.getField(a).domain(),h.dispose()}return s}},{key:"getLayerConfig",value:function(t,e,n){var r=[],i=t.columnFields,a=t.rowFields;[].concat(Gp()(i),Gp()(a)).forEach((function(){var t={mark:Wm,def:{encoding:{}}};e&&e.length>0&&(t=Fs(t,e[0])),r.push(t)})),0===r.length&&(r=e);var o=this.sanitizeLayerConfig(n,r);return this.layers(o),o}},{key:"serializeLayerConfig",value:function(t){var e=[];return t.length&&t.forEach((function(t){var n=i_.getSerializedConf(t.mark,t);e.push({mark:t.mark,def:n})})),e}},{key:"sanitizeLayerConfig",value:function(t,e){var n=[];return e.forEach((function(e){var r=sl(e.def);cC(t,r),r.forEach((function(e){var n=e.encoding||(e.encoding={});!n.angle&&(n.angle={});var r=Cs(n.angle,"field"),i=Cs(n.angle0,"field");r||Object.assign(n.angle,{field:t.color&&t.color.field}),i||(!n.angle0&&(n.angle0={}),Object.assign(n.angle0,{field:n.angle.field}))})),n.push(e)})),n}},{key:"hasMandatoryFields",value:function(t){var e=t.optionalProjections;return ov()(eg()(n.prototype),"hasMandatoryFields",this).call(this,{optionalProjections:e})}}],[{key:"type",value:function(){return xC}}]),n}(FE);function EC(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=eg()(t);if(e){var i=eg()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Jp()(this,n)}}var CC,AC,PC=function(t){Qp()(n,t);var e=EC(n);function n(){return Yp()(this,n),e.apply(this,arguments)}return Kp()(n,[{key:"createAxis",value:function(t,e){var n=e.config,r={};return[pm,gm,vm].forEach((function(e){r["".concat(e)]=lC(t,{axisType:e},n[e])})),r}},{key:"setCommonDomain",value:function(t){var e=t.domains,n=t.axes,r=t.encoding;return Object.entries(r).forEach((function(t){if(t[1]&&t[1].field){var r=t[0],i=t[1].field;i&&n[r].forEach((function(n){var r=e[i];!t[1].domain&&n.updateDomain(r)}))}})),n}}],[{key:"type",value:function(){return"retinal"}}]),n}(FE),DC=(CC={},Rg()(CC,Ky,{}),Rg()(CC,um,{}),Rg()(CC,sm,{}),Rg()(CC,pm,{}),Rg()(CC,gm,{}),Rg()(CC,vm,{}),Rg()(CC,ym,{}),Rg()(CC,mm,{}),Rg()(CC,bm,{}),CC),IC=function(){function t(){Yp()(this,t)}return Kp()(t,[{key:"data",value:function(){throw new Error(Os.INTERFACE_IMPL)}},{key:"config",value:function(){throw new Error(Os.INTERFACE_IMPL)}},{key:"serialize",value:function(){throw new Error(Os.INTERFACE_IMPL)}},{key:"measurement",value:function(){throw new Error(Os.INTERFACE_IMPL)}}]),t}(),TC=function(t){var e=t.store(),n={throwback:t._dependencies.throwback,store:e};["x","y"].forEach((function(n){e.registerChangeListener(["".concat(a.GROUP_GLOBAL_NAMESPACE,".domain.").concat(n)],(function(){t.resolver().axes()[n].forEach((function(t){return t.forEach((function(t){t.render()}))}))}))}));var r=t.registry();[r.VisualUnit,r.layerRegistry.base].forEach((function(t){var e=t.formalName();["store","throwback"].forEach((function(r){var i=t.getListeners()[r],a=n[r];i.forEach((function(t){a[t.type](t.props,t.listener,!1,{namespace:e,subNamespace:t.subNamespace})}))}))}))},RC=function(){function t(e){Yp()(this,t);var n=new Map;this.matrix(e||[]),this.filter((function(){return!0})),this.each((function(t,e,r){var i=t.valueOf();if(i&&i.id){var a=i.id();n.set(a,{instance:i,rowIndex:e,colIndex:r})}})),this.instancesById(n)}return Kp()(t,[{key:"instancesById",value:function(){return arguments.length?(this._instancesById=arguments.length<=0?void 0:arguments[0],this):this._instancesById}},{key:"matrix",value:function(){return arguments.length?(this._matrix=arguments.length<=0?void 0:arguments[0],this):this._matrix}},{key:"filter",value:function(){return arguments.length?(this._filterFn=arguments.length<=0?void 0:arguments[0],this):this._filterFn}},{key:"width",value:function(){var t=0;return this.matrix().forEach((function(e){var n=0;e.forEach((function(t){n+=t.getLogicalSpace().width})),t=Math.max(t,n)})),t}},{key:"height",value:function(){var t=0;return this.matrix().forEach((function(e){var n=0;e.forEach((function(t){n=Math.max(n,t.getLogicalSpace().height)})),t+=n})),t}},{key:"each",value:function(t){var e=this.matrix(),n=this.filter();return e.forEach((function(r,i){r.forEach((function(r,a){n(r)&&t(r,i,a,e)}))})),this}},{key:"findPlaceHolderById",value:function(t){return this.instancesById().get(t)}},{key:"clear",value:function(){this.each((function(t){return t.remove()})),this.matrix([])}},{key:"getAllDataModelIds",value:function(){var t=this.instancesById(),e=[];return t.forEach((function(t){e.push(t.instance.cachedData()[0].id())})),e}},{key:"count",value:function(){return this.instancesById().size}},{key:"getCellsByFacetKeys",value:function(t){var e=this.instancesById(),n=[],r=Object.keys(t);return e.forEach((function(e){var i=e.instance.facetFieldsMap();r.every((function(e){return i[e]===t[e]}))&&n.push(e)})),n}}]),t}(),NC=function(t){var e=ZM.getState(),n=Ig()(e,2),r=n[0],i=n[1];t.store().append(a.UNIT_GLOBAL_NAMESPACE,r).append(a.UNIT_LOCAL_NAMESPACE,i)},OC=function(t){var e=t.constructor.getState()[0];t.store().append(a.GROUP_GLOBAL_NAMESPACE,e)},FC=function(t){var e=xx.getState(),n=Ig()(e,2),r=n[0],i=n[1];t.store().append(a.LAYER_GLOBAL_NAMESPACE,r).append(a.LAYER_LOCAL_NAMESPACE,i)},LC=function(t,e){var n=e.values,r=e.rows,i=e.columns;return n=n||[],r=r||[],i=i||[],t._composition.matrices={value:new RC(n),left:new RC(r[0]),right:new RC(r[1]),top:new RC(i[0]),bottom:new RC(i[1])},t._dependencies.throwback.commit(ct.MATRIX_CREATED,!0),t},jC=function(t,e){var n=e.groupConfig,r=e.resolverConfig,i=n.config,o=n.resolver,c=n.matrixConfig,u=n.encoders,s=n.retinalConfig,l=n.fields,f=o.getMatrices(r);t._originalGroupedData=t._groupedDataModel=f.dataModels.groupedModel,t.selection(f.selection);var h=f.dataModels.parentModel;return o.createRetinalAxes(h,s,u),o.setRetinalAxisDomain(c,f.dataModels,u),LC(t,f),t.cornerMatrices(o.createHeaders(f,l,i)),t.placeholderInfo(f),t._composition.axes=o.axes(),t.metaData({border:DE(f,u.simpleEncoder)}),o.encoder().unionUnitDomains(t),function(t){t.store().registerChangeListener(["".concat(a.UNIT_GLOBAL_NAMESPACE,".domain")],(function(){t.resolver().encoder().unionUnitDomains(t)}),!1,{key:"unionDomain"})}(t),t},BC=(AC={alias:{},data:{preset:function(t){t._prevData=null}},cornerMatrices:{defaultValue:{topLeft:[],topRight:[],bottomLeft:[],bottomRight:[]}},groupType:{},metaData:{defaultValue:{border:{}}},placeholderInfo:{defaultValue:{}},resolver:{},valueParser:{defaultValue:function(t){return t}},registry:{sanitization:function(t,e){return t.resolver&&t.resolver().registry({cells:e.cellRegistry,VisualUnit:e.VisualUnit}),e}},selection:{}},Rg()(AC,Ky,{}),Rg()(AC,um,{}),Rg()(AC,sm,{}),Rg()(AC,pm,{}),Rg()(AC,gm,{}),Rg()(AC,vm,{}),Rg()(AC,ym,{}),Rg()(AC,mm,{}),Rg()(AC,bm,{}),AC);function zC(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=eg()(t);if(e){var i=eg()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Jp()(this,n)}}var HC=function(t){Qp()(n,t);var e=zC(n);function n(t,r){var i;Yp()(this,n),i=e.call(this);var a=t.components,o=t.componentSubRegistry,c=t.interactions;return i._dependencies=r,Ps(Og()(i),i.constructor.getterSetters()),Ps(Og()(i),i.constructor.localOptions()),i._composition={},i._data=[],i._prevData=null,i._groupedDataModel=[],i._mount=null,i._selection={},i.createMatrixResolver(),LC(Og()(i),{}),i.registry({layerRegistry:o.layers.get(),cellRegistry:o.cells.get(),VisualUnit:a.VisualUnit,interactions:c}),i}return Kp()(n,[{key:"store",value:function(){return arguments.length?(this._store=arguments.length<=0?void 0:arguments[0],OC(this),NC(this),FC(this),TC(this),this):this._store}},{key:"matrixInstance",value:function(){return arguments.length?this:this.composition().matrices}},{key:"composition",value:function(){return arguments.length?this:this._composition}},{key:"lockModel",value:function(){return this.store().model.lock(),this}},{key:"unlockModel",value:function(){return this.store().model.unlock(),this}},{key:"where",value:function(t){return kE(t,this.resolver().getAllFields())}},{key:"getAxes",value:function(t){return t===Em?this.resolver().getRetinalAxes():this.resolver().getSimpleAxes(t)}},{key:"getCells",value:function(t){return this.resolver()["".concat(t,"Cells")]()}},{key:"getFieldsFromChannel",value:function(t){var e=this.resolver().getAllFields(),n=e.rowProjections,r=e.colProjections;return t===Gy?n:r}},{key:"getCellsByFacetKeys",value:function(t){return this.matrixInstance().value.getCellsByFacetKeys(t)}},{key:"getAxesByFacetKey",value:function(t,e){var n=this.resolver();return(n.rowCells()[e]||n.colCells()[e])[0].valueOf().axes()[t]||[]}},{key:"serialize",value:function(){var t,e=this.store();return t={},Rg()(t,Ky,e.get(Ky)),Rg()(t,om,e.get(om)),t}},{key:"getGroupByData",value:function(){return this._groupedDataModel}},{key:"createMatrices",value:function(t){jC(this,t)}},{key:"getMandatoryFields",value:function(){var t={groupConfig:{},resolverConfig:{},shouldRender:!1};if(function(t,e){return e.every((function(e){var n=t[e]();switch(e){case um:case sm:return null!==n;case lm:return n instanceof gt&&!n.isEmpty()&&n.hasOneValue();default:return!0}}))}(this,[um,sm,lm])){var e=function(t){var e=t.rows(),n=t.columns(),r=t.color(),i=t.data(),a=t.size(),o=t.detail(),c=t.layers(),u=t.transform(),s=t.config(),l=t.shape(),f=t.resolver();f.store(t.store()),f.valueParser(t.valueParser());var h={selection:t.selection(),alias:t.alias(),globalConfig:s||{},rows:e,columns:n,detail:o,layers:c,transform:u};!function(t){t.store().unsubscribe({key:"unionDomain"})}(t);var d=function(t){var e={};for(var n in t){var r=t[n];e[n]="string"!=typeof r&&r?r:{field:t[n]}}return e}({color:r,shape:l,size:a});h=Object.assign(h,d);var p={};p.retinalEncoder=new PC,p.simpleEncoder=t.createEncoderInstance(),h.coord=p.simpleEncoder.constructor.type(),f.encoder(p.simpleEncoder),t.groupType(p.simpleEncoder.constructor.type());var g=p.simpleEncoder.fieldSanitizer(i,h);return p.simpleEncoder.setAxisAndHeaders(s?s.axisFrom:{},g),c&&f.layerConfig(c),f.horizontalAxis(g.rows,p).verticalAxis(g.columns,p),{rows:e,columns:n,color:r,datamodel:i,size:a,detail:o,layers:c,transform:u,config:s,shape:l,resolver:f,matrixConfig:h,retinalConfig:d,encoders:p,fields:g}}(this),n=e.datamodel,r=e.encoders,i=e.resolver,a=e.matrixConfig,o=function(t,e){var n=t.datamodel,r=t.encoders,i=t.resolver,a=t.componentRegistry,o=e.globalConfig,c=e.selection,u=e.transform,s=o.autoGroupBy,l=i.dependencies().smartlabel,f=i.layerConfig(),h=i.registry(),d=i.horizontalAxis().fields,p=i.verticalAxis().fields,g=i.optionalProjections(e,f,n.getSchema()),v=i.getAllFields(),y=r.simpleEncoder,m=y.hasMandatoryFields(v);return{datamodel:n,encoders:r,resolver:i,globalConfig:o,selection:c,transform:u,componentRegistry:a,groupBy:s,labelManager:l,layerConfig:f,registry:h,normalizedRows:d,normalizedColumns:p,otherEncodings:g,facetsAndProjections:v,simpleEncoder:y,shouldRender:m,config:e}}({datamodel:n,componentRegistry:this.registry(),encoders:r,resolver:i},a);t={groupConfig:e,resolverConfig:o,shouldRender:o.shouldRender}}return t}},{key:"remove",value:function(){this.matrixInstance().value.clear(),this.resolver().clear();var t=this.placeholderInfo();t.rows=null,t.columns=null,t.values=null}},{key:"createEncoderInstance",value:function(){var t=this.layers();return CE(t)}},{key:"createMatrixResolver",value:function(){return this.resolver(new rC(this._dependencies)),this}},{key:"groupedData",value:function(){return arguments.length?(this._groupedDataModel=arguments.length<=0?void 0:arguments[0],this):this.getGroupByData()}},{key:"resetData",value:function(){var t=this._originalGroupedData;return t&&(this._groupedDataModel=t),this}}],[{key:"getState",value:function(){return[{domain:{x:null,y:null,radius:null,angle:null,angle0:null}},{}]}},{key:"formalName",value:function(){return"VisualGroup"}},{key:"localOptions",value:function(){return DC}},{key:"getterSetters",value:function(){return BC}}]),n}(IC),WC=n(55),VC=n(56),UC=n.n(VC),GC=n(17),qC=n.n(GC),YC=n(8),XC=n.n(YC);n(29);function KC(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=eg()(t);if(e){var i=eg()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Jp()(this,n)}}var $C,QC,ZC,JC,tA,eA,nA=function(t){Qp()(n,t);var e=KC(n);function n(){return Yp()(this,n),e.apply(this,arguments)}return Kp()(n,[{key:"setSelectionSet",value:function(t,e){if(null===t)e.reset();else if(t.length){var n=this.firebolt.getPropagationInf(),r=Ig()(e._exitSet,2),i=r[0],a=r[1],o=t.filter((function(t){return a.has(t)||i.has(t)}));if(n.sourceId)e.reset(),e.add(t);else{if(o.length)e.updateEntrySet(),e.add(o);else if(e.updateExitSet(),e.remove(t),!e.getEntrySetLength()){var c=wk([e.getCompleteSet()],[].concat(Gp()(e.getEntrySet()),Gp()(e.getExitSet())));e.add(c)}var u=e.getCompleteSetLength();e.getExitSetLength()!==u&&e.getEntrySetLength()!==u||e.reset()}}else e.remove(e.getCompleteSet());return this}}],[{key:"formalName",value:function(){return"select"}}]),n}(Yk),rA=($C={},Rg()($C,x.DRAG,{target:".".concat("muze","-gradient-rect"),behaviours:[w.BRUSH]}),Rg()($C,x.HOVER,{target:[".".concat("muze","-legend-columns")],behaviours:[w.HIGHLIGHT]}),Rg()($C,x.CLICK,{target:[".".concat("muze","-legend-columns")],behaviours:[w.SELECT]}),$C),iA=(QC={},Rg()(QC,w.SELECT,[w.FILTER]),Rg()(QC,w.BRUSH,[w.HIGHLIGHT]),Rg()(QC,w.HIGHLIGHT,[w.HIGHLIGHT]),QC),aA=(ZC={},Rg()(ZC,"brush",["selectionBox",{name:"highlighter",options:{strategy:"fade"}}]),Rg()(ZC,"select",[{name:"highlighter",options:{strategy:"fade"}}]),Rg()(ZC,"highlight",[{name:"highlighter",options:{strategy:"brighten"}}]),ZC),oA=(JC={},Rg()(JC,"brush",[{name:"highlighter",options:{strategy:"fade"}}]),Rg()(JC,"highlight",[{name:"highlighter",options:{strategy:"fade"}}]),Rg()(JC,"select",[{name:"filter"}]),JC),cA={circle:64,square:45.8,default:42.8},uA={size:"getSize",shape:"getShape",color:"getColor"},sA="horizontal",lA="value",fA=(tA={},Rg()(tA,"left","vertical"),Rg()(tA,"right","vertical"),Rg()(tA,"top",sA),Rg()(tA,"bottom",sA),tA),hA=(eA={},Rg()(eA,"left","right"),Rg()(eA,"right","left"),eA),dA={__default:function(t,e){if(null===t)return Object.assign({},e,{criteria:null});var n=t.getData({excludeFields:[ot.ROW_ID]}),r=n.schema,i=Object.assign({},e);r=n.schema;var a=n.data,o=r.map((function(t){return t.name}));return i.criteria=a.length?{dimensions:[o].concat(Gp()(a))}:null,i},brush:function(t,e){var n=e.criteria,r=Object.assign({},e);return r.criteria=n?{range:n.range}:null,r}};function pA(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=eg()(t);if(e){var i=eg()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Jp()(this,n)}}var gA,vA,yA=function(t){Qp()(n,t);var e=pA(n);function n(){var t;Yp()(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(t=e.call.apply(e,[this].concat(i)))._propagationDms={},t.initializeSideEffects(),t}return Kp()(n,[{key:"propagate",value:function(t,e,n){!function(t,e){var n,r=t.context,i=r.metaData(),a=r.constructor.type(),o=r.fieldName(),c=i.getField(o).type(),u={},s=t.actions().behavioural[e],l=s.getSelectionSet(),f=s.getPayload(),h=l.getEntrySet(),d=r.data();if(null===f.criteria||l.resetted())n={identifiers:null};else if("step"===a||"discrete"===a&&"measure"===c){var p=r.data().filter((function(t){return h[0].has(t.id)||h[1].has(t.id)})).map((function(t){return t.range}));n={identifiers:Rg()({},o,p),interpolated:!0}}else if("gradient"===a)n={identifiers:f.criteria.range,interpolated:!0};else{var g=h.map((function(t){return Gp()(t)})).flat().map((function(t){return gt.isInvalid(t)?null:d[d.findIndex((function(e){return e.rawVal===t}))].rawVal}));n={fields:Object.keys(f.criteria.dimensions),identifiers:g}}u.action=iA[e]||e,u.sideEffects=oA[e],u.sourceCanvas=r.canvasAlias(),u.sourceType="legend",u.propagationSourceId=t.id();var v=Object.assign({},u,{sourceId:t.id(),criteria:n.identifiers,action:u.action,sourceAction:e,interpolated:n.interpolated,fields:[o]});i.propagate(n.identifiers,v,{resolveId:!1,save:"filter"===u.action[0],targetDms:[i.id()]})}(this,t)}},{key:"getAddSetFromCriteria",value:function(t){var e,n,r=this.context.constructor.type(),i=this.context.fieldName(),a=this.data().getField(i).type();if(null===t)return{uids:null,model:null};var o=t.dimensions;if("discrete"===r&&"measure"===a)e=Object.values(o),n=this.context.data().filter((function(t){return-1!==e.indexOf(t.range)})).map((function(t){return t.id}));else if("step"===r)e=Object.values(o),n=this.context.data().filter((function(t){return-1!==e.indexOf(t.range)})).map((function(t){return t.id}));else if("gradient"===r)n=[];else{var c;if((e=o)instanceof Array)e=e.slice(1,e.length),n=Gp()(new Set((c=[]).concat.apply(c,Gp()(e))));else e=e[i],n=this.context.data().filter((function(t){return-1!==e.indexOf(t.rawVal)})).map((function(t){return t.rawVal}))}return{uids:n,model:null}}},{key:"onDataModelPropagation",value:function(){var t=this;return function(e,n){if(t._propagationDms[n.sourceAction]&&t._propagationDms[n.sourceAction].dispose(!1),t._propagationDms[n.sourceAction]=e,t.context.mount()){var r=(dA[n.action]||dA.__default)(e,n),i={propagate:!1,data:e,sourceId:n.propagationSourceId},a=n.sourceId===t.id(),o=r.action[0];a||"highlight"!==o||t.dispatchBehaviour("highlight",r,i)}}}},{key:"data",value:function(){return this.context.metaData()}},{key:"id",value:function(){return"legend-".concat(this.context._id)}},{key:"sourceCanvas",value:function(){return this.context.canvasAlias()}},{key:"shouldApplyHighlightEffect",value:function(t){var e=this.getEntryExitSet("highlight"),n=this.getEntryExitSet("select");if(e&&n){var r,i=e.mergedEnter.uids,a=n.mergedExit.uids;if("highlight"===t)if((r=[]).concat.apply(r,Gp()(i)).filter((function(t){var e;return(e=[]).concat.apply(e,Gp()(a)).includes(t)})).length)return!1}return!0}}]),n}(kk),mA=function(t){return function(e,n){var r,i={},a={},o=Qd(),c=t.context,u=c.measurement().gradientDimensions,s="horizontal"===c.config().align?"x":"y",l=c.axis().source().scale(),f=l.range()["x"===s?0:1];e.call(o().on("start",(function(){var t=$d();i={x:t.x,y:t.y}})).on("drag",(function(){var e=$d();(a={x:e.x,y:e.y}).x=Math.max(0,Math.min(a.x,u.width)),a.y=Math.max(0,Math.min(a.y,u.height)),r={criteria:{range:Rg()({},c.fieldName(),[l.invert(i[s]+2*f),l.invert(a[s]+2*f)].sort((function(t,e){return t-e})))}},n.forEach((function(e){return t.dispatchBehaviour(e,r)}))})).on("end",(function(){var e=$d();(a={x:e.x,y:e.y}).x=Math.max(0,Math.min(a.x,u.width)),a.y=Math.max(0,Math.min(a.y,u.height)),r=i[s]===a[s]?{criteria:null}:{criteria:{range:Rg()({},c.fieldName(),[l.invert(i[s]+2*f),l.invert(a[s]+2*f)].sort((function(t,e){return t-e})))}},n.forEach((function(e){return t.dispatchBehaviour(e,r)}))})))}},bA=function(t){return function(e){var n=function(e){var n=$d(),r=t.context.getCriteriaFromData(e),i={criteria:{dimensions:r},fields:Object.keys(r)};t.triggerPhysicalAction("hover",i),n.stopPropagation()};e.on("mouseover",n).on("mousemove",n).on("mouseout",(function(){var e=$d();t.triggerPhysicalAction("hover",{criteria:null}),e.stopPropagation()}))}},xA=function(t){return function(e,n){e.on("click",(function(e){var r=t.context.getCriteriaFromData(e),i={criteria:{dimensions:r},fields:Object.keys(r)};n.forEach((function(e){return t.dispatchBehaviour(e,i)}))}))}},wA=(gA={},Rg()(gA,"drag",mA),Rg()(gA,"hover",bA),Rg()(gA,"click",xA),gA),_A=function(t,e,n){var r=[],i=e.axisScale,a=e.axisType,o=n.startPos,c=n.endPos,u=n.selectionBoxMeasure,s=n.drawingInfMeasure,l=n.offset,f=t[a];return r=o[a]===c[a]?[]:f+u>=s+l?[i.invert(s+l-u),i.invert(s+l)]:f-l<l?[i.invert(2*l),i.invert(u+2*l)]:[i.invert(f),i.invert(f+u)],"x"===a||r.reverse(),r},kA="horizontal",SA="vertical",MA={height:30,width:30,maxWidth:1/0,maxHeight:1/0,padding:2,margin:2,marginHorizontal:3,paddingRight:4,border:1},EA={text:"",orientation:function(t){return"left"===t||"right"===t?"left":"center"}},CA={buffer:(vA={},Rg()(vA,kA,10),Rg()(vA,SA,10),vA),classPrefix:"muze",borderStyle:"solid",borderColor:"rgba(0,0,0,0)",formatter:{bounds:{lower:"less than",upper:"more than"}},marker:{text:{formatter:function(t){return t}}},item:{text:{orientation:"right",width:10,formatter:function(t,e,n,r){return r.valueParser()(t)}},icon:{className:"legend-icon",height:20,width:20,color:"rgba(192,192,192,0.6)",type:"square"}}},AA=Fs({},CA),PA=Fs(AA,{item:{text:{formatter:function(t){return"".concat(t[0]," - ").concat(t[1])}}}}),DA=function(t){return t&&"string"==typeof t?fl(t):t},IA=8,TA=4,RA=180,NA=90,OA="triangle";n(103);function FA(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=eg()(t);if(e){var i=eg()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Jp()(this,n)}}var LA=function(t){Qp()(n,t);var e=FA(n);function n(){var t;Yp()(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(t=e.call.apply(e,[this].concat(i)))._graphicElems={rect:null},t}return Kp()(n,[{key:"apply",value:function(t,e){var n,r,i,a,o=this.firebolt,c=o.context,u=this.config(),s=c.axis().source(),l="".concat(u.classPrefix,"-").concat(u.className),f=e.criteria,h=this._graphicElems.rect;if(null===f)return h&&h.remove(),this;var d=f.range[o.context.fieldName()],p=s.scale(),g=d?[s.getScaleValue(d[0]),s.getScaleValue(d[1])]:[],v=c.config().align===sA?"x":"y",y=o.context.measurement().gradientDimensions["x"===v?"height":"width"],m=p.range()["x"===v?0:1],b=c.getDrawingContext().svgContainer,x=Fd(b,"g",[1],"".concat(u.classPrefix,"-selection-box-group")),w=IA,_=TA;o.context.config().align===sA?(n=g[0]-m||0,r=w+_,i=g[1]-g[0]||0,a=y):(n=w+_,r=g[1]-m||0,a=g[0]-g[1]||0,i=y);var k=Fd(x,"rect",[{domain:d,x:n,y:r,width:i,height:a}],l,{enter:function(t){!function(t){return function(e,n){var r,i={},a={},o=Qd(),c=t.context,u=c.axis().source().scale(),s=c.config().align===sA?"x":"y",l={drawingInfMeasure:c.measurement().gradientDimensions["x"===s?"width":"height"],offset:u.range()["x"===s?0:1]},f={};e.call(o().on("start",(function(){var t=$d();i=Yd(this,t.sourceEvent),f=t.subject})).on("drag",(function(){var e=$d(),o=f["x"===s?"width":"height"];f.x+=e.dx,f.y+=e.dy,l.selectionBoxMeasure=o,l.startPos=i,l.endPos=a;var h=_A(f,{axisScale:u,axisType:s},l);r={criteria:{range:Rg()({},c.fieldName(),h)},fadeOut:!0},t.dispatchBehaviour(n[0],r)})).on("end",(function(){var e=$d(),o=f["x"===s?"width":"height"];l.selectionBoxMeasure=o,l.startPos=i,l.endPos=a;var h=_A(e,{axisScale:u,axisType:s},l);r={criteria:{range:Rg()({},c.fieldName(),h)},fadeOut:!0,config:{transition:{duration:200}}},t.dispatchBehaviour(n[0],r)})))}}(o)(t,["brush"])}});return k.attr("y",r).attr("x",n).attr("width",i).attr("height",a),this._graphicElems.rect=k,this}}],[{key:"formalName",value:function(){return"selectionBox"}},{key:"defaultConfig",value:function(){return{className:"legend-selection-box",classPrefix:"muze"}}}]),n}(mS),jA=function(t){var e=t.context,n=function(t,n,r){var i=e.config().classPrefix;Od(e.mount()).selectAll(".".concat(i,"-legend-columns")).filter((function(e){return t.uids.has(e.id)})).selectAll("div").classed(n,r)};return{fade:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=e.config().classPrefix;t.mergedEnter.length||t.mergedExit.length?(n(t.mergedExit,r.className||"".concat(i,"-legend-brighten"),!1),n(t.mergedExit,r.className||"".concat(i,"-legend-fadeout"),!0),n(t.mergedEnter,r.className||"".concat(i,"-legend-fadeout"),!1)):n(t.completeSet,r.className||"".concat(i,"-legend-fadeout"),!1)},brighten:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=e.config().classPrefix;t.mergedEnter.length||t.mergedExit.length?(n(t.mergedEnter,r.className||"".concat(i,"-legend-brighten"),!0),n(t.mergedExit,r.className||"".concat(i,"-legend-brighten"),!1)):n(t.completeSet,r.className||"".concat(i,"-legend-brighten"),!1)}}};function BA(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=eg()(t);if(e){var i=eg()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Jp()(this,n)}}var zA=function(t){Qp()(n,t);var e=BA(n);function n(){var t;Yp()(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(t=e.call.apply(e,[this].concat(i)))._strategies=jA(t.firebolt),t._strategy="brighten",t}return Kp()(n,[{key:"apply",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this._strategies[n.strategy||this._strategy];r(t,this)}}],[{key:"formalName",value:function(){return"highlighter"}}]),n}(pS);n(104);function HA(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=eg()(t);if(e){var i=eg()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Jp()(this,n)}}var WA,VA,UA,GA,qA=3*Math.sqrt(3),YA=function(t){Qp()(n,t);var e=HA(n);function n(){var t;Yp()(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(t=e.call.apply(e,[this].concat(i)))._graphicElements={markerElement:null,legendmarkerTextContainer:null,legendmarkerText:null},t}return Kp()(n,[{key:"apply",value:function(t,e){var n,r,i="".concat(this.config().classPrefix,"-").concat(this.config().className);if(e.criteria){var a,o,c,u=this.firebolt,s=u.context.labelManager,l=u.context,f=u.context.config(),h=u.context.scale(),d=f.marker.text.formatter,p=this.config(),g=l.axis().source(),v=l.metaData(),y=h.domain(),m=e.criteria.dimensions,b=m[0]?g.getScaleValue(m[1]):0,x=l.getDrawingContext().svgContainer,w={top:0,left:0,labelText:m[1][0]%1!=0?m[1][0].toFixed(2):m[1][0]},_=(n=l._canvasMount,{top:(r=x.node()).getBoundingClientRect().top-n.getBoundingClientRect().top,left:r.getBoundingClientRect().left-n.getBoundingClientRect().left}),k=_.top,S=_.left,M=s().getSmartText(w.labelText),E=M.oriTextHeight,C=M.oriTextWidth,A=p.size,P=p.shape;l.config().align===sA?(a=b-Math.sqrt(A/qA)+1,o=5,c=RA,w.top=k+o-30,w.left=a+S-C/2-5):(o=b+Math.sqrt(A/(2*qA))-1,a=5,c=NA,w.top=k+o-28+E/2,w.left=a+S-C-10);var D=Fd(x,"g",[1],"".concat(p.classPrefix,"-").concat(p.className,"-group"));this._graphicElements.markerElement||(this._graphicElements.markerElement=Fd(D,"path",[{value:null}],i)),this._graphicElements.legendmarkerTextContainer||(this._graphicElements.legendmarkerTextContainer=Fd(l._canvasMount,"div",[1],"".concat(i,"-text-container")),this._graphicElements.legendmarkerText=Fd(this._graphicElements.legendmarkerTextContainer,"div",[1],"".concat(i,"-text")));var I=function(t,e,n){var r=new(0,n.TextCell)({type:"text",className:"".concat(t,"-text")},{labelManager:e()}).config({maxLines:1});return r._minTickDiff={height:0,width:0},r}(i,s,l._cells);this._graphicElements.markerElement.data([{value:e.criteria}]).attr("transform","translate(".concat(a,",").concat(o,") rotate(").concat(c,")")).attr("d",fl(P).size(A*A)()).classed("".concat(i,"-show"),!0).classed("".concat(i,"-hide"),!1),I.source(d(w.labelText,y,v)),I.render(this._graphicElements.legendmarkerText.node()),this._graphicElements.legendmarkerText.attr("style","top: ".concat(w.top,"px; left:").concat(w.left,"px")).classed("".concat(i,"-show"),!0).classed("".concat(i,"-hide"),!1)}else this._graphicElements.markerElement&&this._graphicElements.legendmarkerText&&(this._graphicElements.markerElement.data([{value:null}]).classed("".concat(i,"-show"),!1).classed("".concat(i,"-hide"),!0),this._graphicElements.legendmarkerText.classed("".concat(i,"-show"),!1).classed("".concat(i,"-hide"),!0))}}],[{key:"formalName",value:function(){return"marker"}},{key:"defaultConfig",value:function(){return{className:"legend-marker",classPrefix:"muze",size:IA,shape:OA}}}]),n}(pS),XA={config:{sanitization:function(t,e){return Fs(t._config||{},e)}},data:{},fieldName:{},legendContainer:{},measurement:{sanitization:function(t,e){var n=Fs(t._measurement,e);return["padding","border","margin"].forEach((function(t){n[t]=Math.min(n[t]>0?n[t]:0,.1*n.maxWidth,.1*n.maxHeight)})),n}},logicalSpace:{},metaData:{onset:function(t,e){return t.firebolt().attachPropagationListener(e)}},range:{sanitization:function(t,e){return t.scale().range(e),t.resetLogicalSpace(),t.store().commit("range",e),e}},scale:{},smartTicks:{},store:{},title:{sanitization:function(t,e){return Fs(t._title||{},e)}},labelManager:{},minTickDistance:{},valueParser:{defaultValue:function(t){return t}}},KA=function(t){var e=t.constructor.type();return{scaleType:e,domain:t.uniqueValues(),steps:t.config().stops||1,scaleFn:uA[e]}},$A=function(t,e){var n,r,i=t[t.length-1],a=Math.ceil(t[1]-t[0]),o=Math.ceil(i-t[0]),c=e.alignment,u=e.smartLabel,s=e.measures,l=e.minTickDistance,f=u.getOriSize(i),h=f.height,d=f.width;return Number.isInteger(i)||(i=i.toFixed(2)),a=a<1?1:a,n=Math.abs(o)/Math.abs(a)*(d+l.width),n-=Math.abs(o),r=Math.abs(o)/Math.abs(a)*h,t=function(t,e,n,r){var i,a,o=r[r.length-1],c=t.measureParam,u=t.smartLabelCalc,s=n[c]/o;if(n[c]>=e[c])return r;i=u.getOriSize(r[0])[c];for(var l=1;l<r.length-1;l++)a=Math.floor(i/s+r[l-1]),r[l]<a&&(r.splice(l,1),l-=1),i=u.getOriSize(r[l])[c];return r}({smartLabelCalc:u,measureParam:"top"===c||"bottom"===c?"width":"height"},{height:r-=Math.abs(o),width:n},{height:s.maxHeight,width:s.maxWidth},t)},QA=function(t,e,n){var r=0,i=n.smartLabel,a=n.measures,o=a.maxWidth,c=a.maxHeight,u=n.alignment,s=i.getOriSize(t[1].toFixed(2));return e=(e=Math.round(e))<1?e+1:e,r="top"===u||"bottom"===u?Math.floor(o/s.width):Math.floor(c/s.height),e=Math.min(e,r),Ll(t,e)},ZA=function(t,e,n){var r=[],i=t.data(),a=t._labelManager;return i.forEach((function(i,o){var c=e?i[e]:i,u=n(c,o,t.metaData(),t),s=a.getOriSize(u),l=s.height,f=s.width;r[o]={height:l,width:f}})),r},JA=function(t,e,n){var r=t.maxItemSpaces,i=t.margin,a=t.itemSpaces,o=n.position,c=n.buffer,u=fA[o],s=0;if(u===sA){var l=c[u];s=a.reduce((function(t,e){return t+e.width+l}),0)}else s=r.width<e?e+2*i:r.width;return s},tP=function(){function t(e){Yp()(this,t);var n=e.registry.interactions;this._data=[],this._metaData=[],this._mount=null,this._fieldName=null,this._title=Object.assign({},EA),this._metaData=null,this._labelManager=e.labelManager,this._cells=e.cells,this._id=ts(),this._measurement=Object.assign({},this.constructor.defaultMeasurement()),this._config=Fs({},this.constructor.defaultConfig());var r=e.labelManager.getOriSize("w");this._minTickDistance={width:3*r.width/4,height:r.height/2},Ps(this,XA),this._computedStyle=Zd(Od("body"),"".concat(this.config().classPrefix,"-legend-item-info")),this._firebolt=new yA(this,{behavioural:Object.assign({},n.behaviours.get(),A),physical:wA,physicalBehaviouralMap:rA},P,aA)}return Kp()(t,[{key:"id",value:function(){return this._id}},{key:"firebolt",value:function(){return arguments.length?this:this._firebolt}},{key:"elemType",value:function(){return"path"}},{key:"canvasAlias",value:function(){return arguments.length?(this._canvasAlias=arguments.length<=0?void 0:arguments[0],this):this._canvasAlias}},{key:"mount",value:function(){return arguments.length?(this._mount=arguments.length<=0?void 0:arguments[0],this.render(),this):this._mount}},{key:"getLabelSpaces",value:function(){var t=this.config(),e=t.item,n=t.classPrefix;return this._labelManager.setStyle(Zd(Od("body"),"".concat(n,"-legend-item-info"))),ZA(this,lA,e.text.formatter)}},{key:"setLegendMeasures",value:function(){var t=this.measurement(),e=t.width,n=t.height,r=t.maxWidth,i=t.maxHeight,a=t.padding,o=t.margin,c=t.border,u=this.config().align,s=2*a,l=2*c,f=2*o;this.data(this.dataFromScale());var h=this.getTitleSpace(),d=h.height>0?h.height+s:0,p=h.width+s,g=this.getLabelSpaces(s,u),v=function(t,e,n){var r=0,i=0,a={width:0,height:0},o=e.effPadding,c=e.titleWidth,u=e.labelSpaces,s=e.titleHeight,l=e.maxWidth,f=t.item,h=t.align,d=f.icon,p=f.text.orientation,g=[],v=[],y=0;return u.forEach((function(t,e){var u={width:0,height:0},s={width:0,height:0},l=n[e]||{};"left"===p||"right"===p?(t.width+=o,s.width=(l.size?2*Math.sqrt(l.size/Math.PI):d.width)+o,y=Math.max(s.width,y),u.width=t.width+y,t.height=Math.max(t.height,d.height)+o,s.height=t.height,u.height=t.height):(t.width=Math.max(t.width,l.size?2*Math.sqrt(l.size/Math.PI):d.width)+o,s.width=t.width,u.width=t.width,y=Math.max(s.width,y),t.height+=o,s.height=d.height+o,u.height=t.height+s.height),"horizontal"===h?r=Math.max(r,u.height):(r+=u.height,i=Math.max(i,u.width,c)),a={width:Math.max(u.width,a.width),height:Math.max(u.height,a.height)},g.push(u),v.push(s)})),g.forEach((function(t,e){if("horizontal"===h)t.height=r,"left"===p||"right"===p?(u[e].height=r,v[e].height=r,g[e].width=u[e].width+v[e].width+2*o):(u[e].width=v[e].width,g[e].width=v[e].width,u[e].width=v[e].width),i+=g[e].width;else if(t.width=Math.max(i,l),"top"===p||"bottom"===p)u[e].width=i,v[e].width=i,y=i;else{var n=u[e].width,c=a.width-y;v[e].width=y,g[e].width=n+y,u[e].width=Math.max(n,c),i=Math.max(i,t.width)}})),i=Math.ceil(Math.max(i,c))+o,r+=s+o,{totalHeight:r=Math.ceil(r),totalWidth:i,itemSpaces:g,iconSpaces:v,maxItemSpaces:a,maxIconWidth:y}}(this.config(),{effPadding:s,titleWidth:p,labelSpaces:g,titleHeight:d,maxWidth:r,maxHeight:i},this.data()),y=v.totalHeight,m=v.totalWidth,b=v.itemSpaces,x=v.iconSpaces,w=v.maxItemSpaces,_=v.maxIconWidth;return this.measurement({width:Math.max(m,e)+f+l,height:Math.max(y,n)+f+l,labelSpaces:g,iconSpaces:x,itemSpaces:b,maxItemSpaces:w,maxIconWidth:_,titleSpaces:{width:Math.min(r,this.measurement().width)-f-l,height:d}}),this}},{key:"getTitleSpace",value:function(){return this._labelManager.setStyle(Zd(Od("body"),"".concat(this.config().classPrefix,"-legend-title"))),this._labelManager.getOriSize(this.title().text?this.title().text:"")}},{key:"renderTitle",value:function(t){var e=this.measurement(),n=e.titleSpaces,r=e.border,i=e.padding,a=e.maxWidth,o=JA(this.measurement(),this._labelManager.getOriSize(this._title.text).width,this.config()),c=this.config(),u=c.borderStyle,s=c.borderColor;return function(t,e,n,r){var i=r.item.text.orientation,a="left",o=n.alignment,c=n.maxWidth,u=n.width,s=n.height,l=n.border,f=n.padding;"top"!==i&&"bottom"!==i&&o!==sA||(a="center");var h=Math.min(c,u),d=Fd(t,"table",[1],"".concat(r.classPrefix,"-legend-title")).style("width","".concat(h,"px")).style("height","".concat(s,"px")).style("border-bottom","".concat(l,"px ").concat(r.borderStyle," ").concat(r.borderColor)).style("text-align",e.orientation instanceof Function?e.orientation(r.position):e.orientation);return Fd(d,"td",[1],"".concat(r.classPrefix,"-legend-title-text")).style("width","".concat(h,"px")).style("max-width","".concat(c,"px")).style("height","100%").style("line-height",1).style("padding","".concat(f,"px")).text(e.text).style("text-align",a).style("overflow-x","scroll").node()}(t,this.title(),{height:n.height,width:o,maxWidth:a,border:r,padding:i,borderStyle:u,borderColor:s,alignment:fA[this.config().position]},this.config())}},{key:"render",value:function(){var t,e=this.config(),n=e.classPrefix,r=e.borderStyle,i=e.borderColor,a=e.position,o=this.measurement(),c=o.border,u=o.marginHorizontal,s=o.maxHeight,l=o.height,f=o.width,h=o.maxWidth,d=this.measurement().margin,p=Fd(Od(this.mount()),"div",[1],"".concat(n,"-legend-box"));switch(a){case"top":t="margin-".concat("bottom"),d=u;break;case"left":t="margin-".concat("right");break;case"bottom":t="margin-".concat("top"),d=u;break;default:t="margin-".concat("left")}p.classed("".concat(n,"-legend-box-").concat(this._id),!0),p.style("float","left");var g=JA(this.measurement(),this._labelManager.getOriSize(this._title.text).width,this.config()),v=Math.min(h,g);return f<v&&Od(this.mount()).style("width","".concat(v,"px")),p.style("width","".concat(v,"px")).style("height","".concat(Math.min(s,l),"px")).style("".concat(t),"".concat(d,"px")).style("border","".concat(c,"px ").concat(r," ").concat(i)),this.legendContainer(p.node()),this.renderTitle(p),this.firebolt().attachPropagationListener(this.metaData()),p}},{key:"getCriteriaFromData",value:function(t){var e=this.fieldName();return"measure"===this.metaData().getSchema()[0].type?Rg()({},e,t.range):Rg()({},e,[t.rawVal])}},{key:"getRangeFromIdentifiers",value:function(t){var e=t.fields,n=t.entrySet,r=this.data().reduce((function(t,e){return t[e.id]=e,t}),{});return e.reduce((function(t,e){return t[e]=n.reduce((function(t,e){return e in r&&t.push(r[e].range),t}),[]),t}),{})}},{key:"setParentInfo",value:function(t){this._canvasMount=t.canvasRoot}}],[{key:"create",value:function(e){return new t(e)}},{key:"defaultConfig",value:function(){return CA}},{key:"defaultMeasurement",value:function(){return MA}}]),t}(),eP=(WA={},Rg()(WA,sA,{datasets:function(t){return{row:[1],column:t}},itemContainerMeasures:function(t,e){var n=t.itemSpaces,r=t.width,i=e.buffer;return{row:{width:"".concat(r+n.length*i[sA]||1,"px"),padding:"".concat(0,"px")},column:{width:function(t,e){return"".concat(n[e].width+i[sA],"px")},padding:"".concat(0,"px")}}},getStepSpacesInfo:function(t){var e=t.maxItemSpaces;return{iconHeight:t.height,iconWidth:e.width,stepPadding:{horizontal:!0,vertical:!1}}}}),Rg()(WA,"vertical",{datasets:function(t){return{row:t,column:function(t){return[t]}}},itemContainerMeasures:function(t,e){var n=t.width,r=e.padding;return{row:{width:"".concat(n,"px"),padding:"".concat(r,"px")},column:{width:"".concat(n,"px"),padding:"".concat(0,"px")}}},getStepSpacesInfo:function(t){var e=t.maxItemSpaces,n=t.width;return{iconHeight:e.height,iconWidth:n,stepPadding:{horizontal:!1,vertical:!0}}}}),WA),nP=(VA={},Rg()(VA,"left",eP.vertical),Rg()(VA,"right",eP.vertical),Rg()(VA,"top",eP[sA]),Rg()(VA,"bottom",eP[sA]),VA),rP=(UA={},Rg()(UA,"left","end"),Rg()(UA,"right","start"),Rg()(UA,"top","center"),Rg()(UA,"bottom","center"),UA),iP=(GA={},Rg()(GA,"left",[lA,"shape"]),Rg()(GA,"right",["shape",lA]),Rg()(GA,"top",[lA,"shape"]),Rg()(GA,"bottom",["shape",lA]),GA),aP=function(t,e,n,r){var i,a,o,c,u=t.measurement(),s=u.margin,l=u.border,f=u.titleSpaces,h=u.width,d=u.height,p=u.maxWidth,g=u.maxHeight;a=d-(f.height+2*s+2*l),i=h-(2*s+2*l),o=g-(f.height+2*s+2*l),c=p-(2*s+2*l);var v=Fd(e,"div",[1],"".concat(n,"-legend-body"));return v.style("width","".concat(i,"px")),v.style("height","".concat(a,"px")),v.select(".".concat(n,"-legend-overflow")).remove(),c&&c<i&&(v=v.style("width","".concat(c,"px")).style("overflow-x","scroll")),o&&o<a&&v.style("height","".concat(o,"px")).style("overflow-y","scroll"),{legendItem:function(t,e,n){var r=n.measurement(),i=n.config(),a=r.itemSpaces,o=i.classPrefix,c=i.position,u=nP[c],s=u.datasets(e),l=u.itemContainerMeasures(r,i),f=Fd(t,"div",s.row,"".concat(o,"-legend-row"));f.style("height",(function(t,e){return"".concat(a[e].height,"px")})),f.style("width",l.row.width),f.style("padding",l.row.padding);var h=Fd(f,"div",s.column,"".concat(o,"-legend-columns"));return h.style("width",l.column.width),h.style("padding",l.column.padding),h}(v=Fd(v,"div",[1],"".concat(n,"-legend-overflow")),r,t)}},oP=function(t,e){var n=t.config(),r=n.classPrefix,i=n.item.text.orientation,a=iP[i],o=Fd(e,"div",(function(e,n){return a.map((function(r){return[r,e[r],e.color,e.size,e.value,t.fieldName(),n]}))}),"".concat(r,"-legend-item-info")),c=rP[i];return o.classed(c,!0),{itemSkeleton:o}},cP=function(t,e,n,r){var i=r.measurement(),a=i.padding,o=i.labelSpaces,c=i.iconSpaces,u=i.maxIconWidth,s=r.config().align.align,l=n?2*-a:0;return t[0]===lA?"".concat(o[t[6]][e],"px"):"".concat("width"!==e||n||"vertical"!==s?s===sA?u:c[t[6]][e]-l:u,"px")},uP=function(t,e,n,r){var i=r.classPrefix,a=r.iconHeight,o=r.padding,c=r.color,u=r.iconWidth,s=r.align,l=r.maxIconWidth;s===sA&&(l=u+2*o);var f=Fd(e,"svg",(function(t){return[t]}),"".concat(i,"-legend-icon-svg")).attr("width",l).attr("height",a).style("width","".concat(Math.ceil(l),"px")).style("height","".concat(a,"px")),h=l/2-o;"rect"!==t?function t(e,n,r){var i,a=n,o=e[1]||r,c=cA[o]||cA.default,u=e[3]||c*Math.PI;if(o instanceof Promise)o.then((function(r){return e.shape=r,t(e,n)}));else{if(o instanceof Element){var s=o.cloneNode(!0);if("img"===s.nodeName.toLowerCase()){var l=s.src||s.href;(s=document.createElementNS("http://www.w3.org/2000/svg","image")).setAttribute("href",l)}return Od(s).attr("transform","scale(".concat(u/100,")")),Od(a.node().appendChild(s))}var f;if("string"==typeof o)return f=/^[mzlhvcsqta]\s*[-+.0-9][^mlhvzcsqta]+/i.test(i=o)&&/[\dz]$/i.test(i)&&i.length>4?o:DA(o).size(u)(),Fd(a,"path",(function(t){return[t]})).attr("d",f)}return e[1]="circle",t(e,n,"circle")}(n,Fd(f,"g",[n[1]],"".concat(i,"-legend-icon")),t).attr("transform","translate(".concat(h," ").concat(a/2,")")).attr("fill",n[2]||c).attr("stroke",n[2]||c):Fd(f,"rect",[n[1]],"".concat(i,"-legend-icon")).attr("x",0).attr("y",0).attr("width",l).attr("height",a).attr("fill",n[2]||c)};function sP(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=eg()(t);if(e){var i=eg()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Jp()(this,n)}}var lP=function(t){Qp()(n,t);var e=sP(n);function n(){return Yp()(this,n),e.apply(this,arguments)}return Kp()(n,[{key:"dataFromScale",value:function(){var t=gt.FieldType.MEASURE,e=gt.FieldSubtype.TEMPORAL,n=this.scale(),r=KA(n),i=r.scaleType,a=r.domain,o=r.scaleFn,c=r.steps,u=this.metaData().getField(this.fieldName()),s=u.schema(),l=s.type,f=s.subtype,h=[],d=(h="size"===i&&l===t?c instanceof Array?c:Ll(a,a.length):f===e?Gp()(new Set(u.data())):Gp()(new Set(a))).length;return h=h.map((function(r,a){var c,s=0,p=0,g=h[a];if(l===t){s=parseInt(h[a],10);var v=parseInt(h[a+1]?+h[a+1]:+s,10);p=[s,a===d-1?v:v-1]}else{var y=gt.getActualValue(g);f===e&&(y=kl(h[a],u.minimumConsecutiveDifference())),s=y,p=[y]}return c={},Rg()(c,i,n[o](r)),Rg()(c,"value",s),Rg()(c,"id",g),Rg()(c,"range",p),Rg()(c,"rawVal",g),c})).filter((function(t){return null!==t.value})),h="size"===i?h.sort((function(t,e){return t[i]-e[i]})):h.sort((function(t,e){return Pl(t.value,e.value)}))}},{key:"render",value:function(){var t=this.firebolt(),e=this.data(),r=this.config().classPrefix,i=ov()(eg()(n.prototype),"render",this).call(this,this.mount()),a=aP(this,i,r,e).legendItem;return function(t,e){var n=t._labelManager,r=t.config(),i=r.item,a=r.classPrefix,o=r.shape,c=r.align,u=t.measurement(),s=u.maxIconWidth,l=u.padding,f=u.margin,h=u.border,d=i.icon,p=d.width,g=d.height,v=d.color,y=d.className,m=i.text.orientation,b=i.text.formatter;n.useEllipsesOnOverflow(!0),Ld(e,{width:function(e){return cP(e,"width",!1,t)},height:function(e){return cP(e,"height",!1,t)},"text-align":"center",padding:"".concat(l,"px")});var x="top"===m||"bottom"===m||!l||!f||!h?0:10;n.setStyle(t._computedStyle);var w=t.metaData(),_=hA[m]||"left";e.each((function(e,n){e[0]===lA?Od(this).text(b(e[1],n,w,t)).style("padding-".concat(_),"0px").style("margin-".concat(_),"".concat(c===sA?2:x,"px")):(Od(this).classed("".concat(a,"-").concat(y),!0),Od(this).classed("".concat(a,"-").concat(y,"-").concat(n),!0),uP(o,Od(this),e,{classPrefix:a,iconWidth:2*Math.sqrt(e[3]/Math.PI)||p,iconHeight:g,maxIconWidth:s,padding:l,color:v,align:c}))}))}(this,oP(this,a).itemSkeleton),i.selectAll("div").filter((function(t,e,n){return!n[e].classList.contains("".concat(r,"-legend-body"))})).style("float","left"),t.mapActionsAndBehaviour(),t.createSelectionSet({keys:this.data().map((function(t){return t.rawVal}))}),i}}],[{key:"create",value:function(t){return new n(t)}},{key:"type",value:function(){return"discrete"}}]),n}(tP),fP=function(t){return"number"==typeof t[0].value?t.reduce((function(t,e){return[Math.min(e.value,t[0]),Math.max(e.value,t[1])]}),[Number.MAX_VALUE,Number.MIN_VALUE]):t.map((function(t){return t.value}))},hP=function(t,e,n,r){var i=fP(n),a=Fd(t,"div",[1],"".concat(e,"-legend-body")),o=Fd(a,"svg",[1],"".concat(e,"-gradient")),c=Fd(o,"g",[1],"".concat(e,"-gradient-group"));return{legendContainer:a,legendGradCont:c,legendGradSvg:o,linearGradient:function(t,e,n,r){var i=Fd(t,"defs",[1]),a=Fd(i,"linearGradient",[1]).attr("id","linear-gradient-".concat(r)).attr("x1","0%").attr("y2","0%");return Fd(a,"stop",e,"stop-gradient").attr("offset",(function(t){return"".concat(100*(t.value-n[0])/(n[1]-n[0])||1,"%")})).attr("stop-color",(function(t){return t.color})),a}(o,n,i,r),legendRect:Fd(c,"rect",[1],"".concat(e,"-gradient-rect"))}},dP=function(t,e,n,r){var i=t.axis();i.source().config({tickFormat:function(e,n){return t.config().item.text.formatter(e,n,t.metaData(),t)}}),i.setAvailableSpace(r,n),i.render(e.node()),i.source().render()};function pP(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=eg()(t);if(e){var i=eg()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Jp()(this,n)}}var gP=function(t){Qp()(n,t);var e=pP(n);function n(){return Yp()(this,n),e.apply(this,arguments)}return Kp()(n,[{key:"axis",value:function(){return arguments.length?(this._axis=arguments.length<=0?void 0:arguments[0],this):this._axis}},{key:"dataFromScale",value:function(){var t=[],e=this.scale(),n=KA(e),r=n.scaleType,i=n.domain,a=n.steps,o=n.scaleFn,c={smartLabel:this.labelManager(),measures:this.measurement(),alignment:this.config().position,minTickDistance:this.minTickDistance()};return a instanceof Array?(i[0]<a[0]&&(t[0]=i[0]),t=[].concat(Gp()(t),Gp()(a)),i[i.length-1]>a[a.length-1]&&t.push(i[1]),t=Gp()(new Set(t)).sort((function(t,e){return t-e})),t=$A(t,c)):t=QA(i,a-1,c),(t=Gp()(new Set(t)).sort((function(t,e){return t-e}))).map((function(n,i){var a,c=t[i];return a={},Rg()(a,r,"size"===r?e[o](n)*e.getScaleFactor():e[o](n)),Rg()(a,"value",+c.toFixed(1)),Rg()(a,"id",i),a})).filter((function(t){return null!==t.value}))}},{key:"getLabelSpaces",value:function(t){this.config({item:{text:{orientation:this.config().position}}});var e,n,r,i,a,o=(n=(e=this).data(),r=e.config().align,i=e._cells.AxisCell,(a=new iy({id:"legend-".concat(e._id),orientation:r===SA?"right":"bottom",style:e._computedStyle,nice:!1,showAxisName:!1,tickValues:n.map((function(t){return t.value})),fixedBaseline:!1,labels:{rotation:null}},{labelManager:e._labelManager})).domain(fP(n)),a.range([1,1]),(new i).source(a).config({margin:{left:0,bottom:0,top:0,right:0}})),c=o.getLogicalSpace(),u={width:c.width-t,height:c.height-t},s=o.source().domain().length,l=new Array(s).fill(u);return this.axis(o),l}},{key:"getDrawingContext",value:function(){return{svgContainer:this._legendGradientSvg}}},{key:"render",value:function(){var t=this.firebolt(),e=ov()(eg()(n.prototype),"render",this).call(this,this.mount());return function(t,e){var n,r,i=t.config(),a=i.align,o=i.classPrefix,c=i.item,u=t.data(),s=hP(e,o,u,t._id),l=s.legendContainer,f=s.legendGradSvg,h=s.legendGradCont,d=s.linearGradient,p=s.legendRect,g=t.axis().source().getAxisDimensions().tickDimensions,v=t.measurement(),y=v.padding,m=v.margin,b=v.border,x=v.titleSpaces,w=v.maxItemSpaces,_=v.maxHeight,k=v.maxWidth,S=v.height,M=v.width,E={};n=Math.floor(Math.min(S,_)-(x.height+2*m+2*b)),r=Math.floor(Math.min(M,k)-(2*m+2*b));var C=IA+TA;a===kA?(E.height=c.icon.height,E.width=r-2*y-g.width/2,d.attr("x2","100%").attr("y1","0%"),h.attr("transform","translate( ".concat(g.width/2," ").concat(C,")")),dP(t,l,n-c.icon.height-y,r-2*y-1),Ld(l,{height:"".concat(w.height+b+y,"px"),width:"".concat(Math.min(M,k),"px"),padding:"".concat(y,"px")}),p.attr("height",E.height),p.attr("width",E.width-g.width/2)):(E.height=n-2*y-g.height/2,E.width=c.icon.width,d.attr("x2","0%").attr("y1","100%"),h.attr("transform","translate(".concat(C," ").concat(g.height/2,")")),dP(t,l,n-2*y-1,r-(E.width+C)-2*y),Ld(l,{height:"".concat(Math.min(S,_),"px"),width:"".concat(k,"px"),padding:"".concat(y,"px")}),p.attr("height",E.height-g.height/2),p.attr("width",E.width)),Ld(f,{height:"".concat(E.height+C,"px"),width:"".concat(E.width+C,"px")}),Ld(p,{fill:"url(#linear-gradient-".concat(t._id,")")}),f.attr("height",E.height+C),f.attr("width",E.width+C),t.measurement({gradientDimensions:E}),t._legendGradientSvg=f}(this,e),e.selectAll("div").style("float","left"),t.mapActionsAndBehaviour(),t.mapSideEffects(Rg()({},"highlight",["marker"])),t.createSelectionSet({keys:this.data().map((function(t){return t.id}))}),e}},{key:"getCriteriaFromData",value:function(t){return[[this.fieldName()],[t.value]]}},{key:"getRangeFromIdentifiers",value:function(t){var e=t.fields,n=t.criteria;return e.reduce((function(t,e){return t[e]=n[e],t}),{})}}],[{key:"create",value:function(t){return new n(t)}},{key:"type",value:function(){return"gradient"}}]),n}(tP);function vP(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=eg()(t);if(e){var i=eg()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Jp()(this,n)}}var yP,mP=function(t){Qp()(n,t);var e=vP(n);function n(){return Yp()(this,n),e.apply(this,arguments)}return Kp()(n,[{key:"dataFromScale",value:function(){var t=[],e=this.scale(),n=KA(e),r=n.scaleType,i=n.domain,a=n.steps,o=n.scaleFn,c=function(t){return t%1!=0},u={smartLabel:this.labelManager(),measures:this.measurement(),alignment:this.config().position,minTickDistance:this.minTickDistance()};return a instanceof Array?(i[0]<a[0]&&(t[0]=i[0]),t=[].concat(Gp()(t),Gp()(a)),i[i.length-1]>a[a.length-1]&&t.push(i[1]),t=Gp()(new Set(t)).sort((function(t,e){return t-e}))):t=QA(i,a,u),t=(t=Gp()(new Set(t)).sort((function(t,e){return t-e}))).map((function(n,i){var a,u,s=null;if(i<t.length-1){var l=c(n)?n.toFixed(1):n,f=+t[i+1],h=c(f)?f.toFixed(1):f;s="".concat(l," - ").concat(h),u=[l,h]}else if(1===t.length){s=c(n)?n.toFixed(1):n;var d=+t[i+1];u=[s,c(d)?d.toFixed(1):d]}return a={},Rg()(a,r,"size"===r?e[o](n)*e.getScaleFactor():e[o](n)),Rg()(a,"value",s),Rg()(a,"id",i+1),Rg()(a,"range",u),a})).filter((function(t){return null!==t.value}))}},{key:"getLabelSpaces",value:function(){this.config({item:{text:{orientation:this.config().position}}});var t=this.config().item;return ZA(this,"range",t.text.formatter)}},{key:"elemType",value:function(){return"rect"}},{key:"render",value:function(){var t=this.firebolt(),e=this.config(),r=e.classPrefix,i=e.position,a=function(t){var e;return e={},Rg()(e,"left",t.reverse()),Rg()(e,"right",t.reverse()),Rg()(e,"top",t),Rg()(e,"bottom",t),e}(this.data())[i],o=ov()(eg()(n.prototype),"render",this).call(this,this.mount()),c=aP(this,o,r,a).legendItem;return function(t,e){var n=t._labelManager,r=t.config(),i=r.item,a=r.position,o=r.classPrefix,c=t.measurement(),u=c.maxItemSpaces,s=c.maxIconWidth,l=c.padding,f=i.icon,h=f.width,d=f.height,p=f.color,g=i.text.formatter;n.useEllipsesOnOverflow(!0);var v=nP[a].getStepSpacesInfo({maxItemSpaces:u,height:d,width:h}),y=v.iconHeight,m=v.iconWidth,b=v.stepPadding;Ld(e,{width:function(e){return cP(e,"width",b.horizontal,t)},height:function(e){return cP(e,"height",b.vertical,t)},"text-align":"center",padding:"".concat(l,"px")}),n.setStyle(t._computedStyle);var x=t.metaData(),w=t.data();e.each((function(e,n){if(e[0]===lA){var r=g([w[e[6]].range[0],w[e[6]].range[1]],n,x,t);Od(this).text(r)}else uP("rect",Od(this),e,{classPrefix:o,iconWidth:m,iconHeight:y,maxIconWidth:s,color:p})}))}(this,oP(this,c).itemSkeleton),o.selectAll("div").style("float","left"),t.mapActionsAndBehaviour(),t.createSelectionSet({keys:this.data().map((function(t){return t.id}))}),o}},{key:"getCriteriaFromData",value:function(t){var e=this.fieldName();return Rg()({},e,t.range)}}],[{key:"create",value:function(t){return new n(t)}},{key:"type",value:function(){return"step"}},{key:"defaultConfig",value:function(){return PA.buffer[sA]=0,PA}}]),n}(tP),bP="padding",xP="border",wP="margin",_P=["script","style"],kP={true:"circle",false:"square"},SP=(yP={},XC()(yP,"".concat("ordinal","-",!0,"-").concat("color"),lP),XC()(yP,"".concat("ordinal","-",!0,"-").concat("size"),lP),XC()(yP,"".concat("ordinal","-",!0,"-").concat("shape"),lP),XC()(yP,"".concat("ordinal","-",!1,"-").concat("color"),lP),XC()(yP,"".concat("ordinal","-",!1,"-").concat("shape"),lP),XC()(yP,"".concat("ordinal","-",!1,"-").concat("size"),lP),XC()(yP,"".concat("linear","-",!1,"-").concat("size"),lP),XC()(yP,"".concat("linear","-",!0,"-").concat("size"),lP),XC()(yP,"".concat("linear","-",!1,"-").concat("shape"),lP),XC()(yP,"".concat("linear","-",!0,"-").concat("color"),mP),XC()(yP,"".concat("linear","-",!1,"-").concat("color"),gP),yP);function MP(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return EP(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return EP(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,c=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return o=t.done,t},e:function(t){c=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(c)throw a}}}}function EP(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var CP=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return UC()(eE,qC()(e.map((function(t){return new rE(t)}))))};function AP(t){if(t.nodeType===Node.ELEMENT_NODE)if(-1!==_P.indexOf(t.tagName.toLowerCase()))t.parentNode.removeChild(t);else{var e,n=MP(t.childNodes);try{for(n.s();!(e=n.n()).done;){AP(e.value)}}catch(t){n.e(t)}finally{n.f()}}}function PP(t){for(var e="",n=arguments.length<=1?0:arguments.length-1,r=0;r<n;++r)e+=t[r]+(r+1<1||arguments.length<=r+1?void 0:arguments[r+1]);e+=t[r];var i=document.createDocumentFragment(),a=document.createElement("div");i.appendChild(a),a.innerHTML=e,AP(a);var o=a.innerHTML;return function(){return o}}var DP,IP,TP=n(12),RP=n.n(TP),NP=n(13),OP=n.n(NP),FP=function(t){var e=t.map((function(t){return t.alias()}));return{behaviours:{"*":function(t){var n=t.sourceCanvas;return!n||-1!==e.indexOf(n)}},sideEffects:{"*":function(t){var n=t.sourceCanvas;return!n||-1!==e.indexOf(n)}}}},LP=function(t,e,n){t.forEach((function(t){t.composition().visualGroup.matrixInstance().value.each((function(t){return e(t.valueOf().firebolt())})),n&&n(t),t._throwback.registerImmediateListener([ct.MATRIX_CREATED],function(t,e){return function(){t.composition().visualGroup.matrixInstance().value.each((function(t){return e(t.valueOf().firebolt())}))}}(t,e))}))},jP=function(t,e,n,r){t._registrableComponents.forEach((function(t){t.composition().visualGroup.resolver().setFireboltDependencies(e,r),t.firebolt()[n](r)}))},BP=new(function(){function t(){RP()(this,t),this._registrableComponents=[]}return OP()(t,[{key:"for",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this._registrableComponents=e,this}},{key:"registerPhysicalActions",value:function(t){return jP(this,"physicalActions","registerPhysicalActions",t),this}},{key:"registerBehaviouralActions",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return jP(this,"behaviouralActions","registerBehaviouralActions",e),this}},{key:"registerPhysicalBehaviouralMap",value:function(t){return LP(this._registrableComponents,(function(e){e.registerPhysicalBehaviouralMap(t)}),(function(e){e.firebolt().registerPhysicalBehaviouralMap(t)})),this}},{key:"registerPropagationBehaviourMap",value:function(t){return LP(this._registrableComponents,(function(e){e.registerPropagationBehaviourMap(t)}),(function(e){e.firebolt().registerPropagationBehaviourMap(t)})),this}},{key:"mapSideEffects",value:function(t){return LP(this._registrableComponents,(function(e){e.mapSideEffects(t)}),(function(e){e.firebolt().mapSideEffects(t)})),this}},{key:"registerSideEffects",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return jP(this,"sideEffects","registerSideEffects",e),this}},{key:"dissociateBehaviour",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return LP(this._registrableComponents,(function(t){e.forEach((function(e){return t.dissociateBehaviour(e[0],e[1])}))}),(function(t){e.forEach((function(e){return t.firebolt().dissociateBehaviour(e[0],e[1])}))})),this}},{key:"dissociateSideEffect",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return LP(this._registrableComponents,(function(t){e.forEach((function(e){return t.dissociateSideEffect(e[0],e[1])}))}),(function(t){e.forEach((function(e){return t.firebolt().dissociateSideEffect(e[0],e[1])}))})),this}},{key:"enableCrossInteractivity",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this._registrableComponents,n=Fs(Fs({},FP(e)),t);return e.forEach((function(t){t.firebolt().interactionPolicy(n)})),this}}]),t}()),zP=n(30),HP=n.n(zP),WP={position:"top",align:"left",padding:4,className:"".concat("muze","-title-container")},VP={position:"top",align:"left",padding:16,maxLines:2,className:"".concat("muze","-subtitle-container")},UP={className:"".concat("muze","-message-container"),baseFontLimit:16,upperFontLimit:24,baseSizeLimit:100,upperSizeLimit:300,fractionImage:.8,fractionChild:.7},GP=(DP={},XC()(DP,"rows",{value:null,meta:{typeCheck:"constructor",typeExpected:"Array"}}),XC()(DP,"columns",{value:null,meta:{typeCheck:"constructor",typeExpected:"Array"}}),XC()(DP,"color",{value:null,meta:{typeCheck:"constructor",typeExpected:"Object",sanitization:function(t){return"string"!=typeof t&&t?t:{field:t}}}}),XC()(DP,"shape",{value:null,meta:{typeCheck:"constructor",typeExpected:"Object",sanitization:function(t){return"string"!=typeof t&&t?t:{field:t}}}}),XC()(DP,"size",{value:null,meta:{typeCheck:"constructor",typeExpected:"Object",sanitization:function(t){return"string"!=typeof t&&t?t:{field:t}}}}),XC()(DP,"detail",{value:[],meta:{typeCheck:"constructor",typeExpected:"Array"}}),XC()(DP,"layers",{value:[],meta:{typeCheck:"constructor",typeExpected:"Array"}}),XC()(DP,"transform",{value:null,meta:{typeCheck:"constructor",typeExpected:"Object"}}),DP),qP=(IP={},XC()(IP,"title",{value:[null,null],meta:{takesMultipleParams:!0,typeCheck:function(t){var e=N()(t,2),n=e[0],r=e[1];return"function"==typeof n&&"object"===HP()(r)},sanitization:function(t){var e=N()(t,2),n=e[0],r=e[1],i=n;"string"!=typeof n&&n||(i=function(){return n});var a=Fs({},WP);return[i,Fs(a,r)]}}}),XC()(IP,"subtitle",{value:[null,null],meta:{takesMultipleParams:!0,typeCheck:function(t){var e=N()(t,2),n=e[0],r=e[1];return"function"==typeof n&&"object"===HP()(r)},sanitization:function(t){var e=N()(t,2),n=e[0],r=e[1],i=n;"string"!=typeof n&&n||(i=function(){return n});var a=Fs({},VP);return[i,Fs(a,r)]}}}),IP),YP=function(){function t(e,n,r){Yp()(this,t),this._seed=r,this._boundBox={height:n.height,width:n.width,top:null,left:null},this._renderAt=null,this._alignWith=null,this._alignment=null,this._target=null,this._position=null,this._componentName=e,this._className=null}return Kp()(t,[{key:"getLogicalSpace",value:function(){throw new Error("getLogicalSpace is not defined")}},{key:"setSpatialConfig",value:function(){throw new Error("setSpatialSpace is not defined")}},{key:"name",value:function(t){return t&&(this._componentName=t),this._componentName}},{key:"target",value:function(t){return t&&(this._target=t),this._target}},{key:"position",value:function(t){return t&&(this._position=t),this._position}},{key:"alignment",value:function(t){return t&&(this._alignment=t),this._alignment}},{key:"alignWith",value:function(t){return t&&(this._alignWith=t),this._alignWith}},{key:"renderAt",value:function(t){return t&&(this._renderAt=t),this._renderAt}},{key:"boundBox",value:function(t){return t&&Object.assign(this._boundBox,t),this._boundBox}},{key:"className",value:function(t){return t&&(this._className=t),this._className}},{key:"draw",value:function(){throw new Error("draw is not defined")}},{key:"attachListener",value:function(){return this}}]),t}();function XP(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=eg()(t);if(e){var i=eg()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Jp()(this,n)}}var KP=function(t){Qp()(n,t);var e=XP(n);function n(){return Yp()(this,n),e.apply(this,arguments)}return Kp()(n,[{key:"getLogicalSpace",value:function(){return{width:this.boundBox().width,height:this.boundBox().height}}},{key:"setSpatialConfig",value:function(t){return this.boundBox({top:t.y,left:t.x}),this.newDimensions={width:t.width,height:t.height},this.renderAt(t.renderAt),this}},{key:"draw",value:function(){if(!this.component)throw new Error("Component not set for ".concat(this.componentName));return this.component.mount(document.getElementById(this.renderAt)),this}}]),n}(YP),$P={classPrefix:"muze",interaction:{sideEffects:{tooltip:{common:!0},selectionBox:{}},behaviours:{highlight:{common:!0},select:{common:!0},brush:{common:!1},filter:{common:!0}},tooltip:{}},pagination:"scroll",scrollBar:{thickness:10,speed:2,vertical:{align:"right"},horizontal:{align:"bottom"}},legend:{position:"right",color:{show:!0,padding:1,margin:3,border:1,height:20,width:20},shape:{show:!0,padding:1,margin:3,border:1,height:20,width:20},size:{show:!0,padding:1,margin:3,border:1,height:20,width:20}},showHeaders:!1,minWidth:100,minHeight:100,facet:{rows:{minCharacters:3},columns:{maxLines:2,verticalAlign:"middle",minCharacters:1}},border:{style:"solid",color:"#d6d6d6",width:2,collapse:!0,spacing:0},autoGroupBy:{disabled:!1},autoTemporalSort:{disabled:!1},invalidValues:{},sort:{}},QP=["sort"],ZP="".concat($P.classPrefix,"-layout-container-component"),JP="".concat($P.classPrefix,"-layout-container"),tD=function(){function t(e){Yp()(this,t),this._host=e.host||null,this._cut=e.cut||null,this._ratioWeight=0===e.ratioWeight?0:e.ratioWeight||1,this._preferred=e.preferred||!1,this._lanes=e.lanes||[],this._remainingHeight=0,this._remainingWidth=0}return Kp()(t,[{key:"host",value:function(t){return t&&(this._host=t),this._host}},{key:"preferred",value:function(t){return t&&(this._preferred=t),this._preferred}},{key:"cut",value:function(t){return t&&(this._cut=t),this._cut}},{key:"ratioWeight",value:function(t){return t&&(this._ratioWeight=t),this._ratioWeight}},{key:"lanes",value:function(t){return t&&(this._lanes=t),this._lanes}},{key:"remainingHeight",value:function(t){return t&&(this._remainingHeight=t),this._remainingHeight}},{key:"remainingWidth",value:function(t){return t&&(this._remainingWidth=t),this._remainingWidth}}]),t}();var eD,nD=(eD=0,function(){return"".concat(JP,"-").concat(++eD)});function rD(t){var e=0;if("v"===t.getCutType())e=function(t){var e=Number.MAX_SAFE_INTEGER;return t.children().forEach((function(t){var n=rD(t);n<e&&(e=n)})),e}(t);else if("h"===t.getCutType())t.children().forEach((function(t){e+=rD(t)}));else if(t.model().host()&&t.model().host().getLogicalSpace){var n=t.boundBox().height,r=t.model().host().getLogicalSpace().height;(e=n-r)<0&&(e=0)}else e=0;return e}function iD(t){var e=0;if("h"===t.getCutType())e=function(t){var e=Number.MAX_SAFE_INTEGER;return t.children().forEach((function(t){var n=iD(t);n<e&&(e=n)})),e}(t);else if("v"===t.getCutType())t.children().forEach((function(t){e+=iD(t)}));else if(t.model().host()&&t.model().host().getLogicalSpace){var n=t.boundBox().width,r=t.model().host().getLogicalSpace().width;(e=n-r)<0&&(e=0)}else e=0;return e}function aD(t,e,n){var r=new KP(0,{height:t,width:e});return r.name("placeHolder"),r.position(n),r}function oD(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i="",a=1,o=1,c=0,u=0;if(!e)return{first:t,second:t};var s=e.getLogicalSpace(),l=s.height,f=s.width,h=e.position();"top"===h||"bottom"===h?(i="h",a=l/t.remainingHeight(),c=t.remainingHeight()-l,u=t.remainingWidth()):(i="v",a=f/t.remainingWidth(),u=t.remainingWidth()-f,c=t.remainingHeight()),o=1-a,t.cut(i);var d={host:e.name(),cut:null,ratioWeight:a,preferred:!r&&n,lanes:[]},p=new tD(d);p.remainingHeight(l),p.remainingWidth(f);var g={host:null,cut:null,ratioWeight:o,preferred:!r&&!n,lanes:[]},v=new tD(g);return v.remainingHeight(c),v.remainingWidth(u),n?t.lanes([p]):"top"===h||"left"===h?t.lanes([p,v]):t.lanes([v,p]),{first:p,second:v}}var cD=function(){function t(e){Yp()(this,t),this._model=e,this._parent=null,this._children=[],this._parentCut=null,this._boundBox={top:null,left:null,height:null,width:null},this._id=this._model.host()instanceof YP&&this._model.host().renderAt()?this._model.host().renderAt():nD()}return Kp()(t,[{key:"addChildren",value:function(t){var e,n=this;(e=this._children).push.apply(e,Gp()(t)),t.forEach((function(t){t.parent(n)}))}},{key:"isRoot",value:function(){return null===this._parent}},{key:"isLeaf",value:function(){return!this._children.length}},{key:"getCutType",value:function(){return this._model.cut()}},{key:"isPreferred",value:function(){return!!this._model.preferred()}},{key:"children",value:function(t){return t&&(this._children=t),this._children}},{key:"parent",value:function(t){return t&&(this._parent=t),this._parent}},{key:"parentCut",value:function(t){return t&&(this._parentCut=t),this._parentCut}},{key:"id",value:function(t){return t&&(this._id=t),this._id}},{key:"model",value:function(t){return t&&(this._model=t),this._model}},{key:"boundBox",value:function(t){return t&&(this._boundBox={top:t.top,left:t.left,height:t.height,width:t.width}),this._boundBox}},{key:"updateNode",value:function(t){var e=this;this._id===t._id?(this._model.cut(t.cut),this._model.ratioWeight(t.ratioWeight)):this._children.forEach((function(n){if(n._id===t._id)return n.model.cut(t.cut),void n.model.ratioWeight(t.ratioWeight);e.searchNode(n,t)}))}},{key:"searchNode",value:function(t,e){var n=this;t.children().forEach((function(t){t.id()===e._id?(t.model().cut(e.cut),t.model().ratioWeight(e.ratioWeight)):n.searchNode(t,e)}))}},{key:"delete",value:function(t){var e=this;this._children.forEach((function(n){if(n.id()===t){var r=e._children.indexOf(n);e._model.lanes().splice(r,1)}e.deleteSearchNode(n,t)}))}},{key:"deleteSearchNode",value:function(t,e){var n=this;t.children().forEach((function(r){if(r.id()===e){var i=t.children().indexOf(r);t.model().lanes().splice(i,1)}else n.deleteSearchNode(r,e)}))}}]),t}();function uD(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return sD(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return sD(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,c=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return o=t.done,t},e:function(t){c=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(c)throw a}}}}function sD(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var lD=function(){function t(e,n){Yp()(this,t),this._measurements=e,this._config=n,this._root=this.createTree(this._config,null),this.setBoundBox()}return Kp()(t,[{key:"createTree",value:function(t,e){var n=new cD(t);e?(n.parentCut(e.getCutType()),e.addChildren([n])):this._root=n;var r,i=uD(t.lanes());try{for(i.s();!(r=i.n()).done;){var a=r.value;this.createTree(a,n)}}catch(t){i.e(t)}finally{i.f()}return this._root}},{key:"setBoundBox",value:function(){this._root.boundBox({top:0,left:0,width:this._measurements.width,height:this._measurements.height}),function t(e){var n=e.children().map((function(t){return t.model().ratioWeight()})).reduce((function(t,e){return t+e}),0);e.children().forEach((function(e,r,i){var a=i[r-1],o=e.model().ratioWeight()/n;"h"===e.parentCut()?e.boundBox({top:r?a.boundBox().top+a.boundBox().height:0,left:e.parent().boundBox().left,height:e.parent().boundBox().height*o,width:e.parent().boundBox().width}):e.boundBox({top:e.parent().boundBox().top,left:r?a.boundBox().left+a.boundBox().width:0,height:e.parent().boundBox().height,width:e.parent().boundBox().width*o}),t(e)}))}(this._root)}},{key:"setHostPosition",value:function(e){var n=this;e.children().forEach((function(e){t.setHostSpatialConfig(e),n.setHostPosition(e)}))}},{key:"negotiate",value:function(){return function t(e){for(var n,r,i,a=0,o=e.children().length,c=0;c<o;c++){var u,s=void 0,l=e.children()[c];"h"===l.parentCut()?(s=rD,r="height",i="width"):(s=iD,r="width",i="height"),l.isPreferred()?n=l:(a+=u=s(l),l.boundBox()[r]-=u,l.boundBox()[i]=l.parent().boundBox()[i],t(l))}n&&(n.boundBox()[r]+=a,n.boundBox()[i]=n.parent().boundBox()[i],t(n))}(this._root),function t(e){e.children().forEach((function(e,n,r){var i=function(t,e,n,r){if(e){var i=n[e-1].boundBox(),a=i.top,o=i.left,c=i.height,u=i.width;return{width:t.width,height:t.height,top:"h"===r.parentCut()?a+c:a,left:"h"===r.parentCut()?o:o+u}}var s=r.parent().boundBox(),l=s.top,f=s.left;return{width:t.width,height:t.height,top:l,left:f}}(e.boundBox(),n,r,e);e.boundBox(i),t(e)}))}(this._root),this}},{key:"broadcast",value:function(){return this.setHostPosition(this._root),this}},{key:"tree",value:function(){return this._root}}],[{key:"setHostSpatialConfig",value:function(t){var e=t.boundBox(),n=t.model().host();if(n&&n.setSpatialConfig){var r={x:e.left,y:e.top,width:e.width,height:e.height,renderAt:t.id()};n.setSpatialConfig(r)}}}]),t}(),fD={top:0,center:1,bottom:2},hD={0:"top",1:"center",2:"bottom"},dD={0:"left",1:"middle",2:"right"},pD="vertical",gD="horizontal",vD=function(){function t(){Yp()(this,t)}return Kp()(t,null,[{key:"isDOMElement",value:function(t){return t instanceof Element}},{key:"getID",value:function(t){return t.id}},{key:"getElement",value:function(t){return document.getElementById(t)}},{key:"findContainer",value:function(t){return t.filter((function(t){return null==t.parent}))[0]}},{key:"removeDiv",value:function(t){null!==document.getElementById(t)&&document.getElementById(t).remove()}}]),t}(),yD=function(){function t(e){Yp()(this,t),this._node=e,this._className=e.model().host()instanceof YP?e.model().host().className():ZP}return Kp()(t,[{key:"node",value:function(){return this._node}},{key:"hasHost",value:function(){return this._node.model().host()instanceof YP}},{key:"className",value:function(){return this._className||ZP}}]),t}();function mD(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=eg()(t);if(e){var i=eg()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Jp()(this,n)}}var bD=function(t){Qp()(n,t);var e=mD(n);function n(){return Yp()(this,n),e.apply(this,arguments)}return Kp()(n,[{key:"getCoordinates",value:function(){return ov()(eg()(n.prototype),"defaultDataPointLogic",this).call(this)}}]),n}(function(){function t(e){Yp()(this,t),this._data=e}return Kp()(t,[{key:"defaultDataPointLogic",value:function(){var t=[];return function t(e,n){var r=new yD(e);n.push(r),e.children().forEach((function(e){t(e,n)}))}(this._data,t),t}}]),t}());function xD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function wD(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?xD(Object(n),!0).forEach((function(e){Rg()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):xD(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function _D(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=eg()(t);if(e){var i=eg()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Jp()(this,n)}}var kD=function(t){Qp()(n,t);var e=_D(n);function n(t){var r;return Yp()(this,n),(r=e.call(this))._data=t,r._coordinates=new bD(r._data).getCoordinates(),r}return Kp()(n,[{key:"createhtml",value:function(t,e){var r=this,i=t;ov()(eg()(n.prototype),"initRenderer",this).call(this,i,this._data),this.parentDiv=this.createAndCustomiseParent(e),this._coordinates.forEach((function(t){if(t.hasHost()){var e=t.node();r.parentDiv.appendChild(r.createAndPositionDiv(wD(wD({},e.boundBox()),{},{id:e.id(),className:t.className()})))}})),i.appendChild(this.parentDiv)}},{key:"createAndPositionDiv",value:function(t){var e=t.top,n=t.left,r=t.height,i=t.width,a=t.className,o=t.id,c=document.getElementById(o)||document.createElement("div");return c.style.position="absolute",c.style.left="".concat(n,"px"),c.style.top="".concat(e,"px"),c.style.height="".concat(r,"px"),c.style.width="".concat(i,"px"),c.id=o,c.className=a,c}},{key:"createAndCustomiseParent",value:function(t){var e=vD.findContainer(this._coordinates),n=e.node(),r=this.createAndPositionDiv(wD(wD({},n.boundBox()),{},{id:n.id(),className:e.className()}));return r.className=t,r.style.position="relative",r}},{key:"coordinates",value:function(){return this._coordinates}}]),n}(function(){function t(){Yp()(this,t)}return Kp()(t,[{key:"initRenderer",value:function(t,e){t.__logicalTree=e}}]),t}()),SD=function(t,e){return t.renderer().coordinates().find((function(t){return t.node().id()===e}))},MD=function(t){return function(t){t.renderer(new kD(t.data())),t.renderer().createhtml(t.mount(),t.className())}(t)},ED=function t(e,n){n.children().forEach((function(n){var r=n.model().host();if(r instanceof YP&&r.alignWith()){var i=e.componentMap().get(r.alignWith());if(i){var a=SD(e,n.id()).node(),o=a.boundBox(),c=SD(e,i.renderAt()).node().boundBox(),u=function(t,e){var n={},r=e.node,i=e.refNode;switch(t){case"left":n={top:r.top,left:i.left,height:r.height,width:Math.abs(r.width-Math.abs(i.left-r.left))};break;case"right":n={top:r.top,left:r.left,height:r.height,width:Math.abs(r.width-Math.abs(r.left+r.width-(i.left+i.width)))};break;case"top":n={top:i.top,left:r.left,height:Math.abs(r.height-Math.abs(i.top-r.top)),width:r.width};break;case"bottom":n={top:r.top,left:r.left,height:Math.abs(r.top-i.top+i.height),width:r.width};break;case"h-center":n={top:r.top,left:i.left,height:r.height,width:i.width};break;case"v-center":n={top:i.top,left:r.left,height:i.top,width:r.width}}return n}(r.alignment(),{node:o,refNode:c});Object.assign(u,{id:a.id(),className:r.className()}),e.renderer().createAndPositionDiv(u),e.componentMap().get(r.name()).setSpatialConfig({x:u.left,y:u.top,height:u.height,width:u.width})}}t(e,n)}))},CD=function(){function t(e,n,r){Yp()(this,t),this._data=e.tree,this._componentMap=e.componentMap,this._layoutClassName=e.layoutClassName,this._renderer=n,this._mount=vD.isDOMElement(r)?r:vD.getElement(r)}return Kp()(t,[{key:"draw",value:function(){return MD(this),ED(this,this._data),function t(e){e.children().forEach((function(e){var n=e.model().host();n instanceof YP&&n.draw(),t(e)}))}(this._data),this}},{key:"data",value:function(t){return t&&(this._data=t),this._data}},{key:"componentMap",value:function(t){return t&&(this._componentMap=t),this._componentMap}},{key:"className",value:function(t){return t&&(this._layoutClassName=t),this._layoutClassName}},{key:"renderer",value:function(t){return t&&(this._renderer=t),this._renderer}},{key:"mount",value:function(t){return t&&(this._mount=t),this._mount}}]),t}(),AD=function(){function t(e,n,r,i){Yp()(this,t),this._componentMap=e,this._prioritySequence=n,this._totalHeight=r,this._totalWidth=i,this._targetComponentMap=null}return Kp()(t,[{key:"generateConfigModel",value:function(){var t;(t=this).targetComponentMap(new Map),t.componentMap().forEach((function(e){if(t.targetComponentMap().has(e.target()))t.targetComponentMap().get(e.target()).push(e);else{var n=[];n.push(e),t.targetComponentMap().set(e.target(),n)}}));var e=this._targetComponentMap.get("canvas"),n=new tD({}),r=n;n.remainingHeight(this._totalHeight),n.remainingWidth(this._totalWidth);var i=null;return this._prioritySequence.forEach((function(t){i=function(t,e){var n=t.find((function(t){return t.name()===e}));return n&&-1!==n?n:null}(e,t),r="grid"!==t?oD(r,i).second:function(t,e){for(var n=t,r=e.length,i=r?e[0].length:0,a=e.reduce((function(t,e){return t+e[0].getLogicalSpace().height}),0),o=0;o<i;o++){var c=o===i-1,u=oD(n,aD(a,e[0][o].getLogicalSpace().width,"left"),c),s=u.first,l=u.second;n=s;for(var f=0;f<r;f++){var h=f===r-1;n=oD(n,e[f][o],h,!0).second}n=l}return n}(r,i.component)})),n}},{key:"componentMap",value:function(t){return t&&(this._componentMap=t),this._componentMap}},{key:"targetComponentMap",value:function(t){return t&&(this._targetComponentMap=t),this._targetComponentMap}}]),t}();var PD,DD,ID,TD=function(){function t(){Yp()(this,t),this._componentMap=new Map,this._layoutDefinition=null}return Kp()(t,[{key:"addComponent",value:function(t){this._componentMap.set(t.name(),t)}},{key:"layoutDefinition",value:function(t){return t&&(this._layoutDefinition=t),this._layoutDefinition}},{key:"addMultipleComponent",value:function(t){var e=this;t.forEach((function(t){e.addComponent(t)}))}},{key:"sanitizedDefinition",value:function(){return function t(e,n){var r=n.host();n.lanes()&&n.lanes().length&&n.lanes().forEach((function(n){return t(e,n)})),null!=r&&"string"==typeof r&&void 0!==e.componentMap().get(r)&&n.host(e.componentMap().get(r))}(this,this._layoutDefinition),this.layoutDefinition()}},{key:"componentMap",value:function(){return this._componentMap}},{key:"resetComponentMap",value:function(){this._componentMap.clear()}}]),t}(),RD=function(){function t(e){Yp()(this,t),this._renderAt=e.renderAt,this._layoutClassName=e.className,this._dimension={width:e.width||600,height:e.height||400},this._skeletonType=e.skeletonType||"html",this._layoutDefinition=null,this._layoutDef=new TD,this._drawingManager=null,this._prioritySequence=[],this.tree=null,this._rootNodeID=null}return Kp()(t,[{key:"layoutDef",value:function(t){return t&&(this._layoutDef=t),this._layoutDef}},{key:"prioritySequence",value:function(t){return t&&(this._prioritySequence=t),this._prioritySequence}},{key:"dimension",value:function(t){return t&&Object.assign(this._dimension,t),this._dimension}},{key:"addComponent",value:function(t){this._layoutDef.addComponent(t)}},{key:"addMultipleComponent",value:function(t){this._layoutDef.addMultipleComponent(t)}},{key:"resetNode",value:function(t){this.con&&this.con.resetNode(t)}},{key:"updateNode",value:function(t){this.tree.updateNode(t),this._layoutDefinition=this.tree.model,this.compute()}},{key:"compute",value:function(){var t,e,n,r;vD.isDOMElement(this._renderAt)?this._renderAt._layout=this:document.getElementById(this._renderAt)._layout=this,this._layoutDefinition=(e=(t=this).dimension(),n=e.height,r=e.width,new AD(t.layoutDef().componentMap(),t.prioritySequence(),n,r).generateConfigModel()),this._layoutDef.layoutDefinition(this._layoutDefinition),this._layoutDefinition=this._layoutDef.sanitizedDefinition(),this._layout=new lD({width:this._dimension.width,height:this._dimension.height},this._layoutDefinition),this.tree=this._layout.negotiate().tree(),this._layout.broadcast(),this._drawingManager=new CD({tree:this.tree,componentMap:this._layoutDef.componentMap(),layoutClassName:this._layoutClassName},this._skeletonType,this._renderAt),this._rootNodeID?this.tree.id(this._rootNodeID):this._rootNodeID=this.tree.id(),this._drawingManager.draw()}},{key:"getRootNodeId",value:function(){return this._rootNodeID}},{key:"registerComponents",value:function(t){var e=this;return this._prioritySequence.length=0,this._layoutDef.resetComponentMap(),t.forEach((function(t){t&&(e._prioritySequence.push(t.name()),e.addComponent(t),"grid"===t.name()&&t.component.forEach((function(t){t.forEach((function(t){e.addComponent(t)}))})))})),this}},{key:"getComponent",value:function(t){return this._layoutDef.componentMap().get(t)}},{key:"deleteElement",value:function(t,e){this._layoutDef.componentMap().delete(e);var n,r=t.renderAt();(n=r)&&Od("#".concat(n)).remove()}},{key:"removeComponent",value:function(t){var e=this,n=this.getComponent(t);return n?"grid"===t?n.component.map((function(t){return t.map((function(t){return e.deleteElement(t,t.name())}))})):this.deleteElement(n,t):this}},{key:"renderAt",value:function(t){return t&&(this._renderAt=t),this._renderAt}}]),t}(),ND=function(t){return[new t._registry.components.VisualGroup(t._registry,Object.assign({throwback:t._throwback},t.dependencies()))]},OD=function(t){var e=t.dependencies().lifeCycleManager;e.notify({client:t,action:"beforeupdate"});var n=t.composition().visualGroup,r=t._allOptions;for(var i in r){var a=t[i]();null!==a&&n[i]&&n[i](a)}var o=t.config().invalidValues;n.valueParser(El(o));var c=n.getMandatoryFields();c.shouldRender?n.createMatrices(c):n.remove(),t._cachedProps={},e.notify({client:t,action:"initialized"}),e.notify({client:t,action:"updated"})},FD=function(t,e){var n=function(){return!1};return!t.every((function(t,r){switch(t){case"rows":case"columns":case"detail":n=Ts("Array");break;case"shape":case"size":case"color":case"data":case"config":n=Ts("Object");break;default:n=function(){return!0}}var i=e[r][0],a=e[r][1];return n(i,a)}))},LD=function(t){var e=t.layout().viewInfo(),n=e&&e.viewMatricesInfo.matrices.center[1]||[],r=[];n.forEach((function(t){t.forEach((function(t){r.push(t.valueOf().done())}))}));var i=t.lifeCycle();r.length?Promise.all(r).then((function(){i.notify({client:t,action:"drawn"});var e=[];n.forEach((function(t){t.forEach((function(t){t.valueOf().layers().forEach((function(t){e.push(t.animationDone())}))}))})),[t.xAxes(),t.yAxes()].forEach((function(t){(t=t||[]).forEach((function(t){t.forEach((function(t){e.push(t.animationDone())}))}))})),Promise.all(e).then((function(){i.notify({client:t,action:"animationend"})}))})):i.notify({client:t,action:"animationend"})},jD=function(t){return t.every((function(t){return"measure"===t.type()}))},BD=function(t){var e=HC.getState(),n=N()(e,2),r=n[0],i=n[1],a=t._store;a.append("app.group",r),a.append("local.group",i)},zD={data:{value:null,meta:{typeCheck:function(t){return t&&(t instanceof gt.DataModel()||t instanceof gt)},sanitization:function(t){return t?t instanceof gt?t:new gt(t):t}}},width:{value:0,meta:{sanitization:As,typeCheck:Number.isInteger}},height:{value:0,meta:{sanitization:As,typeCheck:Number.isInteger}},minUnitWidth:{value:50,meta:{sanitization:As,typeCheck:Number.isInteger}},minUnitHeight:{value:50,meta:{sanitization:As,typeCheck:Number.isInteger}},config:{value:[null,null],meta:{typeCheck:"constructor",typeExpected:"Object",takesMultipleParams:!0,sanitization:function(t,e){var n=N()(t,2),r=n[0],i=n[1],a=(void 0===i?{}:i).reset,o=void 0!==a&&a,c={},u=function(t){if(t){var e={},n=t.border,r=t.gridLines;return r&&(e.x=!!r.x,e.y=!!r.y),{facetsUserConfig:{isBorderPresent:n||{},isGridLinePresent:e},isFacet:!1}}return{}}(r);r=Fs(r,u),o||(c=Fs({},null===r?{}:e),c=Object.assign(c,function(t,e){var n={};return e.forEach((function(e){t&&t[e]&&Object.keys(t[e]).length&&(n[e]={})})),n}(r,QP)));var s=Fs(c,$P);return function(t){return t.scrollBar.thickness=Math.min(50,Math.max(10,t.scrollBar.thickness)),t}(Fs(s,r))}}}},HD=n(27),WD=n.n(HD),VD=n(14),UD=n.n(VD),GD=n(15),qD=n.n(GD),YD=n(10),XD=n.n(YD),KD=function(){function t(e,n,r,i){Yp()(this,t),this._config={},this._measurement={},this._matrices=[],this._dependencies=i,this.measurement(n),this.mountPoint(e),this.config(r)}return Kp()(t,[{key:"serialize",value:function(){return{measurement:this.measurement(),config:this.config(),matrices:this.matrices()}}},{key:"config",value:function(t){return t?(this._config=Fs(this._config||{},t),this._config.border.width=Math.max(0,this._config.border.width),this):this._config}},{key:"measurement",value:function(t){return t?(this._measurement=Fs(this._measurement||{},t),this):this._measurement}},{key:"matrices",value:function(t){return t?(this._matrices=rs.typeObj(["top","center","bottom"],t),this):this._matrices}},{key:"rowMatrix",value:function(t){return t?(this._rowMatrix=t,this):this._rowMatrix}},{key:"columnMatrix",value:function(t){return t?(this._columnMatrix=t,this):this._columnMatrix}},{key:"centerMatrix",value:function(t){return t?(this._centerMatrix=t,this):this._centerMatrix}},{key:"mountPoint",value:function(t){return t?(this._mountPoint=t,this):this._mountPoint}}]),t}(),$D=(DD={},Rg()(DD,"border",(PD={},Rg()(PD,"style","solid"),Rg()(PD,"color","#d6d6d6"),Rg()(PD,"width",2),Rg()(PD,"collapse",!0),Rg()(PD,"spacing",0),PD)),Rg()(DD,"pagination","scroll"),Rg()(DD,"buffer",20),Rg()(DD,"gutterSpace",{rows:[],columns:[]}),Rg()(DD,"distribution",{rows:[],columns:[]}),Rg()(DD,"breakPage",{rows:[],columns:[]}),Rg()(DD,"isRowSizeEqual",!1),Rg()(DD,"isColumnSizeEqual",!1),Rg()(DD,"columnPointer",0),Rg()(DD,"rowPointer",0),DD),QD=(ID={},Rg()(ID,"width",100),Rg()(ID,"height",100),Rg()(ID,"unitWidth",100),Rg()(ID,"unitHeight",100),ID),ZD=ml.nest,JD=function(t){return t?{firstMeasure:"height",secondMeasure:"width"}:{firstMeasure:"width",secondMeasure:"height"}},tI=function(t,e){var n=0;for(var r in e)if(t<e[r]){n=r;break}return n},eI=function(t,e){var n=e.isTransposed,r=t[0].length>0?t[0]:t[1];return n?(r=t[0].length>0?Gp()(t[0]):[],r=t[1].length>0?[].concat(Gp()(r),Gp()(t[1])):r):r=r.map((function(e,n){var r=[];return t[0].length>0&&(r=Gp()(t[0][n])),t[1].length>0&&(r=[].concat(Gp()(r),Gp()(t[1][n]))),r})),r},nI=function(t,e){return t?{height:0,width:e.width}:{height:e.height,width:0}},rI=function(t,e,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=e.firstMeasure,o=e.secondMeasure,c=0,u=0;return t.values.forEach((function(e){var r,s=0,l=0;e.forEach((function(t,e){t.setAvailableSpace();var r=t.getLogicalSpace(),c=t.getMinMeasures(n[o]);l=Math.max(l,+r[o],c),i[e]=Math.max(i[e]||0,r[a]),s+=+i[e]})),u+=l,c=Math.max(c,s),t.space=(r={},Rg()(r,o,Math.ceil(u)),Rg()(r,a,Math.ceil(c)),r)})),r={},Rg()(r,o,u),Rg()(r,a,c),r},iI=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,i=n.isTransposed,a=void 0!==i&&i,o=n.unitMeasures,c=JD(a),u=c.firstMeasure,s=c.secondMeasure,l=e.values,f=nI(a,o);if(l[0].key){var h,d=(h={},Rg()(h,u,0),Rg()(h,s,0),h);return l.forEach((function(e){var i=t(e,n,r);d[u]=Math.max(d[u],i[u],f[u]),d[s]+=+i[s]})),e.space=d,d}return rI(e,{firstMeasure:u,secondMeasure:s},f,r)},aI=function t(e,n){if(e.values[0].key){var r=[];return e.values.forEach((function(e){n?t(e,n).forEach((function(t,e){var n;r[e]=r[e]||[],(n=r[e]).push.apply(n,Gp()(t))})):r.push.apply(r,Gp()(t(e,n)))})),e.matrix=r,r}return e.matrix=n?e.values[0].map((function(t,n){return e.values.map((function(t){return t[n]}))})):e.values,e.matrix},oI=function(t,e,n){var r=[],i=[];return e?t.forEach((function(t,e){e>=n?i.push(t):r.push(t)})):t.forEach((function(t,e){t.forEach((function(t,a){a>=n?(i[e]=i[e]||[],i[e].push(t)):(r[e]=r[e]||[],r[e].push(t))}))})),[r,i]},cI=function(t,e,n){return t.slice(e,-n)},uI={config:{sanitization:function(t,e){return Fs(t._config||{},e)}},maxMeasures:{},availableSpace:{},logicalSpace:{}},sI={distribution:[],classPrefix:"muze",isDistributionEqual:!0,unitMeasures:{height:100,width:100,border:1},isTransposed:!1,facet:"primary",extraCellLengths:[]},lI=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Yp()(this,t),this._lastLevelKey=0,this._primaryMatrix=e[0]||[],this._secondaryMatrix=e[1]||[],this._maxMeasures=[],this._availableSpace={},Ps(this,uI);var r=Object.assign({},this.constructor.defaultConfig());this.config(Fs(r,n)),this._layoutMatrix=eI([e[0]||[],e[1]||[]],this.config())}return Kp()(t,[{key:"computeLogicalSpace",value:function(){throw new Error(Os.INTERFACE_IMPL)}},{key:"computeViewableSpaces",value:function(){throw new Error(Os.INTERFACE_IMPL)}},{key:"removeExtraCells",value:function(){throw new Error(Os.INTERFACE_IMPL)}},{key:"getPriorityDistribution",value:function(){throw new Error(Os.INTERFACE_IMPL)}},{key:"calculateDepth",value:function(){throw new Error(Os.INTERFACE_IMPL)}},{key:"redistributeSpaces",value:function(){throw new Error(Os.INTERFACE_IMPL)}},{key:"redistributeViewSpaces",value:function(){throw new Error(Os.INTERFACE_IMPL)}},{key:"getCellDimensions",value:function(){throw new Error(Os.INTERFACE_IMPL)}},{key:"primaryMatrix",value:function(){return arguments.length?this:this._primaryMatrix}},{key:"secondaryMatrix",value:function(){return arguments.length?this:this._secondaryMatrix}},{key:"tree",value:function(){return arguments.length?this:this._tree}},{key:"createTree",value:function(){var t=function(t){var e={},n=0,r="primary",i=ZD(),a=[],o=t._layoutMatrix,c=t.primaryMatrix(),u=t.secondaryMatrix(),s=t.config(),l=s.isTransposed,f=s.breakPage;if(l){if(r=0===c.length?"primary":0===u.length?"secondary":c.length>=u.length?"primary":"secondary",c.length>0){for(var h=0;h<c.length-1;h++)a.push(h);a.push(c.length-1),"secondary"===r&&(n=c.length-1)}if(u.length>0){for(var d=c.length,p=u.length-1;p>0;p--)a.push(p+d);a.push(d),"primary"===r&&(n=d)}a.forEach((function(t){var e=-1;return i.key((function(n){return e++,"".concat(n[t].valueOf(),"-").concat(tI(e,f))}))}));var g;g=o[0].map((function(t,e){return o.map((function(t){return t[e]}))})),e=i.entries(g)}else{if(r=0===c.length?"primary":0===u.length?"secondary":c.length>=u.length?"primary":"secondary",c.length>0){for(var v=0;v<c[0].length-1;v++)a.push(v);a.push(c[0].length-1),"secondary"!==r&&0!==u.length||(n=c[0].length-1)}if(u.length>0){for(var y=c.length>0?c[0].length:0,m=u[0].length-1;m>0;m--)a.push(m+y);a.push(y),"primary"===r&&(n=y)}else n=c.length>0?c[0].length-1:0;a.forEach((function(t){var e=-1;return i.key((function(n){return e++,"".concat(n[t].valueOf(),"-").concat(tI(e,f))}))})),e=i.entries(o)}return{tree:e,lastLevelKey:n}}(this),e=t.tree,n=t.lastLevelKey;return this._lastLevelKey=n,e}},{key:"getLogicalSpace",value:function(){return this.logicalSpace()}},{key:"setAvailableSpace",value:function(t,e){this.availableSpace({width:t,height:e});var n=this.tree(),r=this.populateMaxMeasures("height",n),i=this.populateMaxMeasures("width",n),a=this.calculateDepth(i,r);return this.viewableMatrix=this.createViewPortMatrix(a),this.viewableMeasures=this.redistributeSpaces(t,e),this}},{key:"populateMaxMeasures",value:function(t,e){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];if(i[r]=Math.max(i[r]||0,e.space[t]),e.values){var a=r+1;e.values.forEach((function(e){e.space&&(i=n.populateMaxMeasures(t,e,a,i))}))}return i}},{key:"getViewableSpaces",value:function(){return this.viewableMeasures}},{key:"getViewableMatrices",value:function(){return this.viewableMatrix}},{key:"createViewPortMatrix",value:function(t){var e=[];return function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,a=i._breakPointer,o=i.config(),c=o.isTransposed,u=r.tree,s=r.layoutMatrix;if(0===n){var l=oI(u.matrix,c,a);return e.push({matrix:u.matrix,primaryMatrix:l[0],secondaryMatrix:l[1],space:u.space}),e}var f=n-1;return u.values.forEach((function(n){t(e,f,{tree:n,layoutMatrix:s},i)})),e}(e,t,this.removeExtraCells(),this),e}}],[{key:"defaultConfig",value:function(){return sI}}]),t}();function fI(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=eg()(t);if(e){var i=eg()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Jp()(this,n)}}var hI=function(t){Qp()(n,t);var e=fI(n);function n(t){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Yp()(this,n),(r=e.call(this,t,i))._breakPointer=t[0].length>0?t[0][0].length:0,r._layoutMatrix=eI([t[0]||[],t[1]||[]],r.config()),r._tree={key:"rowRoot",values:r.createTree()},r._logicalSpace=r.computeLogicalSpace(),r}return Kp()(n,[{key:"computeLogicalSpace",value:function(){var t=this.tree();return aI(t,!1),iI(t,this.config(),this.maxMeasures())}},{key:"computeViewableSpaces",value:function(t){var e=this,n=t.maxHeights,r=t.maxWidths,i=t.height;return this.viewableMatrix.map((function(t,a){var o={matrixInst:t,maxWidths:r,maxHeights:n,matrixIndex:a},c=e.getCellDimensions(o),u=c.widths,s=c.rowHeights,l=c.columnWidths,f=[i,i],h=u;return{rowHeights:{primary:s[0],secondary:s[1]},columnWidths:{primary:l[0],secondary:l[1]},height:{primary:f[0],secondary:f[1]},width:{primary:h[0],secondary:h[1]}}}))}},{key:"removeExtraCells",value:function(){var t=this.config(),e=t.isTransposed,n=t.extraCellLengths,r=this._layoutMatrix,i=Fs({},this.tree()),a=n[0],o=n[1]||Number.NEGATIVE_INFINITY,c=e?r.slice(0).map((function(t){return cI(t,a,o)})):cI(r,a,o);return i.values=cI(i.values,a,o),i.matrix=cI(i.matrix,a,o),{tree:i,layoutMatrix:c}}},{key:"getPriorityDistribution",value:function(t){var e,n,r=[],i=[],a=0,o=t.matrix,c=t.width,u=t.maxMeasures,s=t.maxWidth,l=t.height,f=this.config().priority,h=this.primaryMatrix().length?this.primaryMatrix()[0].length:0,d=[];e=c,n=s,(i=2===f?[h-1,h]:0===f?[h-1]:[h]).forEach((function(t){d[t]=u[t],a+=u[t],e-=d[t],n-=d[t]})),o[0].forEach((function(t,r){-1===i.indexOf(r)&&(d[r]=e*(u[r]/n))})),o.forEach((function(t){return t.forEach((function(t,e){-1===i.indexOf(e)?(t.setAvailableSpace(d[e],l),r[e]=Math.max(r[e]||0,Math.floor(t.getLogicalSpace().width))):r[e]=0}))}));var p=c-r.reduce((function(t,e){return t+e}));return p<0?r=r.map((function(){return 0})):i.forEach((function(t){r[t]=Math.floor(p*(d[t]/a||1))})),r}},{key:"calculateDepth",value:function(t,e){var n,r=this.availableSpace().height;for(n=0;n<e.length&&!(e[n]<=r);n++);return Math.min(t.length-1,n)}},{key:"redistributeSpaces",value:function(t,e){var n=this,r=[],i=[],a=this.maxMeasures(),o=a.reduce((function(t,e){return t+=e})),c=this.getPriorityDistribution({matrix:this._layoutMatrix,maxWidth:o,maxMeasures:a,width:t,height:e});return this.viewableMatrix.forEach((function(a){var o={mWidth:0,mHeight:0,matrix:a.matrix,width:t,height:e,maxHeights:r,maxWidths:i,logicalWidths:c},u=n.redistributeViewSpaces(o);i=u.maxWidths,r=u.maxHeights})),this.computeViewableSpaces({height:e,width:t,maxHeights:r,maxWidths:i})}},{key:"redistributeViewSpaces",value:function(t){var e,n,r=[],i=this.maxMeasures(),a=this.config(),o=a.isDistributionEqual,c=a.distribution,u=a.isTransposed,s=a.gutter,l=t.matrix,f=t.height,h=t.maxHeights,d=t.maxWidths,p=t.logicalWidths;n=function(t,e){var n=0,r=0;return t.forEach((function(t){var i=t[e].getLogicalSpace();r=Math.max(r,i.width),n+=i.height})),{width:r,height:n}}(l,this._lastLevelKey).height;var g=i.reduce((function(t,e){return t+=e}));t.maxMeasures=i,t.maxWidth=g,r=g>0?p:i.map((function(){return 0})),e=function(t){var e,n=0,r=0,i=t.isTransposed,a=t.distribution,o=t.availableHeight,c=t.height,u=t.isDistributionEqual,s=t.gutter,l=t.matrix,f=t.cIdx;a&&void 0!==a[0]&&(n=a.reduce((function(t,e){return t+=e}))),s&&void 0!==s[0]&&(r=s.reduce((function(t,e){return t+=e}))),e=o-Math.floor(o*r);var h=l.length;return l.map((function(r,o){var s=r[f].getLogicalSpace().height,l=s+s/c*(e-c);return i||(a.length>0&&h===a.length?l=e*a[o]/n:(u||0===t.height)&&(l=e/h)),Math.floor(l)}))}({matrix:l,cIdx:this._lastLevelKey,height:n,availableHeight:f,isDistributionEqual:o,distribution:c,isTransposed:u,gutter:s}),d.length>0&&(r=r.map((function(t,e){return Math.max(t,d[0][e]||0)}))),d.push(r);for(var v=0;v<d.length;v++)d[v]=r;return h.push(e),{maxWidths:d,maxHeights:h}}},{key:"getCellDimensions",value:function(t){var e=this,n=this.config().unitMeasures.border,r=t.matrixInst,i=t.maxWidths,a=t.maxHeights,o=t.matrixIndex,c=r.matrix,u=[[0],[0]],s=[[0],[0]],l=[0,0],f=this._breakPointer;return c.forEach((function(t,r){t.forEach((function(t,c){var h=a[o][r]||0,d=i[o][c];t.setAvailableSpace(d,h-n),0===r&&c<f?(s[0][c]=d,l[0]=(l[0]||0)+d):0===r&&c>=f&&(s[1][c-f]=d,l[1]=(l[1]||0)+d),c===e._lastLevelKey&&(u[0][r]=h,u[1][r]=h)}))})),{heights:[0,0],widths:l,rowHeights:u,columnWidths:s}}}]),n}(lI);function dI(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=eg()(t);if(e){var i=eg()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Jp()(this,n)}}var pI=function(t){Qp()(n,t);var e=dI(n);function n(t){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Yp()(this,n),(r=e.call(this,t,i))._breakPointer=t[0].length,r._tree={key:"columnRoot",values:r.createTree()},r._logicalSpace=r.computeLogicalSpace(),r}return Kp()(n,[{key:"computeLogicalSpace",value:function(){var t=this.tree();return aI(t,!0),iI(t,this.config(),this.maxMeasures())}},{key:"computeViewableSpaces",value:function(t){var e=this,n=t.maxHeights,r=t.maxWidths,i=t.height,a=t.width;return this.viewableMatrix.map((function(t,o){var c={matrixInst:t,maxWidths:r,maxHeights:n,matrixIndex:o,height:i},u=e.getCellDimensions(c),s=u.heights,l=u.rowHeights,f=u.columnWidths,h=s,d=[a,a];return{rowHeights:{primary:l[0],secondary:l[1]},columnWidths:{primary:f[0],secondary:f[1]},height:{primary:h[0],secondary:h[1]},width:{primary:d[0],secondary:d[1]}}}))}},{key:"removeExtraCells",value:function(){var t=this.config(),e=t.isTransposed,n=t.extraCellLengths,r=this._layoutMatrix,i=Fs({},this.tree()),a=n[0],o=n[1]||Number.NEGATIVE_INFINITY,c=e?r.slice(0).map((function(t){return cI(t,a,o)})):cI(r,a,o);return i.values=cI(i.values,a,o),i.matrix=i.matrix.map((function(t){return cI(t,a,o)})),{tree:i,layoutMatrix:c}}},{key:"getPriorityDistribution",value:function(t){var e=t.height,n=t.maxHeights,r=e,i=[],a=[],o=2,c=this.config().priority,u=this.primaryMatrix().length;return 2===c?(a=[u-1,u],o=2):(a=0===c?[u-1]:[u],o=1),n.forEach((function(t,e){-1===a.indexOf(e)&&(i[e]=t,r-=t)})),r<0?i=i.map((function(){return 0})):a.forEach((function(t){i[t]=Math.min(n[t],r/o)})),i}},{key:"calculateDepth",value:function(t){var e,n=this.availableSpace().width;for(e=0;e<t.length&&!(t[e]<=n);e++);return Math.min(t.length-1,e)}},{key:"redistributeSpaces",value:function(t,e){var n=this,r=[],i=[];return this.viewableMatrix.forEach((function(a){var o={mWidth:0,mHeight:0,matrix:a.matrix,width:t,height:e,maxHeights:r,maxWidths:i},c=n.redistributeViewSpaces(o);i=c.maxWidths,r=c.maxHeights})),this.computeViewableSpaces({height:e,width:t,maxHeights:r,maxWidths:i})}},{key:"redistributeViewSpaces",value:function(t){var e=[],n=t.matrix,r=t.width,i=t.maxHeights,a=t.maxWidths,o=this.config().unitMeasures.border,c=function(t){var e=0,n=0;return t.forEach((function(t){var r=t.getLogicalSpace();e=Math.max(e,r.height),n+=r.width})),{width:n,height:e}}(n[this._lastLevelKey]).width,u=function(t,e){var n=t.availableWidth,r=t.width,i=t.row,a=e.isDistributionEqual,o=e.isTransposed,c=e.distribution,u=0;return c&&c[0]&&(u=c.reduce((function(t,e){return t+=e}))),i.map((function(t,e){var s=t.getLogicalSpace().width,l=s+s/r*(n-r);if(o)if(c.length>0)l=n*c[e]/u;else if(a||0===r){var f=i.length;l=n/f}return Math.floor(l)}))}({row:n[this._lastLevelKey],width:c,availableWidth:r},this.config());n.forEach((function(t,n){return t.forEach((function(t,r){var i=t.getLogicalSpace();t.setAvailableSpace(u[r]-o,i.height),e[n]=Math.max(e[n]||0,Math.floor(t.getLogicalSpace().height))}))})),i.length>0&&(e=e.map((function(t,e){return Math.max(t,i[0][e])}))),i.push(e);for(var s=0,l=i.length;s<l;s++)i[s]=e;return a.push(u),{maxHeights:i,maxWidths:a}}},{key:"getCellDimensions",value:function(t){var e=this,n=this.config().unitMeasures.border,r=t.matrixInst,i=t.height,a=t.maxWidths,o=t.maxHeights,c=t.matrixIndex,u=r.matrix,s=[[0],[0]],l=[[0],[0]],f=[0,0],h=this._breakPointer,d=this.getPriorityDistribution({height:i,maxHeights:o[0]||[]});return u.forEach((function(t,r){t.forEach((function(t,i){var o=d[r]||0,u=a[c][i];t.setAvailableSpace(u-n,o),0===i&&r<h?(s[0][r]=o,f[0]=(f[0]||0)+o):0===i&&r>=h&&(s[1][r-h]=o,f[1]=(f[1]||0)+o),r===e._lastLevelKey&&(l[0][i]=u,l[1][i]=u)}))})),{heights:f,widths:[0,0],rowHeights:s,columnWidths:l}}}]),n}(lI);function gI(t,e){return t?t.getLogicalSpace()[e]:0}var vI=function(t,e,n){t.forEach((function(t,r){t.forEach((function(t,i){t.setAvailableSpace(e[i],n[r])}))}))},yI=function(t,e,n){var r=t.config()["".concat(e,"Pointer")];return n.length-1<r&&(r=0,t.config(Rg()({},"".concat(e,"Pointer"),r))),r},mI={column:{maxMeasure:"maxWidthAvailableForColumnMatrix",matrix:"columnMatrix",measureType:"width",scrollType:gD},row:{maxMeasure:"maxHeightAvailableForRowMatrix",matrix:"rowMatrix",measureType:"height",scrollType:pD}},bI=function(t,e,n,r){return function(t,e,n,r){var i=t.config().pagination,a=e.matrix,o=e.measureType,c=e.scrollType;switch(i){case"holistic":return n;default:var u=gI(t[a](),o)+r;return u>n&&t.scrollInfo(Rg()({},c,!0)),Math.max(n,u)}}(t,mI[e],n,r)},xI=function(t,e){var n=t.measurement().height,r=t.config().buffer,i=function(t,e){var n=t.measurement().height,r=t.columnMatrix(),i=Math.min(r.getLogicalSpace().height,n/2);r.setAvailableSpace(e,i);var a=r.getViewableSpaces()[t.config().columnPointer];return{columnMatrixHeight:a.height.primary+a.height.secondary,maxColumnMatrixHeight:i}}(t,e),a=i.columnMatrixHeight,o=i.maxColumnMatrixHeight,c=n-Math.min(o,a);return{columnMatrixHeight:a,maxColumnMatrixHeight:o,rowMatrixHeight:bI(t,"row",c,r),maxHeightAvailableForRowMatrix:c}},wI={isScroll:!0,pagination:"scroll"},_I=function(t){var e=t.config().buffer,n=[gD,pD].map((function(n){return function(t,e){var n=t.scrollInfo(),r={pagination:t.config().pagination,isScroll:n[e]};return Object.keys(wI).every((function(t){return wI[t]===r[t]}))}(t,n)?e:0})),r=Ig()(n,2);return{horizontalBuffer:r[0],verticalBuffer:r[1]}},kI=function(t){var e=t.rowMatrix(),n=t.columnMatrix(),r=function(t){var e=t.rowMatrix(),n=t.measurement().width,r=t.config(),i=r.border,a=r.buffer,o=i.width,c=gI(e,"width"),u=Math.min(c+a,n/2),s=n-u-o;return{rowMatrixWidth:c,maxRowMatrixWidth:u,columnMatrixWidth:bI(t,"column",s,0),maxWidthAvailableForColumnMatrix:s}}(t),i=r.rowMatrixWidth,a=r.maxRowMatrixWidth,o=r.maxWidthAvailableForColumnMatrix,c=r.columnMatrixWidth,u=xI(t,c),s=u.columnMatrixHeight,l=u.rowMatrixHeight,f=u.maxHeightAvailableForRowMatrix,h=_I(t),d=h.horizontalBuffer,p=h.verticalBuffer;e.setAvailableSpace(a-p,l-d);var g=e.getViewableSpaces(),v=n.getViewableSpaces();return yI(t,"row",g),yI(t,"column",v),function(t,e,n){var r,i,a,o,c,u=t.centerMatrix(),s=t.config().border,l=t.matrices(),f=l.top,h=l.bottom,d=s.width,p=(r=[]).concat.apply(r,Gp()(e.map((function(t){return t.rowHeights.primary})))),g=(i=[]).concat.apply(i,Gp()(e.map((function(t){return t.columnWidths.primary})))),v=(a=[]).concat.apply(a,Gp()(e.map((function(t){return t.columnWidths.secondary})))),y=(o=[]).concat.apply(o,Gp()(n.map((function(t){return t.columnWidths.primary})))),m=n[0].rowHeights.primary,b=(c=[]).concat.apply(c,Gp()(n.map((function(t){return t.rowHeights.secondary}))));u.forEach((function(t,e){t.forEach((function(t,n){t.setAvailableSpace(y[n]-d,p[e]-d)}))})),vI(f[0],g,m),vI(f[2],v,m),vI(h[0],g,b),vI(h[2],v,b)}(t,g,v),{rowMatrixHeight:l-d,rowMatrixWidth:i-p,maxHeightAvailableForRowMatrix:f-d,columnMatrixHeight:s,columnMatrixWidth:c,maxWidthAvailableForColumnMatrix:o}},SI=function(t){return t.reduce((function(t,e){return t+e}),0)};function MI(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=eg()(t);if(e){var i=eg()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Jp()(this,n)}}var EI,CI,AI=function(t){Qp()(n,t);var e=MI(n);function n(t,r,i,a){var o;return Yp()(this,n),(o=e.call(this,r,i,a)).matrices(t),o.config(o.constructor.defaultConfig()),o._layoutId=ts(),o._scrollInfo={horizontal:!1,vertical:!1},o}return Kp()(n,[{key:"matrices",value:function(t){return t?(this._matrices=function(t,e){var n,r,i=[],a=[],o=[],c=[],u=t.config(),s=u.isRowSizeEqual,l=u.isColumnSizeEqual,f=u.gutterSpace,h=u.distribution,d=u.border,p=u.breakPage,g=u.priority,v=t.measurement(),y=v.minUnitHeight,m=v.minUnitWidth,b=e.top,x=e.center,w=e.bottom,_=Ig()(b,3),k=_[0],S=_[1],M=_[2],E=Ig()(x,3),C=E[0],A=E[1],P=E[2],D=Ig()(w,3),I=D[0],T=D[1],R=D[2];return C.length>0&&(i=[].concat(Gp()(k),Gp()(C),Gp()(I))),P.length>0&&(a=[].concat(Gp()(M),Gp()(P),Gp()(R))),S.length>0&&S[0].length>0&&(o=S.map((function(t,e){return[].concat(Gp()(k[e]),Gp()(t),Gp()(M[e]))}))),T.length>0&&T[0].length>0&&(c=T.map((function(t,e){return[].concat(Gp()(I[e]),Gp()(t),Gp()(R[e]))}))),t.rowMatrix(new hI([i,a],{isDistributionEqual:s,distribution:h.rows,gutter:f.rows,unitMeasures:{width:m,height:y,border:d.width},priority:g.row,breakPage:p.rows.map((function(t){return t+Math.max(k.length,M.length)})),extraCellLengths:[k.length,I.length]})),n=k.length>0?k[0].length:I.length>0?I[0].length:0,r=M.length>0?M[0].length:R.length>0?R[0].length:0,t.columnMatrix(new pI([o,c],{isDistributionEqual:l,distribution:h.columns,gutter:f.columns,isTransposed:!0,unitMeasures:{width:m,height:y,border:d.width},priority:g.col,breakPage:p.columns,extraCellLengths:[n,r]})),t.centerMatrix(A),e}(this,t),this):ov()(eg()(n.prototype),"matrices",this).call(this,t)}},{key:"triggerReflow",value:function(){this.scrollInfo({horizontal:!1,vertical:!1});var t=kI(this),e=t.maxHeightAvailableForRowMatrix,n=t.maxWidthAvailableForColumnMatrix;return this.setViewInformation(e,n),this}},{key:"gotoPage",value:function(t,e){var n=t.toLowerCase(),r=this.viewInfo().viewMatricesInfo["".concat(n,"Pages")],i=Math.min(Math.max(1,e),r);return this.config(Rg()({},"".concat(n,"Pointer"),i-1)),this.setViewInformation(),this.renderGrid(),this}},{key:"pages",value:function(t){var e=this.viewInfo().viewMatricesInfo,n=t.toLowerCase();return{totalPages:e["".concat(n,"Pages")],currentPage:this.config()["".concat(n,"Pointer")]+1}}},{key:"viewInfo",value:function(){return arguments.length?(this._viewInfo=arguments.length<=0?void 0:arguments[0],this):this._viewInfo}},{key:"scrollInfo",value:function(){return arguments.length?(this._scrollInfo=Fs(this._scrollInfo,arguments.length<=0?void 0:arguments[0]),this):this._scrollInfo}},{key:"setViewInformation",value:function(t,e){var n=this.config(),r=n.rowPointer,i=n.columnPointer,a=n.border,o=function(t,e,n){for(var r=t.rowMatrix(),i=t.columnMatrix(),a=t.centerMatrix(),o=t.matrices(),c=r.getViewableMatrices(),u=i.getViewableMatrices(),s={row:0,column:0},l=e-1;l>=0;l--){var f=Math.max(c[l].primaryMatrix.length,c[l].secondaryMatrix.length);s.row+=f}for(var h=n-1;h>=0;h--){var d=u[h],p=d.primaryMatrix,g=d.secondaryMatrix,v=Math.max(p[0]?p[0].length:0,g[0]?g[0].length:0);s.column+=v}o.top[1]=u[n].primaryMatrix,o.bottom[1]=u[n].secondaryMatrix,o.center[0]=c[e].primaryMatrix,o.center[2]=c[e].secondaryMatrix;var y=Math.max(o.center[0].length,o.center[2].length),m=Math.max(o.top[1][0]?o.top[1][0].length:0,o.bottom[1][0]?o.bottom[1][0].length:0);return o.center[1]=a.slice(s.row,s.row+y).map((function(t){return t.slice(s.column,s.column+m)})),{matrices:o,rowPages:c.length,columnPages:u.length}}(this,r,i),c=function(t,e,n){var r=t.rowMatrix(),i=t.columnMatrix(),a=t.config(),o=a.columnPointer,c=a.rowPointer,u=r.getViewableSpaces()[c],s=i.getViewableSpaces()[o],l=u.rowHeights,f=u.width,h=s.columnWidths,d=s.height,p=f.primary,g=f.secondary,v=d.primary,y=d.secondary,m=SI(l.primary),b=SI(h.primary),x=[p,Math.min(b,n),g],w=[v,Math.min(m,e),y];return{viewWidth:x,viewHeight:w,actualCenterMeasures:{height:m,width:b},totalMeasures:{width:SI(x),height:SI(w)},unitHeights:l,unitWidths:h}}(this,t,e);return c.border=a,this.viewInfo({viewMatricesInfo:o,layoutDimensions:c}),this}}],[{key:"defaultViewInfo",value:function(){return Object.assign({},{layoutDimensions:{border:this.defaultConfig().border,viewHeight:[0,0,0],viewWidth:[0,0,0]},viewMatricesInfo:{columnPages:0,rowPages:0,matrices:{top:[],center:[],bottom:[]}}})}},{key:"defaultMeasurement",value:function(){return QD}},{key:"defaultConfig",value:function(){return $D}},{key:"create",value:function(){return new n(null,null,this.defaultMeasurement(),this.defaultConfig())}}]),n}(KD),PI=function(t){var e=t.borderTypes,n=t.showBorders,r=t.cells,i=t.borderInfo,a=t.name,o=t.isFacet,c=i.color,u=i.style,s=i.width;e.forEach((function(t){!function(t){var e=t.type,n=t.borderWidth,r=t.borderStyle,i=t.cells,a=t.color;i.style("border-".concat(e),"".concat(n,"px ").concat(r," ").concat(a))}({cells:r,color:n[t]?c:"transparent",type:t,borderWidth:s,borderStyle:u,name:a,isFacet:o})}))},DI=function(t){var e=t.cells,n=t.border,r=t.row,i=t.column,a=t.isFacet,o=t.showHeaders,c="".concat(hD[fD[r]],"-").concat(dD[i]),u=function(t,e,n,r){var i,a=e.showRowBorders,o=e.showColBorders,c=e.showValueBorders;return i={},Rg()(i,"row",(function(){return PI({borderTypes:["top","bottom"],showBorders:a,cells:t,borderInfo:e,name:n,isFacet:r})})),Rg()(i,"column",(function(){return PI({borderTypes:["left","right"],showBorders:o,cells:t,borderInfo:e,name:n,isFacet:r})})),Rg()(i,"center",(function(){return PI({borderTypes:["left","right","top","bottom"],showBorders:c,cells:t,borderInfo:e,name:n,isFacet:r})})),Rg()(i,"left",(function(){return PI({borderTypes:["left"],showBorders:a,cells:t,borderInfo:e,name:n,isFacet:r})})),Rg()(i,"right",(function(){return PI({borderTypes:["right"],showBorders:a,cells:t,borderInfo:e,name:n,isFacet:r})})),Rg()(i,"".concat("center").concat("left"),(function(){return PI({borderTypes:["left","top","bottom"],showBorders:a,cells:t,borderInfo:e,name:n,isFacet:r})})),Rg()(i,"".concat("center").concat("right"),(function(){return PI({borderTypes:["right","top","bottom"],showBorders:a,cells:t,borderInfo:e,name:n,isFacet:r})})),i}(e,n,c,a),s=function(t,e){var n;return n={},Rg()(n,"".concat("top","-").concat("left"),t&&e?"left":null),Rg()(n,"".concat("top","-").concat("middle"),"column"),Rg()(n,"".concat("top","-").concat("right"),t&&e?"right":null),Rg()(n,"".concat("center","-").concat("left"),t?"".concat("center").concat("left"):"row"),Rg()(n,"".concat("center","-").concat("middle"),"center"),Rg()(n,"".concat("center","-").concat("right"),t?"".concat("center").concat("right"):"row"),Rg()(n,"".concat("bottom","-").concat("left"),null),Rg()(n,"".concat("bottom","-").concat("middle"),"column"),Rg()(n,"".concat("bottom","-").concat("right"),null),n}(a,o)[c];s&&u[s]()},II=function(t){return Array.from(Array(t.length).keys())},TI=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.order,i=n.keyFn,a=e.slice(),o=t.slice(),c=o.slice();if(r=r||Array.from(Array(a.length).keys()),i=i||function(t){return t},0===o.length){var u=[];return r.forEach((function(t){u.push(a[t])})),{prevStack:c,currStack:a,arr:u}}for(var s="",l="",f=[],h=r.length-1;h>=0;h--){var d=r[h];if((s+=i(a[d]))===(l+=i(o[d])))f[d]=null;else{l="";for(var p=h;p<r.length;p++){var g=r[p],v=a[g];f[g]=v,o[g]=v,l=s}}}var y=[];return r.forEach((function(t){y.push(f[t])})),{prevStack:c,currStack:o,arr:y}},RI=function(t,e,n,r){if(!t)return function(){return null};var i={row:function(t){return n[r+t]&&n[r+t][e]},column:function(t){return n[r][e+t]}};return function(t){for(var e=1,n=!1;!n;)null===i[t](e)?e+=1:n=!0;return e}},NI=function(t,e){return{row:function(){var n=[];return t.map((function(t){var r=TI(n,t,{keyFn:function(t){return t.valueOf()},order:e}),i=r.currStack,a=r.arr;return n=i,a}))},column:function(){var n=[],r=[];return t.length&&t[0].forEach((function(i,a){var o=[];t.forEach((function(t){o.push(t[a])}));var c=TI(n,o,{keyFn:function(t){return t.valueOf()},order:e}),u=c.currStack,s=c.arr;n=u,t.forEach((function(t,e){r[e]=r[e]||[],r[e][a]=s[e]}))})),r}}},OI=function(t){return{row:function(){var e=[];return t.forEach((function(n,r){e[r]=e[r]||[],n.forEach((function(n,i){if(t[r][i]){var a=RI(n,i,t,r)("row");a&&e[r].push(a)}}))})),e},column:function(){return t.map((function(e,n){return e.map((function(e,r){return RI(e,r,t,n)("column")})).filter((function(t){return null!==t}))}))}}},FI=function(){return{row:function(t){return II(t[0])},column:function(t){return II(t)}}},LI=(EI={},Rg()(EI,"".concat("top","-1"),{orderGetter:FI().column,viewMatrixMaker:function(){return NI.apply(void 0,arguments).column},spanMaker:function(){return OI.apply(void 0,arguments).column}}),Rg()(EI,"".concat("bottom","-1"),{orderGetter:FI().column,viewMatrixMaker:function(){return NI.apply(void 0,arguments).column},spanMaker:function(){return OI.apply(void 0,arguments).column}}),Rg()(EI,"".concat("center","-0"),{orderGetter:FI().row,viewMatrixMaker:function(){return NI.apply(void 0,arguments).row},spanMaker:function(){return OI.apply(void 0,arguments).row}}),Rg()(EI,"".concat("center","-2"),{orderGetter:FI().row,viewMatrixMaker:function(){return NI.apply(void 0,arguments).row},spanMaker:function(){return OI.apply(void 0,arguments).row}}),EI);function jI(t,e,n){var r=null,i=t,a=function(t){var e=LI[t];return e||{orderGetter:function(){return null},viewMatrixMaker:function(t){return function(){return t}},spanMaker:function(){return function(){return null}}}}("".concat(e,"-").concat(n)),o=a.orderGetter,c=a.viewMatrixMaker,u=a.spanMaker;t.length&&(r=u(i=c(t,o(t))())());return{viewMatrix:i,spans:r}}var BI,zI,HI,WI,VI,UI,GI=function(t,e,n,r){var i=0;t.attr(r,(function(t,a){0===a&&(i=0);var o=e[t.rowIndex][a],c=t.placeholder,u={row:t.rowIndex,col:i};return function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,a=n.availHeight(),o=n.availWidth(),c=r.border.width,u=r.dimensions.unitWidths,s=i.col;return t={},Rg()(t,"rowSpan",(function(){n.setAvailableSpace(o,a*e),1===e&&Od(this).style("height","".concat(a*e+c,"px"))})),Rg()(t,"colSpan",(function(){var t=u.primary[s];if(e>1){for(var r=0,i=s;i<s+e;i++)r+=u.primary[i]-c;n.setAvailableSpace(r+c,a)}else t&&n.setAvailableSpace(t-c,a);Od(this).style("height","".concat(a,"px"))})),t}(o,c,n,u)[r].bind(this)(),i+=o,o}))},qI=(CI={},Rg()(CI,"".concat("top","-0"),null),Rg()(CI,"".concat("top","-1"),(function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return GI.apply(void 0,e.concat(["colSpan"]))})),Rg()(CI,"".concat("top","-2"),null),Rg()(CI,"".concat("center","-0"),(function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return GI.apply(void 0,e.concat(["rowSpan"]))})),Rg()(CI,"".concat("center","-1"),null),Rg()(CI,"".concat("center","-2"),(function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return GI.apply(void 0,e.concat(["rowSpan"]))})),Rg()(CI,"".concat("bottom","-0"),null),Rg()(CI,"".concat("bottom","-1"),(function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return GI.apply(void 0,e.concat(["colSpan"]))})),Rg()(CI,"".concat("bottom","-2"),null),CI),YI=function(){function t(){RP()(this,t)}return OP()(t,[{key:"data",value:function(){throw new Error(Os.INTERFACE_IMPl)}},{key:"width",value:function(){throw new Error(Os.INTERFACE_IMPl)}},{key:"height",value:function(){throw new Error(Os.INTERFACE_IMPl)}},{key:"config",value:function(){throw new Error(Os.INTERFACE_IMPl)}}]),t}(),XI="left",KI="right",$I="bottom",QI="top",ZI="data",JI="axes",tT="facetByFields",eT="fields",nT="transform",rT="layerDef",iT="config",aT="detailFields",oT=function(){function t(e){Yp()(this,t),this._id=ts();var n=Fs({},this.constructor.defaultConfig());this._config=Fs(n,e||{}),this._mount=null}return Kp()(t,[{key:"valueOf",value:function(){throw new Error(Os.INTERFACE_IMPL)}},{key:"id",value:function(){throw new Error(Os.INTERFACE_IMPL)}},{key:"serialize",value:function(){throw new Error(Os.INTERFACE_IMPL)}},{key:"getLogicalSpace",value:function(){throw new Error(Os.INTERFACE_IMPL)}},{key:"setAvailableSpace",value:function(){throw new Error(Os.INTERFACE_IMPL)}},{key:"render",value:function(){throw new Error(Os.INTERFACE_IMPL)}},{key:"remove",value:function(){throw new Error(Os.INTERFACE_IMPL)}},{key:"getMinMeasures",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return t}},{key:"type",get:function(){return"simple"}}],[{key:"formalName",value:function(){return"SimpleCell"}},{key:"defaultConfig",value:function(){return{}}}]),t}(),cT=(VI={},Rg()(VI,"margin",(BI={},Rg()(BI,XI,0),Rg()(BI,KI,0),Rg()(BI,QI,0),Rg()(BI,$I,0),BI)),Rg()(VI,"spaceFixer",2),Rg()(VI,"isOffset",!1),Rg()(VI,"verticalAlign",null),Rg()(VI,"textAlign","center"),Rg()(VI,"show",!0),Rg()(VI,"maxLines",0),Rg()(VI,"minCharacters",0),Rg()(VI,"rotation",null),Rg()(VI,"padding",(zI={},Rg()(zI,XI,8),Rg()(zI,KI,8),Rg()(zI,QI,10),Rg()(zI,$I,0),zI)),Rg()(VI,"headerPadding",(HI={},Rg()(HI,XI,8),Rg()(HI,KI,5),Rg()(HI,QI,2),Rg()(HI,$I,5),HI)),Rg()(VI,"titlePadding",(WI={},Rg()(WI,XI,0),Rg()(WI,KI,0),Rg()(WI,QI,0),Rg()(WI,$I,0),WI)),VI),uT={mount:{},availHeight:{},availWidth:{},config:{sanitization:function(t,e){return Fs(t._config,e)}},logicalSpace:{},minSpacing:{},source:{}},sT=(UI={},Rg()(UI,"geom",Fs({data:{},caption:{},config:{},axes:{},facetByFields:{},fields:{},transform:{},layerDef:{},detailFields:{}},uT)),Rg()(UI,"text",Fs({smartText:{}},uT)),Rg()(UI,"axis",uT),Rg()(UI,"blank",uT),UI);function lT(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=eg()(t);if(e){var i=eg()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Jp()(this,n)}}var fT=function(t){Qp()(n,t);var e=lT(n);function n(t){var r;return Yp()(this,n),(r=e.call(this,t))._axis=null,r._availHeight=null,r._availWidth=null,r._logicalSpace=null,Ps(Og()(r),sT.axis),r}return Kp()(n,[{key:"valueOf",value:function(){return this.source().id}},{key:"serialize",value:function(){return{type:"axis",axis:this.source().serialize()}}},{key:"getLogicalSpace",value:function(){var t,e,n,r,i,a,o,c,u,s;return this.logicalSpace()||this.logicalSpace((r=(t=this).source(),i=t.config(),a=i.spaceFixer,o=i.margin,c=r.getLogicalSpace(),u=c.width,s=c.height,!0===r.config().show?(n=Math.floor(s+o.top+o.bottom+a),e=Math.floor(u+o.left+o.right+a)):(e=u,n=s),{width:e,height:n})),this.logicalSpace()}},{key:"setAvailableSpace",value:function(t,e){this.availWidth(t),this.availHeight(e);var n=this.config(),r=n.margin,i=n.isOffset;return t||e?(this.source().setAvailableSpace(t,e,r,i),this.source().logicalSpace(null)):this.source().resetLogicalSpace(),this.logicalSpace(null),this}},{key:"render",value:function(t){if(!t)return this;var e=0,n=0,r=this.source(),i=this.availHeight(),a=this.availWidth(),o=this.config().margin,c=o.top,u=o.bottom,s=o.left,l=o.right,f=r.config(),h=f.show,d=f.orientation,p=Fd(Od(t),"div",[this],"".concat("muze","-").concat("axis-cell")),g=Fd(p,"svg",[1],"".concat("muze","-axis-container"));return g.classed("".concat("muze","-axis-container-").concat(d),!0),this.mount(t),a||g.attr("width","".concat(0,"px")),i||g.attr("height","".concat(0,"px")),e=a,n=i,h||(e=d===QI||d===$I?a:0,n=d===QI||d===$I?0:i),p.style("width","".concat(e,"px")).style("height","".concat(n,"px")).style("margin-top",c).style("margin-bottom",u).style("margin-left",s).style("margin-right",l),r.mount(g.node()),g}},{key:"remove",value:function(){return this.source()&&this.source().remove(),this.mount()&&this.mount().remove(),this}},{key:"type",get:function(){return"axis"}},{key:"id",get:function(){return this._id}}],[{key:"formalName",value:function(){return"AxisCell"}},{key:"defaultConfig",value:function(){return cT}}]),n}(oT);function hT(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=eg()(t);if(e){var i=eg()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Jp()(this,n)}}var dT=function(t){Qp()(n,t);var e=hT(n);function n(t){var r;return Yp()(this,n),r=e.call(this,t),Ps(Og()(r),sT.blank),r}return Kp()(n,[{key:"valueOf",value:function(){return this.id}},{key:"serialize",value:function(){return{type:"blank"}}},{key:"getLogicalSpace",value:function(){return this.logicalSpace()?this.logicalSpace():{width:this.width||0,height:this.height||0}}},{key:"setAvailableSpace",value:function(t,e){return this.availWidth(t),this.availHeight(e),this.logicalSpace(null),this}},{key:"render",value:function(t){if(t){var e=this.config().style;this.mount(t);var n=Od(t),r=Fd(n,"div",[this.id]);r.classed("".concat("muze","-").concat("blank-cell"),!0),r.style("width","".concat(this.availWidth(),"px")),r.style("height","".concat(this.availHeight(),"px")),r.html(""),e&&Ld(r,e)}return this}},{key:"remove",value:function(){return this.mount()&&this.mount().remove(),this}},{key:"getMinMeasures",value:function(){return 0}},{key:"type",get:function(){return"blank"}},{key:"id",get:function(){return this._id}}],[{key:"defaultConfig",value:function(){return cT}},{key:"formalName",value:function(){return"BlankCell"}}]),n}(oT),pT=(n(105),function(t){var e=t.source(),n=t.minSpacing(),r=n.height,i=n.width,a=t.config(),o=a.margin,c=a.rotation,u=o.left,s=o.right,l=o.top+o.bottom+r,f=u+s+i,h=t.availHeight()-l,d=t.availWidth()-f,p=t.dependencies().labelManager;return p.setStyle(t._computedStyle),!c&&t.smartText(p.getSmartText(e,d,h,!1)),c&&t.smartText(p.getSmartText(e,h,d,!0)),t}),gT=function(t){var e=!1;return t!=="".concat("title")&&t!=="".concat("subtitle")||(e=!0),e},vT=function(t){var e=t.dependencies().labelManager,n=t.minSpacing(),r=n.height,i=n.width,a=t.config(),o=a.margin,c=a.show,u=a.maxLines,s=a.minCharacters,l=o.left,f=o.right,h=o.top+o.bottom+r,d=l+f+i,p=t.availHeight()-h,g=t.availWidth()-d,v=t.source(),y=t.smartText(),m=new Array(s).fill("W").join(""),b=e.getOriSize(m);if(t.config({rotation:!1}),y.width>(g||0)&&u&&(y.height=y.oriTextHeight*u),g&&g<y.width&&(y.width=b.width),g&&g<Math.min(b.width,y.oriTextWidth)){var x=e.getSmartText(v,p,b.height,!0),w=x.height,_=x.width;y.width=_,y.height=w,t.config({rotation:!0}),t.smartText(x)}var k=t.config(),S=k.subType,M=k.headerPadding;return gT(S)||(y.width+=M[XI]+M[KI]),c?{width:Math.ceil(y.width)+d,height:Math.ceil(y.height)+h}:{width:0,height:0}};function yT(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=eg()(t);if(e){var i=eg()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Jp()(this,n)}}var mT=function(t){Qp()(n,t);var e=yT(n);function n(t,r){var i;Yp()(this,n),(i=e.call(this,t))._dependencies=r,i._className=i._config.className||("header"===i._config.type?"".concat("muze","-").concat("header","-cell"):"".concat("muze","-").concat("text","-cell")),i._computedStyle=Zd(Od("body"),i._className),i._dependencies.labelManager.setStyle(i._computedStyle),Ps(Og()(i),sT.text);var a=i._dependencies.labelManager.getOriSize("w");return i.minSpacing({width:Math.floor(3*a.width/4),height:Math.floor(a.height/2)}),pT(Og()(i)),i}return Kp()(n,[{key:"valueOf",value:function(){return this.source()}},{key:"dependencies",value:function(){return this._dependencies}},{key:"serialize",value:function(){return{text:this.source(),type:"text"}}},{key:"getLogicalSpace",value:function(){this.logicalSpace()||this.logicalSpace(vT(this));var t=vT(this);return this.logicalSpace(t),this.logicalSpace()}},{key:"setAvailableSpace",value:function(t,e){return this.availWidth(t),this.availHeight(e),pT(this),this.logicalSpace(null),this}},{key:"render",value:function(t){var e=this.availWidth(),n=this.availHeight(),r=this.config(),i=r.margin,a=r.show,o=r.verticalAlign,c=r.textAlign,u=r.rotation,s=r.padding,l=r.type,f=r.headerPadding,h=r.className,d=r.titlePadding;if(this.mount(t),a){var p=Od(t),g=Fd(p,"div",[this.id],"".concat("muze","-").concat("text-cell")),v=o||u?"middle":"top",y=this.smartText(),m=y.width,b=y.height,x=this.minSpacing().height,w={top:m+x/2,middle:m/2+x,bottom:x};p.style("vertical-align",v),g.classed(this._className,!0),g.style("display","inline"),g.style("transform",u?"translate(".concat(b/2,"px,\n                ").concat(w[v],"px) rotate(-90deg)"):""),g.style("width",e?"".concat(e,"px"):"100%"),[QI,$I,XI,KI].forEach((function(t){p.style("margin-".concat(t),"".concat(i[t],"px"))})),g=function(t){var e,n=t.elem,r=t.className,i=t.headerPadding,a=t.padding,o=t.type,c=t.titlePadding;return e=gT(r)?c:"header"===o?i:a,[QI,$I,XI,KI].forEach((function(t){n.style("padding-".concat(t),"".concat(e[t],"px"))})),n}({elem:g,className:h,headerPadding:f,padding:s,type:l,titlePadding:d}),"muze-grid-headers"===this._className&&g.style("text-align",c),g.style("display","inline"),this._dependencies.labelManager.setStyle(this._computedStyle),g.html(this._dependencies.labelManager.getSmartText(this.source(),e,n,!0).text)}return this}},{key:"remove",value:function(){return this.mount()&&this.mount().remove(),this}},{key:"type",get:function(){return"text"}},{key:"id",get:function(){return this._id}}],[{key:"defaultConfig",value:function(){return cT}},{key:"formalName",value:function(){return"TextCell"}}]),n}(oT);function bT(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=eg()(t);if(e){var i=eg()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Jp()(this,n)}}var xT,wT=function(t){Qp()(n,t);var e=bT(n);function n(t){var r;return Yp()(this,n),(r=e.call(this,t))._unit=null,r._layers=null,r._axes={},r._datamodel={},r._facetByFields={},r._fields=null,r._transform=null,r._caption=null,Ps(Og()(r),sT.geom),r}return Kp()(n,[{key:"valueOf",value:function(){return this.source()}},{key:"serialize",value:function(){return{type:"geom",unit:this.source().serialize(),caption:this.caption()}}},{key:"updateModel",value:function(){var t=this,e=this.source();return e.clearCaching(),[rT,nT,JI,eT,iT,ZI,JI,tT,aT].forEach((function(n){t[n]()&&e[n](t[n]())})),this}},{key:"getCaptionSpace",value:function(){var t=this.caption(),e={width:0,height:0};return t&&(e=t.getLogicalSpace()),e}},{key:"getLogicalSpace",value:function(){var t,e,n,r;return this.logicalSpace()||this.logicalSpace((e=(t=this).source().config(),n=e.width,r=e.height,{width:Math.ceil(n),height:Math.ceil(r+t.getCaptionSpace().height)})),this.logicalSpace()}},{key:"setAvailableSpace",value:function(t,e){var n=this.source();return this.availWidth(t),this.availHeight(e),n.lockModel().width(t).height(e-this.getCaptionSpace().height).unlockModel(),this.logicalSpace(null),this}},{key:"render",value:function(t){if(t){this.mount(t);var e=this.availHeight(),n=this.availWidth(),r=this.caption(),i=Fd(Od(t),"div",[1],"".concat("muze","-").concat("geom-cell"));if(r){var a=Fd(i,"div",[r],"".concat("muze","-unit-caption")).node();r.render(a)}var o=Fd(i,"div",[1],"".concat("muze","-unit"));i.style("width","".concat(n,"px")).style("height","".concat(e,"px")),o.style("width","".concat(n,"px")).style("height","".concat(e-this.getCaptionSpace().height,"px")),this.source().mount(o.node())}return this}},{key:"remove",value:function(){return this.mount()&&this.mount().remove(),this.source().remove(),this}},{key:"type",get:function(){return"geom"}},{key:"id",get:function(){return this.source().id()}}],[{key:"formalName",value:function(){return"GeomCell"}},{key:"defaultConfig",value:function(){return cT}}]),n}(oT),_T=(xT={},Rg()(xT,"SimpleCell",oT),Rg()(xT,"TextCell",mT),Rg()(xT,"AxisCell",fT),Rg()(xT,"GeomCell",wT),Rg()(xT,"BlankCell",dT),xT),kT=function t(){var e=_T;return{register:function(n){var r=n.formalName();return r in e&&(e[r]=n),t},get:function(){return e}}},ST=function(t){return"function"!=typeof t||t._sanitize?cl(t()):t()},MT=function(t,e,n,r){return t?function(t,e,n,r){var i={},a=t.content,o=t.classPrefix,c=t.maxLines,u=r||new mT({type:"title"===e?"header":"text",className:"".concat(o,"-").concat(e,"-cell"),subType:e},{labelManager:n}).config({maxLines:c}).minSpacing({width:0,height:0});return u.source(a),u._minTickDiff={height:0,width:0},i="top"===t.position?{top:0,bottom:t.padding}:{top:t.padding,bottom:0},u.config({margin:i}),{height:u.getLogicalSpace().height,cell:u}}(t,e,n,r):""},ET=function(t,e,n,r){var i=[],a=n.height,o=n.width,c=n.headerHeight,u=t.position,s=t.align,l=function(t){var e,n=[],r=t.getRetinalAxes();return Object.entries(r).forEach((function(r){var i=r[1][0],a=r[0],o=t[a]();if(o.field&&i){var c=i.config(),u=c.type,s=c.step,l="boolean"==typeof s&&s;e=SP["".concat(u,"-").concat(l,"-").concat(a)],n.push({scale:i,canvas:t,fieldName:o.field,title:Al(t.data(),o.field),LegendCls:e,scaleType:a})}})),n}(e),f=e.config().invalidValues,h=e.registry().interactions,d=El(f);return l.forEach((function(n,l){var f={},p=n.LegendCls,g=n.scale,v=n.fieldName,y=n.title,m=n.scaleType,b=t[m]||{},x=b.title||{};if(x.text=x.text||y,b.show){b.position=u,b.align=s;var w=Cs(r[m],l);w||(w=p.create({labelManager:e._dependencies.smartlabel,cells:{AxisCell:fT,TextCell:mT},registry:{interactions:h}})),f.maxHeight="vertical"===s?a-c:.2*a,f.maxWidth="horizontal"===s?o:.2*o,f.width=Math.min(f.maxWidth,b.width),f.height=Math.min(f.maxHeight,b.height),[bP,xP,wP].forEach((function(t){f[t]=b[t]}));var _=w.metaData();_ instanceof gt&&_.dispose();var k=e.composition().visualGroup.resolver().matrixLayers()[0][0];b.shape=function(t,e){var n=t.map((function(t){return t.mark}));return kP[("color"===e||"size"===e)&&n.includes("point")]}(k,m),w.scale(g).valueParser(d).title(x).fieldName(v).config(b).metaData(e.composition().visualGroup.getGroupByData().project([v])).measurement(f).canvasAlias(e.alias()).setLegendMeasures(),i.push({canvas:e,legend:w,scaleType:m})}})),i};function CT(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=XD()(t);if(e){var i=XD()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return qD()(this,n)}}var AT=function(t){UD()(n,t);var e=CT(n);function n(){return RP()(this,n),e.apply(this,arguments)}return OP()(n,[{key:"getLogicalSpace",value:function(){var t=this.boundBox();return{width:t.width,height:t.height}}},{key:"setSpatialConfig",value:function(t){this.boundBox({top:t.y,left:t.x}),this.newDimensions={width:t.width,height:t.height},this.renderAt(t.renderAt)}},{key:"getBoundBox",value:function(){return this.boundBox()}},{key:"updateWrapper",value:function(){throw Error("Update is not implemented")}},{key:"setParams",value:function(){throw Error("set params is not implemented")}},{key:"setComponentInfo",value:function(){throw Error("setComponentInfo is not implemented")}}]),n}(YP);function PT(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=XD()(t);if(e){var i=XD()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return qD()(this,n)}}var DT=function(t){UD()(n,t);var e=PT(n);function n(t){var r;return RP()(this,n),(r=e.call(this,t.name,t.component.getLogicalSpace(),0)).setParams(t),r}return OP()(n,[{key:"renderHeader",value:function(t){var e=this.params.config;t=Od(t);var n=e.align,r=t.selectAll(".".concat(e.classPrefix,"-inner-container")).data([this.name]);r.exit().remove();var i=r.enter().append("div").merge(r);i.classed("".concat(e.classPrefix,"-inner-container"),!0);var a=this.boundBox(),o=a.height,c=a.width;this.component.setAvailableSpace(c,o),this.component&&this.component.render(i.node()),i.selectAll("div").classed("".concat(e.classPrefix,"-inner-content"),!0),i.style("width","".concat(100,"%")),e&&this.component&&i.style("float","left").style("text-align",n)}},{key:"draw",value:function(t){this.renderHeader(t||document.getElementById(this.renderAt()))}},{key:"updateWrapper",value:function(t){return this.setParams(t),this.name(t.name),this.boundBox(t.component.getLogicalSpace()),this}},{key:"setParams",value:function(t){this.component=t.component,this.params=t,this.target(t.config.target),this.position(t.config.position),this.className(t.config.className),this.alignWith(t.config.alignWith),this.alignment(t.config.alignment)}},{key:"setSpatialConfig",value:function(t){this.boundBox({top:t.y,left:t.x,width:t.width,height:t.height}),this.renderAt(t.renderAt)}}]),n}(AT);function IT(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=XD()(t);if(e){var i=XD()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return qD()(this,n)}}var TT=function(t){UD()(n,t);var e=IT(n);function n(t){var r;return RP()(this,n),(r=e.call(this,t.name,t.config.measurement.legendSpace,0)).setParams(t),r}return OP()(n,[{key:"renderLegend",value:function(t){t=Od(t);var e=[],n=this.params.config,r=n.position,i=n.classPrefix,a=Fd(t,"div",[this.components],"".concat(i,"-inner-content"),{},(function(t){return t}));a.classed("".concat(i,"-legend"),!0);var o="left"===r||"right"===r?"vertical":"horizontal",c=this.newDimensions.width,u=this.newDimensions.height;if([t,a].forEach((function(t){t.style("width","".concat(Math.floor(c),"px")).style("height","".concat(u,"px")).style("float","left")})),"vertical"===o){var s=-1,l=u,f=0;this.components.forEach((function(t){var n=t.legend;n.measurement().height>l?(s++,f=0,l=u):s<0&&s++,e[s]=e[s]||[],l-=Math.min(n.measurement().height,l),f=Math.max(Math.min(n.measurement().width,n.measurement().maxWidth),f),e[s].push({legend:n,legendHeight:u,legendWidth:f})}));var h=Fd(a,["div"],e,"".concat(i,"-legend-section"));h.classed("".concat(i,"-legend-vertical-section"),!0).style("width",(function(t){return"".concat(t[0].legendWidth,"px")})),Fd(h,["div"],(function(t){return t}),"".concat(i,"-legend-components"),{},(function(t){return t.legend.id()})).each((function(t){t.legend.mount(this)})).style("width",(function(t){return"".concat(t.legendWidth,"px")}))}else{var d=Fd(a,"div",[1],"".concat(i,"-legend-section"));d.classed("".concat(i,"-legend-horizontal-section"),!0),d.classed("".concat(i,"-legend-section-",0),!0).style("width","".concat(c,"px")),Fd(d,"div",this.components,"".concat(i,"-legend-components"),{},(function(t){return t.legend.id()})).style("width",(function(t){return"".concat(t.legend.measurement().width,"px")})).each((function(t){t.legend.mount(this)}))}}},{key:"draw",value:function(t){this.renderLegend(t||document.getElementById(this.renderAt()))}},{key:"updateWrapper",value:function(t){return this.name(t.name),this.boundBox(t.config.measurement.legendSpace),this.setParams(t),this}},{key:"setParams",value:function(t){this.components=t.component,this.params=t,this.target(t.config.target),this.position(t.config.position);var e=function(t){var e=null,n="".concat(hD[1],"-").concat(dD[1]);switch(t){case"top":case"bottom":e="h-center";break;case"left":case"right":e="v-center";break;default:e="v-center"}return{alignment:e,alignWith:n}}(t.config.position),n=e.alignWith,r=e.alignment;this.className(t.config.className),this.alignWith(t.config.alignWith||n),this.alignment(t.config.alignment||r)}},{key:"setComponentInfo",value:function(t){var e=t.rootNode;this.components.forEach((function(t){t.legend.setParentInfo({canvasRoot:e})}))}}]),n}(AT),RT=n(31),NT=n.n(RT),OT=(n(107),Qd()),FT={left:"width",right:"width",top:"height",bottom:"height"},LT=function(t,e,n){var r=0;return(t.primary&&t.primary.length?t.primary:t.secondary).map((function(t){var i=100*r/(e-n);return r+=t,i}))},jT=function(t,e,n){var r=n.classPrefix,i=n.thickness,a=Fd(t,"div",[e],"".concat(r,"-scroll-arrow-").concat(e));return a.classed("".concat(r,"-scroll-arrow"),!0),a.style(FT[e],"".concat(i,"px")),Fd(a,"div",[1],"".concat(r,"-scroll-arrow-chevron")).attr("id","".concat(r,"-scroll-arrow-chevron-").concat(e)),a},BT=function(t,e){var n=e.classPrefix,r=Fd(t,"div",[1],"".concat(n,"-scroll-rect"));return{rect:r,mover:Fd(r,"div",[1],"".concat(n,"-scroll-mover"))}},zT=function(t,e,n){var r=t.mover,i=t.rect,a=r.node().getBoundingClientRect(),o=a.x,c=a.y,u=i.node().getBoundingClientRect(),s=u.x,l=u.y;e.changeMoverPosition({x:o-s+n,y:c-l+n})},HT=function(t,e,n,r){var i="",a=t._components[n],o=Jd();a.on(o?"touchstart":"mousedown",(function(){$d().preventDefault(),i=setInterval((function(){zT(e,t,r)}),100)})).on(o?"touchend":"mouseup",(function(){$d().preventDefault(),clearInterval(i)})).on("click",(function(){zT(e,t,r)}))},WT=function(t){var e=t._components.moverRect,n=t.config().speed;HT(t,e,"prevArrow",-n),function(t,e){var n={},r=0,i=0,a={},o=e.mover,c=e.rect;o.call(OT().on("start",(function(){var t=$d();r=o.node().getBoundingClientRect(),i=c.node().getBoundingClientRect(),n={x:t.x,y:t.y}})).on("drag",(function(){var e=$d(),o=vs(),c=(a={x:e.x,y:e.y}).x-n.x,u=a.y-n.y,s={x:r.x+c-i.x+o.pageXOffset,y:r.y+u-i.y+o.pageYOffset};t.changeMoverPosition(s)})))}(t,e),function(t,e){e.rect.on("click",(function(){var e=$d();t.emptyScrollAreaClick(e)}))}(t,e),HT(t,e,"nextArrow",n)},VT=function(t,e,n,r){var i=e.classPrefix,a=Fd(Od(t),"div",[1],"#".concat(i,"-scroll-bar-").concat(r));return a.classed("".concat(i,"-scroll-bar"),!0),a.style("width","".concat(n.width,"px")),a.style("height","".concat(n.height,"px")),a},UT={config:{sanitization:function(t,e){return e=Fs(t._config,e)}},manager:{},unitPositions:{},logicalSpace:{}},GT=function(){function t(){RP()(this,t),this._components={},this._logicalSpace={},this._attachedScrollAction=function(){},this._config={thickness:10,speed:2},this._unitPositions=null,Ps(this,UT)}return OP()(t,[{key:"emptyScrollAreaClick",value:function(){throw new Os("Method not implemented")}},{key:"changeMoverPosition",value:function(){throw new Os("Method not implemented")}},{key:"scrollTo",value:function(){throw new Os("Method not implemented")}},{key:"scrollDeltaTo",value:function(){throw new Os("Method not implemented")}},{key:"createScroll",value:function(t){var e=this.config();return{scrollBarContainer:VT(t,e,this.logicalSpace(),this.constructor.type())}}},{key:"attachScrollAction",value:function(t){return this._attachedScrollAction=t,this}},{key:"detachScrollAction",value:function(){return this._attachedScrollAction=function(){},this}},{key:"getLogicalSpace",value:function(){return this.logicalSpace()}},{key:"registerListeners",value:function(){return WT(this),this}},{key:"remove",value:function(){return this._components.scrollBarContainer.remove(),this}}],[{key:"type",value:function(){throw new Os("Method not implemented")}}]),t}();function qT(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=XD()(t);if(e){var i=XD()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return qD()(this,n)}}function YT(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=XD()(t);if(e){var i=XD()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return qD()(this,n)}}function XT(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=XD()(t);if(e){var i=XD()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return qD()(this,n)}}var KT={horizontal:function(t){UD()(n,t);var e=qT(n);function n(){return RP()(this,n),e.apply(this,arguments)}return OP()(n,[{key:"createScroll",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.logicalSpace(),r=this.config(),i=NT()(XD()(n.prototype),"createScroll",this).call(this,t,r,e),a=i.scrollBarContainer,o=jT(a,"left",r),c=BT(a,r),u=jT(a,"right",r),s=c.mover,l=c.rect,f=this.logicalSpace(),h=f.height,d=f.width,p=f.totalLength,g=f.viewLength,v=f.unitWidths,y=d-2*h;l.style("width","".concat(e.width-2*h,"px")),l.style("height","".concat(100,"%")),s.style("width","".concat(g*y/p,"px")),s.style("height","".concat(100,"%")),s.style("left","".concat(0,"px")),this._components={prevArrow:o,nextArrow:u,moverRect:c,scrollBarContainer:a},this._scrollBarWithouArrowLength=y,this.unitPositions(LT(v,p,g)),this.registerListeners()}},{key:"emptyScrollAreaClick",value:function(t){var e=this._components.moverRect,n=e.mover,r=e.rect,i=this.config().speed,a=n.node().getBoundingClientRect(),o=a.x,c=a.y,u=r.node().getBoundingClientRect(),s=u.x,l=u.y,f=10*i;t.x<o&&(f=10*-i),this.changeMoverPosition({x:o-s+f,y:c-l+f})}},{key:"changeMoverPosition",value:function(t){var e,n=this._components.moverRect,r=n.mover,i=n.rect.node().getBoundingClientRect(),a=r.node().getBoundingClientRect(),o=this.logicalSpace().totalLength;e=t.x<0?0:t.x+a.width>i.width?i.width-a.width:t.x,r.style("left","".concat(e,"px"));var c=e*o/this._scrollBarWithouArrowLength;this.manager().performAttachedScrollFunction(this.constructor.type(),c)}},{key:"scrollDeltaTo",value:function(t){var e=this._components.moverRect,n=e.mover,r=e.rect,i=n.node().getBoundingClientRect(),a=r.node().getBoundingClientRect();return this.changeMoverPosition({y:0,x:i.x-a.x-t}),this}},{key:"scrollTo",value:function(t){var e=this._components.moverRect.mover.node().getBoundingClientRect(),n=t*(this._scrollBarWithouArrowLength-e.width)/100;return this.changeMoverPosition({y:0,x:n}),this}}],[{key:"type",value:function(){return"horizontal"}}]),n}(GT),vertical:function(t){UD()(n,t);var e=YT(n);function n(){return RP()(this,n),e.apply(this,arguments)}return OP()(n,[{key:"createScroll",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.logicalSpace(),r=this.config(),i=NT()(XD()(n.prototype),"createScroll",this).call(this,t,e),a=i.scrollBarContainer,o=jT(a,"top",r),c=BT(a,r),u=jT(a,"bottom",r),s=c.mover,l=c.rect,f=this.logicalSpace(),h=f.height,d=f.width,p=f.totalLength,g=f.viewLength,v=f.unitHeights,y=h-2*d;l.style("height","".concat(y,"px")),l.style("width","".concat(100,"%")),s.style("width","".concat(100,"%")),s.style("height","".concat(g*y/p,"px")),s.style("top","".concat(0,"px")),this._components={prevArrow:o,nextArrow:u,moverRect:c,scrollBarContainer:a},this._scrollBarWithouArrowLength=y,this.unitPositions(LT(v,p,g)),this.registerListeners()}},{key:"emptyScrollAreaClick",value:function(t){var e=this._components.moverRect,n=e.mover,r=e.rect,i=this.config().speed,a=n.node().getBoundingClientRect(),o=a.x,c=a.y,u=r.node().getBoundingClientRect(),s=u.x,l=u.y,f=10*i;t.y<c&&(f=10*-i),this.changeMoverPosition({x:o-s+f,y:c-l+f})}},{key:"changeMoverPosition",value:function(t){var e,n=this._components.moverRect,r=n.mover,i=n.rect,a=this.logicalSpace().totalLength,o=i.node().getBoundingClientRect(),c=r.node().getBoundingClientRect();e=t.y<0?0:t.y+c.height>o.height?o.height-c.height:t.y,r.style("top","".concat(e,"px"));var u=e*a/this._scrollBarWithouArrowLength;this.manager().performAttachedScrollFunction(this.constructor.type(),u)}},{key:"scrollDeltaTo",value:function(t){var e=this._components.moverRect,n=e.mover,r=e.rect,i=n.node().getBoundingClientRect(),a=r.node().getBoundingClientRect();return this.changeMoverPosition({y:i.y-a.y-t,x:0}),this}},{key:"scrollTo",value:function(t){var e=this._components.moverRect.mover.node().getBoundingClientRect(),n=t*(this._scrollBarWithouArrowLength-e.height)/100;return this.changeMoverPosition({x:0,y:n}),this}}],[{key:"type",value:function(){return"vertical"}}]),n}(GT)},$T=function(t){UD()(n,t);var e=XT(n);function n(t){var r;RP()(this,n);var i=KT[t.config.type];return t.component=new i,t.component.config(t.config.scrollBarComponentConfig),t.component.logicalSpace(t.dimensions),(r=e.call(this,t.name,t.component.getLogicalSpace(),0)).setParams(t),r}return OP()(n,[{key:"manager",value:function(){return arguments.length?(this.component.manager(arguments.length<=0?void 0:arguments[0]),this):this.component.manager()}},{key:"scrollDeltaTo",value:function(t){return this.component.scrollDeltaTo(t),this}},{key:"scrollTo",value:function(t){return this.component.scrollTo(t),this}},{key:"scrollToUnitIndex",value:function(t){var e=this.component.unitPositions(),n=Math.min(Math.max(0,t),e.length-1);return this.component.scrollTo(e[n]),this}},{key:"getScrollPositionsForUnits",value:function(){return this.component.unitPositions()}},{key:"draw",value:function(t){return this.component.createScroll(t||document.getElementById(this.renderAt())),this}},{key:"attachScrollAction",value:function(t){return this.component.attachScrollAction(t),this}},{key:"detachScrollAction",value:function(){return this.component.detachScrollAction(),this}},{key:"updateWrapper",value:function(t){return this.name(t.name),this.component.config(t.config.scrollBarComponentConfig),this.component.logicalSpace(t.dimensions),this.boundBox(this.component.getLogicalSpace()),this.setParams(t),this}},{key:"setParams",value:function(t){this.component=t.component||this.component,this.params=t,this.target(t.config.target),this.position(t.config.position),this.className(t.config.className),this.alignWith(t.config.alignWith),this.alignment(t.config.alignment)}},{key:"remove",value:function(){this.component.remove()}}]),n}(AT);n(108);function QT(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=XD()(t);if(e){var i=XD()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return qD()(this,n)}}var ZT=function(t){UD()(n,t);var e=QT(n);function n(t){var r;return RP()(this,n),(r=e.call(this,t.name,t.config.dimensions,0)).setParams(t),r.className(t.config.className),r}return OP()(n,[{key:"applyScroll",value:function(t){var e=this.params.config.row,n=this.params.config.column,r=this.params.config.scrollInfo,i=r.horizontal,a=r.vertical;t.style("overflow","visible"),t.style("width","auto"),t.style("height","auto"),i&&1===n&&(t.style("overflow","hidden"),t.style("width","100%")),a&&"center"===e&&(t.style("overflow","hidden"),t.style("height","100%"))}},{key:"renderMatrix",value:function(t){var e=this.params.config,n=e.classPrefix,r=e.row,i=e.column,a=e.dimensions,o=e.border,c=e.isFacet,u=e.showHeaders,s=Fd(t,"div",[1],"".concat(n,"-grid-").concat(r,"-").concat(i+1)).classed("".concat(n,"-grid-").concat(r),!0).classed("".concat(n,"-grid"),!0);this.applyScroll(s);var l=jI(this.component,r,i),f=l.viewMatrix,h=l.spans,d=this.renderTable(s,"".concat(n,"-grid"),f).cells;!function(t,e,n,r){var i=qI[r];i&&i(t,e,n)}(d,h,{dimensions:a,border:o},"".concat(r,"-").concat(i)),function(t){t.each((function(t){t.placeholder.render(this)}))}(d),d.exit().each((function(t){t.placeholder.remove()})),DI({cells:d,border:o,row:r,column:i,isFacet:c,showHeaders:u})}},{key:"renderTable",value:function(t,e,n){var r=Fd(t,"table",["layout"],"".concat(e,"-table")),i=Fd(r,"tbody",["layout"],"".concat(e,"-body")),a=Fd(i,"tr",n,"".concat(e,"-tr"));return{table:r,body:i,rows:a,cells:Fd(a,"td",(function(t,e){return t.filter((function(t){return null!==t})).map((function(t){return{placeholder:t,rowIndex:e}}))}),"".concat(e,"-td"),{update:function(t,n){var r=n.placeholder.config().externalClassname;r&&r.map((function(n){return t.classed("".concat(e,"-").concat(n),!0)}))}},(function(t){return t.placeholder.id}))}}},{key:"draw",value:function(t){this.renderMatrix(t||document.getElementById(this.renderAt()))}},{key:"updateWrapper",value:function(t){return this.name(t.name),this.boundBox(t.config.dimensions),this.setParams(t),this}},{key:"setParams",value:function(t){this.component=t.component,this.params=t,this.target(t.config.target),this.position("top"),this.className(t.config.className)}}]),n}(AT);function JT(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=XD()(t);if(e){var i=XD()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return qD()(this,n)}}var tR=function(t,e,n,r){Od(t).selectAll(".".concat(e,"-grid")).property(r,n)},eR=function(t){UD()(n,t);var e=JT(n);function n(t){var r;return RP()(this,n),(r=e.call(this,t.name,t.config.dimensions,0)).gridComponents=[],r.setParams(t),r}return OP()(n,[{key:"sanitizeGrid",value:function(){for(var t=0,e=0,n=this.component.viewInfo(),r=n.viewMatricesInfo,i=n.layoutDimensions,a=this.component.scrollInfo(),o=i.viewHeight,c=i.viewWidth,u=i.unitHeights,s=i.unitWidths,l=0;l<3;l++){this.gridComponents.length&&this.gridComponents[l]instanceof Array||(this.gridComponents[l]=[]);for(var f=0;f<3;f++){var h={height:o[l],width:c[f],unitHeights:u,unitWidths:s},d=r.matrices["".concat(hD[l])][f],p="".concat(hD[l],"-").concat(dD[f]),g={dimensions:h,border:i.border,classPrefix:this.params.config.classPrefix,scrollInfo:a,row:hD[l],column:f};if(this.gridComponents[l][f]instanceof AT){var v=this.params.component.config(),y=v.isFacet,m=v.showHeaders;g.isFacet=y,g.showHeaders=m,this.gridComponents[l][f].updateWrapper({name:p,component:d,config:g})}else{var b=this.params.component.config(),x=b.isFacet,w=b.showHeaders;g.isFacet=x,g.showHeaders=w;var _=new ZT({name:p,component:d,config:g});this.gridComponents[l].push(_)}0===l&&(e+=h.width),0===f&&(t+=h.height)}}this.boundBox({height:t,width:e}),this.component=this.gridComponents,this.allComponents=this.gridComponents}},{key:"scrollBarManager",value:function(){return arguments.length?(this._scrollBarManager=arguments.length<=0?void 0:arguments[0],this):this._scrollBarManager}},{key:"attachScrollListener",value:function(){var t=this.scrollBarManager();return Od("#".concat(this.component[1][1].renderAt())).on("wheel",(function(){var e=$d(),n=e.wheelDeltaX,r=e.wheelDeltaY;0!==n&&Math.abs(n)>Math.abs(r)&&t.preventBrowserScroll("horizontal",e).triggerScrollBarAction("horizontal",n/30),0!==r&&Math.abs(n)<Math.abs(r)&&t.preventBrowserScroll("vertical",e).triggerScrollBarAction("vertical",r/30)})),this}},{key:"performScrollAction",value:function(t,e){var n,r,i;return(n=e,r=this,i=r.params.config.classPrefix,{horizontal:function(){[0,1,2].forEach((function(t){return tR("#".concat(r.component[t][1].renderAt()),i,n,"scrollLeft")}))},vertical:function(){[0,1,2].forEach((function(t){return tR("#".concat(r.component[1][t].renderAt()),i,n,"scrollTop")}))}})[t](),this}},{key:"getBoundBox",value:function(){var t=this.component[0][0].boundBox(),e=t.top,n=t.left,r=this.boundBox();return{top:e,left:n,height:r.height,width:r.width}}},{key:"updateWrapper",value:function(t){return this.name(t.name),this.boundBox(t.config.dimensions),this.setParams(t),this}},{key:"setParams",value:function(t){return this.component=t.component,this.params=t,this.target(t.config.target),this.className(t.config.className),this.sanitizeGrid(),this}},{key:"attachListener",value:function(){return this.attachScrollListener(),this}}]),n}(AT);function nR(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=XD()(t);if(e){var i=XD()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return qD()(this,n)}}var rR,iR=function(t,e){var n=UP.baseFontLimit,r=UP.upperFontLimit,i=UP.baseSizeLimit,a=UP.upperSizeLimit,o=r,c=t<e&&0!==t?t:e;return 0===c?o=0:c<=i?o=n:c>i&&c<a&&(o=n+(a-c)/((a-i)/(r-n))),o},aR=function(t){UD()(n,t);var e=nR(n);function n(t){var r;return RP()(this,n),(r=e.call(this,t.name,t.config.dimensions,0)).setParams(t),r}return OP()(n,[{key:"render",value:function(t){var e=Od(t),n=this.params.config,r=n.classPrefix.className,i=Fd(e,"div",[1],r),a=n.dimensions,o=a.height,c=a.width,u=o>UP.baseSizeLimit?UP.fractionChild*o:0,s=n.message;Ld(i,{width:"".concat(c,"px"),height:"".concat(o,"px")});var l=Fd(i,"div",[1],"".concat(r,"-child")),f=Fd(l,"div",[1],"".concat(r,"-child-img")),h=Fd(l,"div",[1],"".concat(r,"-child-message"));Ld(l,{width:c,height:"".concat(u,"px")}),Ld(f,{width:c,height:"".concat(u*UP.fractionImage,"px")}),f.html('<svg width="215px" height="199px" viewBox="0 0 215 199" \nversion="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n\x3c!-- Generator: Sketch 60.1 (88133) - https://sketch.com --\x3e\n\n<title>Group 23</title>\n    <desc>Created with Sketch.</desc>\n    <defs>\n        <polygon id="path-1" points="0.149161328 0.420711883 72.119 0.420711883 \n        72.119 71.9995421 0.149161328 71.9995421"></polygon>\n        <polygon id="path-3" points="0 0.08 186.190753 0.08 186.190753 88.592 0 88.592"></polygon>\n    </defs>\n    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <g id="Group-23" transform="translate(0.000000, -1.000000)">\n            <g id="Group-3" transform="translate(142.000000, 127.920000)">\n                <mask id="mask-2" fill="white">\n                    <use xlink:href="#path-1"></use>\n                </mask>\n                <g id="Clip-2"></g>\n                <path d="M0.163,36.1555 C0.163,28.8495 0.126,21.5445 0.173,14.2395 \n                C0.226,6.1165 4.776,0.7895 12.76,0.6405 C28.362,0.3505 43.979,0.3335 \n                59.58,0.6735 C67.574,0.8475 72.079,6.2375 72.096,14.3735 C72.125,28.9835 \n                72.129,43.5935 72.094,58.2045 C72.074,66.4205 67.223,71.7225 58.955,71.8405 \n                C43.682,72.0565 28.4,72.0515 13.128,71.8315 C4.928,71.7135 0.221,66.4315 \n                0.172,58.0705 C0.129,50.7655 0.163,43.4605 0.163,36.1555" id="Fill-1" \n                fill="#8c8d8e" mask="url(#mask-2)"></path>\n            </g>\n            <g id="Group-6" transform="translate(0.000000, 0.920000)">\n                <mask id="mask-4" fill="white">\n                    <use xlink:href="#path-3"></use>\n                </mask>\n                <g id="Clip-5"></g>\n                <path d="M183.4677,4.615 C174.5697,3.72 165.6917,2.607 156.8037,1.597 C152.7477,1.136 \n                147.5417,-0.986 144.9347,0.755 C142.0737,2.664 143.7187,8.515 142.6187,12.488 C141.7057,\n                15.785 143.1607,16.531 146.0297,16.716 C149.3127,16.928 152.5717,17.483 156.6277,17.987 \n                C137.8927,32.589 119.9087,46.473 102.1267,60.61 C99.4257,62.757 98.2077,62.204 96.1947,\n                60.05 C85.5357,48.644 74.6947,37.409 64.0607,25.979 C61.8547,23.608 60.5757,23.002 57.8627,\n                25.586 C51.9777,31.188 45.6137,36.286 39.4547,41.6 C26.7597,52.553 14.0947,63.54 1.3487,\n                74.433 C-0.2963,75.838 -0.4833,76.732 1.0457,78.354 C4.1127,81.609 6.9717,85.061 10.0567,\n                88.592 C26.7507,74.17 43.3037,59.87 59.9757,45.469 C71.5287,57.708 82.9977,69.719 94.2677,\n                81.914 C96.5347,84.368 98.0097,84.604 100.6707,82.492 C116.3907,70.016 132.2397,57.704 \n                148.0587,45.353 C153.9727,40.736 159.9197,36.162 165.9517,31.491 C167.0647,36.458 163.2367,\n                42.055 165.8357,44.513 C168.4597,46.994 174.2387,46.065 178.6037,46.814 C180.5447,47.148 \n                181.1657,46.627 181.4047,44.671 C182.9067,32.336 184.5297,20.016 186.1377,7.696 C186.4127,\n                5.593 185.6327,4.833 183.4677,4.615" id="Fill-4" fill="#8c8d8e" mask="url(#mask-4)"></path>\n            </g>\n            <path d="M68.7436,89.5418 C63.2716,89.6988 57.7836,89.7768 52.3196,89.5178 C49.1866,89.3688 \n            48.3926,90.4028 48.4386,93.4328 C48.6076,104.5468 48.5056,115.6668 48.5056,126.7838 C48.5056,\n            138.0668 48.5916,149.3518 48.4436,160.6328 C48.4076,163.4118 49.1436,164.3578 52.0056,164.2518 \n            C57.8066,164.0398 63.6226,164.0938 69.4276,164.2338 C71.7586,164.2898 72.5516,163.6408 72.5416,\n            161.1938 C72.4536,138.4608 72.4326,115.7288 72.556775,92.9968 C72.5736,89.9318 71.3526,89.4668 \n            68.7436,89.5418" id="Fill-7" fill="#8c8d8e"></path>\n            <path d="M144.3769,91.2962 C138.9019,91.4772 133.4019,91.5912 127.9409,91.2652 C124.4229,91.0562 \n            123.8999,92.4662 123.9449,95.5182 C124.1039,106.3102 124.0069,117.1072 124.0069,127.9012 C124.0079,\n            137.3672 124.0079,146.8332 124.0079,156.3002 C124.0079,164.4422 124.0079,164.3082 132.1549,\n            164.2632 C134.9749,164.2472 135.8559,163.4702 135.7569,160.6292 C135.5449,154.6582 135.6479,\n            148.6742 135.6999,142.6952 C135.7679,135.0662 138.3559,128.6922 145.3599,124.8822 C147.2959,\n            123.8292 147.7519,122.5322 147.7349,120.5452 C147.6649,111.9092 147.6109,103.2722 147.7569,\n            94.6382 C147.8009,92.0132 146.9799,91.2102 144.3769,91.2962" id="Fill-9" fill="#8c8d8e"></path>\n            <path d="M110.3095,117.074 C110.3265,114.616 109.4485,113.950948 107.1345,113.998 C101.3365,\n            114.117 95.5265,114.204 89.7365,113.96 C86.7245,113.833 86.2185,115.041 86.2735,117.672 C86.4225,\n            124.795 86.3255,131.923 86.3245,139.049 C86.3245,146.34 86.4355,153.634 86.2645,160.922 C86.2035,\n            163.546 86.9745,164.336 89.6015,164.249 C95.3955,164.057 101.2015,164.133 107.0005,164.217 C109.1175,\n            164.247 110.3385,163.986 110.3185,161.321 C110.2015,146.573 110.2115,131.823 110.3095,117.074" \n            id="Fill-11" fill="#8c8d8e"></path>\n            <path d="M31.1347,116.1951 C25.3367,116.4001 19.5237,116.3591 13.7217,116.2131 C11.2637,116.1521 \n            10.6717,117.0871 10.6857,119.3921 C10.7747,133.3221 10.7877,147.2541 10.6847,161.1851 C10.6667,163.6601 \n            11.5637,164.2771 13.8597,164.2291 C19.6617,164.1061 25.4757,164.0161 31.2717,164.2601 C34.2827,164.3871 \n            34.7937,163.2071 34.7267,160.5531 C34.5597,153.9241 34.6717,147.2871 34.6717,140.6531 C34.6717,133.6881 \n            34.5377,126.7181 34.7367,119.7581 C34.8177,116.9131 33.9317,116.0961 31.1347,116.1951" id="Fill-13" \n            fill="#8c8d8e"></path>\n            <path d="M182.5937,62.2083 C175.8157,62.4493 169.0307,62.4883 162.2477,62.6073 L162.2467,62.6073 \n            C161.0087,63.1583 161.4327,64.2813 161.4317,65.1903 C161.4087,83.2963 161.4087,101.4033 161.4347,\n            119.5103 C161.4357,120.4033 160.9787,121.5473 162.2837,122.0423 C169.0747,122.1203 175.8697,122.1063 \n            182.6567,122.3223 C185.0277,122.3973 185.2947,121.3543 185.2887,119.3853 C185.2347,101.3103 \n            185.2377,83.2343 185.290773,65.1593 C185.2967,63.1633 184.9367,62.1253 182.5937,62.2083" \n            id="Fill-15" fill="#8c8d8e"></path>\n            <path d="M178.6747,133.095 C186.1527,133.096 193.6297,133.02 201.1057,133.12 C206.6837,133.197 \n            209.9207,136.107 209.9837,141.656 C210.1537,156.606 210.1427,171.56 209.9877,186.51 C209.9317,\n            192.015 206.6527,195.159 201.1977,195.197 C185.9127,195.303 170.6257,195.306 155.3397,195.216 \n            C149.4057,195.182 146.3497,192.185 146.3107,186.367 C146.2127,171.582 146.2197,156.795 146.3047,\n            142.01 C146.3387,136.149 149.3577,133.194 155.2477,133.118 C163.0557,133.019 170.8657,133.094 \n            178.6747,133.095" id="Fill-17" fill="#fbc0af"></path>\n            <path d="M186.1288,150.0833 C184.6798,156.9563 182.9098,165.3223 181.1508,173.6913 C180.7868,\n            175.4293 179.7388,176.1553 177.9798,176.1143 C176.1458,176.0713 175.3328,175.0033 174.9608,\n            173.4093 C173.0558,165.2363 171.0608,157.0593 170.2818,148.6993 C169.8138,143.6663 173.1078,\n            140.3553 177.7748,140.2323 C182.7748,140.1013 186.1058,143.4083 186.1288,150.0833" \n            id="Fill-19" fill="#FDFDFC"></path>\n            <path d="M177.7314,188.0823 C175.7614,187.9153 174.3044,186.6683 174.3184,184.3533 C174.3334,\n            182.0403 175.8334,180.6253 178.1304,180.6793 C180.3624,180.7313 182.0564,182.0443 181.9314,\n            184.4023 C181.8194,186.5383 180.5864,188.1203 177.7314,188.0823" id="Fill-21" fill="#FCF6F3"></path>\n        </g>\n    </g>\n    </svg>');var d=Fd(h,"text",[1]);Ld(h,{"font-size":"".concat(iR(c,o),"px")}),d.html(s)}},{key:"draw",value:function(t){this.render(t||document.getElementById(this.renderAt()))}},{key:"updateWrapper",value:function(t){return this.name(t.name),this.boundBox(t.config.dimensions),this.setParams(t),this}},{key:"setParams",value:function(t){var e=t.config,n=e.target,r=e.className;return this.component=t.component,this.params=t,this.target(n),this.className(r),this.position(t.config.position),this}}]),n}(AT);function oR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function cR(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?oR(Object(n),!0).forEach((function(e){XC()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):oR(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var uR={title:{headerCell:"titleCell",configType:WP},subtitle:{headerCell:"subtitleCell",configType:VP}},sR=(rR={},XC()(rR,"left","left"),XC()(rR,"right","right"),XC()(rR,"center","h-center"),rR),lR=function(t){var e,n=t.components,r=n.rows,i=n.columns,a=n.values;return e={rows:r,columns:i,values:a},Object.keys(e).every((function(t){return e[t]}))},fR=function(t,e,n){var r=null,i=n.components,a=n.layoutConfig,o=uR[t],c=o.headerCell,u=o.configType,s={target:"canvas"};if(i.headers&&i.headers[c]){var l=a[t],f={name:t,component:i.headers[c],config:l=Object.assign({},l,cR(cR({classPrefix:a.classPrefix},s),{},{alignWith:"".concat(hD[0],"-").concat(dD[1]),alignment:sR[l.align],className:u.className}))},h=e.getComponent(t);r=h?h.updateWrapper(f):new DT(f)}return r},hR=function(t,e,n){for(var r=e.components,i=e.measurement,a=0,o=0,c=Object.values(r.headers);o<c.length;o++){a+=c[o].logicalSpace().height}if(!n){var u={height:i.canvasHeight-a,width:i.canvasWidth},s=t.getComponent("grid"),l=s&&s.getBoundBox()||u,f=l.height,h=l.width,d={name:"message",component:null,config:cR(cR({},{target:"canvas"}),{},{dimensions:{height:f,width:h},message:"Insufficient data or incorrect configurations",classPrefix:UP,position:"top"})},p=t.getComponent("message");return p?p.updateWrapper(d):new aR(d)}return null},dR=function(t,e,n,r,i){if(i){var a=n.layoutConfig,o={target:"canvas"},c=a.scrollBar,u=r.viewInfo().layoutDimensions,s=u.actualCenterMeasures,l=u.unitHeights,f=u.unitWidths,h=(A=c[t],{vertical:{componentName:"verticalScrollBar",width:"thickness",height:"layoutBasedMeasure",layoutBasedMeasure:"height",viewMeasure:"viewHeight",rowAlign:1,colAlign:"right"===A.align?2:0,position:A.align,alignment:"top"},horizontal:{componentName:"horizontalScrollBar",width:"layoutBasedMeasure",layoutBasedMeasure:"width",viewMeasure:"viewWidth",height:"thickness",rowAlign:"top"===A.align?0:2,colAlign:1,position:A.align,alignment:"left"}})[t],d=h.componentName,p=h.layoutBasedMeasure,g=h.width,v=h.height,y=h.rowAlign,m=h.colAlign,b=h.viewMeasure,x=h.position,w=h.alignment,_={thickness:c.thickness,layoutBasedMeasure:u[b][1]},k=r.scrollInfo()[t],S=s[p],M=u[b][1],E={name:d,config:Object.assign({},cR(cR({classPrefix:a.classPrefix},o),{},{scrollBarComponentConfig:cR(cR({},c),{},{classPrefix:a.classPrefix}),type:t,alignWith:"".concat(hD[y],"-").concat(dD[m]),alignment:w,position:x})),dimensions:{width:_[g],height:_[v],totalLength:S,viewLength:M,unitHeights:l,unitWidths:f}},C=e.getComponent(d);return k?C?C.updateWrapper(E):new $T(E):(C&&C.remove(),null)}var A;return null},pR=function(t,e,n){if(n){var r=null,i=e.components,a=e.layoutConfig,o=e.measurement,c={target:"canvas"};if(i.legends&&i.legends.length){var u=cR(cR(cR({},a.legend),c),{},{measurement:o}),s={name:"legend",component:i.legends,config:u},l=t.getComponent("legend");r=l?l.updateWrapper(s):new TT(s)}return r}return null},gR=function(t,e,n,r){if(r){var i={target:"canvas"},a=e.layoutConfig,o={name:"grid",component:n,config:cR(cR({},i),{},{pagination:a.pagination,classPrefix:a.classPrefix,dimensions:{height:0,width:0}})},c=t.getComponent("grid");return c?c.updateWrapper(o):new eR(o)}return null},vR=function(){function t(){RP()(this,t),this._scrollBarComponents={},this._attachedComponents={}}return OP()(t,[{key:"scrollBarComponents",value:function(){return arguments.length?(this._scrollBarComponents=arguments.length<=0?void 0:arguments[0],this):this._scrollBarComponents}},{key:"attachedComponents",value:function(){return arguments.length?(this._attachedComponents=arguments.length<=0?void 0:arguments[0],this):this._attachedComponents}},{key:"preventBrowserScroll",value:function(t,e){return this.scrollBarComponents()[t]&&(e.preventDefault(),e.stopPropagation()),this}},{key:"performAttachedScrollFunction",value:function(t,e){return Object.values(this.attachedComponents()).forEach((function(n){n.performScrollAction(t,e)})),this}},{key:"triggerScrollBarAction",value:function(t,e){return this.scrollBarComponents()[t]&&this.scrollBarComponents()[t].scrollDeltaTo(e),this}}]),t}(),yR=function(t,e){var n=Fs({},t.config()),r=e.getBoundingClientRect(),i=r.height,a=r.width,o=t.height(),c=t.width(),u=t.composition().visualGroup,s=u.placeholderInfo(),l=s.isColumnSizeEqual,f=s.isRowSizeEqual,h=s.priority,d=s.rows,p=s.columns,g=s.values,v=t.config(),y=v.minWidth,m=v.minHeight,b=v.classPrefix,x=v.showHeaders,w=v.legend,_=v.pagination,k=v.scrollBar,S=t.title()[1],M=t.subtitle()[1],E=w.position,C=function(t){var e,n=t.config().legend,r=t.title()[1],i=t.subtitle()[1],a=(e={},XC()(e,"".concat("top","-").concat("top"),["title","subtitle","group"]),XC()(e,"".concat("bottom","-").concat("bottom"),["group","subtitle","title"]),XC()(e,"".concat("top","-").concat("bottom"),["title","group","subtitle"]),XC()(e,"".concat("bottom","-").concat("top"),["subtitle","group","title"]),e),o=[["legend","layout"],["layout","legend"]],c=r.position||"top",u=i.position||"top";return{headers:a["".concat(c,"-").concat(u)],legends:"left"===n.position||"top"===n.position?o[0]:o[1]}}(t);i=Math.floor(i),a=Math.floor(a);var A=Math.max(o>0?o:i,m),P=Math.max(c>0?c:a,y),D=function(t,e,n){var r=0,i={},a=t.subtitle(),o=ST(a[0]);return e>=200&&n>=200&&["title","subtitle"].forEach((function(e){var n=t[e](),c=ST(n[0]);if(c){var u=n[1];u.width=t.width(),u.height=t.height(),u.classPrefix=t.config().classPrefix,u.content=c,u.padding="title"===e&&o&&!o.length?a[1].padding:u.padding;var s=MT(u,e,t.dependencies().smartlabel,t["".concat(e,"Cell")]),l=s.height,f=s.cell;i["".concat(e,"Cell")]=f,t._composition[e]=f,r+=l}})),{headerHeight:r,headers:i}}(t,A,P),I=D.headers,T=D.headerHeight,R=function(t,e,n,r){var i={height:n,width:r,headerHeight:e},a=t.config().legend,o=a.show,c=a.position;a.classPrefix=t.config().classPrefix;var u="left"===c||"right"===c?"vertical":"horizontal";return a.show=o?"vertical"===u&&r>200||"horizontal"===u&&n>200:o,a.align=u,ET(a,t,i,t.composition().legend||{})}(t,T,A,P);t._composition.legend={},R.forEach((function(e){t._composition.legend[e.scaleType]=e.legend}));var N=function(t,e,n,r){var i=t.map((function(t){return t.legend.measurement()})),a={width:0,height:0};return i.forEach((function(t){var i,o;o=Math.min(t.width,t.maxWidth),i=Math.min(t.height,t.maxHeight),"horizontal"===e.align?a.width+o>r?(a.width=r,a.height+=i):(a.width+=o,a.height=Math.max(a.height,i)):a.height+i>n?(a.height=i,a.width+=o):(a.height+=i,a.width=Math.max(a.width,o))})),"horizontal"===e.align&&(a.width=r),a}(R,w,A,P),O="left"===E||"right"===E?N.width:0,F="top"===E||"bottom"===E?N.height:0,L={headers:I,legends:R,canvases:[t],rows:d,columns:p,values:g,cornerMatrices:u.cornerMatrices()},j={mountSpace:{height:i,width:a},headerHeight:T,legendSpace:N,canvasWidth:P,canvasHeight:A,width:P-O,height:A-T-F,minUnitHeight:t.minUnitHeight(),minUnitWidth:t.minUnitWidth()};return{layoutConfig:n=Fs(n,{classPrefix:b,showHeaders:x,border:Fs(u.metaData().border,t.config().border),layoutArrangement:C,legend:w,buffer:k.thickness,pagination:_,title:S,subtitle:M,isColumnSizeEqual:l,isRowSizeEqual:f,mount:e,priority:h}),components:L,measurement:j}},mR={title:0,subtitle:1,legend:2,verticalScrollBar:3,horizontalScrollBar:4,grid:5,message:6},bR={0:"title",1:"subtitle",2:"legend",3:"verticalScrollBar",4:"horizontalScrollBar",5:"grid",6:"message"},xR=function(t,e){var n=t._layoutManager,r=t.layout(),i=mR.grid,a=function(t,e,n){var r=t._layoutManager,i=lR(n);return{title:fR("title",r,n),subtitle:fR("subtitle",r,n),message:hR(r,n,i),legend:pR(r,n,i),grid:gR(r,n,e,i),verticalScrollBar:dR("vertical",r,n,e,i),horizontalScrollBar:dR("horizontal",r,n,e,i)}}(t,r,e),o=Object.keys(mR).map((function(t){return a[t]}));o[i]&&function(t,e){var n=mR.verticalScrollBar,r=mR.grid,i=t[mR.horizontalScrollBar],a=t[n],o=t[r],c=new vR,u={};a&&(u.vertical=a),i&&(u.horizontal=i),c.scrollBarComponents(u).attachedComponents({grid:o}),e.composition().hScrollBar=i,e.composition().vScrollBar=a,[i,a].forEach((function(t){t&&t.manager(c)})),o.scrollBarManager(c)}(o,t),o.forEach((function(t,e){if(!t){var r=bR[e];n.removeComponent(r)}})),n.registerComponents(o).compute(),function(t){t.forEach((function(t){t&&t.attachListener()}))}(o)};function wR(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return _R(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _R(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,c=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return o=t.done,t},e:function(t){c=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(c)throw a}}}}function _R(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var kR,SR=function(t){var e=gt.FieldType.DIMENSION;return t.some((function(t){return t.type()===e}))},MR=function(t){var e=t.rowFacets,n=t.colFacets,r=t.rowProjections,i=t.colProjections;if(e.length||n.length)return!0;var a=i.flat(),o=r.flat();return!(!SR(a)&&!SR(o)||!(a.length>1||o.length>1))},ER=function(t,e,n){var r=gt.FieldType.MEASURE,i=t.context.composition().visualGroup.resolver().getAllFields();if(MR(i)){var a,o=e.fields(),c=o.x,u=o.y;c.length&&u.length&&(c[0].type()===r?a=["".concat(c[0])]:u[0].type()===r&&(a=["".concat(u[0])]),n.selectedMeasures=a)}},CR=function(t,e,n,r){var i,a=r.union,o=[],c=[],u=new Map;c=a?t:[[n]];var s=new Set,l=!0;return c.forEach((function(t){t.forEach((function(t){var n=t.firebolt().actions().behavioural[e].propagationIdentifiers();if(n){var r=n.identifiers,a=n.idMeasureNameMap,c=void 0===a?new Map:a;n.fields&&n.fields.map((function(t){return t.name})).forEach((function(t){s.add(t)})),(i=n.interpolated)?o=Object.assign({},r):(o=[].concat(qC()(o),qC()(r||[])),u=function(t,e){var n,r=wR(e);try{for(r.s();!(n=r.n()).done;){var i=N()(n.value,2),a=i[0],o=i[1],c=t.get(a);c?c.add(o):t.set(a,new Set([o]))}}catch(t){r.e(t)}finally{r.f()}return t}(u,c))}l=l&&null===n}))})),{fields:s.size?qC()(s):[],propIdentifiers:l?null:o,measureNames:u,interpolated:i}},AR=function(t,e,n){var r=e.behaviours,i=e.sideEffects,a=function(t,e){var n={};return Object.keys(e.actions().behavioural).forEach((function(e){var r=ks(t[e],t["*"]);r&&(n[e]=r)})),n}(r,t);for(var o in a){var c,u=t.getBehaviouralAction(o);u.setApplyChecker((c={},XC()(c,o,a[o]),XC()(c,"*",r["*"]),c)),n&&u.propagateWith(n,!0)}var s=function(t,e){var n={};return Object.keys(e.sideEffects()).forEach((function(e){var r=ks(t[e],t["*"]);r&&(n[e]=r)})),n}(i,t);for(var l in s){var f;t.getSideEffectInstance(l).setApplyChecker((f={},XC()(f,l,s[l]),XC()(f,"*",i["*"]),f))}},PR=function(t){var e=t.context.composition().visualGroup;if(e){var n=t.context.composition().visualGroup.resolver().facets(),r=[].concat(qC()(n.rowFacets.map((function(t){return"".concat(t)}))),qC()(n.colFacets.map((function(t){return"".concat(t)})))),i=e.matrixInstance().value,a=t.interactionPolicy(),o=a.behaviours,c=a.sideEffects;i.each((function(t){var e=t.valueOf().firebolt();AR(e,{behaviours:o,sideEffects:c},r)})),AR(t,{behaviours:o,sideEffects:c},r)}},DR={tooltip:function(t,e){var n=e.context.composition().visualGroup.resolver().getAllFields();return MR(n)?{selectionSummary:{order:1,className:"tooltip-content-container-selectionSummary-crosstab",showMultipleMeasures:!0},highlightSummary:{order:0,className:"tooltip-content-container-highlightSummary-crosstab"}}:{selectionSummary:{order:0,className:"tooltip-content-container-selectionSummary-default",showMultipleMeasures:!1},highlightSummary:{order:1,className:"tooltip-content-container-highlightSummary-default"}}},selectionBox:function(t,e){var n,r,i,a,o=e.context.composition().visualGroup.resolver().getAllFields(),c=Cs(t.sideEffects,"selectionBox","persistent"),u=t.behaviours.brush.mode,s={};return void 0===c&&(r=(n=o).rowProjections,i=n.colProjections.flat(),a=r.flat(),jD(i)&&jD(a)?s.persistent=!0:s.persistent=!1),u&&(s.brush=u),s}},IR=function(t,e,n){var r=ks(e[t],e.sideEffects[t]);if(t in DR){var i=DR[t](e,n);return Fs(i,r)}return r||{}},TR=function(t){var e=t.context.config().interaction,n=t.context.composition().visualGroup,r=n.resolver().getAllFields(),i=r.rowProjections,a=r.colProjections,o=i.flat(),c=a.flat(),u=c.flat().filter((function(t){return"temporal"===t.subtype()})),s=o.flat().filter((function(t){return"temporal"===t.subtype()}));if(u.length&&jD(o)||s.length&&jD(c)){var l=e.behaviours.brush,f=e.sideEffects.selectionBox;l.mode=ks(l.mode,u.length?"x":"y"),f.persistent=ks(f.persistent,!0)}t.config(Object.assign({},e,{valueParser:n.valueParser()}));var h=t.sideEffects(),d=!1;e.sideEffects.tooltip.common?(h.tooltip.enable(),d=!0):h.tooltip.disable(),function(t,e,n){var r=e.context.composition().visualGroup,i=r.matrixInstance().value,a=e.sideEffects();for(var o in a){var c=a[o],u=IR(o,t,e);c.config(u)}i.each((function(i){var a=i.source().firebolt();a.groupFirebolt(e),a.config(Object.assign({},t,{valueParser:r.valueParser()}));var o=a.sideEffects();for(var c in o){var u=o[c],s=IR(c,t,e);u.config(s)}n&&a.sideEffects().tooltip.disable()}))}(e,t,d)},RR=function(t,e){var n=t.sourceCanvas,r=e.sourceCanvas();return!n||r===n},NR=function(t,e){var n=t.fields||[],r=e.data().getSchema().map((function(t){return t.name}));return t.sourceCanvas===e.sourceCanvas()||(!n.length||Tl(n,r).length)},OR=function(t,e,n){if("visual-group"===e.target())return t.sourceCanvas===e.sourceCanvas();var r=t.sourceCanvas===e.sourceCanvas();return!t.sourceUnit||(r&&t.sourceUnit===e.id()||null===t.criteria||n&&null===n.data)},FR={behaviours:{"*":RR,"selection-highlight":function(t,e){return t.sourceCanvas===e.sourceCanvas()?t.sourceUnit!==e.id()||null===t.criteria:!e._propagationBehaviourMap[t.sourceAction].includes("filter")||null===t.criteria},highlight:function(t,e){return"visual-group"===e.target()||(!t.sourceUnit||!RR(t,e)||"canvas"!==t.sourceType||function(t,e){return!t.sourceUnit||t.sourceUnit===e.id()}(t,e))},select:OR,brush:OR,filter:function(t,e){return"canvas"!==t.sourceType||t.sourceCanvas!==e.sourceCanvas()}},sideEffects:(kR={"*":RR,selectionBox:function(t,e){return t.sourceUnit===e.id()},tooltip:NR,highlighter:NR},XC()(kR,k.AXIS_LABEL_HIGHLIGHTER,NR),XC()(kR,"anchors",NR),XC()(kR,"crossline",NR),kR)};function LR(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=XD()(t);if(e){var i=XD()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return qD()(this,n)}}var jR=function(t,e,n){return new Ck({selectionSet:t,type:e,filteredModel:function(t){return t?t.replica():null},data:n})},BR=function(t){UD()(n,t);var e=LR(n);function n(){var t;RP()(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];(t=e.call.apply(e,[this].concat(i)))._entryExitSet=new Map,t._payloads={},t._propagationCallback=null,t.interactionPolicy(t.constructor.defaultInteractionPolicy());var o=t.context._throwback;return t.registerPropagationBehaviourMap({select:["selection-highlight"],brush:["brush-highlight"]}),t._propagationDms={},o.registerImmediateListener([ct.MATRIX_CREATED],(function(){var e=t.context.composition().visualGroup;if(PR(WD()(t)),e){TR(WD()(t));var n=t.context.composition().visualGroup.matrixInstance().value;o.registerImmediateListener("behaviourDispatched",(function(e){var r=N()(e,2)[1];n.count()===r&&(t._propagationCallback&&t._propagationCallback(),o.commit("behaviourDispatched",0))})),e.getGroupByData().on("propagation",(function(e,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};t._propagationDms[r.sourceAction]&&t._propagationDms[r.sourceAction].dispose(!1),t._propagationDms[r.sourceAction]=e,t._propagationCallback=function(){var a=r.action,o=n.findPlaceHolderById(r.sourceUnit),c=t._behaviourEffectMap,u=n.matrix()[0][0];a.forEach((function(n){var a=t.getBehaviouralAction(n),s=a&&a.shouldApply(r,{}),l=t.createEntryExitSet(n,e);if(!o&&t._targetUnit||(t._targetUnit=o?o.instance:u.source()),s){var f=t.getApplicableSideEffects(c[n],r,i);f.length&&(ER(WD()(t),t._targetUnit,r),t.applySideEffects(f,l,r))}}))}}))}})),t}return OP()(n,[{key:"interactionPolicy",value:function(){return arguments.length?(this._interactionPolicy=Fs(Fs({},this.constructor.defaultInteractionPolicy()),(arguments.length<=0?void 0:arguments[0])||{}),PR(this),this):this._interactionPolicy}},{key:"registerSideEffects",value:function(t){for(var e in t)this._sideEffectDefinitions[t[e].formalName()]=t[e];return this.initializeSideEffects(),this}},{key:"target",value:function(){return"visual-group"}},{key:"id",value:function(){return this.context.alias()}},{key:"data",value:function(){var t=this.context.composition().visualGroup;if(arguments.length){var e=arguments.length<=0?void 0:arguments[0];t.groupedData(e);var n=this._entryExitSet;return n.forEach((function(t,e){if("filter"!==e){var r=t.mergedEnter,i=t.mergedExit;i._model&&i._model.dispose(!1),r._model&&r._model.dispose(!1),n.delete(e)}})),this}return t.getGroupByData()}},{key:"resetData",value:function(){return this.context.composition().visualGroup.resetData(),this}},{key:"propagate",value:function(t,e,n){var r=this.context.composition().visualGroup.matrixInstance().value,i=r.getAllDataModelIds(),a=r.findPlaceHolderById(n.sourceId),o=this.getPropagationIdentifiers(t,a),c=o.propIdentifiers,u=o.measureNames,s=o.interpolated,l=o.fields,f=this.getPropagationSource();this._payloads[t]=Object.assign({},{measureNames:u},e),f.propagate(e.criteria?c:null,Object.assign({},e,{action:this.getPropagationBehaviour(t),sourceAction:t,propagationSourceId:this.id(),sourceCanvas:this.context.alias(),sourceUnit:n.sourceId,applyOnSource:n.applyOnSource,sourceType:"canvas",measureNames:u,interpolated:s,fields:l}),{save:this.getPropagationBehaviour(t).includes("filter"),targetDms:[f.id()].concat(qC()(i))})}},{key:"getPropagationBehaviour",value:function(t){return this._propagationBehaviourMap[t]||t}},{key:"getPropagationSource",value:function(){return this.context.composition().visualGroup._originalGroupedData}},{key:"sourceCanvas",value:function(){return this.context.alias()}},{key:"getApplicableSideEffects",value:function(t,e,n){var r=this.context.config().interaction.tooltip.mode;n.propPayload=n.propPayload||e;var i=this.sideEffects();return(t=e.sideEffects||t).filter((function(t){return!(t.name===aS&&"fragmented"===r||!i[t.name])&&i[t.name].shouldApply(e,n)}))}},{key:"createEntryExitSet",value:function(t,e){if(this._entryExitSet.get(t)){var n=this._entryExitSet.get(t),r=n.mergedEnter,i=n.mergedExit;i._model&&i._model.dispose(!1),r._model&&r._model.dispose(!1)}var a,o=this.context.composition().visualGroup.resolver().units(),c=[];return o.forEach((function(e){e.forEach((function(e){var n=e.firebolt().getBehaviouralAction(t).getSelectionSet();n.getEntrySetLength()&&(a=e),c.push(n)}))})),this._targetUnit=a,this._entryExitSet.set(t,{entrySet:[jR(c,"oldEntry",e),jR(c,"newEntry",e)],exitSet:[jR(c,"oldExit",e),jR(c,"newExit",e)],mergedEnter:jR(c,"mergedEnter",e),mergedExit:jR(c,"mergedExit",e),completeSet:jR(c,"complete",this.data())}),this._entryExitSet.get(t)}},{key:"getEntryExitSet",value:function(t){return this._entryExitSet.get(t)}},{key:"getPlotPointsFromIdentifiers",value:function(){var t;return(t=this._targetUnit).getPlotPointsFromIdentifiers.apply(t,arguments)}},{key:"getDrawingContext",value:function(){return this._targetUnit.getDrawingContext()}},{key:"getSourceInfo",value:function(){return this._targetUnit.getSourceInfo()}},{key:"layers",value:function(){return this._targetUnit.layers()}},{key:"getPropagationIdentifiers",value:function(t,e){var n=this.config().behaviours,r=this.context.composition().visualGroup.resolver().units();return CR(r,t,e.instance,{union:Cs(n[t],"common")})}},{key:"getPayload",value:function(t){return this._payloads[t]}},{key:"resetAll",value:function(t){this.context.composition().visualGroup.resolver().units().forEach((function(e){e.forEach((function(e){e.firebolt().getBehaviouralAction(t).reset()}))}))}},{key:"sanitizedPayload",value:function(t){var e=Object.assign({},t);return t.sideEffects&&(e.sideEffects=t.sideEffects.map((function(t){return{name:t}}))),e}},{key:"dispatchBehaviour",value:function(t,e){var n=e.criteria,r=this.data(),i=function(t,e){if(null===t)return{query:null,fields:[]};var n=t.range,r=t.dimensions,i=[],a=[];return r&&(r instanceof Array?function(){var t=r[0];a.push.apply(a,Gp()(t));for(var e=[],n=function(n){t.forEach((function(t,i){e.push({field:t,value:r[n][i],operator:"eq"})}))},o=1;o<r.length;o++)n(o);i.push({operator:"and",conditions:e})}():Ju(r)&&i.push({operator:"and",conditions:Object.keys(r).map((function(t){return{field:t,value:r[t],operator:"in"}}))})),n&&(a.push.apply(a,Gp()(Object.keys(n))),i.push(e.getFilterRangeQuery(n))),{query:{conditions:i,operator:"and"},fields:a}}(n,this.data()),a=i.query,o=i.fields,c=void 0===o?[]:o,u=this.sanitizedPayload(e),s=this.context.composition().visualGroup.matrixInstance().value.getAllDataModelIds();r.propagate(a,Object.assign({},{action:[t],sourceAction:t,fields:c,propagationSourceId:this.id(),sourceType:"canvas",sourceCanvas:this.id()},u),{isQuery:!0,save:this.getPropagationBehaviour(t).includes("filter"),targetDms:[r.id()].concat(qC()(s))})}},{key:"propagateWith",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=this.context.composition().visualGroup.matrixInstance().value;r.each((function(r){r.source().firebolt().propagateWith(t,e,n)}))}}],[{key:"defaultInteractionPolicy",value:function(){return FR}}]),n}(kk),zR={app:{group:{},units:{},layers:{},canvas:{}},local:{canvas:{},group:{},units:{},layers:{}}};function HR(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=XD()(t);if(e){var i=XD()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return qD()(this,n)}}var WR,VR,UR=(WR=0,function(){return WR++}),GR=function(t){UD()(n,t);var e=HR(n);function n(t){var r,i;RP()(this,n),(i=e.call(this))._allOptions=Object.assign({},zD,GP),i._registry={},i._composition={},i._cachedProps={},i._alias=null,i._renderedResolve=null,i._renderedPromise=new Promise((function(t){i._renderedResolve=t})),i._composition.layout=new AI,i._store=new dp(zR),i._throwback=new dp((r={},XC()(r,ct.MATRIX_CREATED,!1),XC()(r,ct.ON_LAYER_DRAW,null),XC()(r,"propagationInfo",null),XC()(r,"behaviourDispatched",0),r));var o=a.CANVAS_LOCAL_NAMESPACE,c=Object.assign({},zD,GP,qP);return pp(WD()(i),c,i._store,{namespace:o}),i.dependencies(Object.assign({},t,i._dependencies)),i.firebolt(new BR(WD()(i),{behavioural:Object.assign({},_,{brush:IM}),physical:rS,physicalBehaviouralMap:{}},S,pM)),i.alias("canvas-".concat(UR())),i.title("",{}),i.subtitle("",{}),i.legend({}),i.color({}),i.shape({}),i.size({}),function(t){var e=t._store,n=Object.keys(t._allOptions),r=[].concat(qC()(n),qC()(Object.keys(qP))),i=[].concat(qC()(n),qC()(Object.keys(qP))).map((function(t){return"".concat(a.CANVAS_LOCAL_NAMESPACE,".").concat(t)}));e.registerChangeListener(i,(function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];var a=FD(r,n);a&&t.mount()&&(OD(t),t.render()),LD(t)}),!0)}(WD()(i)),i._layoutManager=new RD({className:"muze-group-container"}),i}return OP()(n,[{key:"layout",value:function(){return arguments.length?this:this.composition().layout}},{key:"composition",value:function(){return arguments.length?this:this._composition}},{key:"done",value:function(){return this._renderedPromise}},{key:"alias",value:function(){if(arguments.length){var t=this.composition().visualGroup;return this._alias=arguments.length<=0?void 0:arguments[0],t&&t.alias(this.alias()),this}return this._alias}},{key:"firebolt",value:function(){return arguments.length?(this._firebolt=arguments.length<=0?void 0:arguments[0],this):this._firebolt}},{key:"registry",value:function(){if(arguments.length){var t=arguments.length<=0?void 0:arguments[0],e=Object.assign({},t.components),n=Object.assign({},t.componentSubRegistry),r=Object.assign({},t.interactions);this._registry={components:e,componentSubRegistry:n,interactions:r};var i=ND(this);return this._composition.visualGroup=i[0],BD(this),this.composition().visualGroup.alias(this.alias()).store(this._store),this}return this._registry}},{key:"dependencies",value:function(){return arguments.length?(this._dependencies=arguments.length<=0?void 0:arguments[0],this):this._dependencies}},{key:"lifeCycle",value:function(t){var e=this.dependencies().lifeCycleManager;return t?(e.register(t),this):e}},{key:"legend",value:function(){return arguments.length?this:this.composition().legend}},{key:"once",value:function(t){return this.dependencies().lifeCycleManager.retrieve(t)}},{key:"render",value:function(){var t,e,n,r,i,a,o,c=this.mount(),u=this.dependencies().lifeCycleManager,s=yR(this,c);u.notify({client:this,action:"beforedraw"}),function(t,e){var n=e.components,r=e.layoutConfig,i=e.measurement,a=n.rows,o=n.columns,c=n.values,u=n.cornerMatrices,s=u.topLeft,l=u.topRight,f=u.bottomLeft,h=u.bottomRight;a&&o&&t.measurement(i).config(r).matrices({top:[s,o[0],l],center:[a[0],c,a[1]],bottom:[f,o[1],h]}).triggerReflow()}(this.layout(),s),this._layoutManager.dimension({height:s.measurement.canvasHeight,width:s.measurement.canvasWidth}),this._layoutManager.renderAt(c),xR(this,s),e=(t=this)._layoutManager,n=e.getComponent("grid"),r=e.getComponent("legend"),i=n&&n.getBoundBox(),a=t.composition().visualGroup.matrixInstance().value,o=Od("#".concat(e.getRootNodeId())).node(),r&&r.setComponentInfo({rootNode:o}),a.each((function(t){t.valueOf().parentContainerInf({el:o,dimensions:i})})),function(t){var e=0,n=t.xAxes()||[];!function(){for(var t=0;t<n.length;t++)for(var r=0;r<n[t].length;r++){var i=n[t][r].renderConfig().labels.rotation;if(i&&0!==i)return void(e=i)}}(),e&&n.forEach((function(t){t.forEach((function(t){t.renderConfig({labels:{rotation:e}}),t.smartTicks(t.setTickConfig())}))}))}(this)}},{key:"xAxes",value:function(){return this.composition().visualGroup.getAxes("x")}},{key:"yAxes",value:function(){return this.composition().visualGroup.getAxes("y")}},{key:"getRetinalAxes",value:function(){return this.composition().visualGroup.getAxes("retinal")}},{key:"mount",value:function(){if(arguments.length){var t=arguments.length<=0?void 0:arguments[0];return"string"==typeof(arguments.length<=0?void 0:arguments[0])&&(t=Od(arguments.length<=0?void 0:arguments[0]).node()),this._mount=t,this}return this._mount}}],[{key:"withSettings",value:function(t,e,r){var i=new n(r);for(var a in t)i[a](t[a]);return i.registry(e),i}},{key:"formalName",value:function(){return"canvas"}}]),n}(YI),qR=(VR={},XC()(VR,HC.formalName(),HC),XC()(VR,ZM.formalName(),ZM),VR),YR={cells:kT,layers:o_},XR={components:function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qR,n=Object.assign({},e);return{register:function(e){var r=e.formalName();return n[r]=e,t},get:function(){return n}}}(qR),cells:kT(),layers:o_(),interactions:vM},KR=(n(109),pp),$R=Np,QR=Rs,ZR=Vp,JR=vt,tN={},eN=XR.components,nN=function(t,e){t.forEach((function(t){e.register(t)}))},rN=function(){var t=F()(T.a.mark((function t(){var e,n,r,i,a,o,c,u,s;return T.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,JR;case 2:for(s in e=t.sent,n=KR({},zD),r=N()(n,2),i=r[0],a=r[1],o=Object.assign({},XR.components.get()),c=Object.assign({},YR),u={},c)u[s]=c[s](XR[s].get());return i.canvas=function(){var t=a.serialize(),e=GR.withSettings(t,{components:o,componentSubRegistry:u,interactions:XR.interactions},i.globalDependencies());return QR(a,e,Object.keys(t)),e},i.globalDependencies=function(){return tN.smartlabel||(tN.smartlabel=new $R(1,"body")),{smartlabel:tN.smartlabel,lifeCycleManager:new ZR,DataStore:e}},i.settings=function(){return a.serialize()},i.registry=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.length?(e.forEach((function(t){var e=t.formalName();e in eN&&(o[e]=t)})),i):o},i.cellRegistry=function(){for(var t=u.cellRegistry,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return n.length?(nN(n,t),i):t.get()},i.layerRegistry=function(){for(var t=u.layerRegistry,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return n.length?(nN(n,t),i):t.get()},t.abrupt("return",i);case 15:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();rN.registry=XR,rN.Components={VisualLayer:{layers:{BaseLayer:xx,LineLayer:Zx,TextLayer:lw,TickLayer:Yw,PointLayer:kw,SimpleLayer:Cg,AreaLayer:zx,ArcLayer:$x},helpers:c_,enums:g,layerMixins:u_},VisualUnit:{constructor:ZM,helpers:v,enums:b,UnitFireBolt:EM},VisualGroup:{constructor:HC,Encoders:C,encoderHelpers:E,groupUtils:M,enums:f},Canvas:{constructor:GR},Firebolt:{constructor:kk}};var iN={sideEffects:S,standards:{SurrogateSideEffect:vS,SpawnableSideEffect:mS,GenericSideEffect:pS}},aN={behaviouralActions:_,standards:{GenericBehaviour:Tk,PersistentBehaviour:Yk,VolatileBehaviour:Nk}};rN.DataStore=gt,rN.DataModel=at,rN.version=WC.version,rN.SideEffects=iN,rN.ActionModel=BP,rN.layerFactory=i_,rN.Operators=D,rN.Behaviours=aN,rN.utils=o;var oN=rN;e.default=oN}]).default}));